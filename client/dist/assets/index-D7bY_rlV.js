function XL(t,a){for(var r=0;r<a.length;r++){const s=a[r];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in t)){const i=Object.getOwnPropertyDescriptor(s,n);i&&Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var eue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Po(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sv={exports:{}},Yh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N4;function JL(){if(N4)return Yh;N4=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(s,n,i){var o=null;if(i!==void 0&&(o=""+i),n.key!==void 0&&(o=""+n.key),"key"in n){i={};for(var d in n)d!=="key"&&(i[d]=n[d])}else i=n;return n=i.ref,{$$typeof:t,type:s,key:o,ref:n!==void 0?n:null,props:i}}return Yh.Fragment=a,Yh.jsx=r,Yh.jsxs=r,Yh}var w4;function ZL(){return w4||(w4=1,sv.exports=JL()),sv.exports}var e=ZL(),nv={exports:{}},xa={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S4;function QL(){if(S4)return xa;S4=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),f=Symbol.iterator;function b(Q){return Q===null||typeof Q!="object"?null:(Q=f&&Q[f]||Q["@@iterator"],typeof Q=="function"?Q:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,j={};function N(Q,ye,Y){this.props=Q,this.context=ye,this.refs=j,this.updater=Y||p}N.prototype.isReactComponent={},N.prototype.setState=function(Q,ye){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,ye,"setState")},N.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function w(){}w.prototype=N.prototype;function P(Q,ye,Y){this.props=Q,this.context=ye,this.refs=j,this.updater=Y||p}var k=P.prototype=new w;k.constructor=P,v(k,N.prototype),k.isPureReactComponent=!0;var $=Array.isArray,O={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function _(Q,ye,Y,J,U,ee){return Y=ee.ref,{$$typeof:t,type:Q,key:ye,ref:Y!==void 0?Y:null,props:ee}}function E(Q,ye){return _(Q.type,ye,void 0,void 0,void 0,Q.props)}function A(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===t}function z(Q){var ye={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(Y){return ye[Y]})}var M=/\/+/g;function D(Q,ye){return typeof Q=="object"&&Q!==null&&Q.key!=null?z(""+Q.key):ye.toString(36)}function I(){}function V(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(I,I):(Q.status="pending",Q.then(function(ye){Q.status==="pending"&&(Q.status="fulfilled",Q.value=ye)},function(ye){Q.status==="pending"&&(Q.status="rejected",Q.reason=ye)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function H(Q,ye,Y,J,U){var ee=typeof Q;(ee==="undefined"||ee==="boolean")&&(Q=null);var he=!1;if(Q===null)he=!0;else switch(ee){case"bigint":case"string":case"number":he=!0;break;case"object":switch(Q.$$typeof){case t:case a:he=!0;break;case x:return he=Q._init,H(he(Q._payload),ye,Y,J,U)}}if(he)return U=U(Q),he=J===""?"."+D(Q,0):J,$(U)?(Y="",he!=null&&(Y=he.replace(M,"$&/")+"/"),H(U,ye,Y,"",function(te){return te})):U!=null&&(A(U)&&(U=E(U,Y+(U.key==null||Q&&Q.key===U.key?"":(""+U.key).replace(M,"$&/")+"/")+he)),ye.push(U)),1;he=0;var pe=J===""?".":J+":";if($(Q))for(var se=0;se<Q.length;se++)J=Q[se],ee=pe+D(J,se),he+=H(J,ye,Y,ee,U);else if(se=b(Q),typeof se=="function")for(Q=se.call(Q),se=0;!(J=Q.next()).done;)J=J.value,ee=pe+D(J,se++),he+=H(J,ye,Y,ee,U);else if(ee==="object"){if(typeof Q.then=="function")return H(V(Q),ye,Y,J,U);throw ye=String(Q),Error("Objects are not valid as a React child (found: "+(ye==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":ye)+"). If you meant to render a collection of children, use an array instead.")}return he}function B(Q,ye,Y){if(Q==null)return Q;var J=[],U=0;return H(Q,J,"","",function(ee){return ye.call(Y,ee,U++)}),J}function W(Q){if(Q._status===-1){var ye=Q._result;ye=ye(),ye.then(function(Y){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=Y)},function(Y){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=Y)}),Q._status===-1&&(Q._status=0,Q._result=ye)}if(Q._status===1)return Q._result.default;throw Q._result}var K=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ye=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(ye))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)};function X(){}return xa.Children={map:B,forEach:function(Q,ye,Y){B(Q,function(){ye.apply(this,arguments)},Y)},count:function(Q){var ye=0;return B(Q,function(){ye++}),ye},toArray:function(Q){return B(Q,function(ye){return ye})||[]},only:function(Q){if(!A(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},xa.Component=N,xa.Fragment=r,xa.Profiler=n,xa.PureComponent=P,xa.StrictMode=s,xa.Suspense=u,xa.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,xa.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return O.H.useMemoCache(Q)}},xa.cache=function(Q){return function(){return Q.apply(null,arguments)}},xa.cloneElement=function(Q,ye,Y){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var J=v({},Q.props),U=Q.key,ee=void 0;if(ye!=null)for(he in ye.ref!==void 0&&(ee=void 0),ye.key!==void 0&&(U=""+ye.key),ye)!L.call(ye,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&ye.ref===void 0||(J[he]=ye[he]);var he=arguments.length-2;if(he===1)J.children=Y;else if(1<he){for(var pe=Array(he),se=0;se<he;se++)pe[se]=arguments[se+2];J.children=pe}return _(Q.type,U,void 0,void 0,ee,J)},xa.createContext=function(Q){return Q={$$typeof:o,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:i,_context:Q},Q},xa.createElement=function(Q,ye,Y){var J,U={},ee=null;if(ye!=null)for(J in ye.key!==void 0&&(ee=""+ye.key),ye)L.call(ye,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(U[J]=ye[J]);var he=arguments.length-2;if(he===1)U.children=Y;else if(1<he){for(var pe=Array(he),se=0;se<he;se++)pe[se]=arguments[se+2];U.children=pe}if(Q&&Q.defaultProps)for(J in he=Q.defaultProps,he)U[J]===void 0&&(U[J]=he[J]);return _(Q,ee,void 0,void 0,null,U)},xa.createRef=function(){return{current:null}},xa.forwardRef=function(Q){return{$$typeof:d,render:Q}},xa.isValidElement=A,xa.lazy=function(Q){return{$$typeof:x,_payload:{_status:-1,_result:Q},_init:W}},xa.memo=function(Q,ye){return{$$typeof:m,type:Q,compare:ye===void 0?null:ye}},xa.startTransition=function(Q){var ye=O.T,Y={};O.T=Y;try{var J=Q(),U=O.S;U!==null&&U(Y,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(X,K)}catch(ee){K(ee)}finally{O.T=ye}},xa.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},xa.use=function(Q){return O.H.use(Q)},xa.useActionState=function(Q,ye,Y){return O.H.useActionState(Q,ye,Y)},xa.useCallback=function(Q,ye){return O.H.useCallback(Q,ye)},xa.useContext=function(Q){return O.H.useContext(Q)},xa.useDebugValue=function(){},xa.useDeferredValue=function(Q,ye){return O.H.useDeferredValue(Q,ye)},xa.useEffect=function(Q,ye,Y){var J=O.H;if(typeof Y=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(Q,ye)},xa.useId=function(){return O.H.useId()},xa.useImperativeHandle=function(Q,ye,Y){return O.H.useImperativeHandle(Q,ye,Y)},xa.useInsertionEffect=function(Q,ye){return O.H.useInsertionEffect(Q,ye)},xa.useLayoutEffect=function(Q,ye){return O.H.useLayoutEffect(Q,ye)},xa.useMemo=function(Q,ye){return O.H.useMemo(Q,ye)},xa.useOptimistic=function(Q,ye){return O.H.useOptimistic(Q,ye)},xa.useReducer=function(Q,ye,Y){return O.H.useReducer(Q,ye,Y)},xa.useRef=function(Q){return O.H.useRef(Q)},xa.useState=function(Q){return O.H.useState(Q)},xa.useSyncExternalStore=function(Q,ye,Y){return O.H.useSyncExternalStore(Q,ye,Y)},xa.useTransition=function(){return O.H.useTransition()},xa.version="19.1.1",xa}var _4;function Rx(){return _4||(_4=1,nv.exports=QL()),nv.exports}var g=Rx();const xx=Po(g),dk=XL({__proto__:null,default:xx},[g]);var iv={exports:{}},Gh={},lv={exports:{}},ov={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A4;function eM(){return A4||(A4=1,function(t){function a(B,W){var K=B.length;B.push(W);e:for(;0<K;){var X=K-1>>>1,Q=B[X];if(0<n(Q,W))B[X]=W,B[K]=Q,K=X;else break e}}function r(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var W=B[0],K=B.pop();if(K!==W){B[0]=K;e:for(var X=0,Q=B.length,ye=Q>>>1;X<ye;){var Y=2*(X+1)-1,J=B[Y],U=Y+1,ee=B[U];if(0>n(J,K))U<Q&&0>n(ee,J)?(B[X]=ee,B[U]=K,X=U):(B[X]=J,B[Y]=K,X=Y);else if(U<Q&&0>n(ee,K))B[X]=ee,B[U]=K,X=U;else break e}}return W}function n(B,W){var K=B.sortIndex-W.sortIndex;return K!==0?K:B.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,d=o.now();t.unstable_now=function(){return o.now()-d}}var u=[],m=[],x=1,f=null,b=3,p=!1,v=!1,j=!1,N=!1,w=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function $(B){for(var W=r(m);W!==null;){if(W.callback===null)s(m);else if(W.startTime<=B)s(m),W.sortIndex=W.expirationTime,a(u,W);else break;W=r(m)}}function O(B){if(j=!1,$(B),!v)if(r(u)!==null)v=!0,L||(L=!0,D());else{var W=r(m);W!==null&&H(O,W.startTime-B)}}var L=!1,_=-1,E=5,A=-1;function z(){return N?!0:!(t.unstable_now()-A<E)}function M(){if(N=!1,L){var B=t.unstable_now();A=B;var W=!0;try{e:{v=!1,j&&(j=!1,P(_),_=-1),p=!0;var K=b;try{t:{for($(B),f=r(u);f!==null&&!(f.expirationTime>B&&z());){var X=f.callback;if(typeof X=="function"){f.callback=null,b=f.priorityLevel;var Q=X(f.expirationTime<=B);if(B=t.unstable_now(),typeof Q=="function"){f.callback=Q,$(B),W=!0;break t}f===r(u)&&s(u),$(B)}else s(u);f=r(u)}if(f!==null)W=!0;else{var ye=r(m);ye!==null&&H(O,ye.startTime-B),W=!1}}break e}finally{f=null,b=K,p=!1}W=void 0}}finally{W?D():L=!1}}}var D;if(typeof k=="function")D=function(){k(M)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,V=I.port2;I.port1.onmessage=M,D=function(){V.postMessage(null)}}else D=function(){w(M,0)};function H(B,W){_=w(function(){B(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(B){switch(b){case 1:case 2:case 3:var W=3;break;default:W=b}var K=b;b=W;try{return B()}finally{b=K}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=b;b=B;try{return W()}finally{b=K}},t.unstable_scheduleCallback=function(B,W,K){var X=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?X+K:X):K=X,B){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=K+Q,B={id:x++,callback:W,priorityLevel:B,startTime:K,expirationTime:Q,sortIndex:-1},K>X?(B.sortIndex=K,a(m,B),r(u)===null&&B===r(m)&&(j?(P(_),_=-1):j=!0,H(O,K-X))):(B.sortIndex=Q,a(u,B),v||p||(v=!0,L||(L=!0,D()))),B},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(B){var W=b;return function(){var K=b;b=W;try{return B.apply(this,arguments)}finally{b=K}}}}(ov)),ov}var k4;function tM(){return k4||(k4=1,lv.exports=eM()),lv.exports}var cv={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C4;function aM(){if(C4)return cn;C4=1;var t=Rx();function a(u){var m="https://react.dev/errors/"+u;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+u+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(a(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},n=Symbol.for("react.portal");function i(u,m,x){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:f==null?null:""+f,children:u,containerInfo:m,implementation:x}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(u,m){if(u==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,cn.createPortal=function(u,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(a(299));return i(u,m,null,x)},cn.flushSync=function(u){var m=o.T,x=s.p;try{if(o.T=null,s.p=2,u)return u()}finally{o.T=m,s.p=x,s.d.f()}},cn.preconnect=function(u,m){typeof u=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(u,m))},cn.prefetchDNS=function(u){typeof u=="string"&&s.d.D(u)},cn.preinit=function(u,m){if(typeof u=="string"&&m&&typeof m.as=="string"){var x=m.as,f=d(x,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,p=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?s.d.S(u,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:f,integrity:b,fetchPriority:p}):x==="script"&&s.d.X(u,{crossOrigin:f,integrity:b,fetchPriority:p,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},cn.preinitModule=function(u,m){if(typeof u=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=d(m.as,m.crossOrigin);s.d.M(u,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(u)},cn.preload=function(u,m){if(typeof u=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,f=d(x,m.crossOrigin);s.d.L(u,x,{crossOrigin:f,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},cn.preloadModule=function(u,m){if(typeof u=="string")if(m){var x=d(m.as,m.crossOrigin);s.d.m(u,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(u)},cn.requestFormReset=function(u){s.d.r(u)},cn.unstable_batchedUpdates=function(u,m){return u(m)},cn.useFormState=function(u,m,x){return o.H.useFormState(u,m,x)},cn.useFormStatus=function(){return o.H.useHostTransitionStatus()},cn.version="19.1.1",cn}var E4;function uk(){if(E4)return cv.exports;E4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),cv.exports=aM(),cv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T4;function rM(){if(T4)return Gh;T4=1;var t=tM(),a=Rx(),r=uk();function s(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var c=l,h=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(h=c.return),l=c.return;while(l)}return c.tag===3?h:null}function o(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function d(l){if(i(l)!==l)throw Error(s(188))}function u(l){var c=l.alternate;if(!c){if(c=i(l),c===null)throw Error(s(188));return c!==l?null:l}for(var h=l,y=c;;){var C=h.return;if(C===null)break;var F=C.alternate;if(F===null){if(y=C.return,y!==null){h=y;continue}break}if(C.child===F.child){for(F=C.child;F;){if(F===h)return d(C),l;if(F===y)return d(C),c;F=F.sibling}throw Error(s(188))}if(h.return!==y.return)h=C,y=F;else{for(var ae=!1,xe=C.child;xe;){if(xe===h){ae=!0,h=C,y=F;break}if(xe===y){ae=!0,y=C,h=F;break}xe=xe.sibling}if(!ae){for(xe=F.child;xe;){if(xe===h){ae=!0,h=F,y=C;break}if(xe===y){ae=!0,y=F,h=C;break}xe=xe.sibling}if(!ae)throw Error(s(189))}}if(h.alternate!==y)throw Error(s(190))}if(h.tag!==3)throw Error(s(188));return h.stateNode.current===h?l:c}function m(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(c=m(l),c!==null)return c;l=l.sibling}return null}var x=Object.assign,f=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),k=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function D(l){return l===null||typeof l!="object"?null:(l=M&&l[M]||l["@@iterator"],typeof l=="function"?l:null)}var I=Symbol.for("react.client.reference");function V(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===I?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case N:return"Profiler";case j:return"StrictMode";case O:return"Suspense";case L:return"SuspenseList";case A:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case p:return"Portal";case k:return(l.displayName||"Context")+".Provider";case P:return(l._context.displayName||"Context")+".Consumer";case $:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case _:return c=l.displayName||null,c!==null?c:V(l.type)||"Memo";case E:c=l._payload,l=l._init;try{return V(l(c))}catch{}}return null}var H=Array.isArray,B=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},X=[],Q=-1;function ye(l){return{current:l}}function Y(l){0>Q||(l.current=X[Q],X[Q]=null,Q--)}function J(l,c){Q++,X[Q]=l.current,l.current=c}var U=ye(null),ee=ye(null),he=ye(null),pe=ye(null);function se(l,c){switch(J(he,c),J(ee,l),J(U,null),c.nodeType){case 9:case 11:l=(l=c.documentElement)&&(l=l.namespaceURI)?X3(l):0;break;default:if(l=c.tagName,c=c.namespaceURI)c=X3(c),l=J3(c,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Y(U),J(U,l)}function te(){Y(U),Y(ee),Y(he)}function ue(l){l.memoizedState!==null&&J(pe,l);var c=U.current,h=J3(c,l.type);c!==h&&(J(ee,l),J(U,h))}function ge(l){ee.current===l&&(Y(U),Y(ee)),pe.current===l&&(Y(pe),Bh._currentValue=K)}var ce=Object.prototype.hasOwnProperty,De=t.unstable_scheduleCallback,ke=t.unstable_cancelCallback,re=t.unstable_shouldYield,Ee=t.unstable_requestPaint,Se=t.unstable_now,Ge=t.unstable_getCurrentPriorityLevel,ve=t.unstable_ImmediatePriority,Me=t.unstable_UserBlockingPriority,et=t.unstable_NormalPriority,Ie=t.unstable_LowPriority,tt=t.unstable_IdlePriority,Re=t.log,bt=t.unstable_setDisableYieldValue,Nt=null,Ut=null;function Mt(l){if(typeof Re=="function"&&bt(l),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(Nt,l)}catch{}}var pt=Math.clz32?Math.clz32:ct,_e=Math.log,Oe=Math.LN2;function ct(l){return l>>>=0,l===0?32:31-(_e(l)/Oe|0)|0}var xt=256,Ze=4194304;function nt(l){var c=l&42;if(c!==0)return c;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function gt(l,c,h){var y=l.pendingLanes;if(y===0)return 0;var C=0,F=l.suspendedLanes,ae=l.pingedLanes;l=l.warmLanes;var xe=y&134217727;return xe!==0?(y=xe&~F,y!==0?C=nt(y):(ae&=xe,ae!==0?C=nt(ae):h||(h=xe&~l,h!==0&&(C=nt(h))))):(xe=y&~F,xe!==0?C=nt(xe):ae!==0?C=nt(ae):h||(h=y&~l,h!==0&&(C=nt(h)))),C===0?0:c!==0&&c!==C&&(c&F)===0&&(F=C&-C,h=c&-c,F>=h||F===32&&(h&4194048)!==0)?c:C}function mt(l,c){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&c)===0}function Ht(l,c){switch(l){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vt(){var l=xt;return xt<<=1,(xt&4194048)===0&&(xt=256),l}function At(){var l=Ze;return Ze<<=1,(Ze&62914560)===0&&(Ze=4194304),l}function Xt(l){for(var c=[],h=0;31>h;h++)c.push(l);return c}function Ft(l,c){l.pendingLanes|=c,c!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Rt(l,c,h,y,C,F){var ae=l.pendingLanes;l.pendingLanes=h,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=h,l.entangledLanes&=h,l.errorRecoveryDisabledLanes&=h,l.shellSuspendCounter=0;var xe=l.entanglements,Ae=l.expirationTimes,He=l.hiddenUpdates;for(h=ae&~h;0<h;){var rt=31-pt(h),lt=1<<rt;xe[rt]=0,Ae[rt]=-1;var Ye=He[rt];if(Ye!==null)for(He[rt]=null,rt=0;rt<Ye.length;rt++){var Ve=Ye[rt];Ve!==null&&(Ve.lane&=-536870913)}h&=~lt}y!==0&&Ta(l,y,0),F!==0&&C===0&&l.tag!==0&&(l.suspendedLanes|=F&~(ae&~c))}function Ta(l,c,h){l.pendingLanes|=c,l.suspendedLanes&=~c;var y=31-pt(c);l.entangledLanes|=c,l.entanglements[y]=l.entanglements[y]|1073741824|h&4194090}function Kl(l,c){var h=l.entangledLanes|=c;for(l=l.entanglements;h;){var y=31-pt(h),C=1<<y;C&c|l[y]&c&&(l[y]|=c),h&=~C}}function is(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function ri(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function si(){var l=W.p;return l!==0?l:(l=window.event,l===void 0?32:p4(l.type))}function Gt(l,c){var h=W.p;try{return W.p=l,c()}finally{W.p=h}}var ks=Math.random().toString(36).slice(2),lr="__reactFiber$"+ks,Qa="__reactProps$"+ks,fs="__reactContainer$"+ks,or="__reactEvents$"+ks,ls="__reactListeners$"+ks,ps="__reactHandles$"+ks,Xl="__reactResources$"+ks,Rn="__reactMarker$"+ks;function vn(l){delete l[lr],delete l[Qa],delete l[or],delete l[ls],delete l[ps]}function qs(l){var c=l[lr];if(c)return c;for(var h=l.parentNode;h;){if(c=h[fs]||h[lr]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(l=t4(l);l!==null;){if(h=l[lr])return h;l=t4(l)}return c}l=h,h=l.parentNode}return null}function Cs(l){if(l=l[lr]||l[fs]){var c=l.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return l}return null}function Us(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l.stateNode;throw Error(s(33))}function gs(l){var c=l[Xl];return c||(c=l[Xl]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function cr(l){l[Rn]=!0}var ni=new Set,Jl={};function $n(l,c){ii(l,c),ii(l+"Capture",c)}function ii(l,c){for(Jl[l]=c,l=0;l<c.length;l++)ni.add(c[l])}var Lc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pm={},Mc={};function gm(l){return ce.call(Mc,l)?!0:ce.call(pm,l)?!1:Lc.test(l)?Mc[l]=!0:(pm[l]=!0,!1)}function Mo(l,c,h){if(gm(c))if(h===null)l.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":l.removeAttribute(c);return;case"boolean":var y=c.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){l.removeAttribute(c);return}}l.setAttribute(c,""+h)}}function Hs(l,c,h){if(h===null)l.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(c);return}l.setAttribute(c,""+h)}}function jn(l,c,h,y){if(y===null)l.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttributeNS(c,h,""+y)}}var Rc,$c;function fl(l){if(Rc===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);Rc=c&&c[1]||"",$c=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rc+l+$c}var Fc=!1;function Ic(l,c){if(!l||Fc)return"";Fc=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var lt=function(){throw Error()};if(Object.defineProperty(lt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(lt,[])}catch(Ve){var Ye=Ve}Reflect.construct(l,[],lt)}else{try{lt.call()}catch(Ve){Ye=Ve}l.call(lt.prototype)}}else{try{throw Error()}catch(Ve){Ye=Ve}(lt=l())&&typeof lt.catch=="function"&&lt.catch(function(){})}}catch(Ve){if(Ve&&Ye&&typeof Ve.stack=="string")return[Ve.stack,Ye.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var F=y.DetermineComponentFrameRoot(),ae=F[0],xe=F[1];if(ae&&xe){var Ae=ae.split(`
`),He=xe.split(`
`);for(C=y=0;y<Ae.length&&!Ae[y].includes("DetermineComponentFrameRoot");)y++;for(;C<He.length&&!He[C].includes("DetermineComponentFrameRoot");)C++;if(y===Ae.length||C===He.length)for(y=Ae.length-1,C=He.length-1;1<=y&&0<=C&&Ae[y]!==He[C];)C--;for(;1<=y&&0<=C;y--,C--)if(Ae[y]!==He[C]){if(y!==1||C!==1)do if(y--,C--,0>C||Ae[y]!==He[C]){var rt=`
`+Ae[y].replace(" at new "," at ");return l.displayName&&rt.includes("<anonymous>")&&(rt=rt.replace("<anonymous>",l.displayName)),rt}while(1<=y&&0<=C);break}}}finally{Fc=!1,Error.prepareStackTrace=h}return(h=l?l.displayName||l.name:"")?fl(h):""}function Bc(l){switch(l.tag){case 26:case 27:case 5:return fl(l.type);case 16:return fl("Lazy");case 13:return fl("Suspense");case 19:return fl("SuspenseList");case 0:case 15:return Ic(l.type,!1);case 11:return Ic(l.type.render,!1);case 1:return Ic(l.type,!0);case 31:return fl("Activity");default:return""}}function ym(l){try{var c="";do c+=Bc(l),l=l.return;while(l);return c}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function Pa(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Zd(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function bm(l){var c=Zd(l)?"checked":"value",h=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),y=""+l[c];if(!l.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var C=h.get,F=h.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return C.call(this)},set:function(ae){y=""+ae,F.call(this,ae)}}),Object.defineProperty(l,c,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(ae){y=""+ae},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function Fn(l){l._valueTracker||(l._valueTracker=bm(l))}function Zl(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var h=c.getValue(),y="";return l&&(y=Zd(l)?l.checked?"true":"false":l.value),l=y,l!==h?(c.setValue(l),!0):!1}function on(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Ro=/[\n"\\]/g;function Aa(l){return l.replace(Ro,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function $o(l,c,h,y,C,F,ae,xe){l.name="",ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"?l.type=ae:l.removeAttribute("type"),c!=null?ae==="number"?(c===0&&l.value===""||l.value!=c)&&(l.value=""+Pa(c)):l.value!==""+Pa(c)&&(l.value=""+Pa(c)):ae!=="submit"&&ae!=="reset"||l.removeAttribute("value"),c!=null?Qd(l,ae,Pa(c)):h!=null?Qd(l,ae,Pa(h)):y!=null&&l.removeAttribute("value"),C==null&&F!=null&&(l.defaultChecked=!!F),C!=null&&(l.checked=C&&typeof C!="function"&&typeof C!="symbol"),xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"?l.name=""+Pa(xe):l.removeAttribute("name")}function vm(l,c,h,y,C,F,ae,xe){if(F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(l.type=F),c!=null||h!=null){if(!(F!=="submit"&&F!=="reset"||c!=null))return;h=h!=null?""+Pa(h):"",c=c!=null?""+Pa(c):h,xe||c===l.value||(l.value=c),l.defaultValue=c}y=y??C,y=typeof y!="function"&&typeof y!="symbol"&&!!y,l.checked=xe?l.checked:!!y,l.defaultChecked=!!y,ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"&&(l.name=ae)}function Qd(l,c,h){c==="number"&&on(l.ownerDocument)===l||l.defaultValue===""+h||(l.defaultValue=""+h)}function Ql(l,c,h,y){if(l=l.options,c){c={};for(var C=0;C<h.length;C++)c["$"+h[C]]=!0;for(h=0;h<l.length;h++)C=c.hasOwnProperty("$"+l[h].value),l[h].selected!==C&&(l[h].selected=C),C&&y&&(l[h].defaultSelected=!0)}else{for(h=""+Pa(h),c=null,C=0;C<l.length;C++){if(l[C].value===h){l[C].selected=!0,y&&(l[C].defaultSelected=!0);return}c!==null||l[C].disabled||(c=l[C])}c!==null&&(c.selected=!0)}}function li(l,c,h){if(c!=null&&(c=""+Pa(c),c!==l.value&&(l.value=c),h==null)){l.defaultValue!==c&&(l.defaultValue=c);return}l.defaultValue=h!=null?""+Pa(h):""}function eu(l,c,h,y){if(c==null){if(y!=null){if(h!=null)throw Error(s(92));if(H(y)){if(1<y.length)throw Error(s(93));y=y[0]}h=y}h==null&&(h=""),c=h}h=Pa(c),l.defaultValue=h,y=l.textContent,y===h&&y!==""&&y!==null&&(l.value=y)}function pl(l,c){if(c){var h=l.firstChild;if(h&&h===l.lastChild&&h.nodeType===3){h.nodeValue=c;return}}l.textContent=c}var eo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zc(l,c,h){var y=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?y?l.setProperty(c,""):c==="float"?l.cssFloat="":l[c]="":y?l.setProperty(c,h):typeof h!="number"||h===0||eo.has(c)?c==="float"?l.cssFloat=h:l[c]=(""+h).trim():l[c]=h+"px"}function jm(l,c,h){if(c!=null&&typeof c!="object")throw Error(s(62));if(l=l.style,h!=null){for(var y in h)!h.hasOwnProperty(y)||c!=null&&c.hasOwnProperty(y)||(y.indexOf("--")===0?l.setProperty(y,""):y==="float"?l.cssFloat="":l[y]="");for(var C in c)y=c[C],c.hasOwnProperty(C)&&h[C]!==y&&zc(l,C,y)}else for(var F in c)c.hasOwnProperty(F)&&zc(l,F,c[F])}function tu(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),au=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Li(l){return au.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Mi=null;function ru(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var In=null,Ri=null;function Qt(l){var c=Cs(l);if(c&&(l=c.stateNode)){var h=l[Qa]||null;e:switch(l=c.stateNode,c.type){case"input":if($o(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=l;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Aa(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var y=h[c];if(y!==l&&y.form===l.form){var C=y[Qa]||null;if(!C)throw Error(s(90));$o(y,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(c=0;c<h.length;c++)y=h[c],y.form===l.form&&Zl(y)}break e;case"textarea":li(l,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&Ql(l,!!h.multiple,c,!1)}}}var su=!1;function Nm(l,c,h){if(su)return l(c,h);su=!0;try{var y=l(c);return y}finally{if(su=!1,(In!==null||Ri!==null)&&(G0(),In&&(c=In,l=Ri,Ri=In=null,Qt(c),l)))for(c=0;c<l.length;c++)Qt(l[c])}}function Fo(l,c){var h=l.stateNode;if(h===null)return null;var y=h[Qa]||null;if(y===null)return null;h=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(h&&typeof h!="function")throw Error(s(231,c,typeof h));return h}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ci=!1;if(oi)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){ci=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{ci=!1}var $i=null,nu=null,gl=null;function qc(){if(gl)return gl;var l,c=nu,h=c.length,y,C="value"in $i?$i.value:$i.textContent,F=C.length;for(l=0;l<h&&c[l]===C[l];l++);var ae=h-l;for(y=1;y<=ae&&c[h-y]===C[F-y];y++);return gl=C.slice(l,1<y?1-y:void 0)}function Fi(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function yl(){return!0}function Io(){return!1}function Es(l){function c(h,y,C,F,ae){this._reactName=h,this._targetInst=C,this.type=y,this.nativeEvent=F,this.target=ae,this.currentTarget=null;for(var xe in l)l.hasOwnProperty(xe)&&(h=l[xe],this[xe]=h?h(F):F[xe]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?yl:Io,this.isPropagationStopped=Io,this}return x(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=yl)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=yl)},persist:function(){},isPersistent:yl}),c}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},to=Es(di),ui=x({},di,{view:0,detail:0}),Bo=Es(ui),zo,ao,bl,Ii=x({},ui,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sa,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==bl&&(bl&&l.type==="mousemove"?(zo=l.screenX-bl.screenX,ao=l.screenY-bl.screenY):ao=zo=0,bl=l),zo)},movementY:function(l){return"movementY"in l?l.movementY:ao}}),Uc=Es(Ii),iu=x({},Ii,{dataTransfer:0}),wn=Es(iu),Bi=x({},ui,{relatedTarget:0}),q=Es(Bi),oe=x({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),we=Es(oe),Ce=x({},di,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Fe=Es(Ce),at=x({},di,{data:0}),ot=Es(at),kt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oa(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=Jt[l])?!!c[l]:!1}function Sa(){return oa}var mr=x({},ui,{key:function(l){if(l.key){var c=kt[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=Fi(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Dt[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sa,charCode:function(l){return l.type==="keypress"?Fi(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Fi(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Fr=Es(mr),qa=x({},Ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ir=Es(qa),Br=x({},ui,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sa}),ys=Es(Br),vl=x({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),ro=Es(vl),eh=x({},Ii,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),wm=Es(eh),qo=x({},di,{newState:0,oldState:0}),mi=Es(qo),lu=[9,13,27,32],so=oi&&"CompositionEvent"in window,Bn=null;oi&&"documentMode"in document&&(Bn=document.documentMode);var os=oi&&"TextEvent"in window&&!Bn,zi=oi&&(!so||Bn&&8<Bn&&11>=Bn),qi=" ",Uo=!1;function Hc(l,c){switch(l){case"keyup":return lu.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ts(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var jl=!1;function Yc(l,c){switch(l){case"compositionend":return Ts(c);case"keypress":return c.which!==32?null:(Uo=!0,qi);case"textInput":return l=c.data,l===qi&&Uo?null:l;default:return null}}function Sm(l,c){if(jl)return l==="compositionend"||!so&&Hc(l,c)?(l=qc(),gl=nu=$i=null,jl=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return zi&&c.locale!=="ko"?null:c.data;default:return null}}var Gr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sn(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!Gr[l.type]:c==="textarea"}function Gc(l,c,h,y){In?Ri?Ri.push(y):Ri=[y]:In=y,c=Z0(c,"onChange"),0<c.length&&(h=new to("onChange","change",null,h,y),l.push({event:h,listeners:c}))}var Nl=null,zn=null;function Vc(l){Y3(l,0)}function bs(l){var c=Us(l);if(Zl(c))return l}function Ys(l,c){if(l==="change")return c}var no=!1;if(oi){var qn;if(oi){var Ui="oninput"in document;if(!Ui){var Wc=document.createElement("div");Wc.setAttribute("oninput","return;"),Ui=typeof Wc.oninput=="function"}qn=Ui}else qn=!1;no=qn&&(!document.documentMode||9<document.documentMode)}function wl(){Nl&&(Nl.detachEvent("onpropertychange",yr),zn=Nl=null)}function yr(l){if(l.propertyName==="value"&&bs(zn)){var c=[];Gc(c,zn,l,ru(l)),Nm(Vc,c)}}function th(l,c,h){l==="focusin"?(wl(),Nl=c,zn=h,Nl.attachEvent("onpropertychange",yr)):l==="focusout"&&wl()}function Hi(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return bs(zn)}function Yi(l,c){if(l==="click")return bs(c)}function Kc(l,c){if(l==="input"||l==="change")return bs(c)}function ou(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var cs=typeof Object.is=="function"?Object.is:ou;function Gi(l,c){if(cs(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var h=Object.keys(l),y=Object.keys(c);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var C=h[y];if(!ce.call(c,C)||!cs(l[C],c[C]))return!1}return!0}function io(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function lo(l,c){var h=io(l);l=0;for(var y;h;){if(h.nodeType===3){if(y=l+h.textContent.length,l<=c&&y>=c)return{node:h,offset:c-l};l=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=io(h)}}function Vi(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?Vi(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function Xc(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var c=on(l.document);c instanceof l.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)l=c.contentWindow;else break;c=on(l.document)}return c}function Gs(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}var Wi=oi&&"documentMode"in document&&11>=document.documentMode,Oa=null,Ua=null,er=null,xr=!1;function Ki(l,c,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;xr||Oa==null||Oa!==on(y)||(y=Oa,"selectionStart"in y&&Gs(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),er&&Gi(er,y)||(er=y,y=Z0(Ua,"onSelect"),0<y.length&&(c=new to("onSelect","select",null,c,h),l.push({event:c,listeners:y}),c.target=Oa)))}function Un(l,c){var h={};return h[l.toLowerCase()]=c.toLowerCase(),h["Webkit"+l]="webkit"+c,h["Moz"+l]="moz"+c,h}var Vs={animationend:Un("Animation","AnimationEnd"),animationiteration:Un("Animation","AnimationIteration"),animationstart:Un("Animation","AnimationStart"),transitionrun:Un("Transition","TransitionRun"),transitionstart:Un("Transition","TransitionStart"),transitioncancel:Un("Transition","TransitionCancel"),transitionend:Un("Transition","TransitionEnd")},Ho={},ah={};oi&&(ah=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function oo(l){if(Ho[l])return Ho[l];if(!Vs[l])return l;var c=Vs[l],h;for(h in c)if(c.hasOwnProperty(h)&&h in ah)return Ho[l]=c[h];return l}var rh=oo("animationend"),sh=oo("animationiteration"),nh=oo("animationstart"),x0=oo("transitionrun"),h0=oo("transitionstart"),f0=oo("transitioncancel"),ih=oo("transitionend"),lh=new Map,_m="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_m.push("scrollEnd");function Hn(l,c){lh.set(l,c),$n(c,[l])}var Jc=new WeakMap;function _n(l,c){if(typeof l=="object"&&l!==null){var h=Jc.get(l);return h!==void 0?h:(c={value:l,source:c,stack:ym(c)},Jc.set(l,c),c)}return{value:l,source:c,stack:ym(c)}}var An=[],Yo=0,Am=0;function cu(){for(var l=Yo,c=Am=Yo=0;c<l;){var h=An[c];An[c++]=null;var y=An[c];An[c++]=null;var C=An[c];An[c++]=null;var F=An[c];if(An[c++]=null,y!==null&&C!==null){var ae=y.pending;ae===null?C.next=C:(C.next=ae.next,ae.next=C),y.pending=C}F!==0&&Cm(h,C,F)}}function du(l,c,h,y){An[Yo++]=l,An[Yo++]=c,An[Yo++]=h,An[Yo++]=y,Am|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function km(l,c,h,y){return du(l,c,h,y),Vo(l)}function Go(l,c){return du(l,null,null,c),Vo(l)}function Cm(l,c,h){l.lanes|=h;var y=l.alternate;y!==null&&(y.lanes|=h);for(var C=!1,F=l.return;F!==null;)F.childLanes|=h,y=F.alternate,y!==null&&(y.childLanes|=h),F.tag===22&&(l=F.stateNode,l===null||l._visibility&1||(C=!0)),l=F,F=F.return;return l.tag===3?(F=l.stateNode,C&&c!==null&&(C=31-pt(h),l=F.hiddenUpdates,y=l[C],y===null?l[C]=[c]:y.push(c),c.lane=h|536870912),F):null}function Vo(l){if(50<Oh)throw Oh=0,Cb=null,Error(s(185));for(var c=l.return;c!==null;)l=c,c=l.return;return l.tag===3?l.stateNode:null}var ds={};function Yn(l,c,h,y){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ps(l,c,h,y){return new Yn(l,c,h,y)}function Zc(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Xi(l,c){var h=l.alternate;return h===null?(h=Ps(l.tag,c,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=c,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&65011712,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,c=l.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h.refCleanup=l.refCleanup,h}function uu(l,c){l.flags&=65011714;var h=l.alternate;return h===null?(l.childLanes=0,l.lanes=c,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,c=h.dependencies,l.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),l}function Wo(l,c,h,y,C,F){var ae=0;if(y=l,typeof l=="function")Zc(l)&&(ae=1);else if(typeof l=="string")ae=$L(l,h,U.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case A:return l=Ps(31,h,c,C),l.elementType=A,l.lanes=F,l;case v:return Sl(h.children,C,F,c);case j:ae=8,C|=24;break;case N:return l=Ps(12,h,c,C|2),l.elementType=N,l.lanes=F,l;case O:return l=Ps(13,h,c,C),l.elementType=O,l.lanes=F,l;case L:return l=Ps(19,h,c,C),l.elementType=L,l.lanes=F,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case w:case k:ae=10;break e;case P:ae=9;break e;case $:ae=11;break e;case _:ae=14;break e;case E:ae=16,y=null;break e}ae=29,h=Error(s(130,l===null?"null":typeof l,"")),y=null}return c=Ps(ae,h,c,C),c.elementType=l,c.type=y,c.lanes=F,c}function Sl(l,c,h,y){return l=Ps(7,l,y,c),l.lanes=h,l}function Em(l,c,h){return l=Ps(6,l,null,c),l.lanes=h,l}function mu(l,c,h){return c=Ps(4,l.children!==null?l.children:[],l.key,c),c.lanes=h,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}var co=[],_l=0,Qc=null,Tm=0,Gn=[],kn=0,Ko=null,Al=1,kl="";function Xo(l,c){co[_l++]=Tm,co[_l++]=Qc,Qc=l,Tm=c}function p0(l,c,h){Gn[kn++]=Al,Gn[kn++]=kl,Gn[kn++]=Ko,Ko=l;var y=Al;l=kl;var C=32-pt(y)-1;y&=~(1<<C),h+=1;var F=32-pt(c)+C;if(30<F){var ae=C-C%5;F=(y&(1<<ae)-1).toString(32),y>>=ae,C-=ae,Al=1<<32-pt(c)+C|h<<C|y,kl=F+l}else Al=1<<F|h<<C|y,kl=l}function xu(l){l.return!==null&&(Xo(l,1),p0(l,1,0))}function hu(l){for(;l===Qc;)Qc=co[--_l],co[_l]=null,Tm=co[--_l],co[_l]=null;for(;l===Ko;)Ko=Gn[--kn],Gn[kn]=null,kl=Gn[--kn],Gn[kn]=null,Al=Gn[--kn],Gn[kn]=null}var Vr=null,br=null,Da=!1,uo=null,Ji=!1,oh=Error(s(519));function Jo(l){var c=Error(s(418,""));throw ed(_n(c,l)),oh}function g0(l){var c=l.stateNode,h=l.type,y=l.memoizedProps;switch(c[lr]=l,c[Qa]=y,h){case"dialog":ja("cancel",c),ja("close",c);break;case"iframe":case"object":case"embed":ja("load",c);break;case"video":case"audio":for(h=0;h<Lh.length;h++)ja(Lh[h],c);break;case"source":ja("error",c);break;case"img":case"image":case"link":ja("error",c),ja("load",c);break;case"details":ja("toggle",c);break;case"input":ja("invalid",c),vm(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Fn(c);break;case"select":ja("invalid",c);break;case"textarea":ja("invalid",c),eu(c,y.value,y.defaultValue,y.children),Fn(c)}h=y.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||y.suppressHydrationWarning===!0||K3(c.textContent,h)?(y.popover!=null&&(ja("beforetoggle",c),ja("toggle",c)),y.onScroll!=null&&ja("scroll",c),y.onScrollEnd!=null&&ja("scrollend",c),y.onClick!=null&&(c.onclick=Q0),c=!0):c=!1,c||Jo(l)}function Cl(l){for(Vr=l.return;Vr;)switch(Vr.tag){case 5:case 13:Ji=!1;return;case 27:case 3:Ji=!0;return;default:Vr=Vr.return}}function Ws(l){if(l!==Vr)return!1;if(!Da)return Cl(l),Da=!0,!1;var c=l.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=l.type,h=!(h!=="form"&&h!=="button")||Hb(l.type,l.memoizedProps)),h=!h),h&&br&&Jo(l),Cl(l),c===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));e:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8)if(h=l.data,h==="/$"){if(c===0){br=Rl(l.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++;l=l.nextSibling}br=null}}else c===27?(c=br,pd(l.type)?(l=Wb,Wb=null,br=l):br=c):br=Vr?Rl(l.stateNode.nextSibling):null;return!0}function Cn(){br=Vr=null,Da=!1}function y0(){var l=uo;return l!==null&&(Wn===null?Wn=l:Wn.push.apply(Wn,l),uo=null),l}function ed(l){uo===null?uo=[l]:uo.push(l)}var Zi=ye(null),us=null,El=null;function mo(l,c,h){J(Zi,c._currentValue),c._currentValue=h}function Qi(l){l._currentValue=Zi.current,Y(Zi)}function Pm(l,c,h){for(;l!==null;){var y=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),l===h)break;l=l.return}}function Om(l,c,h,y){var C=l.child;for(C!==null&&(C.return=l);C!==null;){var F=C.dependencies;if(F!==null){var ae=C.child;F=F.firstContext;e:for(;F!==null;){var xe=F;F=C;for(var Ae=0;Ae<c.length;Ae++)if(xe.context===c[Ae]){F.lanes|=h,xe=F.alternate,xe!==null&&(xe.lanes|=h),Pm(F.return,h,l),y||(ae=null);break e}F=xe.next}}else if(C.tag===18){if(ae=C.return,ae===null)throw Error(s(341));ae.lanes|=h,F=ae.alternate,F!==null&&(F.lanes|=h),Pm(ae,h,l),ae=null}else ae=C.child;if(ae!==null)ae.return=C;else for(ae=C;ae!==null;){if(ae===l){ae=null;break}if(C=ae.sibling,C!==null){C.return=ae.return,ae=C;break}ae=ae.return}C=ae}}function td(l,c,h,y){l=null;for(var C=c,F=!1;C!==null;){if(!F){if((C.flags&524288)!==0)F=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var ae=C.alternate;if(ae===null)throw Error(s(387));if(ae=ae.memoizedProps,ae!==null){var xe=C.type;cs(C.pendingProps.value,ae.value)||(l!==null?l.push(xe):l=[xe])}}else if(C===pe.current){if(ae=C.alternate,ae===null)throw Error(s(387));ae.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(l!==null?l.push(Bh):l=[Bh])}C=C.return}l!==null&&Om(c,l,h,y),c.flags|=262144}function Dm(l){for(l=l.firstContext;l!==null;){if(!cs(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function el(l){us=l,El=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Wr(l){return Lm(us,l)}function xo(l,c){return us===null&&el(l),Lm(l,c)}function Lm(l,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},El===null){if(l===null)throw Error(s(308));El=c,l.dependencies={lanes:0,firstContext:c},l.flags|=524288}else El=El.next=c;return h}var Qy=typeof AbortController<"u"?AbortController:function(){var l=[],c=this.signal={aborted:!1,addEventListener:function(h,y){l.push(y)}};this.abort=function(){c.aborted=!0,l.forEach(function(h){return h()})}},b0=t.unstable_scheduleCallback,eb=t.unstable_NormalPriority,Kr={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ch(){return{controller:new Qy,data:new Map,refCount:0}}function fu(l){l.refCount--,l.refCount===0&&b0(eb,function(){l.controller.abort()})}var pu=null,dh=0,Zo=0,Tl=null;function tb(l,c){if(pu===null){var h=pu=[];dh=0,Zo=Mb(),Tl={status:"pending",value:void 0,then:function(y){h.push(y)}}}return dh++,c.then(v0,v0),c}function v0(){if(--dh===0&&pu!==null){Tl!==null&&(Tl.status="fulfilled");var l=pu;pu=null,Zo=0,Tl=null;for(var c=0;c<l.length;c++)(0,l[c])()}}function j0(l,c){var h=[],y={status:"pending",value:null,reason:null,then:function(C){h.push(C)}};return l.then(function(){y.status="fulfilled",y.value=c;for(var C=0;C<h.length;C++)(0,h[C])(c)},function(C){for(y.status="rejected",y.reason=C,C=0;C<h.length;C++)(0,h[C])(void 0)}),y}var S=B.S;B.S=function(l,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&tb(l,c),S!==null&&S(l,c)};var T=ye(null);function G(){var l=T.current;return l!==null?l:dr.pooledCache}function Z(l,c){c===null?J(T,T.current):J(T,c.pool)}function le(){var l=G();return l===null?null:{parent:Kr._currentValue,pool:l}}var de=Error(s(460)),me=Error(s(474)),fe=Error(s(542)),be={then:function(){}};function Ne(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Te(){}function Ue(l,c,h){switch(h=l[h],h===void 0?l.push(c):h!==c&&(c.then(Te,Te),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,Be(l),l;default:if(typeof c.status=="string")c.then(Te,Te);else{if(l=dr,l!==null&&100<l.shellSuspendCounter)throw Error(s(482));l=c,l.status="pending",l.then(function(y){if(c.status==="pending"){var C=c;C.status="fulfilled",C.value=y}},function(y){if(c.status==="pending"){var C=c;C.status="rejected",C.reason=y}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,Be(l),l}throw je=c,de}}var je=null;function Le(){if(je===null)throw Error(s(459));var l=je;return je=null,l}function Be(l){if(l===de||l===fe)throw Error(s(483))}var Xe=!1;function qe(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qe(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Je(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function dt(l,c,h){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(Ga&2)!==0){var C=y.pending;return C===null?c.next=c:(c.next=C.next,C.next=c),y.pending=c,c=Vo(l),Cm(l,null,h),c}return du(l,y,c,h),Vo(l)}function it(l,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var y=c.lanes;y&=l.pendingLanes,h|=y,c.lanes=h,Kl(l,h)}}function Pt(l,c){var h=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var C=null,F=null;if(h=h.firstBaseUpdate,h!==null){do{var ae={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};F===null?C=F=ae:F=F.next=ae,h=h.next}while(h!==null);F===null?C=F=c:F=F.next=c}else C=F=c;h={baseState:y.baseState,firstBaseUpdate:C,lastBaseUpdate:F,shared:y.shared,callbacks:y.callbacks},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=c}var jt=!1;function ra(){if(jt){var l=Tl;if(l!==null)throw l}}function wt(l,c,h,y){jt=!1;var C=l.updateQueue;Xe=!1;var F=C.firstBaseUpdate,ae=C.lastBaseUpdate,xe=C.shared.pending;if(xe!==null){C.shared.pending=null;var Ae=xe,He=Ae.next;Ae.next=null,ae===null?F=He:ae.next=He,ae=Ae;var rt=l.alternate;rt!==null&&(rt=rt.updateQueue,xe=rt.lastBaseUpdate,xe!==ae&&(xe===null?rt.firstBaseUpdate=He:xe.next=He,rt.lastBaseUpdate=Ae))}if(F!==null){var lt=C.baseState;ae=0,rt=He=Ae=null,xe=F;do{var Ye=xe.lane&-536870913,Ve=Ye!==xe.lane;if(Ve?(Ca&Ye)===Ye:(y&Ye)===Ye){Ye!==0&&Ye===Zo&&(jt=!0),rt!==null&&(rt=rt.next={lane:0,tag:xe.tag,payload:xe.payload,callback:null,next:null});e:{var ta=l,Wt=xe;Ye=c;var Za=h;switch(Wt.tag){case 1:if(ta=Wt.payload,typeof ta=="function"){lt=ta.call(Za,lt,Ye);break e}lt=ta;break e;case 3:ta.flags=ta.flags&-65537|128;case 0:if(ta=Wt.payload,Ye=typeof ta=="function"?ta.call(Za,lt,Ye):ta,Ye==null)break e;lt=x({},lt,Ye);break e;case 2:Xe=!0}}Ye=xe.callback,Ye!==null&&(l.flags|=64,Ve&&(l.flags|=8192),Ve=C.callbacks,Ve===null?C.callbacks=[Ye]:Ve.push(Ye))}else Ve={lane:Ye,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},rt===null?(He=rt=Ve,Ae=lt):rt=rt.next=Ve,ae|=Ye;if(xe=xe.next,xe===null){if(xe=C.shared.pending,xe===null)break;Ve=xe,xe=Ve.next,Ve.next=null,C.lastBaseUpdate=Ve,C.shared.pending=null}}while(!0);rt===null&&(Ae=lt),C.baseState=Ae,C.firstBaseUpdate=He,C.lastBaseUpdate=rt,F===null&&(C.shared.lanes=0),md|=ae,l.lanes=ae,l.memoizedState=lt}}function ya(l,c){if(typeof l!="function")throw Error(s(191,l));l.call(c)}function zr(l,c){var h=l.callbacks;if(h!==null)for(l.callbacks=null,l=0;l<h.length;l++)ya(h[l],c)}var ea=ye(null),St=ye(0);function yt(l,c){l=ic,J(St,l),J(ea,c),ic=l|c.baseLanes}function hr(){J(St,ic),J(ea,ea.current)}function sa(){ic=St.current,Y(ea),Y(St)}var da=0,Ct=null,ia=null,Na=null,tr=!1,Pr=!1,Or=!1,vr=0,fa=0,wa=null,jr=0;function Vt(){throw Error(s(321))}function Xr(l,c){if(c===null)return!1;for(var h=0;h<c.length&&h<l.length;h++)if(!cs(l[h],c[h]))return!1;return!0}function En(l,c,h,y,C,F){return da=F,Ct=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,B.H=l===null||l.memoizedState===null?Ew:Tw,Or=!1,F=h(y,C),Or=!1,Pr&&(F=Ks(c,h,y,C)),Nr(l),F}function Nr(l){B.H=D0;var c=ia!==null&&ia.next!==null;if(da=0,Na=ia=Ct=null,tr=!1,fa=0,wa=null,c)throw Error(s(300));l===null||Ds||(l=l.dependencies,l!==null&&Dm(l)&&(Ds=!0))}function Ks(l,c,h,y){Ct=l;var C=0;do{if(Pr&&(wa=null),fa=0,Pr=!1,25<=C)throw Error(s(301));if(C+=1,Na=ia=null,l.updateQueue!=null){var F=l.updateQueue;F.lastEffect=null,F.events=null,F.stores=null,F.memoCache!=null&&(F.memoCache.index=0)}B.H=WD,F=c(h,y)}while(Pr);return F}function Ya(){var l=B.H,c=l.useState()[0];return c=typeof c.then=="function"?js(c):c,l=l.useState()[0],(ia!==null?ia.memoizedState:null)!==l&&(Ct.flags|=1024),c}function Dr(){var l=vr!==0;return vr=0,l}function Xs(l,c,h){c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~h}function vs(l){if(tr){for(l=l.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}tr=!1}da=0,Na=ia=Ct=null,Pr=!1,fa=vr=0,wa=null}function Xa(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Na===null?Ct.memoizedState=Na=l:Na=Na.next=l,Na}function ka(){if(ia===null){var l=Ct.alternate;l=l!==null?l.memoizedState:null}else l=ia.next;var c=Na===null?Ct.memoizedState:Na.next;if(c!==null)Na=c,ia=l;else{if(l===null)throw Ct.alternate===null?Error(s(467)):Error(s(310));ia=l,l={memoizedState:ia.memoizedState,baseState:ia.baseState,baseQueue:ia.baseQueue,queue:ia.queue,next:null},Na===null?Ct.memoizedState=Na=l:Na=Na.next=l}return Na}function Os(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function js(l){var c=fa;return fa+=1,wa===null&&(wa=[]),l=Ue(wa,l,c),c=Ct,(Na===null?c.memoizedState:Na.next)===null&&(c=c.alternate,B.H=c===null||c.memoizedState===null?Ew:Tw),l}function Fa(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return js(l);if(l.$$typeof===k)return Wr(l)}throw Error(s(438,String(l)))}function Js(l){var c=null,h=Ct.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var y=Ct.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(c={data:y.data.map(function(C){return C.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=Os(),Ct.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(l),y=0;y<l;y++)h[y]=z;return c.index++,h}function Jr(l,c){return typeof c=="function"?c(l):c}function tl(l){var c=ka();return xi(c,ia,l)}function xi(l,c,h){var y=l.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=h;var C=l.baseQueue,F=y.pending;if(F!==null){if(C!==null){var ae=C.next;C.next=F.next,F.next=ae}c.baseQueue=C=F,y.pending=null}if(F=l.baseState,C===null)l.memoizedState=F;else{c=C.next;var xe=ae=null,Ae=null,He=c,rt=!1;do{var lt=He.lane&-536870913;if(lt!==He.lane?(Ca&lt)===lt:(da&lt)===lt){var Ye=He.revertLane;if(Ye===0)Ae!==null&&(Ae=Ae.next={lane:0,revertLane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),lt===Zo&&(rt=!0);else if((da&Ye)===Ye){He=He.next,Ye===Zo&&(rt=!0);continue}else lt={lane:0,revertLane:He.revertLane,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null},Ae===null?(xe=Ae=lt,ae=F):Ae=Ae.next=lt,Ct.lanes|=Ye,md|=Ye;lt=He.action,Or&&h(F,lt),F=He.hasEagerState?He.eagerState:h(F,lt)}else Ye={lane:lt,revertLane:He.revertLane,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null},Ae===null?(xe=Ae=Ye,ae=F):Ae=Ae.next=Ye,Ct.lanes|=lt,md|=lt;He=He.next}while(He!==null&&He!==c);if(Ae===null?ae=F:Ae.next=xe,!cs(F,l.memoizedState)&&(Ds=!0,rt&&(h=Tl,h!==null)))throw h;l.memoizedState=F,l.baseState=ae,l.baseQueue=Ae,y.lastRenderedState=F}return C===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function Zr(l){var c=ka(),h=c.queue;if(h===null)throw Error(s(311));h.lastRenderedReducer=l;var y=h.dispatch,C=h.pending,F=c.memoizedState;if(C!==null){h.pending=null;var ae=C=C.next;do F=l(F,ae.action),ae=ae.next;while(ae!==C);cs(F,c.memoizedState)||(Ds=!0),c.memoizedState=F,c.baseQueue===null&&(c.baseState=F),h.lastRenderedState=F}return[F,y]}function gu(l,c,h){var y=Ct,C=ka(),F=Da;if(F){if(h===void 0)throw Error(s(407));h=h()}else h=c();var ae=!cs((ia||C).memoizedState,h);ae&&(C.memoizedState=h,Ds=!0),C=C.queue;var xe=ad.bind(null,y,C,l);if(nd(2048,8,xe,[l]),C.getSnapshot!==c||ae||Na!==null&&Na.memoizedState.tag&1){if(y.flags|=2048,Ol(9,ju(),yu.bind(null,y,C,h,c),null),dr===null)throw Error(s(349));F||(da&124)!==0||Mm(y,c,h)}return h}function Mm(l,c,h){l.flags|=16384,l={getSnapshot:c,value:h},c=Ct.updateQueue,c===null?(c=Os(),Ct.updateQueue=c,c.stores=[l]):(h=c.stores,h===null?c.stores=[l]:h.push(l))}function yu(l,c,h,y){c.value=h,c.getSnapshot=y,N0(c)&&w0(l)}function ad(l,c,h){return h(function(){N0(c)&&w0(l)})}function N0(l){var c=l.getSnapshot;l=l.value;try{var h=c();return!cs(l,h)}catch{return!0}}function w0(l){var c=Go(l,2);c!==null&&bi(c,l,2)}function bu(l){var c=Xa();if(typeof l=="function"){var h=l;if(l=h(),Or){Mt(!0);try{h()}finally{Mt(!1)}}}return c.memoizedState=c.baseState=l,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:l},c}function Pl(l,c,h,y){return l.baseState=h,xi(l,ia,typeof y=="function"?y:Jr)}function ab(l,c,h,y,C){if(O0(l))throw Error(s(485));if(l=c.action,l!==null){var F={payload:C,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ae){F.listeners.push(ae)}};B.T!==null?h(!0):F.isTransition=!1,y(F),h=c.pending,h===null?(F.next=c.pending=F,S0(c,F)):(F.next=h.next,c.pending=h.next=F)}}function S0(l,c){var h=c.action,y=c.payload,C=l.state;if(c.isTransition){var F=B.T,ae={};B.T=ae;try{var xe=h(C,y),Ae=B.S;Ae!==null&&Ae(ae,xe),_0(l,c,xe)}catch(He){rd(l,c,He)}finally{B.T=F}}else try{F=h(C,y),_0(l,c,F)}catch(He){rd(l,c,He)}}function _0(l,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(y){uh(l,c,y)},function(y){return rd(l,c,y)}):uh(l,c,h)}function uh(l,c,h){c.status="fulfilled",c.value=h,mh(c),l.state=h,c=l.pending,c!==null&&(h=c.next,h===c?l.pending=null:(h=h.next,c.next=h,S0(l,h)))}function rd(l,c,h){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do c.status="rejected",c.reason=h,mh(c),c=c.next;while(c!==y)}l.action=null}function mh(l){l=l.listeners;for(var c=0;c<l.length;c++)(0,l[c])()}function xh(l,c){return c}function vu(l,c){if(Da){var h=dr.formState;if(h!==null){e:{var y=Ct;if(Da){if(br){t:{for(var C=br,F=Ji;C.nodeType!==8;){if(!F){C=null;break t}if(C=Rl(C.nextSibling),C===null){C=null;break t}}F=C.data,C=F==="F!"||F==="F"?C:null}if(C){br=Rl(C.nextSibling),y=C.data==="F!";break e}}Jo(y)}y=!1}y&&(c=h[0])}}return h=Xa(),h.memoizedState=h.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xh,lastRenderedState:c},h.queue=y,h=Aw.bind(null,Ct,y),y.dispatch=h,y=bu(!1),F=rb.bind(null,Ct,!1,y.queue),y=Xa(),C={state:c,dispatch:null,action:l,pending:null},y.queue=C,h=ab.bind(null,Ct,C,F,h),C.dispatch=h,y.memoizedState=l,[c,h,!1]}function Rm(l){var c=ka();return sd(c,ia,l)}function sd(l,c,h){if(c=xi(l,c,xh)[0],l=tl(Jr)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var y=js(c)}catch(ae){throw ae===de?fe:ae}else y=c;c=ka();var C=c.queue,F=C.dispatch;return h!==c.memoizedState&&(Ct.flags|=2048,Ol(9,ju(),A0.bind(null,C,h),null)),[y,F,l]}function A0(l,c){l.action=c}function k0(l){var c=ka(),h=ia;if(h!==null)return sd(c,h,l);ka(),c=c.memoizedState,h=ka();var y=h.queue.dispatch;return h.memoizedState=l,[c,y,!1]}function Ol(l,c,h,y){return l={tag:l,create:h,deps:y,inst:c,next:null},c=Ct.updateQueue,c===null&&(c=Os(),Ct.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=l.next=l:(y=h.next,h.next=l,l.next=y,c.lastEffect=l),l}function ju(){return{destroy:void 0,resource:void 0}}function $m(){return ka().memoizedState}function hi(l,c,h,y){var C=Xa();y=y===void 0?null:y,Ct.flags|=l,C.memoizedState=Ol(1|c,ju(),h,y)}function nd(l,c,h,y){var C=ka();y=y===void 0?null:y;var F=C.memoizedState.inst;ia!==null&&y!==null&&Xr(y,ia.memoizedState.deps)?C.memoizedState=Ol(c,F,h,y):(Ct.flags|=l,C.memoizedState=Ol(1|c,F,h,y))}function hh(l,c){hi(8390656,8,l,c)}function C0(l,c){nd(2048,8,l,c)}function fh(l,c){return nd(4,2,l,c)}function Qo(l,c){return nd(4,4,l,c)}function E0(l,c){if(typeof c=="function"){l=l();var h=c(l);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function ph(l,c,h){h=h!=null?h.concat([l]):null,nd(4,4,E0.bind(null,c,l),h)}function gh(){}function yh(l,c){var h=ka();c=c===void 0?null:c;var y=h.memoizedState;return c!==null&&Xr(c,y[1])?y[0]:(h.memoizedState=[l,c],l)}function T0(l,c){var h=ka();c=c===void 0?null:c;var y=h.memoizedState;if(c!==null&&Xr(c,y[1]))return y[0];if(y=l(),Or){Mt(!0);try{l()}finally{Mt(!1)}}return h.memoizedState=[y,c],y}function ec(l,c,h){return h===void 0||(da&1073741824)!==0?l.memoizedState=c:(l.memoizedState=h,l=N3(),Ct.lanes|=l,md|=l,h)}function Fm(l,c,h,y){return cs(h,c)?h:ea.current!==null?(l=ec(l,h,y),cs(l,c)||(Ds=!0),l):(da&42)===0?(Ds=!0,l.memoizedState=h):(l=N3(),Ct.lanes|=l,md|=l,c)}function Nu(l,c,h,y,C){var F=W.p;W.p=F!==0&&8>F?F:8;var ae=B.T,xe={};B.T=xe,rb(l,!1,c,h);try{var Ae=C(),He=B.S;if(He!==null&&He(xe,Ae),Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var rt=j0(Ae,y);Nh(l,c,rt,yi(l))}else Nh(l,c,y,yi(l))}catch(lt){Nh(l,c,{then:function(){},status:"rejected",reason:lt},yi())}finally{W.p=F,B.T=ae}}function Dl(){}function al(l,c,h,y){if(l.tag!==5)throw Error(s(476));var C=Ll(l).queue;Nu(l,C,c,K,h===null?Dl:function(){return wu(l),h(y)})}function Ll(l){var c=l.memoizedState;if(c!==null)return c;c={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:K},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:h},next:null},l.memoizedState=c,l=l.alternate,l!==null&&(l.memoizedState=c),c}function wu(l){var c=Ll(l).next.queue;Nh(l,c,{},yi())}function Su(){return Wr(Bh)}function bh(){return ka().memoizedState}function P0(){return ka().memoizedState}function vh(l){for(var c=l.return;c!==null;){switch(c.tag){case 24:case 3:var h=yi();l=Je(h);var y=dt(c,l,h);y!==null&&(bi(y,c,h),it(y,c,h)),c={cache:ch()},l.payload=c;return}c=c.return}}function jh(l,c,h){var y=yi();h={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},O0(l)?kw(c,h):(h=km(l,c,h,y),h!==null&&(bi(h,l,y),Cw(h,c,y)))}function Aw(l,c,h){var y=yi();Nh(l,c,h,y)}function Nh(l,c,h,y){var C={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(O0(l))kw(c,C);else{var F=l.alternate;if(l.lanes===0&&(F===null||F.lanes===0)&&(F=c.lastRenderedReducer,F!==null))try{var ae=c.lastRenderedState,xe=F(ae,h);if(C.hasEagerState=!0,C.eagerState=xe,cs(xe,ae))return du(l,c,C,0),dr===null&&cu(),!1}catch{}finally{}if(h=km(l,c,C,y),h!==null)return bi(h,l,y),Cw(h,c,y),!0}return!1}function rb(l,c,h,y){if(y={lane:2,revertLane:Mb(),action:y,hasEagerState:!1,eagerState:null,next:null},O0(l)){if(c)throw Error(s(479))}else c=km(l,h,y,2),c!==null&&bi(c,l,2)}function O0(l){var c=l.alternate;return l===Ct||c!==null&&c===Ct}function kw(l,c){Pr=tr=!0;var h=l.pending;h===null?c.next=c:(c.next=h.next,h.next=c),l.pending=c}function Cw(l,c,h){if((h&4194048)!==0){var y=c.lanes;y&=l.pendingLanes,h|=y,c.lanes=h,Kl(l,h)}}var D0={readContext:Wr,use:Fa,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt},Ew={readContext:Wr,use:Fa,useCallback:function(l,c){return Xa().memoizedState=[l,c===void 0?null:c],l},useContext:Wr,useEffect:hh,useImperativeHandle:function(l,c,h){h=h!=null?h.concat([l]):null,hi(4194308,4,E0.bind(null,c,l),h)},useLayoutEffect:function(l,c){return hi(4194308,4,l,c)},useInsertionEffect:function(l,c){hi(4,2,l,c)},useMemo:function(l,c){var h=Xa();c=c===void 0?null:c;var y=l();if(Or){Mt(!0);try{l()}finally{Mt(!1)}}return h.memoizedState=[y,c],y},useReducer:function(l,c,h){var y=Xa();if(h!==void 0){var C=h(c);if(Or){Mt(!0);try{h(c)}finally{Mt(!1)}}}else C=c;return y.memoizedState=y.baseState=C,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:C},y.queue=l,l=l.dispatch=jh.bind(null,Ct,l),[y.memoizedState,l]},useRef:function(l){var c=Xa();return l={current:l},c.memoizedState=l},useState:function(l){l=bu(l);var c=l.queue,h=Aw.bind(null,Ct,c);return c.dispatch=h,[l.memoizedState,h]},useDebugValue:gh,useDeferredValue:function(l,c){var h=Xa();return ec(h,l,c)},useTransition:function(){var l=bu(!1);return l=Nu.bind(null,Ct,l.queue,!0,!1),Xa().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,c,h){var y=Ct,C=Xa();if(Da){if(h===void 0)throw Error(s(407));h=h()}else{if(h=c(),dr===null)throw Error(s(349));(Ca&124)!==0||Mm(y,c,h)}C.memoizedState=h;var F={value:h,getSnapshot:c};return C.queue=F,hh(ad.bind(null,y,F,l),[l]),y.flags|=2048,Ol(9,ju(),yu.bind(null,y,F,h,c),null),h},useId:function(){var l=Xa(),c=dr.identifierPrefix;if(Da){var h=kl,y=Al;h=(y&~(1<<32-pt(y)-1)).toString(32)+h,c=""+c+"R"+h,h=vr++,0<h&&(c+="H"+h.toString(32)),c+=""}else h=jr++,c=""+c+"r"+h.toString(32)+"";return l.memoizedState=c},useHostTransitionStatus:Su,useFormState:vu,useActionState:vu,useOptimistic:function(l){var c=Xa();c.memoizedState=c.baseState=l;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=rb.bind(null,Ct,!0,h),h.dispatch=c,[l,c]},useMemoCache:Js,useCacheRefresh:function(){return Xa().memoizedState=vh.bind(null,Ct)}},Tw={readContext:Wr,use:Fa,useCallback:yh,useContext:Wr,useEffect:C0,useImperativeHandle:ph,useInsertionEffect:fh,useLayoutEffect:Qo,useMemo:T0,useReducer:tl,useRef:$m,useState:function(){return tl(Jr)},useDebugValue:gh,useDeferredValue:function(l,c){var h=ka();return Fm(h,ia.memoizedState,l,c)},useTransition:function(){var l=tl(Jr)[0],c=ka().memoizedState;return[typeof l=="boolean"?l:js(l),c]},useSyncExternalStore:gu,useId:bh,useHostTransitionStatus:Su,useFormState:Rm,useActionState:Rm,useOptimistic:function(l,c){var h=ka();return Pl(h,ia,l,c)},useMemoCache:Js,useCacheRefresh:P0},WD={readContext:Wr,use:Fa,useCallback:yh,useContext:Wr,useEffect:C0,useImperativeHandle:ph,useInsertionEffect:fh,useLayoutEffect:Qo,useMemo:T0,useReducer:Zr,useRef:$m,useState:function(){return Zr(Jr)},useDebugValue:gh,useDeferredValue:function(l,c){var h=ka();return ia===null?ec(h,l,c):Fm(h,ia.memoizedState,l,c)},useTransition:function(){var l=Zr(Jr)[0],c=ka().memoizedState;return[typeof l=="boolean"?l:js(l),c]},useSyncExternalStore:gu,useId:bh,useHostTransitionStatus:Su,useFormState:k0,useActionState:k0,useOptimistic:function(l,c){var h=ka();return ia!==null?Pl(h,ia,l,c):(h.baseState=l,[l,h.queue.dispatch])},useMemoCache:Js,useCacheRefresh:P0},Im=null,wh=0;function L0(l){var c=wh;return wh+=1,Im===null&&(Im=[]),Ue(Im,l,c)}function Sh(l,c){c=c.props.ref,l.ref=c!==void 0?c:null}function M0(l,c){throw c.$$typeof===f?Error(s(525)):(l=Object.prototype.toString.call(c),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l)))}function Pw(l){var c=l._init;return c(l._payload)}function Ow(l){function c($e,Pe){if(l){var ze=$e.deletions;ze===null?($e.deletions=[Pe],$e.flags|=16):ze.push(Pe)}}function h($e,Pe){if(!l)return null;for(;Pe!==null;)c($e,Pe),Pe=Pe.sibling;return null}function y($e){for(var Pe=new Map;$e!==null;)$e.key!==null?Pe.set($e.key,$e):Pe.set($e.index,$e),$e=$e.sibling;return Pe}function C($e,Pe){return $e=Xi($e,Pe),$e.index=0,$e.sibling=null,$e}function F($e,Pe,ze){return $e.index=ze,l?(ze=$e.alternate,ze!==null?(ze=ze.index,ze<Pe?($e.flags|=67108866,Pe):ze):($e.flags|=67108866,Pe)):($e.flags|=1048576,Pe)}function ae($e){return l&&$e.alternate===null&&($e.flags|=67108866),$e}function xe($e,Pe,ze,st){return Pe===null||Pe.tag!==6?(Pe=Em(ze,$e.mode,st),Pe.return=$e,Pe):(Pe=C(Pe,ze),Pe.return=$e,Pe)}function Ae($e,Pe,ze,st){var Et=ze.type;return Et===v?rt($e,Pe,ze.props.children,st,ze.key):Pe!==null&&(Pe.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===E&&Pw(Et)===Pe.type)?(Pe=C(Pe,ze.props),Sh(Pe,ze),Pe.return=$e,Pe):(Pe=Wo(ze.type,ze.key,ze.props,null,$e.mode,st),Sh(Pe,ze),Pe.return=$e,Pe)}function He($e,Pe,ze,st){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==ze.containerInfo||Pe.stateNode.implementation!==ze.implementation?(Pe=mu(ze,$e.mode,st),Pe.return=$e,Pe):(Pe=C(Pe,ze.children||[]),Pe.return=$e,Pe)}function rt($e,Pe,ze,st,Et){return Pe===null||Pe.tag!==7?(Pe=Sl(ze,$e.mode,st,Et),Pe.return=$e,Pe):(Pe=C(Pe,ze),Pe.return=$e,Pe)}function lt($e,Pe,ze){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Pe=Em(""+Pe,$e.mode,ze),Pe.return=$e,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case b:return ze=Wo(Pe.type,Pe.key,Pe.props,null,$e.mode,ze),Sh(ze,Pe),ze.return=$e,ze;case p:return Pe=mu(Pe,$e.mode,ze),Pe.return=$e,Pe;case E:var st=Pe._init;return Pe=st(Pe._payload),lt($e,Pe,ze)}if(H(Pe)||D(Pe))return Pe=Sl(Pe,$e.mode,ze,null),Pe.return=$e,Pe;if(typeof Pe.then=="function")return lt($e,L0(Pe),ze);if(Pe.$$typeof===k)return lt($e,xo($e,Pe),ze);M0($e,Pe)}return null}function Ye($e,Pe,ze,st){var Et=Pe!==null?Pe.key:null;if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return Et!==null?null:xe($e,Pe,""+ze,st);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case b:return ze.key===Et?Ae($e,Pe,ze,st):null;case p:return ze.key===Et?He($e,Pe,ze,st):null;case E:return Et=ze._init,ze=Et(ze._payload),Ye($e,Pe,ze,st)}if(H(ze)||D(ze))return Et!==null?null:rt($e,Pe,ze,st,null);if(typeof ze.then=="function")return Ye($e,Pe,L0(ze),st);if(ze.$$typeof===k)return Ye($e,Pe,xo($e,ze),st);M0($e,ze)}return null}function Ve($e,Pe,ze,st,Et){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return $e=$e.get(ze)||null,xe(Pe,$e,""+st,Et);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case b:return $e=$e.get(st.key===null?ze:st.key)||null,Ae(Pe,$e,st,Et);case p:return $e=$e.get(st.key===null?ze:st.key)||null,He(Pe,$e,st,Et);case E:var ba=st._init;return st=ba(st._payload),Ve($e,Pe,ze,st,Et)}if(H(st)||D(st))return $e=$e.get(ze)||null,rt(Pe,$e,st,Et,null);if(typeof st.then=="function")return Ve($e,Pe,ze,L0(st),Et);if(st.$$typeof===k)return Ve($e,Pe,ze,xo(Pe,st),Et);M0(Pe,st)}return null}function ta($e,Pe,ze,st){for(var Et=null,ba=null,It=Pe,Kt=Pe=0,Ms=null;It!==null&&Kt<ze.length;Kt++){It.index>Kt?(Ms=It,It=null):Ms=It.sibling;var La=Ye($e,It,ze[Kt],st);if(La===null){It===null&&(It=Ms);break}l&&It&&La.alternate===null&&c($e,It),Pe=F(La,Pe,Kt),ba===null?Et=La:ba.sibling=La,ba=La,It=Ms}if(Kt===ze.length)return h($e,It),Da&&Xo($e,Kt),Et;if(It===null){for(;Kt<ze.length;Kt++)It=lt($e,ze[Kt],st),It!==null&&(Pe=F(It,Pe,Kt),ba===null?Et=It:ba.sibling=It,ba=It);return Da&&Xo($e,Kt),Et}for(It=y(It);Kt<ze.length;Kt++)Ms=Ve(It,$e,Kt,ze[Kt],st),Ms!==null&&(l&&Ms.alternate!==null&&It.delete(Ms.key===null?Kt:Ms.key),Pe=F(Ms,Pe,Kt),ba===null?Et=Ms:ba.sibling=Ms,ba=Ms);return l&&It.forEach(function(jd){return c($e,jd)}),Da&&Xo($e,Kt),Et}function Wt($e,Pe,ze,st){if(ze==null)throw Error(s(151));for(var Et=null,ba=null,It=Pe,Kt=Pe=0,Ms=null,La=ze.next();It!==null&&!La.done;Kt++,La=ze.next()){It.index>Kt?(Ms=It,It=null):Ms=It.sibling;var jd=Ye($e,It,La.value,st);if(jd===null){It===null&&(It=Ms);break}l&&It&&jd.alternate===null&&c($e,It),Pe=F(jd,Pe,Kt),ba===null?Et=jd:ba.sibling=jd,ba=jd,It=Ms}if(La.done)return h($e,It),Da&&Xo($e,Kt),Et;if(It===null){for(;!La.done;Kt++,La=ze.next())La=lt($e,La.value,st),La!==null&&(Pe=F(La,Pe,Kt),ba===null?Et=La:ba.sibling=La,ba=La);return Da&&Xo($e,Kt),Et}for(It=y(It);!La.done;Kt++,La=ze.next())La=Ve(It,$e,Kt,La.value,st),La!==null&&(l&&La.alternate!==null&&It.delete(La.key===null?Kt:La.key),Pe=F(La,Pe,Kt),ba===null?Et=La:ba.sibling=La,ba=La);return l&&It.forEach(function(KL){return c($e,KL)}),Da&&Xo($e,Kt),Et}function Za($e,Pe,ze,st){if(typeof ze=="object"&&ze!==null&&ze.type===v&&ze.key===null&&(ze=ze.props.children),typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case b:e:{for(var Et=ze.key;Pe!==null;){if(Pe.key===Et){if(Et=ze.type,Et===v){if(Pe.tag===7){h($e,Pe.sibling),st=C(Pe,ze.props.children),st.return=$e,$e=st;break e}}else if(Pe.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===E&&Pw(Et)===Pe.type){h($e,Pe.sibling),st=C(Pe,ze.props),Sh(st,ze),st.return=$e,$e=st;break e}h($e,Pe);break}else c($e,Pe);Pe=Pe.sibling}ze.type===v?(st=Sl(ze.props.children,$e.mode,st,ze.key),st.return=$e,$e=st):(st=Wo(ze.type,ze.key,ze.props,null,$e.mode,st),Sh(st,ze),st.return=$e,$e=st)}return ae($e);case p:e:{for(Et=ze.key;Pe!==null;){if(Pe.key===Et)if(Pe.tag===4&&Pe.stateNode.containerInfo===ze.containerInfo&&Pe.stateNode.implementation===ze.implementation){h($e,Pe.sibling),st=C(Pe,ze.children||[]),st.return=$e,$e=st;break e}else{h($e,Pe);break}else c($e,Pe);Pe=Pe.sibling}st=mu(ze,$e.mode,st),st.return=$e,$e=st}return ae($e);case E:return Et=ze._init,ze=Et(ze._payload),Za($e,Pe,ze,st)}if(H(ze))return ta($e,Pe,ze,st);if(D(ze)){if(Et=D(ze),typeof Et!="function")throw Error(s(150));return ze=Et.call(ze),Wt($e,Pe,ze,st)}if(typeof ze.then=="function")return Za($e,Pe,L0(ze),st);if(ze.$$typeof===k)return Za($e,Pe,xo($e,ze),st);M0($e,ze)}return typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint"?(ze=""+ze,Pe!==null&&Pe.tag===6?(h($e,Pe.sibling),st=C(Pe,ze),st.return=$e,$e=st):(h($e,Pe),st=Em(ze,$e.mode,st),st.return=$e,$e=st),ae($e)):h($e,Pe)}return function($e,Pe,ze,st){try{wh=0;var Et=Za($e,Pe,ze,st);return Im=null,Et}catch(It){if(It===de||It===fe)throw It;var ba=Ps(29,It,null,$e.mode);return ba.lanes=st,ba.return=$e,ba}finally{}}}var Bm=Ow(!0),Dw=Ow(!1),rl=ye(null),ho=null;function id(l){var c=l.alternate;J(Ns,Ns.current&1),J(rl,l),ho===null&&(c===null||ea.current!==null||c.memoizedState!==null)&&(ho=l)}function Lw(l){if(l.tag===22){if(J(Ns,Ns.current),J(rl,l),ho===null){var c=l.alternate;c!==null&&c.memoizedState!==null&&(ho=l)}}else ld()}function ld(){J(Ns,Ns.current),J(rl,rl.current)}function tc(l){Y(rl),ho===l&&(ho=null),Y(Ns)}var Ns=ye(0);function R0(l){for(var c=l;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||Vb(h)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function sb(l,c,h,y){c=l.memoizedState,h=h(y,c),h=h==null?c:x({},c,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var nb={enqueueSetState:function(l,c,h){l=l._reactInternals;var y=yi(),C=Je(y);C.payload=c,h!=null&&(C.callback=h),c=dt(l,C,y),c!==null&&(bi(c,l,y),it(c,l,y))},enqueueReplaceState:function(l,c,h){l=l._reactInternals;var y=yi(),C=Je(y);C.tag=1,C.payload=c,h!=null&&(C.callback=h),c=dt(l,C,y),c!==null&&(bi(c,l,y),it(c,l,y))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var h=yi(),y=Je(h);y.tag=2,c!=null&&(y.callback=c),c=dt(l,y,h),c!==null&&(bi(c,l,h),it(c,l,h))}};function Mw(l,c,h,y,C,F,ae){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,F,ae):c.prototype&&c.prototype.isPureReactComponent?!Gi(h,y)||!Gi(C,F):!0}function Rw(l,c,h,y){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,y),c.state!==l&&nb.enqueueReplaceState(c,c.state,null)}function _u(l,c){var h=c;if("ref"in c){h={};for(var y in c)y!=="ref"&&(h[y]=c[y])}if(l=l.defaultProps){h===c&&(h=x({},h));for(var C in l)h[C]===void 0&&(h[C]=l[C])}return h}var $0=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function $w(l){$0(l)}function Fw(l){console.error(l)}function Iw(l){$0(l)}function F0(l,c){try{var h=l.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function Bw(l,c,h){try{var y=l.onCaughtError;y(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function ib(l,c,h){return h=Je(h),h.tag=3,h.payload={element:null},h.callback=function(){F0(l,c)},h}function zw(l){return l=Je(l),l.tag=3,l}function qw(l,c,h,y){var C=h.type.getDerivedStateFromError;if(typeof C=="function"){var F=y.value;l.payload=function(){return C(F)},l.callback=function(){Bw(c,h,y)}}var ae=h.stateNode;ae!==null&&typeof ae.componentDidCatch=="function"&&(l.callback=function(){Bw(c,h,y),typeof C!="function"&&(xd===null?xd=new Set([this]):xd.add(this));var xe=y.stack;this.componentDidCatch(y.value,{componentStack:xe!==null?xe:""})})}function KD(l,c,h,y,C){if(h.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(c=h.alternate,c!==null&&td(c,h,C,!0),h=rl.current,h!==null){switch(h.tag){case 13:return ho===null?Tb():h.alternate===null&&qr===0&&(qr=3),h.flags&=-257,h.flags|=65536,h.lanes=C,y===be?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([y]):c.add(y),Ob(l,y,C)),!1;case 22:return h.flags|=65536,y===be?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([y]):h.add(y)),Ob(l,y,C)),!1}throw Error(s(435,h.tag))}return Ob(l,y,C),Tb(),!1}if(Da)return c=rl.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=C,y!==oh&&(l=Error(s(422),{cause:y}),ed(_n(l,h)))):(y!==oh&&(c=Error(s(423),{cause:y}),ed(_n(c,h))),l=l.current.alternate,l.flags|=65536,C&=-C,l.lanes|=C,y=_n(y,h),C=ib(l.stateNode,y,C),Pt(l,C),qr!==4&&(qr=2)),!1;var F=Error(s(520),{cause:y});if(F=_n(F,h),Ph===null?Ph=[F]:Ph.push(F),qr!==4&&(qr=2),c===null)return!0;y=_n(y,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,l=C&-C,h.lanes|=l,l=ib(h.stateNode,y,l),Pt(h,l),!1;case 1:if(c=h.type,F=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(xd===null||!xd.has(F))))return h.flags|=65536,C&=-C,h.lanes|=C,C=zw(C),qw(C,l,h,y),Pt(h,C),!1}h=h.return}while(h!==null);return!1}var Uw=Error(s(461)),Ds=!1;function Zs(l,c,h,y){c.child=l===null?Dw(c,null,h,y):Bm(c,l.child,h,y)}function Hw(l,c,h,y,C){h=h.render;var F=c.ref;if("ref"in y){var ae={};for(var xe in y)xe!=="ref"&&(ae[xe]=y[xe])}else ae=y;return el(c),y=En(l,c,h,ae,F,C),xe=Dr(),l!==null&&!Ds?(Xs(l,c,C),ac(l,c,C)):(Da&&xe&&xu(c),c.flags|=1,Zs(l,c,y,C),c.child)}function Yw(l,c,h,y,C){if(l===null){var F=h.type;return typeof F=="function"&&!Zc(F)&&F.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=F,Gw(l,c,F,y,C)):(l=Wo(h.type,null,y,c,c.mode,C),l.ref=c.ref,l.return=c,c.child=l)}if(F=l.child,!hb(l,C)){var ae=F.memoizedProps;if(h=h.compare,h=h!==null?h:Gi,h(ae,y)&&l.ref===c.ref)return ac(l,c,C)}return c.flags|=1,l=Xi(F,y),l.ref=c.ref,l.return=c,c.child=l}function Gw(l,c,h,y,C){if(l!==null){var F=l.memoizedProps;if(Gi(F,y)&&l.ref===c.ref)if(Ds=!1,c.pendingProps=y=F,hb(l,C))(l.flags&131072)!==0&&(Ds=!0);else return c.lanes=l.lanes,ac(l,c,C)}return lb(l,c,h,y,C)}function Vw(l,c,h){var y=c.pendingProps,C=y.children,F=l!==null?l.memoizedState:null;if(y.mode==="hidden"){if((c.flags&128)!==0){if(y=F!==null?F.baseLanes|h:h,l!==null){for(C=c.child=l.child,F=0;C!==null;)F=F|C.lanes|C.childLanes,C=C.sibling;c.childLanes=F&~y}else c.childLanes=0,c.child=null;return Ww(l,c,y,h)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},l!==null&&Z(c,F!==null?F.cachePool:null),F!==null?yt(c,F):hr(),Lw(c);else return c.lanes=c.childLanes=536870912,Ww(l,c,F!==null?F.baseLanes|h:h,h)}else F!==null?(Z(c,F.cachePool),yt(c,F),ld(),c.memoizedState=null):(l!==null&&Z(c,null),hr(),ld());return Zs(l,c,C,h),c.child}function Ww(l,c,h,y){var C=G();return C=C===null?null:{parent:Kr._currentValue,pool:C},c.memoizedState={baseLanes:h,cachePool:C},l!==null&&Z(c,null),hr(),Lw(c),l!==null&&td(l,c,y,!0),null}function I0(l,c){var h=c.ref;if(h===null)l!==null&&l.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(s(284));(l===null||l.ref!==h)&&(c.flags|=4194816)}}function lb(l,c,h,y,C){return el(c),h=En(l,c,h,y,void 0,C),y=Dr(),l!==null&&!Ds?(Xs(l,c,C),ac(l,c,C)):(Da&&y&&xu(c),c.flags|=1,Zs(l,c,h,C),c.child)}function Kw(l,c,h,y,C,F){return el(c),c.updateQueue=null,h=Ks(c,y,h,C),Nr(l),y=Dr(),l!==null&&!Ds?(Xs(l,c,F),ac(l,c,F)):(Da&&y&&xu(c),c.flags|=1,Zs(l,c,h,F),c.child)}function Xw(l,c,h,y,C){if(el(c),c.stateNode===null){var F=ds,ae=h.contextType;typeof ae=="object"&&ae!==null&&(F=Wr(ae)),F=new h(y,F),c.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,F.updater=nb,c.stateNode=F,F._reactInternals=c,F=c.stateNode,F.props=y,F.state=c.memoizedState,F.refs={},qe(c),ae=h.contextType,F.context=typeof ae=="object"&&ae!==null?Wr(ae):ds,F.state=c.memoizedState,ae=h.getDerivedStateFromProps,typeof ae=="function"&&(sb(c,h,ae,y),F.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(ae=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),ae!==F.state&&nb.enqueueReplaceState(F,F.state,null),wt(c,y,F,C),ra(),F.state=c.memoizedState),typeof F.componentDidMount=="function"&&(c.flags|=4194308),y=!0}else if(l===null){F=c.stateNode;var xe=c.memoizedProps,Ae=_u(h,xe);F.props=Ae;var He=F.context,rt=h.contextType;ae=ds,typeof rt=="object"&&rt!==null&&(ae=Wr(rt));var lt=h.getDerivedStateFromProps;rt=typeof lt=="function"||typeof F.getSnapshotBeforeUpdate=="function",xe=c.pendingProps!==xe,rt||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(xe||He!==ae)&&Rw(c,F,y,ae),Xe=!1;var Ye=c.memoizedState;F.state=Ye,wt(c,y,F,C),ra(),He=c.memoizedState,xe||Ye!==He||Xe?(typeof lt=="function"&&(sb(c,h,lt,y),He=c.memoizedState),(Ae=Xe||Mw(c,h,Ae,y,Ye,He,ae))?(rt||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(c.flags|=4194308)):(typeof F.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=He),F.props=y,F.state=He,F.context=ae,y=Ae):(typeof F.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{F=c.stateNode,Qe(l,c),ae=c.memoizedProps,rt=_u(h,ae),F.props=rt,lt=c.pendingProps,Ye=F.context,He=h.contextType,Ae=ds,typeof He=="object"&&He!==null&&(Ae=Wr(He)),xe=h.getDerivedStateFromProps,(He=typeof xe=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(ae!==lt||Ye!==Ae)&&Rw(c,F,y,Ae),Xe=!1,Ye=c.memoizedState,F.state=Ye,wt(c,y,F,C),ra();var Ve=c.memoizedState;ae!==lt||Ye!==Ve||Xe||l!==null&&l.dependencies!==null&&Dm(l.dependencies)?(typeof xe=="function"&&(sb(c,h,xe,y),Ve=c.memoizedState),(rt=Xe||Mw(c,h,rt,y,Ye,Ve,Ae)||l!==null&&l.dependencies!==null&&Dm(l.dependencies))?(He||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(y,Ve,Ae),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(y,Ve,Ae)),typeof F.componentDidUpdate=="function"&&(c.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof F.componentDidUpdate!="function"||ae===l.memoizedProps&&Ye===l.memoizedState||(c.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ae===l.memoizedProps&&Ye===l.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Ve),F.props=y,F.state=Ve,F.context=Ae,y=rt):(typeof F.componentDidUpdate!="function"||ae===l.memoizedProps&&Ye===l.memoizedState||(c.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ae===l.memoizedProps&&Ye===l.memoizedState||(c.flags|=1024),y=!1)}return F=y,I0(l,c),y=(c.flags&128)!==0,F||y?(F=c.stateNode,h=y&&typeof h.getDerivedStateFromError!="function"?null:F.render(),c.flags|=1,l!==null&&y?(c.child=Bm(c,l.child,null,C),c.child=Bm(c,null,h,C)):Zs(l,c,h,C),c.memoizedState=F.state,l=c.child):l=ac(l,c,C),l}function Jw(l,c,h,y){return Cn(),c.flags|=256,Zs(l,c,h,y),c.child}var ob={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cb(l){return{baseLanes:l,cachePool:le()}}function db(l,c,h){return l=l!==null?l.childLanes&~h:0,c&&(l|=sl),l}function Zw(l,c,h){var y=c.pendingProps,C=!1,F=(c.flags&128)!==0,ae;if((ae=F)||(ae=l!==null&&l.memoizedState===null?!1:(Ns.current&2)!==0),ae&&(C=!0,c.flags&=-129),ae=(c.flags&32)!==0,c.flags&=-33,l===null){if(Da){if(C?id(c):ld(),Da){var xe=br,Ae;if(Ae=xe){e:{for(Ae=xe,xe=Ji;Ae.nodeType!==8;){if(!xe){xe=null;break e}if(Ae=Rl(Ae.nextSibling),Ae===null){xe=null;break e}}xe=Ae}xe!==null?(c.memoizedState={dehydrated:xe,treeContext:Ko!==null?{id:Al,overflow:kl}:null,retryLane:536870912,hydrationErrors:null},Ae=Ps(18,null,null,0),Ae.stateNode=xe,Ae.return=c,c.child=Ae,Vr=c,br=null,Ae=!0):Ae=!1}Ae||Jo(c)}if(xe=c.memoizedState,xe!==null&&(xe=xe.dehydrated,xe!==null))return Vb(xe)?c.lanes=32:c.lanes=536870912,null;tc(c)}return xe=y.children,y=y.fallback,C?(ld(),C=c.mode,xe=B0({mode:"hidden",children:xe},C),y=Sl(y,C,h,null),xe.return=c,y.return=c,xe.sibling=y,c.child=xe,C=c.child,C.memoizedState=cb(h),C.childLanes=db(l,ae,h),c.memoizedState=ob,y):(id(c),ub(c,xe))}if(Ae=l.memoizedState,Ae!==null&&(xe=Ae.dehydrated,xe!==null)){if(F)c.flags&256?(id(c),c.flags&=-257,c=mb(l,c,h)):c.memoizedState!==null?(ld(),c.child=l.child,c.flags|=128,c=null):(ld(),C=y.fallback,xe=c.mode,y=B0({mode:"visible",children:y.children},xe),C=Sl(C,xe,h,null),C.flags|=2,y.return=c,C.return=c,y.sibling=C,c.child=y,Bm(c,l.child,null,h),y=c.child,y.memoizedState=cb(h),y.childLanes=db(l,ae,h),c.memoizedState=ob,c=C);else if(id(c),Vb(xe)){if(ae=xe.nextSibling&&xe.nextSibling.dataset,ae)var He=ae.dgst;ae=He,y=Error(s(419)),y.stack="",y.digest=ae,ed({value:y,source:null,stack:null}),c=mb(l,c,h)}else if(Ds||td(l,c,h,!1),ae=(h&l.childLanes)!==0,Ds||ae){if(ae=dr,ae!==null&&(y=h&-h,y=(y&42)!==0?1:is(y),y=(y&(ae.suspendedLanes|h))!==0?0:y,y!==0&&y!==Ae.retryLane))throw Ae.retryLane=y,Go(l,y),bi(ae,l,y),Uw;xe.data==="$?"||Tb(),c=mb(l,c,h)}else xe.data==="$?"?(c.flags|=192,c.child=l.child,c=null):(l=Ae.treeContext,br=Rl(xe.nextSibling),Vr=c,Da=!0,uo=null,Ji=!1,l!==null&&(Gn[kn++]=Al,Gn[kn++]=kl,Gn[kn++]=Ko,Al=l.id,kl=l.overflow,Ko=c),c=ub(c,y.children),c.flags|=4096);return c}return C?(ld(),C=y.fallback,xe=c.mode,Ae=l.child,He=Ae.sibling,y=Xi(Ae,{mode:"hidden",children:y.children}),y.subtreeFlags=Ae.subtreeFlags&65011712,He!==null?C=Xi(He,C):(C=Sl(C,xe,h,null),C.flags|=2),C.return=c,y.return=c,y.sibling=C,c.child=y,y=C,C=c.child,xe=l.child.memoizedState,xe===null?xe=cb(h):(Ae=xe.cachePool,Ae!==null?(He=Kr._currentValue,Ae=Ae.parent!==He?{parent:He,pool:He}:Ae):Ae=le(),xe={baseLanes:xe.baseLanes|h,cachePool:Ae}),C.memoizedState=xe,C.childLanes=db(l,ae,h),c.memoizedState=ob,y):(id(c),h=l.child,l=h.sibling,h=Xi(h,{mode:"visible",children:y.children}),h.return=c,h.sibling=null,l!==null&&(ae=c.deletions,ae===null?(c.deletions=[l],c.flags|=16):ae.push(l)),c.child=h,c.memoizedState=null,h)}function ub(l,c){return c=B0({mode:"visible",children:c},l.mode),c.return=l,l.child=c}function B0(l,c){return l=Ps(22,l,null,c),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function mb(l,c,h){return Bm(c,l.child,null,h),l=ub(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function Qw(l,c,h){l.lanes|=c;var y=l.alternate;y!==null&&(y.lanes|=c),Pm(l.return,c,h)}function xb(l,c,h,y,C){var F=l.memoizedState;F===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:C}:(F.isBackwards=c,F.rendering=null,F.renderingStartTime=0,F.last=y,F.tail=h,F.tailMode=C)}function e3(l,c,h){var y=c.pendingProps,C=y.revealOrder,F=y.tail;if(Zs(l,c,y.children,h),y=Ns.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Qw(l,h,c);else if(l.tag===19)Qw(l,h,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}switch(J(Ns,y),C){case"forwards":for(h=c.child,C=null;h!==null;)l=h.alternate,l!==null&&R0(l)===null&&(C=h),h=h.sibling;h=C,h===null?(C=c.child,c.child=null):(C=h.sibling,h.sibling=null),xb(c,!1,C,h,F);break;case"backwards":for(h=null,C=c.child,c.child=null;C!==null;){if(l=C.alternate,l!==null&&R0(l)===null){c.child=C;break}l=C.sibling,C.sibling=h,h=C,C=l}xb(c,!0,h,null,F);break;case"together":xb(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function ac(l,c,h){if(l!==null&&(c.dependencies=l.dependencies),md|=c.lanes,(h&c.childLanes)===0)if(l!==null){if(td(l,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(l!==null&&c.child!==l.child)throw Error(s(153));if(c.child!==null){for(l=c.child,h=Xi(l,l.pendingProps),c.child=h,h.return=c;l.sibling!==null;)l=l.sibling,h=h.sibling=Xi(l,l.pendingProps),h.return=c;h.sibling=null}return c.child}function hb(l,c){return(l.lanes&c)!==0?!0:(l=l.dependencies,!!(l!==null&&Dm(l)))}function XD(l,c,h){switch(c.tag){case 3:se(c,c.stateNode.containerInfo),mo(c,Kr,l.memoizedState.cache),Cn();break;case 27:case 5:ue(c);break;case 4:se(c,c.stateNode.containerInfo);break;case 10:mo(c,c.type,c.memoizedProps.value);break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(id(c),c.flags|=128,null):(h&c.child.childLanes)!==0?Zw(l,c,h):(id(c),l=ac(l,c,h),l!==null?l.sibling:null);id(c);break;case 19:var C=(l.flags&128)!==0;if(y=(h&c.childLanes)!==0,y||(td(l,c,h,!1),y=(h&c.childLanes)!==0),C){if(y)return e3(l,c,h);c.flags|=128}if(C=c.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),J(Ns,Ns.current),y)break;return null;case 22:case 23:return c.lanes=0,Vw(l,c,h);case 24:mo(c,Kr,l.memoizedState.cache)}return ac(l,c,h)}function t3(l,c,h){if(l!==null)if(l.memoizedProps!==c.pendingProps)Ds=!0;else{if(!hb(l,h)&&(c.flags&128)===0)return Ds=!1,XD(l,c,h);Ds=(l.flags&131072)!==0}else Ds=!1,Da&&(c.flags&1048576)!==0&&p0(c,Tm,c.index);switch(c.lanes=0,c.tag){case 16:e:{l=c.pendingProps;var y=c.elementType,C=y._init;if(y=C(y._payload),c.type=y,typeof y=="function")Zc(y)?(l=_u(y,l),c.tag=1,c=Xw(null,c,y,l,h)):(c.tag=0,c=lb(null,c,y,l,h));else{if(y!=null){if(C=y.$$typeof,C===$){c.tag=11,c=Hw(null,c,y,l,h);break e}else if(C===_){c.tag=14,c=Yw(null,c,y,l,h);break e}}throw c=V(y)||y,Error(s(306,c,""))}}return c;case 0:return lb(l,c,c.type,c.pendingProps,h);case 1:return y=c.type,C=_u(y,c.pendingProps),Xw(l,c,y,C,h);case 3:e:{if(se(c,c.stateNode.containerInfo),l===null)throw Error(s(387));y=c.pendingProps;var F=c.memoizedState;C=F.element,Qe(l,c),wt(c,y,null,h);var ae=c.memoizedState;if(y=ae.cache,mo(c,Kr,y),y!==F.cache&&Om(c,[Kr],h,!0),ra(),y=ae.element,F.isDehydrated)if(F={element:y,isDehydrated:!1,cache:ae.cache},c.updateQueue.baseState=F,c.memoizedState=F,c.flags&256){c=Jw(l,c,y,h);break e}else if(y!==C){C=_n(Error(s(424)),c),ed(C),c=Jw(l,c,y,h);break e}else{switch(l=c.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(br=Rl(l.firstChild),Vr=c,Da=!0,uo=null,Ji=!0,h=Dw(c,null,y,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Cn(),y===C){c=ac(l,c,h);break e}Zs(l,c,y,h)}c=c.child}return c;case 26:return I0(l,c),l===null?(h=n4(c.type,null,c.pendingProps,null))?c.memoizedState=h:Da||(h=c.type,l=c.pendingProps,y=ep(he.current).createElement(h),y[lr]=c,y[Qa]=l,en(y,h,l),cr(y),c.stateNode=y):c.memoizedState=n4(c.type,l.memoizedProps,c.pendingProps,l.memoizedState),null;case 27:return ue(c),l===null&&Da&&(y=c.stateNode=a4(c.type,c.pendingProps,he.current),Vr=c,Ji=!0,C=br,pd(c.type)?(Wb=C,br=Rl(y.firstChild)):br=C),Zs(l,c,c.pendingProps.children,h),I0(l,c),l===null&&(c.flags|=4194304),c.child;case 5:return l===null&&Da&&((C=y=br)&&(y=SL(y,c.type,c.pendingProps,Ji),y!==null?(c.stateNode=y,Vr=c,br=Rl(y.firstChild),Ji=!1,C=!0):C=!1),C||Jo(c)),ue(c),C=c.type,F=c.pendingProps,ae=l!==null?l.memoizedProps:null,y=F.children,Hb(C,F)?y=null:ae!==null&&Hb(C,ae)&&(c.flags|=32),c.memoizedState!==null&&(C=En(l,c,Ya,null,null,h),Bh._currentValue=C),I0(l,c),Zs(l,c,y,h),c.child;case 6:return l===null&&Da&&((l=h=br)&&(h=_L(h,c.pendingProps,Ji),h!==null?(c.stateNode=h,Vr=c,br=null,l=!0):l=!1),l||Jo(c)),null;case 13:return Zw(l,c,h);case 4:return se(c,c.stateNode.containerInfo),y=c.pendingProps,l===null?c.child=Bm(c,null,y,h):Zs(l,c,y,h),c.child;case 11:return Hw(l,c,c.type,c.pendingProps,h);case 7:return Zs(l,c,c.pendingProps,h),c.child;case 8:return Zs(l,c,c.pendingProps.children,h),c.child;case 12:return Zs(l,c,c.pendingProps.children,h),c.child;case 10:return y=c.pendingProps,mo(c,c.type,y.value),Zs(l,c,y.children,h),c.child;case 9:return C=c.type._context,y=c.pendingProps.children,el(c),C=Wr(C),y=y(C),c.flags|=1,Zs(l,c,y,h),c.child;case 14:return Yw(l,c,c.type,c.pendingProps,h);case 15:return Gw(l,c,c.type,c.pendingProps,h);case 19:return e3(l,c,h);case 31:return y=c.pendingProps,h=c.mode,y={mode:y.mode,children:y.children},l===null?(h=B0(y,h),h.ref=c.ref,c.child=h,h.return=c,c=h):(h=Xi(l.child,y),h.ref=c.ref,c.child=h,h.return=c,c=h),c;case 22:return Vw(l,c,h);case 24:return el(c),y=Wr(Kr),l===null?(C=G(),C===null&&(C=dr,F=ch(),C.pooledCache=F,F.refCount++,F!==null&&(C.pooledCacheLanes|=h),C=F),c.memoizedState={parent:y,cache:C},qe(c),mo(c,Kr,C)):((l.lanes&h)!==0&&(Qe(l,c),wt(c,null,null,h),ra()),C=l.memoizedState,F=c.memoizedState,C.parent!==y?(C={parent:y,cache:y},c.memoizedState=C,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=C),mo(c,Kr,y)):(y=F.cache,mo(c,Kr,y),y!==C.cache&&Om(c,[Kr],h,!0))),Zs(l,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(s(156,c.tag))}function rc(l){l.flags|=4}function a3(l,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!d4(c)){if(c=rl.current,c!==null&&((Ca&4194048)===Ca?ho!==null:(Ca&62914560)!==Ca&&(Ca&536870912)===0||c!==ho))throw je=be,me;l.flags|=8192}}function z0(l,c){c!==null&&(l.flags|=4),l.flags&16384&&(c=l.tag!==22?At():536870912,l.lanes|=c,Hm|=c)}function _h(l,c){if(!Da)switch(l.tailMode){case"hidden":c=l.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function Lr(l){var c=l.alternate!==null&&l.alternate.child===l.child,h=0,y=0;if(c)for(var C=l.child;C!==null;)h|=C.lanes|C.childLanes,y|=C.subtreeFlags&65011712,y|=C.flags&65011712,C.return=l,C=C.sibling;else for(C=l.child;C!==null;)h|=C.lanes|C.childLanes,y|=C.subtreeFlags,y|=C.flags,C.return=l,C=C.sibling;return l.subtreeFlags|=y,l.childLanes=h,c}function JD(l,c,h){var y=c.pendingProps;switch(hu(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lr(c),null;case 1:return Lr(c),null;case 3:return h=c.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),c.memoizedState.cache!==y&&(c.flags|=2048),Qi(Kr),te(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(l===null||l.child===null)&&(Ws(c)?rc(c):l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,y0())),Lr(c),null;case 26:return h=c.memoizedState,l===null?(rc(c),h!==null?(Lr(c),a3(c,h)):(Lr(c),c.flags&=-16777217)):h?h!==l.memoizedState?(rc(c),Lr(c),a3(c,h)):(Lr(c),c.flags&=-16777217):(l.memoizedProps!==y&&rc(c),Lr(c),c.flags&=-16777217),null;case 27:ge(c),h=he.current;var C=c.type;if(l!==null&&c.stateNode!=null)l.memoizedProps!==y&&rc(c);else{if(!y){if(c.stateNode===null)throw Error(s(166));return Lr(c),null}l=U.current,Ws(c)?g0(c):(l=a4(C,y,h),c.stateNode=l,rc(c))}return Lr(c),null;case 5:if(ge(c),h=c.type,l!==null&&c.stateNode!=null)l.memoizedProps!==y&&rc(c);else{if(!y){if(c.stateNode===null)throw Error(s(166));return Lr(c),null}if(l=U.current,Ws(c))g0(c);else{switch(C=ep(he.current),l){case 1:l=C.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:l=C.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":l=C.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":l=C.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":l=C.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof y.is=="string"?C.createElement("select",{is:y.is}):C.createElement("select"),y.multiple?l.multiple=!0:y.size&&(l.size=y.size);break;default:l=typeof y.is=="string"?C.createElement(h,{is:y.is}):C.createElement(h)}}l[lr]=c,l[Qa]=y;e:for(C=c.child;C!==null;){if(C.tag===5||C.tag===6)l.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===c)break e;for(;C.sibling===null;){if(C.return===null||C.return===c)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}c.stateNode=l;e:switch(en(l,h,y),h){case"button":case"input":case"select":case"textarea":l=!!y.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&rc(c)}}return Lr(c),c.flags&=-16777217,null;case 6:if(l&&c.stateNode!=null)l.memoizedProps!==y&&rc(c);else{if(typeof y!="string"&&c.stateNode===null)throw Error(s(166));if(l=he.current,Ws(c)){if(l=c.stateNode,h=c.memoizedProps,y=null,C=Vr,C!==null)switch(C.tag){case 27:case 5:y=C.memoizedProps}l[lr]=c,l=!!(l.nodeValue===h||y!==null&&y.suppressHydrationWarning===!0||K3(l.nodeValue,h)),l||Jo(c)}else l=ep(l).createTextNode(y),l[lr]=c,c.stateNode=l}return Lr(c),null;case 13:if(y=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(C=Ws(c),y!==null&&y.dehydrated!==null){if(l===null){if(!C)throw Error(s(318));if(C=c.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(s(317));C[lr]=c}else Cn(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Lr(c),C=!1}else C=y0(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=C),C=!0;if(!C)return c.flags&256?(tc(c),c):(tc(c),null)}if(tc(c),(c.flags&128)!==0)return c.lanes=h,c;if(h=y!==null,l=l!==null&&l.memoizedState!==null,h){y=c.child,C=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(C=y.alternate.memoizedState.cachePool.pool);var F=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(F=y.memoizedState.cachePool.pool),F!==C&&(y.flags|=2048)}return h!==l&&h&&(c.child.flags|=8192),z0(c,c.updateQueue),Lr(c),null;case 4:return te(),l===null&&Ib(c.stateNode.containerInfo),Lr(c),null;case 10:return Qi(c.type),Lr(c),null;case 19:if(Y(Ns),C=c.memoizedState,C===null)return Lr(c),null;if(y=(c.flags&128)!==0,F=C.rendering,F===null)if(y)_h(C,!1);else{if(qr!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(F=R0(l),F!==null){for(c.flags|=128,_h(C,!1),l=F.updateQueue,c.updateQueue=l,z0(c,l),c.subtreeFlags=0,l=h,h=c.child;h!==null;)uu(h,l),h=h.sibling;return J(Ns,Ns.current&1|2),c.child}l=l.sibling}C.tail!==null&&Se()>H0&&(c.flags|=128,y=!0,_h(C,!1),c.lanes=4194304)}else{if(!y)if(l=R0(F),l!==null){if(c.flags|=128,y=!0,l=l.updateQueue,c.updateQueue=l,z0(c,l),_h(C,!0),C.tail===null&&C.tailMode==="hidden"&&!F.alternate&&!Da)return Lr(c),null}else 2*Se()-C.renderingStartTime>H0&&h!==536870912&&(c.flags|=128,y=!0,_h(C,!1),c.lanes=4194304);C.isBackwards?(F.sibling=c.child,c.child=F):(l=C.last,l!==null?l.sibling=F:c.child=F,C.last=F)}return C.tail!==null?(c=C.tail,C.rendering=c,C.tail=c.sibling,C.renderingStartTime=Se(),c.sibling=null,l=Ns.current,J(Ns,y?l&1|2:l&1),c):(Lr(c),null);case 22:case 23:return tc(c),sa(),y=c.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(c.flags|=8192):y&&(c.flags|=8192),y?(h&536870912)!==0&&(c.flags&128)===0&&(Lr(c),c.subtreeFlags&6&&(c.flags|=8192)):Lr(c),h=c.updateQueue,h!==null&&z0(c,h.retryQueue),h=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==h&&(c.flags|=2048),l!==null&&Y(T),null;case 24:return h=null,l!==null&&(h=l.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),Qi(Kr),Lr(c),null;case 25:return null;case 30:return null}throw Error(s(156,c.tag))}function ZD(l,c){switch(hu(c),c.tag){case 1:return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return Qi(Kr),te(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 26:case 27:case 5:return ge(c),null;case 13:if(tc(c),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(s(340));Cn()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return Y(Ns),null;case 4:return te(),null;case 10:return Qi(c.type),null;case 22:case 23:return tc(c),sa(),l!==null&&Y(T),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 24:return Qi(Kr),null;case 25:return null;default:return null}}function r3(l,c){switch(hu(c),c.tag){case 3:Qi(Kr),te();break;case 26:case 27:case 5:ge(c);break;case 4:te();break;case 13:tc(c);break;case 19:Y(Ns);break;case 10:Qi(c.type);break;case 22:case 23:tc(c),sa(),l!==null&&Y(T);break;case 24:Qi(Kr)}}function Ah(l,c){try{var h=c.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var C=y.next;h=C;do{if((h.tag&l)===l){y=void 0;var F=h.create,ae=h.inst;y=F(),ae.destroy=y}h=h.next}while(h!==C)}}catch(xe){ar(c,c.return,xe)}}function od(l,c,h){try{var y=c.updateQueue,C=y!==null?y.lastEffect:null;if(C!==null){var F=C.next;y=F;do{if((y.tag&l)===l){var ae=y.inst,xe=ae.destroy;if(xe!==void 0){ae.destroy=void 0,C=c;var Ae=h,He=xe;try{He()}catch(rt){ar(C,Ae,rt)}}}y=y.next}while(y!==F)}}catch(rt){ar(c,c.return,rt)}}function s3(l){var c=l.updateQueue;if(c!==null){var h=l.stateNode;try{zr(c,h)}catch(y){ar(l,l.return,y)}}}function n3(l,c,h){h.props=_u(l.type,l.memoizedProps),h.state=l.memoizedState;try{h.componentWillUnmount()}catch(y){ar(l,c,y)}}function kh(l,c){try{var h=l.ref;if(h!==null){switch(l.tag){case 26:case 27:case 5:var y=l.stateNode;break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof h=="function"?l.refCleanup=h(y):h.current=y}}catch(C){ar(l,c,C)}}function fo(l,c){var h=l.ref,y=l.refCleanup;if(h!==null)if(typeof y=="function")try{y()}catch(C){ar(l,c,C)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(C){ar(l,c,C)}else h.current=null}function i3(l){var c=l.type,h=l.memoizedProps,y=l.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&y.focus();break e;case"img":h.src?y.src=h.src:h.srcSet&&(y.srcset=h.srcSet)}}catch(C){ar(l,l.return,C)}}function fb(l,c,h){try{var y=l.stateNode;bL(y,l.type,h,c),y[Qa]=c}catch(C){ar(l,l.return,C)}}function l3(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&pd(l.type)||l.tag===4}function pb(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||l3(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&pd(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function gb(l,c,h){var y=l.tag;if(y===5||y===6)l=l.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(l,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(l),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=Q0));else if(y!==4&&(y===27&&pd(l.type)&&(h=l.stateNode,c=null),l=l.child,l!==null))for(gb(l,c,h),l=l.sibling;l!==null;)gb(l,c,h),l=l.sibling}function q0(l,c,h){var y=l.tag;if(y===5||y===6)l=l.stateNode,c?h.insertBefore(l,c):h.appendChild(l);else if(y!==4&&(y===27&&pd(l.type)&&(h=l.stateNode),l=l.child,l!==null))for(q0(l,c,h),l=l.sibling;l!==null;)q0(l,c,h),l=l.sibling}function o3(l){var c=l.stateNode,h=l.memoizedProps;try{for(var y=l.type,C=c.attributes;C.length;)c.removeAttributeNode(C[0]);en(c,y,h),c[lr]=l,c[Qa]=h}catch(F){ar(l,l.return,F)}}var sc=!1,Qr=!1,yb=!1,c3=typeof WeakSet=="function"?WeakSet:Set,Ls=null;function QD(l,c){if(l=l.containerInfo,qb=ip,l=Xc(l),Gs(l)){if("selectionStart"in l)var h={start:l.selectionStart,end:l.selectionEnd};else e:{h=(h=l.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var C=y.anchorOffset,F=y.focusNode;y=y.focusOffset;try{h.nodeType,F.nodeType}catch{h=null;break e}var ae=0,xe=-1,Ae=-1,He=0,rt=0,lt=l,Ye=null;t:for(;;){for(var Ve;lt!==h||C!==0&&lt.nodeType!==3||(xe=ae+C),lt!==F||y!==0&&lt.nodeType!==3||(Ae=ae+y),lt.nodeType===3&&(ae+=lt.nodeValue.length),(Ve=lt.firstChild)!==null;)Ye=lt,lt=Ve;for(;;){if(lt===l)break t;if(Ye===h&&++He===C&&(xe=ae),Ye===F&&++rt===y&&(Ae=ae),(Ve=lt.nextSibling)!==null)break;lt=Ye,Ye=lt.parentNode}lt=Ve}h=xe===-1||Ae===-1?null:{start:xe,end:Ae}}else h=null}h=h||{start:0,end:0}}else h=null;for(Ub={focusedElem:l,selectionRange:h},ip=!1,Ls=c;Ls!==null;)if(c=Ls,l=c.child,(c.subtreeFlags&1024)!==0&&l!==null)l.return=c,Ls=l;else for(;Ls!==null;){switch(c=Ls,F=c.alternate,l=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&F!==null){l=void 0,h=c,C=F.memoizedProps,F=F.memoizedState,y=h.stateNode;try{var ta=_u(h.type,C,h.elementType===h.type);l=y.getSnapshotBeforeUpdate(ta,F),y.__reactInternalSnapshotBeforeUpdate=l}catch(Wt){ar(h,h.return,Wt)}}break;case 3:if((l&1024)!==0){if(l=c.stateNode.containerInfo,h=l.nodeType,h===9)Gb(l);else if(h===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Gb(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(s(163))}if(l=c.sibling,l!==null){l.return=c.return,Ls=l;break}Ls=c.return}}function d3(l,c,h){var y=h.flags;switch(h.tag){case 0:case 11:case 15:cd(l,h),y&4&&Ah(5,h);break;case 1:if(cd(l,h),y&4)if(l=h.stateNode,c===null)try{l.componentDidMount()}catch(ae){ar(h,h.return,ae)}else{var C=_u(h.type,c.memoizedProps);c=c.memoizedState;try{l.componentDidUpdate(C,c,l.__reactInternalSnapshotBeforeUpdate)}catch(ae){ar(h,h.return,ae)}}y&64&&s3(h),y&512&&kh(h,h.return);break;case 3:if(cd(l,h),y&64&&(l=h.updateQueue,l!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{zr(l,c)}catch(ae){ar(h,h.return,ae)}}break;case 27:c===null&&y&4&&o3(h);case 26:case 5:cd(l,h),c===null&&y&4&&i3(h),y&512&&kh(h,h.return);break;case 12:cd(l,h);break;case 13:cd(l,h),y&4&&x3(l,h),y&64&&(l=h.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(h=oL.bind(null,h),AL(l,h))));break;case 22:if(y=h.memoizedState!==null||sc,!y){c=c!==null&&c.memoizedState!==null||Qr,C=sc;var F=Qr;sc=y,(Qr=c)&&!F?dd(l,h,(h.subtreeFlags&8772)!==0):cd(l,h),sc=C,Qr=F}break;case 30:break;default:cd(l,h)}}function u3(l){var c=l.alternate;c!==null&&(l.alternate=null,u3(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&vn(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var wr=null,Vn=!1;function nc(l,c,h){for(h=h.child;h!==null;)m3(l,c,h),h=h.sibling}function m3(l,c,h){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Nt,h)}catch{}switch(h.tag){case 26:Qr||fo(h,c),nc(l,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Qr||fo(h,c);var y=wr,C=Vn;pd(h.type)&&(wr=h.stateNode,Vn=!1),nc(l,c,h),Rh(h.stateNode),wr=y,Vn=C;break;case 5:Qr||fo(h,c);case 6:if(y=wr,C=Vn,wr=null,nc(l,c,h),wr=y,Vn=C,wr!==null)if(Vn)try{(wr.nodeType===9?wr.body:wr.nodeName==="HTML"?wr.ownerDocument.body:wr).removeChild(h.stateNode)}catch(F){ar(h,c,F)}else try{wr.removeChild(h.stateNode)}catch(F){ar(h,c,F)}break;case 18:wr!==null&&(Vn?(l=wr,e4(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,h.stateNode),Hh(l)):e4(wr,h.stateNode));break;case 4:y=wr,C=Vn,wr=h.stateNode.containerInfo,Vn=!0,nc(l,c,h),wr=y,Vn=C;break;case 0:case 11:case 14:case 15:Qr||od(2,h,c),Qr||od(4,h,c),nc(l,c,h);break;case 1:Qr||(fo(h,c),y=h.stateNode,typeof y.componentWillUnmount=="function"&&n3(h,c,y)),nc(l,c,h);break;case 21:nc(l,c,h);break;case 22:Qr=(y=Qr)||h.memoizedState!==null,nc(l,c,h),Qr=y;break;default:nc(l,c,h)}}function x3(l,c){if(c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Hh(l)}catch(h){ar(c,c.return,h)}}function eL(l){switch(l.tag){case 13:case 19:var c=l.stateNode;return c===null&&(c=l.stateNode=new c3),c;case 22:return l=l.stateNode,c=l._retryCache,c===null&&(c=l._retryCache=new c3),c;default:throw Error(s(435,l.tag))}}function bb(l,c){var h=eL(l);c.forEach(function(y){var C=cL.bind(null,l,y);h.has(y)||(h.add(y),y.then(C,C))})}function fi(l,c){var h=c.deletions;if(h!==null)for(var y=0;y<h.length;y++){var C=h[y],F=l,ae=c,xe=ae;e:for(;xe!==null;){switch(xe.tag){case 27:if(pd(xe.type)){wr=xe.stateNode,Vn=!1;break e}break;case 5:wr=xe.stateNode,Vn=!1;break e;case 3:case 4:wr=xe.stateNode.containerInfo,Vn=!0;break e}xe=xe.return}if(wr===null)throw Error(s(160));m3(F,ae,C),wr=null,Vn=!1,F=C.alternate,F!==null&&(F.return=null),C.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)h3(c,l),c=c.sibling}var Ml=null;function h3(l,c){var h=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:fi(c,l),pi(l),y&4&&(od(3,l,l.return),Ah(3,l),od(5,l,l.return));break;case 1:fi(c,l),pi(l),y&512&&(Qr||h===null||fo(h,h.return)),y&64&&sc&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(h=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=h===null?y:h.concat(y))));break;case 26:var C=Ml;if(fi(c,l),pi(l),y&512&&(Qr||h===null||fo(h,h.return)),y&4){var F=h!==null?h.memoizedState:null;if(y=l.memoizedState,h===null)if(y===null)if(l.stateNode===null){e:{y=l.type,h=l.memoizedProps,C=C.ownerDocument||C;t:switch(y){case"title":F=C.getElementsByTagName("title")[0],(!F||F[Rn]||F[lr]||F.namespaceURI==="http://www.w3.org/2000/svg"||F.hasAttribute("itemprop"))&&(F=C.createElement(y),C.head.insertBefore(F,C.querySelector("head > title"))),en(F,y,h),F[lr]=l,cr(F),y=F;break e;case"link":var ae=o4("link","href",C).get(y+(h.href||""));if(ae){for(var xe=0;xe<ae.length;xe++)if(F=ae[xe],F.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&F.getAttribute("rel")===(h.rel==null?null:h.rel)&&F.getAttribute("title")===(h.title==null?null:h.title)&&F.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){ae.splice(xe,1);break t}}F=C.createElement(y),en(F,y,h),C.head.appendChild(F);break;case"meta":if(ae=o4("meta","content",C).get(y+(h.content||""))){for(xe=0;xe<ae.length;xe++)if(F=ae[xe],F.getAttribute("content")===(h.content==null?null:""+h.content)&&F.getAttribute("name")===(h.name==null?null:h.name)&&F.getAttribute("property")===(h.property==null?null:h.property)&&F.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&F.getAttribute("charset")===(h.charSet==null?null:h.charSet)){ae.splice(xe,1);break t}}F=C.createElement(y),en(F,y,h),C.head.appendChild(F);break;default:throw Error(s(468,y))}F[lr]=l,cr(F),y=F}l.stateNode=y}else c4(C,l.type,l.stateNode);else l.stateNode=l4(C,y,l.memoizedProps);else F!==y?(F===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):F.count--,y===null?c4(C,l.type,l.stateNode):l4(C,y,l.memoizedProps)):y===null&&l.stateNode!==null&&fb(l,l.memoizedProps,h.memoizedProps)}break;case 27:fi(c,l),pi(l),y&512&&(Qr||h===null||fo(h,h.return)),h!==null&&y&4&&fb(l,l.memoizedProps,h.memoizedProps);break;case 5:if(fi(c,l),pi(l),y&512&&(Qr||h===null||fo(h,h.return)),l.flags&32){C=l.stateNode;try{pl(C,"")}catch(Ve){ar(l,l.return,Ve)}}y&4&&l.stateNode!=null&&(C=l.memoizedProps,fb(l,C,h!==null?h.memoizedProps:C)),y&1024&&(yb=!0);break;case 6:if(fi(c,l),pi(l),y&4){if(l.stateNode===null)throw Error(s(162));y=l.memoizedProps,h=l.stateNode;try{h.nodeValue=y}catch(Ve){ar(l,l.return,Ve)}}break;case 3:if(rp=null,C=Ml,Ml=tp(c.containerInfo),fi(c,l),Ml=C,pi(l),y&4&&h!==null&&h.memoizedState.isDehydrated)try{Hh(c.containerInfo)}catch(Ve){ar(l,l.return,Ve)}yb&&(yb=!1,f3(l));break;case 4:y=Ml,Ml=tp(l.stateNode.containerInfo),fi(c,l),pi(l),Ml=y;break;case 12:fi(c,l),pi(l);break;case 13:fi(c,l),pi(l),l.child.flags&8192&&l.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(_b=Se()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,bb(l,y)));break;case 22:C=l.memoizedState!==null;var Ae=h!==null&&h.memoizedState!==null,He=sc,rt=Qr;if(sc=He||C,Qr=rt||Ae,fi(c,l),Qr=rt,sc=He,pi(l),y&8192)e:for(c=l.stateNode,c._visibility=C?c._visibility&-2:c._visibility|1,C&&(h===null||Ae||sc||Qr||Au(l)),h=null,c=l;;){if(c.tag===5||c.tag===26){if(h===null){Ae=h=c;try{if(F=Ae.stateNode,C)ae=F.style,typeof ae.setProperty=="function"?ae.setProperty("display","none","important"):ae.display="none";else{xe=Ae.stateNode;var lt=Ae.memoizedProps.style,Ye=lt!=null&&lt.hasOwnProperty("display")?lt.display:null;xe.style.display=Ye==null||typeof Ye=="boolean"?"":(""+Ye).trim()}}catch(Ve){ar(Ae,Ae.return,Ve)}}}else if(c.tag===6){if(h===null){Ae=c;try{Ae.stateNode.nodeValue=C?"":Ae.memoizedProps}catch(Ve){ar(Ae,Ae.return,Ve)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}y&4&&(y=l.updateQueue,y!==null&&(h=y.retryQueue,h!==null&&(y.retryQueue=null,bb(l,h))));break;case 19:fi(c,l),pi(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,bb(l,y)));break;case 30:break;case 21:break;default:fi(c,l),pi(l)}}function pi(l){var c=l.flags;if(c&2){try{for(var h,y=l.return;y!==null;){if(l3(y)){h=y;break}y=y.return}if(h==null)throw Error(s(160));switch(h.tag){case 27:var C=h.stateNode,F=pb(l);q0(l,F,C);break;case 5:var ae=h.stateNode;h.flags&32&&(pl(ae,""),h.flags&=-33);var xe=pb(l);q0(l,xe,ae);break;case 3:case 4:var Ae=h.stateNode.containerInfo,He=pb(l);gb(l,He,Ae);break;default:throw Error(s(161))}}catch(rt){ar(l,l.return,rt)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function f3(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var c=l;f3(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),l=l.sibling}}function cd(l,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)d3(l,c.alternate,c),c=c.sibling}function Au(l){for(l=l.child;l!==null;){var c=l;switch(c.tag){case 0:case 11:case 14:case 15:od(4,c,c.return),Au(c);break;case 1:fo(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&n3(c,c.return,h),Au(c);break;case 27:Rh(c.stateNode);case 26:case 5:fo(c,c.return),Au(c);break;case 22:c.memoizedState===null&&Au(c);break;case 30:Au(c);break;default:Au(c)}l=l.sibling}}function dd(l,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var y=c.alternate,C=l,F=c,ae=F.flags;switch(F.tag){case 0:case 11:case 15:dd(C,F,h),Ah(4,F);break;case 1:if(dd(C,F,h),y=F,C=y.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(He){ar(y,y.return,He)}if(y=F,C=y.updateQueue,C!==null){var xe=y.stateNode;try{var Ae=C.shared.hiddenCallbacks;if(Ae!==null)for(C.shared.hiddenCallbacks=null,C=0;C<Ae.length;C++)ya(Ae[C],xe)}catch(He){ar(y,y.return,He)}}h&&ae&64&&s3(F),kh(F,F.return);break;case 27:o3(F);case 26:case 5:dd(C,F,h),h&&y===null&&ae&4&&i3(F),kh(F,F.return);break;case 12:dd(C,F,h);break;case 13:dd(C,F,h),h&&ae&4&&x3(C,F);break;case 22:F.memoizedState===null&&dd(C,F,h),kh(F,F.return);break;case 30:break;default:dd(C,F,h)}c=c.sibling}}function vb(l,c){var h=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),l=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(l=c.memoizedState.cachePool.pool),l!==h&&(l!=null&&l.refCount++,h!=null&&fu(h))}function jb(l,c){l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&fu(l))}function po(l,c,h,y){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)p3(l,c,h,y),c=c.sibling}function p3(l,c,h,y){var C=c.flags;switch(c.tag){case 0:case 11:case 15:po(l,c,h,y),C&2048&&Ah(9,c);break;case 1:po(l,c,h,y);break;case 3:po(l,c,h,y),C&2048&&(l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&fu(l)));break;case 12:if(C&2048){po(l,c,h,y),l=c.stateNode;try{var F=c.memoizedProps,ae=F.id,xe=F.onPostCommit;typeof xe=="function"&&xe(ae,c.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Ae){ar(c,c.return,Ae)}}else po(l,c,h,y);break;case 13:po(l,c,h,y);break;case 23:break;case 22:F=c.stateNode,ae=c.alternate,c.memoizedState!==null?F._visibility&2?po(l,c,h,y):Ch(l,c):F._visibility&2?po(l,c,h,y):(F._visibility|=2,zm(l,c,h,y,(c.subtreeFlags&10256)!==0)),C&2048&&vb(ae,c);break;case 24:po(l,c,h,y),C&2048&&jb(c.alternate,c);break;default:po(l,c,h,y)}}function zm(l,c,h,y,C){for(C=C&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var F=l,ae=c,xe=h,Ae=y,He=ae.flags;switch(ae.tag){case 0:case 11:case 15:zm(F,ae,xe,Ae,C),Ah(8,ae);break;case 23:break;case 22:var rt=ae.stateNode;ae.memoizedState!==null?rt._visibility&2?zm(F,ae,xe,Ae,C):Ch(F,ae):(rt._visibility|=2,zm(F,ae,xe,Ae,C)),C&&He&2048&&vb(ae.alternate,ae);break;case 24:zm(F,ae,xe,Ae,C),C&&He&2048&&jb(ae.alternate,ae);break;default:zm(F,ae,xe,Ae,C)}c=c.sibling}}function Ch(l,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=l,y=c,C=y.flags;switch(y.tag){case 22:Ch(h,y),C&2048&&vb(y.alternate,y);break;case 24:Ch(h,y),C&2048&&jb(y.alternate,y);break;default:Ch(h,y)}c=c.sibling}}var Eh=8192;function qm(l){if(l.subtreeFlags&Eh)for(l=l.child;l!==null;)g3(l),l=l.sibling}function g3(l){switch(l.tag){case 26:qm(l),l.flags&Eh&&l.memoizedState!==null&&IL(Ml,l.memoizedState,l.memoizedProps);break;case 5:qm(l);break;case 3:case 4:var c=Ml;Ml=tp(l.stateNode.containerInfo),qm(l),Ml=c;break;case 22:l.memoizedState===null&&(c=l.alternate,c!==null&&c.memoizedState!==null?(c=Eh,Eh=16777216,qm(l),Eh=c):qm(l));break;default:qm(l)}}function y3(l){var c=l.alternate;if(c!==null&&(l=c.child,l!==null)){c.child=null;do c=l.sibling,l.sibling=null,l=c;while(l!==null)}}function Th(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var y=c[h];Ls=y,v3(y,l)}y3(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)b3(l),l=l.sibling}function b3(l){switch(l.tag){case 0:case 11:case 15:Th(l),l.flags&2048&&od(9,l,l.return);break;case 3:Th(l);break;case 12:Th(l);break;case 22:var c=l.stateNode;l.memoizedState!==null&&c._visibility&2&&(l.return===null||l.return.tag!==13)?(c._visibility&=-3,U0(l)):Th(l);break;default:Th(l)}}function U0(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var y=c[h];Ls=y,v3(y,l)}y3(l)}for(l=l.child;l!==null;){switch(c=l,c.tag){case 0:case 11:case 15:od(8,c,c.return),U0(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,U0(c));break;default:U0(c)}l=l.sibling}}function v3(l,c){for(;Ls!==null;){var h=Ls;switch(h.tag){case 0:case 11:case 15:od(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var y=h.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:fu(h.memoizedState.cache)}if(y=h.child,y!==null)y.return=h,Ls=y;else e:for(h=l;Ls!==null;){y=Ls;var C=y.sibling,F=y.return;if(u3(y),y===h){Ls=null;break e}if(C!==null){C.return=F,Ls=C;break e}Ls=F}}}var tL={getCacheForType:function(l){var c=Wr(Kr),h=c.data.get(l);return h===void 0&&(h=l(),c.data.set(l,h)),h}},aL=typeof WeakMap=="function"?WeakMap:Map,Ga=0,dr=null,va=null,Ca=0,Va=0,gi=null,ud=!1,Um=!1,Nb=!1,ic=0,qr=0,md=0,ku=0,wb=0,sl=0,Hm=0,Ph=null,Wn=null,Sb=!1,_b=0,H0=1/0,Y0=null,xd=null,Qs=0,hd=null,Ym=null,Gm=0,Ab=0,kb=null,j3=null,Oh=0,Cb=null;function yi(){if((Ga&2)!==0&&Ca!==0)return Ca&-Ca;if(B.T!==null){var l=Zo;return l!==0?l:Mb()}return si()}function N3(){sl===0&&(sl=(Ca&536870912)===0||Da?vt():536870912);var l=rl.current;return l!==null&&(l.flags|=32),sl}function bi(l,c,h){(l===dr&&(Va===2||Va===9)||l.cancelPendingCommit!==null)&&(Vm(l,0),fd(l,Ca,sl,!1)),Ft(l,h),((Ga&2)===0||l!==dr)&&(l===dr&&((Ga&2)===0&&(ku|=h),qr===4&&fd(l,Ca,sl,!1)),go(l))}function w3(l,c,h){if((Ga&6)!==0)throw Error(s(327));var y=!h&&(c&124)===0&&(c&l.expiredLanes)===0||mt(l,c),C=y?nL(l,c):Pb(l,c,!0),F=y;do{if(C===0){Um&&!y&&fd(l,c,0,!1);break}else{if(h=l.current.alternate,F&&!rL(h)){C=Pb(l,c,!1),F=!1;continue}if(C===2){if(F=c,l.errorRecoveryDisabledLanes&F)var ae=0;else ae=l.pendingLanes&-536870913,ae=ae!==0?ae:ae&536870912?536870912:0;if(ae!==0){c=ae;e:{var xe=l;C=Ph;var Ae=xe.current.memoizedState.isDehydrated;if(Ae&&(Vm(xe,ae).flags|=256),ae=Pb(xe,ae,!1),ae!==2){if(Nb&&!Ae){xe.errorRecoveryDisabledLanes|=F,ku|=F,C=4;break e}F=Wn,Wn=C,F!==null&&(Wn===null?Wn=F:Wn.push.apply(Wn,F))}C=ae}if(F=!1,C!==2)continue}}if(C===1){Vm(l,0),fd(l,c,0,!0);break}e:{switch(y=l,F=C,F){case 0:case 1:throw Error(s(345));case 4:if((c&4194048)!==c)break;case 6:fd(y,c,sl,!ud);break e;case 2:Wn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((c&62914560)===c&&(C=_b+300-Se(),10<C)){if(fd(y,c,sl,!ud),gt(y,0,!0)!==0)break e;y.timeoutHandle=Z3(S3.bind(null,y,h,Wn,Y0,Sb,c,sl,ku,Hm,ud,F,2,-0,0),C);break e}S3(y,h,Wn,Y0,Sb,c,sl,ku,Hm,ud,F,0,-0,0)}}break}while(!0);go(l)}function S3(l,c,h,y,C,F,ae,xe,Ae,He,rt,lt,Ye,Ve){if(l.timeoutHandle=-1,lt=c.subtreeFlags,(lt&8192||(lt&16785408)===16785408)&&(Ih={stylesheets:null,count:0,unsuspend:FL},g3(c),lt=BL(),lt!==null)){l.cancelPendingCommit=lt(P3.bind(null,l,c,F,h,y,C,ae,xe,Ae,rt,1,Ye,Ve)),fd(l,F,ae,!He);return}P3(l,c,F,h,y,C,ae,xe,Ae)}function rL(l){for(var c=l;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var y=0;y<h.length;y++){var C=h[y],F=C.getSnapshot;C=C.value;try{if(!cs(F(),C))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function fd(l,c,h,y){c&=~wb,c&=~ku,l.suspendedLanes|=c,l.pingedLanes&=~c,y&&(l.warmLanes|=c),y=l.expirationTimes;for(var C=c;0<C;){var F=31-pt(C),ae=1<<F;y[F]=-1,C&=~ae}h!==0&&Ta(l,h,c)}function G0(){return(Ga&6)===0?(Dh(0),!1):!0}function Eb(){if(va!==null){if(Va===0)var l=va.return;else l=va,El=us=null,vs(l),Im=null,wh=0,l=va;for(;l!==null;)r3(l.alternate,l),l=l.return;va=null}}function Vm(l,c){var h=l.timeoutHandle;h!==-1&&(l.timeoutHandle=-1,jL(h)),h=l.cancelPendingCommit,h!==null&&(l.cancelPendingCommit=null,h()),Eb(),dr=l,va=h=Xi(l.current,null),Ca=c,Va=0,gi=null,ud=!1,Um=mt(l,c),Nb=!1,Hm=sl=wb=ku=md=qr=0,Wn=Ph=null,Sb=!1,(c&8)!==0&&(c|=c&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=c;0<y;){var C=31-pt(y),F=1<<C;c|=l[C],y&=~F}return ic=c,cu(),h}function _3(l,c){Ct=null,B.H=D0,c===de||c===fe?(c=Le(),Va=3):c===me?(c=Le(),Va=4):Va=c===Uw?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,gi=c,va===null&&(qr=1,F0(l,_n(c,l.current)))}function A3(){var l=B.H;return B.H=D0,l===null?D0:l}function k3(){var l=B.A;return B.A=tL,l}function Tb(){qr=4,ud||(Ca&4194048)!==Ca&&rl.current!==null||(Um=!0),(md&134217727)===0&&(ku&134217727)===0||dr===null||fd(dr,Ca,sl,!1)}function Pb(l,c,h){var y=Ga;Ga|=2;var C=A3(),F=k3();(dr!==l||Ca!==c)&&(Y0=null,Vm(l,c)),c=!1;var ae=qr;e:do try{if(Va!==0&&va!==null){var xe=va,Ae=gi;switch(Va){case 8:Eb(),ae=6;break e;case 3:case 2:case 9:case 6:rl.current===null&&(c=!0);var He=Va;if(Va=0,gi=null,Wm(l,xe,Ae,He),h&&Um){ae=0;break e}break;default:He=Va,Va=0,gi=null,Wm(l,xe,Ae,He)}}sL(),ae=qr;break}catch(rt){_3(l,rt)}while(!0);return c&&l.shellSuspendCounter++,El=us=null,Ga=y,B.H=C,B.A=F,va===null&&(dr=null,Ca=0,cu()),ae}function sL(){for(;va!==null;)C3(va)}function nL(l,c){var h=Ga;Ga|=2;var y=A3(),C=k3();dr!==l||Ca!==c?(Y0=null,H0=Se()+500,Vm(l,c)):Um=mt(l,c);e:do try{if(Va!==0&&va!==null){c=va;var F=gi;t:switch(Va){case 1:Va=0,gi=null,Wm(l,c,F,1);break;case 2:case 9:if(Ne(F)){Va=0,gi=null,E3(c);break}c=function(){Va!==2&&Va!==9||dr!==l||(Va=7),go(l)},F.then(c,c);break e;case 3:Va=7;break e;case 4:Va=5;break e;case 7:Ne(F)?(Va=0,gi=null,E3(c)):(Va=0,gi=null,Wm(l,c,F,7));break;case 5:var ae=null;switch(va.tag){case 26:ae=va.memoizedState;case 5:case 27:var xe=va;if(!ae||d4(ae)){Va=0,gi=null;var Ae=xe.sibling;if(Ae!==null)va=Ae;else{var He=xe.return;He!==null?(va=He,V0(He)):va=null}break t}}Va=0,gi=null,Wm(l,c,F,5);break;case 6:Va=0,gi=null,Wm(l,c,F,6);break;case 8:Eb(),qr=6;break e;default:throw Error(s(462))}}iL();break}catch(rt){_3(l,rt)}while(!0);return El=us=null,B.H=y,B.A=C,Ga=h,va!==null?0:(dr=null,Ca=0,cu(),qr)}function iL(){for(;va!==null&&!re();)C3(va)}function C3(l){var c=t3(l.alternate,l,ic);l.memoizedProps=l.pendingProps,c===null?V0(l):va=c}function E3(l){var c=l,h=c.alternate;switch(c.tag){case 15:case 0:c=Kw(h,c,c.pendingProps,c.type,void 0,Ca);break;case 11:c=Kw(h,c,c.pendingProps,c.type.render,c.ref,Ca);break;case 5:vs(c);default:r3(h,c),c=va=uu(c,ic),c=t3(h,c,ic)}l.memoizedProps=l.pendingProps,c===null?V0(l):va=c}function Wm(l,c,h,y){El=us=null,vs(c),Im=null,wh=0;var C=c.return;try{if(KD(l,C,c,h,Ca)){qr=1,F0(l,_n(h,l.current)),va=null;return}}catch(F){if(C!==null)throw va=C,F;qr=1,F0(l,_n(h,l.current)),va=null;return}c.flags&32768?(Da||y===1?l=!0:Um||(Ca&536870912)!==0?l=!1:(ud=l=!0,(y===2||y===9||y===3||y===6)&&(y=rl.current,y!==null&&y.tag===13&&(y.flags|=16384))),T3(c,l)):V0(c)}function V0(l){var c=l;do{if((c.flags&32768)!==0){T3(c,ud);return}l=c.return;var h=JD(c.alternate,c,ic);if(h!==null){va=h;return}if(c=c.sibling,c!==null){va=c;return}va=c=l}while(c!==null);qr===0&&(qr=5)}function T3(l,c){do{var h=ZD(l.alternate,l);if(h!==null){h.flags&=32767,va=h;return}if(h=l.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(l=l.sibling,l!==null)){va=l;return}va=l=h}while(l!==null);qr=6,va=null}function P3(l,c,h,y,C,F,ae,xe,Ae){l.cancelPendingCommit=null;do W0();while(Qs!==0);if((Ga&6)!==0)throw Error(s(327));if(c!==null){if(c===l.current)throw Error(s(177));if(F=c.lanes|c.childLanes,F|=Am,Rt(l,h,F,ae,xe,Ae),l===dr&&(va=dr=null,Ca=0),Ym=c,hd=l,Gm=h,Ab=F,kb=C,j3=y,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,dL(et,function(){return R3(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||y){y=B.T,B.T=null,C=W.p,W.p=2,ae=Ga,Ga|=4;try{QD(l,c,h)}finally{Ga=ae,W.p=C,B.T=y}}Qs=1,O3(),D3(),L3()}}function O3(){if(Qs===1){Qs=0;var l=hd,c=Ym,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=B.T,B.T=null;var y=W.p;W.p=2;var C=Ga;Ga|=4;try{h3(c,l);var F=Ub,ae=Xc(l.containerInfo),xe=F.focusedElem,Ae=F.selectionRange;if(ae!==xe&&xe&&xe.ownerDocument&&Vi(xe.ownerDocument.documentElement,xe)){if(Ae!==null&&Gs(xe)){var He=Ae.start,rt=Ae.end;if(rt===void 0&&(rt=He),"selectionStart"in xe)xe.selectionStart=He,xe.selectionEnd=Math.min(rt,xe.value.length);else{var lt=xe.ownerDocument||document,Ye=lt&&lt.defaultView||window;if(Ye.getSelection){var Ve=Ye.getSelection(),ta=xe.textContent.length,Wt=Math.min(Ae.start,ta),Za=Ae.end===void 0?Wt:Math.min(Ae.end,ta);!Ve.extend&&Wt>Za&&(ae=Za,Za=Wt,Wt=ae);var $e=lo(xe,Wt),Pe=lo(xe,Za);if($e&&Pe&&(Ve.rangeCount!==1||Ve.anchorNode!==$e.node||Ve.anchorOffset!==$e.offset||Ve.focusNode!==Pe.node||Ve.focusOffset!==Pe.offset)){var ze=lt.createRange();ze.setStart($e.node,$e.offset),Ve.removeAllRanges(),Wt>Za?(Ve.addRange(ze),Ve.extend(Pe.node,Pe.offset)):(ze.setEnd(Pe.node,Pe.offset),Ve.addRange(ze))}}}}for(lt=[],Ve=xe;Ve=Ve.parentNode;)Ve.nodeType===1&&lt.push({element:Ve,left:Ve.scrollLeft,top:Ve.scrollTop});for(typeof xe.focus=="function"&&xe.focus(),xe=0;xe<lt.length;xe++){var st=lt[xe];st.element.scrollLeft=st.left,st.element.scrollTop=st.top}}ip=!!qb,Ub=qb=null}finally{Ga=C,W.p=y,B.T=h}}l.current=c,Qs=2}}function D3(){if(Qs===2){Qs=0;var l=hd,c=Ym,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=B.T,B.T=null;var y=W.p;W.p=2;var C=Ga;Ga|=4;try{d3(l,c.alternate,c)}finally{Ga=C,W.p=y,B.T=h}}Qs=3}}function L3(){if(Qs===4||Qs===3){Qs=0,Ee();var l=hd,c=Ym,h=Gm,y=j3;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Qs=5:(Qs=0,Ym=hd=null,M3(l,l.pendingLanes));var C=l.pendingLanes;if(C===0&&(xd=null),ri(h),c=c.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Nt,c,void 0,(c.current.flags&128)===128)}catch{}if(y!==null){c=B.T,C=W.p,W.p=2,B.T=null;try{for(var F=l.onRecoverableError,ae=0;ae<y.length;ae++){var xe=y[ae];F(xe.value,{componentStack:xe.stack})}}finally{B.T=c,W.p=C}}(Gm&3)!==0&&W0(),go(l),C=l.pendingLanes,(h&4194090)!==0&&(C&42)!==0?l===Cb?Oh++:(Oh=0,Cb=l):Oh=0,Dh(0)}}function M3(l,c){(l.pooledCacheLanes&=c)===0&&(c=l.pooledCache,c!=null&&(l.pooledCache=null,fu(c)))}function W0(l){return O3(),D3(),L3(),R3()}function R3(){if(Qs!==5)return!1;var l=hd,c=Ab;Ab=0;var h=ri(Gm),y=B.T,C=W.p;try{W.p=32>h?32:h,B.T=null,h=kb,kb=null;var F=hd,ae=Gm;if(Qs=0,Ym=hd=null,Gm=0,(Ga&6)!==0)throw Error(s(331));var xe=Ga;if(Ga|=4,b3(F.current),p3(F,F.current,ae,h),Ga=xe,Dh(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Nt,F)}catch{}return!0}finally{W.p=C,B.T=y,M3(l,c)}}function $3(l,c,h){c=_n(h,c),c=ib(l.stateNode,c,2),l=dt(l,c,2),l!==null&&(Ft(l,2),go(l))}function ar(l,c,h){if(l.tag===3)$3(l,l,h);else for(;c!==null;){if(c.tag===3){$3(c,l,h);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(xd===null||!xd.has(y))){l=_n(h,l),h=zw(2),y=dt(c,h,2),y!==null&&(qw(h,y,c,l),Ft(y,2),go(y));break}}c=c.return}}function Ob(l,c,h){var y=l.pingCache;if(y===null){y=l.pingCache=new aL;var C=new Set;y.set(c,C)}else C=y.get(c),C===void 0&&(C=new Set,y.set(c,C));C.has(h)||(Nb=!0,C.add(h),l=lL.bind(null,l,c,h),c.then(l,l))}function lL(l,c,h){var y=l.pingCache;y!==null&&y.delete(c),l.pingedLanes|=l.suspendedLanes&h,l.warmLanes&=~h,dr===l&&(Ca&h)===h&&(qr===4||qr===3&&(Ca&62914560)===Ca&&300>Se()-_b?(Ga&2)===0&&Vm(l,0):wb|=h,Hm===Ca&&(Hm=0)),go(l)}function F3(l,c){c===0&&(c=At()),l=Go(l,c),l!==null&&(Ft(l,c),go(l))}function oL(l){var c=l.memoizedState,h=0;c!==null&&(h=c.retryLane),F3(l,h)}function cL(l,c){var h=0;switch(l.tag){case 13:var y=l.stateNode,C=l.memoizedState;C!==null&&(h=C.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(s(314))}y!==null&&y.delete(c),F3(l,h)}function dL(l,c){return De(l,c)}var K0=null,Km=null,Db=!1,X0=!1,Lb=!1,Cu=0;function go(l){l!==Km&&l.next===null&&(Km===null?K0=Km=l:Km=Km.next=l),X0=!0,Db||(Db=!0,mL())}function Dh(l,c){if(!Lb&&X0){Lb=!0;do for(var h=!1,y=K0;y!==null;){if(l!==0){var C=y.pendingLanes;if(C===0)var F=0;else{var ae=y.suspendedLanes,xe=y.pingedLanes;F=(1<<31-pt(42|l)+1)-1,F&=C&~(ae&~xe),F=F&201326741?F&201326741|1:F?F|2:0}F!==0&&(h=!0,q3(y,F))}else F=Ca,F=gt(y,y===dr?F:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(F&3)===0||mt(y,F)||(h=!0,q3(y,F));y=y.next}while(h);Lb=!1}}function uL(){I3()}function I3(){X0=Db=!1;var l=0;Cu!==0&&(vL()&&(l=Cu),Cu=0);for(var c=Se(),h=null,y=K0;y!==null;){var C=y.next,F=B3(y,c);F===0?(y.next=null,h===null?K0=C:h.next=C,C===null&&(Km=h)):(h=y,(l!==0||(F&3)!==0)&&(X0=!0)),y=C}Dh(l)}function B3(l,c){for(var h=l.suspendedLanes,y=l.pingedLanes,C=l.expirationTimes,F=l.pendingLanes&-62914561;0<F;){var ae=31-pt(F),xe=1<<ae,Ae=C[ae];Ae===-1?((xe&h)===0||(xe&y)!==0)&&(C[ae]=Ht(xe,c)):Ae<=c&&(l.expiredLanes|=xe),F&=~xe}if(c=dr,h=Ca,h=gt(l,l===c?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y=l.callbackNode,h===0||l===c&&(Va===2||Va===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&ke(y),l.callbackNode=null,l.callbackPriority=0;if((h&3)===0||mt(l,h)){if(c=h&-h,c===l.callbackPriority)return c;switch(y!==null&&ke(y),ri(h)){case 2:case 8:h=Me;break;case 32:h=et;break;case 268435456:h=tt;break;default:h=et}return y=z3.bind(null,l),h=De(h,y),l.callbackPriority=c,l.callbackNode=h,c}return y!==null&&y!==null&&ke(y),l.callbackPriority=2,l.callbackNode=null,2}function z3(l,c){if(Qs!==0&&Qs!==5)return l.callbackNode=null,l.callbackPriority=0,null;var h=l.callbackNode;if(W0()&&l.callbackNode!==h)return null;var y=Ca;return y=gt(l,l===dr?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y===0?null:(w3(l,y,c),B3(l,Se()),l.callbackNode!=null&&l.callbackNode===h?z3.bind(null,l):null)}function q3(l,c){if(W0())return null;w3(l,c,!0)}function mL(){NL(function(){(Ga&6)!==0?De(ve,uL):I3()})}function Mb(){return Cu===0&&(Cu=vt()),Cu}function U3(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Li(""+l)}function H3(l,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,l.id&&h.setAttribute("form",l.id),c.parentNode.insertBefore(h,c),l=new FormData(l),h.parentNode.removeChild(h),l}function xL(l,c,h,y,C){if(c==="submit"&&h&&h.stateNode===C){var F=U3((C[Qa]||null).action),ae=y.submitter;ae&&(c=(c=ae[Qa]||null)?U3(c.formAction):ae.getAttribute("formAction"),c!==null&&(F=c,ae=null));var xe=new to("action","action",null,y,C);l.push({event:xe,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Cu!==0){var Ae=ae?H3(C,ae):new FormData(C);al(h,{pending:!0,data:Ae,method:C.method,action:F},null,Ae)}}else typeof F=="function"&&(xe.preventDefault(),Ae=ae?H3(C,ae):new FormData(C),al(h,{pending:!0,data:Ae,method:C.method,action:F},F,Ae))},currentTarget:C}]})}}for(var Rb=0;Rb<_m.length;Rb++){var $b=_m[Rb],hL=$b.toLowerCase(),fL=$b[0].toUpperCase()+$b.slice(1);Hn(hL,"on"+fL)}Hn(rh,"onAnimationEnd"),Hn(sh,"onAnimationIteration"),Hn(nh,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(x0,"onTransitionRun"),Hn(h0,"onTransitionStart"),Hn(f0,"onTransitionCancel"),Hn(ih,"onTransitionEnd"),ii("onMouseEnter",["mouseout","mouseover"]),ii("onMouseLeave",["mouseout","mouseover"]),ii("onPointerEnter",["pointerout","pointerover"]),ii("onPointerLeave",["pointerout","pointerover"]),$n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$n("onBeforeInput",["compositionend","keypress","textInput","paste"]),$n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lh));function Y3(l,c){c=(c&4)!==0;for(var h=0;h<l.length;h++){var y=l[h],C=y.event;y=y.listeners;e:{var F=void 0;if(c)for(var ae=y.length-1;0<=ae;ae--){var xe=y[ae],Ae=xe.instance,He=xe.currentTarget;if(xe=xe.listener,Ae!==F&&C.isPropagationStopped())break e;F=xe,C.currentTarget=He;try{F(C)}catch(rt){$0(rt)}C.currentTarget=null,F=Ae}else for(ae=0;ae<y.length;ae++){if(xe=y[ae],Ae=xe.instance,He=xe.currentTarget,xe=xe.listener,Ae!==F&&C.isPropagationStopped())break e;F=xe,C.currentTarget=He;try{F(C)}catch(rt){$0(rt)}C.currentTarget=null,F=Ae}}}}function ja(l,c){var h=c[or];h===void 0&&(h=c[or]=new Set);var y=l+"__bubble";h.has(y)||(G3(c,l,2,!1),h.add(y))}function Fb(l,c,h){var y=0;c&&(y|=4),G3(h,l,y,c)}var J0="_reactListening"+Math.random().toString(36).slice(2);function Ib(l){if(!l[J0]){l[J0]=!0,ni.forEach(function(h){h!=="selectionchange"&&(pL.has(h)||Fb(h,!1,l),Fb(h,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[J0]||(c[J0]=!0,Fb("selectionchange",!1,c))}}function G3(l,c,h,y){switch(p4(c)){case 2:var C=UL;break;case 8:C=HL;break;default:C=Qb}h=C.bind(null,c,h,l),C=void 0,!ci||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(C=!0),y?C!==void 0?l.addEventListener(c,h,{capture:!0,passive:C}):l.addEventListener(c,h,!0):C!==void 0?l.addEventListener(c,h,{passive:C}):l.addEventListener(c,h,!1)}function Bb(l,c,h,y,C){var F=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var ae=y.tag;if(ae===3||ae===4){var xe=y.stateNode.containerInfo;if(xe===C)break;if(ae===4)for(ae=y.return;ae!==null;){var Ae=ae.tag;if((Ae===3||Ae===4)&&ae.stateNode.containerInfo===C)return;ae=ae.return}for(;xe!==null;){if(ae=qs(xe),ae===null)return;if(Ae=ae.tag,Ae===5||Ae===6||Ae===26||Ae===27){y=F=ae;continue e}xe=xe.parentNode}}y=y.return}Nm(function(){var He=F,rt=ru(h),lt=[];e:{var Ye=lh.get(l);if(Ye!==void 0){var Ve=to,ta=l;switch(l){case"keypress":if(Fi(h)===0)break e;case"keydown":case"keyup":Ve=Fr;break;case"focusin":ta="focus",Ve=q;break;case"focusout":ta="blur",Ve=q;break;case"beforeblur":case"afterblur":Ve=q;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=Uc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=wn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=ys;break;case rh:case sh:case nh:Ve=we;break;case ih:Ve=ro;break;case"scroll":case"scrollend":Ve=Bo;break;case"wheel":Ve=wm;break;case"copy":case"cut":case"paste":Ve=Fe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=Ir;break;case"toggle":case"beforetoggle":Ve=mi}var Wt=(c&4)!==0,Za=!Wt&&(l==="scroll"||l==="scrollend"),$e=Wt?Ye!==null?Ye+"Capture":null:Ye;Wt=[];for(var Pe=He,ze;Pe!==null;){var st=Pe;if(ze=st.stateNode,st=st.tag,st!==5&&st!==26&&st!==27||ze===null||$e===null||(st=Fo(Pe,$e),st!=null&&Wt.push(Mh(Pe,st,ze))),Za)break;Pe=Pe.return}0<Wt.length&&(Ye=new Ve(Ye,ta,null,h,rt),lt.push({event:Ye,listeners:Wt}))}}if((c&7)===0){e:{if(Ye=l==="mouseover"||l==="pointerover",Ve=l==="mouseout"||l==="pointerout",Ye&&h!==Mi&&(ta=h.relatedTarget||h.fromElement)&&(qs(ta)||ta[fs]))break e;if((Ve||Ye)&&(Ye=rt.window===rt?rt:(Ye=rt.ownerDocument)?Ye.defaultView||Ye.parentWindow:window,Ve?(ta=h.relatedTarget||h.toElement,Ve=He,ta=ta?qs(ta):null,ta!==null&&(Za=i(ta),Wt=ta.tag,ta!==Za||Wt!==5&&Wt!==27&&Wt!==6)&&(ta=null)):(Ve=null,ta=He),Ve!==ta)){if(Wt=Uc,st="onMouseLeave",$e="onMouseEnter",Pe="mouse",(l==="pointerout"||l==="pointerover")&&(Wt=Ir,st="onPointerLeave",$e="onPointerEnter",Pe="pointer"),Za=Ve==null?Ye:Us(Ve),ze=ta==null?Ye:Us(ta),Ye=new Wt(st,Pe+"leave",Ve,h,rt),Ye.target=Za,Ye.relatedTarget=ze,st=null,qs(rt)===He&&(Wt=new Wt($e,Pe+"enter",ta,h,rt),Wt.target=ze,Wt.relatedTarget=Za,st=Wt),Za=st,Ve&&ta)t:{for(Wt=Ve,$e=ta,Pe=0,ze=Wt;ze;ze=Xm(ze))Pe++;for(ze=0,st=$e;st;st=Xm(st))ze++;for(;0<Pe-ze;)Wt=Xm(Wt),Pe--;for(;0<ze-Pe;)$e=Xm($e),ze--;for(;Pe--;){if(Wt===$e||$e!==null&&Wt===$e.alternate)break t;Wt=Xm(Wt),$e=Xm($e)}Wt=null}else Wt=null;Ve!==null&&V3(lt,Ye,Ve,Wt,!1),ta!==null&&Za!==null&&V3(lt,Za,ta,Wt,!0)}}e:{if(Ye=He?Us(He):window,Ve=Ye.nodeName&&Ye.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&Ye.type==="file")var Et=Ys;else if(Sn(Ye))if(no)Et=Kc;else{Et=Hi;var ba=th}else Ve=Ye.nodeName,!Ve||Ve.toLowerCase()!=="input"||Ye.type!=="checkbox"&&Ye.type!=="radio"?He&&tu(He.elementType)&&(Et=Ys):Et=Yi;if(Et&&(Et=Et(l,He))){Gc(lt,Et,h,rt);break e}ba&&ba(l,Ye,He),l==="focusout"&&He&&Ye.type==="number"&&He.memoizedProps.value!=null&&Qd(Ye,"number",Ye.value)}switch(ba=He?Us(He):window,l){case"focusin":(Sn(ba)||ba.contentEditable==="true")&&(Oa=ba,Ua=He,er=null);break;case"focusout":er=Ua=Oa=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,Ki(lt,h,rt);break;case"selectionchange":if(Wi)break;case"keydown":case"keyup":Ki(lt,h,rt)}var It;if(so)e:{switch(l){case"compositionstart":var Kt="onCompositionStart";break e;case"compositionend":Kt="onCompositionEnd";break e;case"compositionupdate":Kt="onCompositionUpdate";break e}Kt=void 0}else jl?Hc(l,h)&&(Kt="onCompositionEnd"):l==="keydown"&&h.keyCode===229&&(Kt="onCompositionStart");Kt&&(zi&&h.locale!=="ko"&&(jl||Kt!=="onCompositionStart"?Kt==="onCompositionEnd"&&jl&&(It=qc()):($i=rt,nu="value"in $i?$i.value:$i.textContent,jl=!0)),ba=Z0(He,Kt),0<ba.length&&(Kt=new ot(Kt,l,null,h,rt),lt.push({event:Kt,listeners:ba}),It?Kt.data=It:(It=Ts(h),It!==null&&(Kt.data=It)))),(It=os?Yc(l,h):Sm(l,h))&&(Kt=Z0(He,"onBeforeInput"),0<Kt.length&&(ba=new ot("onBeforeInput","beforeinput",null,h,rt),lt.push({event:ba,listeners:Kt}),ba.data=It)),xL(lt,l,He,h,rt)}Y3(lt,c)})}function Mh(l,c,h){return{instance:l,listener:c,currentTarget:h}}function Z0(l,c){for(var h=c+"Capture",y=[];l!==null;){var C=l,F=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||F===null||(C=Fo(l,h),C!=null&&y.unshift(Mh(l,C,F)),C=Fo(l,c),C!=null&&y.push(Mh(l,C,F))),l.tag===3)return y;l=l.return}return[]}function Xm(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function V3(l,c,h,y,C){for(var F=c._reactName,ae=[];h!==null&&h!==y;){var xe=h,Ae=xe.alternate,He=xe.stateNode;if(xe=xe.tag,Ae!==null&&Ae===y)break;xe!==5&&xe!==26&&xe!==27||He===null||(Ae=He,C?(He=Fo(h,F),He!=null&&ae.unshift(Mh(h,He,Ae))):C||(He=Fo(h,F),He!=null&&ae.push(Mh(h,He,Ae)))),h=h.return}ae.length!==0&&l.push({event:c,listeners:ae})}var gL=/\r\n?/g,yL=/\u0000|\uFFFD/g;function W3(l){return(typeof l=="string"?l:""+l).replace(gL,`
`).replace(yL,"")}function K3(l,c){return c=W3(c),W3(l)===c}function Q0(){}function Ja(l,c,h,y,C,F){switch(h){case"children":typeof y=="string"?c==="body"||c==="textarea"&&y===""||pl(l,y):(typeof y=="number"||typeof y=="bigint")&&c!=="body"&&pl(l,""+y);break;case"className":Hs(l,"class",y);break;case"tabIndex":Hs(l,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Hs(l,h,y);break;case"style":jm(l,y,F);break;case"data":if(c!=="object"){Hs(l,"data",y);break}case"src":case"href":if(y===""&&(c!=="a"||h!=="href")){l.removeAttribute(h);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(h);break}y=Li(""+y),l.setAttribute(h,y);break;case"action":case"formAction":if(typeof y=="function"){l.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof F=="function"&&(h==="formAction"?(c!=="input"&&Ja(l,c,"name",C.name,C,null),Ja(l,c,"formEncType",C.formEncType,C,null),Ja(l,c,"formMethod",C.formMethod,C,null),Ja(l,c,"formTarget",C.formTarget,C,null)):(Ja(l,c,"encType",C.encType,C,null),Ja(l,c,"method",C.method,C,null),Ja(l,c,"target",C.target,C,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(h);break}y=Li(""+y),l.setAttribute(h,y);break;case"onClick":y!=null&&(l.onclick=Q0);break;case"onScroll":y!=null&&ja("scroll",l);break;case"onScrollEnd":y!=null&&ja("scrollend",l);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(s(61));if(h=y.__html,h!=null){if(C.children!=null)throw Error(s(60));l.innerHTML=h}}break;case"multiple":l.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":l.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){l.removeAttribute("xlink:href");break}h=Li(""+y),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(h,""+y):l.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(h,""):l.removeAttribute(h);break;case"capture":case"download":y===!0?l.setAttribute(h,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(h,y):l.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?l.setAttribute(h,y):l.removeAttribute(h);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?l.removeAttribute(h):l.setAttribute(h,y);break;case"popover":ja("beforetoggle",l),ja("toggle",l),Mo(l,"popover",y);break;case"xlinkActuate":jn(l,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":jn(l,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":jn(l,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":jn(l,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":jn(l,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":jn(l,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":jn(l,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":jn(l,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":jn(l,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Mo(l,"is",y);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Qx.get(h)||h,Mo(l,h,y))}}function zb(l,c,h,y,C,F){switch(h){case"style":jm(l,y,F);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(s(61));if(h=y.__html,h!=null){if(C.children!=null)throw Error(s(60));l.innerHTML=h}}break;case"children":typeof y=="string"?pl(l,y):(typeof y=="number"||typeof y=="bigint")&&pl(l,""+y);break;case"onScroll":y!=null&&ja("scroll",l);break;case"onScrollEnd":y!=null&&ja("scrollend",l);break;case"onClick":y!=null&&(l.onclick=Q0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Jl.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(C=h.endsWith("Capture"),c=h.slice(2,C?h.length-7:void 0),F=l[Qa]||null,F=F!=null?F[h]:null,typeof F=="function"&&l.removeEventListener(c,F,C),typeof y=="function")){typeof F!="function"&&F!==null&&(h in l?l[h]=null:l.hasAttribute(h)&&l.removeAttribute(h)),l.addEventListener(c,y,C);break e}h in l?l[h]=y:y===!0?l.setAttribute(h,""):Mo(l,h,y)}}}function en(l,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ja("error",l),ja("load",l);var y=!1,C=!1,F;for(F in h)if(h.hasOwnProperty(F)){var ae=h[F];if(ae!=null)switch(F){case"src":y=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,c));default:Ja(l,c,F,ae,h,null)}}C&&Ja(l,c,"srcSet",h.srcSet,h,null),y&&Ja(l,c,"src",h.src,h,null);return;case"input":ja("invalid",l);var xe=F=ae=C=null,Ae=null,He=null;for(y in h)if(h.hasOwnProperty(y)){var rt=h[y];if(rt!=null)switch(y){case"name":C=rt;break;case"type":ae=rt;break;case"checked":Ae=rt;break;case"defaultChecked":He=rt;break;case"value":F=rt;break;case"defaultValue":xe=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(s(137,c));break;default:Ja(l,c,y,rt,h,null)}}vm(l,F,xe,Ae,He,ae,C,!1),Fn(l);return;case"select":ja("invalid",l),y=ae=F=null;for(C in h)if(h.hasOwnProperty(C)&&(xe=h[C],xe!=null))switch(C){case"value":F=xe;break;case"defaultValue":ae=xe;break;case"multiple":y=xe;default:Ja(l,c,C,xe,h,null)}c=F,h=ae,l.multiple=!!y,c!=null?Ql(l,!!y,c,!1):h!=null&&Ql(l,!!y,h,!0);return;case"textarea":ja("invalid",l),F=C=y=null;for(ae in h)if(h.hasOwnProperty(ae)&&(xe=h[ae],xe!=null))switch(ae){case"value":y=xe;break;case"defaultValue":C=xe;break;case"children":F=xe;break;case"dangerouslySetInnerHTML":if(xe!=null)throw Error(s(91));break;default:Ja(l,c,ae,xe,h,null)}eu(l,y,C,F),Fn(l);return;case"option":for(Ae in h)if(h.hasOwnProperty(Ae)&&(y=h[Ae],y!=null))switch(Ae){case"selected":l.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Ja(l,c,Ae,y,h,null)}return;case"dialog":ja("beforetoggle",l),ja("toggle",l),ja("cancel",l),ja("close",l);break;case"iframe":case"object":ja("load",l);break;case"video":case"audio":for(y=0;y<Lh.length;y++)ja(Lh[y],l);break;case"image":ja("error",l),ja("load",l);break;case"details":ja("toggle",l);break;case"embed":case"source":case"link":ja("error",l),ja("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(He in h)if(h.hasOwnProperty(He)&&(y=h[He],y!=null))switch(He){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,c));default:Ja(l,c,He,y,h,null)}return;default:if(tu(c)){for(rt in h)h.hasOwnProperty(rt)&&(y=h[rt],y!==void 0&&zb(l,c,rt,y,h,void 0));return}}for(xe in h)h.hasOwnProperty(xe)&&(y=h[xe],y!=null&&Ja(l,c,xe,y,h,null))}function bL(l,c,h,y){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,F=null,ae=null,xe=null,Ae=null,He=null,rt=null;for(Ve in h){var lt=h[Ve];if(h.hasOwnProperty(Ve)&&lt!=null)switch(Ve){case"checked":break;case"value":break;case"defaultValue":Ae=lt;default:y.hasOwnProperty(Ve)||Ja(l,c,Ve,null,y,lt)}}for(var Ye in y){var Ve=y[Ye];if(lt=h[Ye],y.hasOwnProperty(Ye)&&(Ve!=null||lt!=null))switch(Ye){case"type":F=Ve;break;case"name":C=Ve;break;case"checked":He=Ve;break;case"defaultChecked":rt=Ve;break;case"value":ae=Ve;break;case"defaultValue":xe=Ve;break;case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(s(137,c));break;default:Ve!==lt&&Ja(l,c,Ye,Ve,y,lt)}}$o(l,ae,xe,Ae,He,rt,F,C);return;case"select":Ve=ae=xe=Ye=null;for(F in h)if(Ae=h[F],h.hasOwnProperty(F)&&Ae!=null)switch(F){case"value":break;case"multiple":Ve=Ae;default:y.hasOwnProperty(F)||Ja(l,c,F,null,y,Ae)}for(C in y)if(F=y[C],Ae=h[C],y.hasOwnProperty(C)&&(F!=null||Ae!=null))switch(C){case"value":Ye=F;break;case"defaultValue":xe=F;break;case"multiple":ae=F;default:F!==Ae&&Ja(l,c,C,F,y,Ae)}c=xe,h=ae,y=Ve,Ye!=null?Ql(l,!!h,Ye,!1):!!y!=!!h&&(c!=null?Ql(l,!!h,c,!0):Ql(l,!!h,h?[]:"",!1));return;case"textarea":Ve=Ye=null;for(xe in h)if(C=h[xe],h.hasOwnProperty(xe)&&C!=null&&!y.hasOwnProperty(xe))switch(xe){case"value":break;case"children":break;default:Ja(l,c,xe,null,y,C)}for(ae in y)if(C=y[ae],F=h[ae],y.hasOwnProperty(ae)&&(C!=null||F!=null))switch(ae){case"value":Ye=C;break;case"defaultValue":Ve=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:C!==F&&Ja(l,c,ae,C,y,F)}li(l,Ye,Ve);return;case"option":for(var ta in h)if(Ye=h[ta],h.hasOwnProperty(ta)&&Ye!=null&&!y.hasOwnProperty(ta))switch(ta){case"selected":l.selected=!1;break;default:Ja(l,c,ta,null,y,Ye)}for(Ae in y)if(Ye=y[Ae],Ve=h[Ae],y.hasOwnProperty(Ae)&&Ye!==Ve&&(Ye!=null||Ve!=null))switch(Ae){case"selected":l.selected=Ye&&typeof Ye!="function"&&typeof Ye!="symbol";break;default:Ja(l,c,Ae,Ye,y,Ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in h)Ye=h[Wt],h.hasOwnProperty(Wt)&&Ye!=null&&!y.hasOwnProperty(Wt)&&Ja(l,c,Wt,null,y,Ye);for(He in y)if(Ye=y[He],Ve=h[He],y.hasOwnProperty(He)&&Ye!==Ve&&(Ye!=null||Ve!=null))switch(He){case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(s(137,c));break;default:Ja(l,c,He,Ye,y,Ve)}return;default:if(tu(c)){for(var Za in h)Ye=h[Za],h.hasOwnProperty(Za)&&Ye!==void 0&&!y.hasOwnProperty(Za)&&zb(l,c,Za,void 0,y,Ye);for(rt in y)Ye=y[rt],Ve=h[rt],!y.hasOwnProperty(rt)||Ye===Ve||Ye===void 0&&Ve===void 0||zb(l,c,rt,Ye,y,Ve);return}}for(var $e in h)Ye=h[$e],h.hasOwnProperty($e)&&Ye!=null&&!y.hasOwnProperty($e)&&Ja(l,c,$e,null,y,Ye);for(lt in y)Ye=y[lt],Ve=h[lt],!y.hasOwnProperty(lt)||Ye===Ve||Ye==null&&Ve==null||Ja(l,c,lt,Ye,y,Ve)}var qb=null,Ub=null;function ep(l){return l.nodeType===9?l:l.ownerDocument}function X3(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function J3(l,c){if(l===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&c==="foreignObject"?0:l}function Hb(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Yb=null;function vL(){var l=window.event;return l&&l.type==="popstate"?l===Yb?!1:(Yb=l,!0):(Yb=null,!1)}var Z3=typeof setTimeout=="function"?setTimeout:void 0,jL=typeof clearTimeout=="function"?clearTimeout:void 0,Q3=typeof Promise=="function"?Promise:void 0,NL=typeof queueMicrotask=="function"?queueMicrotask:typeof Q3<"u"?function(l){return Q3.resolve(null).then(l).catch(wL)}:Z3;function wL(l){setTimeout(function(){throw l})}function pd(l){return l==="head"}function e4(l,c){var h=c,y=0,C=0;do{var F=h.nextSibling;if(l.removeChild(h),F&&F.nodeType===8)if(h=F.data,h==="/$"){if(0<y&&8>y){h=y;var ae=l.ownerDocument;if(h&1&&Rh(ae.documentElement),h&2&&Rh(ae.body),h&4)for(h=ae.head,Rh(h),ae=h.firstChild;ae;){var xe=ae.nextSibling,Ae=ae.nodeName;ae[Rn]||Ae==="SCRIPT"||Ae==="STYLE"||Ae==="LINK"&&ae.rel.toLowerCase()==="stylesheet"||h.removeChild(ae),ae=xe}}if(C===0){l.removeChild(F),Hh(c);return}C--}else h==="$"||h==="$?"||h==="$!"?C++:y=h.charCodeAt(0)-48;else y=0;h=F}while(h);Hh(c)}function Gb(l){var c=l.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Gb(h),vn(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}l.removeChild(h)}}function SL(l,c,h,y){for(;l.nodeType===1;){var C=h;if(l.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(y){if(!l[Rn])switch(c){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(F=l.getAttribute("rel"),F==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(F!==C.rel||l.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||l.getAttribute("title")!==(C.title==null?null:C.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(F=l.getAttribute("src"),(F!==(C.src==null?null:C.src)||l.getAttribute("type")!==(C.type==null?null:C.type)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&F&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(c==="input"&&l.type==="hidden"){var F=C.name==null?null:""+C.name;if(C.type==="hidden"&&l.getAttribute("name")===F)return l}else return l;if(l=Rl(l.nextSibling),l===null)break}return null}function _L(l,c,h){if(c==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=Rl(l.nextSibling),l===null))return null;return l}function Vb(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function AL(l,c){var h=l.ownerDocument;if(l.data!=="$?"||h.readyState==="complete")c();else{var y=function(){c(),h.removeEventListener("DOMContentLoaded",y)};h.addEventListener("DOMContentLoaded",y),l._reactRetry=y}}function Rl(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return l}var Wb=null;function t4(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var h=l.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return l;c--}else h==="/$"&&c++}l=l.previousSibling}return null}function a4(l,c,h){switch(c=ep(h),l){case"html":if(l=c.documentElement,!l)throw Error(s(452));return l;case"head":if(l=c.head,!l)throw Error(s(453));return l;case"body":if(l=c.body,!l)throw Error(s(454));return l;default:throw Error(s(451))}}function Rh(l){for(var c=l.attributes;c.length;)l.removeAttributeNode(c[0]);vn(l)}var nl=new Map,r4=new Set;function tp(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var lc=W.d;W.d={f:kL,r:CL,D:EL,C:TL,L:PL,m:OL,X:LL,S:DL,M:ML};function kL(){var l=lc.f(),c=G0();return l||c}function CL(l){var c=Cs(l);c!==null&&c.tag===5&&c.type==="form"?wu(c):lc.r(l)}var Jm=typeof document>"u"?null:document;function s4(l,c,h){var y=Jm;if(y&&typeof c=="string"&&c){var C=Aa(c);C='link[rel="'+l+'"][href="'+C+'"]',typeof h=="string"&&(C+='[crossorigin="'+h+'"]'),r4.has(C)||(r4.add(C),l={rel:l,crossOrigin:h,href:c},y.querySelector(C)===null&&(c=y.createElement("link"),en(c,"link",l),cr(c),y.head.appendChild(c)))}}function EL(l){lc.D(l),s4("dns-prefetch",l,null)}function TL(l,c){lc.C(l,c),s4("preconnect",l,c)}function PL(l,c,h){lc.L(l,c,h);var y=Jm;if(y&&l&&c){var C='link[rel="preload"][as="'+Aa(c)+'"]';c==="image"&&h&&h.imageSrcSet?(C+='[imagesrcset="'+Aa(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(C+='[imagesizes="'+Aa(h.imageSizes)+'"]')):C+='[href="'+Aa(l)+'"]';var F=C;switch(c){case"style":F=Zm(l);break;case"script":F=Qm(l)}nl.has(F)||(l=x({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:l,as:c},h),nl.set(F,l),y.querySelector(C)!==null||c==="style"&&y.querySelector($h(F))||c==="script"&&y.querySelector(Fh(F))||(c=y.createElement("link"),en(c,"link",l),cr(c),y.head.appendChild(c)))}}function OL(l,c){lc.m(l,c);var h=Jm;if(h&&l){var y=c&&typeof c.as=="string"?c.as:"script",C='link[rel="modulepreload"][as="'+Aa(y)+'"][href="'+Aa(l)+'"]',F=C;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":F=Qm(l)}if(!nl.has(F)&&(l=x({rel:"modulepreload",href:l},c),nl.set(F,l),h.querySelector(C)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Fh(F)))return}y=h.createElement("link"),en(y,"link",l),cr(y),h.head.appendChild(y)}}}function DL(l,c,h){lc.S(l,c,h);var y=Jm;if(y&&l){var C=gs(y).hoistableStyles,F=Zm(l);c=c||"default";var ae=C.get(F);if(!ae){var xe={loading:0,preload:null};if(ae=y.querySelector($h(F)))xe.loading=5;else{l=x({rel:"stylesheet",href:l,"data-precedence":c},h),(h=nl.get(F))&&Kb(l,h);var Ae=ae=y.createElement("link");cr(Ae),en(Ae,"link",l),Ae._p=new Promise(function(He,rt){Ae.onload=He,Ae.onerror=rt}),Ae.addEventListener("load",function(){xe.loading|=1}),Ae.addEventListener("error",function(){xe.loading|=2}),xe.loading|=4,ap(ae,c,y)}ae={type:"stylesheet",instance:ae,count:1,state:xe},C.set(F,ae)}}}function LL(l,c){lc.X(l,c);var h=Jm;if(h&&l){var y=gs(h).hoistableScripts,C=Qm(l),F=y.get(C);F||(F=h.querySelector(Fh(C)),F||(l=x({src:l,async:!0},c),(c=nl.get(C))&&Xb(l,c),F=h.createElement("script"),cr(F),en(F,"link",l),h.head.appendChild(F)),F={type:"script",instance:F,count:1,state:null},y.set(C,F))}}function ML(l,c){lc.M(l,c);var h=Jm;if(h&&l){var y=gs(h).hoistableScripts,C=Qm(l),F=y.get(C);F||(F=h.querySelector(Fh(C)),F||(l=x({src:l,async:!0,type:"module"},c),(c=nl.get(C))&&Xb(l,c),F=h.createElement("script"),cr(F),en(F,"link",l),h.head.appendChild(F)),F={type:"script",instance:F,count:1,state:null},y.set(C,F))}}function n4(l,c,h,y){var C=(C=he.current)?tp(C):null;if(!C)throw Error(s(446));switch(l){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=Zm(h.href),h=gs(C).hoistableStyles,y=h.get(c),y||(y={type:"style",instance:null,count:0,state:null},h.set(c,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){l=Zm(h.href);var F=gs(C).hoistableStyles,ae=F.get(l);if(ae||(C=C.ownerDocument||C,ae={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},F.set(l,ae),(F=C.querySelector($h(l)))&&!F._p&&(ae.instance=F,ae.state.loading=5),nl.has(l)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},nl.set(l,h),F||RL(C,l,h,ae.state))),c&&y===null)throw Error(s(528,""));return ae}if(c&&y!==null)throw Error(s(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Qm(h),h=gs(C).hoistableScripts,y=h.get(c),y||(y={type:"script",instance:null,count:0,state:null},h.set(c,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,l))}}function Zm(l){return'href="'+Aa(l)+'"'}function $h(l){return'link[rel="stylesheet"]['+l+"]"}function i4(l){return x({},l,{"data-precedence":l.precedence,precedence:null})}function RL(l,c,h,y){l.querySelector('link[rel="preload"][as="style"]['+c+"]")?y.loading=1:(c=l.createElement("link"),y.preload=c,c.addEventListener("load",function(){return y.loading|=1}),c.addEventListener("error",function(){return y.loading|=2}),en(c,"link",h),cr(c),l.head.appendChild(c))}function Qm(l){return'[src="'+Aa(l)+'"]'}function Fh(l){return"script[async]"+l}function l4(l,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var y=l.querySelector('style[data-href~="'+Aa(h.href)+'"]');if(y)return c.instance=y,cr(y),y;var C=x({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return y=(l.ownerDocument||l).createElement("style"),cr(y),en(y,"style",C),ap(y,h.precedence,l),c.instance=y;case"stylesheet":C=Zm(h.href);var F=l.querySelector($h(C));if(F)return c.state.loading|=4,c.instance=F,cr(F),F;y=i4(h),(C=nl.get(C))&&Kb(y,C),F=(l.ownerDocument||l).createElement("link"),cr(F);var ae=F;return ae._p=new Promise(function(xe,Ae){ae.onload=xe,ae.onerror=Ae}),en(F,"link",y),c.state.loading|=4,ap(F,h.precedence,l),c.instance=F;case"script":return F=Qm(h.src),(C=l.querySelector(Fh(F)))?(c.instance=C,cr(C),C):(y=h,(C=nl.get(F))&&(y=x({},h),Xb(y,C)),l=l.ownerDocument||l,C=l.createElement("script"),cr(C),en(C,"link",y),l.head.appendChild(C),c.instance=C);case"void":return null;default:throw Error(s(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(y=c.instance,c.state.loading|=4,ap(y,h.precedence,l));return c.instance}function ap(l,c,h){for(var y=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=y.length?y[y.length-1]:null,F=C,ae=0;ae<y.length;ae++){var xe=y[ae];if(xe.dataset.precedence===c)F=xe;else if(F!==C)break}F?F.parentNode.insertBefore(l,F.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(l,c.firstChild))}function Kb(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.title==null&&(l.title=c.title)}function Xb(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.integrity==null&&(l.integrity=c.integrity)}var rp=null;function o4(l,c,h){if(rp===null){var y=new Map,C=rp=new Map;C.set(h,y)}else C=rp,y=C.get(h),y||(y=new Map,C.set(h,y));if(y.has(l))return y;for(y.set(l,null),h=h.getElementsByTagName(l),C=0;C<h.length;C++){var F=h[C];if(!(F[Rn]||F[lr]||l==="link"&&F.getAttribute("rel")==="stylesheet")&&F.namespaceURI!=="http://www.w3.org/2000/svg"){var ae=F.getAttribute(c)||"";ae=l+ae;var xe=y.get(ae);xe?xe.push(F):y.set(ae,[F])}}return y}function c4(l,c,h){l=l.ownerDocument||l,l.head.insertBefore(h,c==="title"?l.querySelector("head > title"):null)}function $L(l,c,h){if(h===1||c.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return l=c.disabled,typeof c.precedence=="string"&&l==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function d4(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Ih=null;function FL(){}function IL(l,c,h){if(Ih===null)throw Error(s(475));var y=Ih;if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var C=Zm(h.href),F=l.querySelector($h(C));if(F){l=F._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(y.count++,y=sp.bind(y),l.then(y,y)),c.state.loading|=4,c.instance=F,cr(F);return}F=l.ownerDocument||l,h=i4(h),(C=nl.get(C))&&Kb(h,C),F=F.createElement("link"),cr(F);var ae=F;ae._p=new Promise(function(xe,Ae){ae.onload=xe,ae.onerror=Ae}),en(F,"link",h),c.instance=F}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(c,l),(l=c.state.preload)&&(c.state.loading&3)===0&&(y.count++,c=sp.bind(y),l.addEventListener("load",c),l.addEventListener("error",c))}}function BL(){if(Ih===null)throw Error(s(475));var l=Ih;return l.stylesheets&&l.count===0&&Jb(l,l.stylesheets),0<l.count?function(c){var h=setTimeout(function(){if(l.stylesheets&&Jb(l,l.stylesheets),l.unsuspend){var y=l.unsuspend;l.unsuspend=null,y()}},6e4);return l.unsuspend=c,function(){l.unsuspend=null,clearTimeout(h)}}:null}function sp(){if(this.count--,this.count===0){if(this.stylesheets)Jb(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var np=null;function Jb(l,c){l.stylesheets=null,l.unsuspend!==null&&(l.count++,np=new Map,c.forEach(zL,l),np=null,sp.call(l))}function zL(l,c){if(!(c.state.loading&4)){var h=np.get(l);if(h)var y=h.get(null);else{h=new Map,np.set(l,h);for(var C=l.querySelectorAll("link[data-precedence],style[data-precedence]"),F=0;F<C.length;F++){var ae=C[F];(ae.nodeName==="LINK"||ae.getAttribute("media")!=="not all")&&(h.set(ae.dataset.precedence,ae),y=ae)}y&&h.set(null,y)}C=c.instance,ae=C.getAttribute("data-precedence"),F=h.get(ae)||y,F===y&&h.set(null,C),h.set(ae,C),this.count++,y=sp.bind(this),C.addEventListener("load",y),C.addEventListener("error",y),F?F.parentNode.insertBefore(C,F.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(C,l.firstChild)),c.state.loading|=4}}var Bh={$$typeof:k,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function qL(l,c,h,y,C,F,ae,xe){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xt(0),this.hiddenUpdates=Xt(null),this.identifierPrefix=y,this.onUncaughtError=C,this.onCaughtError=F,this.onRecoverableError=ae,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=xe,this.incompleteTransitions=new Map}function u4(l,c,h,y,C,F,ae,xe,Ae,He,rt,lt){return l=new qL(l,c,h,ae,xe,Ae,He,lt),c=1,F===!0&&(c|=24),F=Ps(3,null,null,c),l.current=F,F.stateNode=l,c=ch(),c.refCount++,l.pooledCache=c,c.refCount++,F.memoizedState={element:y,isDehydrated:h,cache:c},qe(F),l}function m4(l){return l?(l=ds,l):ds}function x4(l,c,h,y,C,F){C=m4(C),y.context===null?y.context=C:y.pendingContext=C,y=Je(c),y.payload={element:h},F=F===void 0?null:F,F!==null&&(y.callback=F),h=dt(l,y,c),h!==null&&(bi(h,l,c),it(h,l,c))}function h4(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<c?h:c}}function Zb(l,c){h4(l,c),(l=l.alternate)&&h4(l,c)}function f4(l){if(l.tag===13){var c=Go(l,67108864);c!==null&&bi(c,l,67108864),Zb(l,67108864)}}var ip=!0;function UL(l,c,h,y){var C=B.T;B.T=null;var F=W.p;try{W.p=2,Qb(l,c,h,y)}finally{W.p=F,B.T=C}}function HL(l,c,h,y){var C=B.T;B.T=null;var F=W.p;try{W.p=8,Qb(l,c,h,y)}finally{W.p=F,B.T=C}}function Qb(l,c,h,y){if(ip){var C=ev(y);if(C===null)Bb(l,c,y,lp,h),g4(l,y);else if(GL(C,l,c,h,y))y.stopPropagation();else if(g4(l,y),c&4&&-1<YL.indexOf(l)){for(;C!==null;){var F=Cs(C);if(F!==null)switch(F.tag){case 3:if(F=F.stateNode,F.current.memoizedState.isDehydrated){var ae=nt(F.pendingLanes);if(ae!==0){var xe=F;for(xe.pendingLanes|=2,xe.entangledLanes|=2;ae;){var Ae=1<<31-pt(ae);xe.entanglements[1]|=Ae,ae&=~Ae}go(F),(Ga&6)===0&&(H0=Se()+500,Dh(0))}}break;case 13:xe=Go(F,2),xe!==null&&bi(xe,F,2),G0(),Zb(F,2)}if(F=ev(y),F===null&&Bb(l,c,y,lp,h),F===C)break;C=F}C!==null&&y.stopPropagation()}else Bb(l,c,y,null,h)}}function ev(l){return l=ru(l),tv(l)}var lp=null;function tv(l){if(lp=null,l=qs(l),l!==null){var c=i(l);if(c===null)l=null;else{var h=c.tag;if(h===13){if(l=o(c),l!==null)return l;l=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null)}}return lp=l,null}function p4(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ge()){case ve:return 2;case Me:return 8;case et:case Ie:return 32;case tt:return 268435456;default:return 32}default:return 32}}var av=!1,gd=null,yd=null,bd=null,zh=new Map,qh=new Map,vd=[],YL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function g4(l,c){switch(l){case"focusin":case"focusout":gd=null;break;case"dragenter":case"dragleave":yd=null;break;case"mouseover":case"mouseout":bd=null;break;case"pointerover":case"pointerout":zh.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":qh.delete(c.pointerId)}}function Uh(l,c,h,y,C,F){return l===null||l.nativeEvent!==F?(l={blockedOn:c,domEventName:h,eventSystemFlags:y,nativeEvent:F,targetContainers:[C]},c!==null&&(c=Cs(c),c!==null&&f4(c)),l):(l.eventSystemFlags|=y,c=l.targetContainers,C!==null&&c.indexOf(C)===-1&&c.push(C),l)}function GL(l,c,h,y,C){switch(c){case"focusin":return gd=Uh(gd,l,c,h,y,C),!0;case"dragenter":return yd=Uh(yd,l,c,h,y,C),!0;case"mouseover":return bd=Uh(bd,l,c,h,y,C),!0;case"pointerover":var F=C.pointerId;return zh.set(F,Uh(zh.get(F)||null,l,c,h,y,C)),!0;case"gotpointercapture":return F=C.pointerId,qh.set(F,Uh(qh.get(F)||null,l,c,h,y,C)),!0}return!1}function y4(l){var c=qs(l.target);if(c!==null){var h=i(c);if(h!==null){if(c=h.tag,c===13){if(c=o(h),c!==null){l.blockedOn=c,Gt(l.priority,function(){if(h.tag===13){var y=yi();y=is(y);var C=Go(h,y);C!==null&&bi(C,h,y),Zb(h,y)}});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){l.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}l.blockedOn=null}function op(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var h=ev(l.nativeEvent);if(h===null){h=l.nativeEvent;var y=new h.constructor(h.type,h);Mi=y,h.target.dispatchEvent(y),Mi=null}else return c=Cs(h),c!==null&&f4(c),l.blockedOn=h,!1;c.shift()}return!0}function b4(l,c,h){op(l)&&h.delete(c)}function VL(){av=!1,gd!==null&&op(gd)&&(gd=null),yd!==null&&op(yd)&&(yd=null),bd!==null&&op(bd)&&(bd=null),zh.forEach(b4),qh.forEach(b4)}function cp(l,c){l.blockedOn===c&&(l.blockedOn=null,av||(av=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,VL)))}var dp=null;function v4(l){dp!==l&&(dp=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){dp===l&&(dp=null);for(var c=0;c<l.length;c+=3){var h=l[c],y=l[c+1],C=l[c+2];if(typeof y!="function"){if(tv(y||h)===null)continue;break}var F=Cs(h);F!==null&&(l.splice(c,3),c-=3,al(F,{pending:!0,data:C,method:h.method,action:y},y,C))}}))}function Hh(l){function c(Ae){return cp(Ae,l)}gd!==null&&cp(gd,l),yd!==null&&cp(yd,l),bd!==null&&cp(bd,l),zh.forEach(c),qh.forEach(c);for(var h=0;h<vd.length;h++){var y=vd[h];y.blockedOn===l&&(y.blockedOn=null)}for(;0<vd.length&&(h=vd[0],h.blockedOn===null);)y4(h),h.blockedOn===null&&vd.shift();if(h=(l.ownerDocument||l).$$reactFormReplay,h!=null)for(y=0;y<h.length;y+=3){var C=h[y],F=h[y+1],ae=C[Qa]||null;if(typeof F=="function")ae||v4(h);else if(ae){var xe=null;if(F&&F.hasAttribute("formAction")){if(C=F,ae=F[Qa]||null)xe=ae.formAction;else if(tv(C)!==null)continue}else xe=ae.action;typeof xe=="function"?h[y+1]=xe:(h.splice(y,3),y-=3),v4(h)}}}function rv(l){this._internalRoot=l}up.prototype.render=rv.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(s(409));var h=c.current,y=yi();x4(h,y,l,c,null,null)},up.prototype.unmount=rv.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;x4(l.current,2,null,l,null,null),G0(),c[fs]=null}};function up(l){this._internalRoot=l}up.prototype.unstable_scheduleHydration=function(l){if(l){var c=si();l={blockedOn:null,target:l,priority:c};for(var h=0;h<vd.length&&c!==0&&c<vd[h].priority;h++);vd.splice(h,0,l),h===0&&y4(l)}};var j4=a.version;if(j4!=="19.1.1")throw Error(s(527,j4,"19.1.1"));W.findDOMNode=function(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return l=u(c),l=l!==null?m(l):null,l=l===null?null:l.stateNode,l};var WL={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mp.isDisabled&&mp.supportsFiber)try{Nt=mp.inject(WL),Ut=mp}catch{}}return Gh.createRoot=function(l,c){if(!n(l))throw Error(s(299));var h=!1,y="",C=$w,F=Fw,ae=Iw,xe=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(C=c.onUncaughtError),c.onCaughtError!==void 0&&(F=c.onCaughtError),c.onRecoverableError!==void 0&&(ae=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(xe=c.unstable_transitionCallbacks)),c=u4(l,1,!1,null,null,h,y,C,F,ae,xe,null),l[fs]=c.current,Ib(l),new rv(c)},Gh.hydrateRoot=function(l,c,h){if(!n(l))throw Error(s(299));var y=!1,C="",F=$w,ae=Fw,xe=Iw,Ae=null,He=null;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(C=h.identifierPrefix),h.onUncaughtError!==void 0&&(F=h.onUncaughtError),h.onCaughtError!==void 0&&(ae=h.onCaughtError),h.onRecoverableError!==void 0&&(xe=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(Ae=h.unstable_transitionCallbacks),h.formState!==void 0&&(He=h.formState)),c=u4(l,1,!0,c,h??null,y,C,F,ae,xe,Ae,He),c.context=m4(null),h=c.current,y=yi(),y=is(y),C=Je(y),C.callback=null,dt(h,C,y),h=y,c.current.lanes=h,Ft(c,h),go(c),l[fs]=c.current,Ib(l),new up(c)},Gh.version="19.1.1",Gh}var P4;function sM(){if(P4)return iv.exports;P4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),iv.exports=rM(),iv.exports}var nM=sM(),iM=uk();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yf(){return yf=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},yf.apply(this,arguments)}var Cd;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Cd||(Cd={}));const O4="popstate";function lM(t){t===void 0&&(t={});function a(s,n){let{pathname:i,search:o,hash:d}=s.location;return E2("",{pathname:i,search:o,hash:d},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(s,n){return typeof n=="string"?n:ag(n)}return cM(a,r,null,t)}function Rr(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function mk(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function oM(){return Math.random().toString(36).substr(2,8)}function D4(t,a){return{usr:t.state,key:t.key,idx:a}}function E2(t,a,r,s){return r===void 0&&(r=null),yf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof a=="string"?$x(a):a,{state:r,key:a&&a.key||s||oM()})}function ag(t){let{pathname:a="/",search:r="",hash:s=""}=t;return r&&r!=="?"&&(a+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(a+=s.charAt(0)==="#"?s:"#"+s),a}function $x(t){let a={};if(t){let r=t.indexOf("#");r>=0&&(a.hash=t.substr(r),t=t.substr(0,r));let s=t.indexOf("?");s>=0&&(a.search=t.substr(s),t=t.substr(0,s)),t&&(a.pathname=t)}return a}function cM(t,a,r,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:i=!1}=s,o=n.history,d=Cd.Pop,u=null,m=x();m==null&&(m=0,o.replaceState(yf({},o.state,{idx:m}),""));function x(){return(o.state||{idx:null}).idx}function f(){d=Cd.Pop;let N=x(),w=N==null?null:N-m;m=N,u&&u({action:d,location:j.location,delta:w})}function b(N,w){d=Cd.Push;let P=E2(j.location,N,w);m=x()+1;let k=D4(P,m),$=j.createHref(P);try{o.pushState(k,"",$)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;n.location.assign($)}i&&u&&u({action:d,location:j.location,delta:1})}function p(N,w){d=Cd.Replace;let P=E2(j.location,N,w);m=x();let k=D4(P,m),$=j.createHref(P);o.replaceState(k,"",$),i&&u&&u({action:d,location:j.location,delta:0})}function v(N){let w=n.location.origin!=="null"?n.location.origin:n.location.href,P=typeof N=="string"?N:ag(N);return P=P.replace(/ $/,"%20"),Rr(w,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,w)}let j={get action(){return d},get location(){return t(n,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return n.addEventListener(O4,f),u=N,()=>{n.removeEventListener(O4,f),u=null}},createHref(N){return a(n,N)},createURL:v,encodeLocation(N){let w=v(N);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:b,replace:p,go(N){return o.go(N)}};return j}var L4;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(L4||(L4={}));function dM(t,a,r){return r===void 0&&(r="/"),uM(t,a,r)}function uM(t,a,r,s){let n=typeof a=="string"?$x(a):a,i=Nx(n.pathname||"/",r);if(i==null)return null;let o=xk(t);mM(o);let d=null;for(let u=0;d==null&&u<o.length;++u){let m=wM(i);d=jM(o[u],m)}return d}function xk(t,a,r,s){a===void 0&&(a=[]),r===void 0&&(r=[]),s===void 0&&(s="");let n=(i,o,d)=>{let u={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Rr(u.relativePath.startsWith(s),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(s.length));let m=Td([s,u.relativePath]),x=r.concat(u);i.children&&i.children.length>0&&(Rr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),xk(i.children,a,x,m)),!(i.path==null&&!i.index)&&a.push({path:m,score:bM(m,i.index),routesMeta:x})};return t.forEach((i,o)=>{var d;if(i.path===""||!((d=i.path)!=null&&d.includes("?")))n(i,o);else for(let u of hk(i.path))n(i,o,u)}),a}function hk(t){let a=t.split("/");if(a.length===0)return[];let[r,...s]=a,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return n?[i,""]:[i];let o=hk(s.join("/")),d=[];return d.push(...o.map(u=>u===""?i:[i,u].join("/"))),n&&d.push(...o),d.map(u=>t.startsWith("/")&&u===""?"/":u)}function mM(t){t.sort((a,r)=>a.score!==r.score?r.score-a.score:vM(a.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const xM=/^:[\w-]+$/,hM=3,fM=2,pM=1,gM=10,yM=-2,M4=t=>t==="*";function bM(t,a){let r=t.split("/"),s=r.length;return r.some(M4)&&(s+=yM),a&&(s+=fM),r.filter(n=>!M4(n)).reduce((n,i)=>n+(xM.test(i)?hM:i===""?pM:gM),s)}function vM(t,a){return t.length===a.length&&t.slice(0,-1).every((s,n)=>s===a[n])?t[t.length-1]-a[a.length-1]:0}function jM(t,a,r){let{routesMeta:s}=t,n={},i="/",o=[];for(let d=0;d<s.length;++d){let u=s[d],m=d===s.length-1,x=i==="/"?a:a.slice(i.length)||"/",f=T2({path:u.relativePath,caseSensitive:u.caseSensitive,end:m},x),b=u.route;if(!f)return null;Object.assign(n,f.params),o.push({params:n,pathname:Td([i,f.pathname]),pathnameBase:kM(Td([i,f.pathnameBase])),route:b}),f.pathnameBase!=="/"&&(i=Td([i,f.pathnameBase]))}return o}function T2(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=NM(t.path,t.caseSensitive,t.end),n=a.match(r);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),d=n.slice(1);return{params:s.reduce((m,x,f)=>{let{paramName:b,isOptional:p}=x;if(b==="*"){let j=d[f]||"";o=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const v=d[f];return p&&!v?m[b]=void 0:m[b]=(v||"").replace(/%2F/g,"/"),m},{}),pathname:i,pathnameBase:o,pattern:t}}function NM(t,a,r){a===void 0&&(a=!1),r===void 0&&(r=!0),mk(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,d,u)=>(s.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,a?void 0:"i"),s]}function wM(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return mk(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+a+").")),t}}function Nx(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let r=a.endsWith("/")?a.length-1:a.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}function SM(t,a){a===void 0&&(a="/");let{pathname:r,search:s="",hash:n=""}=typeof t=="string"?$x(t):t;return{pathname:r?r.startsWith("/")?r:_M(r,a):a,search:CM(s),hash:EM(n)}}function _M(t,a){let r=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function dv(t,a,r,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+a+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function AM(t){return t.filter((a,r)=>r===0||a.route.path&&a.route.path.length>0)}function cN(t,a){let r=AM(t);return a?r.map((s,n)=>n===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function dN(t,a,r,s){s===void 0&&(s=!1);let n;typeof t=="string"?n=$x(t):(n=yf({},t),Rr(!n.pathname||!n.pathname.includes("?"),dv("?","pathname","search",n)),Rr(!n.pathname||!n.pathname.includes("#"),dv("#","pathname","hash",n)),Rr(!n.search||!n.search.includes("#"),dv("#","search","hash",n)));let i=t===""||n.pathname==="",o=i?"/":n.pathname,d;if(o==null)d=r;else{let f=a.length-1;if(!s&&o.startsWith("..")){let b=o.split("/");for(;b[0]==="..";)b.shift(),f-=1;n.pathname=b.join("/")}d=f>=0?a[f]:"/"}let u=SM(n,d),m=o&&o!=="/"&&o.endsWith("/"),x=(i||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(m||x)&&(u.pathname+="/"),u}const Td=t=>t.join("/").replace(/\/\/+/g,"/"),kM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),CM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,EM=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function TM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const fk=["post","put","patch","delete"];new Set(fk);const PM=["get",...fk];new Set(PM);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bf(){return bf=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},bf.apply(this,arguments)}const ay=g.createContext(null),pk=g.createContext(null),Ac=g.createContext(null),ry=g.createContext(null),Oo=g.createContext({outlet:null,matches:[],isDataRoute:!1}),gk=g.createContext(null);function OM(t,a){let{relative:r}=a===void 0?{}:a;Fx()||Rr(!1);let{basename:s,navigator:n}=g.useContext(Ac),{hash:i,pathname:o,search:d}=sy(t,{relative:r}),u=o;return s!=="/"&&(u=o==="/"?s:Td([s,o])),n.createHref({pathname:u,search:d,hash:i})}function Fx(){return g.useContext(ry)!=null}function Do(){return Fx()||Rr(!1),g.useContext(ry).location}function yk(t){g.useContext(Ac).static||g.useLayoutEffect(t)}function ga(){let{isDataRoute:t}=g.useContext(Oo);return t?VM():DM()}function DM(){Fx()||Rr(!1);let t=g.useContext(ay),{basename:a,future:r,navigator:s}=g.useContext(Ac),{matches:n}=g.useContext(Oo),{pathname:i}=Do(),o=JSON.stringify(cN(n,r.v7_relativeSplatPath)),d=g.useRef(!1);return yk(()=>{d.current=!0}),g.useCallback(function(m,x){if(x===void 0&&(x={}),!d.current)return;if(typeof m=="number"){s.go(m);return}let f=dN(m,JSON.parse(o),i,x.relative==="path");t==null&&a!=="/"&&(f.pathname=f.pathname==="/"?a:Td([a,f.pathname])),(x.replace?s.replace:s.push)(f,x.state,x)},[a,s,o,i,t])}const LM=g.createContext(null);function MM(t){let a=g.useContext(Oo).outlet;return a&&g.createElement(LM.Provider,{value:t},a)}function ln(){let{matches:t}=g.useContext(Oo),a=t[t.length-1];return a?a.params:{}}function sy(t,a){let{relative:r}=a===void 0?{}:a,{future:s}=g.useContext(Ac),{matches:n}=g.useContext(Oo),{pathname:i}=Do(),o=JSON.stringify(cN(n,s.v7_relativeSplatPath));return g.useMemo(()=>dN(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function RM(t,a){return $M(t,a)}function $M(t,a,r,s){Fx()||Rr(!1);let{navigator:n}=g.useContext(Ac),{matches:i}=g.useContext(Oo),o=i[i.length-1],d=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let m=Do(),x;if(a){var f;let N=typeof a=="string"?$x(a):a;u==="/"||(f=N.pathname)!=null&&f.startsWith(u)||Rr(!1),x=N}else x=m;let b=x.pathname||"/",p=b;if(u!=="/"){let N=u.replace(/^\//,"").split("/");p="/"+b.replace(/^\//,"").split("/").slice(N.length).join("/")}let v=dM(t,{pathname:p}),j=qM(v&&v.map(N=>Object.assign({},N,{params:Object.assign({},d,N.params),pathname:Td([u,n.encodeLocation?n.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:Td([u,n.encodeLocation?n.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),i,r,s);return a&&j?g.createElement(ry.Provider,{value:{location:bf({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Cd.Pop}},j):j}function FM(){let t=GM(),a=TM(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},a),r?g.createElement("pre",{style:n},r):null,null)}const IM=g.createElement(FM,null);class BM extends g.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,r){return r.location!==a.location||r.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:r.error,location:r.location,revalidation:a.revalidation||r.revalidation}}componentDidCatch(a,r){console.error("React Router caught the following error during render",a,r)}render(){return this.state.error!==void 0?g.createElement(Oo.Provider,{value:this.props.routeContext},g.createElement(gk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zM(t){let{routeContext:a,match:r,children:s}=t,n=g.useContext(ay);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),g.createElement(Oo.Provider,{value:a},s)}function qM(t,a,r,s){var n;if(a===void 0&&(a=[]),r===void 0&&(r=null),s===void 0&&(s=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&a.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,d=(n=r)==null?void 0:n.errors;if(d!=null){let x=o.findIndex(f=>f.route.id&&d?.[f.route.id]!==void 0);x>=0||Rr(!1),o=o.slice(0,Math.min(o.length,x+1))}let u=!1,m=-1;if(r&&s&&s.v7_partialHydration)for(let x=0;x<o.length;x++){let f=o[x];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(m=x),f.route.id){let{loaderData:b,errors:p}=r,v=f.route.loader&&b[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||v){u=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((x,f,b)=>{let p,v=!1,j=null,N=null;r&&(p=d&&f.route.id?d[f.route.id]:void 0,j=f.route.errorElement||IM,u&&(m<0&&b===0?(WM("route-fallback"),v=!0,N=null):m===b&&(v=!0,N=f.route.hydrateFallbackElement||null)));let w=a.concat(o.slice(0,b+1)),P=()=>{let k;return p?k=j:v?k=N:f.route.Component?k=g.createElement(f.route.Component,null):f.route.element?k=f.route.element:k=x,g.createElement(zM,{match:f,routeContext:{outlet:x,matches:w,isDataRoute:r!=null},children:k})};return r&&(f.route.ErrorBoundary||f.route.errorElement||b===0)?g.createElement(BM,{location:r.location,revalidation:r.revalidation,component:j,error:p,children:P(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):P()},null)}var bk=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(bk||{}),vk=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(vk||{});function UM(t){let a=g.useContext(ay);return a||Rr(!1),a}function HM(t){let a=g.useContext(pk);return a||Rr(!1),a}function YM(t){let a=g.useContext(Oo);return a||Rr(!1),a}function jk(t){let a=YM(),r=a.matches[a.matches.length-1];return r.route.id||Rr(!1),r.route.id}function GM(){var t;let a=g.useContext(gk),r=HM(),s=jk();return a!==void 0?a:(t=r.errors)==null?void 0:t[s]}function VM(){let{router:t}=UM(bk.UseNavigateStable),a=jk(vk.UseNavigateStable),r=g.useRef(!1);return yk(()=>{r.current=!0}),g.useCallback(function(n,i){i===void 0&&(i={}),r.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,bf({fromRouteId:a},i)))},[t,a])}const R4={};function WM(t,a,r){R4[t]||(R4[t]=!0)}function KM(t,a){t?.v7_startTransition,t?.v7_relativeSplatPath}function uv(t){let{to:a,replace:r,state:s,relative:n}=t;Fx()||Rr(!1);let{future:i,static:o}=g.useContext(Ac),{matches:d}=g.useContext(Oo),{pathname:u}=Do(),m=ga(),x=dN(a,cN(d,i.v7_relativeSplatPath),u,n==="path"),f=JSON.stringify(x);return g.useEffect(()=>m(JSON.parse(f),{replace:r,state:s,relative:n}),[m,f,n,r,s]),null}function XM(t){return MM(t.context)}function ht(t){Rr(!1)}function JM(t){let{basename:a="/",children:r=null,location:s,navigationType:n=Cd.Pop,navigator:i,static:o=!1,future:d}=t;Fx()&&Rr(!1);let u=a.replace(/^\/*/,"/"),m=g.useMemo(()=>({basename:u,navigator:i,static:o,future:bf({v7_relativeSplatPath:!1},d)}),[u,d,i,o]);typeof s=="string"&&(s=$x(s));let{pathname:x="/",search:f="",hash:b="",state:p=null,key:v="default"}=s,j=g.useMemo(()=>{let N=Nx(x,u);return N==null?null:{location:{pathname:N,search:f,hash:b,state:p,key:v},navigationType:n}},[u,x,f,b,p,v,n]);return j==null?null:g.createElement(Ac.Provider,{value:m},g.createElement(ry.Provider,{children:r,value:j}))}function ZM(t){let{children:a,location:r}=t;return RM(P2(a),r)}new Promise(()=>{});function P2(t,a){a===void 0&&(a=[]);let r=[];return g.Children.forEach(t,(s,n)=>{if(!g.isValidElement(s))return;let i=[...a,n];if(s.type===g.Fragment){r.push.apply(r,P2(s.props.children,i));return}s.type!==ht&&Rr(!1),!s.props.index||!s.props.children||Rr(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=P2(s.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rg(){return rg=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},rg.apply(this,arguments)}function Nk(t,a){if(t==null)return{};var r={},s=Object.keys(t),n,i;for(i=0;i<s.length;i++)n=s[i],!(a.indexOf(n)>=0)&&(r[n]=t[n]);return r}function QM(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function eR(t,a){return t.button===0&&(!a||a==="_self")&&!QM(t)}function O2(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,r)=>{let s=t[r];return a.concat(Array.isArray(s)?s.map(n=>[r,n]):[[r,s]])},[]))}function tR(t,a){let r=O2(t);return a&&a.forEach((s,n)=>{r.has(n)||a.getAll(n).forEach(i=>{r.append(n,i)})}),r}const aR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],sR="6";try{window.__reactRouterVersion=sR}catch{}const nR=g.createContext({isTransitioning:!1}),iR="startTransition",$4=dk[iR];function lR(t){let{basename:a,children:r,future:s,window:n}=t,i=g.useRef();i.current==null&&(i.current=lM({window:n,v5Compat:!0}));let o=i.current,[d,u]=g.useState({action:o.action,location:o.location}),{v7_startTransition:m}=s||{},x=g.useCallback(f=>{m&&$4?$4(()=>u(f)):u(f)},[u,m]);return g.useLayoutEffect(()=>o.listen(x),[o,x]),g.useEffect(()=>KM(s),[s]),g.createElement(JM,{basename:a,children:r,location:d.location,navigationType:d.action,navigator:o,future:s})}const oR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zt=g.forwardRef(function(a,r){let{onClick:s,relative:n,reloadDocument:i,replace:o,state:d,target:u,to:m,preventScrollReset:x,viewTransition:f}=a,b=Nk(a,aR),{basename:p}=g.useContext(Ac),v,j=!1;if(typeof m=="string"&&cR.test(m)&&(v=m,oR))try{let k=new URL(window.location.href),$=m.startsWith("//")?new URL(k.protocol+m):new URL(m),O=Nx($.pathname,p);$.origin===k.origin&&O!=null?m=O+$.search+$.hash:j=!0}catch{}let N=OM(m,{relative:n}),w=mR(m,{replace:o,state:d,target:u,preventScrollReset:x,relative:n,viewTransition:f});function P(k){s&&s(k),k.defaultPrevented||w(k)}return g.createElement("a",rg({},b,{href:v||N,onClick:j||i?s:P,ref:r,target:u}))}),dR=g.forwardRef(function(a,r){let{"aria-current":s="page",caseSensitive:n=!1,className:i="",end:o=!1,style:d,to:u,viewTransition:m,children:x}=a,f=Nk(a,rR),b=sy(u,{relative:f.relative}),p=Do(),v=g.useContext(pk),{navigator:j,basename:N}=g.useContext(Ac),w=v!=null&&xR(b)&&m===!0,P=j.encodeLocation?j.encodeLocation(b).pathname:b.pathname,k=p.pathname,$=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(k=k.toLowerCase(),$=$?$.toLowerCase():null,P=P.toLowerCase()),$&&N&&($=Nx($,N)||$);const O=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let L=k===P||!o&&k.startsWith(P)&&k.charAt(O)==="/",_=$!=null&&($===P||!o&&$.startsWith(P)&&$.charAt(P.length)==="/"),E={isActive:L,isPending:_,isTransitioning:w},A=L?s:void 0,z;typeof i=="function"?z=i(E):z=[i,L?"active":null,_?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let M=typeof d=="function"?d(E):d;return g.createElement(Zt,rg({},f,{"aria-current":A,className:z,ref:r,style:M,to:u,viewTransition:m}),typeof x=="function"?x(E):x)});var D2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(D2||(D2={}));var F4;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(F4||(F4={}));function uR(t){let a=g.useContext(ay);return a||Rr(!1),a}function mR(t,a){let{target:r,replace:s,state:n,preventScrollReset:i,relative:o,viewTransition:d}=a===void 0?{}:a,u=ga(),m=Do(),x=sy(t,{relative:o});return g.useCallback(f=>{if(eR(f,r)){f.preventDefault();let b=s!==void 0?s:ag(m)===ag(x);u(t,{replace:b,state:n,preventScrollReset:i,relative:o,viewTransition:d})}},[m,u,x,s,n,r,t,i,o,d])}function wk(t){let a=g.useRef(O2(t)),r=g.useRef(!1),s=Do(),n=g.useMemo(()=>tR(s.search,r.current?null:a.current),[s.search]),i=ga(),o=g.useCallback((d,u)=>{const m=O2(typeof d=="function"?d(n):d);r.current=!0,i("?"+m,u)},[i,n]);return[n,o]}function xR(t,a){a===void 0&&(a={});let r=g.useContext(nR);r==null&&Rr(!1);let{basename:s}=uR(D2.useViewTransitionState),n=sy(t,{relative:a.relative});if(!r.isTransitioning)return!1;let i=Nx(r.currentLocation.pathname,s)||r.currentLocation.pathname,o=Nx(r.nextLocation.pathname,s)||r.nextLocation.pathname;return T2(n.pathname,o)!=null||T2(n.pathname,i)!=null}const ie="https://server.primary.brooklynprivatecollege.co.zw/api",Sk=g.createContext(),ut=()=>{const t=g.useContext(Sk);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},hR=({children:t})=>{const[a,r]=g.useState(null),[s,n]=g.useState(localStorage.getItem("token")),[i,o]=g.useState(!0),[d,u]=g.useState(!1);g.useEffect(()=>{(async()=>{const p=localStorage.getItem("token"),v=localStorage.getItem("user");if(p&&v)try{if((await fetch(`${ie}/auth/profile`,{method:"GET",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}})).ok){const N=JSON.parse(v);r(N),n(p),u(!0)}else localStorage.removeItem("token"),localStorage.removeItem("user"),n(null),r(null),u(!1)}catch(j){console.error("Token validation error:",j),localStorage.removeItem("token"),localStorage.removeItem("user"),n(null),r(null),u(!1)}o(!1)})()},[]);const f={user:a,token:s,isLoading:i,isAuthenticated:d,login:async(b,p)=>{o(!0);try{const v=await fetch(`${ie}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:b,password:p})}),j=v.headers.get("content-type");let N;if(j&&j.includes("application/json"))N=await v.json(),console.log(" Backend response:",N);else{const w=await v.text();throw console.log(" Non-JSON response:",w),v.status===429?new Error("Too many login attempts. Please wait a moment and try again."):new Error(`Server error: ${w}`)}if(v.ok){const{token:w,user:P}=N;return console.log(" Login successful, user:",P),r(P),n(w),u(!0),localStorage.setItem("token",w),localStorage.setItem("user",JSON.stringify(P)),{success:!0,user:P}}else throw new Error(N.error||"Username or password is wrong")}catch(v){throw console.error(" Login error:",v),v}finally{o(!1)}},logout:()=>{r(null),n(null),u(!1),localStorage.removeItem("token"),localStorage.removeItem("user")}};return e.jsx(Sk.Provider,{value:f,children:t})};/*!
 * Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */function L2(t,a){(a==null||a>t.length)&&(a=t.length);for(var r=0,s=Array(a);r<a;r++)s[r]=t[r];return s}function fR(t){if(Array.isArray(t))return t}function pR(t){if(Array.isArray(t))return L2(t)}function gR(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function yR(t,a){for(var r=0;r<a.length;r++){var s=a[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,_k(s.key),s)}}function bR(t,a,r){return a&&yR(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bp(t,a){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=uN(t))||a){r&&(t=r);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,d=!1;return{s:function(){r=r.call(t)},n:function(){var u=r.next();return o=u.done,u},e:function(u){d=!0,i=u},f:function(){try{o||r.return==null||r.return()}finally{if(d)throw i}}}}function _a(t,a,r){return(a=_k(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function vR(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jR(t,a){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,n,i,o,d=[],u=!0,m=!1;try{if(i=(r=r.call(t)).next,a===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(s=i.call(r)).done)&&(d.push(s.value),d.length!==a);u=!0);}catch(x){m=!0,n=x}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(m)throw n}}return d}}function NR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I4(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function ft(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?I4(Object(r),!0).forEach(function(s){_a(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I4(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function ny(t,a){return fR(t)||jR(t,a)||uN(t,a)||NR()}function Ul(t){return pR(t)||vR(t)||uN(t)||wR()}function SR(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function _k(t){var a=SR(t,"string");return typeof a=="symbol"?a:a+""}function sg(t){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},sg(t)}function uN(t,a){if(t){if(typeof t=="string")return L2(t,a);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L2(t,a):void 0}}var B4=function(){},mN={},Ak={},kk=null,Ck={mark:B4,measure:B4};try{typeof window<"u"&&(mN=window),typeof document<"u"&&(Ak=document),typeof MutationObserver<"u"&&(kk=MutationObserver),typeof performance<"u"&&(Ck=performance)}catch{}var _R=mN.navigator||{},z4=_R.userAgent,q4=z4===void 0?"":z4,Dd=mN,gr=Ak,U4=kk,xp=Ck;Dd.document;var kc=!!gr.documentElement&&!!gr.head&&typeof gr.addEventListener=="function"&&typeof gr.createElement=="function",Ek=~q4.indexOf("MSIE")||~q4.indexOf("Trident/"),mv,AR=/fa(k|kd|s|r|l|t|d|dr|dl|dt|b|slr|slpr|wsb|tl|ns|nds|es|jr|jfr|jdr|cr|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,kR=/Font ?Awesome ?([567 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit|Notdog Duo|Notdog|Chisel|Etch|Thumbprint|Jelly Fill|Jelly Duo|Jelly|Slab Press|Slab|Whiteboard)?.*/i,Tk={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"},slab:{"fa-regular":"regular",faslr:"regular"},"slab-press":{"fa-regular":"regular",faslpr:"regular"},thumbprint:{"fa-light":"light",fatl:"light"},whiteboard:{"fa-semibold":"semibold",fawsb:"semibold"},notdog:{"fa-solid":"solid",fans:"solid"},"notdog-duo":{"fa-solid":"solid",fands:"solid"},etch:{"fa-solid":"solid",faes:"solid"},jelly:{"fa-regular":"regular",fajr:"regular"},"jelly-fill":{"fa-regular":"regular",fajfr:"regular"},"jelly-duo":{"fa-regular":"regular",fajdr:"regular"},chisel:{"fa-regular":"regular",facr:"regular"}},CR={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},Pk=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-thumbprint","fa-whiteboard","fa-notdog","fa-notdog-duo","fa-chisel","fa-etch","fa-jelly","fa-jelly-fill","fa-jelly-duo","fa-slab","fa-slab-press"],yn="classic",Ff="duotone",Ok="sharp",Dk="sharp-duotone",Lk="chisel",Mk="etch",Rk="jelly",$k="jelly-duo",Fk="jelly-fill",Ik="notdog",Bk="notdog-duo",zk="slab",qk="slab-press",Uk="thumbprint",Hk="whiteboard",ER="Classic",TR="Duotone",PR="Sharp",OR="Sharp Duotone",DR="Chisel",LR="Etch",MR="Jelly",RR="Jelly Duo",$R="Jelly Fill",FR="Notdog",IR="Notdog Duo",BR="Slab",zR="Slab Press",qR="Thumbprint",UR="Whiteboard",Yk=[yn,Ff,Ok,Dk,Lk,Mk,Rk,$k,Fk,Ik,Bk,zk,qk,Uk,Hk];mv={},_a(_a(_a(_a(_a(_a(_a(_a(_a(_a(mv,yn,ER),Ff,TR),Ok,PR),Dk,OR),Lk,DR),Mk,LR),Rk,MR),$k,RR),Fk,$R),Ik,FR),_a(_a(_a(_a(_a(mv,Bk,IR),zk,BR),qk,zR),Uk,qR),Hk,UR);var HR={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"},slab:{400:"faslr"},"slab-press":{400:"faslpr"},whiteboard:{600:"fawsb"},thumbprint:{300:"fatl"},notdog:{900:"fans"},"notdog-duo":{900:"fands"},etch:{900:"faes"},chisel:{400:"facr"},jelly:{400:"fajr"},"jelly-fill":{400:"fajfr"},"jelly-duo":{400:"fajdr"}},YR={"Font Awesome 7 Free":{900:"fas",400:"far"},"Font Awesome 7 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 7 Brands":{400:"fab",normal:"fab"},"Font Awesome 7 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 7 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 7 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"},"Font Awesome 7 Jelly":{400:"fajr",normal:"fajr"},"Font Awesome 7 Jelly Fill":{400:"fajfr",normal:"fajfr"},"Font Awesome 7 Jelly Duo":{400:"fajdr",normal:"fajdr"},"Font Awesome 7 Slab":{400:"faslr",normal:"faslr"},"Font Awesome 7 Slab Press":{400:"faslpr",normal:"faslpr"},"Font Awesome 7 Thumbprint":{300:"fatl",normal:"fatl"},"Font Awesome 7 Notdog":{900:"fans",normal:"fans"},"Font Awesome 7 Notdog Duo":{900:"fands",normal:"fands"},"Font Awesome 7 Etch":{900:"faes",normal:"faes"},"Font Awesome 7 Chisel":{400:"facr",normal:"facr"},"Font Awesome 7 Whiteboard":{600:"fawsb",normal:"fawsb"}},GR=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["chisel",{defaultShortPrefixId:"facr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["etch",{defaultShortPrefixId:"faes",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["jelly",{defaultShortPrefixId:"fajr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["jelly-duo",{defaultShortPrefixId:"fajdr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["jelly-fill",{defaultShortPrefixId:"fajfr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["notdog",{defaultShortPrefixId:"fans",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["notdog-duo",{defaultShortPrefixId:"fands",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["slab",{defaultShortPrefixId:"faslr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["slab-press",{defaultShortPrefixId:"faslpr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["thumbprint",{defaultShortPrefixId:"fatl",defaultStyleId:"light",styleIds:["light"],futureStyleIds:[],defaultFontWeight:300}],["whiteboard",{defaultShortPrefixId:"fawsb",defaultStyleId:"semibold",styleIds:["semibold"],futureStyleIds:[],defaultFontWeight:600}]]),VR={chisel:{regular:"facr"},classic:{brands:"fab",light:"fal",regular:"far",solid:"fas",thin:"fat"},duotone:{light:"fadl",regular:"fadr",solid:"fad",thin:"fadt"},etch:{solid:"faes"},jelly:{regular:"fajr"},"jelly-duo":{regular:"fajdr"},"jelly-fill":{regular:"fajfr"},notdog:{solid:"fans"},"notdog-duo":{solid:"fands"},sharp:{light:"fasl",regular:"fasr",solid:"fass",thin:"fast"},"sharp-duotone":{light:"fasdl",regular:"fasdr",solid:"fasds",thin:"fasdt"},slab:{regular:"faslr"},"slab-press":{regular:"faslpr"},thumbprint:{light:"fatl"},whiteboard:{semibold:"fawsb"}},Gk=["fak","fa-kit","fakd","fa-kit-duotone"],H4={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},WR=["kit"],KR="kit",XR="kit-duotone",JR="Kit",ZR="Kit Duotone";_a(_a({},KR,JR),XR,ZR);var QR={kit:{"fa-kit":"fak"}},e$={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},t$={kit:{fak:"fa-kit"}},Y4={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},xv,hp={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},a$=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-thumbprint","fa-whiteboard","fa-notdog","fa-notdog-duo","fa-chisel","fa-etch","fa-jelly","fa-jelly-fill","fa-jelly-duo","fa-slab","fa-slab-press"],r$="classic",s$="duotone",n$="sharp",i$="sharp-duotone",l$="chisel",o$="etch",c$="jelly",d$="jelly-duo",u$="jelly-fill",m$="notdog",x$="notdog-duo",h$="slab",f$="slab-press",p$="thumbprint",g$="whiteboard",y$="Classic",b$="Duotone",v$="Sharp",j$="Sharp Duotone",N$="Chisel",w$="Etch",S$="Jelly",_$="Jelly Duo",A$="Jelly Fill",k$="Notdog",C$="Notdog Duo",E$="Slab",T$="Slab Press",P$="Thumbprint",O$="Whiteboard";xv={},_a(_a(_a(_a(_a(_a(_a(_a(_a(_a(xv,r$,y$),s$,b$),n$,v$),i$,j$),l$,N$),o$,w$),c$,S$),d$,_$),u$,A$),m$,k$),_a(_a(_a(_a(_a(xv,x$,C$),h$,E$),f$,T$),p$,P$),g$,O$);var D$="kit",L$="kit-duotone",M$="Kit",R$="Kit Duotone";_a(_a({},D$,M$),L$,R$);var $$={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"},slab:{"fa-regular":"faslr"},"slab-press":{"fa-regular":"faslpr"},whiteboard:{"fa-semibold":"fawsb"},thumbprint:{"fa-light":"fatl"},notdog:{"fa-solid":"fans"},"notdog-duo":{"fa-solid":"fands"},etch:{"fa-solid":"faes"},jelly:{"fa-regular":"fajr"},"jelly-fill":{"fa-regular":"fajfr"},"jelly-duo":{"fa-regular":"fajdr"},chisel:{"fa-regular":"facr"}},F$={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"],slab:["faslr"],"slab-press":["faslpr"],whiteboard:["fawsb"],thumbprint:["fatl"],notdog:["fans"],"notdog-duo":["fands"],etch:["faes"],jelly:["fajr"],"jelly-fill":["fajfr"],"jelly-duo":["fajdr"],chisel:["facr"]},M2={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"},slab:{faslr:"fa-regular"},"slab-press":{faslpr:"fa-regular"},whiteboard:{fawsb:"fa-semibold"},thumbprint:{fatl:"fa-light"},notdog:{fans:"fa-solid"},"notdog-duo":{fands:"fa-solid"},etch:{faes:"fa-solid"},jelly:{fajr:"fa-regular"},"jelly-fill":{fajfr:"fa-regular"},"jelly-duo":{fajdr:"fa-regular"},chisel:{facr:"fa-regular"}},I$=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands","fa-semibold"],Vk=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt","faslr","faslpr","fawsb","fatl","fans","fands","faes","fajr","fajfr","fajdr","facr"].concat(a$,I$),B$=["solid","regular","light","thin","duotone","brands","semibold"],Wk=[1,2,3,4,5,6,7,8,9,10],z$=Wk.concat([11,12,13,14,15,16,17,18,19,20]),q$=["aw","fw","pull-left","pull-right"],U$=[].concat(Ul(Object.keys(F$)),B$,q$,["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","inverse","layers","layers-bottom-left","layers-bottom-right","layers-counter","layers-text","layers-top-left","layers-top-right","li","pull-end","pull-start","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","width-auto","width-fixed",hp.GROUP,hp.SWAP_OPACITY,hp.PRIMARY,hp.SECONDARY]).concat(Wk.map(function(t){return"".concat(t,"x")})).concat(z$.map(function(t){return"w-".concat(t)})),H$={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}},bc="___FONT_AWESOME___",R2=16,Kk="fa",Xk="svg-inline--fa",Xu="data-fa-i2svg",$2="data-fa-pseudo-element",Y$="data-fa-pseudo-element-pending",xN="data-prefix",hN="data-icon",G4="fontawesome-i2svg",G$="async",V$=["HTML","HEAD","STYLE","SCRIPT"],Jk=["::before","::after",":before",":after"],Zk=function(){try{return!0}catch{return!1}}();function If(t){return new Proxy(t,{get:function(r,s){return s in r?r[s]:r[yn]}})}var Qk=ft({},Tk);Qk[yn]=ft(ft(ft(ft({},{"fa-duotone":"duotone"}),Tk[yn]),H4.kit),H4["kit-duotone"]);var W$=If(Qk),F2=ft({},VR);F2[yn]=ft(ft(ft(ft({},{duotone:"fad"}),F2[yn]),Y4.kit),Y4["kit-duotone"]);var V4=If(F2),I2=ft({},M2);I2[yn]=ft(ft({},I2[yn]),t$.kit);var eC=If(I2),B2=ft({},$$);B2[yn]=ft(ft({},B2[yn]),QR.kit);If(B2);var K$=AR,tC="fa-layers-text",X$=kR,J$=ft({},HR);If(J$);var Z$=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],hv=CR,Q$=[].concat(Ul(WR),Ul(U$)),of=Dd.FontAwesomeConfig||{};function eF(t){var a=gr.querySelector("script["+t+"]");if(a)return a.getAttribute(t)}function tF(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(gr&&typeof gr.querySelector=="function"){var aF=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-search-pseudo-elements","searchPseudoElements"],["data-search-pseudo-elements-warnings","searchPseudoElementsWarnings"],["data-search-pseudo-elements-full-scan","searchPseudoElementsFullScan"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];aF.forEach(function(t){var a=ny(t,2),r=a[0],s=a[1],n=tF(eF(r));n!=null&&(of[s]=n)})}var aC={styleDefault:"solid",familyDefault:yn,cssPrefix:Kk,replacementClass:Xk,autoReplaceSvg:!0,autoAddCss:!0,searchPseudoElements:!1,searchPseudoElementsWarnings:!0,searchPseudoElementsFullScan:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};of.familyPrefix&&(of.cssPrefix=of.familyPrefix);var wx=ft(ft({},aC),of);wx.autoReplaceSvg||(wx.observeMutations=!1);var qt={};Object.keys(aC).forEach(function(t){Object.defineProperty(qt,t,{enumerable:!0,set:function(r){wx[t]=r,cf.forEach(function(s){return s(qt)})},get:function(){return wx[t]}})});Object.defineProperty(qt,"familyPrefix",{enumerable:!0,set:function(a){wx.cssPrefix=a,cf.forEach(function(r){return r(qt)})},get:function(){return wx.cssPrefix}});Dd.FontAwesomeConfig=qt;var cf=[];function rF(t){return cf.push(t),function(){cf.splice(cf.indexOf(t),1)}}var ex=R2,No={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function sF(t){if(!(!t||!kc)){var a=gr.createElement("style");a.setAttribute("type","text/css"),a.innerHTML=t;for(var r=gr.head.childNodes,s=null,n=r.length-1;n>-1;n--){var i=r[n],o=(i.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(s=i)}return gr.head.insertBefore(a,s),t}}var nF="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function W4(){for(var t=12,a="";t-- >0;)a+=nF[Math.random()*62|0];return a}function Ix(t){for(var a=[],r=(t||[]).length>>>0;r--;)a[r]=t[r];return a}function fN(t){return t.classList?Ix(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(a){return a})}function rC(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function iF(t){return Object.keys(t||{}).reduce(function(a,r){return a+"".concat(r,'="').concat(rC(t[r]),'" ')},"").trim()}function iy(t){return Object.keys(t||{}).reduce(function(a,r){return a+"".concat(r,": ").concat(t[r].trim(),";")},"")}function pN(t){return t.size!==No.size||t.x!==No.x||t.y!==No.y||t.rotate!==No.rotate||t.flipX||t.flipY}function lF(t){var a=t.transform,r=t.containerWidth,s=t.iconWidth,n={transform:"translate(".concat(r/2," 256)")},i="translate(".concat(a.x*32,", ").concat(a.y*32,") "),o="scale(".concat(a.size/16*(a.flipX?-1:1),", ").concat(a.size/16*(a.flipY?-1:1),") "),d="rotate(".concat(a.rotate," 0 0)"),u={transform:"".concat(i," ").concat(o," ").concat(d)},m={transform:"translate(".concat(s/2*-1," -256)")};return{outer:n,inner:u,path:m}}function oF(t){var a=t.transform,r=t.width,s=r===void 0?R2:r,n=t.height,i=n===void 0?R2:n,o="";return Ek?o+="translate(".concat(a.x/ex-s/2,"em, ").concat(a.y/ex-i/2,"em) "):o+="translate(calc(-50% + ".concat(a.x/ex,"em), calc(-50% + ").concat(a.y/ex,"em)) "),o+="scale(".concat(a.size/ex*(a.flipX?-1:1),", ").concat(a.size/ex*(a.flipY?-1:1),") "),o+="rotate(".concat(a.rotate,"deg) "),o}var cF=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 7 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 7 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 7 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 7 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 7 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 7 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-slab-regular: normal 400 1em/1 "Font Awesome 7 Slab";
  --fa-font-slab-press-regular: normal 400 1em/1 "Font Awesome 7 Slab Press";
  --fa-font-whiteboard-semibold: normal 600 1em/1 "Font Awesome 7 Whiteboard";
  --fa-font-thumbprint-light: normal 300 1em/1 "Font Awesome 7 Thumbprint";
  --fa-font-notdog-solid: normal 900 1em/1 "Font Awesome 7 Notdog";
  --fa-font-notdog-duo-solid: normal 900 1em/1 "Font Awesome 7 Notdog Duo";
  --fa-font-etch-solid: normal 900 1em/1 "Font Awesome 7 Etch";
  --fa-font-jelly-regular: normal 400 1em/1 "Font Awesome 7 Jelly";
  --fa-font-jelly-fill-regular: normal 400 1em/1 "Font Awesome 7 Jelly Fill";
  --fa-font-jelly-duo-regular: normal 400 1em/1 "Font Awesome 7 Jelly Duo";
  --fa-font-chisel-regular: normal 400 1em/1 "Font Awesome 7 Chisel";
}

.svg-inline--fa {
  box-sizing: content-box;
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
  width: var(--fa-width, 1.25em);
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285714em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left,
.svg-inline--fa .fa-pull-start {
  float: inline-start;
  margin-inline-end: var(--fa-pull-margin, 0.3em);
}
.svg-inline--fa.fa-pull-right,
.svg-inline--fa .fa-pull-end {
  float: inline-end;
  margin-inline-start: var(--fa-pull-margin, 0.3em);
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  inset-inline-start: calc(-1 * var(--fa-li-width, 2em));
  inset-block-start: 0.25em; /* syncing vertical alignment with Web Font rendering */
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: var(--fa-width, 1.25em);
}
.fa-layers .svg-inline--fa {
  inset: 0;
  margin: auto;
  position: absolute;
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: calc(10 / 16 * 1em); /* converts a 10px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 10 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 10 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-xs {
  font-size: calc(12 / 16 * 1em); /* converts a 12px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 12 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 12 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-sm {
  font-size: calc(14 / 16 * 1em); /* converts a 14px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 14 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 14 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-lg {
  font-size: calc(20 / 16 * 1em); /* converts a 20px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 20 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 20 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-xl {
  font-size: calc(24 / 16 * 1em); /* converts a 24px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 24 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 24 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-2xl {
  font-size: calc(32 / 16 * 1em); /* converts a 32px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 32 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 32 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-width-auto {
  --fa-width: auto;
}

.fa-fw,
.fa-width-fixed {
  --fa-width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-inline-start: var(--fa-li-margin, 2.5em);
  padding-inline-start: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  inset-inline-start: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

/* Heads Up: Bordered Icons will not be supported in the future!
  - This feature will be deprecated in the next major release of Font Awesome (v8)!
  - You may continue to use it in this version *v7), but it will not be supported in Font Awesome v8.
*/
/* Notes:
* --@{v.$css-prefix}-border-width = 1/16 by default (to render as ~1px based on a 16px default font-size)
* --@{v.$css-prefix}-border-padding =
  ** 3/16 for vertical padding (to give ~2px of vertical whitespace around an icon considering it's vertical alignment)
  ** 4/16 for horizontal padding (to give ~4px of horizontal whitespace around an icon)
*/
.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.0625em);
  box-sizing: var(--fa-border-box-sizing, content-box);
  padding: var(--fa-border-padding, 0.1875em 0.25em);
}

.fa-pull-left,
.fa-pull-start {
  float: inline-start;
  margin-inline-end: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right,
.fa-pull-end {
  float: inline-end;
  margin-inline-start: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
  .fa-bounce,
  .fa-fade,
  .fa-beat-fade,
  .fa-flip,
  .fa-pulse,
  .fa-shake,
  .fa-spin,
  .fa-spin-pulse {
    animation: none !important;
    transition: none !important;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.svg-inline--fa.fa-inverse {
  fill: var(--fa-inverse, #fff);
}

.fa-stack {
  display: inline-block;
  height: 2em;
  line-height: 2em;
  position: relative;
  vertical-align: middle;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}`;function sC(){var t=Kk,a=Xk,r=qt.cssPrefix,s=qt.replacementClass,n=cF;if(r!==t||s!==a){var i=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),d=new RegExp("\\.".concat(a),"g");n=n.replace(i,".".concat(r,"-")).replace(o,"--".concat(r,"-")).replace(d,".".concat(s))}return n}var K4=!1;function fv(){qt.autoAddCss&&!K4&&(sF(sC()),K4=!0)}var dF={mixout:function(){return{dom:{css:sC,insertCss:fv}}},hooks:function(){return{beforeDOMElementCreation:function(){fv()},beforeI2svg:function(){fv()}}}},vc=Dd||{};vc[bc]||(vc[bc]={});vc[bc].styles||(vc[bc].styles={});vc[bc].hooks||(vc[bc].hooks={});vc[bc].shims||(vc[bc].shims=[]);var Bl=vc[bc],nC=[],iC=function(){gr.removeEventListener("DOMContentLoaded",iC),ng=1,nC.map(function(a){return a()})},ng=!1;kc&&(ng=(gr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(gr.readyState),ng||gr.addEventListener("DOMContentLoaded",iC));function uF(t){kc&&(ng?setTimeout(t,0):nC.push(t))}function Bf(t){var a=t.tag,r=t.attributes,s=r===void 0?{}:r,n=t.children,i=n===void 0?[]:n;return typeof t=="string"?rC(t):"<".concat(a," ").concat(iF(s),">").concat(i.map(Bf).join(""),"</").concat(a,">")}function X4(t,a,r){if(t&&t[a]&&t[a][r])return{prefix:a,iconName:r,icon:t[a][r]}}var pv=function(a,r,s,n){var i=Object.keys(a),o=i.length,d=r,u,m,x;for(s===void 0?(u=1,x=a[i[0]]):(u=0,x=s);u<o;u++)m=i[u],x=d(x,a[m],m,a);return x};function lC(t){return Ul(t).length!==1?null:t.codePointAt(0).toString(16)}function J4(t){return Object.keys(t).reduce(function(a,r){var s=t[r],n=!!s.icon;return n?a[s.iconName]=s.icon:a[r]=s,a},{})}function oC(t,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.skipHooks,n=s===void 0?!1:s,i=J4(a);typeof Bl.hooks.addPack=="function"&&!n?Bl.hooks.addPack(t,J4(a)):Bl.styles[t]=ft(ft({},Bl.styles[t]||{}),i),t==="fas"&&oC("fa",a)}var vf=Bl.styles,mF=Bl.shims,cC=Object.keys(eC),xF=cC.reduce(function(t,a){return t[a]=Object.keys(eC[a]),t},{}),gN=null,dC={},uC={},mC={},xC={},hC={};function hF(t){return~Q$.indexOf(t)}function fF(t,a){var r=a.split("-"),s=r[0],n=r.slice(1).join("-");return s===t&&n!==""&&!hF(n)?n:null}var fC=function(){var a=function(i){return pv(vf,function(o,d,u){return o[u]=pv(d,i,{}),o},{})};dC=a(function(n,i,o){if(i[3]&&(n[i[3]]=o),i[2]){var d=i[2].filter(function(u){return typeof u=="number"});d.forEach(function(u){n[u.toString(16)]=o})}return n}),uC=a(function(n,i,o){if(n[o]=o,i[2]){var d=i[2].filter(function(u){return typeof u=="string"});d.forEach(function(u){n[u]=o})}return n}),hC=a(function(n,i,o){var d=i[2];return n[o]=o,d.forEach(function(u){n[u]=o}),n});var r="far"in vf||qt.autoFetchSvg,s=pv(mF,function(n,i){var o=i[0],d=i[1],u=i[2];return d==="far"&&!r&&(d="fas"),typeof o=="string"&&(n.names[o]={prefix:d,iconName:u}),typeof o=="number"&&(n.unicodes[o.toString(16)]={prefix:d,iconName:u}),n},{names:{},unicodes:{}});mC=s.names,xC=s.unicodes,gN=ly(qt.styleDefault,{family:qt.familyDefault})};rF(function(t){gN=ly(t.styleDefault,{family:qt.familyDefault})});fC();function yN(t,a){return(dC[t]||{})[a]}function pF(t,a){return(uC[t]||{})[a]}function Mu(t,a){return(hC[t]||{})[a]}function pC(t){return mC[t]||{prefix:null,iconName:null}}function gF(t){var a=xC[t],r=yN("fas",t);return a||(r?{prefix:"fas",iconName:r}:null)||{prefix:null,iconName:null}}function Ld(){return gN}var gC=function(){return{prefix:null,iconName:null,rest:[]}};function yF(t){var a=yn,r=cC.reduce(function(s,n){return s[n]="".concat(qt.cssPrefix,"-").concat(n),s},{});return Yk.forEach(function(s){(t.includes(r[s])||t.some(function(n){return xF[s].includes(n)}))&&(a=s)}),a}function ly(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=a.family,s=r===void 0?yn:r,n=W$[s][t];if(s===Ff&&!t)return"fad";var i=V4[s][t]||V4[s][n],o=t in Bl.styles?t:null,d=i||o||null;return d}function bF(t){var a=[],r=null;return t.forEach(function(s){var n=fF(qt.cssPrefix,s);n?r=n:s&&a.push(s)}),{iconName:r,rest:a}}function Z4(t){return t.sort().filter(function(a,r,s){return s.indexOf(a)===r})}var Q4=Vk.concat(Gk);function oy(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=a.skipLookups,s=r===void 0?!1:r,n=null,i=Z4(t.filter(function(p){return Q4.includes(p)})),o=Z4(t.filter(function(p){return!Q4.includes(p)})),d=i.filter(function(p){return n=p,!Pk.includes(p)}),u=ny(d,1),m=u[0],x=m===void 0?null:m,f=yF(i),b=ft(ft({},bF(o)),{},{prefix:ly(x,{family:f})});return ft(ft(ft({},b),wF({values:t,family:f,styles:vf,config:qt,canonical:b,givenPrefix:n})),vF(s,n,b))}function vF(t,a,r){var s=r.prefix,n=r.iconName;if(t||!s||!n)return{prefix:s,iconName:n};var i=a==="fa"?pC(n):{},o=Mu(s,n);return n=i.iconName||o||n,s=i.prefix||s,s==="far"&&!vf.far&&vf.fas&&!qt.autoFetchSvg&&(s="fas"),{prefix:s,iconName:n}}var jF=Yk.filter(function(t){return t!==yn||t!==Ff}),NF=Object.keys(M2).filter(function(t){return t!==yn}).map(function(t){return Object.keys(M2[t])}).flat();function wF(t){var a=t.values,r=t.family,s=t.canonical,n=t.givenPrefix,i=n===void 0?"":n,o=t.styles,d=o===void 0?{}:o,u=t.config,m=u===void 0?{}:u,x=r===Ff,f=a.includes("fa-duotone")||a.includes("fad"),b=m.familyDefault==="duotone",p=s.prefix==="fad"||s.prefix==="fa-duotone";if(!x&&(f||b||p)&&(s.prefix="fad"),(a.includes("fa-brands")||a.includes("fab"))&&(s.prefix="fab"),!s.prefix&&jF.includes(r)){var v=Object.keys(d).find(function(N){return NF.includes(N)});if(v||m.autoFetchSvg){var j=GR.get(r).defaultShortPrefixId;s.prefix=j,s.iconName=Mu(s.prefix,s.iconName)||s.iconName}}return(s.prefix==="fa"||i==="fa")&&(s.prefix=Ld()||"fas"),s}var SF=function(){function t(){gR(this,t),this.definitions={}}return bR(t,[{key:"add",value:function(){for(var r=this,s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];var o=n.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(d){r.definitions[d]=ft(ft({},r.definitions[d]||{}),o[d]),oC(d,o[d]),fC()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(r,s){var n=s.prefix&&s.iconName&&s.icon?{0:s}:s;return Object.keys(n).map(function(i){var o=n[i],d=o.prefix,u=o.iconName,m=o.icon,x=m[2];r[d]||(r[d]={}),x.length>0&&x.forEach(function(f){typeof f=="string"&&(r[d][f]=m)}),r[d][u]=m}),r}}])}(),e6=[],ox={},hx={},_F=Object.keys(hx);function AF(t,a){var r=a.mixoutsTo;return e6=t,ox={},Object.keys(hx).forEach(function(s){_F.indexOf(s)===-1&&delete hx[s]}),e6.forEach(function(s){var n=s.mixout?s.mixout():{};if(Object.keys(n).forEach(function(o){typeof n[o]=="function"&&(r[o]=n[o]),sg(n[o])==="object"&&Object.keys(n[o]).forEach(function(d){r[o]||(r[o]={}),r[o][d]=n[o][d]})}),s.hooks){var i=s.hooks();Object.keys(i).forEach(function(o){ox[o]||(ox[o]=[]),ox[o].push(i[o])})}s.provides&&s.provides(hx)}),r}function z2(t,a){for(var r=arguments.length,s=new Array(r>2?r-2:0),n=2;n<r;n++)s[n-2]=arguments[n];var i=ox[t]||[];return i.forEach(function(o){a=o.apply(null,[a].concat(s))}),a}function Ju(t){for(var a=arguments.length,r=new Array(a>1?a-1:0),s=1;s<a;s++)r[s-1]=arguments[s];var n=ox[t]||[];n.forEach(function(i){i.apply(null,r)})}function Md(){var t=arguments[0],a=Array.prototype.slice.call(arguments,1);return hx[t]?hx[t].apply(null,a):void 0}function q2(t){t.prefix==="fa"&&(t.prefix="fas");var a=t.iconName,r=t.prefix||Ld();if(a)return a=Mu(r,a)||a,X4(yC.definitions,r,a)||X4(Bl.styles,r,a)}var yC=new SF,kF=function(){qt.autoReplaceSvg=!1,qt.observeMutations=!1,Ju("noAuto")},CF={i2svg:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return kc?(Ju("beforeI2svg",a),Md("pseudoElements2svg",a),Md("i2svg",a)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=a.autoReplaceSvgRoot;qt.autoReplaceSvg===!1&&(qt.autoReplaceSvg=!0),qt.observeMutations=!0,uF(function(){TF({autoReplaceSvgRoot:r}),Ju("watch",a)})}},EF={icon:function(a){if(a===null)return null;if(sg(a)==="object"&&a.prefix&&a.iconName)return{prefix:a.prefix,iconName:Mu(a.prefix,a.iconName)||a.iconName};if(Array.isArray(a)&&a.length===2){var r=a[1].indexOf("fa-")===0?a[1].slice(3):a[1],s=ly(a[0]);return{prefix:s,iconName:Mu(s,r)||r}}if(typeof a=="string"&&(a.indexOf("".concat(qt.cssPrefix,"-"))>-1||a.match(K$))){var n=oy(a.split(" "),{skipLookups:!0});return{prefix:n.prefix||Ld(),iconName:Mu(n.prefix,n.iconName)||n.iconName}}if(typeof a=="string"){var i=Ld();return{prefix:i,iconName:Mu(i,a)||a}}}},Oi={noAuto:kF,config:qt,dom:CF,parse:EF,library:yC,findIconDefinition:q2,toHtml:Bf},TF=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=a.autoReplaceSvgRoot,s=r===void 0?gr:r;(Object.keys(Bl.styles).length>0||qt.autoFetchSvg)&&kc&&qt.autoReplaceSvg&&Oi.dom.i2svg({node:s})};function cy(t,a){return Object.defineProperty(t,"abstract",{get:a}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(s){return Bf(s)})}}),Object.defineProperty(t,"node",{get:function(){if(kc){var s=gr.createElement("div");return s.innerHTML=t.html,s.children}}}),t}function PF(t){var a=t.children,r=t.main,s=t.mask,n=t.attributes,i=t.styles,o=t.transform;if(pN(o)&&r.found&&!s.found){var d=r.width,u=r.height,m={x:d/u/2,y:.5};n.style=iy(ft(ft({},i),{},{"transform-origin":"".concat(m.x+o.x/16,"em ").concat(m.y+o.y/16,"em")}))}return[{tag:"svg",attributes:n,children:a}]}function OF(t){var a=t.prefix,r=t.iconName,s=t.children,n=t.attributes,i=t.symbol,o=i===!0?"".concat(a,"-").concat(qt.cssPrefix,"-").concat(r):i;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ft(ft({},n),{},{id:o}),children:s}]}]}function DF(t){var a=["aria-label","aria-labelledby","title","role"];return a.some(function(r){return r in t})}function bN(t){var a=t.icons,r=a.main,s=a.mask,n=t.prefix,i=t.iconName,o=t.transform,d=t.symbol,u=t.maskId,m=t.extra,x=t.watchable,f=x===void 0?!1:x,b=s.found?s:r,p=b.width,v=b.height,j=[qt.replacementClass,i?"".concat(qt.cssPrefix,"-").concat(i):""].filter(function(O){return m.classes.indexOf(O)===-1}).filter(function(O){return O!==""||!!O}).concat(m.classes).join(" "),N={children:[],attributes:ft(ft({},m.attributes),{},{"data-prefix":n,"data-icon":i,class:j,role:m.attributes.role||"img",viewBox:"0 0 ".concat(p," ").concat(v)})};!DF(m.attributes)&&!m.attributes["aria-hidden"]&&(N.attributes["aria-hidden"]="true"),f&&(N.attributes[Xu]="");var w=ft(ft({},N),{},{prefix:n,iconName:i,main:r,mask:s,maskId:u,transform:o,symbol:d,styles:ft({},m.styles)}),P=s.found&&r.found?Md("generateAbstractMask",w)||{children:[],attributes:{}}:Md("generateAbstractIcon",w)||{children:[],attributes:{}},k=P.children,$=P.attributes;return w.children=k,w.attributes=$,d?OF(w):PF(w)}function t6(t){var a=t.content,r=t.width,s=t.height,n=t.transform,i=t.extra,o=t.watchable,d=o===void 0?!1:o,u=ft(ft({},i.attributes),{},{class:i.classes.join(" ")});d&&(u[Xu]="");var m=ft({},i.styles);pN(n)&&(m.transform=oF({transform:n,width:r,height:s}),m["-webkit-transform"]=m.transform);var x=iy(m);x.length>0&&(u.style=x);var f=[];return f.push({tag:"span",attributes:u,children:[a]}),f}function LF(t){var a=t.content,r=t.extra,s=ft(ft({},r.attributes),{},{class:r.classes.join(" ")}),n=iy(r.styles);n.length>0&&(s.style=n);var i=[];return i.push({tag:"span",attributes:s,children:[a]}),i}var gv=Bl.styles;function U2(t){var a=t[0],r=t[1],s=t.slice(4),n=ny(s,1),i=n[0],o=null;return Array.isArray(i)?o={tag:"g",attributes:{class:"".concat(qt.cssPrefix,"-").concat(hv.GROUP)},children:[{tag:"path",attributes:{class:"".concat(qt.cssPrefix,"-").concat(hv.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(qt.cssPrefix,"-").concat(hv.PRIMARY),fill:"currentColor",d:i[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:a,height:r,icon:o}}var MF={found:!1,width:512,height:512};function RF(t,a){!Zk&&!qt.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(a,'" is missing.'))}function H2(t,a){var r=a;return a==="fa"&&qt.styleDefault!==null&&(a=Ld()),new Promise(function(s,n){if(r==="fa"){var i=pC(t)||{};t=i.iconName||t,a=i.prefix||a}if(t&&a&&gv[a]&&gv[a][t]){var o=gv[a][t];return s(U2(o))}RF(t,a),s(ft(ft({},MF),{},{icon:qt.showMissingIcons&&t?Md("missingIconAbstract")||{}:{}}))})}var a6=function(){},Y2=qt.measurePerformance&&xp&&xp.mark&&xp.measure?xp:{mark:a6,measure:a6},sf='FA "7.0.0"',$F=function(a){return Y2.mark("".concat(sf," ").concat(a," begins")),function(){return bC(a)}},bC=function(a){Y2.mark("".concat(sf," ").concat(a," ends")),Y2.measure("".concat(sf," ").concat(a),"".concat(sf," ").concat(a," begins"),"".concat(sf," ").concat(a," ends"))},vN={begin:$F,end:bC},zp=function(){};function r6(t){var a=t.getAttribute?t.getAttribute(Xu):null;return typeof a=="string"}function FF(t){var a=t.getAttribute?t.getAttribute(xN):null,r=t.getAttribute?t.getAttribute(hN):null;return a&&r}function IF(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(qt.replacementClass)}function BF(){if(qt.autoReplaceSvg===!0)return qp.replace;var t=qp[qt.autoReplaceSvg];return t||qp.replace}function zF(t){return gr.createElementNS("http://www.w3.org/2000/svg",t)}function qF(t){return gr.createElement(t)}function vC(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=a.ceFn,s=r===void 0?t.tag==="svg"?zF:qF:r;if(typeof t=="string")return gr.createTextNode(t);var n=s(t.tag);Object.keys(t.attributes||[]).forEach(function(o){n.setAttribute(o,t.attributes[o])});var i=t.children||[];return i.forEach(function(o){n.appendChild(vC(o,{ceFn:s}))}),n}function UF(t){var a=" ".concat(t.outerHTML," ");return a="".concat(a,"Font Awesome fontawesome.com "),a}var qp={replace:function(a){var r=a[0];if(r.parentNode)if(a[1].forEach(function(n){r.parentNode.insertBefore(vC(n),r)}),r.getAttribute(Xu)===null&&qt.keepOriginalSource){var s=gr.createComment(UF(r));r.parentNode.replaceChild(s,r)}else r.remove()},nest:function(a){var r=a[0],s=a[1];if(~fN(r).indexOf(qt.replacementClass))return qp.replace(a);var n=new RegExp("".concat(qt.cssPrefix,"-.*"));if(delete s[0].attributes.id,s[0].attributes.class){var i=s[0].attributes.class.split(" ").reduce(function(d,u){return u===qt.replacementClass||u.match(n)?d.toSvg.push(u):d.toNode.push(u),d},{toNode:[],toSvg:[]});s[0].attributes.class=i.toSvg.join(" "),i.toNode.length===0?r.removeAttribute("class"):r.setAttribute("class",i.toNode.join(" "))}var o=s.map(function(d){return Bf(d)}).join(`
`);r.setAttribute(Xu,""),r.innerHTML=o}};function s6(t){t()}function jC(t,a){var r=typeof a=="function"?a:zp;if(t.length===0)r();else{var s=s6;qt.mutateApproach===G$&&(s=Dd.requestAnimationFrame||s6),s(function(){var n=BF(),i=vN.begin("mutate");t.map(n),i(),r()})}}var jN=!1;function NC(){jN=!0}function G2(){jN=!1}var ig=null;function n6(t){if(U4&&qt.observeMutations){var a=t.treeCallback,r=a===void 0?zp:a,s=t.nodeCallback,n=s===void 0?zp:s,i=t.pseudoElementsCallback,o=i===void 0?zp:i,d=t.observeMutationsRoot,u=d===void 0?gr:d;ig=new U4(function(m){if(!jN){var x=Ld();Ix(m).forEach(function(f){if(f.type==="childList"&&f.addedNodes.length>0&&!r6(f.addedNodes[0])&&(qt.searchPseudoElements&&o(f.target),r(f.target)),f.type==="attributes"&&f.target.parentNode&&qt.searchPseudoElements&&o([f.target],!0),f.type==="attributes"&&r6(f.target)&&~Z$.indexOf(f.attributeName))if(f.attributeName==="class"&&FF(f.target)){var b=oy(fN(f.target)),p=b.prefix,v=b.iconName;f.target.setAttribute(xN,p||x),v&&f.target.setAttribute(hN,v)}else IF(f.target)&&n(f.target)})}}),kc&&ig.observe(u,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function HF(){ig&&ig.disconnect()}function YF(t){var a=t.getAttribute("style"),r=[];return a&&(r=a.split(";").reduce(function(s,n){var i=n.split(":"),o=i[0],d=i.slice(1);return o&&d.length>0&&(s[o]=d.join(":").trim()),s},{})),r}function GF(t){var a=t.getAttribute("data-prefix"),r=t.getAttribute("data-icon"),s=t.innerText!==void 0?t.innerText.trim():"",n=oy(fN(t));return n.prefix||(n.prefix=Ld()),a&&r&&(n.prefix=a,n.iconName=r),n.iconName&&n.prefix||(n.prefix&&s.length>0&&(n.iconName=pF(n.prefix,t.innerText)||yN(n.prefix,lC(t.innerText))),!n.iconName&&qt.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(n.iconName=t.firstChild.data)),n}function VF(t){var a=Ix(t.attributes).reduce(function(r,s){return r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r},{});return a}function WF(){return{iconName:null,prefix:null,transform:No,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function i6(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},r=GF(t),s=r.iconName,n=r.prefix,i=r.rest,o=VF(t),d=z2("parseNodeAttributes",{},t),u=a.styleParser?YF(t):[];return ft({iconName:s,prefix:n,transform:No,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:u,attributes:o}},d)}var KF=Bl.styles;function wC(t){var a=qt.autoReplaceSvg==="nest"?i6(t,{styleParser:!1}):i6(t);return~a.extra.classes.indexOf(tC)?Md("generateLayersText",t,a):Md("generateSvgReplacementMutation",t,a)}function XF(){return[].concat(Ul(Gk),Ul(Vk))}function l6(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!kc)return Promise.resolve();var r=gr.documentElement.classList,s=function(f){return r.add("".concat(G4,"-").concat(f))},n=function(f){return r.remove("".concat(G4,"-").concat(f))},i=qt.autoFetchSvg?XF():Pk.concat(Object.keys(KF));i.includes("fa")||i.push("fa");var o=[".".concat(tC,":not([").concat(Xu,"])")].concat(i.map(function(x){return".".concat(x,":not([").concat(Xu,"])")})).join(", ");if(o.length===0)return Promise.resolve();var d=[];try{d=Ix(t.querySelectorAll(o))}catch{}if(d.length>0)s("pending"),n("complete");else return Promise.resolve();var u=vN.begin("onTree"),m=d.reduce(function(x,f){try{var b=wC(f);b&&x.push(b)}catch(p){Zk||p.name==="MissingIcon"&&console.error(p)}return x},[]);return new Promise(function(x,f){Promise.all(m).then(function(b){jC(b,function(){s("active"),s("complete"),n("pending"),typeof a=="function"&&a(),u(),x()})}).catch(function(b){u(),f(b)})})}function JF(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;wC(t).then(function(r){r&&jC([r],a)})}function ZF(t){return function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=(a||{}).icon?a:q2(a||{}),n=r.mask;return n&&(n=(n||{}).icon?n:q2(n||{})),t(s,ft(ft({},r),{},{mask:n}))}}var QF=function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.transform,n=s===void 0?No:s,i=r.symbol,o=i===void 0?!1:i,d=r.mask,u=d===void 0?null:d,m=r.maskId,x=m===void 0?null:m,f=r.classes,b=f===void 0?[]:f,p=r.attributes,v=p===void 0?{}:p,j=r.styles,N=j===void 0?{}:j;if(a){var w=a.prefix,P=a.iconName,k=a.icon;return cy(ft({type:"icon"},a),function(){return Ju("beforeDOMElementCreation",{iconDefinition:a,params:r}),bN({icons:{main:U2(k),mask:u?U2(u.icon):{found:!1,width:null,height:null,icon:{}}},prefix:w,iconName:P,transform:ft(ft({},No),n),symbol:o,maskId:x,extra:{attributes:v,styles:N,classes:b}})})}},eI={mixout:function(){return{icon:ZF(QF)}},hooks:function(){return{mutationObserverCallbacks:function(r){return r.treeCallback=l6,r.nodeCallback=JF,r}}},provides:function(a){a.i2svg=function(r){var s=r.node,n=s===void 0?gr:s,i=r.callback,o=i===void 0?function(){}:i;return l6(n,o)},a.generateSvgReplacementMutation=function(r,s){var n=s.iconName,i=s.prefix,o=s.transform,d=s.symbol,u=s.mask,m=s.maskId,x=s.extra;return new Promise(function(f,b){Promise.all([H2(n,i),u.iconName?H2(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(p){var v=ny(p,2),j=v[0],N=v[1];f([r,bN({icons:{main:j,mask:N},prefix:i,iconName:n,transform:o,symbol:d,maskId:m,extra:x,watchable:!0})])}).catch(b)})},a.generateAbstractIcon=function(r){var s=r.children,n=r.attributes,i=r.main,o=r.transform,d=r.styles,u=iy(d);u.length>0&&(n.style=u);var m;return pN(o)&&(m=Md("generateAbstractTransformGrouping",{main:i,transform:o,containerWidth:i.width,iconWidth:i.width})),s.push(m||i.icon),{children:s,attributes:n}}}},tI={mixout:function(){return{layer:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=s.classes,i=n===void 0?[]:n;return cy({type:"layer"},function(){Ju("beforeDOMElementCreation",{assembler:r,params:s});var o=[];return r(function(d){Array.isArray(d)?d.map(function(u){o=o.concat(u.abstract)}):o=o.concat(d.abstract)}),[{tag:"span",attributes:{class:["".concat(qt.cssPrefix,"-layers")].concat(Ul(i)).join(" ")},children:o}]})}}}},aI={mixout:function(){return{counter:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s.title;var n=s.classes,i=n===void 0?[]:n,o=s.attributes,d=o===void 0?{}:o,u=s.styles,m=u===void 0?{}:u;return cy({type:"counter",content:r},function(){return Ju("beforeDOMElementCreation",{content:r,params:s}),LF({content:r.toString(),extra:{attributes:d,styles:m,classes:["".concat(qt.cssPrefix,"-layers-counter")].concat(Ul(i))}})})}}}},rI={mixout:function(){return{text:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=s.transform,i=n===void 0?No:n,o=s.classes,d=o===void 0?[]:o,u=s.attributes,m=u===void 0?{}:u,x=s.styles,f=x===void 0?{}:x;return cy({type:"text",content:r},function(){return Ju("beforeDOMElementCreation",{content:r,params:s}),t6({content:r,transform:ft(ft({},No),i),extra:{attributes:m,styles:f,classes:["".concat(qt.cssPrefix,"-layers-text")].concat(Ul(d))}})})}}},provides:function(a){a.generateLayersText=function(r,s){var n=s.transform,i=s.extra,o=null,d=null;if(Ek){var u=parseInt(getComputedStyle(r).fontSize,10),m=r.getBoundingClientRect();o=m.width/u,d=m.height/u}return Promise.resolve([r,t6({content:r.innerHTML,width:o,height:d,transform:n,extra:i,watchable:!0})])}}},SC=new RegExp('"',"ug"),o6=[1105920,1112319],c6=ft(ft(ft(ft({},{FontAwesome:{normal:"fas",400:"fas"}}),YR),H$),e$),V2=Object.keys(c6).reduce(function(t,a){return t[a.toLowerCase()]=c6[a],t},{}),sI=Object.keys(V2).reduce(function(t,a){var r=V2[a];return t[a]=r[900]||Ul(Object.entries(r))[0][1],t},{});function nI(t){var a=t.replace(SC,"");return lC(Ul(a)[0]||"")}function iI(t){var a=t.getPropertyValue("font-feature-settings").includes("ss01"),r=t.getPropertyValue("content"),s=r.replace(SC,""),n=s.codePointAt(0),i=n>=o6[0]&&n<=o6[1],o=s.length===2?s[0]===s[1]:!1;return i||o||a}function lI(t,a){var r=t.replace(/^['"]|['"]$/g,"").toLowerCase(),s=parseInt(a),n=isNaN(s)?"normal":s;return(V2[r]||{})[n]||sI[r]}function d6(t,a){var r="".concat(Y$).concat(a.replace(":","-"));return new Promise(function(s,n){if(t.getAttribute(r)!==null)return s();var i=Ix(t.children),o=i.filter(function(L){return L.getAttribute($2)===a})[0],d=Dd.getComputedStyle(t,a),u=d.getPropertyValue("font-family"),m=u.match(X$),x=d.getPropertyValue("font-weight"),f=d.getPropertyValue("content");if(o&&!m)return t.removeChild(o),s();if(m&&f!=="none"&&f!==""){var b=d.getPropertyValue("content"),p=lI(u,x),v=nI(b),j=m[0].startsWith("FontAwesome"),N=iI(d),w=yN(p,v),P=w;if(j){var k=gF(v);k.iconName&&k.prefix&&(w=k.iconName,p=k.prefix)}if(w&&!N&&(!o||o.getAttribute(xN)!==p||o.getAttribute(hN)!==P)){t.setAttribute(r,P),o&&t.removeChild(o);var $=WF(),O=$.extra;O.attributes[$2]=a,H2(w,p).then(function(L){var _=bN(ft(ft({},$),{},{icons:{main:L,mask:gC()},prefix:p,iconName:P,extra:O,watchable:!0})),E=gr.createElementNS("http://www.w3.org/2000/svg","svg");a==="::before"?t.insertBefore(E,t.firstChild):t.appendChild(E),E.outerHTML=_.map(function(A){return Bf(A)}).join(`
`),t.removeAttribute(r),s()}).catch(n)}else s()}else s()})}function oI(t){return Promise.all([d6(t,"::before"),d6(t,"::after")])}function cI(t){return t.parentNode!==document.head&&!~V$.indexOf(t.tagName.toUpperCase())&&!t.getAttribute($2)&&(!t.parentNode||t.parentNode.tagName!=="svg")}var dI=function(a){return!!a&&Jk.some(function(r){return a.includes(r)})},uI=function(a){if(!a)return[];for(var r=new Set,s=[a],n=[/(?=\s:)/,new RegExp("(?<=\\)\\)?[^,]*,)")],i=function(){var p=d[o];s=s.flatMap(function(v){return v.split(p).map(function(j){return j.replace(/,\s*$/,"").trim()})})},o=0,d=n;o<d.length;o++)i();s=s.flatMap(function(b){return b.includes("(")?b:b.split(",").map(function(p){return p.trim()})});var u=Bp(s),m;try{for(u.s();!(m=u.n()).done;){var x=m.value;if(dI(x)){var f=Jk.reduce(function(b,p){return b.replace(p,"")},x);f!==""&&f!=="*"&&r.add(f)}}}catch(b){u.e(b)}finally{u.f()}return r};function u6(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(kc){var r;if(a)r=t;else if(qt.searchPseudoElementsFullScan)r=t.querySelectorAll("*");else{var s=new Set,n=Bp(document.styleSheets),i;try{for(n.s();!(i=n.n()).done;){var o=i.value;try{var d=Bp(o.cssRules),u;try{for(d.s();!(u=d.n()).done;){var m=u.value,x=uI(m.selectorText),f=Bp(x),b;try{for(f.s();!(b=f.n()).done;){var p=b.value;s.add(p)}}catch(j){f.e(j)}finally{f.f()}}}catch(j){d.e(j)}finally{d.f()}}catch(j){qt.searchPseudoElementsWarnings&&console.warn("Font Awesome: cannot parse stylesheet: ".concat(o.href," (").concat(j.message,`)
If it declares any Font Awesome CSS pseudo-elements, they will not be rendered as SVG icons. Add crossorigin="anonymous" to the <link>, enable searchPseudoElementsFullScan for slower but more thorough DOM parsing, or suppress this warning by setting searchPseudoElementsWarnings to false.`))}}}catch(j){n.e(j)}finally{n.f()}if(!s.size)return;var v=Array.from(s).join(", ");try{r=t.querySelectorAll(v)}catch{}}return new Promise(function(j,N){var w=Ix(r).filter(cI).map(oI),P=vN.begin("searchPseudoElements");NC(),Promise.all(w).then(function(){P(),G2(),j()}).catch(function(){P(),G2(),N()})})}}var mI={hooks:function(){return{mutationObserverCallbacks:function(r){return r.pseudoElementsCallback=u6,r}}},provides:function(a){a.pseudoElements2svg=function(r){var s=r.node,n=s===void 0?gr:s;qt.searchPseudoElements&&u6(n)}}},m6=!1,xI={mixout:function(){return{dom:{unwatch:function(){NC(),m6=!0}}}},hooks:function(){return{bootstrap:function(){n6(z2("mutationObserverCallbacks",{}))},noAuto:function(){HF()},watch:function(r){var s=r.observeMutationsRoot;m6?G2():n6(z2("mutationObserverCallbacks",{observeMutationsRoot:s}))}}}},x6=function(a){var r={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return a.toLowerCase().split(" ").reduce(function(s,n){var i=n.toLowerCase().split("-"),o=i[0],d=i.slice(1).join("-");if(o&&d==="h")return s.flipX=!0,s;if(o&&d==="v")return s.flipY=!0,s;if(d=parseFloat(d),isNaN(d))return s;switch(o){case"grow":s.size=s.size+d;break;case"shrink":s.size=s.size-d;break;case"left":s.x=s.x-d;break;case"right":s.x=s.x+d;break;case"up":s.y=s.y-d;break;case"down":s.y=s.y+d;break;case"rotate":s.rotate=s.rotate+d;break}return s},r)},hI={mixout:function(){return{parse:{transform:function(r){return x6(r)}}}},hooks:function(){return{parseNodeAttributes:function(r,s){var n=s.getAttribute("data-fa-transform");return n&&(r.transform=x6(n)),r}}},provides:function(a){a.generateAbstractTransformGrouping=function(r){var s=r.main,n=r.transform,i=r.containerWidth,o=r.iconWidth,d={transform:"translate(".concat(i/2," 256)")},u="translate(".concat(n.x*32,", ").concat(n.y*32,") "),m="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),x="rotate(".concat(n.rotate," 0 0)"),f={transform:"".concat(u," ").concat(m," ").concat(x)},b={transform:"translate(".concat(o/2*-1," -256)")},p={outer:d,inner:f,path:b};return{tag:"g",attributes:ft({},p.outer),children:[{tag:"g",attributes:ft({},p.inner),children:[{tag:s.icon.tag,children:s.icon.children,attributes:ft(ft({},s.icon.attributes),p.path)}]}]}}}},yv={x:0,y:0,width:"100%",height:"100%"};function h6(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||a)&&(t.attributes.fill="black"),t}function fI(t){return t.tag==="g"?t.children:[t]}var pI={hooks:function(){return{parseNodeAttributes:function(r,s){var n=s.getAttribute("data-fa-mask"),i=n?oy(n.split(" ").map(function(o){return o.trim()})):gC();return i.prefix||(i.prefix=Ld()),r.mask=i,r.maskId=s.getAttribute("data-fa-mask-id"),r}}},provides:function(a){a.generateAbstractMask=function(r){var s=r.children,n=r.attributes,i=r.main,o=r.mask,d=r.maskId,u=r.transform,m=i.width,x=i.icon,f=o.width,b=o.icon,p=lF({transform:u,containerWidth:f,iconWidth:m}),v={tag:"rect",attributes:ft(ft({},yv),{},{fill:"white"})},j=x.children?{children:x.children.map(h6)}:{},N={tag:"g",attributes:ft({},p.inner),children:[h6(ft({tag:x.tag,attributes:ft(ft({},x.attributes),p.path)},j))]},w={tag:"g",attributes:ft({},p.outer),children:[N]},P="mask-".concat(d||W4()),k="clip-".concat(d||W4()),$={tag:"mask",attributes:ft(ft({},yv),{},{id:P,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[v,w]},O={tag:"defs",children:[{tag:"clipPath",attributes:{id:k},children:fI(b)},$]};return s.push(O,{tag:"rect",attributes:ft({fill:"currentColor","clip-path":"url(#".concat(k,")"),mask:"url(#".concat(P,")")},yv)}),{children:s,attributes:n}}}},gI={provides:function(a){var r=!1;Dd.matchMedia&&(r=Dd.matchMedia("(prefers-reduced-motion: reduce)").matches),a.missingIconAbstract=function(){var s=[],n={fill:"currentColor"},i={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};s.push({tag:"path",attributes:ft(ft({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=ft(ft({},i),{},{attributeName:"opacity"}),d={tag:"circle",attributes:ft(ft({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return r||d.children.push({tag:"animate",attributes:ft(ft({},i),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:ft(ft({},o),{},{values:"1;0;1;1;0;1;"})}),s.push(d),s.push({tag:"path",attributes:ft(ft({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:r?[]:[{tag:"animate",attributes:ft(ft({},o),{},{values:"1;0;0;0;0;1;"})}]}),r||s.push({tag:"path",attributes:ft(ft({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:ft(ft({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:s}}}},yI={hooks:function(){return{parseNodeAttributes:function(r,s){var n=s.getAttribute("data-fa-symbol"),i=n===null?!1:n===""?!0:n;return r.symbol=i,r}}}},bI=[dF,eI,tI,aI,rI,mI,xI,hI,pI,gI,yI];AF(bI,{mixoutsTo:Oi});Oi.noAuto;Oi.config;Oi.library;Oi.dom;var W2=Oi.parse;Oi.findIconDefinition;Oi.toHtml;var vI=Oi.icon;Oi.layer;Oi.text;Oi.counter;var bv={exports:{}},vv,f6;function jI(){if(f6)return vv;f6=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return vv=t,vv}var jv,p6;function NI(){if(p6)return jv;p6=1;var t=jI();function a(){}function r(){}return r.resetWarningCache=a,jv=function(){function s(o,d,u,m,x,f){if(f!==t){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}s.isRequired=s;function n(){return s}var i={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:n,element:s,elementType:s,instanceOf:n,node:s,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:r,resetWarningCache:a};return i.PropTypes=i,i},jv}var g6;function wI(){return g6||(g6=1,bv.exports=NI()()),bv.exports}var SI=wI();const pa=Po(SI);var _I={};function K2(t,a){(a==null||a>t.length)&&(a=t.length);for(var r=0,s=Array(a);r<a;r++)s[r]=t[r];return s}function AI(t){if(Array.isArray(t))return t}function kI(t){if(Array.isArray(t))return K2(t)}function Sd(t,a,r){return(a=MI(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function CI(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function EI(t,a){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,n,i,o,d=[],u=!0,m=!1;try{if(i=(r=r.call(t)).next,a!==0)for(;!(u=(s=i.call(r)).done)&&(d.push(s.value),d.length!==a);u=!0);}catch(x){m=!0,n=x}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(m)throw n}}return d}}function TI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PI(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y6(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function jo(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?y6(Object(r),!0).forEach(function(s){Sd(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y6(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function OI(t,a){if(t==null)return{};var r,s,n=DI(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DI(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function b6(t,a){return AI(t)||EI(t,a)||_C(t,a)||TI()}function X2(t){return kI(t)||CI(t)||_C(t)||PI()}function LI(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function MI(t){var a=LI(t,"string");return typeof a=="symbol"?a:a+""}function lg(t){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},lg(t)}function _C(t,a){if(t){if(typeof t=="string")return K2(t,a);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K2(t,a):void 0}}var RI="7.0.0-alpha1",J2;try{var $I=require("@fortawesome/fontawesome-svg-core/package.json");J2=$I.version}catch{J2=_I.FA_VERSION||"7.0.0-alpha8"}function FI(t){var a=t.beat,r=t.fade,s=t.beatFade,n=t.bounce,i=t.shake,o=t.flash,d=t.spin,u=t.spinPulse,m=t.spinReverse,x=t.pulse,f=t.fixedWidth,b=t.inverse,p=t.border,v=t.listItem,j=t.flip,N=t.size,w=t.rotation,P=t.pull,k=t.swapOpacity,$=t.rotateBy,O=t.widthAuto,L=II(J2,RI),_=Sd(Sd(Sd(Sd(Sd(Sd({"fa-beat":a,"fa-fade":r,"fa-beat-fade":s,"fa-bounce":n,"fa-shake":i,"fa-flash":o,"fa-spin":d,"fa-spin-reverse":m,"fa-spin-pulse":u,"fa-pulse":x,"fa-fw":f,"fa-inverse":b,"fa-border":p,"fa-li":v,"fa-flip":j===!0,"fa-flip-horizontal":j==="horizontal"||j==="both","fa-flip-vertical":j==="vertical"||j==="both"},"fa-".concat(N),typeof N<"u"&&N!==null),"fa-rotate-".concat(w),typeof w<"u"&&w!==null&&w!==0),"fa-pull-".concat(P),typeof P<"u"&&P!==null),"fa-swap-opacity",k),"fa-rotate-by",L&&$),"fa-width-auto",L&&O);return Object.keys(_).map(function(E){return _[E]?E:null}).filter(function(E){return E})}function II(t,a){for(var r=t.split("-"),s=b6(r,2),n=s[0],i=s[1],o=a.split("-"),d=b6(o,2),u=d[0],m=d[1],x=n.split("."),f=u.split("."),b=0;b<Math.max(x.length,f.length);b++){var p=x[b]||"0",v=f[b]||"0",j=parseInt(p,10),N=parseInt(v,10);if(j!==N)return j>N}for(var w=0;w<Math.max(x.length,f.length);w++){var P=x[w]||"0",k=f[w]||"0";if(P!==k&&P.length!==k.length)return P.length<k.length}return!(i&&!m)}function BI(t){return t=t-0,t===t}function AC(t){return BI(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(a,r){return r?r.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var zI=["style"];function qI(t){return t.charAt(0).toUpperCase()+t.slice(1)}function UI(t){return t.split(";").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,r){var s=r.indexOf(":"),n=AC(r.slice(0,s)),i=r.slice(s+1).trim();return n.startsWith("webkit")?a[qI(n)]=i:a[n]=i,a},{})}function kC(t,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof a=="string")return a;var s=(a.children||[]).map(function(u){return kC(t,u)}),n=Object.keys(a.attributes||{}).reduce(function(u,m){var x=a.attributes[m];switch(m){case"class":u.attrs.className=x,delete a.attributes.class;break;case"style":u.attrs.style=UI(x);break;default:m.indexOf("aria-")===0||m.indexOf("data-")===0?u.attrs[m.toLowerCase()]=x:u.attrs[AC(m)]=x}return u},{attrs:{}}),i=r.style,o=i===void 0?{}:i,d=OI(r,zI);return n.attrs.style=jo(jo({},n.attrs.style),o),t.apply(void 0,[a.tag,jo(jo({},n.attrs),d)].concat(X2(s)))}var CC=!1;try{CC=!0}catch{}function HI(){if(!CC&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function v6(t){if(t&&lg(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(W2.icon)return W2.icon(t);if(t===null)return null;if(t&&lg(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function Nv(t,a){return Array.isArray(a)&&a.length>0||!Array.isArray(a)&&a?Sd({},t,a):{}}var j6={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,rotateBy:!1,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1,widthAuto:!1},R=xx.forwardRef(function(t,a){var r=jo(jo({},j6),t),s=r.icon,n=r.mask,i=r.symbol,o=r.className,d=r.title,u=r.titleId,m=r.maskId,x=v6(s),f=Nv("classes",[].concat(X2(FI(r)),X2((o||"").split(" ")))),b=Nv("transform",typeof r.transform=="string"?W2.transform(r.transform):r.transform),p=Nv("mask",v6(n)),v=vI(x,jo(jo(jo(jo({},f),b),p),{},{symbol:i,title:d,titleId:u,maskId:m}));if(!v)return HI("Could not find icon",x),null;var j=v.abstract,N={ref:a};return Object.keys(r).forEach(function(w){j6.hasOwnProperty(w)||(N[w]=r[w])}),YI(j[0],N)});R.displayName="FontAwesomeIcon";R.propTypes={beat:pa.bool,border:pa.bool,beatFade:pa.bool,bounce:pa.bool,className:pa.string,fade:pa.bool,flash:pa.bool,mask:pa.oneOfType([pa.object,pa.array,pa.string]),maskId:pa.string,fixedWidth:pa.bool,inverse:pa.bool,flip:pa.oneOf([!0,!1,"horizontal","vertical","both"]),icon:pa.oneOfType([pa.object,pa.array,pa.string]),listItem:pa.bool,pull:pa.oneOf(["right","left"]),pulse:pa.bool,rotation:pa.oneOf([0,90,180,270]),rotateBy:pa.bool,shake:pa.bool,size:pa.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:pa.bool,spinPulse:pa.bool,spinReverse:pa.bool,symbol:pa.oneOfType([pa.bool,pa.string]),title:pa.string,titleId:pa.string,transform:pa.oneOfType([pa.string,pa.object]),swapOpacity:pa.bool,widthAuto:pa.bool};var YI=kC.bind(null,xx.createElement);/*!
 * Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */var Ia={prefix:"fas",iconName:"dollar-sign",icon:[320,512,[128178,61781,"dollar","usd"],"24","M136 24c0-13.3 10.7-24 24-24s24 10.7 24 24l0 40 56 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-114.9 0c-24.9 0-45.1 20.2-45.1 45.1 0 22.5 16.5 41.5 38.7 44.7l91.6 13.1c53.8 7.7 93.7 53.7 93.7 108 0 60.3-48.9 109.1-109.1 109.1l-10.9 0 0 40c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-40-72 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l130.9 0c24.9 0 45.1-20.2 45.1-45.1 0-22.5-16.5-41.5-38.7-44.7l-91.6-13.1C55.9 273.5 16 227.4 16 173.1 16 112.9 64.9 64 125.1 64l10.9 0 0-40z"]},N6={prefix:"fas",iconName:"calendar-check",icon:[448,512,[],"f274","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 32 0c35.3 0 64 28.7 64 64l0 288c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 128C0 92.7 28.7 64 64 64l32 0 0-32c0-17.7 14.3-32 32-32zM308.4 228.7c7-11.2 3.6-26-7.6-33.1s-26-3.6-33.1 7.6l-61.4 98.3-27-36c-8-10.6-23-12.8-33.6-4.8s-12.8 23-4.8 33.6l48 64c4.7 6.3 12.3 9.9 20.2 9.6s15.1-4.5 19.3-11.3l80-128z"]},w6={prefix:"fas",iconName:"calculator",icon:[384,512,[128425],"f1ec","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L64 0zM96 64l192 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L96 160c-17.7 0-32-14.3-32-32l0-32c0-17.7 14.3-32 32-32zm16 168a24 24 0 1 1 -48 0 24 24 0 1 1 48 0zm80 24a24 24 0 1 1 0-48 24 24 0 1 1 0 48zm128-24a24 24 0 1 1 -48 0 24 24 0 1 1 48 0zM88 352a24 24 0 1 1 0-48 24 24 0 1 1 0 48zm128-24a24 24 0 1 1 -48 0 24 24 0 1 1 48 0zm80 24a24 24 0 1 1 0-48 24 24 0 1 1 0 48zM64 424c0-13.3 10.7-24 24-24l112 0c13.3 0 24 10.7 24 24s-10.7 24-24 24L88 448c-13.3 0-24-10.7-24-24zm232-24c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24z"]},Up={prefix:"fas",iconName:"minus",icon:[448,512,[8211,8722,10134,"subtract"],"f068","M0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32z"]},GI={prefix:"fas",iconName:"scale-balanced",icon:[640,512,[9878,"balance-scale"],"f24e","M384 32l128 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L398.4 96c-5.2 25.8-22.9 47.1-46.4 57.3l0 294.7 160 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-384 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l160 0 0-294.7c-23.5-10.3-41.2-31.6-46.4-57.3L128 96c-17.7 0-32-14.3-32-32s14.3-32 32-32l128 0c14.6-19.4 37.8-32 64-32s49.4 12.6 64 32zm55.6 288L584.4 320 512 195.8 439.6 320zM512 416c-62.9 0-115.2-34-126-78.9-2.6-11 1-22.3 6.7-32.1l95.2-163.2c5-8.6 14.2-13.8 24.1-13.8s19.1 5.3 24.1 13.8l95.2 163.2c5.7 9.8 9.3 21.1 6.7 32.1-10.8 44.8-63.1 78.9-126 78.9zM126.8 195.8L54.4 320 199.3 320 126.8 195.8zM.9 337.1c-2.6-11 1-22.3 6.7-32.1l95.2-163.2c5-8.6 14.2-13.8 24.1-13.8s19.1 5.3 24.1 13.8l95.2 163.2c5.7 9.8 9.3 21.1 6.7 32.1-10.8 44.8-63.1 78.9-126 78.9S11.7 382 .9 337.1z"]},Xn=GI,EC={prefix:"fas",iconName:"medal",icon:[448,512,[127941],"f5a2","M224.3 128L139.7-12.9c-6.5-10.8-20.1-14.7-31.3-9.1L21.8 21.3C9.9 27.2 5.1 41.6 11 53.5L80.6 192.6c-30.1 33.9-48.3 78.5-48.3 127.4 0 106 86 192 192 192s192-86 192-192c0-48.9-18.3-93.5-48.3-127.4L437.6 53.5c5.9-11.9 1.1-26.3-10.7-32.2L340.2-22.1c-11.2-5.6-24.9-1.6-31.3 9.1L224.3 128zm30.8 142.5c1.4 2.8 4 4.7 7 5.1l50.1 7.3c7.7 1.1 10.7 10.5 5.2 16l-36.3 35.4c-2.2 2.2-3.2 5.2-2.7 8.3l8.6 49.9c1.3 7.6-6.7 13.5-13.6 9.9l-44.8-23.6c-2.7-1.4-6-1.4-8.7 0l-44.8 23.6c-6.9 3.6-14.9-2.2-13.6-9.9l8.6-49.9c.5-3-.5-6.1-2.7-8.3l-36.3-35.4c-5.6-5.4-2.5-14.8 5.2-16l50.1-7.3c3-.4 5.7-2.4 7-5.1l22.4-45.4c3.4-7 13.3-7 16.8 0l22.4 45.4z"]},$r={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M32 64C19.1 64 7.4 71.8 2.4 83.8S.2 109.5 9.4 118.6L192 301.3 192 416c0 8.5 3.4 16.6 9.4 22.6l64 64c9.2 9.2 22.9 11.9 34.9 6.9S320 492.9 320 480l0-178.7 182.6-182.6c9.2-9.2 11.9-22.9 6.9-34.9S492.9 64 480 64L32 64z"]},TC={prefix:"fas",iconName:"envelope",icon:[512,512,[128386,9993,61443],"f0e0","M48 64c-26.5 0-48 21.5-48 48 0 15.1 7.1 29.3 19.2 38.4l208 156c17.1 12.8 40.5 12.8 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48L48 64zM0 196L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-188-198.4 148.8c-34.1 25.6-81.1 25.6-115.2 0L0 196z"]},Sx={prefix:"fas",iconName:"truck",icon:[576,512,[128666,9951],"f0d1","M0 96C0 60.7 28.7 32 64 32l288 0c35.3 0 64 28.7 64 64l0 32 50.7 0c17 0 33.3 6.7 45.3 18.7L557.3 192c12 12 18.7 28.3 18.7 45.3L576 384c0 35.3-28.7 64-64 64l-3.3 0c-10.4 36.9-44.4 64-84.7 64s-74.2-27.1-84.7-64l-102.6 0c-10.4 36.9-44.4 64-84.7 64s-74.2-27.1-84.7-64L64 448c-35.3 0-64-28.7-64-64L0 96zM512 288l0-50.7-45.3-45.3-50.7 0 0 96 96 0zM192 424a40 40 0 1 0 -80 0 40 40 0 1 0 80 0zm232 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},VI={prefix:"fas",iconName:"chalkboard-user",icon:[640,512,["chalkboard-teacher"],"f51c","M128 96c0-35.3 28.7-64 64-64l352 0c35.3 0 64 28.7 64 64l0 240-96 0 0-16c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 16-129.1 0c10.9-18.8 17.1-40.7 17.1-64 0-70.7-57.3-128-128-128-5.4 0-10.8 .3-16 1l0-49zM333 448c-5.1-24.2-16.3-46.1-32.1-64L608 384c0 35.3-28.7 64-64 64l-211 0zM64 272a80 80 0 1 1 160 0 80 80 0 1 1 -160 0zM0 480c0-53 43-96 96-96l96 0c53 0 96 43 96 96 0 17.7-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32z"]},WI=VI,Rd={prefix:"fas",iconName:"trophy",icon:[512,512,[127942],"f091","M144.3 0l224 0c26.5 0 48.1 21.8 47.1 48.2-.2 5.3-.4 10.6-.7 15.8l49.6 0c26.1 0 49.1 21.6 47.1 49.8-7.5 103.7-60.5 160.7-118 190.5-15.8 8.2-31.9 14.3-47.2 18.8-20.2 28.6-41.2 43.7-57.9 51.8l0 73.1 64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0 0-73.1c-16-7.7-35.9-22-55.3-48.3-18.4-4.8-38.4-12.1-57.9-23.1-54.1-30.3-102.9-87.4-109.9-189.9-1.9-28.1 21-49.7 47.1-49.7l49.6 0c-.3-5.2-.5-10.4-.7-15.8-1-26.5 20.6-48.2 47.1-48.2zM101.5 112l-52.4 0c6.2 84.7 45.1 127.1 85.2 149.6-14.4-37.3-26.3-86-32.8-149.6zM380 256.8c40.5-23.8 77.1-66.1 83.3-144.8L411 112c-6.2 60.9-17.4 108.2-31 144.8z"]},KI={prefix:"fas",iconName:"calendar-days",icon:[448,512,["calendar-alt"],"f073","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 32 0c35.3 0 64 28.7 64 64l0 288c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 128C0 92.7 28.7 64 64 64l32 0 0-32c0-17.7 14.3-32 32-32zM64 240l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm128 0l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zM64 368l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zm112 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16z"]},ua=KI,S6={prefix:"fas",iconName:"warehouse",icon:[576,512,[],"f494","M0 142.1L0 480c0 17.7 14.3 32 32 32s32-14.3 32-32l0-240c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32l0 240c0 17.7 14.3 32 32 32s32-14.3 32-32l0-337.9c0-27.5-17.6-52-43.8-60.7L303.2 5.1c-9.9-3.3-20.5-3.3-30.4 0L43.8 81.4C17.6 90.1 0 114.6 0 142.1zM464 256l-352 0 0 64 352 0 0-64zM112 416l352 0 0-64-352 0 0 64zm352 32l-352 0 0 64 352 0 0-64z"]},dy={prefix:"fas",iconName:"user-tie",icon:[448,512,[],"f508","M224 248a120 120 0 1 1 0-240 120 120 0 1 1 0 240zm-30.5 56l61 0c9.7 0 17.5 7.8 17.5 17.5 0 4.2-1.5 8.2-4.2 11.4l-27.4 32 31 115.1 .6 0 34.6-138.5c2.2-8.7 11.1-14 19.5-10.8 61.9 23.6 105.9 83.6 105.9 153.8 0 15.1-12.3 27.4-27.4 27.4L43.4 512c-15.1 0-27.4-12.3-27.4-27.4 0-70.2 44-130.2 105.9-153.8 8.4-3.2 17.3 2.1 19.5 10.8l34.6 138.5 .6 0 31-115.1-27.4-32c-2.7-3.2-4.2-7.2-4.2-11.4 0-9.7 7.8-17.5 17.5-17.5z"]},XI={prefix:"fas",iconName:"ellipsis",icon:[448,512,["ellipsis-h"],"f141","M0 256a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm168 0a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm224-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112z"]},JI=XI,ZI={prefix:"fas",iconName:"percent",icon:[448,512,[62101,62785,"percentage"],"25","M192 128a96 96 0 1 0 -192 0 96 96 0 1 0 192 0zM448 384a96 96 0 1 0 -192 0 96 96 0 1 0 192 0zM438.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-384 384c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l384-384z"]},wv=ZI,QI={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376C296.3 401.1 253.9 416 208 416 93.1 416 0 322.9 0 208S93.1 0 208 0 416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},aa=QI,eB={prefix:"fas",iconName:"boxes-stacked",icon:[512,512,[62625,"boxes","boxes-alt"],"f468","M224 0l0 64c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-64 32 0c35.3 0 64 28.7 64 64l0 128c0 5.5-.7 10.9-2 16l-252 0c-1.3-5.1-2-10.5-2-16l0-128c0-35.3 28.7-64 64-64l32 0zm96 512c-11.2 0-21.8-2.9-31-8 9.5-16.5 15-35.6 15-56l0-128c0-20.4-5.5-39.5-15-56 9.2-5.1 19.7-8 31-8l32 0 0 64c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-64 32 0c35.3 0 64 28.7 64 64l0 128c0 35.3-28.7 64-64 64l-128 0zM0 320c0-35.3 28.7-64 64-64l32 0 0 64c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-64 32 0c35.3 0 64 28.7 64 64l0 128c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 320z"]},zu=eB,_6={prefix:"fas",iconName:"ban",icon:[512,512,[128683,"cancel"],"f05e","M367.2 412.5L99.5 144.8c-22.4 31.4-35.5 69.8-35.5 111.2 0 106 86 192 192 192 41.5 0 79.9-13.1 111.2-35.5zm45.3-45.3c22.4-31.4 35.5-69.8 35.5-111.2 0-106-86-192-192-192-41.5 0-79.9 13.1-111.2 35.5L412.5 367.2zM0 256a256 256 0 1 1 512 0 256 256 0 1 1 -512 0z"]},tB={prefix:"fas",iconName:"floppy-disk",icon:[448,512,[128190,128426,"save"],"f0c7","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-242.7c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32L64 32zm32 96c0-17.7 14.3-32 32-32l160 0c17.7 0 32 14.3 32 32l0 64c0 17.7-14.3 32-32 32l-160 0c-17.7 0-32-14.3-32-32l0-64zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"]},Er=tB,A6={prefix:"fas",iconName:"palette",icon:[512,512,[127912],"f53f","M512 256c0 .9 0 1.8 0 2.7-.4 36.5-33.6 61.3-70.1 61.3L344 320c-26.5 0-48 21.5-48 48 0 3.4 .4 6.7 1 9.9 2.1 10.2 6.5 20 10.8 29.9 6.1 13.8 12.1 27.5 12.1 42 0 31.8-21.6 60.7-53.4 62-3.5 .1-7 .2-10.6 .2-141.4 0-256-114.6-256-256S114.6 0 256 0 512 114.6 512 256zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm0-96a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM288 96a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 96a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},aB={prefix:"fas",iconName:"unlock",icon:[384,512,[128275],"f09c","M128 96c0-35.3 28.7-64 64-64 31.7 0 58 23 63.1 53.3 2.9 17.4 19.4 29.2 36.9 26.3s29.2-19.4 26.3-36.9C308.1 14.1 255.5-32 192-32 121.3-32 64 25.3 64 96l0 64c-35.3 0-64 28.7-64 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-224c0-35.3-28.7-64-64-64l-192 0 0-64z"]},rB={prefix:"fas",iconName:"key",icon:[512,512,[128273],"f084","M336 352c97.2 0 176-78.8 176-176S433.2 0 336 0 160 78.8 160 176c0 18.7 2.9 36.8 8.3 53.7L7 391c-4.5 4.5-7 10.6-7 17l0 80c0 13.3 10.7 24 24 24l80 0c13.3 0 24-10.7 24-24l0-40 40 0c13.3 0 24-10.7 24-24l0-40 40 0c6.4 0 12.5-2.5 17-7l33.3-33.3c16.9 5.4 35 8.3 53.7 8.3zM376 96a40 40 0 1 1 0 80 40 40 0 1 1 0-80z"]},Ma={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6-46.8 43.5-78.1 95.4-93 131.1-3.3 7.9-3.3 16.7 0 24.6 14.9 35.7 46.2 87.7 93 131.1 47.1 43.7 111.8 80.6 192.6 80.6s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1 3.3-7.9 3.3-16.7 0-24.6-14.9-35.7-46.2-87.7-93-131.1-47.1-43.7-111.8-80.6-192.6-80.6zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64-11.5 0-22.3-3-31.7-8.4-1 10.9-.1 22.1 2.9 33.2 13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-12.2-45.7-55.5-74.8-101.1-70.8 5.3 9.3 8.4 20.1 8.4 31.7z"]},Yt={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M136.7 5.9L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-8.7-26.1C306.9-7.2 294.7-16 280.9-16L167.1-16c-13.8 0-26 8.8-30.4 21.9zM416 144L32 144 53.1 467.1C54.7 492.4 75.7 512 101 512L347 512c25.3 0 46.3-19.6 47.9-44.9L416 144z"]},df={prefix:"fas",iconName:"receipt",icon:[384,512,[129534],"f543","M14 2.2C22.5-1.7 32.5-.3 39.6 5.8L80 40.4 120.4 5.8c9-7.7 22.3-7.7 31.2 0L192 40.4 232.4 5.8c9-7.7 22.2-7.7 31.2 0L304 40.4 344.4 5.8c7.1-6.1 17.1-7.5 25.6-3.6S384 14.6 384 24l0 464c0 9.4-5.5 17.9-14 21.8s-18.5 2.5-25.6-3.6l-40.4-34.6-40.4 34.6c-9 7.7-22.2 7.7-31.2 0l-40.4-34.6-40.4 34.6c-9 7.7-22.3 7.7-31.2 0L80 471.6 39.6 506.2c-7.1 6.1-17.1 7.5-25.6 3.6S0 497.4 0 488L0 24C0 14.6 5.5 6.1 14 2.2zM104 136c-13.3 0-24 10.7-24 24s10.7 24 24 24l176 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-176 0zM80 352c0 13.3 10.7 24 24 24l176 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-176 0c-13.3 0-24 10.7-24 24zm24-120c-13.3 0-24 10.7-24 24s10.7 24 24 24l176 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-176 0z"]},sB={prefix:"fas",iconName:"right-to-bracket",icon:[512,512,["sign-in-alt"],"f2f6","M345 273c9.4-9.4 9.4-24.6 0-33.9L201 95c-6.9-6.9-17.2-8.9-26.2-5.2S160 102.3 160 112l0 80-112 0c-26.5 0-48 21.5-48 48l0 32c0 26.5 21.5 48 48 48l112 0 0 80c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2L345 273zm7 143c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0c53 0 96-43 96-96l0-256c0-53-43-96-96-96l-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0c17.7 0 32 14.3 32 32l0 256c0 17.7-14.3 32-32 32l-64 0z"]},nB=sB,iB={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L368 46.1 465.9 144 490.3 119.6c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L432 177.9 334.1 80 172.4 241.7zM96 64C43 64 0 107 0 160L0 416c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-96c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7-14.3 32-32 32L96 448c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 64z"]},ha=iB,rn={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512 256 256 0 1 1 0-512zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},ko={prefix:"fas",iconName:"book",icon:[448,512,[128212],"f02d","M384 512L96 512c-53 0-96-43-96-96L0 96C0 43 43 0 96 0L400 0c26.5 0 48 21.5 48 48l0 288c0 20.9-13.4 38.7-32 45.3l0 66.7c17.7 0 32 14.3 32 32s-14.3 32-32 32l-32 0zM96 384c-17.7 0-32 14.3-32 32s14.3 32 32 32l256 0 0-64-256 0zm32-232c0 13.3 10.7 24 24 24l176 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-176 0c-13.3 0-24 10.7-24 24zm24 72c-13.3 0-24 10.7-24 24s10.7 24 24 24l176 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-176 0z"]},$d={prefix:"fas",iconName:"folder-open",icon:[576,512,[128194,128449,61717],"f07c","M56 225.6L32.4 296.2 32.4 96c0-35.3 28.7-64 64-64l138.7 0c13.8 0 27.3 4.5 38.4 12.8l38.4 28.8c5.5 4.2 12.3 6.4 19.2 6.4l117.3 0c35.3 0 64 28.7 64 64l0 16-365.4 0c-41.3 0-78 26.4-91.1 65.6zM477.8 448L99 448c-32.8 0-55.9-32.1-45.5-63.2l48-144C108 221.2 126.4 208 147 208l378.8 0c32.8 0 55.9 32.1 45.5 63.2l-48 144c-6.5 19.6-24.9 32.8-45.5 32.8z"]},zf={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M311.1 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L243.2 256 73.9 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},k6={prefix:"fas",iconName:"flask",icon:[448,512,[],"f0c3","M288 0L128 0C110.3 0 96 14.3 96 32s14.3 32 32 32L128 215.5 7.5 426.3C2.6 435 0 444.7 0 454.7 0 486.4 25.6 512 57.3 512l333.4 0c31.6 0 57.3-25.6 57.3-57.3 0-10-2.6-19.8-7.5-28.4L320 215.5 320 64c17.7 0 32-14.3 32-32S337.7 0 320 0L288 0zM192 215.5l0-151.5 64 0 0 151.5c0 11.1 2.9 22.1 8.4 31.8l41.6 72.7-164 0 41.6-72.7c5.5-9.7 8.4-20.6 8.4-31.8z"]},Ln={prefix:"fas",iconName:"print",icon:[512,512,[128424,128438,9113],"f02f","M64 64C64 28.7 92.7 0 128 0L341.5 0c17 0 33.3 6.7 45.3 18.7l42.5 42.5c12 12 18.7 28.3 18.7 45.3l0 37.5-384 0 0-80zM0 256c0-35.3 28.7-64 64-64l384 0c35.3 0 64 28.7 64 64l0 96c0 17.7-14.3 32-32 32l-32 0 0 64c0 35.3-28.7 64-64 64l-256 0c-35.3 0-64-28.7-64-64l0-64-32 0c-17.7 0-32-14.3-32-32l0-96zM128 416l0 32 256 0 0-96-256 0 0 64zM456 272a24 24 0 1 0 -48 0 24 24 0 1 0 48 0z"]},lB={prefix:"fas",iconName:"volleyball",icon:[512,512,[127952,"volleyball-ball"],"f45f","M512 258.9c-23.4 8-47.8 13.1-72.6 15.1 5.9-98.6-30.7-191.1-94.9-258.3 97.8 36 167.5 130 167.5 240.3 0 1 0 1.9 0 2.9zm-5.9 52c-5.2 23.7-13.6 46.2-24.9 66.9-94.7 52.2-214 50-308.4-13.6 21.7-31.3 49.8-58.9 83.8-80.5 79.5 41.6 168.5 49.1 249.5 27.1zM279.7 241.6c-3.7-89.7-41.7-170.5-101.3-229.7 22.3-7.1 46-11.2 70.5-11.9 92.5 55.9 150.3 160.3 142.4 273.8-38-3.2-75.9-13.7-111.6-32.3zM130.5 32.8C149.1 49.1 165.8 67.7 179.9 88.2 91.5 132.3 29.7 210.3 3.7 299.5 1.3 285.3 0 270.8 0 256 0 160.2 52.6 76.7 130.5 32.8zm73.4 97c16.3 34.5 26.1 72.6 27.9 112.8-75.8 48-126.8 121.3-148.3 202.5-17.6-16.1-33-34.6-45.5-55 2.1-108.1 63.7-210.4 165.9-260.3zM256 512c-47.7 0-92.3-13-130.5-35.7 4.8-24.3 12.6-48 23.2-70.4 82.4 54.4 180.8 68.9 271 47-44.4 37-101.5 59.2-163.7 59.2z"]},PC=lB,za={prefix:"fas",iconName:"users",icon:[640,512,[],"f0c0","M320 16a104 104 0 1 1 0 208 104 104 0 1 1 0-208zM96 88a72 72 0 1 1 0 144 72 72 0 1 1 0-144zM0 416c0-70.7 57.3-128 128-128 12.8 0 25.2 1.9 36.9 5.4-32.9 36.8-52.9 85.4-52.9 138.6l0 16c0 11.4 2.4 22.2 6.7 32L32 480c-17.7 0-32-14.3-32-32l0-32zm521.3 64c4.3-9.8 6.7-20.6 6.7-32l0-16c0-53.2-20-101.8-52.9-138.6 11.7-3.5 24.1-5.4 36.9-5.4 70.7 0 128 57.3 128 128l0 32c0 17.7-14.3 32-32 32l-86.7 0zM472 160a72 72 0 1 1 144 0 72 72 0 1 1 -144 0zM160 432c0-88.4 71.6-160 160-160s160 71.6 160 160l0 16c0 17.7-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32l0-16z"]},oB={prefix:"fas",iconName:"venus-mars",icon:[640,512,[9892],"f228","M480-64c-17.7 0-32 14.3-32 32S462.3 0 480 0L530.7 0 474 56.7c-26.3-15.7-57.1-24.7-90-24.7-35.4 0-68.4 10.5-96 28.5-27.6-18-60.6-28.5-96-28.5-97.2 0-176 78.8-176 176 0 86.3 62.1 158.1 144 173.1l0 34.9-32 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l32 0 0 32c0 17.7 14.3 32 32 32s32-14.3 32-32l0-32 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-32 0 0-34.9c23.3-4.3 44.9-13.1 64-25.6 27.6 18 60.6 28.5 96 28.5 97.2 0 176-78.8 176-176 0-41.1-14.1-79-37.8-109L576 45.3 576 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-128c0-17.7-14.3-32-32-32L480-64zM336 309.2c20.2-28.6 32-63.5 32-101.2s-11.8-72.6-32-101.2c14.6-6.9 30.8-10.8 48-10.8 61.9 0 112 50.1 112 112S445.9 320 384 320c-17.2 0-33.5-3.9-48-10.8zM288 150.3c10.2 16.9 16 36.6 16 57.7s-5.8 40.9-16 57.7c-10.2-16.9-16-36.6-16-57.7s5.8-40.9 16-57.7zm-48-43.5c-20.2 28.6-32 63.5-32 101.2s11.8 72.6 32 101.2c-14.5 6.9-30.8 10.8-48 10.8-61.9 0-112-50.1-112-112S130.1 96 192 96c17.2 0 33.5 3.9 48 10.8z"]},_x={prefix:"fas",iconName:"user-shield",icon:[576,512,[],"f505","M224 248a120 120 0 1 0 0-240 120 120 0 1 0 0 240zm-29.7 56C95.8 304 16 383.8 16 482.3 16 498.7 29.3 512 45.7 512l251.5 0C261 469.4 240 414.5 240 356.4l0-31.1c0-7.3 1-14.5 2.9-21.3l-48.6 0zm251 184.5l-13.3 6.3 0-188.1 96 32 0 19.6c0 55.8-32.2 106.5-82.7 130.3zM421.9 259.5l-112 37.3c-13.1 4.4-21.9 16.6-21.9 30.4l0 31.1c0 74.4 43 142.1 110.2 173.7l18.5 8.7c4.8 2.2 10 3.4 15.2 3.4s10.5-1.2 15.2-3.4l18.5-8.7C533 500.3 576 432.6 576 358.2l0-31.1c0-13.8-8.8-26-21.9-30.4l-112-37.3c-6.6-2.2-13.7-2.2-20.2 0z"]},C6={prefix:"fas",iconName:"laptop",icon:[640,512,[128187],"f109","M128 32C92.7 32 64 60.7 64 96l0 240 64 0 0-240 384 0 0 240 64 0 0-240c0-35.3-28.7-64-64-64L128 32zM19.2 384C8.6 384 0 392.6 0 403.2 0 445.6 34.4 480 76.8 480l486.4 0c42.4 0 76.8-34.4 76.8-76.8 0-10.6-8.6-19.2-19.2-19.2L19.2 384z"]},Sv={prefix:"fas",iconName:"school",icon:[576,512,[127979],"f549","M0 192c0-35.3 28.7-64 64-64l64 0 127.9-115.1c18.3-16.4 46-16.4 64.2 0L448 128 512 128c35.3 0 64 28.7 64 64l0 256c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 192zM224 376l0 88 128 0 0-88c0-22.1-17.9-40-40-40l-48 0c-22.1 0-40 17.9-40 40zm-112 8c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0zm16-144l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16zM496 384c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0zm16-144l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16zM288 256a64 64 0 1 0 0-128 64 64 0 1 0 0 128z"]},E6={prefix:"fas",iconName:"broom",icon:[576,512,[129529],"f51a","M566.6 54.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192-34.7-34.7c-4.2-4.2-10-6.6-16-6.6-12.5 0-22.6 10.1-22.6 22.6l0 29.1 108.3 108.3 29.1 0c12.5 0 22.6-10.1 22.6-22.6 0-6-2.4-11.8-6.6-16l-34.7-34.7 192-192zM341.1 353.4L222.6 234.9c-42.7-3.7-85.2 11.7-115.8 42.3l-8 8c-22.3 22.3-34.8 52.5-34.8 84 0 6.8 7.1 11.2 13.2 8.2l51.1-25.5c5-2.5 9.5 4.1 5.4 7.9L7.3 473.4C2.7 477.6 0 483.6 0 489.9 0 502.1 9.9 512 22.1 512l173.3 0c38.8 0 75.9-15.4 103.4-42.8 30.6-30.6 45.9-73.1 42.3-115.8z"]},T6={prefix:"fas",iconName:"utensils",icon:[512,512,[127860,61685,"cutlery"],"f2e7","M63.9 14.4C63.1 6.2 56.2 0 48 0s-15.1 6.2-16 14.3L17.9 149.7c-1.3 6-1.9 12.1-1.9 18.2 0 45.9 35.1 83.6 80 87.7L96 480c0 17.7 14.3 32 32 32s32-14.3 32-32l0-224.4c44.9-4.1 80-41.8 80-87.7 0-6.1-.6-12.2-1.9-18.2L223.9 14.3C223.1 6.2 216.2 0 208 0s-15.1 6.2-15.9 14.4L178.5 149.9c-.6 5.7-5.4 10.1-11.1 10.1-5.8 0-10.6-4.4-11.2-10.2L143.9 14.6C143.2 6.3 136.3 0 128 0s-15.2 6.3-15.9 14.6L99.8 149.8c-.5 5.8-5.4 10.2-11.2 10.2-5.8 0-10.6-4.4-11.1-10.1L63.9 14.4zM448 0C432 0 320 32 320 176l0 112c0 35.3 28.7 64 64 64l32 0 0 128c0 17.7 14.3 32 32 32s32-14.3 32-32l0-448c0-17.7-14.3-32-32-32z"]},cB={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zM167 167c9.4-9.4 24.6-9.4 33.9 0l55 55 55-55c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-55 55 55 55c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-55-55-55 55c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l55-55-55-55c-9.4-9.4-9.4-24.6 0-33.9z"]},Zu=cB,og={prefix:"fas",iconName:"clipboard-list",icon:[384,512,[],"f46d","M311.4 32l8.6 0c35.3 0 64 28.7 64 64l0 352c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32l8.6 0C83.6 12.9 104.3 0 128 0L256 0c23.7 0 44.4 12.9 55.4 32zM248 112c13.3 0 24-10.7 24-24s-10.7-24-24-24L136 64c-13.3 0-24 10.7-24 24s10.7 24 24 24l112 0zM128 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm32 0c0 13.3 10.7 24 24 24l112 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-112 0c-13.3 0-24 10.7-24 24zm0 128c0 13.3 10.7 24 24 24l112 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-112 0c-13.3 0-24 10.7-24 24zM96 416a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},OC={prefix:"fas",iconName:"baseball",icon:[512,512,[129358,9918,"baseball-ball"],"f433","M232.4 1.1c-122.2 11.4-219.5 108.7-230.9 230.9 16.2-.1 32-1.8 47.2-5 13-2.7 25.7 5.5 28.4 18.5s-5.5 25.7-18.5 28.4c-18.4 3.9-37.6 6-57.1 6.1 11.4 122.2 108.7 219.5 230.9 230.9 .1-19.5 2.2-38.7 6.1-57.1 2.7-13 15.5-21.3 28.4-18.5s21.3 15.5 18.5 28.4c-3.2 15.2-4.9 31-5 47.2 122.2-11.4 219.5-108.7 230.9-230.9-16.2 .1-32 1.8-47.2 5-13 2.7-25.7-5.5-28.4-18.5s5.5-25.7 18.5-28.4c18.4-3.9 37.6-6 57.1-6.1-11.4-122.2-108.7-219.5-230.9-230.9-.1 19.5-2.2 38.7-6.1 57.1-2.7 13-15.5 21.3-28.4 18.5s-21.3-15.5-18.5-28.4c3.2-15.2 4.9-31 5-47.2zm2.8 151.4c-21.4 32.9-49.5 60.9-82.3 82.3-11.1 7.2-26 4.1-33.2-7s-4.1-26 7-33.2c27.2-17.7 50.5-41 68.3-68.3 7.2-11.1 22.1-14.3 33.2-7s14.3 22.1 7 33.2zM393.1 284.2c7.2 11.1 4.1 26-7 33.2-27.2 17.7-50.5 41-68.3 68.3-7.2 11.1-22.1 14.3-33.2 7s-14.3-22.1-7-33.2c21.4-32.9 49.5-60.9 82.3-82.3 11.1-7.2 26-4.1 33.2 7z"]},dB={prefix:"fas",iconName:"basketball",icon:[512,512,[127936,"basketball-ball"],"f434","M92.7 58.8l78.4 78.4c18.2-25 28.9-55.9 28.9-89.2 0-14.1-1.9-27.7-5.5-40.6-38 9.4-72.6 27.2-101.8 51.4zM58.8 92.7c-24.2 29.2-42 63.8-51.4 101.8 12.9 3.6 26.5 5.5 40.6 5.5 33.3 0 64.1-10.7 89.2-28.9L58.8 92.7zM256 0c-4.6 0-9.2 .1-13.7 .4 3.7 15.3 5.7 31.2 5.7 47.6 0 46.6-15.9 89.4-42.6 123.4L256 222.1 419.3 58.8C374.9 22.1 318.1 0 256 0zM48 248c-16.4 0-32.4-2-47.6-5.7-.2 4.5-.4 9.1-.4 13.7 0 62.1 22.1 118.9 58.8 163.3L222.1 256 171.4 205.4C137.4 232.1 94.6 248 48 248zm463.6 21.7c.2-4.5 .4-9.1 .4-13.7 0-62.1-22.1-118.9-58.8-163.3L289.9 256 340.6 306.6c34-26.7 76.9-42.6 123.4-42.6 16.4 0 32.4 2 47.6 5.7zm-7.1 47.8c-12.9-3.6-26.5-5.5-40.6-5.5-33.3 0-64.1 10.7-89.2 28.9l78.4 78.4c24.2-29.2 42-63.8 51.4-101.8zM340.9 374.8c-18.2 25-28.9 55.9-28.9 89.2 0 14.1 1.9 27.7 5.5 40.6 38-9.4 72.6-27.2 101.8-51.4l-78.4-78.4zm-34.3-34.3L256 289.9 92.7 453.2c44.3 36.7 101.2 58.8 163.3 58.8 4.6 0 9.2-.1 13.7-.4-3.7-15.3-5.7-31.2-5.7-47.6 0-46.6 15.9-89.4 42.6-123.4z"]},DC=dB,LC={prefix:"fas",iconName:"hockey-puck",icon:[512,512,[],"f453","M256 256C114.6 256 0 213 0 160s114.6-96 256-96 256 43 256 96-114.6 96-256 96zM0 352L0 242.7c16.9 12.3 37 22.2 58.1 30.1 53 19.9 123 31.2 197.9 31.2s144.9-11.3 197.9-31.2c21.2-7.9 41.2-17.8 58.1-30.1L512 352c0 53-114.6 96-256 96S0 405 0 352z"]},_i={prefix:"fas",iconName:"money-bill-wave",icon:[512,512,[],"f53a","M0 419.6L0 109.5c0-23.2 24.1-38.6 46.3-32 87.7 26.2 149.7 5.5 212.1-15.3 64.5-21.5 129.4-43.1 223.3-13.1 18.5 5.9 30.3 23.8 30.3 43.3l0 310.1c0 23.2-24.1 38.6-46.2 32-87.7-26.2-149.8-5.5-212.1 15.3-64.5 21.5-129.4 43.1-223.3 13.1-18.5-5.9-30.3-23.8-30.3-43.3zM336 256c0-53-35.8-96-80-96s-80 43-80 96 35.8 96 80 96 80-43 80-96zM120 413.6c4.4 0 7.9-3.8 7.2-8.1-4.6-27.8-27-49.5-55.2-53-4.4-.5-8 3.1-8 7.5l0 39.9c0 3.6 2.4 6.8 6 7.7 17.9 4.2 34.3 6.1 50 6.1zm318.5-51.1c5 .8 9.5-3 9.5-8l0-42.6c0-4.4-3.6-8.1-8-7.5-25.2 3.1-45.9 20.9-53.2 44.6-1.4 4.7 2.3 9.1 7.2 9.2 14.2 .4 29 1.7 44.4 4.3zM448 152l0-39.9c0-3.6-2.5-6.8-6-7.7-17.9-4.2-34.3-6.1-50-6.1-4.4 0-7.9 3.8-7.2 8.1 4.6 27.8 27 49.5 55.2 53 4.4 .5 8-3.1 8-7.5zM125.2 162.9c1.4-4.7-2.3-9.1-7.2-9.2-14.2-.4-29-1.7-44.4-4.3-5-.8-9.5 3-9.5 8L64 200c0 4.4 3.6 8.1 8 7.5 25.2-3.1 45.9-20.9 53.2-44.6z"]},Ax={prefix:"fas",iconName:"futbol",icon:[512,512,[9917,"futbol-ball","soccer-ball"],"f1e3","M417.3 360.1l-71.6-4.8c-5.2-.3-10.3 1.1-14.5 4.2s-7.2 7.4-8.4 12.5l-17.6 69.6C289.5 445.8 273 448 256 448s-33.5-2.2-49.2-6.4L189.2 372c-1.3-5-4.3-9.4-8.4-12.5s-9.3-4.5-14.5-4.2l-71.6 4.8c-17.6-27.2-28.5-59.2-30.4-93.6L125 228.3c4.4-2.8 7.6-7 9.2-11.9s1.4-10.2-.5-15l-26.7-66.6C128 109.2 155.3 89 186.7 76.9l55.2 46c4 3.3 9 5.1 14.1 5.1s10.2-1.8 14.1-5.1l55.2-46c31.3 12.1 58.7 32.3 79.6 57.9l-26.7 66.6c-1.9 4.8-2.1 10.1-.5 15s4.9 9.1 9.2 11.9l60.7 38.2c-1.9 34.4-12.8 66.4-30.4 93.6zM256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm14.1-325.7c-8.4-6.1-19.8-6.1-28.2 0L194 221c-8.4 6.1-11.9 16.9-8.7 26.8l18.3 56.3c3.2 9.9 12.4 16.6 22.8 16.6l59.2 0c10.4 0 19.6-6.7 22.8-16.6l18.3-56.3c3.2-9.9-.3-20.7-8.7-26.8l-47.9-34.8z"]},uB={prefix:"fas",iconName:"circle-exclamation",icon:[512,512,["exclamation-circle"],"f06a","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm0-376c13.3 0 24 10.7 24 24l0 112c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-112c0-13.3 10.7-24 24-24zM229.3 352a26.7 26.7 0 1 1 53.3 0 26.7 26.7 0 1 1 -53.3 0z"]},_v=uB,_o={prefix:"fas",iconName:"chart-line",icon:[512,512,["line-chart"],"f201","M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7 262.6 153.4c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l73.4-73.4 57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"]},Mn={prefix:"fas",iconName:"building",icon:[384,512,[127970,61687],"f1ad","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L64 0zM176 352l32 0c17.7 0 32 14.3 32 32l0 80-96 0 0-80c0-17.7 14.3-32 32-32zM96 112c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM240 96l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM96 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm144-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16z"]},mB={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M195.1 9.5C198.1-5.3 211.2-16 226.4-16l59.8 0c15.2 0 28.3 10.7 31.3 25.5L332 79.5c14.1 6 27.3 13.7 39.3 22.8l67.8-22.5c14.4-4.8 30.2 1.2 37.8 14.4l29.9 51.8c7.6 13.2 4.9 29.8-6.5 39.9L447 233.3c.9 7.4 1.3 15 1.3 22.7s-.5 15.3-1.3 22.7l53.4 47.5c11.4 10.1 14 26.8 6.5 39.9l-29.9 51.8c-7.6 13.1-23.4 19.2-37.8 14.4l-67.8-22.5c-12.1 9.1-25.3 16.7-39.3 22.8l-14.4 69.9c-3.1 14.9-16.2 25.5-31.3 25.5l-59.8 0c-15.2 0-28.3-10.7-31.3-25.5l-14.4-69.9c-14.1-6-27.2-13.7-39.3-22.8L73.5 432.3c-14.4 4.8-30.2-1.2-37.8-14.4L5.8 366.1c-7.6-13.2-4.9-29.8 6.5-39.9l53.4-47.5c-.9-7.4-1.3-15-1.3-22.7s.5-15.3 1.3-22.7L12.3 185.8c-11.4-10.1-14-26.8-6.5-39.9L35.7 94.1c7.6-13.2 23.4-19.2 37.8-14.4l67.8 22.5c12.1-9.1 25.3-16.7 39.3-22.8L195.1 9.5zM256.3 336a80 80 0 1 0 -.6-160 80 80 0 1 0 .6 160z"]},nx=mB,xB={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M505 273c9.4-9.4 9.4-24.6 0-33.9L361 95c-6.9-6.9-17.2-8.9-26.2-5.2S320 102.3 320 112l0 80-112 0c-26.5 0-48 21.5-48 48l0 32c0 26.5 21.5 48 48 48l112 0 0 80c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2L505 273zM160 96c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 32C43 32 0 75 0 128L0 384c0 53 43 96 96 96l64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l64 0z"]},Z2=xB,uf={prefix:"fas",iconName:"arrow-up",icon:[384,512,[8593],"f062","M214.6 17.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 117.3 160 488c0 17.7 14.3 32 32 32s32-14.3 32-32l0-370.7 105.4 105.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"]},hB={prefix:"fas",iconName:"shirt",icon:[640,512,[128085,"t-shirt","tshirt"],"f553","M320.2 112c44.2 0 80-35.8 80-80l53.5 0c17 0 33.3 6.7 45.3 18.7L617.6 169.4c12.5 12.5 12.5 32.8 0 45.3l-50.7 50.7c-12.5 12.5-32.8 12.5-45.3 0l-41.4-41.4 0 224c0 35.3-28.7 64-64 64l-192 0c-35.3 0-64-28.7-64-64l0-224-41.4 41.4c-12.5 12.5-32.8 12.5-45.3 0L22.9 214.6c-12.5-12.5-12.5-32.8 0-45.3L141.5 50.7c12-12 28.3-18.7 45.3-18.7l53.5 0c0 44.2 35.8 80 80 80z"]},jf=hB,kx={prefix:"fas",iconName:"play",icon:[448,512,[9654],"f04b","M91.2 36.9c-12.4-6.8-27.4-6.5-39.6 .7S32 57.9 32 72l0 368c0 14.1 7.5 27.2 19.6 34.4s27.2 7.5 39.6 .7l336-184c12.8-7 20.8-20.5 20.8-35.1s-8-28.1-20.8-35.1l-336-184z"]},Qu={prefix:"fas",iconName:"calendar",icon:[448,512,[128197,128198],"f133","M128 0C110.3 0 96 14.3 96 32l0 32-32 0C28.7 64 0 92.7 0 128l0 48 448 0 0-48c0-35.3-28.7-64-64-64l-32 0 0-32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 32-128 0 0-32c0-17.7-14.3-32-32-32zM0 224L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-192-448 0z"]},sn={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M434.8 70.1c14.3 10.4 17.5 30.4 7.1 44.7l-256 352c-5.5 7.6-14 12.3-23.4 13.1s-18.5-2.7-25.1-9.3l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l101.5 101.5 234-321.7c10.4-14.3 30.4-17.5 44.7-7.1z"]},Co={prefix:"fas",iconName:"chart-bar",icon:[512,512,["bar-chart"],"f080","M32 32c17.7 0 32 14.3 32 32l0 336c0 8.8 7.2 16 16 16l400 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L80 480c-44.2 0-80-35.8-80-80L0 64C0 46.3 14.3 32 32 32zm96 64c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32zm32 80l128 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 112l256 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},fB={prefix:"fas",iconName:"house",icon:[512,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M277.8 8.6c-12.3-11.4-31.3-11.4-43.5 0l-224 208c-9.6 9-12.8 22.9-8 35.1S18.8 272 32 272l16 0 0 176c0 35.3 28.7 64 64 64l288 0c35.3 0 64-28.7 64-64l0-176 16 0c13.2 0 25-8.1 29.8-20.3s1.6-26.2-8-35.1l-224-208zM240 320l32 0c26.5 0 48 21.5 48 48l0 96-128 0 0-96c0-26.5 21.5-48 48-48z"]},ms=fB,Yr={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M208 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm0 416a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM48 208a48 48 0 1 1 0 96 48 48 0 1 1 0-96zm368 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM75 369.1A48 48 0 1 1 142.9 437 48 48 0 1 1 75 369.1zM75 75A48 48 0 1 1 142.9 142.9 48 48 0 1 1 75 75zM437 369.1A48 48 0 1 1 369.1 437 48 48 0 1 1 437 369.1z"]},Is={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144,62470,"user-alt","user-large"],"f007","M224 248a120 120 0 1 0 0-240 120 120 0 1 0 0 240zm-29.7 56C95.8 304 16 383.8 16 482.3 16 498.7 29.3 512 45.7 512l356.6 0c16.4 0 29.7-13.3 29.7-29.7 0-98.5-79.8-178.3-178.3-178.3l-59.4 0z"]},pB={prefix:"fas",iconName:"arrow-right",icon:[512,512,[8594],"f061","M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-105.4 105.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"]},gB={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M55.1 73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L147.2 256 9.9 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192.5 301.3 329.9 438.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.8 256 375.1 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192.5 210.7 55.1 73.4z"]},Bt=gB,yB={prefix:"fas",iconName:"file-lines",icon:[384,512,[128441,128462,61686,"file-alt","file-text"],"f15c","M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM120 256c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"]},Tn=yB,bB={prefix:"fas",iconName:"file-invoice",icon:[384,512,[],"f570","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-277.5c0-17-6.7-33.3-18.7-45.3L258.7 18.7C246.7 6.7 230.5 0 213.5 0L64 0zM325.5 176L232 176c-13.3 0-24-10.7-24-24L208 58.5 325.5 176zM64 384l0-64c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32l0 64c0 17.7-14.3 32-32 32L96 416c-17.7 0-32-14.3-32-32zM88 64l48 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-48 0c-13.3 0-24-10.7-24-24S74.7 64 88 64zm0 96l48 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-48 0c-13.3 0-24-10.7-24-24s10.7-24 24-24z"]},vB={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm84.4-299.3l-80 128c-4.2 6.7-11.4 10.9-19.3 11.3s-15.5-3.2-20.2-9.6l-48-64c-8-10.6-5.8-25.6 4.8-33.6s25.6-5.8 33.6 4.8l27 36 61.4-98.3c7-11.2 21.8-14.7 33.1-7.6s14.7 21.8 7.6 33.1z"]},Ra=vB,NN={prefix:"fas",iconName:"phone",icon:[512,512,[128222,128379],"f095","M160.2 25C152.3 6.1 131.7-3.9 112.1 1.4l-5.5 1.5c-64.6 17.6-119.8 80.2-103.7 156.4 37.1 175 174.8 312.7 349.8 349.8 76.3 16.2 138.8-39.1 156.4-103.7l1.5-5.5c5.4-19.7-4.7-40.3-23.5-48.1l-97.3-40.5c-16.5-6.9-35.6-2.1-47 11.8l-38.6 47.2C233.9 335.4 177.3 277 144.8 205.3L189 169.3c13.9-11.3 18.6-30.4 11.8-47L160.2 25z"]},Q2={prefix:"fas",iconName:"id-card",icon:[576,512,[62147,"drivers-license"],"f2c2","M0 96C0 60.7 28.7 32 64 32l448 0c35.3 0 64 28.7 64 64L0 96zm0 48l576 0 0 272c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 144zM247.3 416c20.2 0 35.3-19.4 22.4-35-14.7-17.7-36.9-29-61.7-29l-64 0c-24.8 0-47 11.3-61.7 29-12.9 15.6 2.2 35 22.4 35l142.5 0zM176 312a56 56 0 1 0 0-112 56 56 0 1 0 0 112zM360 208c-13.3 0-24 10.7-24 24s10.7 24 24 24l112 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-112 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l112 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-112 0z"]},Hp={prefix:"fas",iconName:"list",icon:[512,512,["list-squares"],"f03a","M40 48C26.7 48 16 58.7 16 72l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24L40 48zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM16 232l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0z"]},jB={prefix:"fas",iconName:"person-swimming",icon:[640,512,[127946,"swimmer"],"f5c4","M552 152a56 56 0 1 0 -112 0 56 56 0 1 0 112 0zM293.4 198.2l-88.6 73.9c1.1 0 2.2-.1 3.3-.1 33.1-.2 66.3 10.2 94.4 31.4 22.1 16.6 29.1 16.6 51.2 0 27.5-20.7 59.9-31.2 92.4-31.4 4.8 0 9.7 .2 14.5 .6-8.3-30-24.3-57.7-46.8-80.2-18.4-18.4-40.6-32.7-65-41.8l-68.6-25.7c-27.4-10.3-58-7.5-83.1 7.6l-53.5 32.1c-15.2 9.1-20.1 28.7-11 43.9s28.7 20.1 43.9 11L230 187.3c8.4-5 18.6-5.9 27.7-2.5l35.7 13.4zm110 181.9c21.3-16.1 49.9-16.1 71.2 0 19 14.4 41.9 28.2 67.2 33.3 26.5 5.4 54.3 .8 80.7-19.1 10.6-8 12.7-23 4.7-33.6s-23-12.7-33.6-4.7c-14.9 11.2-28.6 13.1-42.3 10.3-14.9-3-30.9-11.9-47.8-24.6-38.4-29-90.5-29-129 0-24 18.1-40.7 26.3-54.5 26.3s-30.5-8.2-54.5-26.3c-38.4-29-90.5-29-129 0-21.6 16.3-41.3 25.8-58.9 25.7-9.6-.1-19.9-3-31.2-11.5-10.6-8-25.6-5.9-33.6 4.7S7 386.3 17.6 394.3c19.1 14.4 39.4 21 59.8 21.1 33.9 .2 64.3-17.4 88.1-35.3 21.3-16.1 49.9-16.1 71.2 0 24.2 18.3 52.3 35.9 83.4 35.9s59.1-17.7 83.4-35.9z"]},MC=jB,Cx={prefix:"fas",iconName:"chart-pie",icon:[576,512,["pie-chart"],"f200","M512.4 240l-176 0c-17.7 0-32-14.3-32-32l0-176c0-17.7 14.4-32.2 31.9-29.9 107 14.2 191.8 99 206 206 2.3 17.5-12.2 31.9-29.9 31.9zM222.6 37.2c18.1-3.8 33.8 11 33.8 29.5l0 197.3c0 5.6 2 11 5.5 15.3L394 438.7c11.7 14.1 9.2 35.4-6.9 44.1-34.1 18.6-73.2 29.2-114.7 29.2-132.5 0-240-107.5-240-240 0-115.5 81.5-211.9 190.2-234.8zM477.8 288l64 0c18.5 0 33.3 15.7 29.5 33.8-10.2 48.4-35 91.4-69.6 124.2-12.3 11.7-31.6 9.2-42.4-3.9L374.9 340.4c-17.3-20.9-2.4-52.4 24.6-52.4l78.2 0z"]},NB=Cx,On={prefix:"fas",iconName:"credit-card",icon:[512,512,[128179,62083,"credit-card-alt"],"f09d","M0 128l0 32 512 0 0-32c0-35.3-28.7-64-64-64L64 64C28.7 64 0 92.7 0 128zm0 80L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-176-512 0zM64 360c0-13.3 10.7-24 24-24l48 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-48 0c-13.3 0-24-10.7-24-24zm144 0c0-13.3 10.7-24 24-24l64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-64 0c-13.3 0-24-10.7-24-24z"]},qu={prefix:"fas",iconName:"file-invoice-dollar",icon:[384,512,[],"f571","M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM64 88c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24s-10.7-24-24-24L88 64C74.7 64 64 74.7 64 88zm0 96c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zm112 76l0 4c-28.8 .3-52 23.7-52 52.5 0 25.7 18.5 47.6 43.9 51.8l41.7 7c6 1 10.4 6.2 10.4 12.3 0 6.9-5.6 12.5-12.5 12.5L152 400c-11 0-20 9-20 20s9 20 20 20l24 0 0 4c0 11 9 20 20 20s20-9 20-20l0-4.7c25-4.1 44-25.7 44-51.8 0-25.7-18.5-47.6-43.9-51.8l-41.7-7c-6-1-10.4-6.2-10.4-12.3 0-6.9 5.6-12.5 12.5-12.5l47.5 0c11 0 20-9 20-20s-9-20-20-20l-8 0 0-4c0-11-9-20-20-20s-20 9-20 20z"]},cg={prefix:"fas",iconName:"bullhorn",icon:[512,512,[128226,128363],"f0a1","M461.2 18.9C472.7 24 480 35.4 480 48l0 416c0 12.6-7.3 24-18.8 29.1s-24.8 3.2-34.3-5.1l-46.6-40.7c-43.6-38.1-98.7-60.3-156.4-63l0 95.7c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32l0-96C57.3 384 0 326.7 0 256S57.3 128 128 128l84.5 0c61.8-.2 121.4-22.7 167.9-63.3l46.6-40.7c9.4-8.3 22.9-10.2 34.3-5.1zM224 320l0 .2c70.3 2.7 137.8 28.5 192 73.4l0-275.3c-54.2 44.9-121.7 70.7-192 73.4L224 320z"]},qf={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},fx={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M309.5-18.9c-4.1-8-12.4-13.1-21.4-13.1s-17.3 5.1-21.4 13.1L193.1 125.3 33.2 150.7c-8.9 1.4-16.3 7.7-19.1 16.3s-.5 18 5.8 24.4l114.4 114.5-25.2 159.9c-1.4 8.9 2.3 17.9 9.6 23.2s16.9 6.1 25 2L288.1 417.6 432.4 491c8 4.1 17.7 3.3 25-2s11-14.2 9.6-23.2L441.7 305.9 556.1 191.4c6.4-6.4 8.6-15.8 5.8-24.4s-10.1-14.9-19.1-16.3L383 125.3 309.5-18.9z"]},wB={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 0c14.7 0 28.2 8.1 35.2 21l216 400c6.7 12.4 6.4 27.4-.8 39.5S486.1 480 472 480L40 480c-14.1 0-27.1-7.4-34.4-19.5s-7.5-27.1-.8-39.5l216-400c7-12.9 20.5-21 35.2-21zm0 168c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm26.7 216a26.7 26.7 0 1 0 -53.3 0 26.7 26.7 0 1 0 53.3 0z"]},la=wB,Nf={prefix:"fas",iconName:"graduation-cap",icon:[576,512,[127891,"mortar-board"],"f19d","M48 195.8l209.2 86.1c9.8 4 20.2 6.1 30.8 6.1s21-2.1 30.8-6.1l242.4-99.8c9-3.7 14.8-12.4 14.8-22.1s-5.8-18.4-14.8-22.1L318.8 38.1C309 34.1 298.6 32 288 32s-21 2.1-30.8 6.1L14.8 137.9C5.8 141.6 0 150.3 0 160L0 456c0 13.3 10.7 24 24 24s24-10.7 24-24l0-260.2zm48 71.7L96 384c0 53 86 96 192 96s192-43 192-96l0-116.6-142.9 58.9c-15.6 6.4-32.2 9.7-49.1 9.7s-33.5-3.3-49.1-9.7L96 267.4z"]},wN={prefix:"fas",iconName:"lock",icon:[384,512,[128274],"f023","M128 96l0 64 128 0 0-64c0-35.3-28.7-64-64-64s-64 28.7-64 64zM64 160l0-64C64 25.3 121.3-32 192-32S320 25.3 320 96l0 64c35.3 0 64 28.7 64 64l0 224c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 224c0-35.3 28.7-64 64-64z"]},bn={prefix:"fas",iconName:"download",icon:[448,512,[],"f019","M256 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 210.7-41.4-41.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 242.7 256 32zM64 320c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-46.9 0-56.6 56.6c-31.2 31.2-81.9 31.2-113.1 0L110.9 320 64 320zm304 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},RC={prefix:"fas",iconName:"award",icon:[448,512,[],"f559","M245.9-25.9c-13.4-8.2-30.3-8.2-43.7 0-24.4 14.9-39.5 18.9-68.1 18.3-15.7-.4-30.3 8.1-37.9 21.9-13.7 25.1-24.8 36.2-49.9 49.9-13.8 7.5-22.2 22.2-21.9 37.9 .7 28.6-3.4 43.7-18.3 68.1-8.2 13.4-8.2 30.3 0 43.7 14.9 24.4 18.9 39.5 18.3 68.1-.4 15.7 8.1 30.3 21.9 37.9 22.1 12.1 33.3 22.1 45.1 41.5L42.7 458.5c-5.9 11.9-1.1 26.3 10.7 32.2l86 43c11.5 5.7 25.5 1.4 31.7-9.8l52.8-95.1 52.8 95.1c6.2 11.2 20.2 15.6 31.7 9.8l86-43c11.9-5.9 16.7-20.3 10.7-32.2l-48.6-97.2c11.7-19.4 23-29.4 45.1-41.5 13.8-7.5 22.2-22.2 21.9-37.9-.7-28.6 3.4-43.7 18.3-68.1 8.2-13.4 8.2-30.3 0-43.7-14.9-24.4-18.9-39.5-18.3-68.1 .4-15.7-8.1-30.3-21.9-37.9-25.1-13.7-36.2-24.8-49.9-49.9-7.5-13.8-22.2-22.2-37.9-21.9-28.6 .7-43.7-3.4-68.1-18.3zM224 96a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"]},SB={prefix:"fas",iconName:"table-tennis-paddle-ball",icon:[512,512,[127955,"ping-pong-paddle-ball","table-tennis"],"f45d","M97 127l67.4-67.4c38.2-38.2 90-59.6 144-59.6 112.5 0 203.7 91.2 203.7 203.6 0 46.4-15.8 91.1-44.5 127-23.6-16.8-52.4-26.7-83.5-26.7-31.1 0-59.9 9.9-83.4 26.6L97 127zM240 448c0 9.7 1 19.1 2.8 28.2-19.8-5.2-38-15.5-52.7-30.2-12.2-12.2-31.9-12.2-44.1 0L96.6 495.4c-10.6 10.6-25 16.6-40 16.6-31.2 0-56.6-25.3-56.6-56.6 0-15 6-29.4 16.6-40l49.4-49.4c12.2-12.2 12.2-31.9 0-44.1-21.7-21.7-33.9-51.2-33.9-81.9 0-29.4 11.1-57.6 31.1-79L266.6 364.6C249.9 388.1 240 416.9 240 448zm144-96a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"]},$C=SB,_B={prefix:"fas",iconName:"football",icon:[512,512,[127944,"football-ball"],"f44e","M261.1 22.6c-89 18-150.5 63.4-190 123.9-23.3 35.6-38.1 75.3-46.7 115.5L251.9 489.4c89-18 150.5-63.4 190.1-123.9 23.3-35.6 38.1-75.3 46.7-115.5L261.1 22.6zm236 168.1c3.2-42.3 .7-83.3-4.8-118.7-4.4-27.8-26.8-48-53.1-51.6-43-5.9-82.2-7.5-117.8-5.4L497.1 190.6zM191.7 497.1L15.9 321.4c-3.2 42.3-.7 83.3 4.8 118.7 4.4 27.8 26.8 48 53.1 51.6 43 5.9 82.2 7.5 117.8 5.4zM271.5 143c9.4-9.4 24.6-9.4 33.9 0l64 64c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9zm-64 64c9.4-9.4 24.6-9.4 33.9 0l64 64c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9zm-64 64c9.4-9.4 24.6-9.4 33.9 0l64 64c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9z"]},FC=_B,AB={prefix:"fas",iconName:"globe",icon:[512,512,[127760],"f0ac","M351.9 280l-190.9 0c2.9 64.5 17.2 123.9 37.5 167.4 11.4 24.5 23.7 41.8 35.1 52.4 11.2 10.5 18.9 12.2 22.9 12.2s11.7-1.7 22.9-12.2c11.4-10.6 23.7-28 35.1-52.4 20.3-43.5 34.6-102.9 37.5-167.4zM160.9 232l190.9 0C349 167.5 334.7 108.1 314.4 64.6 303 40.2 290.7 22.8 279.3 12.2 268.1 1.7 260.4 0 256.4 0s-11.7 1.7-22.9 12.2c-11.4 10.6-23.7 28-35.1 52.4-20.3 43.5-34.6 102.9-37.5 167.4zm-48 0C116.4 146.4 138.5 66.9 170.8 14.7 78.7 47.3 10.9 131.2 1.5 232l111.4 0zM1.5 280c9.4 100.8 77.2 184.7 169.3 217.3-32.3-52.2-54.4-131.7-57.9-217.3L1.5 280zm398.4 0c-3.5 85.6-25.6 165.1-57.9 217.3 92.1-32.7 159.9-116.5 169.3-217.3l-111.4 0zm111.4-48C501.9 131.2 434.1 47.3 342 14.7 374.3 66.9 396.4 146.4 399.9 232l111.4 0z"]},em={prefix:"fas",iconName:"arrow-left",icon:[512,512,[8592],"f060","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 288 480 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-370.7 0 105.4-105.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"]},dg={prefix:"fas",iconName:"bed",icon:[576,512,[128716],"f236","M32 32c17.7 0 32 14.3 32 32l0 224 224 0 0-128c0-17.7 14.3-32 32-32l160 0c53 0 96 43 96 96l0 224c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64-448 0 0 64c0 17.7-14.3 32-32 32S0 465.7 0 448L0 64C0 46.3 14.3 32 32 32zm80 160a64 64 0 1 1 128 0 64 64 0 1 1 -128 0z"]},kB={prefix:"fas",iconName:"person-running",icon:[448,512,[127939,"running"],"f70c","M256.5-32a56 56 0 1 1 0 112 56 56 0 1 1 0-112zM123.6 176c-3.3 0-6.2 2-7.4 5L94.2 235.9c-6.6 16.4-25.2 24.4-41.6 17.8s-24.4-25.2-17.8-41.6l21.9-54.9C67.7 129.9 94.1 112 123.6 112l97.3 0c28.5 0 54.8 15.1 69.1 39.7l32.8 56.3 61.6 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-61.6 0c-22.8 0-43.8-12.1-55.3-31.8l-10-17.1-20.7 70.4 75.4 22.6c27.7 8.3 41.8 39 30.1 65.5L285.7 509c-7.2 16.2-26.1 23.4-42.2 16.2s-23.4-26.1-16.2-42.2l49.2-110.8-95.9-28.8c-32.7-9.8-52-43.7-43.7-76.8l22.7-90.6-35.9 0zm-8 181c13.3 14.9 30.7 26.3 51.2 32.4l4.7 1.4-6.9 19.3c-5.8 16.3-16 30.8-29.3 41.8L52.9 519.8c-13.6 11.2-33.8 9.3-45-4.3s-9.3-33.8 4.3-45l82.4-67.9c4.5-3.7 7.8-8.5 9.8-13.9L115.6 357z"]},IC=kB,Ot={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 160-160 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l160 0 0 160c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160 160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-160 0 0-160z"]},CB={prefix:"fas",iconName:"box",icon:[448,512,[128230],"f466","M369.4 128l-34.3-48-222.1 0-34.3 48 290.7 0zM0 148.5c0-13.3 4.2-26.3 11.9-37.2L60.9 42.8C72.9 26 92.3 16 112.9 16l222.1 0c20.7 0 40.1 10 52.1 26.8l48.9 68.5c7.8 10.9 11.9 23.9 11.9 37.2L448 416c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 148.5z"]},Mr={prefix:"fas",iconName:"user-graduate",icon:[448,512,[],"f501","M241.3-13c-11.4-2.3-23.1-2.3-34.5 0L19.3 24.5C8.1 26.7 0 36.6 0 48 0 58.3 6.5 67.3 16 70.6L16 144 .3 222.6c-.2 .9-.3 1.9-.3 2.9 0 8 6.5 14.6 14.6 14.6l34.9 0c8 0 14.6-6.5 14.6-14.6 0-1-.1-1.9-.3-2.9L48 144 48 77.3 96 86.9 96 144c0 70.7 57.3 128 128 128s128-57.3 128-128l0-57.1 76.7-15.3C439.9 69.3 448 59.4 448 48s-8.1-21.3-19.3-23.5L241.3-13zM224 224c-44.2 0-80-35.8-80-80l160 0c0 44.2-35.8 80-80 80zM120.1 320.1C58.7 348.3 16 410.3 16 482.3 16 498.7 29.3 512 45.7 512l154.3 0 0-146-57.4-43c-6.5-4.9-15.2-6.2-22.6-2.8zM248 512l154.3 0c16.4 0 29.7-13.3 29.7-29.7 0-72-42.7-134-104.1-162.1-7.4-3.4-16.1-2.1-22.6 2.8l-57.4 43 0 146z"]},mf={prefix:"fas",iconName:"eye-slash",icon:[576,512,[],"f070","M41-24.9c-9.4-9.4-24.6-9.4-33.9 0S-2.3-.3 7 9.1l528 528c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-96.4-96.4c2.7-2.4 5.4-4.8 8-7.2 46.8-43.5 78.1-95.4 93-131.1 3.3-7.9 3.3-16.7 0-24.6-14.9-35.7-46.2-87.7-93-131.1-47.1-43.7-111.8-80.6-192.6-80.6-56.8 0-105.6 18.2-146 44.2L41-24.9zM204.5 138.7c23.5-16.8 52.4-26.7 83.5-26.7 79.5 0 144 64.5 144 144 0 31.1-9.9 59.9-26.7 83.5l-34.7-34.7c12.7-21.4 17-47.7 10.1-73.7-13.7-51.2-66.4-81.6-117.6-67.9-8.6 2.3-16.7 5.7-24 10l-34.7-34.7zM325.3 395.1c-11.9 3.2-24.4 4.9-37.3 4.9-79.5 0-144-64.5-144-144 0-12.9 1.7-25.4 4.9-37.3L69.4 139.2c-32.6 36.8-55 75.8-66.9 104.5-3.3 7.9-3.3 16.7 0 24.6 14.9 35.7 46.2 87.7 93 131.1 47.1 43.7 111.8 80.6 192.6 80.6 37.3 0 71.2-7.9 101.5-20.6l-64.2-64.2z"]},Uf={prefix:"fas",iconName:"tag",icon:[512,512,[127991],"f02b","M32.5 96l0 149.5c0 17 6.7 33.3 18.7 45.3l192 192c25 25 65.5 25 90.5 0L483.2 333.3c25-25 25-65.5 0-90.5l-192-192C279.2 38.7 263 32 246 32L96.5 32c-35.3 0-64 28.7-64 64zm112 16a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},EB={prefix:"fas",iconName:"building-columns",icon:[512,512,["bank","institution","museum","university"],"f19c","M271.9 20.2c-9.8-5.6-21.9-5.6-31.8 0l-224 128c-12.6 7.2-18.8 22-15.1 36S17.5 208 32 208l32 0 0 208 0 0-51.2 38.4C4.7 460.4 0 469.9 0 480 0 497.7 14.3 512 32 512l448 0c17.7 0 32-14.3 32-32 0-10.1-4.7-19.6-12.8-25.6l-51.2-38.4 0-208 32 0c14.5 0 27.2-9.8 30.9-23.8s-2.5-28.8-15.1-36l-224-128zM400 208l0 208-64 0 0-208 64 0zm-112 0l0 208-64 0 0-208 64 0zm-112 0l0 208-64 0 0-208 64 0zM256 96a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},cx=EB,xf={prefix:"fas",iconName:"arrow-down",icon:[384,512,[8595],"f063","M169.4 502.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 402.7 224 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 370.7-105.4-105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},TB={prefix:"fas",iconName:"location-dot",icon:[384,512,["map-marker-alt"],"f3c5","M0 188.6C0 84.4 86 0 192 0S384 84.4 384 188.6c0 119.3-120.2 262.3-170.4 316.8-11.8 12.8-31.5 12.8-43.3 0-50.2-54.5-170.4-197.5-170.4-316.8zM192 256a64 64 0 1 0 0-128 64 64 0 1 0 0 128z"]},jc=TB,ug={prefix:"fas",iconName:"route",icon:[512,512,[],"f4d7","M512 96c0 50.2-59.1 125.1-84.6 155-3.8 4.4-9.4 6.1-14.5 5L320 256c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c53 0 96 43 96 96s-43 96-96 96l-276.4 0c8.7-9.9 19.3-22.6 30-36.8 6.3-8.4 12.8-17.6 19-27.2L416 448c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0c-53 0-96-43-96-96s43-96 96-96l39.8 0c-21-31.5-39.8-67.7-39.8-96 0-53 43-96 96-96s96 43 96 96zM117.1 489.1c-3.8 4.3-7.2 8.1-10.1 11.3l-1.8 2-.2-.2c-6 4.6-14.6 4-20-1.8-25.2-27.4-85-97.9-85-148.4 0-53 43-96 96-96s96 43 96 96c0 30-21.1 67-43.5 97.9-10.7 14.7-21.7 28-30.8 38.5l-.6 .7zM128 352a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM416 128a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},BC={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M65.9 228.5c13.3-93 93.4-164.5 190.1-164.5 53 0 101 21.5 135.8 56.2 .2 .2 .4 .4 .6 .6l7.6 7.2-47.9 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 53.4-11.3-10.7C390.5 28.6 326.5 0 256 0 127 0 20.3 95.4 2.6 219.5 .1 237 12.2 253.2 29.7 255.7s33.7-9.7 36.2-27.1zm443.5 64c2.5-17.5-9.7-33.7-27.1-36.2s-33.7 9.7-36.2 27.1c-13.3 93-93.4 164.5-190.1 164.5-53 0-101-21.5-135.8-56.2-.2-.2-.4-.4-.6-.6l-7.6-7.2 47.9 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 320c-8.5 0-16.7 3.4-22.7 9.5S-.1 343.7 0 352.3l1 127c.1 17.7 14.6 31.9 32.3 31.7S65.2 496.4 65 478.7l-.4-51.5 10.7 10.1c46.3 46.1 110.2 74.7 180.7 74.7 129 0 235.7-95.4 253.4-219.5z"]},zC=BC,qC=BC,PB={prefix:"fas",iconName:"book-open",icon:[512,512,[128214,128366],"f518","M256 141.3l0 309.3 .5-.2C311.1 427.7 369.7 416 428.8 416l19.2 0 0-320-19.2 0c-42.2 0-84.1 8.4-123.1 24.6-16.8 7-33.4 13.9-49.7 20.7zM230.9 61.5L256 72 281.1 61.5C327.9 42 378.1 32 428.8 32L464 32c26.5 0 48 21.5 48 48l0 352c0 26.5-21.5 48-48 48l-35.2 0c-50.7 0-100.9 10-147.7 29.5l-12.8 5.3c-7.9 3.3-16.7 3.3-24.6 0l-12.8-5.3C184.1 490 133.9 480 83.2 480L48 480c-26.5 0-48-21.5-48-48L0 80C0 53.5 21.5 32 48 32l35.2 0c50.7 0 100.9 10 147.7 29.5z"]},OB={prefix:"fas",iconName:"money-bill",icon:[512,512,[],"f0d6","M64 64C28.7 64 0 92.7 0 128L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L64 64zm192 96a96 96 0 1 1 0 192 96 96 0 1 1 0-192zm192 24c0 4.4-3.6 8.1-8 7.5-29-3.6-51.9-26.6-55.5-55.5-.5-4.4 3.1-8 7.5-8l48 0c4.4 0 8 3.6 8 8l0 48zM64 328c0-4.4 3.6-8.1 8-7.5 29 3.6 51.9 26.6 55.5 55.5 .5 4.4-3.1 8-7.5 8l-48 0c-4.4 0-8-3.6-8-8l0-48zm8-136.5c-4.4 .5-8-3.1-8-7.5l0-48c0-4.4 3.6-8 8-8l48 0c4.4 0 8.1 3.6 7.5 8-3.6 29-26.6 51.9-55.5 55.5zm368 129c4.4-.5 8 3.1 8 7.5l0 48c0 4.4-3.6 8-8 8l-48 0c-4.4 0-8.1-3.6-7.5-8 3.6-29 26.6-51.9 55.5-55.5z"]},DB={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zM224 160a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm-8 64l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24z"]},UC=DB,LB={prefix:"fas",iconName:"cart-shopping",icon:[640,512,[128722,"shopping-cart"],"f07a","M24-16C10.7-16 0-5.3 0 8S10.7 32 24 32l45.3 0c3.9 0 7.2 2.8 7.9 6.6l52.1 286.3c6.2 34.2 36 59.1 70.8 59.1L456 384c13.3 0 24-10.7 24-24s-10.7-24-24-24l-255.9 0c-11.6 0-21.5-8.3-23.6-19.7l-5.1-28.3 303.6 0c30.8 0 57.2-21.9 62.9-52.2L568.9 69.9C572.6 50.2 557.5 32 537.4 32l-412.7 0-.4-2c-4.8-26.6-28-46-55.1-46L24-16zM208 512a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm224 0a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"]},ej=LB;const MB=({open:t,setOpen:a})=>{const{logout:r}=ut(),s=Do(),n=[{name:"Dashboard",href:"/dashboard",icon:ms},{name:"Students",href:"/dashboard/students",icon:Mr},{name:"Classes",href:"/dashboard/classes",icon:Sv},{name:"Timetables",href:"/dashboard/timetables",icon:ua},{name:"Results",href:"/dashboard/results",icon:Co},{name:"Boarding",href:"/dashboard/boarding",icon:dg},{name:"Transport",href:"/dashboard/transport/routes",icon:ug},{name:"Sports",href:"/dashboard/sports",icon:Rd},{name:"Student Billing",href:"/dashboard/fees-payment",icon:On},{name:"Accounting",href:"/dashboard/accounting/chart-of-accounts",icon:_i},{name:"Expenses",href:"/dashboard/expenses/expenses",icon:ej},{name:"Procurement",href:"/dashboard/procurement",icon:Hp},{name:"Payroll",href:"/dashboard/payroll",icon:w6},{name:"Inventory",href:"/dashboard/inventory",icon:Tn},{name:"Fixed Assets",href:"/dashboard/assets",icon:S6},{name:"Financial Reports",href:"/dashboard/reports/income-statement",icon:_o},{name:"Analytics",href:"/dashboard/analytics/expense-analysis",icon:Cx},{name:"Admin",href:"/dashboard/admin",icon:nx},{name:"Help & Tutorials",href:"/dashboard/help",icon:Tn}],i={students:[{name:"Home",href:"/dashboard",icon:ms},{name:"Students",href:"/dashboard/students",icon:Mr},{name:"Add Student",href:"/dashboard/students/add",icon:Mr}],classes:[{name:"Home",href:"/dashboard",icon:ms},{name:"Classes",href:"/dashboard/classes",icon:Sv},{name:"Class Term Year",href:"/dashboard/classes/class-term-year",icon:N6},{name:"Add Gradelevel Class",href:"/dashboard/classes/gradelevel-classes/add",icon:Sv},{name:"Class Configurations",href:"/dashboard/classes/configurations",icon:nx},{name:"Close to Term",href:"/dashboard/classes/close-to-term",icon:ua}],timetables:[{name:"Home",href:"/dashboard",icon:ms},{name:"Timetables",href:"/dashboard/timetables",icon:ua},{name:"Test Timetable",href:"/dashboard/timetables/test",icon:N6}],results:[{name:"Home",href:"/dashboard",icon:ms},{name:"Results",href:"/dashboard/results",icon:Co},{name:"Grading Criteria",href:"/dashboard/results/grading",icon:Nf}],boarding:[{name:"Home",href:"/dashboard",icon:ms},{name:"Boarding",href:"/dashboard/boarding",icon:dg}],billing:[{name:"Home",href:"/dashboard",icon:ms},{name:"Record Payment",href:"/dashboard/fees-payment",icon:On},{name:"Boarding Fee Payments",href:"/dashboard/all-payments",icon:Hp},{name:"Outstanding Balances",href:"/dashboard/students/balances",icon:_i},{name:"Student Opening Balances",href:"/dashboard/students/manual-balance-update",icon:ha},{name:"Additional Fees",href:"/dashboard/billing/additional-fees",icon:Ia},{name:"Waivers",href:"/dashboard/waivers",icon:Uf},{name:"Invoice Structures",href:"/dashboard/invoice-structures",icon:Tn},{name:"Student Financial Record",href:"/dashboard/financial-records",icon:qu}],accounting:[{name:"Home",href:"/dashboard",icon:ms},{name:"Chart of Accounts",href:"/dashboard/accounting/chart-of-accounts",icon:Tn},{name:"General Ledger",href:"/dashboard/accounting/general-ledger",icon:ko},{name:"Cash & Bank",href:"/dashboard/accounting/cash-bank",icon:Ia},{name:"Bank Reconciliation",href:"/dashboard/accounting/bank-reconciliation",icon:On},{name:"Accounting Periods",href:"/dashboard/accounting/periods",icon:ua},{name:"Period Management",href:"/dashboard/accounting/period-closing",icon:wN}],expenses:[{name:"Home",href:"/dashboard",icon:ms},{name:"Expenses",href:"/dashboard/expenses/expenses",icon:Tn},{name:"Add Expense",href:"/dashboard/expenses/expenses/add",icon:Ot},{name:"Accounts Payable",href:"/dashboard/expenses/accounts-payable",icon:_i},{name:"Suppliers",href:"/dashboard/expenses/suppliers",icon:za}],procurement:[{name:"Home",href:"/dashboard",icon:ms},{name:"Procurement Dashboard",href:"/dashboard/procurement",icon:Hp},{name:"Purchase Requests",href:"/dashboard/procurement/purchase-requests",icon:og},{name:"Suppliers",href:"/dashboard/procurement/suppliers",icon:ej},{name:"Purchase Orders",href:"/dashboard/procurement/purchase-orders",icon:qu}],payroll:[{name:"Home",href:"/dashboard",icon:ms},{name:"Payroll Dashboard",href:"/dashboard/payroll",icon:w6},{name:"Create Payslip",href:"/dashboard/payroll/create",icon:Ot},{name:"View Payslips",href:"/dashboard/payroll/payslips",icon:qu}],transport:[{name:"Home",href:"/dashboard",icon:ms},{name:"Manage Routes",href:"/dashboard/transport/routes",icon:ug},{name:"Student Registration",href:"/dashboard/transport/registrations",icon:Mr},{name:"Transport Payments",href:"/dashboard/transport/payments",icon:On}],sports:[{name:"Home",href:"/dashboard",icon:ms},{name:"Sports",href:"/dashboard/sports",icon:Rd}],inventory:[{name:"Home",href:"/dashboard",icon:ms},{name:"Inventory",href:"/dashboard/inventory",icon:Tn},{name:"Add Item",href:"/dashboard/inventory/add-item",icon:Ot},{name:"Issue Uniform",href:"/dashboard/inventory/issue-uniform",icon:Mr},{name:"Configurations",href:"/dashboard/inventory/configurations",icon:nx}],assets:[{name:"Home",href:"/dashboard",icon:ms},{name:"Fixed Assets",href:"/dashboard/assets",icon:S6},{name:"Add Asset",href:"/dashboard/assets/add",icon:Ot},{name:"Configurations",href:"/dashboard/assets/configurations",icon:nx}],announcements:[{name:"Home",href:"/dashboard",icon:ms},{name:"Announcements",href:"/dashboard/announcements",icon:cg},{name:"Add Announcement",href:"/dashboard/announcements/add",icon:Ot}],reports:[{name:"Home",href:"/dashboard",icon:ms},{name:"Trial Balance",href:"/dashboard/accounting/trial-balance",icon:Xn},{name:"Income Statement",href:"/dashboard/reports/income-statement",icon:_o},{name:"Balance Sheet",href:"/dashboard/reports/balance-sheet",icon:Xn},{name:"Cash Flow Statement",href:"/dashboard/reports/cash-flow",icon:_i}],analytics:[{name:"Home",href:"/dashboard",icon:ms},{name:"Expense Analysis",href:"/dashboard/analytics/expense-analysis",icon:Cx},{name:"Revenue Analysis",href:"/dashboard/analytics/revenue-analysis",icon:_o},{name:"Student Financial Analytics",href:"/dashboard/analytics/student-financial-analytics",icon:za},{name:"Student Results Analytics",href:"/dashboard/analytics/student-results-analytics",icon:Nf}],admin:[{name:"Home",href:"/dashboard",icon:ms},{name:"Employees",href:"/dashboard/employees",icon:za},{name:"Add Employee",href:"/dashboard/employees/add",icon:za},{name:"Configurations",href:"/dashboard/configurations",icon:Mn},{name:"Settings",href:"/dashboard/settings",icon:nx}],help:[{name:"Home",href:"/dashboard",icon:ms},{name:"Help & Tutorials",href:"/dashboard/help",icon:Tn}]};(()=>{const x=s.pathname;return x==="/dashboard"||x==="/dashboard/"?"dashboard":x.split("/")[2]||"dashboard"})();const u=(()=>{if(s.pathname==="/dashboard"||s.pathname==="/dashboard/")return n;let x=null;return s.pathname.startsWith("/dashboard/reports")||s.pathname.startsWith("/dashboard/accounting/trial-balance")?x="reports":s.pathname.startsWith("/dashboard/fees")||s.pathname.startsWith("/dashboard/invoice")||s.pathname.startsWith("/dashboard/financial")||s.pathname.startsWith("/dashboard/all-payments")||s.pathname.startsWith("/dashboard/students/balances")||s.pathname.startsWith("/dashboard/students/manual-balance-update")||s.pathname.startsWith("/dashboard/billing")||s.pathname.startsWith("/dashboard/waivers")?x="billing":s.pathname.startsWith("/dashboard/accounting")?x="accounting":s.pathname.startsWith("/dashboard/expenses")?x="expenses":s.pathname.startsWith("/dashboard/assets")?x="assets":s.pathname.startsWith("/dashboard/settings")||s.pathname.startsWith("/dashboard/configurations")||s.pathname.startsWith("/dashboard/employees")?x="admin":x=Object.keys(i).find(f=>s.pathname.startsWith(`/dashboard/${f}`)),x&&i[x]?i[x]:n})(),m=x=>{const f=s.pathname===x.href;return e.jsx("li",{children:e.jsxs(dR,{to:x.href,className:`group flex gap-x-3 rounded-md p-2 text-xs leading-5 font-medium border-b border-gray-200/30 ${f?"bg-gray-50 text-blue-600":x.name==="Home"?"text-gray-500 hover:text-gray-700 hover:bg-gray-50":"text-gray-700 hover:text-blue-600 hover:bg-gray-50"}`,onClick:()=>a(!1),children:[e.jsx("div",{className:"h-5 w-5 shrink-0 text-gray-600 flex items-center justify-center",children:e.jsx(R,{icon:x.icon,className:"text-sm"})}),x.name]})},x.name)};return e.jsxs(e.Fragment,{children:[t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/80 z-40 lg:hidden",onClick:()=>a(!1)}),e.jsx("div",{className:"fixed inset-y-0 left-0 z-50 w-56 bg-white lg:hidden overflow-y-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:e.jsxs("div",{className:"flex grow flex-col gap-y-4 px-4 pb-4",children:[e.jsxs("div",{className:"flex h-14 shrink-0 items-center justify-between border-b border-gray-200/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-5 w-5 rounded-lg bg-purple-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"U"})}),e.jsx("h1",{className:"text-sm font-bold text-gray-900",children:"Brooklyn"})]}),e.jsx("button",{onClick:()=>a(!1),className:"p-1 rounded-md hover:bg-gray-300",children:e.jsx("span",{className:"text-gray-600 text-lg font-bold",children:""})})]}),e.jsx("nav",{className:"flex flex-1 flex-col",children:e.jsxs("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:[e.jsx("li",{children:e.jsx("ul",{role:"list",className:"-mx-2 space-y-1",children:u.map(m)})}),e.jsx("li",{className:"mt-auto",children:e.jsxs("button",{onClick:r,className:"flex w-full items-center gap-x-3 rounded-md p-2 text-xs leading-5 font-medium text-gray-700 hover:text-red-600 hover:bg-gray-50 border-t border-gray-200/50",children:[e.jsx("div",{className:"h-5 w-5 shrink-0 text-gray-600 flex items-center justify-center",children:e.jsx(R,{icon:Z2,className:"text-sm"})}),"Logout"]})})]})})]})})]}),e.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-64 lg:flex-col overflow-y-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:e.jsxs("div",{className:"flex grow flex-col gap-y-4 border-r border-gray-200 bg-gray-200/30 px-4 pb-4",children:[e.jsx("div",{className:"flex h-14 shrink-0 items-center border-b border-gray-200/50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-5 w-5 rounded-lg bg-purple-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"U"})}),e.jsx("h1",{className:"text-sm font-bold text-gray-900",children:"Brooklyn"})]})}),e.jsx("nav",{className:"flex flex-1 flex-col",children:e.jsxs("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:[e.jsx("li",{children:e.jsx("ul",{role:"list",className:"-mx-2 space-y-1",children:u.map(m)})}),e.jsx("li",{className:"mt-auto",children:e.jsxs("button",{onClick:r,className:"flex w-full items-center gap-x-3 rounded-md p-2 text-xs leading-5 font-medium text-gray-700 hover:text-red-600 hover:bg-gray-50 border-t border-gray-200/50",children:[e.jsx("div",{className:"h-5 w-5 shrink-0 text-gray-600 flex items-center justify-center",children:e.jsx(R,{icon:Z2,className:"text-sm"})}),"Logout"]})})]})})]})})]})};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HC=(...t)=>t.filter((a,r,s)=>!!a&&a.trim()!==""&&s.indexOf(a)===r).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $B={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=g.forwardRef(({color:t="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:n="",children:i,iconNode:o,...d},u)=>g.createElement("svg",{ref:u,...$B,width:a,height:a,stroke:t,strokeWidth:s?Number(r)*24/Number(a):r,className:HC("lucide",n),...d},[...o.map(([m,x])=>g.createElement(m,x)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=(t,a)=>{const r=g.forwardRef(({className:s,...n},i)=>g.createElement(FB,{ref:i,iconNode:a,className:HC(`lucide-${RB(t)}`,s),...n}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=ir("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=ir("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=ir("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=ir("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=ir("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=ir("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=ir("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=ir("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=ir("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=ir("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=ir("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=ir("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=ir("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=ir("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=ir("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=ir("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=ir("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=ir("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=ir("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=ir("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=ir("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=ir("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=ir("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=ir("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=ir("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=ir("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=ir("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]),dz=({onMenuClick:t})=>{const{user:a}=ut();return e.jsxs("header",{className:"sticky top-0 z-40 flex h-12 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 sm:gap-x-6 sm:px-6 lg:px-8",children:[e.jsxs("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:t,children:[e.jsx("span",{className:"sr-only",children:"Open sidebar"}),e.jsx(tz,{className:"h-6 w-6","aria-hidden":"true"})]}),e.jsx("div",{className:"h-6 w-px bg-gray-200 lg:hidden","aria-hidden":"true"}),e.jsx("div",{className:"flex flex-1"}),e.jsxs("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[e.jsxs("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-400 hover:text-gray-500",children:[e.jsx("span",{className:"sr-only",children:"View notifications"}),e.jsx(IB,{className:"h-5 w-5","aria-hidden":"true"})]}),e.jsx("div",{className:"hidden lg:block lg:h-6 lg:w-px lg:bg-gray-200","aria-hidden":"true"}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"text-xs font-medium text-gray-900",children:a?.username||"User"})})]})]})},uz=()=>{const[t,a]=g.useState(!1),r=Do(),s=r.pathname==="/dashboard"||r.pathname==="/dashboard/";return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[!s&&e.jsx(MB,{open:t,setOpen:a}),e.jsxs("div",{className:s?"":"lg:pl-64",children:[!s&&e.jsx(dz,{onMenuClick:()=>a(!0)}),e.jsx("main",{className:s?"":"py-6",children:e.jsx("div",{className:s?"":"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsx(XM,{})})})]})]})},mz="/assets/background-D0qtTWoM.jpeg",xz=()=>{const[t,a]=g.useState({username:"",password:""}),[r,s]=g.useState(!1),[n,i]=g.useState(""),[o,d]=g.useState(!1),{login:u,isLoading:m}=ut(),x=ga(),f=async p=>{p.preventDefault(),i(""),d(!1);try{console.log(" Attempting login...");const v=await u(t.username,t.password);console.log(" Login successful! User data:",v.user),x("/dashboard")}catch(v){console.log(" Login error:",v),i("Username or password is wrong"),d(!0)}},b=p=>{a({...t,[p.target.name]:p.target.value})};return e.jsxs("div",{className:"min-h-screen flex bg-gray-50",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-3/5 bg-gray-900 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${mz})`}}),e.jsx("div",{className:"absolute inset-0 bg-gray-900/70"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4 bg-gradient-to-r from-blue-300 to-green-300 bg-clip-text text-transparent",children:"Brooklyn Primary School"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-200",children:"SCHOOL MANAGEMENT SYSTEM"})]})}),e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-32 bg-gradient-to-l from-gray-900 to-transparent"})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-8 bg-white",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsx("div",{className:"lg:hidden text-center mb-8",children:e.jsxs("div",{className:"inline-flex items-center space-x-3 p-3 bg-blue-600 rounded-lg",children:[e.jsx(zB,{className:"h-8 w-8 text-white"}),e.jsx("span",{className:"text-xl font-bold text-white",children:"Brooklyn Primary School"})]})}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 p-8",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("p",{className:"mt-6 text-sm text-gray-600",children:"Sign in to your account"})}),e.jsxs("form",{className:"space-y-6",onSubmit:f,children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(oz,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:t.username,onChange:b,className:"block w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400 disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Enter your username",disabled:m})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(QB,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:r?"text":"password",required:!0,value:t.password,onChange:b,className:"block w-full pl-12 pr-12 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-400 disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"Enter your password",disabled:m}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition-colors duration-200",onClick:()=>s(!r),disabled:m,children:r?e.jsx(XB,{className:"h-5 w-5"}):e.jsx(JB,{className:"h-5 w-5"})})]})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:m,className:"w-full py-3 px-4 border border-transparent text-sm font-semibold rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:m?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})})]})]})]})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-6 max-w-md w-full mx-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Login Failed"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:n}),e.jsx("button",{onClick:()=>d(!1),className:"w-full bg-red-600 text-white px-4 py-2 text-sm font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Try Again"})]})})})]})},hz=()=>{const t=ga(),{user:a}=ut(),r=[{name:"Students",icon:GC,href:"/dashboard/students",description:"Manage student profiles, registrations, and personal information",requiredRoles:["admin","STUDENT_REGISTRATIONS"]},{name:"Classes",icon:BB,href:"/dashboard/classes",description:"Create and manage classes, subjects, and academic schedules",requiredRoles:["admin","CLASS_MANAGEMENT"]},{name:"Results",icon:HB,href:"/dashboard/results",description:"Enter, view, and analyze student academic performance and grades",requiredRoles:["admin","VIEW_RESULTS","ADD_RESULTS","EDIT_RESULTS","ADD_GRADES","EDIT_GRADES"]},{name:"Boarding",icon:YC,href:"/dashboard/boarding",description:"Manage hostel facilities, room assignments, and boarding enrollments",requiredRoles:["admin","BOARDING_MANAGEMENT","BOARDING_VIEW"]},{name:"Transport",icon:lz,href:"/dashboard/transport/routes",description:"Manage transport routes, student registrations, and weekly fee payments",requiredRoles:["admin","TRANSPORT_MANAGEMENT"]},{name:"Announcements",icon:ez,href:"/dashboard/announcements",description:"Create and manage announcements for students and employees",requiredRoles:["admin","user"]},{name:"Sports",icon:iz,href:"/dashboard/sports",description:"Manage sports fixtures, teams, and sports announcements",requiredRoles:["admin","teacher","user"]},{name:"Student Billing",icon:WB,href:"/dashboard/fees-payment",description:"Generate invoices, process payments, and manage fee structures",requiredRoles:["admin","STUDENT_BILLING","INVOICE_CREATE","INVOICE_VIEW","INVOICE_UPDATE","INVOICE_DELETE"]},{name:"Accounting",icon:qB,href:"/dashboard/accounting/chart-of-accounts",description:"Track financial transactions, manage accounts, and generate reports",requiredRoles:["admin","ACCOUNTING_MANAGEMENT"]},{name:"Expenses",icon:sz,href:"/dashboard/expenses/expenses",description:"Record expenses, manage suppliers, and track accounts payable",requiredRoles:["admin","ACCOUNTING_MANAGEMENT","EXPENSE_MANAGEMENT"]},{name:"Payroll",icon:KB,href:"/dashboard/payroll",description:"Create payslips and process employee payroll",requiredRoles:["admin"]},{name:"Inventory",icon:az,href:"/dashboard/inventory",description:"Track school supplies, equipment, and inventory management",requiredRoles:["admin"]},{name:"Fixed Assets",icon:cz,href:"/dashboard/assets",description:"Manage school property, vehicles, land, buildings, and equipment",requiredRoles:["admin","ACCOUNTING_MANAGEMENT"]},{name:"Financial Reports",icon:ZB,href:"/dashboard/reports/income-statement",description:"Generate comprehensive financial reports and analytics",requiredRoles:["admin","ACCOUNTING_MANAGEMENT"]},{name:"Analytics",icon:YB,href:"/dashboard/analytics/expense-analysis",description:"Interactive analytics and data visualization for insights",requiredRoles:["admin","ACCOUNTING_MANAGEMENT"]},{name:"Admin",icon:rz,href:"/dashboard/settings",description:"System administration, user management, and configuration settings",requiredRoles:["admin"]}],s=o=>!a||!a.roles?!1:a.roles.includes("admin")?!0:o.some(d=>a.roles.includes(d)),n=r.filter(o=>s(o.requiredRoles));console.log(" User roles:",a?.roles),console.log(" Filtered tabs:",n.map(o=>o.name));const i=o=>{t(o)};return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"max-w-5xl w-full",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-8 text-center",children:"Welcome to Brooklyn"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:n.map(o=>e.jsxs("button",{onClick:()=>i(o.href),className:"group relative flex flex-col items-center p-4 bg-gray-100 border-2 border-gray-300 rounded-lg text-gray-700 transition-all duration-200 hover:bg-gray-200 hover:border-gray-400 hover:shadow-lg hover:scale-105 min-h-[120px]",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 mb-3 bg-gray-200 rounded-full",children:e.jsx(o.icon,{className:"h-4 w-4 text-gray-600"})}),e.jsx("span",{className:"text-sm font-semibold text-center mb-1",children:o.name}),e.jsx("span",{className:"text-xs text-gray-600 text-center leading-tight",children:o.description})]},o.name))})]})})},fz=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full text-center",children:[e.jsx("div",{className:"mx-auto h-24 w-24 flex items-center justify-center rounded-full bg-red-100 mb-6",children:e.jsx(nz,{className:"h-12 w-12 text-red-600"})}),e.jsx("h1",{className:"text-6xl font-bold text-gray-900 mb-4",children:"404"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Page Not Found"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Sorry, the page you are looking for doesn't exist or has been moved."}),e.jsxs(Zt,{to:"/dashboard",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e.jsx(YC,{className:"h-5 w-5 mr-2"}),"Go to Dashboard"]})]})});function VC(t,a){return function(){return t.apply(a,arguments)}}const{toString:pz}=Object.prototype,{getPrototypeOf:SN}=Object,{iterator:uy,toStringTag:WC}=Symbol,my=(t=>a=>{const r=pz.call(a);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Yl=t=>(t=t.toLowerCase(),a=>my(a)===t),xy=t=>a=>typeof a===t,{isArray:Bx}=Array,wf=xy("undefined");function Hf(t){return t!==null&&!wf(t)&&t.constructor!==null&&!wf(t.constructor)&&Zn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const KC=Yl("ArrayBuffer");function gz(t){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(t):a=t&&t.buffer&&KC(t.buffer),a}const yz=xy("string"),Zn=xy("function"),XC=xy("number"),Yf=t=>t!==null&&typeof t=="object",bz=t=>t===!0||t===!1,Yp=t=>{if(my(t)!=="object")return!1;const a=SN(t);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(WC in t)&&!(uy in t)},vz=t=>{if(!Yf(t)||Hf(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},jz=Yl("Date"),Nz=Yl("File"),wz=Yl("Blob"),Sz=Yl("FileList"),_z=t=>Yf(t)&&Zn(t.pipe),Az=t=>{let a;return t&&(typeof FormData=="function"&&t instanceof FormData||Zn(t.append)&&((a=my(t))==="formdata"||a==="object"&&Zn(t.toString)&&t.toString()==="[object FormData]"))},kz=Yl("URLSearchParams"),[Cz,Ez,Tz,Pz]=["ReadableStream","Request","Response","Headers"].map(Yl),Oz=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gf(t,a,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let s,n;if(typeof t!="object"&&(t=[t]),Bx(t))for(s=0,n=t.length;s<n;s++)a.call(null,t[s],s,t);else{if(Hf(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let d;for(s=0;s<o;s++)d=i[s],a.call(null,t[d],d,t)}}function JC(t,a){if(Hf(t))return null;a=a.toLowerCase();const r=Object.keys(t);let s=r.length,n;for(;s-- >0;)if(n=r[s],a===n.toLowerCase())return n;return null}const Ru=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ZC=t=>!wf(t)&&t!==Ru;function tj(){const{caseless:t}=ZC(this)&&this||{},a={},r=(s,n)=>{const i=t&&JC(a,n)||n;Yp(a[i])&&Yp(s)?a[i]=tj(a[i],s):Yp(s)?a[i]=tj({},s):Bx(s)?a[i]=s.slice():a[i]=s};for(let s=0,n=arguments.length;s<n;s++)arguments[s]&&Gf(arguments[s],r);return a}const Dz=(t,a,r,{allOwnKeys:s}={})=>(Gf(a,(n,i)=>{r&&Zn(n)?t[i]=VC(n,r):t[i]=n},{allOwnKeys:s}),t),Lz=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Mz=(t,a,r,s)=>{t.prototype=Object.create(a.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:a.prototype}),r&&Object.assign(t.prototype,r)},Rz=(t,a,r,s)=>{let n,i,o;const d={};if(a=a||{},t==null)return a;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)o=n[i],(!s||s(o,t,a))&&!d[o]&&(a[o]=t[o],d[o]=!0);t=r!==!1&&SN(t)}while(t&&(!r||r(t,a))&&t!==Object.prototype);return a},$z=(t,a,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=a.length;const s=t.indexOf(a,r);return s!==-1&&s===r},Fz=t=>{if(!t)return null;if(Bx(t))return t;let a=t.length;if(!XC(a))return null;const r=new Array(a);for(;a-- >0;)r[a]=t[a];return r},Iz=(t=>a=>t&&a instanceof t)(typeof Uint8Array<"u"&&SN(Uint8Array)),Bz=(t,a)=>{const s=(t&&t[uy]).call(t);let n;for(;(n=s.next())&&!n.done;){const i=n.value;a.call(t,i[0],i[1])}},zz=(t,a)=>{let r;const s=[];for(;(r=t.exec(a))!==null;)s.push(r);return s},qz=Yl("HTMLFormElement"),Uz=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,n){return s.toUpperCase()+n}),P6=(({hasOwnProperty:t})=>(a,r)=>t.call(a,r))(Object.prototype),Hz=Yl("RegExp"),QC=(t,a)=>{const r=Object.getOwnPropertyDescriptors(t),s={};Gf(r,(n,i)=>{let o;(o=a(n,i,t))!==!1&&(s[i]=o||n)}),Object.defineProperties(t,s)},Yz=t=>{QC(t,(a,r)=>{if(Zn(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=t[r];if(Zn(s)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Gz=(t,a)=>{const r={},s=n=>{n.forEach(i=>{r[i]=!0})};return Bx(t)?s(t):s(String(t).split(a)),r},Vz=()=>{},Wz=(t,a)=>t!=null&&Number.isFinite(t=+t)?t:a;function Kz(t){return!!(t&&Zn(t.append)&&t[WC]==="FormData"&&t[uy])}const Xz=t=>{const a=new Array(10),r=(s,n)=>{if(Yf(s)){if(a.indexOf(s)>=0)return;if(Hf(s))return s;if(!("toJSON"in s)){a[n]=s;const i=Bx(s)?[]:{};return Gf(s,(o,d)=>{const u=r(o,n+1);!wf(u)&&(i[d]=u)}),a[n]=void 0,i}}return s};return r(t,0)},Jz=Yl("AsyncFunction"),Zz=t=>t&&(Yf(t)||Zn(t))&&Zn(t.then)&&Zn(t.catch),e9=((t,a)=>t?setImmediate:a?((r,s)=>(Ru.addEventListener("message",({source:n,data:i})=>{n===Ru&&i===r&&s.length&&s.shift()()},!1),n=>{s.push(n),Ru.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Zn(Ru.postMessage)),Qz=typeof queueMicrotask<"u"?queueMicrotask.bind(Ru):typeof process<"u"&&process.nextTick||e9,eq=t=>t!=null&&Zn(t[uy]),Ke={isArray:Bx,isArrayBuffer:KC,isBuffer:Hf,isFormData:Az,isArrayBufferView:gz,isString:yz,isNumber:XC,isBoolean:bz,isObject:Yf,isPlainObject:Yp,isEmptyObject:vz,isReadableStream:Cz,isRequest:Ez,isResponse:Tz,isHeaders:Pz,isUndefined:wf,isDate:jz,isFile:Nz,isBlob:wz,isRegExp:Hz,isFunction:Zn,isStream:_z,isURLSearchParams:kz,isTypedArray:Iz,isFileList:Sz,forEach:Gf,merge:tj,extend:Dz,trim:Oz,stripBOM:Lz,inherits:Mz,toFlatObject:Rz,kindOf:my,kindOfTest:Yl,endsWith:$z,toArray:Fz,forEachEntry:Bz,matchAll:zz,isHTMLForm:qz,hasOwnProperty:P6,hasOwnProp:P6,reduceDescriptors:QC,freezeMethods:Yz,toObjectSet:Gz,toCamelCase:Uz,noop:Vz,toFiniteNumber:Wz,findKey:JC,global:Ru,isContextDefined:ZC,isSpecCompliantForm:Kz,toJSONObject:Xz,isAsyncFn:Jz,isThenable:Zz,setImmediate:e9,asap:Qz,isIterable:eq};function ma(t,a,r,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",a&&(this.code=a),r&&(this.config=r),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}Ke.inherits(ma,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ke.toJSONObject(this.config),code:this.code,status:this.status}}});const t9=ma.prototype,a9={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{a9[t]={value:t}});Object.defineProperties(ma,a9);Object.defineProperty(t9,"isAxiosError",{value:!0});ma.from=(t,a,r,s,n,i)=>{const o=Object.create(t9);return Ke.toFlatObject(t,o,function(u){return u!==Error.prototype},d=>d!=="isAxiosError"),ma.call(o,t.message,a,r,s,n),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const tq=null;function aj(t){return Ke.isPlainObject(t)||Ke.isArray(t)}function r9(t){return Ke.endsWith(t,"[]")?t.slice(0,-2):t}function O6(t,a,r){return t?t.concat(a).map(function(n,i){return n=r9(n),!r&&i?"["+n+"]":n}).join(r?".":""):a}function aq(t){return Ke.isArray(t)&&!t.some(aj)}const rq=Ke.toFlatObject(Ke,{},null,function(a){return/^is[A-Z]/.test(a)});function hy(t,a,r){if(!Ke.isObject(t))throw new TypeError("target must be an object");a=a||new FormData,r=Ke.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,N){return!Ke.isUndefined(N[j])});const s=r.metaTokens,n=r.visitor||x,i=r.dots,o=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&Ke.isSpecCompliantForm(a);if(!Ke.isFunction(n))throw new TypeError("visitor must be a function");function m(v){if(v===null)return"";if(Ke.isDate(v))return v.toISOString();if(Ke.isBoolean(v))return v.toString();if(!u&&Ke.isBlob(v))throw new ma("Blob is not supported. Use a Buffer instead.");return Ke.isArrayBuffer(v)||Ke.isTypedArray(v)?u&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function x(v,j,N){let w=v;if(v&&!N&&typeof v=="object"){if(Ke.endsWith(j,"{}"))j=s?j:j.slice(0,-2),v=JSON.stringify(v);else if(Ke.isArray(v)&&aq(v)||(Ke.isFileList(v)||Ke.endsWith(j,"[]"))&&(w=Ke.toArray(v)))return j=r9(j),w.forEach(function(k,$){!(Ke.isUndefined(k)||k===null)&&a.append(o===!0?O6([j],$,i):o===null?j:j+"[]",m(k))}),!1}return aj(v)?!0:(a.append(O6(N,j,i),m(v)),!1)}const f=[],b=Object.assign(rq,{defaultVisitor:x,convertValue:m,isVisitable:aj});function p(v,j){if(!Ke.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+j.join("."));f.push(v),Ke.forEach(v,function(w,P){(!(Ke.isUndefined(w)||w===null)&&n.call(a,w,Ke.isString(P)?P.trim():P,j,b))===!0&&p(w,j?j.concat(P):[P])}),f.pop()}}if(!Ke.isObject(t))throw new TypeError("data must be an object");return p(t),a}function D6(t){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return a[s]})}function _N(t,a){this._pairs=[],t&&hy(t,this,a)}const s9=_N.prototype;s9.append=function(a,r){this._pairs.push([a,r])};s9.toString=function(a){const r=a?function(s){return a.call(this,s,D6)}:D6;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function sq(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function n9(t,a,r){if(!a)return t;const s=r&&r.encode||sq;Ke.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let i;if(n?i=n(a,r):i=Ke.isURLSearchParams(a)?a.toString():new _N(a,r).toString(s),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class L6{constructor(){this.handlers=[]}use(a,r,s){return this.handlers.push({fulfilled:a,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){Ke.forEach(this.handlers,function(s){s!==null&&a(s)})}}const i9={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nq=typeof URLSearchParams<"u"?URLSearchParams:_N,iq=typeof FormData<"u"?FormData:null,lq=typeof Blob<"u"?Blob:null,oq={isBrowser:!0,classes:{URLSearchParams:nq,FormData:iq,Blob:lq},protocols:["http","https","file","blob","url","data"]},AN=typeof window<"u"&&typeof document<"u",rj=typeof navigator=="object"&&navigator||void 0,cq=AN&&(!rj||["ReactNative","NativeScript","NS"].indexOf(rj.product)<0),dq=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",uq=AN&&window.location.href||"http://localhost",mq=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:AN,hasStandardBrowserEnv:cq,hasStandardBrowserWebWorkerEnv:dq,navigator:rj,origin:uq},Symbol.toStringTag,{value:"Module"})),pn={...mq,...oq};function xq(t,a){return hy(t,new pn.classes.URLSearchParams,{visitor:function(r,s,n,i){return pn.isNode&&Ke.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...a})}function hq(t){return Ke.matchAll(/\w+|\[(\w*)]/g,t).map(a=>a[0]==="[]"?"":a[1]||a[0])}function fq(t){const a={},r=Object.keys(t);let s;const n=r.length;let i;for(s=0;s<n;s++)i=r[s],a[i]=t[i];return a}function l9(t){function a(r,s,n,i){let o=r[i++];if(o==="__proto__")return!0;const d=Number.isFinite(+o),u=i>=r.length;return o=!o&&Ke.isArray(n)?n.length:o,u?(Ke.hasOwnProp(n,o)?n[o]=[n[o],s]:n[o]=s,!d):((!n[o]||!Ke.isObject(n[o]))&&(n[o]=[]),a(r,s,n[o],i)&&Ke.isArray(n[o])&&(n[o]=fq(n[o])),!d)}if(Ke.isFormData(t)&&Ke.isFunction(t.entries)){const r={};return Ke.forEachEntry(t,(s,n)=>{a(hq(s),n,r,0)}),r}return null}function pq(t,a,r){if(Ke.isString(t))try{return(a||JSON.parse)(t),Ke.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(t)}const Vf={transitional:i9,adapter:["xhr","http","fetch"],transformRequest:[function(a,r){const s=r.getContentType()||"",n=s.indexOf("application/json")>-1,i=Ke.isObject(a);if(i&&Ke.isHTMLForm(a)&&(a=new FormData(a)),Ke.isFormData(a))return n?JSON.stringify(l9(a)):a;if(Ke.isArrayBuffer(a)||Ke.isBuffer(a)||Ke.isStream(a)||Ke.isFile(a)||Ke.isBlob(a)||Ke.isReadableStream(a))return a;if(Ke.isArrayBufferView(a))return a.buffer;if(Ke.isURLSearchParams(a))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let d;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return xq(a,this.formSerializer).toString();if((d=Ke.isFileList(a))||s.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return hy(d?{"files[]":a}:a,u&&new u,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),pq(a)):a}],transformResponse:[function(a){const r=this.transitional||Vf.transitional,s=r&&r.forcedJSONParsing,n=this.responseType==="json";if(Ke.isResponse(a)||Ke.isReadableStream(a))return a;if(a&&Ke.isString(a)&&(s&&!this.responseType||n)){const o=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(a)}catch(d){if(o)throw d.name==="SyntaxError"?ma.from(d,ma.ERR_BAD_RESPONSE,this,null,this.response):d}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pn.classes.FormData,Blob:pn.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ke.forEach(["delete","get","head","post","put","patch"],t=>{Vf.headers[t]={}});const gq=Ke.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),yq=t=>{const a={};let r,s,n;return t&&t.split(`
`).forEach(function(o){n=o.indexOf(":"),r=o.substring(0,n).trim().toLowerCase(),s=o.substring(n+1).trim(),!(!r||a[r]&&gq[r])&&(r==="set-cookie"?a[r]?a[r].push(s):a[r]=[s]:a[r]=a[r]?a[r]+", "+s:s)}),a},M6=Symbol("internals");function Vh(t){return t&&String(t).trim().toLowerCase()}function Gp(t){return t===!1||t==null?t:Ke.isArray(t)?t.map(Gp):String(t)}function bq(t){const a=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(t);)a[s[1]]=s[2];return a}const vq=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Av(t,a,r,s,n){if(Ke.isFunction(s))return s.call(this,a,r);if(n&&(a=r),!!Ke.isString(a)){if(Ke.isString(s))return a.indexOf(s)!==-1;if(Ke.isRegExp(s))return s.test(a)}}function jq(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,r,s)=>r.toUpperCase()+s)}function Nq(t,a){const r=Ke.toCamelCase(" "+a);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+r,{value:function(n,i,o){return this[s].call(this,a,n,i,o)},configurable:!0})})}let Qn=class{constructor(a){a&&this.set(a)}set(a,r,s){const n=this;function i(d,u,m){const x=Vh(u);if(!x)throw new Error("header name must be a non-empty string");const f=Ke.findKey(n,x);(!f||n[f]===void 0||m===!0||m===void 0&&n[f]!==!1)&&(n[f||u]=Gp(d))}const o=(d,u)=>Ke.forEach(d,(m,x)=>i(m,x,u));if(Ke.isPlainObject(a)||a instanceof this.constructor)o(a,r);else if(Ke.isString(a)&&(a=a.trim())&&!vq(a))o(yq(a),r);else if(Ke.isObject(a)&&Ke.isIterable(a)){let d={},u,m;for(const x of a){if(!Ke.isArray(x))throw TypeError("Object iterator must return a key-value pair");d[m=x[0]]=(u=d[m])?Ke.isArray(u)?[...u,x[1]]:[u,x[1]]:x[1]}o(d,r)}else a!=null&&i(r,a,s);return this}get(a,r){if(a=Vh(a),a){const s=Ke.findKey(this,a);if(s){const n=this[s];if(!r)return n;if(r===!0)return bq(n);if(Ke.isFunction(r))return r.call(this,n,s);if(Ke.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,r){if(a=Vh(a),a){const s=Ke.findKey(this,a);return!!(s&&this[s]!==void 0&&(!r||Av(this,this[s],s,r)))}return!1}delete(a,r){const s=this;let n=!1;function i(o){if(o=Vh(o),o){const d=Ke.findKey(s,o);d&&(!r||Av(s,s[d],d,r))&&(delete s[d],n=!0)}}return Ke.isArray(a)?a.forEach(i):i(a),n}clear(a){const r=Object.keys(this);let s=r.length,n=!1;for(;s--;){const i=r[s];(!a||Av(this,this[i],i,a,!0))&&(delete this[i],n=!0)}return n}normalize(a){const r=this,s={};return Ke.forEach(this,(n,i)=>{const o=Ke.findKey(s,i);if(o){r[o]=Gp(n),delete r[i];return}const d=a?jq(i):String(i).trim();d!==i&&delete r[i],r[d]=Gp(n),s[d]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const r=Object.create(null);return Ke.forEach(this,(s,n)=>{s!=null&&s!==!1&&(r[n]=a&&Ke.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,r])=>a+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...r){const s=new this(a);return r.forEach(n=>s.set(n)),s}static accessor(a){const s=(this[M6]=this[M6]={accessors:{}}).accessors,n=this.prototype;function i(o){const d=Vh(o);s[d]||(Nq(n,o),s[d]=!0)}return Ke.isArray(a)?a.forEach(i):i(a),this}};Qn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ke.reduceDescriptors(Qn.prototype,({value:t},a)=>{let r=a[0].toUpperCase()+a.slice(1);return{get:()=>t,set(s){this[r]=s}}});Ke.freezeMethods(Qn);function kv(t,a){const r=this||Vf,s=a||r,n=Qn.from(s.headers);let i=s.data;return Ke.forEach(t,function(d){i=d.call(r,i,n.normalize(),a?a.status:void 0)}),n.normalize(),i}function o9(t){return!!(t&&t.__CANCEL__)}function zx(t,a,r){ma.call(this,t??"canceled",ma.ERR_CANCELED,a,r),this.name="CanceledError"}Ke.inherits(zx,ma,{__CANCEL__:!0});function c9(t,a,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?t(r):a(new ma("Request failed with status code "+r.status,[ma.ERR_BAD_REQUEST,ma.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function wq(t){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return a&&a[1]||""}function Sq(t,a){t=t||10;const r=new Array(t),s=new Array(t);let n=0,i=0,o;return a=a!==void 0?a:1e3,function(u){const m=Date.now(),x=s[i];o||(o=m),r[n]=u,s[n]=m;let f=i,b=0;for(;f!==n;)b+=r[f++],f=f%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),m-o<a)return;const p=x&&m-x;return p?Math.round(b*1e3/p):void 0}}function _q(t,a){let r=0,s=1e3/a,n,i;const o=(m,x=Date.now())=>{r=x,n=null,i&&(clearTimeout(i),i=null),t(...m)};return[(...m)=>{const x=Date.now(),f=x-r;f>=s?o(m,x):(n=m,i||(i=setTimeout(()=>{i=null,o(n)},s-f)))},()=>n&&o(n)]}const mg=(t,a,r=3)=>{let s=0;const n=Sq(50,250);return _q(i=>{const o=i.loaded,d=i.lengthComputable?i.total:void 0,u=o-s,m=n(u),x=o<=d;s=o;const f={loaded:o,total:d,progress:d?o/d:void 0,bytes:u,rate:m||void 0,estimated:m&&d&&x?(d-o)/m:void 0,event:i,lengthComputable:d!=null,[a?"download":"upload"]:!0};t(f)},r)},R6=(t,a)=>{const r=t!=null;return[s=>a[0]({lengthComputable:r,total:t,loaded:s}),a[1]]},$6=t=>(...a)=>Ke.asap(()=>t(...a)),Aq=pn.hasStandardBrowserEnv?((t,a)=>r=>(r=new URL(r,pn.origin),t.protocol===r.protocol&&t.host===r.host&&(a||t.port===r.port)))(new URL(pn.origin),pn.navigator&&/(msie|trident)/i.test(pn.navigator.userAgent)):()=>!0,kq=pn.hasStandardBrowserEnv?{write(t,a,r,s,n,i){const o=[t+"="+encodeURIComponent(a)];Ke.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),Ke.isString(s)&&o.push("path="+s),Ke.isString(n)&&o.push("domain="+n),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const a=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Cq(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Eq(t,a){return a?t.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):t}function d9(t,a,r){let s=!Cq(a);return t&&(s||r==!1)?Eq(t,a):a}const F6=t=>t instanceof Qn?{...t}:t;function tm(t,a){a=a||{};const r={};function s(m,x,f,b){return Ke.isPlainObject(m)&&Ke.isPlainObject(x)?Ke.merge.call({caseless:b},m,x):Ke.isPlainObject(x)?Ke.merge({},x):Ke.isArray(x)?x.slice():x}function n(m,x,f,b){if(Ke.isUndefined(x)){if(!Ke.isUndefined(m))return s(void 0,m,f,b)}else return s(m,x,f,b)}function i(m,x){if(!Ke.isUndefined(x))return s(void 0,x)}function o(m,x){if(Ke.isUndefined(x)){if(!Ke.isUndefined(m))return s(void 0,m)}else return s(void 0,x)}function d(m,x,f){if(f in a)return s(m,x);if(f in t)return s(void 0,m)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:d,headers:(m,x,f)=>n(F6(m),F6(x),f,!0)};return Ke.forEach(Object.keys({...t,...a}),function(x){const f=u[x]||n,b=f(t[x],a[x],x);Ke.isUndefined(b)&&f!==d||(r[x]=b)}),r}const u9=t=>{const a=tm({},t);let{data:r,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:d}=a;a.headers=o=Qn.from(o),a.url=n9(d9(a.baseURL,a.url,a.allowAbsoluteUrls),t.params,t.paramsSerializer),d&&o.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let u;if(Ke.isFormData(r)){if(pn.hasStandardBrowserEnv||pn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[m,...x]=u?u.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([m||"multipart/form-data",...x].join("; "))}}if(pn.hasStandardBrowserEnv&&(s&&Ke.isFunction(s)&&(s=s(a)),s||s!==!1&&Aq(a.url))){const m=n&&i&&kq.read(i);m&&o.set(n,m)}return a},Tq=typeof XMLHttpRequest<"u",Pq=Tq&&function(t){return new Promise(function(r,s){const n=u9(t);let i=n.data;const o=Qn.from(n.headers).normalize();let{responseType:d,onUploadProgress:u,onDownloadProgress:m}=n,x,f,b,p,v;function j(){p&&p(),v&&v(),n.cancelToken&&n.cancelToken.unsubscribe(x),n.signal&&n.signal.removeEventListener("abort",x)}let N=new XMLHttpRequest;N.open(n.method.toUpperCase(),n.url,!0),N.timeout=n.timeout;function w(){if(!N)return;const k=Qn.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),O={data:!d||d==="text"||d==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:k,config:t,request:N};c9(function(_){r(_),j()},function(_){s(_),j()},O),N=null}"onloadend"in N?N.onloadend=w:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(w)},N.onabort=function(){N&&(s(new ma("Request aborted",ma.ECONNABORTED,t,N)),N=null)},N.onerror=function(){s(new ma("Network Error",ma.ERR_NETWORK,t,N)),N=null},N.ontimeout=function(){let $=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const O=n.transitional||i9;n.timeoutErrorMessage&&($=n.timeoutErrorMessage),s(new ma($,O.clarifyTimeoutError?ma.ETIMEDOUT:ma.ECONNABORTED,t,N)),N=null},i===void 0&&o.setContentType(null),"setRequestHeader"in N&&Ke.forEach(o.toJSON(),function($,O){N.setRequestHeader(O,$)}),Ke.isUndefined(n.withCredentials)||(N.withCredentials=!!n.withCredentials),d&&d!=="json"&&(N.responseType=n.responseType),m&&([b,v]=mg(m,!0),N.addEventListener("progress",b)),u&&N.upload&&([f,p]=mg(u),N.upload.addEventListener("progress",f),N.upload.addEventListener("loadend",p)),(n.cancelToken||n.signal)&&(x=k=>{N&&(s(!k||k.type?new zx(null,t,N):k),N.abort(),N=null)},n.cancelToken&&n.cancelToken.subscribe(x),n.signal&&(n.signal.aborted?x():n.signal.addEventListener("abort",x)));const P=wq(n.url);if(P&&pn.protocols.indexOf(P)===-1){s(new ma("Unsupported protocol "+P+":",ma.ERR_BAD_REQUEST,t));return}N.send(i||null)})},Oq=(t,a)=>{const{length:r}=t=t?t.filter(Boolean):[];if(a||r){let s=new AbortController,n;const i=function(m){if(!n){n=!0,d();const x=m instanceof Error?m:this.reason;s.abort(x instanceof ma?x:new zx(x instanceof Error?x.message:x))}};let o=a&&setTimeout(()=>{o=null,i(new ma(`timeout ${a} of ms exceeded`,ma.ETIMEDOUT))},a);const d=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(m=>{m.unsubscribe?m.unsubscribe(i):m.removeEventListener("abort",i)}),t=null)};t.forEach(m=>m.addEventListener("abort",i));const{signal:u}=s;return u.unsubscribe=()=>Ke.asap(d),u}},Dq=function*(t,a){let r=t.byteLength;if(r<a){yield t;return}let s=0,n;for(;s<r;)n=s+a,yield t.slice(s,n),s=n},Lq=async function*(t,a){for await(const r of Mq(t))yield*Dq(r,a)},Mq=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const a=t.getReader();try{for(;;){const{done:r,value:s}=await a.read();if(r)break;yield s}}finally{await a.cancel()}},I6=(t,a,r,s)=>{const n=Lq(t,a);let i=0,o,d=u=>{o||(o=!0,s&&s(u))};return new ReadableStream({async pull(u){try{const{done:m,value:x}=await n.next();if(m){d(),u.close();return}let f=x.byteLength;if(r){let b=i+=f;r(b)}u.enqueue(new Uint8Array(x))}catch(m){throw d(m),m}},cancel(u){return d(u),n.return()}},{highWaterMark:2})},fy=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",m9=fy&&typeof ReadableStream=="function",Rq=fy&&(typeof TextEncoder=="function"?(t=>a=>t.encode(a))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),x9=(t,...a)=>{try{return!!t(...a)}catch{return!1}},$q=m9&&x9(()=>{let t=!1;const a=new Request(pn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!a}),B6=64*1024,sj=m9&&x9(()=>Ke.isReadableStream(new Response("").body)),xg={stream:sj&&(t=>t.body)};fy&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(a=>{!xg[a]&&(xg[a]=Ke.isFunction(t[a])?r=>r[a]():(r,s)=>{throw new ma(`Response type '${a}' is not supported`,ma.ERR_NOT_SUPPORT,s)})})})(new Response);const Fq=async t=>{if(t==null)return 0;if(Ke.isBlob(t))return t.size;if(Ke.isSpecCompliantForm(t))return(await new Request(pn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Ke.isArrayBufferView(t)||Ke.isArrayBuffer(t))return t.byteLength;if(Ke.isURLSearchParams(t)&&(t=t+""),Ke.isString(t))return(await Rq(t)).byteLength},Iq=async(t,a)=>{const r=Ke.toFiniteNumber(t.getContentLength());return r??Fq(a)},Bq=fy&&(async t=>{let{url:a,method:r,data:s,signal:n,cancelToken:i,timeout:o,onDownloadProgress:d,onUploadProgress:u,responseType:m,headers:x,withCredentials:f="same-origin",fetchOptions:b}=u9(t);m=m?(m+"").toLowerCase():"text";let p=Oq([n,i&&i.toAbortSignal()],o),v;const j=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let N;try{if(u&&$q&&r!=="get"&&r!=="head"&&(N=await Iq(x,s))!==0){let O=new Request(a,{method:"POST",body:s,duplex:"half"}),L;if(Ke.isFormData(s)&&(L=O.headers.get("content-type"))&&x.setContentType(L),O.body){const[_,E]=R6(N,mg($6(u)));s=I6(O.body,B6,_,E)}}Ke.isString(f)||(f=f?"include":"omit");const w="credentials"in Request.prototype;v=new Request(a,{...b,signal:p,method:r.toUpperCase(),headers:x.normalize().toJSON(),body:s,duplex:"half",credentials:w?f:void 0});let P=await fetch(v,b);const k=sj&&(m==="stream"||m==="response");if(sj&&(d||k&&j)){const O={};["status","statusText","headers"].forEach(A=>{O[A]=P[A]});const L=Ke.toFiniteNumber(P.headers.get("content-length")),[_,E]=d&&R6(L,mg($6(d),!0))||[];P=new Response(I6(P.body,B6,_,()=>{E&&E(),j&&j()}),O)}m=m||"text";let $=await xg[Ke.findKey(xg,m)||"text"](P,t);return!k&&j&&j(),await new Promise((O,L)=>{c9(O,L,{data:$,headers:Qn.from(P.headers),status:P.status,statusText:P.statusText,config:t,request:v})})}catch(w){throw j&&j(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new ma("Network Error",ma.ERR_NETWORK,t,v),{cause:w.cause||w}):ma.from(w,w&&w.code,t,v)}}),nj={http:tq,xhr:Pq,fetch:Bq};Ke.forEach(nj,(t,a)=>{if(t){try{Object.defineProperty(t,"name",{value:a})}catch{}Object.defineProperty(t,"adapterName",{value:a})}});const z6=t=>`- ${t}`,zq=t=>Ke.isFunction(t)||t===null||t===!1,h9={getAdapter:t=>{t=Ke.isArray(t)?t:[t];const{length:a}=t;let r,s;const n={};for(let i=0;i<a;i++){r=t[i];let o;if(s=r,!zq(r)&&(s=nj[(o=String(r)).toLowerCase()],s===void 0))throw new ma(`Unknown adapter '${o}'`);if(s)break;n[o||"#"+i]=s}if(!s){const i=Object.entries(n).map(([d,u])=>`adapter ${d} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=a?i.length>1?`since :
`+i.map(z6).join(`
`):" "+z6(i[0]):"as no adapter specified";throw new ma("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:nj};function Cv(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new zx(null,t)}function q6(t){return Cv(t),t.headers=Qn.from(t.headers),t.data=kv.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),h9.getAdapter(t.adapter||Vf.adapter)(t).then(function(s){return Cv(t),s.data=kv.call(t,t.transformResponse,s),s.headers=Qn.from(s.headers),s},function(s){return o9(s)||(Cv(t),s&&s.response&&(s.response.data=kv.call(t,t.transformResponse,s.response),s.response.headers=Qn.from(s.response.headers))),Promise.reject(s)})}const f9="1.11.0",py={};["object","boolean","number","function","string","symbol"].forEach((t,a)=>{py[t]=function(s){return typeof s===t||"a"+(a<1?"n ":" ")+t}});const U6={};py.transitional=function(a,r,s){function n(i,o){return"[Axios v"+f9+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,d)=>{if(a===!1)throw new ma(n(o," has been removed"+(r?" in "+r:"")),ma.ERR_DEPRECATED);return r&&!U6[o]&&(U6[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),a?a(i,o,d):!0}};py.spelling=function(a){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${a}`),!0)};function qq(t,a,r){if(typeof t!="object")throw new ma("options must be an object",ma.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let n=s.length;for(;n-- >0;){const i=s[n],o=a[i];if(o){const d=t[i],u=d===void 0||o(d,i,t);if(u!==!0)throw new ma("option "+i+" must be "+u,ma.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ma("Unknown option "+i,ma.ERR_BAD_OPTION)}}const Vp={assertOptions:qq,validators:py},yo=Vp.validators;let Uu=class{constructor(a){this.defaults=a||{},this.interceptors={request:new L6,response:new L6}}async request(a,r){try{return await this._request(a,r)}catch(s){if(s instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(a,r){typeof a=="string"?(r=r||{},r.url=a):r=a||{},r=tm(this.defaults,r);const{transitional:s,paramsSerializer:n,headers:i}=r;s!==void 0&&Vp.assertOptions(s,{silentJSONParsing:yo.transitional(yo.boolean),forcedJSONParsing:yo.transitional(yo.boolean),clarifyTimeoutError:yo.transitional(yo.boolean)},!1),n!=null&&(Ke.isFunction(n)?r.paramsSerializer={serialize:n}:Vp.assertOptions(n,{encode:yo.function,serialize:yo.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Vp.assertOptions(r,{baseUrl:yo.spelling("baseURL"),withXsrfToken:yo.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&Ke.merge(i.common,i[r.method]);i&&Ke.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),r.headers=Qn.concat(o,i);const d=[];let u=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(r)===!1||(u=u&&j.synchronous,d.unshift(j.fulfilled,j.rejected))});const m=[];this.interceptors.response.forEach(function(j){m.push(j.fulfilled,j.rejected)});let x,f=0,b;if(!u){const v=[q6.bind(this),void 0];for(v.unshift(...d),v.push(...m),b=v.length,x=Promise.resolve(r);f<b;)x=x.then(v[f++],v[f++]);return x}b=d.length;let p=r;for(f=0;f<b;){const v=d[f++],j=d[f++];try{p=v(p)}catch(N){j.call(this,N);break}}try{x=q6.call(this,p)}catch(v){return Promise.reject(v)}for(f=0,b=m.length;f<b;)x=x.then(m[f++],m[f++]);return x}getUri(a){a=tm(this.defaults,a);const r=d9(a.baseURL,a.url,a.allowAbsoluteUrls);return n9(r,a.params,a.paramsSerializer)}};Ke.forEach(["delete","get","head","options"],function(a){Uu.prototype[a]=function(r,s){return this.request(tm(s||{},{method:a,url:r,data:(s||{}).data}))}});Ke.forEach(["post","put","patch"],function(a){function r(s){return function(i,o,d){return this.request(tm(d||{},{method:a,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Uu.prototype[a]=r(),Uu.prototype[a+"Form"]=r(!0)});let Uq=class p9{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(n=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](n);s._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(d=>{s.subscribe(d),i=d}).then(n);return o.cancel=function(){s.unsubscribe(i)},o},a(function(i,o,d){s.reason||(s.reason=new zx(i,o,d),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const r=this._listeners.indexOf(a);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const a=new AbortController,r=s=>{a.abort(s)};return this.subscribe(r),a.signal.unsubscribe=()=>this.unsubscribe(r),a.signal}static source(){let a;return{token:new p9(function(n){a=n}),cancel:a}}};function Hq(t){return function(r){return t.apply(null,r)}}function Yq(t){return Ke.isObject(t)&&t.isAxiosError===!0}const ij={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ij).forEach(([t,a])=>{ij[a]=t});function g9(t){const a=new Uu(t),r=VC(Uu.prototype.request,a);return Ke.extend(r,Uu.prototype,a,{allOwnKeys:!0}),Ke.extend(r,a,null,{allOwnKeys:!0}),r.create=function(n){return g9(tm(t,n))},r}const ne=g9(Vf);ne.Axios=Uu;ne.CanceledError=zx;ne.CancelToken=Uq;ne.isCancel=o9;ne.VERSION=f9;ne.toFormData=hy;ne.AxiosError=ma;ne.Cancel=ne.CanceledError;ne.all=function(a){return Promise.all(a)};ne.spread=Hq;ne.isAxiosError=Yq;ne.mergeConfig=tm;ne.AxiosHeaders=Qn;ne.formToJSON=t=>l9(Ke.isHTMLForm(t)?new FormData(t):t);ne.getAdapter=h9.getAdapter;ne.HttpStatusCode=ij;ne.default=ne;const{Axios:rue,AxiosError:sue,CanceledError:nue,isCancel:iue,CancelToken:lue,VERSION:oue,all:cue,Cancel:due,isAxiosError:uue,spread:mue,toFormData:xue,AxiosHeaders:hue,HttpStatusCode:fue,formToJSON:pue,getAdapter:gue,mergeConfig:yue}=ne,Gq=()=>{const{token:t}=ut(),[a,r]=g.useState([]),[s,n]=g.useState(!0),[i,o]=g.useState(null),[d,u]=g.useState(""),[m,x]=g.useState(""),[f,b]=g.useState(1),[p,v]=g.useState(1),[j,N]=g.useState(0),[w]=g.useState(10);g.useEffect(()=>{P()},[f,m]);const P=async()=>{try{if(n(!0),o(null),m&&m.trim()!==""){console.log(" Searching for:",m);const _=(await ne.get(`${ie}/students/search`,{params:{query:m.trim()},headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data;console.log(" Search results:",_),r(_.data||[]),v(1),N(_.totalResults||0)}else{console.log(" Fetching page:",f);const _=(await ne.get(`${ie}/students`,{params:{page:f,limit:w},headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data;console.log(" Pagination data:",_.pagination),console.log(" Raw response:",_);const E=_.pagination?.totalPages||1,A=_.pagination?.totalStudents||0;console.log(" Setting totalPages:",E,"totalStudents:",A),r(_.data||[]),v(E),N(A)}}catch(L){console.error("Error fetching students:",L),L.response?o(`Error: ${L.response.status} - ${L.response.data?.message||L.response.statusText}`):L.request?o("No response from server. Please check your connection."):o(`Error: ${L.message}`)}finally{n(!1)}},k=L=>{L.preventDefault(),console.log(" Starting search with term:",d),x(d),b(1)},$=()=>{console.log(" Clearing search"),u(""),x(""),b(1)},O=async L=>{if(window.confirm("Are you sure you want to delete this student?"))try{await ne.delete(`${ie}/students/${L}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),P()}catch(_){console.error("Error deleting student:",_),_.response?o(`Failed to delete student: ${_.response.status} - ${_.response.data?.message||_.response.statusText}`):_.request?o("No response from server. Please check your connection."):o(`Error: ${_.message}`)}};return s&&a.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading students..."})}):e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:flex sm:items-center",children:[e.jsxs("div",{className:"sm:flex-auto",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Students"}),e.jsx("p",{className:"mt-2 text-xs text-gray-700",children:"Manage student registrations and information"})]}),e.jsx("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none",children:e.jsxs(Zt,{to:"/dashboard/students/add",className:"inline-flex items-center justify-center border border-transparent bg-gray-700 px-3 py-1.5 text-xs font-medium text-white shadow-sm hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 sm:w-auto",children:[e.jsx(R,{icon:Ot,className:"mr-2"}),"Add Student"]})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("form",{onSubmit:k,className:"flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(R,{icon:aa,className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"text",value:d,onChange:L=>u(L.target.value),placeholder:"Search by name, surname, or registration number...",className:"block w-full pl-10 pr-10 py-1.5 border border-gray-300 leading-5 bg-white placeholder-gray-400 focus:outline-none focus:placeholder-gray-300 focus:ring-1 focus:ring-gray-500 focus:border-gray-500 text-xs"}),d&&e.jsx("button",{type:"button",onClick:$,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:e.jsx("span",{className:"text-xs",children:""})})]})}),e.jsx("button",{type:"submit",className:"inline-flex items-center justify-center px-3 py-1.5 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:e.jsx(R,{icon:aa,className:"h-3 w-3"})})]}),m&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[s?"Searching...":`Found ${j} results for "${m}"`,e.jsx("button",{onClick:$,className:"ml-2 text-blue-600 hover:text-blue-800 underline",children:"Clear search"})]})]}),i&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("div",{className:"text-sm text-red-600",children:i})}),e.jsx("div",{className:"mt-8 flex flex-col",children:e.jsx("div",{className:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{className:"bg-gray-100/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Reg Number"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Surname"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Gender"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(L=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900 font-mono",children:L.RegNumber})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:L.Name})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:L.Surname})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:L.Gender||"N/A"})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:L.Active||"Unknown"})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Zt,{to:`/dashboard/students/view/${L.RegNumber}`,className:"text-blue-600 hover:text-blue-900",children:e.jsx(R,{icon:Ma,className:"h-4 w-4"})}),e.jsx(Zt,{to:`/dashboard/students/edit/${L.RegNumber}`,className:"text-indigo-600 hover:text-indigo-900",children:e.jsx(R,{icon:ha,className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>O(L.RegNumber),className:"text-red-600 hover:text-red-900",children:e.jsx(R,{icon:Yt,className:"h-4 w-4"})})]})})]},L.RegNumber))})]})})})})}),(console.log(" Pagination check - activeSearchTerm:",m,"totalPages:",p,"should show:",!m&&p>1),null),!m&&(p>1||!1)&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-700",children:["Showing page ",f," of ",p," (",j," total students)"]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>b(Math.max(1,f-1)),disabled:f===1,className:"px-2 py-1 text-xs font-medium text-gray-500 bg-white border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(()=>{const L=[],_=Math.max(1,f-2),E=Math.min(p,f+2);_>1&&(L.push(e.jsx("button",{onClick:()=>b(1),className:"px-2 py-1 text-xs font-medium text-gray-500 bg-white border border-gray-300 hover:bg-gray-50",children:"1"},1)),_>2&&L.push(e.jsx("span",{className:"px-1 text-xs text-gray-400",children:"..."},"dots1")));for(let A=_;A<=E;A++)L.push(e.jsx("button",{onClick:()=>b(A),className:`px-2 py-1 text-xs font-medium border ${A===f?"bg-gray-700 text-white border-gray-700":"text-gray-500 bg-white border-gray-300 hover:bg-gray-50"}`,children:A},A));return E<p&&(E<p-1&&L.push(e.jsx("span",{className:"px-1 text-xs text-gray-400",children:"..."},"dots2")),L.push(e.jsx("button",{onClick:()=>b(p),className:"px-2 py-1 text-xs font-medium text-gray-500 bg-white border border-gray-300 hover:bg-gray-50",children:p},p))),L})(),e.jsx("button",{onClick:()=>b(Math.min(p,f+1)),disabled:f===p,className:"px-2 py-1 text-xs font-medium text-gray-500 bg-white border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})},Vq=()=>{const t=ga(),{token:a}=ut(),[r,s]=g.useState(!1),[n,i]=g.useState(null),[o,d]=g.useState(!1),[u,m]=g.useState(!1),[x,f]=g.useState(null),[b,p]=g.useState(!1),[v,j]=g.useState(null),[N,w]=g.useState({regNumber:"",name:"",surname:"",dateOfBirth:"",nationalIDNumber:"",address:"",gender:"",active:"Yes",guardianName:"",guardianSurname:"",guardianNationalIDNumber:"",guardianPhoneNumber:"",relationshipToStudent:""}),P=A=>{const{name:z,value:M}=A.target;w(D=>({...D,[z]:M}))},k=()=>{w({regNumber:"",name:"",surname:"",dateOfBirth:"",nationalIDNumber:"",address:"",gender:"",active:"Yes",guardianName:"",guardianSurname:"",guardianNationalIDNumber:"",guardianPhoneNumber:"",relationshipToStudent:""}),i(null)},$=()=>{const A=Math.floor(Math.random()*1e5).toString().padStart(5,"0"),z="ABCDEFGHIJKLMNOPQRSTUVWXYZ",M=z[Math.floor(Math.random()*z.length)];return`R${A}${M}`},O=async A=>{try{return(await ne.get(`${ie}/students/${A}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).status===200}catch(z){if(z.response&&z.response.status===404)return!1;throw z}},L=async()=>{d(!0),i(null);try{let A,z=0;const M=10;do if(A=$(),z++,z>=M)throw new Error("Unable to generate unique registration number. Please try again.");while(await O(A));w(D=>({...D,regNumber:A}))}catch(A){console.error("Error generating registration number:",A),i(`Error generating registration number: ${A.message}`)}finally{d(!1)}},_=async A=>{A.preventDefault(),s(!0),i(null);try{const M=(await ne.post(`${ie}/students`,N,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data;f(M.data),m(!0),k()}catch(z){console.error("Error adding student:",z);let M="An unexpected error occurred",D="general",I="";if(z.response){const V=z.response.data,H=z.response.status;if(V?.errorType&&V?.error)M=V.error,D=V.errorType,V.field==="regNumber"?I="Registration Number":V.field==="nationalIDNumber"?I="National ID Number":V.field&&(I=V.field);else if(H===500&&V?.error){const B=V.error.toLowerCase();B.includes("duplicate entry")&&B.includes("regnumber")?(M="A student with this registration number already exists. Please use a different registration number.",D="duplicate",I="Registration Number"):B.includes("duplicate entry")&&B.includes("nationalidnumber")?(M="National ID number already exists. A student with this National ID is already registered.",D="duplicate",I="National ID Number"):B.includes("duplicate entry")?(M="This information already exists in the system. Please check your entries and try again.",D="duplicate",I="Duplicate Data"):(M=V.error||"Database error occurred",D="database")}else M=V?.error||`Server Error (${H}): ${z.response.statusText}`,D="server"}else z.request?(M="No response from server. Please check your internet connection and try again.",D="network"):(M=z.message||"An unexpected error occurred",D="general");j({message:M,type:D,field:I,originalError:z.response?.data?.error||z.message}),p(!0)}finally{s(!1)}},E=()=>N.regNumber&&N.name&&N.surname&&N.dateOfBirth&&N.gender&&N.guardianName&&N.guardianSurname&&N.guardianPhoneNumber;return e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[u&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-green-100 rounded-full",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mt-4",children:"Student Added Successfully!"}),e.jsx("div",{className:"mt-2 px-7 py-3",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Student ",e.jsxs("strong",{children:[x?.name," ",x?.surname]})," has been successfully registered with registration number ",e.jsx("strong",{children:x?.regNumber}),"."]})}),e.jsxs("div",{className:"items-center px-4 py-3",children:[e.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 bg-gray-700 text-white text-xs font-medium hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 w-full",children:"Add Another Student"}),e.jsx("button",{onClick:()=>{m(!1),t("/dashboard/students")},className:"mt-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 text-xs font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 w-full",children:"View All Students"})]})]})})}),b&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-red-100 rounded-full",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mt-4",children:v?.type==="duplicate"?"Duplicate Information":v?.type==="network"?"Connection Error":v?.type==="database"?"Database Error":"Error Adding Student"}),e.jsxs("div",{className:"mt-2 px-7 py-3",children:[e.jsx("p",{className:"text-xs text-gray-700 mb-3",children:v?.message}),v?.field&&e.jsxs("p",{className:"text-xs text-red-600 font-medium",children:["Field: ",v.field]}),v?.type==="duplicate"&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Please check your information and try again."})]}),e.jsxs("div",{className:"items-center px-4 py-3",children:[e.jsx("button",{onClick:()=>{p(!1),j(null)},className:"px-4 py-2 bg-red-600 text-white text-xs font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 w-full",children:"Close"}),v?.type==="duplicate"&&v?.field==="Registration Number"&&e.jsx("button",{onClick:()=>{p(!1),j(null),L()},className:"mt-2 px-4 py-2 bg-gray-700 text-white text-xs font-medium hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 w-full",children:"Generate New Registration Number"})]})]})})}),e.jsx("div",{className:"sm:flex sm:items-center",children:e.jsx("div",{className:"sm:flex-auto",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-semibold text-gray-900",children:"Add New Student"}),e.jsx("p",{className:"mt-2 text-xs text-gray-700",children:"Register a new student with guardian information"})]})})}),n&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 p-4",children:e.jsx("div",{className:"text-sm text-red-600",children:n})}),e.jsxs("form",{onSubmit:_,className:"mt-8 space-y-8",children:[e.jsxs("div",{className:"bg-white overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"px-4 py-5 sm:px-6",children:e.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 flex items-center",children:[e.jsx(R,{icon:Mr,className:"mr-2 text-blue-600"}),"Student Information"]})}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsx("div",{className:"px-4 py-5 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"regNumber",className:"block text-xs font-medium text-gray-600",children:["Registration Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"mt-1 flex",children:[e.jsx("input",{type:"text",name:"regNumber",id:"regNumber",required:!0,value:N.regNumber,onChange:P,className:"flex-1 border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Enter manually or generate"}),e.jsx("button",{type:"button",onClick:L,disabled:o,className:"ml-2 inline-flex items-center justify-center border border-transparent bg-gray-700 px-3 py-2 text-xs font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Generating...":"Generate"})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"name",className:"block text-xs font-medium text-gray-600",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",id:"name",required:!0,value:N.name,onChange:P,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"First name"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"surname",className:"block text-xs font-medium text-gray-600",children:["Surname ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"surname",id:"surname",required:!0,value:N.surname,onChange:P,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Surname"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"dateOfBirth",className:"block text-xs font-medium text-gray-600",children:["Date of Birth ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"dateOfBirth",id:"dateOfBirth",required:!0,value:N.dateOfBirth,onChange:P,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"nationalIDNumber",className:"block text-xs font-medium text-gray-600",children:"National ID Number"}),e.jsx("input",{type:"text",name:"nationalIDNumber",id:"nationalIDNumber",value:N.nationalIDNumber,onChange:P,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"National ID"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"gender",className:"block text-xs font-medium text-gray-600",children:["Gender ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"gender",id:"gender",required:!0,value:N.gender,onChange:P,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"address",className:"block text-xs font-medium text-gray-600",children:"Address"}),e.jsx("input",{type:"text",name:"address",id:"address",value:N.address,onChange:P,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Full address"})]})]})})})]}),e.jsxs("div",{className:"bg-white overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"px-4 py-5 sm:px-6",children:e.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 flex items-center",children:[e.jsx(R,{icon:Mr,className:"mr-2 text-green-600"}),"Guardian Information"]})}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsx("div",{className:"px-4 py-5 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-3",children:[e.jsxs("label",{htmlFor:"guardianName",className:"block text-xs font-medium text-gray-600",children:["Guardian First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"guardianName",id:"guardianName",required:!0,value:N.guardianName,onChange:P,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Guardian first name"})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsxs("label",{htmlFor:"guardianSurname",className:"block text-xs font-medium text-gray-600",children:["Guardian Surname ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"guardianSurname",id:"guardianSurname",required:!0,value:N.guardianSurname,onChange:P,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Guardian surname"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"guardianNationalIDNumber",className:"block text-xs font-medium text-gray-600",children:"Guardian National ID (Optional)"}),e.jsx("input",{type:"text",name:"guardianNationalIDNumber",id:"guardianNationalIDNumber",value:N.guardianNationalIDNumber,onChange:P,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Guardian national ID"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"relationshipToStudent",className:"block text-xs font-medium text-gray-600",children:"Relationship to Student"}),e.jsx("input",{type:"text",name:"relationshipToStudent",id:"relationshipToStudent",value:N.relationshipToStudent,onChange:P,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"e.g., Father, Mother, Uncle, Aunt"})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsxs("label",{htmlFor:"guardianPhoneNumber",className:"block text-xs font-medium text-gray-600",children:["Guardian Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",name:"guardianPhoneNumber",id:"guardianPhoneNumber",required:!0,value:N.guardianPhoneNumber,onChange:P,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Phone number"})]})]})})})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsxs(Zt,{to:"/dashboard/students",className:"inline-flex items-center justify-center border border-gray-300 bg-white px-3 py-1.5 text-xs font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 sm:w-auto",children:[e.jsx(R,{icon:Bt,className:"mr-2"}),"Cancel"]}),e.jsxs("button",{type:"submit",disabled:!E()||r,className:"inline-flex items-center justify-center border border-transparent bg-gray-700 px-3 py-1.5 text-xs font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(R,{icon:Er,className:"mr-2"}),r?"Saving...":"Save Student"]})]})]})]})},Wq=()=>{const{id:t}=ln(),a=ga(),{token:r}=ut(),[s,n]=g.useState(!0),[i,o]=g.useState(!1),[d,u]=g.useState(null),[m,x]=g.useState(null),[f,b]=g.useState(!1),[p,v]=g.useState({regNumber:"",name:"",surname:"",dateOfBirth:"",nationalIDNumber:"",address:"",gender:"",active:"Yes",guardianName:"",guardianSurname:"",guardianNationalIDNumber:"",guardianPhoneNumber:"",relationshipToStudent:""});g.useEffect(()=>{j()},[t]);const j=async()=>{try{n(!0),u(null),console.log(" Fetching student for edit with regNumber:",t);const $=(await ne.get(`${ie}/students/${t}`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data;console.log(" Student data for edit:",$.data),x($.data);const O=$.data,L=O.guardians?.[0];v({regNumber:O.RegNumber||"",name:O.Name||"",surname:O.Surname||"",dateOfBirth:O.DateOfBirth?O.DateOfBirth.split("T")[0]:"",nationalIDNumber:O.NationalIDNumber||"",address:O.Address||"",gender:O.Gender||"",active:O.Active==="Active"?"Yes":O.Active==="Inactive"?"No":O.Active||"Yes",guardianName:L?.Name||"",guardianSurname:L?.Surname||"",guardianNationalIDNumber:L?.NationalIDNumber||"",guardianPhoneNumber:L?.PhoneNumber||"",relationshipToStudent:L?.RelationshipToStudent||""})}catch(k){console.error("Error fetching student for edit:",k),k.response?k.response.status===404?u("Student not found"):u(`Error: ${k.response.status} - ${k.response.data?.message||k.response.statusText}`):k.request?u("No response from server. Please check your connection."):u(`Error: ${k.message}`)}finally{n(!1)}},N=k=>{const{name:$,value:O}=k.target;v(L=>({...L,[$]:O}))},w=async k=>{k.preventDefault(),o(!0),u(null);try{console.log(" Saving student data:",p);const $=await ne.put(`${ie}/students/${t}`,p,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});console.log(" Student updated successfully:",$.data),b(!0)}catch($){if(console.error("Error updating student:",$),$.response){const O=$.response.data;u(O?.error||`Failed to update student: ${$.response.status}`)}else $.request?u("No response from server. Please check your connection."):u(`Error: ${$.message}`)}finally{o(!1)}},P=()=>p.regNumber&&p.name&&p.surname&&p.dateOfBirth&&p.gender&&p.guardianName&&p.guardianSurname&&p.guardianPhoneNumber;return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading student information..."})}):d?e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-red-50 border border-red-200 p-4",children:e.jsx("div",{className:"text-sm text-red-600",children:d})})}):m?e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Edit Student"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[m.Name," ",m.Surname," - ",m.RegNumber]})]})})}),d&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 p-4",children:e.jsx("div",{className:"text-sm text-red-600",children:d})}),e.jsxs("form",{onSubmit:w,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 sm:px-6",children:e.jsxs("h3",{className:"text-sm leading-6 font-medium text-gray-900 flex items-center",children:[e.jsx(R,{icon:Mr,className:"mr-2 text-blue-600"}),"Student Information"]})}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsx("div",{className:"px-4 py-5 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"regNumber",className:"block text-xs font-medium text-gray-600",children:["Registration Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"regNumber",id:"regNumber",required:!0,value:p.regNumber,onChange:N,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"e.g., ST001"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"name",className:"block text-xs font-medium text-gray-600",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",id:"name",required:!0,value:p.name,onChange:N,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"First name"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"surname",className:"block text-xs font-medium text-gray-600",children:["Surname ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"surname",id:"surname",required:!0,value:p.surname,onChange:N,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"Surname"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"dateOfBirth",className:"block text-xs font-medium text-gray-600",children:["Date of Birth ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"dateOfBirth",id:"dateOfBirth",required:!0,value:p.dateOfBirth,onChange:N,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"nationalIDNumber",className:"block text-xs font-medium text-gray-600",children:"National ID Number"}),e.jsx("input",{type:"text",name:"nationalIDNumber",id:"nationalIDNumber",value:p.nationalIDNumber,onChange:N,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"National ID"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"gender",className:"block text-xs font-medium text-gray-600",children:["Gender ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"gender",id:"gender",required:!0,value:p.gender,onChange:N,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"address",className:"block text-xs font-medium text-gray-600",children:"Address"}),e.jsx("input",{type:"text",name:"address",id:"address",value:p.address,onChange:N,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"Full address"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"active",className:"block text-xs font-medium text-gray-600",children:"Status"}),e.jsxs("select",{name:"active",id:"active",value:p.active,onChange:N,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"Yes",children:"Yes"}),e.jsx("option",{value:"No",children:"No"})]})]})]})})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 sm:px-6",children:e.jsxs("h3",{className:"text-sm leading-6 font-medium text-gray-900 flex items-center",children:[e.jsx(R,{icon:Mr,className:"mr-2 text-green-600"}),"Guardian Information"]})}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsx("div",{className:"px-4 py-5 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-3",children:[e.jsxs("label",{htmlFor:"guardianName",className:"block text-xs font-medium text-gray-600",children:["Guardian First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"guardianName",id:"guardianName",required:!0,value:p.guardianName,onChange:N,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"Guardian first name"})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsxs("label",{htmlFor:"guardianSurname",className:"block text-xs font-medium text-gray-600",children:["Guardian Surname ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"guardianSurname",id:"guardianSurname",required:!0,value:p.guardianSurname,onChange:N,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"Guardian surname"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"guardianNationalIDNumber",className:"block text-xs font-medium text-gray-600",children:["Guardian National ID ",e.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),e.jsx("input",{type:"text",name:"guardianNationalIDNumber",id:"guardianNationalIDNumber",value:p.guardianNationalIDNumber,onChange:N,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"Guardian national ID"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"guardianPhoneNumber",className:"block text-xs font-medium text-gray-600",children:["Guardian Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",name:"guardianPhoneNumber",id:"guardianPhoneNumber",required:!0,value:p.guardianPhoneNumber,onChange:N,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"Phone number"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"relationshipToStudent",className:"block text-xs font-medium text-gray-600",children:"Relationship to Student"}),e.jsx("input",{type:"text",name:"relationshipToStudent",id:"relationshipToStudent",value:p.relationshipToStudent,onChange:N,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"e.g., Mother, Father, Guardian"})]})]})})})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsxs(Zt,{to:`/dashboard/students/view/${t}`,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[e.jsx(R,{icon:Bt,className:"mr-2"}),"Cancel"]}),e.jsxs("button",{type:"submit",disabled:!P()||i,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(R,{icon:Er,className:"mr-2"}),i?"Saving...":"Save Changes"]})]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-green-100",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mt-4",children:"Student Information Successfully Updated!"}),e.jsx("div",{className:"mt-2 px-7 py-3",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["The information for ",e.jsxs("strong",{children:[m?.Name," ",m?.Surname]})," has been successfully updated."]})}),e.jsxs("div",{className:"items-center px-4 py-3",children:[e.jsx("button",{onClick:()=>{b(!1),a(`/dashboard/students/view/${t}`)},className:"px-4 py-2 bg-gray-700 text-white text-xs font-medium hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 w-full",children:"View Student Details"}),e.jsx("button",{onClick:()=>{b(!1),a("/dashboard/students")},className:"mt-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 text-xs font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 w-full",children:"Back to Students List"})]})]})})})]}):e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-gray-500",children:"Student not found"})})})},Kq=()=>{const{id:t}=ln(),a=ga(),{token:r}=ut(),[s,n]=g.useState(null),[i,o]=g.useState(!0),[d,u]=g.useState(null),[m,x]=g.useState("personal");g.useEffect(()=>{f()},[t]);const f=async()=>{try{o(!0),u(null),console.log(" Fetching student with regNumber:",t);const j=(await ne.get(`${ie}/students/${t}`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data;console.log(" Student data received:",j.data),console.log(" Guardian data:",j.data.guardians),n(j.data)}catch(v){console.error("Error fetching student:",v),v.response?v.response.status===404?u("Student not found"):u(`Error: ${v.response.status} - ${v.response.data?.message||v.response.statusText}`):v.request?u("No response from server. Please check your connection."):u(`Error: ${v.message}`)}finally{o(!1)}},b=async()=>{if(window.confirm("Are you sure you want to delete this student? This action cannot be undone."))try{await ne.delete(`${ie}/students/${t}`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}}),a("/dashboard/students")}catch(v){console.error("Error deleting student:",v),v.response?u(`Failed to delete student: ${v.response.status} - ${v.response.data?.message||v.response.statusText}`):v.request?u("No response from server. Please check your connection."):u(`Error: ${v.message}`)}},p=v=>v?new Date(v).toLocaleDateString():"N/A";return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading student information..."})}):d?e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 p-4",children:[e.jsx("div",{className:"text-sm text-red-600",children:d}),e.jsxs(Zt,{to:"/dashboard/students",className:"mt-2 inline-flex items-center text-sm text-red-600 hover:text-red-800",children:[e.jsx(R,{icon:em,className:"mr-1"}),"Back to Students"]})]})}):s?e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg font-bold text-gray-900",children:[s.Name," ",s.Surname]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Registration Number: ",s.RegNumber]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(Zt,{to:`/dashboard/students/edit/${t}`,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[e.jsx(R,{icon:ha,className:"mr-2"}),"Edit"]}),e.jsxs("button",{onClick:b,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx(R,{icon:Yt,className:"mr-2"}),"Delete"]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("nav",{className:"flex space-x-8 border-b border-gray-200",children:[{id:"personal",label:"Personal Information",icon:Is},{id:"guardian",label:"Guardian Information",icon:za}].map(v=>e.jsxs("button",{onClick:()=>x(v.id),className:`py-2 px-1 border-b-2 font-medium text-xs flex items-center ${m===v.id?"border-gray-700 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:v.icon,className:"mr-2 h-3 w-3"}),v.label]},v.id))})}),e.jsxs("div",{className:"min-h-96",children:[m==="personal"&&e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 sm:px-6",children:e.jsxs("h3",{className:"text-sm leading-6 font-medium text-gray-900 flex items-center",children:[e.jsx(R,{icon:Is,className:"mr-2 text-blue-600"}),"Personal Information"]})}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsxs("dl",{children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Full Name"}),e.jsxs("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2",children:[s.Name," ",s.Surname]})]}),e.jsxs("div",{className:"bg-white px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Registration Number"}),e.jsx("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2 font-mono",children:s.RegNumber})]}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Date of Birth"}),e.jsxs("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2 flex items-center",children:[e.jsx(R,{icon:ua,className:"mr-2 text-gray-400"}),p(s.DateOfBirth)]})]}),e.jsxs("div",{className:"bg-white px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"National ID Number"}),e.jsxs("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2 flex items-center",children:[e.jsx(R,{icon:Q2,className:"mr-2 text-gray-400"}),s.NationalIDNumber||"N/A"]})]}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Gender"}),e.jsxs("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2 flex items-center",children:[e.jsx(R,{icon:oB,className:"mr-2 text-gray-400"}),s.Gender||"N/A"]})]}),e.jsxs("div",{className:"bg-white px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Address"}),e.jsxs("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2 flex items-center",children:[e.jsx(R,{icon:jc,className:"mr-2 text-gray-400"}),s.Address||"N/A"]})]}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Status"}),e.jsx("dd",{className:"mt-1 text-xs sm:mt-0 sm:col-span-2",children:e.jsx("div",{className:"text-xs text-gray-900",children:s.Active||"Unknown"})})]}),s.ImagePath&&e.jsxs("div",{className:"bg-white px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Profile Image"}),e.jsx("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2",children:e.jsx("img",{src:s.ImagePath,alt:`${s.Name} ${s.Surname}`,className:"h-20 w-20 object-cover"})})]})]})})]}),m==="guardian"&&e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 sm:px-6",children:e.jsxs("h3",{className:"text-sm leading-6 font-medium text-gray-900 flex items-center",children:[e.jsx(R,{icon:za,className:"mr-2 text-green-600"}),"Guardian Information"]})}),e.jsx("div",{className:"border-t border-gray-200",children:s.guardians&&s.guardians.length>0?e.jsx("div",{children:s.guardians.map((v,j)=>e.jsxs("dl",{className:j>0?"border-t border-gray-200":"",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Guardian Name"}),e.jsxs("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2",children:[v.Name," ",v.Surname]})]}),e.jsxs("div",{className:"bg-white px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Phone Number"}),e.jsxs("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2 flex items-center",children:[e.jsx(R,{icon:NN,className:"mr-2 text-gray-400"}),v.PhoneNumber||"N/A"]})]}),v.NationalIDNumber&&e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"National ID"}),e.jsxs("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2 flex items-center",children:[e.jsx(R,{icon:Q2,className:"mr-2 text-gray-400"}),v.NationalIDNumber]})]}),v.RelationshipToStudent&&e.jsxs("div",{className:"bg-white px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Relationship"}),e.jsx("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2",children:v.RelationshipToStudent})]})]},v.GuardianID||j))}):e.jsx("div",{className:"px-4 py-8 text-center text-xs text-gray-500",children:"No guardian information available"})})]})]})]}):e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-500",children:"Student not found"}),e.jsxs(Zt,{to:"/dashboard/students",className:"mt-2 inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(R,{icon:em,className:"mr-1"}),"Back to Students"]})]})})},Xq=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState(null),[i,o]=g.useState(null),[d,u]=g.useState(""),[m,x]=g.useState([]),[f,b]=g.useState(null),[p,v]=g.useState(0),[j,N]=g.useState({adjustment_type:"debit",amount:"",description:"Opening Balance - Historical Debt",reference:""}),w=async()=>{if(!d.trim()){n("Please enter a registration number or student name to search");return}r(!0);try{const _=await ne.get(`${ie}/students/search?query=${d}`,{headers:{Authorization:`Bearer ${t}`}});x(_.data.data||[]),n(null)}catch(_){console.error("Error searching students:",_),n("Failed to search for student"),x([])}finally{r(!1)}},P=async _=>{try{r(!0),n(null);const E=t?{Authorization:`Bearer ${t}`}:{},A=await ne.get(`${ie}/students/${_.RegNumber}/balance`,{headers:E});b(_),v(A.data.balance||0),N({adjustment_type:"debit",amount:"",description:"Opening Balance - Historical Debt",reference:""}),x([]),u("")}catch(E){console.error("Error getting student balance:",E),n(E.response?.data?.error||"Failed to load student balance")}finally{r(!1)}},k=_=>{const{name:E,value:A}=_.target;N(z=>({...z,[E]:A}))},$=()=>{const _=Date.now(),E=Math.random().toString(36).substring(2,8).toUpperCase();N(A=>({...A,reference:`MBU-${_}-${E}`}))},O=async _=>{if(_.preventDefault(),!f){n("Please select a student first");return}if(!j.amount||parseFloat(j.amount)<=0){n("Please enter a valid amount");return}if(!j.description.trim()){n("Please enter a description for this adjustment");return}try{r(!0),n(null),o(null);const E=t?{Authorization:`Bearer ${t}`}:{},A={student_id:f.RegNumber,adjustment_type:j.adjustment_type,amount:parseFloat(j.amount),description:j.description,reference:j.reference||`MBU-${Date.now()}-${Math.random().toString(36).substring(2,8).toUpperCase()}`};await ne.post(`${ie}/students/manual-balance-adjustment`,A,{headers:E}),o("Opening balance recorded successfully! This historical debt has been added to the student account."),await new Promise(M=>setTimeout(M,500)),console.log(" Refreshing balance for student:",f.RegNumber);const z=await ne.get(`${ie}/students/${f.RegNumber}/balance`,{headers:E});console.log(" Balance response:",z.data),v(z.data.balance||0),N({adjustment_type:"debit",amount:"",description:"Opening Balance - Historical Debt",reference:""})}catch(E){console.error("Error updating balance:",E),n(E.response?.data?.error||"Failed to update student balance")}finally{r(!1)}},L=()=>{b(null),v(0),N({adjustment_type:"debit",amount:"",description:"Opening Balance - Historical Debt",reference:""}),n(null),o(null)};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Student Opening Balance Entry"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Record historical student debts from before system implementation"})]})}),e.jsx("div",{className:"mt-3 bg-yellow-50 border border-yellow-200 px-4 py-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(R,{icon:la,className:"text-yellow-600 mr-3 mt-0.5"}),e.jsxs("div",{className:"text-xs text-yellow-800",children:[e.jsx("p",{className:"font-semibold mb-1",children:" Use This ONLY for Opening Balances"}),e.jsx("p",{className:"mb-1",children:"This feature is designed ONLY for recording historical debts that existed BEFORE your system went live."}),e.jsx("p",{className:"font-medium",children:"For mid-term adjustments:"}),e.jsxs("ul",{className:"list-disc ml-4 mt-1",children:[e.jsxs("li",{children:["Use the ",e.jsx("strong",{children:"Waivers"})," module to forgive fees"]}),e.jsxs("li",{children:["Use the ",e.jsx("strong",{children:"Payments"})," module to record payments"]}),e.jsx("li",{children:"Contact the accounting team for other corrections"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 shadow",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Search Student"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:d,onChange:_=>u(_.target.value),placeholder:"Search by registration number or name",className:"flex-1 px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",onKeyPress:_=>_.key==="Enter"&&w()}),e.jsxs("button",{onClick:w,disabled:a,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 text-xs font-medium flex items-center",children:[a?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):e.jsx(R,{icon:aa,className:"mr-2"}),"Search"]})]}),m.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-700",children:"Search Results:"}),m.map(_=>e.jsx("div",{onClick:()=>P(_),className:"p-3 border border-gray-200 hover:bg-gray-50 cursor-pointer text-xs",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[_.Name," ",_.Surname]}),e.jsxs("p",{className:"text-gray-600",children:["Reg: ",_.RegNumber]})]}),e.jsx(R,{icon:Is,className:"text-gray-400"})]})},_.id))]}),f&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-blue-900 text-xs",children:[f.Name," ",f.Surname]}),e.jsxs("p",{className:"text-blue-700 text-xs",children:["Reg: ",f.RegNumber]}),e.jsxs("p",{className:"text-blue-700 text-xs",children:["Current Balance:",e.jsxs("span",{className:`font-bold ml-1 ${p>=0?"text-green-600":"text-red-600"}`,children:["$",Math.abs(p).toFixed(2)," ",p>=0?"Credit":"Debit"]})]})]}),e.jsx("button",{onClick:L,className:"text-blue-600 hover:text-blue-800",children:e.jsx(R,{icon:Bt})})]})})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 shadow",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Opening Balance Entry"})}),e.jsxs("form",{onSubmit:O,className:"p-4",children:[i&&e.jsxs("div",{className:"mb-4 p-3 bg-green-100 border border-green-200 text-green-700 text-xs",children:[e.jsx(R,{icon:Ra,className:"mr-2"}),i]}),s&&e.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 text-xs",children:[e.jsx(R,{icon:la,className:"mr-2"}),s]}),!f&&e.jsxs("div",{className:"mb-4 p-3 bg-yellow-100 border border-yellow-200 text-yellow-700 text-xs",children:[e.jsx(R,{icon:UC,className:"mr-2"}),"Please search and select a student first"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Balance Type *"}),e.jsxs("select",{name:"adjustment_type",value:j.adjustment_type,onChange:k,required:!0,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"debit",children:"Student Owes Money (Debit - Most Common)"}),e.jsx("option",{value:"credit",children:"Student Has Credit (Rare - use payment module instead)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:` In most cases, you'll use "Student Owes Money" for historical unpaid fees`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Amount *"}),e.jsx("input",{type:"number",name:"amount",value:j.amount,onChange:k,required:!0,min:"0.01",step:"0.01",placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description *"}),e.jsx("textarea",{name:"description",value:j.description,onChange:k,required:!0,rows:3,placeholder:"e.g., Opening Balance - Unpaid fees from 2023 Term 1",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:" Describe what this historical debt is for (year, term, reason)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reference"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"reference",value:j.reference,onChange:k,placeholder:"Auto-generated if left empty",className:"flex-1 px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"}),e.jsx("button",{type:"button",onClick:$,className:"px-3 py-2 bg-gray-600 text-white hover:bg-gray-700 text-xs font-medium",children:"Generate"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:L,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 text-xs font-medium border border-gray-300",children:"Clear"}),e.jsxs("button",{type:"submit",disabled:a||!f,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-xs font-medium flex items-center",children:[a?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):e.jsx(R,{icon:Er,className:"mr-2"}),a?"Processing...":"Record Adjustment"]})]})]})]})]})]})})},Jq=()=>{const{token:t}=ut(),[a,r]=g.useState([]),[s,n]=g.useState(!0),[i,o]=g.useState(null),[d,u]=g.useState(""),[m,x]=g.useState(!1),[f,b]=g.useState(!1),[p,v]=g.useState(!1),[j,N]=g.useState(null),w=async()=>{try{n(!0),o(null);const A=await ne.get(`${ie}/management/users`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});console.log(" Users data:",A.data),r(A.data.data||[])}catch(A){console.error("Error fetching users:",A),A.response?o(`Error: ${A.response.status} - ${A.response.data?.error||A.response.statusText}`):A.request?o("No response from server. Please check your connection."):o(`Error: ${A.message}`)}finally{n(!1)}};g.useEffect(()=>{w()},[]);const P=()=>{N(null),x(!0)},k=A=>{N(A),b(!0)},$=A=>{N(A),v(!0)},O=async A=>{const M=a.find(D=>D.id===A).is_active?"deactivate":"activate";if(window.confirm(`Are you sure you want to ${M} this user?`))try{await ne.patch(`${ie}/management/users/${A}/toggle-status`,{},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),r(a.map(D=>D.id===A?{...D,is_active:!D.is_active}:D))}catch(D){console.error("Error toggling user status:",D),o("Failed to update user status")}},L=async A=>{if(window.confirm("Are you sure you want to delete this user?"))try{await ne.delete(`${ie}/management/users/${A}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),r(a.filter(z=>z.id!==A))}catch(z){console.error("Error deleting user:",z),z.response?.data?.error?o(z.response.data.error):o("Failed to delete user")}},_=a.filter(A=>A.username.toLowerCase().includes(d.toLowerCase())||A.roles.some(z=>z.toLowerCase().includes(d.toLowerCase()))),E=A=>A.username==="sysadmin";return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading users..."})}):e.jsxs("div",{children:[e.jsxs("div",{className:"sm:flex sm:items-center mb-6",children:[e.jsxs("div",{className:"sm:flex-auto",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"System Users"}),e.jsx("p",{className:"mt-1 text-xs text-gray-700",children:"Manage user accounts and permissions"})]}),e.jsx("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none",children:e.jsxs("button",{onClick:P,className:"inline-flex items-center justify-center border border-transparent bg-gray-700 px-3 py-1.5 text-xs font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:[e.jsx(R,{icon:Ot,className:"mr-2"}),"Add User"]})})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex gap-2",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(R,{icon:aa,className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"text",value:d,onChange:A=>u(A.target.value),placeholder:"Search by username or role...",className:"block w-full pl-10 pr-3 py-1.5 border border-gray-300 leading-5 bg-white placeholder-gray-400 focus:outline-none focus:placeholder-gray-300 focus:ring-1 focus:ring-gray-500 focus:border-gray-500 text-xs"})]})})})}),i&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-4",children:e.jsx("div",{className:"text-sm text-red-600",children:i})}),e.jsx("div",{className:"mt-8 flex flex-col",children:e.jsx("div",{className:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{className:"bg-gray-100/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Username"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Last Login"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:Is,className:"h-3 w-3 text-gray-400 mr-2"}),e.jsx("div",{className:"text-xs text-gray-900 font-medium",children:A.username})]})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"text-xs text-gray-900 flex items-center",children:[e.jsx(R,{icon:A.is_active?Ra:Zu,className:`h-3 w-3 mr-1 ${A.is_active?"text-green-500":"text-red-500"}`}),A.is_active?"Active":"Inactive"]})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:A.last_login?new Date(A.last_login).toLocaleDateString():"Never"})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>$(A),className:"text-blue-600 hover:text-blue-900",title:"View Roles",children:e.jsx(R,{icon:_x,className:"h-4 w-4"})}),E(A)?e.jsx("button",{disabled:!0,className:"text-gray-300 cursor-not-allowed",title:"System admin cannot be edited",children:e.jsx(R,{icon:ha,className:"h-4 w-4"})}):e.jsx("button",{onClick:()=>k(A),className:"text-green-600 hover:text-green-900",title:"Edit User",children:e.jsx(R,{icon:ha,className:"h-4 w-4"})}),E(A)?e.jsx("button",{disabled:!0,className:"text-gray-300 cursor-not-allowed",title:"System admin cannot be deactivated",children:e.jsx(R,{icon:_6,className:"h-4 w-4"})}):e.jsx("button",{onClick:()=>O(A.id),className:`${A.is_active?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900"}`,title:A.is_active?"Deactivate User":"Activate User",children:e.jsx(R,{icon:A.is_active?_6:Ra,className:"h-4 w-4"})}),E(A)?e.jsx("button",{disabled:!0,className:"text-gray-300 cursor-not-allowed",title:"System admin cannot be deleted",children:e.jsx(R,{icon:Yt,className:"h-4 w-4"})}):e.jsx("button",{onClick:()=>L(A.id),className:"text-red-600 hover:text-red-900",title:"Delete User",children:e.jsx(R,{icon:Yt,className:"h-4 w-4"})})]})})]},A.id))})]})})})})}),m&&e.jsx(H6,{isOpen:m,onClose:()=>x(!1),user:null,onSave:async A=>{try{const z=await ne.post(`${ie}/management/users`,A,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});console.log(" User created:",z.data),w(),x(!1)}catch(z){throw console.error("Error creating user:",z),z}}}),f&&j&&e.jsx(H6,{isOpen:f,onClose:()=>b(!1),user:j,onSave:async A=>{try{const z=await ne.put(`${ie}/management/users/${j.id}`,A,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});console.log(" User updated:",z.data),w(),b(!1)}catch(z){throw console.error("Error updating user:",z),z}}}),p&&j&&e.jsx(Zq,{isOpen:p,onClose:()=>v(!1),user:j})]})},H6=({isOpen:t,onClose:a,user:r,onSave:s})=>{const{token:n}=ut(),[i,o]=g.useState({username:"",password:"",roles:[],isActive:!0}),[d,u]=g.useState([]),[m,x]=g.useState(!1),[f,b]=g.useState(null),p=async()=>{try{const w=await ne.get(`${ie}/management/roles`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});u(w.data.data||[])}catch(w){console.error("Error fetching roles:",w)}};g.useEffect(()=>{p(),o(r?{username:r.username||"",password:"",roles:r.roleIds||[],isActive:r.is_active!==void 0?r.is_active:!0}:{username:"",password:"",roles:[],isActive:!0})},[r]);const v=w=>{const{name:P,value:k,type:$,checked:O}=w.target;o(L=>({...L,[P]:$==="checkbox"?O:k}))},j=w=>{o(P=>({...P,roles:P.roles.includes(w)?P.roles.filter(k=>k!==w):[...P.roles,w]}))},N=async w=>{w.preventDefault(),x(!0),b(null);try{await s(i)}catch(P){console.error("Error saving user:",P),P.response?.data?.error?b(P.response.data.error):b("Failed to save user")}finally{x(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-[500px] bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-sm leading-6 font-medium text-gray-900 mb-4",children:r?"Edit User":"Add New User"}),f&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-3",children:e.jsx("div",{className:"text-sm text-red-600",children:f})}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"username",className:"block text-xs font-medium text-gray-600",children:["Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"username",id:"username",required:!0,value:i.username,onChange:v,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"Enter username"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password",className:"block text-xs font-medium text-gray-600",children:["Password ",!r&&e.jsx("span",{className:"text-red-500",children:"*"}),r&&e.jsx("span",{className:"text-gray-400",children:"(Leave blank to keep current)"})]}),e.jsx("input",{type:"password",name:"password",id:"password",required:!r,value:i.password,onChange:v,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"Enter password"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:["Roles ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto border border-gray-300 p-2",children:d.map(w=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:i.roles.includes(w.id),onChange:()=>j(w.id),className:"h-3 w-3 text-gray-600 focus:ring-gray-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-xs text-gray-700",children:w.name})]},w.id))})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:i.isActive,onChange:v,className:"h-3 w-3 text-gray-600 focus:ring-gray-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-xs text-gray-700",children:"Active User"})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-3 py-1.5 border border-gray-300 text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-3 py-1.5 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50",children:m?"Saving...":`${r?"Update":"Create"} User`})]})]})]})})}):null},Zq=({isOpen:t,onClose:a,user:r})=>t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("h3",{className:"text-sm leading-6 font-medium text-gray-900 mb-4",children:["User Roles - ",r.username]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(R,{icon:Is,className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-xs text-gray-600",children:"User Information"})]}),e.jsx("div",{className:"bg-gray-50 p-3 border border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Username:"}),e.jsx("div",{className:"text-gray-900",children:r.username})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Status:"}),e.jsxs("div",{className:`flex items-center ${r.is_active?"text-green-600":"text-red-600"}`,children:[e.jsx(R,{icon:r.is_active?Ra:Zu,className:"h-3 w-3 mr-1"}),r.is_active?"Active":"Inactive"]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Last Login:"}),e.jsx("div",{className:"text-gray-900",children:r.last_login?new Date(r.last_login).toLocaleDateString():"Never"})]})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(R,{icon:_x,className:"h-4 w-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-xs text-gray-600",children:["Assigned Roles (",r.roles.length,")"]})]}),r.roles&&r.roles.length>0?e.jsx("div",{className:"space-y-2",children:r.roles.map((s,n)=>e.jsx("div",{className:"flex items-center justify-between p-2 bg-blue-50 border border-blue-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:_x,className:"h-3 w-3 text-blue-600 mr-2"}),e.jsx("span",{className:"text-xs font-medium text-blue-800",children:s})]})},n))}):e.jsx("div",{className:"text-center py-8 text-xs text-gray-500",children:"No roles assigned to this user"})]}),e.jsx("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:a,className:"px-3 py-1.5 border border-gray-300 text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Close"})})]})})}):null,Qq=()=>{const{token:t}=ut(),[a,r]=g.useState([]),[s,n]=g.useState(!0),[i,o]=g.useState(null),[d,u]=g.useState(""),[m,x]=g.useState(!1),[f,b]=g.useState(!1),[p,v]=g.useState(!1),[j,N]=g.useState(null),w=async()=>{try{n(!0),o(null);const _=await ne.get(`${ie}/management/roles`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});console.log(" Roles data:",_.data),r(_.data.data||[])}catch(_){console.error("Error fetching roles:",_),_.response?o(`Error: ${_.response.status} - ${_.response.data?.error||_.response.statusText}`):_.request?o("No response from server. Please check your connection."):o(`Error: ${_.message}`)}finally{n(!1)}};g.useEffect(()=>{w()},[]);const P=()=>{N(null),x(!0)},k=_=>{N(_),b(!0)},$=_=>{console.log(" Delete button clicked for role:",_?.name),N(_),v(!0),console.log(" Modal state set to true")},O=async()=>{if(j)try{await ne.delete(`${ie}/management/roles/${j.id}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),r(a.filter(_=>_.id!==j.id)),v(!1),N(null)}catch(_){console.error("Error deleting role:",_),_.response?.data?.error?o(_.response.data.error):o("Failed to delete role"),v(!1)}},L=a.filter(_=>_.name.toLowerCase().includes(d.toLowerCase())||_.description.toLowerCase().includes(d.toLowerCase()));return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading roles..."})}):e.jsxs("div",{children:[e.jsxs("div",{className:"sm:flex sm:items-center mb-6",children:[e.jsxs("div",{className:"sm:flex-auto",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"System Roles"}),e.jsx("p",{className:"mt-1 text-xs text-gray-700",children:"Manage user roles"})]}),e.jsx("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none",children:e.jsxs("button",{onClick:P,className:"inline-flex items-center justify-center border border-transparent bg-gray-700 px-3 py-1.5 text-xs font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:[e.jsx(R,{icon:Ot,className:"mr-2"}),"Add Role"]})})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex gap-2",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(R,{icon:aa,className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"text",value:d,onChange:_=>u(_.target.value),placeholder:"Search by role name or description...",className:"block w-full pl-10 pr-3 py-1.5 border border-gray-300 leading-5 bg-white placeholder-gray-400 focus:outline-none focus:placeholder-gray-300 focus:ring-1 focus:ring-gray-500 focus:border-gray-500 text-xs"})]})})})}),i&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-4",children:e.jsx("div",{className:"text-sm text-red-600",children:i})}),e.jsx("div",{className:"mt-8 flex flex-col",children:e.jsx("div",{className:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{className:"bg-gray-100/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Role Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Users"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:_x,className:"h-3 w-3 text-gray-400 mr-2"}),e.jsx("div",{className:"text-xs text-gray-900 font-medium",children:_.name})]})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("div",{className:"text-xs text-gray-900",children:_.description})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-xs text-gray-900",children:[e.jsx(R,{icon:za,className:"h-3 w-3 text-gray-400 mr-1"}),_.userCount]})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"text-xs text-gray-900 flex items-center",children:[e.jsx(R,{icon:_.isActive?Ra:Zu,className:`h-3 w-3 mr-1 ${_.isActive?"text-green-500":"text-red-500"}`}),_.isActive?"Active":"Inactive"]})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>k(_),className:"text-blue-600 hover:text-blue-900",children:e.jsx(R,{icon:ha,className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>$(_),className:"text-red-600 hover:text-red-900",children:e.jsx(R,{icon:Yt,className:"h-4 w-4"})})]})})]},_.id))})]})})})})}),m&&e.jsx(Y6,{isOpen:m,onClose:()=>x(!1),role:null,onSave:async _=>{try{const E=await ne.post(`${ie}/management/roles`,_,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});console.log(" Role created:",E.data),w(),x(!1)}catch(E){throw console.error("Error creating role:",E),E}}}),f&&j&&e.jsx(Y6,{isOpen:f,onClose:()=>b(!1),role:j,onSave:async _=>{try{const E=await ne.put(`${ie}/management/roles/${j.id}`,_,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});console.log(" Role updated:",E.data),w(),b(!1)}catch(E){throw console.error("Error updating role:",E),E}}}),console.log(" Modal render check:",{showDeleteModal:p,selectedRole:j?.name}),p&&j&&e.jsx(eU,{isOpen:p,onClose:()=>{console.log(" Closing delete modal"),v(!1),N(null)},role:j,onConfirm:O})]})},Y6=({isOpen:t,onClose:a,role:r,onSave:s})=>{const[n,i]=g.useState({name:"",description:"",isActive:!0});g.useEffect(()=>{i(r?{name:r.name||"",description:r.description||"",isActive:r.isActive!==void 0?r.isActive:!0}:{name:"",description:"",isActive:!0})},[r]);const o=u=>{const{name:m,value:x,type:f,checked:b}=u.target;i(p=>({...p,[m]:f==="checkbox"?b:x}))},d=u=>{u.preventDefault(),s(n)};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-[500px] bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-sm leading-6 font-medium text-gray-900 mb-4",children:r?"Edit Role":"Add New Role"}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-xs font-medium text-gray-600",children:["Role Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",id:"name",required:!0,value:n.name,onChange:o,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"Enter role name"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"description",className:"block text-xs font-medium text-gray-600",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{name:"description",id:"description",required:!0,rows:3,value:n.description,onChange:o,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"Enter role description"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:n.isActive,onChange:o,className:"h-3 w-3 text-gray-600 focus:ring-gray-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-xs text-gray-700",children:"Active Role"})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-3 py-1.5 border border-gray-300 text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-3 py-1.5 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500",children:[r?"Update":"Create"," Role"]})]})]})]})})}):null},eU=({isOpen:t,onClose:a,role:r,onConfirm:s})=>{const[n,i]=g.useState(!1),o=async()=>{i(!0);try{await s()}catch(m){console.error("Error during deletion:",m)}finally{i(!1)}},d=m=>{m.target===m.currentTarget&&a()};if(!t)return null;console.log(" Delete modal rendering for role:",r?.name);const u=r.userCount>0;return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:d,children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-[400px] bg-white shadow-lg",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(R,{icon:Yt,className:"h-6 w-6 text-red-600"})}),e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-sm leading-6 font-medium text-gray-900",children:"Delete Role"})})]}),e.jsx("div",{className:"mb-4",children:u?e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Cannot delete this role because it is currently assigned to users."}),e.jsx("div",{className:"bg-red-50 border border-red-200 p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:za,className:"h-4 w-4 text-red-500 mr-2"}),e.jsxs("span",{className:"text-sm text-red-700",children:[e.jsx("strong",{children:r.name})," is assigned to ",e.jsx("strong",{children:r.userCount})," user",r.userCount!==1?"s":""]})]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Please reassign or remove this role from all users before deleting it."})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Are you sure you want to delete this role? This action cannot be undone."}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 p-3",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900",children:r.name}),e.jsx("div",{className:"text-gray-600",children:r.description})]})})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:a,className:"px-3 py-1.5 border border-gray-300 text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:u?"Close":"Cancel"}),!u&&e.jsx("button",{type:"button",onClick:o,disabled:n,className:`px-3 py-1.5 border border-transparent text-xs font-medium text-white ${n?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}`,children:n?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-1"}),"Deleting..."]}):"Delete Role"})]})]})})})},tU=()=>{const{token:t,user:a}=ut(),[r,s]=g.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[n,i]=g.useState({current:!1,new:!1,confirm:!1}),[o,d]=g.useState(!1),[u,m]=g.useState(""),[x,f]=g.useState(!1),b=N=>{const{name:w,value:P}=N.target;s(k=>({...k,[w]:P})),u&&m(""),x&&f(!1)},p=N=>{i(w=>({...w,[N]:!w[N]}))},v=()=>r.currentPassword?r.newPassword?r.newPassword.length<6?(m("New password must be at least 6 characters long"),!1):r.newPassword!==r.confirmPassword?(m("New passwords do not match"),!1):r.currentPassword===r.newPassword?(m("New password must be different from current password"),!1):!0:(m("New password is required"),!1):(m("Current password is required"),!1),j=async N=>{if(N.preventDefault(),!!v()){d(!0),m("");try{const w=await ne.put(`${ie}/auth/change-password`,{currentPassword:r.currentPassword,newPassword:r.newPassword},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});console.log(" Password changed successfully:",w.data),f(!0),s({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>f(!1),5e3)}catch(w){console.error("Error changing password:",w),w.response?.data?.error?m(w.response.data.error):w.response?.status===401?m("Current password is incorrect"):w.response?.status===400?m("Invalid password format"):m("Failed to change password. Please try again.")}finally{d(!1)}}};return e.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[x&&e.jsx("div",{className:"mb-4 bg-green-50 border border-green-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:sn,className:"h-4 w-4 text-green-500 mr-2"}),e.jsx("span",{className:"text-sm text-green-600",children:"Password changed successfully!"})]})}),u&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-4",children:e.jsx("div",{className:"text-sm text-red-600",children:u})}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"currentPassword",className:"block text-xs font-medium text-gray-600",children:["Current Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{type:n.current?"text":"password",name:"currentPassword",id:"currentPassword",required:!0,value:r.currentPassword,onChange:b,className:"block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-sm pr-10",placeholder:"Enter your current password"}),e.jsx("button",{type:"button",onClick:()=>p("current"),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:e.jsx(R,{icon:n.current?mf:Ma,className:"h-4 w-4 text-gray-400 hover:text-gray-600"})})]})]}),e.jsx("div",{}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"newPassword",className:"block text-xs font-medium text-gray-600",children:["New Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{type:n.new?"text":"password",name:"newPassword",id:"newPassword",required:!0,value:r.newPassword,onChange:b,className:"block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-sm pr-10",placeholder:"Enter your new password"}),e.jsx("button",{type:"button",onClick:()=>p("new"),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:e.jsx(R,{icon:n.new?mf:Ma,className:"h-4 w-4 text-gray-400 hover:text-gray-600"})})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Password must be at least 6 characters long"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"confirmPassword",className:"block text-xs font-medium text-gray-600",children:["Confirm New Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{type:n.confirm?"text":"password",name:"confirmPassword",id:"confirmPassword",required:!0,value:r.confirmPassword,onChange:b,className:"block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-sm pr-10",placeholder:"Confirm your new password"}),e.jsx("button",{type:"button",onClick:()=>p("confirm"),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:e.jsx(R,{icon:n.confirm?mf:Ma,className:"h-4 w-4 text-gray-400 hover:text-gray-600"})})]})]})]}),e.jsx("div",{className:"pt-4 flex justify-start",children:e.jsx("button",{type:"submit",disabled:o,className:`inline-flex justify-center py-2 px-6 border border-transparent text-sm font-medium text-white ${o?"bg-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500"}`,children:o?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Changing Password..."]}):"Change Password"})})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 p-4",children:[e.jsx("h4",{className:"text-xs font-medium text-blue-900 mb-2",children:"Password Security Tips"}),e.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[e.jsx("li",{children:" Use a combination of letters, numbers, and symbols"}),e.jsx("li",{children:" Avoid using personal information"}),e.jsx("li",{children:" Don't reuse passwords from other accounts"}),e.jsx("li",{children:" Change your password regularly"})]})]})]})},aU=()=>{const[t,a]=g.useState("users");return e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage system users, roles, and account settings"})]})})}),e.jsx("div",{className:"mb-6",children:e.jsx("nav",{className:"flex space-x-8 border-b border-gray-200",children:[{id:"users",label:"User Management",icon:za},{id:"roles",label:"Role Management",icon:_x},{id:"password",label:"Change Password",icon:rB}].map(r=>e.jsxs("button",{onClick:()=>a(r.id),className:`py-2 px-1 border-b-2 font-medium text-xs flex items-center ${t===r.id?"border-gray-700 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:r.icon,className:"mr-2 h-3 w-3"}),r.label]},r.id))})}),e.jsxs("div",{className:"min-h-96",children:[t==="users"&&e.jsx(Jq,{}),t==="roles"&&e.jsx(Qq,{}),t==="password"&&e.jsx(tU,{})]})]})},rU=()=>{const{token:t}=ut(),[a,r]=g.useState([]),[s,n]=g.useState(!1),[i,o]=g.useState(""),[d,u]=g.useState(""),[m,x]=g.useState(""),[f,b]=g.useState(!1),[p,v]=g.useState(null),[j,N]=g.useState([]),[w,P]=g.useState([]),[k,$]=g.useState(""),[O,L]=g.useState(""),[_,E]=g.useState(""),[A,z]=g.useState(1),[M,D]=g.useState(1),[I,V]=g.useState(0),H=10;g.useEffect(()=>{B(),W()},[A,m,k,O,_]);const B=async()=>{try{n(!0),o("");const J={page:A,limit:H};m.trim()&&(J.search=m.trim()),k&&(J.department=k),O&&(J.jobTitle=O),_&&(J.gender=_);const U=await ne.get(`${ie}/employees`,{headers:{Authorization:`Bearer ${t}`},params:J});U.data.success&&(r(U.data.data),U.data.pagination&&(D(U.data.pagination.totalPages),V(U.data.pagination.totalRecords)))}catch(J){console.error("Error fetching employees:",J),o("Failed to load employees")}finally{n(!1)}},W=async()=>{try{const J=await ne.get(`${ie}/configurations/active`,{headers:{Authorization:`Bearer ${t}`}});J.data.success&&(N(J.data.data.departments||[]),P(J.data.data.jobTitles||[]))}catch(J){console.error("Error fetching dropdown data:",J)}},K=()=>{x(d),z(1)},X=()=>{u(""),x(""),$(""),L(""),E(""),z(1)},Q=J=>{v(J),b(!0)},ye=async()=>{try{n(!0),await ne.delete(`${ie}/employees/${p.id}`,{headers:{Authorization:`Bearer ${t}`}}),b(!1),v(null),B()}catch(J){console.error("Error deleting employee:",J),o(J.response?.data?.error||"Failed to delete employee"),b(!1)}finally{n(!1)}},Y=J=>{z(J)};return e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Employees"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Manage employee information and records"})]}),e.jsxs(Zt,{to:"/dashboard/employees/add",className:"bg-gray-700 text-white px-4 py-2 text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(R,{icon:Ot,className:"mr-2 h-3 w-3"}),"Add Employee"]})]})}),e.jsxs("div",{className:"mb-4 space-y-4",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("input",{type:"text",placeholder:"Search employees...",value:d,onChange:J=>u(J.target.value),onKeyPress:J=>J.key==="Enter"&&K(),className:"border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500 flex-1"}),e.jsx("button",{onClick:K,className:"ml-2 bg-gray-700 text-white px-3 py-2 text-xs hover:bg-gray-800",children:e.jsx(R,{icon:aa,className:"h-3 w-3"})}),(d||k||O||_)&&e.jsx("button",{onClick:X,className:"ml-2 text-gray-500 hover:text-gray-700 text-xs",children:"Clear"})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:$r,className:"h-3 w-3 text-gray-400 mr-2"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Filters:"})]}),e.jsxs("select",{value:k,onChange:J=>{$(J.target.value),z(1)},className:"border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Departments"}),j.map(J=>e.jsx("option",{value:J.id,children:J.name},J.id))]}),e.jsxs("select",{value:O,onChange:J=>{L(J.target.value),z(1)},className:"border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Job Titles"}),w.map(J=>e.jsx("option",{value:J.id,children:J.name},J.id))]}),e.jsxs("select",{value:_,onChange:J=>{E(J.target.value),z(1)},className:"border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Genders"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]})]}),i&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-3",children:e.jsx("div",{className:"text-xs text-red-600",children:i})}),e.jsx("div",{className:"bg-white border border-gray-200 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-100/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Job Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Gender"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-xs text-gray-500",children:"Loading employees..."})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-xs text-gray-500",children:"No employees found"})}):a.map(J=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:za,className:"h-4 w-4 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:J.full_name}),e.jsx("div",{className:"text-gray-500",children:J.employee_id})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(R,{icon:Mn,className:"h-3 w-3 mr-1"}),J.department_name||"Not assigned"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(R,{icon:dy,className:"h-3 w-3 mr-1"}),J.job_title||"Not assigned"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-800",children:J.gender||"Not specified"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Zt,{to:`/dashboard/employees/view/${J.id}`,className:"text-blue-600 hover:text-blue-900",title:"View Employee",children:e.jsx(R,{icon:Ma,className:"h-4 w-4"})}),e.jsx(Zt,{to:`/dashboard/employees/edit/${J.id}`,className:"text-green-600 hover:text-green-900",title:"Edit Employee",children:e.jsx(R,{icon:ha,className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Q(J),className:"text-red-600 hover:text-red-900",title:"Delete Employee",children:e.jsx(R,{icon:Yt,className:"h-4 w-4"})})]})})]},J.id))})]})}),M>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",(A-1)*H+1," to ",Math.min(A*H,I)," of ",I," employees"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Y(A-1),disabled:A===1,className:`px-3 py-1 text-xs border ${A===1?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.jsx(R,{icon:qf,className:"h-3 w-3"})}),[...Array(M)].map((J,U)=>e.jsx("button",{onClick:()=>Y(U+1),className:`px-3 py-1 text-xs border ${A===U+1?"border-gray-700 bg-gray-700 text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:U+1},U+1)),e.jsx("button",{onClick:()=>Y(A+1),disabled:A===M,className:`px-3 py-1 text-xs border ${A===M?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.jsx(R,{icon:zf,className:"h-3 w-3"})})]})]}),f&&p&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-red-100 mb-4",children:e.jsx(R,{icon:Yt,className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Employee"}),e.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:['Are you sure you want to delete "',p.full_name,'"? This action will deactivate the employee record.']}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ye,disabled:s,className:"px-4 py-2 bg-red-600 text-white text-xs hover:bg-red-700 disabled:bg-red-400",children:s?"Deleting...":"Delete"})]})]})})})]})},sU=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState(""),[i,o]=g.useState(!1),[d,u]=g.useState(!1),[m,x]=g.useState({}),[f,b]=g.useState([]),[p,v]=g.useState([]),[j,N]=g.useState({employeeId:"",fullName:"",idNumber:"",address:"",email:"",phoneNumber:"",gender:"",departmentId:"",jobTitleId:"",hireDate:"",generateEmployeeId:!0}),[w,P]=g.useState([{bankName:"",accountNumber:"",currency:"",isPrimary:!0}]);g.useEffect(()=>{k()},[]);const k=async()=>{try{const D=await ne.get(`${ie}/configurations/active`,{headers:{Authorization:`Bearer ${t}`}});D.data.success&&(b(D.data.data.departments||[]),v(D.data.data.jobTitles||[]))}catch(D){console.error("Error fetching dropdown data:",D),n("Failed to load form data")}},$=D=>{const{name:I,value:V,type:H,checked:B}=D.target;N(W=>({...W,[I]:H==="checkbox"?B:V}))},O=(D,I,V)=>{P(H=>{const B=[...H];return B[D]={...B[D],[I]:V},I==="isPrimary"&&V&&B.forEach((W,K)=>{K!==D&&(W.isPrimary=!1)}),B})},L=()=>{P(D=>[...D,{bankName:"",accountNumber:"",currency:"",isPrimary:!1}])},_=D=>{w.length>1&&P(I=>{const V=I.filter((H,B)=>B!==D);return I[D].isPrimary&&V.length>0&&(V[0].isPrimary=!0),V})},E=()=>j.fullName.trim()?j.idNumber.trim()?w.filter(I=>I.bankName.trim()&&I.accountNumber.trim()).length===0&&w.some(I=>I.bankName.trim()||I.accountNumber.trim())?(n("Please complete bank account information or remove incomplete entries"),!1):!0:(n("ID number is required"),!1):(n("Full name is required"),!1),A=async D=>{if(D.preventDefault(),!!E())try{r(!0),n("");const I={...j,employeeId:j.generateEmployeeId?void 0:j.employeeId,departmentId:j.departmentId||null,jobTitleId:j.jobTitleId||null,hireDate:j.hireDate||null,bankAccounts:w.filter(H=>H.bankName.trim()&&H.accountNumber.trim())};(await ne.post(`${ie}/employees`,I,{headers:{Authorization:`Bearer ${t}`}})).data.success&&(o(!0),N({employeeId:"",fullName:"",idNumber:"",address:"",email:"",phoneNumber:"",departmentId:"",jobTitleId:"",hireDate:"",generateEmployeeId:!0}),P([{bankName:"",accountNumber:"",currency:"",isPrimary:!0}]))}catch(I){console.error("Error creating employee:",I),I.response?.data?.errorType&&I.response?.data?.field?(x({type:I.response.data.errorType,field:I.response.data.field,message:I.response.data.error}),u(!0)):n(I.response?.data?.error||"Failed to create employee")}finally{r(!1)}},z=()=>{o(!1)},M=()=>{u(!1),x({})};return e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Add New Employee"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Create a new employee record with personal and banking information"})]}),s&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-3",children:e.jsx("div",{className:"text-xs text-red-600",children:s})}),e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(R,{icon:Is,className:"mr-2 h-4 w-4 text-gray-400"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"generateEmployeeId",name:"generateEmployeeId",checked:j.generateEmployeeId,onChange:$,className:"h-4 w-4 text-gray-600 focus:ring-gray-500 border-gray-300"}),e.jsx("label",{htmlFor:"generateEmployeeId",className:"ml-2 block text-xs text-gray-600",children:"Auto-generate Employee ID (V + 4 numbers + letter)"})]}),!j.generateEmployeeId&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Employee ID ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"employeeId",value:j.employeeId,onChange:$,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"e.g., V1234A"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"fullName",required:!0,value:j.fullName,onChange:$,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter full name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["ID Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"idNumber",required:!0,value:j.idNumber,onChange:$,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter ID number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:j.email,onChange:$,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phoneNumber",value:j.phoneNumber,onChange:$,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Gender"}),e.jsxs("select",{name:"gender",value:j.gender,onChange:$,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Address"}),e.jsx("textarea",{name:"address",value:j.address,onChange:$,rows:"3",className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter home address"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(R,{icon:Mn,className:"mr-2 h-4 w-4 text-gray-400"}),"Work Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Department"}),e.jsxs("select",{name:"departmentId",value:j.departmentId,onChange:$,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Department"}),f.map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Job Title"}),e.jsxs("select",{name:"jobTitleId",value:j.jobTitleId,onChange:$,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Job Title"}),p.map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Hire Date (Optional)"}),e.jsx("input",{type:"date",name:"hireDate",value:j.hireDate,onChange:$,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(R,{icon:cx,className:"mr-2 h-4 w-4 text-gray-400"}),"Bank Account Information"]}),e.jsxs("button",{type:"button",onClick:L,className:"bg-gray-700 text-white px-3 py-1 text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(R,{icon:Ot,className:"mr-1 h-3 w-3"}),"Add Account"]})]}),e.jsx("div",{className:"space-y-4",children:w.map((D,I)=>e.jsxs("div",{className:"border border-gray-200 p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Account ",I+1]}),D.isPrimary&&e.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(R,{icon:fx,className:"mr-1 h-3 w-3"}),"Primary"]})]}),w.length>1&&e.jsx("button",{type:"button",onClick:()=>_(I),className:"text-red-600 hover:text-red-900",children:e.jsx(R,{icon:Yt,className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Bank Name"}),e.jsx("input",{type:"text",value:D.bankName,onChange:V=>O(I,"bankName",V.target.value),className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter bank name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Account Number"}),e.jsx("input",{type:"text",value:D.accountNumber,onChange:V=>O(I,"accountNumber",V.target.value),className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter account number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Currency"}),e.jsx("input",{type:"text",value:D.currency,onChange:V=>O(I,"currency",V.target.value),className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"e.g., USD, EUR, GBP"})]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:`isPrimary_${I}`,checked:D.isPrimary,onChange:V=>O(I,"isPrimary",V.target.checked),className:"h-4 w-4 text-gray-600 focus:ring-gray-500 border-gray-300"}),e.jsx("label",{htmlFor:`isPrimary_${I}`,className:"ml-2 block text-xs text-gray-600",children:"Set as primary account"})]})})]},I))})]}),e.jsx("div",{className:"flex justify-start",children:e.jsx("button",{type:"submit",disabled:a,className:`px-6 py-2 text-xs font-medium text-white ${a?"bg-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-800"}`,children:a?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Employee..."]}):"Create Employee"})})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-green-100 mb-4",children:e.jsx(R,{icon:sn,className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Employee Created Successfully"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"The employee has been added to the system successfully."}),e.jsx("button",{onClick:z,className:"px-4 py-2 bg-gray-700 text-white text-xs hover:bg-gray-800",children:"Continue"})]})})}),d&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-red-100 mb-4",children:e.jsx(R,{icon:la,className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Creating Employee"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:m.message}),e.jsx("button",{onClick:M,className:"px-4 py-2 bg-red-600 text-white text-xs hover:bg-red-700",children:"Close"})]})})})]})},nU=()=>{const{id:t}=ln(),{token:a}=ut(),[r,s]=g.useState(null),[n,i]=g.useState(!0),[o,d]=g.useState(""),[u,m]=g.useState("personal");g.useEffect(()=>{x()},[t]);const x=async()=>{try{i(!0),d("");const b=await ne.get(`${ie}/employees/${t}`,{headers:{Authorization:`Bearer ${a}`}});b.data.success?s(b.data.data):d("Employee not found")}catch(b){console.error("Error fetching employee:",b),d("Failed to load employee information")}finally{i(!1)}},f=b=>b?new Date(b).toLocaleDateString():"Not set";return n?e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-xs text-gray-500",children:"Loading employee information..."})})}):o||!r?e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-xs text-red-600",children:o||"Employee not found"})})}):e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:r.full_name}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Employee ID: ",r.employee_id,"  ",r.department_name||"No Department","  ",r.job_title||"No Job Title"]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold ${r.is_active?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:r.is_active?"Active":"Inactive"})})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("nav",{className:"flex space-x-8 border-b border-gray-200",children:[{id:"personal",label:"Personal Information",icon:Is},{id:"banking",label:"Banking",icon:cx}].map(b=>e.jsxs("button",{onClick:()=>m(b.id),className:`py-2 px-1 border-b-2 font-medium text-xs flex items-center ${u===b.id?"border-gray-700 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:b.icon,className:"mr-2 h-3 w-3"}),b.label]},b.id))})}),e.jsxs("div",{className:"min-h-96",children:[u==="personal"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(R,{icon:Is,className:"mr-2 h-4 w-4 text-gray-400"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Full Name"}),e.jsx("div",{className:"mt-1 text-sm text-gray-900",children:r.full_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Employee ID"}),e.jsx("div",{className:"mt-1 text-sm text-gray-900",children:r.employee_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"ID Number"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[e.jsx(R,{icon:Q2,className:"mr-2 h-4 w-4 text-gray-400"}),r.id_number]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Gender"}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-800",children:r.gender||"Not specified"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Email Address"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[e.jsx(R,{icon:TC,className:"mr-2 h-4 w-4 text-gray-400"}),r.email||"Not provided"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Phone Number"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[e.jsx(R,{icon:NN,className:"mr-2 h-4 w-4 text-gray-400"}),r.phone_number||"Not provided"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Hire Date"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[e.jsx(R,{icon:ua,className:"mr-2 h-4 w-4 text-gray-400"}),f(r.hire_date)]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Address"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-start",children:[e.jsx(R,{icon:jc,className:"mr-2 h-4 w-4 text-gray-400 mt-0.5"}),r.address||"Not provided"]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(R,{icon:Mn,className:"mr-2 h-4 w-4 text-gray-400"}),"Work Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Department"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[e.jsx(R,{icon:Mn,className:"mr-2 h-4 w-4 text-gray-400"}),r.department_name||"Not assigned"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Job Title"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[e.jsx(R,{icon:dy,className:"mr-2 h-4 w-4 text-gray-400"}),r.job_title||"Not assigned"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Employment Status"}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold ${r.is_active?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:r.is_active?"Active":"Inactive"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Date Created"}),e.jsx("div",{className:"mt-1 text-sm text-gray-900",children:f(r.created_at)})]})]})]})]}),u==="banking"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(R,{icon:cx,className:"mr-2 h-4 w-4 text-gray-400"}),"Bank Accounts"]}),r.bankAccounts&&r.bankAccounts.length>0?e.jsx("div",{className:"space-y-4",children:r.bankAccounts.map((b,p)=>e.jsxs("div",{className:"border border-gray-200 p-4 bg-gray-50",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Account ",p+1]}),b.is_primary&&e.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(R,{icon:fx,className:"mr-1 h-3 w-3"}),"Primary"]}),e.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold ${b.is_active?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:b.is_active?"Active":"Inactive"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Bank Name"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[e.jsx(R,{icon:cx,className:"mr-2 h-4 w-4 text-gray-400"}),b.bank_name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Account Number"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[e.jsx(R,{icon:On,className:"mr-2 h-4 w-4 text-gray-400"}),b.account_number]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Currency"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[e.jsx(R,{icon:Ia,className:"mr-2 h-4 w-4 text-gray-400"}),b.currency]})]})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:["Added on ",f(b.created_at)]})]},b.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:cx,className:"h-12 w-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-xs text-gray-500",children:"No bank accounts found"})]})]})})]})]})},iU=()=>{const{id:t}=ln(),a=ga(),{token:r}=ut(),[s,n]=g.useState(!1),[i,o]=g.useState(!0),[d,u]=g.useState(""),[m,x]=g.useState(!1),[f,b]=g.useState(!1),[p,v]=g.useState({}),[j,N]=g.useState([]),[w,P]=g.useState([]),[k,$]=g.useState({employeeId:"",fullName:"",idNumber:"",address:"",email:"",phoneNumber:"",gender:"",departmentId:"",jobTitleId:"",hireDate:"",generateEmployeeId:!1}),[O,L]=g.useState([{bankName:"",accountNumber:"",currency:"",isPrimary:!0}]);g.useEffect(()=>{_()},[t]);const _=async()=>{try{o(!0);const B=await ne.get(`${ie}/employees/${t}`,{headers:{Authorization:`Bearer ${r}`}});if(B.data.success){const K=B.data.data;$({employeeId:K.employee_id||"",fullName:K.full_name||"",idNumber:K.id_number||"",address:K.address||"",email:K.email||"",phoneNumber:K.phone_number||"",gender:K.gender||"",departmentId:K.department_id||"",jobTitleId:K.job_title_id||"",hireDate:K.hire_date?K.hire_date.split("T")[0]:"",generateEmployeeId:!1}),K.bankAccounts&&K.bankAccounts.length>0?L(K.bankAccounts.map(X=>({id:X.id,bankName:X.bank_name||"",accountNumber:X.account_number||"",currency:X.currency||"",isPrimary:X.is_primary||!1}))):L([{bankName:"",accountNumber:"",currency:"",isPrimary:!0}])}const W=await ne.get(`${ie}/configurations/active`,{headers:{Authorization:`Bearer ${r}`}});W.data.success&&(N(W.data.data.departments||[]),P(W.data.data.jobTitles||[]))}catch(B){console.error("Error fetching employee data:",B),u("Failed to load employee data")}finally{o(!1)}},E=B=>{const{name:W,value:K,type:X,checked:Q}=B.target;$(ye=>({...ye,[W]:X==="checkbox"?Q:K}))},A=(B,W,K)=>{L(X=>{const Q=[...X];return Q[B]={...Q[B],[W]:K},W==="isPrimary"&&K&&Q.forEach((ye,Y)=>{Y!==B&&(ye.isPrimary=!1)}),Q})},z=()=>{L(B=>[...B,{bankName:"",accountNumber:"",currency:"",isPrimary:!1}])},M=B=>{O.length>1&&L(W=>{const K=W.filter((X,Q)=>Q!==B);return W[B].isPrimary&&K.length>0&&(K[0].isPrimary=!0),K})},D=()=>k.fullName.trim()?k.idNumber.trim()?O.filter(W=>W.bankName.trim()&&W.accountNumber.trim()).length===0&&O.some(W=>W.bankName.trim()||W.accountNumber.trim())?(u("Please complete bank account information or remove incomplete entries"),!1):!0:(u("ID number is required"),!1):(u("Full name is required"),!1),I=async B=>{if(B.preventDefault(),!!D())try{n(!0),u("");const W={...k,departmentId:k.departmentId||null,jobTitleId:k.jobTitleId||null,hireDate:k.hireDate||null,bankAccounts:O.filter(X=>X.bankName.trim()&&X.accountNumber.trim())};(await ne.put(`${ie}/employees/${t}`,W,{headers:{Authorization:`Bearer ${r}`}})).data.success&&x(!0)}catch(W){console.error("Error updating employee:",W),W.response?.data?.errorType&&W.response?.data?.field?(v({type:W.response.data.errorType,field:W.response.data.field,message:W.response.data.error}),b(!0)):u(W.response?.data?.error||"Failed to update employee")}finally{n(!1)}},V=()=>{x(!1),a("/dashboard/employees")},H=()=>{b(!1),v({})};return i?e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-700"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading employee data..."})]})}):e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"mb-2",children:e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Edit Employee"})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Update employee information and banking details"})]}),d&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-3",children:e.jsx("div",{className:"text-xs text-red-600",children:d})}),e.jsxs("form",{onSubmit:I,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(R,{icon:Is,className:"mr-2 h-4 w-4 text-gray-400"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Employee ID"}),e.jsx("input",{type:"text",name:"employeeId",value:k.employeeId,onChange:E,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500 bg-gray-50",readOnly:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"fullName",required:!0,value:k.fullName,onChange:E,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter full name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["ID Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"idNumber",required:!0,value:k.idNumber,onChange:E,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter ID number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:k.email,onChange:E,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phoneNumber",value:k.phoneNumber,onChange:E,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Gender"}),e.jsxs("select",{name:"gender",value:k.gender,onChange:E,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Address"}),e.jsx("textarea",{name:"address",value:k.address,onChange:E,rows:"3",className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter home address"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(R,{icon:Mn,className:"mr-2 h-4 w-4 text-gray-400"}),"Work Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Department"}),e.jsxs("select",{name:"departmentId",value:k.departmentId,onChange:E,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Department"}),j.map(B=>e.jsx("option",{value:B.id,children:B.name},B.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Job Title"}),e.jsxs("select",{name:"jobTitleId",value:k.jobTitleId,onChange:E,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Job Title"}),w.map(B=>e.jsx("option",{value:B.id,children:B.name},B.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Hire Date (Optional)"}),e.jsx("input",{type:"date",name:"hireDate",value:k.hireDate,onChange:E,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(R,{icon:cx,className:"mr-2 h-4 w-4 text-gray-400"}),"Bank Account Information"]}),e.jsxs("button",{type:"button",onClick:z,className:"bg-gray-700 text-white px-3 py-1 text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(R,{icon:Ot,className:"mr-1 h-3 w-3"}),"Add Account"]})]}),e.jsx("div",{className:"space-y-4",children:O.map((B,W)=>e.jsxs("div",{className:"border border-gray-200 p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Account ",W+1]}),B.isPrimary&&e.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(R,{icon:fx,className:"mr-1 h-3 w-3"}),"Primary"]})]}),O.length>1&&e.jsx("button",{type:"button",onClick:()=>M(W),className:"text-red-600 hover:text-red-900",children:e.jsx(R,{icon:Yt,className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Bank Name"}),e.jsx("input",{type:"text",value:B.bankName,onChange:K=>A(W,"bankName",K.target.value),className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter bank name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Account Number"}),e.jsx("input",{type:"text",value:B.accountNumber,onChange:K=>A(W,"accountNumber",K.target.value),className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter account number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Currency"}),e.jsx("input",{type:"text",value:B.currency,onChange:K=>A(W,"currency",K.target.value),className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"e.g., USD, EUR, GBP"})]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:`isPrimary_${W}`,checked:B.isPrimary,onChange:K=>A(W,"isPrimary",K.target.checked),className:"h-4 w-4 text-gray-600 focus:ring-gray-500 border-gray-300"}),e.jsx("label",{htmlFor:`isPrimary_${W}`,className:"ml-2 block text-xs text-gray-600",children:"Set as primary account"})]})})]},W))})]}),e.jsx("div",{className:"flex justify-start",children:e.jsx("button",{type:"submit",disabled:s,className:`px-6 py-2 text-xs font-medium text-white ${s?"bg-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-800"}`,children:s?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating Employee..."]}):"Update Employee"})})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-green-100 mb-4",children:e.jsx(R,{icon:sn,className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Employee Updated Successfully"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"The employee information has been updated successfully."}),e.jsx("button",{onClick:V,className:"px-4 py-2 bg-gray-700 text-white text-xs hover:bg-gray-800",children:"Continue"})]})})}),f&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-red-100 mb-4",children:e.jsx(R,{icon:la,className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Updating Employee"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:p.message}),e.jsx("button",{onClick:H,className:"px-4 py-2 bg-red-600 text-white text-xs hover:bg-red-700",children:"Close"})]})})})]})},lU=()=>{const{token:t}=ut(),[a,r]=g.useState([]),[s,n]=g.useState(!1),[i,o]=g.useState(""),[d,u]=g.useState(""),[m,x]=g.useState(!1),[f,b]=g.useState(!1),[p,v]=g.useState(null),[j,N]=g.useState("create"),[w,P]=g.useState(1),[k,$]=g.useState(1),[O,L]=g.useState(0),_=10,[E,A]=g.useState({name:"",description:"",isActive:!0});g.useEffect(()=>{z()},[w,d]);const z=async()=>{try{n(!0),o("");const X={page:w,limit:_};d.trim()&&(X.search=d.trim());const Q=await ne.get(`${ie}/configurations/departments`,{headers:{Authorization:`Bearer ${t}`},params:X});Q.data.success&&(r(Q.data.data),Q.data.pagination&&($(Q.data.pagination.totalPages),L(Q.data.pagination.totalRecords)))}catch(X){console.error("Error fetching departments:",X),o("Failed to load departments")}finally{n(!1)}},M=()=>{P(1),z()},D=()=>{u(""),P(1)},I=()=>{N("create"),A({name:"",description:"",isActive:!0}),v(null),x(!0)},V=X=>{N("edit"),A({name:X.name,description:X.description||"",isActive:X.is_active}),v(X),x(!0)},H=X=>{v(X),b(!0)},B=async X=>{X.preventDefault();try{n(!0),o("");const Q=j==="create"?`${ie}/configurations/departments`:`${ie}/configurations/departments/${p.id}`;(await ne[j==="create"?"post":"put"](Q,E,{headers:{Authorization:`Bearer ${t}`}})).data.success&&(x(!1),z(),A({name:"",description:"",isActive:!0}))}catch(Q){console.error("Error saving department:",Q),Q.response?.data?.error?o(Q.response.data.error):o("Failed to save department")}finally{n(!1)}},W=async()=>{try{n(!0),await ne.delete(`${ie}/configurations/departments/${p.id}`,{headers:{Authorization:`Bearer ${t}`}}),b(!1),v(null),z()}catch(X){console.error("Error deleting department:",X),o(X.response?.data?.error||"Failed to delete department"),b(!1)}finally{n(!1)}},K=X=>{P(X)};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",placeholder:"Search departments...",value:d,onChange:X=>u(X.target.value),onKeyPress:X=>X.key==="Enter"&&M(),className:"border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500"}),e.jsx("button",{onClick:M,className:"ml-2 bg-gray-700 text-white px-3 py-2 text-xs hover:bg-gray-800",children:e.jsx(R,{icon:aa,className:"h-3 w-3"})}),d&&e.jsx("button",{onClick:D,className:"ml-2 text-gray-500 hover:text-gray-700 text-xs",children:"Clear"})]})}),e.jsxs("button",{onClick:I,className:"bg-gray-700 text-white px-4 py-2 text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(R,{icon:Ot,className:"mr-2 h-3 w-3"}),"Add Department"]})]}),i&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-3",children:e.jsx("div",{className:"text-xs text-red-600",children:i})}),e.jsx("div",{className:"bg-white border border-gray-200",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-100/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Employees"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-xs text-gray-500",children:"Loading departments..."})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-xs text-gray-500",children:"No departments found"})}):a.map(X=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:Mn,className:"h-4 w-4 text-gray-400 mr-3"}),e.jsx("div",{children:e.jsx("div",{className:"font-medium text-gray-900",children:X.name})})]})}),e.jsx("td",{className:"px-6 py-4 text-xs text-gray-500",children:e.jsx("div",{className:"max-w-xs truncate",children:X.description||"No description"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(R,{icon:za,className:"h-3 w-3 mr-1"}),X.employee_count||0]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold ${X.is_active?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:X.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>V(X),className:"text-blue-600 hover:text-blue-900",title:"Edit Department",children:e.jsx(R,{icon:ha,className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>H(X),className:"text-red-600 hover:text-red-900",title:"Delete Department",children:e.jsx(R,{icon:Yt,className:"h-4 w-4"})})]})})]},X.id))})]})}),k>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",(w-1)*_+1," to ",Math.min(w*_,O)," of ",O," departments"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>K(w-1),disabled:w===1,className:`px-3 py-1 text-xs border ${w===1?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.jsx(R,{icon:qf,className:"h-3 w-3"})}),[...Array(k)].map((X,Q)=>e.jsx("button",{onClick:()=>K(Q+1),className:`px-3 py-1 text-xs border ${w===Q+1?"border-gray-700 bg-gray-700 text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:Q+1},Q+1)),e.jsx("button",{onClick:()=>K(w+1),disabled:w===k,className:`px-3 py-1 text-xs border ${w===k?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.jsx(R,{icon:zf,className:"h-3 w-3"})})]})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:j==="create"?"Add New Department":"Edit Department"}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Department Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:E.name,onChange:X=>A({...E,name:X.target.value}),className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter department name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Description"}),e.jsx("textarea",{value:E.description,onChange:X=>A({...E,description:X.target.value}),rows:"3",className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter department description"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:E.isActive,onChange:X=>A({...E,isActive:X.target.checked}),className:"h-4 w-4 text-gray-600 focus:ring-gray-500 border-gray-300"}),e.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-xs text-gray-600",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-gray-700 text-white text-xs hover:bg-gray-800 disabled:bg-gray-400",children:s?"Saving...":j==="create"?"Create":"Update"})]})]})]})})}),f&&p&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-red-100 mb-4",children:e.jsx(R,{icon:Yt,className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Department"}),e.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:['Are you sure you want to delete "',p.name,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:W,disabled:s,className:"px-4 py-2 bg-red-600 text-white text-xs hover:bg-red-700 disabled:bg-red-400",children:s?"Deleting...":"Delete"})]})]})})})]})},oU=()=>{const{token:t}=ut(),[a,r]=g.useState([]),[s,n]=g.useState(!1),[i,o]=g.useState(""),[d,u]=g.useState(""),[m,x]=g.useState(!1),[f,b]=g.useState(!1),[p,v]=g.useState(null),[j,N]=g.useState("create"),[w,P]=g.useState(1),[k,$]=g.useState(1),[O,L]=g.useState(0),_=10,[E,A]=g.useState({title:"",description:"",isActive:!0});g.useEffect(()=>{z()},[w,d]);const z=async()=>{try{n(!0),o("");const X={page:w,limit:_};d.trim()&&(X.search=d.trim());const Q=await ne.get(`${ie}/configurations/job-titles`,{headers:{Authorization:`Bearer ${t}`},params:X});Q.data.success&&(r(Q.data.data),Q.data.pagination&&($(Q.data.pagination.totalPages),L(Q.data.pagination.totalRecords)))}catch(X){console.error("Error fetching job titles:",X),o("Failed to load job titles")}finally{n(!1)}},M=()=>{P(1),z()},D=()=>{u(""),P(1)},I=()=>{N("create"),A({title:"",description:"",isActive:!0}),v(null),x(!0)},V=X=>{N("edit"),A({title:X.title,description:X.description||"",isActive:X.is_active}),v(X),x(!0)},H=X=>{v(X),b(!0)},B=async X=>{X.preventDefault();try{n(!0),o("");const Q=j==="create"?`${ie}/configurations/job-titles`:`${ie}/configurations/job-titles/${p.id}`;(await ne[j==="create"?"post":"put"](Q,E,{headers:{Authorization:`Bearer ${t}`}})).data.success&&(x(!1),z(),A({title:"",description:"",isActive:!0}))}catch(Q){console.error("Error saving job title:",Q),Q.response?.data?.error?o(Q.response.data.error):o("Failed to save job title")}finally{n(!1)}},W=async()=>{try{n(!0),await ne.delete(`${ie}/configurations/job-titles/${p.id}`,{headers:{Authorization:`Bearer ${t}`}}),b(!1),v(null),z()}catch(X){console.error("Error deleting job title:",X),o(X.response?.data?.error||"Failed to delete job title"),b(!1)}finally{n(!1)}},K=X=>{P(X)};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",placeholder:"Search job titles...",value:d,onChange:X=>u(X.target.value),onKeyPress:X=>X.key==="Enter"&&M(),className:"border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500"}),e.jsx("button",{onClick:M,className:"ml-2 bg-gray-700 text-white px-3 py-2 text-xs hover:bg-gray-800",children:e.jsx(R,{icon:aa,className:"h-3 w-3"})}),d&&e.jsx("button",{onClick:D,className:"ml-2 text-gray-500 hover:text-gray-700 text-xs",children:"Clear"})]})}),e.jsxs("button",{onClick:I,className:"bg-gray-700 text-white px-4 py-2 text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(R,{icon:Ot,className:"mr-2 h-3 w-3"}),"Add Job Title"]})]}),i&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-3",children:e.jsx("div",{className:"text-xs text-red-600",children:i})}),e.jsx("div",{className:"bg-white border border-gray-200",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-100/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Job Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Employees"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-xs text-gray-500",children:"Loading job titles..."})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-xs text-gray-500",children:"No job titles found"})}):a.map(X=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:dy,className:"h-4 w-4 text-gray-400 mr-3"}),e.jsx("div",{children:e.jsx("div",{className:"font-medium text-gray-900",children:X.title})})]})}),e.jsx("td",{className:"px-6 py-4 text-xs text-gray-500",children:e.jsx("div",{className:"max-w-xs truncate",children:X.description||"No description"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(R,{icon:za,className:"h-3 w-3 mr-1"}),X.employee_count||0]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold ${X.is_active?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:X.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>V(X),className:"text-blue-600 hover:text-blue-900",title:"Edit Job Title",children:e.jsx(R,{icon:ha,className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>H(X),className:"text-red-600 hover:text-red-900",title:"Delete Job Title",children:e.jsx(R,{icon:Yt,className:"h-4 w-4"})})]})})]},X.id))})]})}),k>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",(w-1)*_+1," to ",Math.min(w*_,O)," of ",O," job titles"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>K(w-1),disabled:w===1,className:`px-3 py-1 text-xs border ${w===1?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.jsx(R,{icon:qf,className:"h-3 w-3"})}),[...Array(k)].map((X,Q)=>e.jsx("button",{onClick:()=>K(Q+1),className:`px-3 py-1 text-xs border ${w===Q+1?"border-gray-700 bg-gray-700 text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:Q+1},Q+1)),e.jsx("button",{onClick:()=>K(w+1),disabled:w===k,className:`px-3 py-1 text-xs border ${w===k?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.jsx(R,{icon:zf,className:"h-3 w-3"})})]})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:j==="create"?"Add New Job Title":"Edit Job Title"}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Job Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:E.title,onChange:X=>A({...E,title:X.target.value}),className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter job title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Description"}),e.jsx("textarea",{value:E.description,onChange:X=>A({...E,description:X.target.value}),rows:"3",className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter job title description"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:E.isActive,onChange:X=>A({...E,isActive:X.target.checked}),className:"h-4 w-4 text-gray-600 focus:ring-gray-500 border-gray-300"}),e.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-xs text-gray-600",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-gray-700 text-white text-xs hover:bg-gray-800 disabled:bg-gray-400",children:s?"Saving...":j==="create"?"Create":"Update"})]})]})]})})}),f&&p&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-red-100 mb-4",children:e.jsx(R,{icon:Yt,className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Job Title"}),e.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:['Are you sure you want to delete "',p.title,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:W,disabled:s,className:"px-4 py-2 bg-red-600 text-white text-xs hover:bg-red-700 disabled:bg-red-400",children:s?"Deleting...":"Delete"})]})]})})})]})},cU=()=>{const{token:t}=ut(),[a,r]=g.useState([]),[s,n]=g.useState({code:"",name:"",symbol:"",is_active:!0}),[i,o]=g.useState(!1),[d,u]=g.useState("");g.useEffect(()=>{m()},[]);const m=async()=>{o(!0),u("");try{const b=await ne.get(`${ie}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}});b.data.success?r(b.data.data||[]):u("Failed to load currencies.")}catch{u("Failed to load currencies.")}finally{o(!1)}},x=b=>{const{name:p,value:v,type:j,checked:N}=b.target;n(w=>({...w,[p]:j==="checkbox"?N:v}))},f=async b=>{b.preventDefault(),o(!0),u("");try{const p=await ne.post(`${ie}/accounting/currencies`,s,{headers:{Authorization:`Bearer ${t}`}});p.data.success?(n({code:"",name:"",symbol:"",is_active:!0}),m()):u(p.data.message||"Failed to add currency.")}catch(p){u(p.response?.data?.message||"Failed to add currency.")}finally{o(!1)}};return e.jsxs("div",{className:"mt-12",children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsx("h2",{className:"text-base font-semibold text-gray-800",children:"Currencies"})}),e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden mb-6",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-xs font-semibold text-gray-700",children:"Add New Currency"})}),e.jsxs("form",{className:"px-4 py-4 flex flex-col md:flex-row md:items-end gap-4",onSubmit:f,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"code",value:s.code,onChange:x,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0},required:!0})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:x,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0},required:!0})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Symbol"}),e.jsx("input",{type:"text",name:"symbol",value:s.symbol,onChange:x,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0}})]}),e.jsxs("div",{className:"flex items-center mb-2 md:mb-0",children:[e.jsx("input",{type:"checkbox",name:"is_active",checked:s.is_active,onChange:x,className:"mr-2 border-gray-300 focus:ring-gray-900",style:{borderRadius:0},id:"is_active"}),e.jsx("label",{htmlFor:"is_active",className:"text-xs text-gray-700",children:"Active"})]}),e.jsxs("button",{type:"submit",className:"px-4 py-2 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900",style:{borderRadius:0},disabled:i,children:[e.jsx(R,{icon:Ot,className:"mr-2 h-3 w-3"}),i?"Saving...":"Add Currency"]})]}),d&&e.jsx("div",{className:"px-4 pb-2 text-xs text-red-600",children:d})]}),e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-xs font-semibold text-gray-700",children:"Currencies List"})}),e.jsx("div",{className:"border-t border-gray-200",children:i?e.jsx("div",{className:"p-6 text-xs text-gray-500",children:"Loading currencies..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Code"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Symbol"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(b=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap font-mono",children:b.code}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:b.name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:b.symbol||"-"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("span",{className:b.is_active?"text-gray-700":"text-gray-400",children:b.is_active?"Active":"Inactive"})})]},b.id))})]})})})]})]})},dU=()=>{const[t,a]=g.useState("departments");return e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Configurations"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Manage departments, job titles, and currencies for employee assignments and accounting"})]})})}),e.jsx("div",{className:"mb-6",children:e.jsx("nav",{className:"flex space-x-8 border-b border-gray-200",children:[{id:"departments",label:"Departments",icon:Mn},{id:"job-titles",label:"Job Titles",icon:dy},{id:"currencies",label:"Currencies",icon:_i}].map(r=>e.jsxs("button",{onClick:()=>a(r.id),className:`py-2 px-1 border-b-2 font-medium text-xs flex items-center ${t===r.id?"border-gray-700 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:r.icon,className:"mr-2 h-3 w-3"}),r.label]},r.id))})}),e.jsxs("div",{className:"min-h-96 mb-12",children:[t==="departments"&&e.jsx(lU,{}),t==="job-titles"&&e.jsx(oU,{}),t==="currencies"&&e.jsx(cU,{})]})]})},uU=()=>{const{token:t}=ut(),[a,r]=g.useState([]),[s,n]=g.useState(!1),[i,o]=g.useState(null),[d,u]=g.useState(""),[m,x]=g.useState(""),[f,b]=g.useState(!1),[p,v]=g.useState(null);g.useEffect(()=>{j()},[m]);const j=async()=>{try{if(n(!0),o(null),m&&m.trim()!==""){console.log(" Searching for:",m);const _=(await ne.get(`${ie}/classes/gradelevel-classes/search`,{params:{search:m.trim()},headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data;console.log(" Search results:",_),r(_.data||[])}else{console.log(" Fetching all classes");const _=(await ne.get(`${ie}/classes/gradelevel-classes`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data;console.log(" Raw response:",_),r(_.data||[])}}catch(L){console.error("Error fetching grade-level classes:",L),L.response?o(`Error: ${L.response.status} - ${L.response.data?.message||L.response.statusText}`):L.request?o("No response from server. Please check your connection."):o(`Error: ${L.message}`)}finally{n(!1)}},N=L=>{L.preventDefault(),d.trim()&&(console.log(" Starting search with term:",d),x(d))},w=()=>{u(""),x("")},P=async L=>{v(L),b(!0)},k=async()=>{if(p)try{await ne.delete(`${ie}/classes/gradelevel-classes/${p}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),j(),b(!1),v(null)}catch(L){console.error("Error deleting class:",L),alert("Failed to delete class. Please try again.")}},$=()=>{b(!1),v(null)},O=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 max-w-md",children:[e.jsxs("form",{onSubmit:N,className:"flex",children:[e.jsx("input",{type:"text",value:d,onChange:L=>u(L.target.value),placeholder:"Search by class name or stream name...",className:"flex-1 px-2 py-1 border border-gray-300  focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs"}),e.jsx("button",{type:"submit",className:"inline-flex items-center justify-center px-2 py-1 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:e.jsx(R,{icon:aa,className:"h-3 w-3"})})]}),m&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[s?"Searching...":`Found ${a.length} results for "${m}"`,e.jsx("button",{onClick:w,className:"ml-2 text-blue-600 hover:text-blue-800 underline text-xs",children:"Clear search"})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs(Zt,{to:"/dashboard/classes/gradelevel-classes/add",className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[e.jsx(R,{icon:Ot,className:"mr-1 h-3 w-3"}),"Add New Class"]})})]}),i&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-md p-3",children:e.jsx("div",{className:"text-xs text-red-600",children:i})}),e.jsx("div",{className:"mt-8 flex flex-col",children:e.jsx("div",{className:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Class Name"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium  tracking-wider",children:"Stream"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium  tracking-wider",children:"Stage"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium  tracking-wider",children:"Teacher"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium  tracking-wider",children:"Capacity"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium  tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(L=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900 font-medium",children:L.name})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:L.stream_name||"N/A"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:L.stream_stage||"N/A"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:L.teacher_name||"Not Assigned"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:L.capacity||"Unlimited"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Zt,{to:`/dashboard/classes/gradelevel-classes/view/${L.id}`,className:"text-blue-600 hover:text-blue-900",title:"View Class",children:e.jsx(R,{icon:Ma,className:"h-3 w-3"})}),e.jsx(Zt,{to:`/dashboard/classes/gradelevel-classes/edit/${L.id}`,className:"text-indigo-600 hover:text-indigo-900",title:"Edit Class",children:e.jsx(R,{icon:ha,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>P(L.id),className:"text-red-600 hover:text-red-900",title:"Delete Class",children:e.jsx(R,{icon:Yt,className:"h-3 w-3"})})]})})]},L.id))})]})})})})}),!s&&a.length===0&&e.jsxs("div",{className:"mt-8 text-center",children:[e.jsx(R,{icon:za,className:"mx-auto h-8 w-8 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-xs font-medium text-gray-900",children:"No grade-level classes found"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:m?"Try adjusting your search terms.":"Get started by creating a new class."}),!m&&e.jsx("div",{className:"mt-4",children:e.jsxs(Zt,{to:"/dashboard/classes/gradelevel-classes/add",className:"inline-flex items-center px-3 py-1 border border-transparent shadow-sm text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[e.jsx(R,{icon:Ot,className:"mr-1 h-3 w-3"}),"Add New Class"]})})]}),s&&e.jsx("div",{className:"mt-8 text-center",children:e.jsx("div",{className:"text-xs text-gray-500",children:"Loading grade-level classes..."})})]});return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-base font-bold text-gray-900 mb-2",children:"Class Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage academic streams, classes, subjects, and student enrollments"})]}),O(),f&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:e.jsx(R,{icon:Yt,className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:"Delete Class"}),e.jsx("div",{className:"mt-2 px-7 pt-4",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this class? This action cannot be undone."})}),e.jsxs("div",{className:"flex items-center justify-center space-x-3 mt-6",children:[e.jsx("button",{onClick:$,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),e.jsx("button",{onClick:k,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Delete"})]})]})})})]})},mU=()=>{const{token:t}=ut(),[a,r]=g.useState([]),[s,n]=g.useState(!1),[i,o]=g.useState(""),[d,u]=g.useState(!1),[m,x]=g.useState(!1),[f,b]=g.useState({}),[p,v]=g.useState(""),[j,N]=g.useState([]),[w,P]=g.useState(!1),[k,$]=g.useState(""),[O,L]=g.useState(!1),[_,E]=g.useState({stream_id:"",name:"",homeroom_teacher_employee_number:"",capacity:""});g.useEffect(()=>{A()},[]),g.useEffect(()=>{if(!p.trim()){N([]),$("");return}P(!0),$("");const W=setTimeout(async()=>{try{const K=await ne.get(`${ie}/employees/search`,{params:{query:p},headers:{Authorization:`Bearer ${t}`}});K.data.success?N(K.data.data||[]):$("Failed to search employees")}catch{$("Failed to search employees")}finally{P(!1)}},400);return()=>clearTimeout(W)},[p,t]);const A=async()=>{try{const W=await ne.get(`${ie}/classes/streams`,{headers:{Authorization:`Bearer ${t}`}});W.data.success&&r(W.data.data||[])}catch{o("Failed to load streams")}},z=W=>{const{name:K,value:X}=W.target;E(Q=>({...Q,[K]:X}))},M=W=>{v(W.target.value),L(!0)},D=W=>{E(K=>({...K,homeroom_teacher_employee_number:W.employee_id})),v(`${W.full_name} (${W.employee_id})`),L(!1)},I=()=>_.stream_id?_.name.trim()?_.capacity&&isNaN(Number(_.capacity))?(o("Capacity must be a number"),!1):!0:(o("Class name is required"),!1):(o("Stream is required"),!1),V=async W=>{if(W.preventDefault(),o(""),!!I())try{n(!0);const K={..._,capacity:_.capacity?Number(_.capacity):null,homeroom_teacher_employee_number:_.homeroom_teacher_employee_number||null};(await ne.post(`${ie}/classes/gradelevel-classes`,K,{headers:{Authorization:`Bearer ${t}`}})).data.success&&(u(!0),E({stream_id:"",name:"",homeroom_teacher_employee_number:"",capacity:""}),v(""))}catch(K){K.response?.data?.message?(b({message:K.response.data.message}),x(!0)):o("Failed to create class")}finally{n(!1)}},H=()=>u(!1),B=()=>{x(!1),b({})};return e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-lg font-bold text-gray-900 flex items-center",children:[e.jsx(R,{icon:za,className:"mr-2 h-5 w-5 text-gray-400"}),"Add Gradelevel Class"]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Create a new gradelevel class (homeroom) within a stream."})]}),i&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-3",children:e.jsx("div",{className:"text-xs text-red-600",children:i})}),e.jsxs("form",{onSubmit:V,className:"space-y-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Stream ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"stream_id",value:_.stream_id,onChange:z,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Stream"}),a.map(W=>e.jsxs("option",{value:W.id,children:[W.name," (",W.stage,")"]},W.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Class Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:_.name,onChange:z,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 1A, 2B, Form 1",required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Homeroom Teacher ",e.jsx("span",{className:"text-gray-400",children:"(search by name or ID)"})]}),e.jsx("input",{type:"text",name:"homeroom_teacher_search",value:p,onChange:M,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Type to search...",autoComplete:"off",onFocus:()=>L(!0)}),O&&p&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded shadow max-h-48 overflow-y-auto",children:w?e.jsxs("div",{className:"p-2 text-xs text-gray-500 flex items-center",children:[e.jsx(R,{icon:Yr,spin:!0,className:"mr-2"}),"Searching..."]}):k?e.jsx("div",{className:"p-2 text-xs text-red-600",children:k}):j.length===0?e.jsx("div",{className:"p-2 text-xs text-gray-500",children:"No employees found."}):j.map(W=>e.jsxs("div",{className:"p-2 text-xs cursor-pointer hover:bg-blue-50",onClick:()=>D(W),children:[e.jsx("span",{className:"font-medium text-gray-900",children:W.full_name})," ",e.jsxs("span",{className:"text-gray-500",children:["(",W.employee_id,")"]}),W.job_title&&e.jsx("span",{className:"ml-2 text-gray-400",children:W.job_title})]},W.employee_id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Capacity"}),e.jsx("input",{type:"number",name:"capacity",value:_.capacity,onChange:z,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 40",min:"1"})]})]})}),e.jsx("div",{className:"flex justify-start",children:e.jsx("button",{type:"submit",disabled:s,className:`px-6 py-2 text-xs font-medium text-white ${s?"bg-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-800"}`,children:s?"Creating...":"Create Class"})})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-green-100 mb-4",children:e.jsx(R,{icon:sn,className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Class Created Successfully"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"The gradelevel class has been added to the system successfully."}),e.jsx("button",{onClick:H,className:"px-4 py-2 bg-gray-700 text-white text-xs hover:bg-gray-800",children:"Continue"})]})})}),m&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-red-100 mb-4",children:e.jsx(R,{icon:la,className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Creating Class"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:f.message}),e.jsx("button",{onClick:B,className:"px-4 py-2 bg-red-600 text-white text-xs hover:bg-red-700",children:"Close"})]})})})]})},xU=()=>{const{token:t}=ut(),{id:a}=ln(),r=ga(),[s,n]=g.useState([]),[i,o]=g.useState(!1),[d,u]=g.useState(!0),[m,x]=g.useState(""),[f,b]=g.useState(!1),[p,v]=g.useState(!1),[j,N]=g.useState({}),[w,P]=g.useState(""),[k,$]=g.useState([]),[O,L]=g.useState(!1),[_,E]=g.useState(""),[A,z]=g.useState(!1),[M,D]=g.useState({stream_id:"",name:"",homeroom_teacher_employee_number:"",capacity:""});g.useEffect(()=>{I(),V()},[a]),g.useEffect(()=>{const J=setTimeout(()=>{w.trim().length>=2?H(w.trim()):($([]),E(""))},300);return()=>clearTimeout(J)},[w]);const I=async()=>{try{const J=await ne.get(`${ie}/classes/streams`,{headers:{Authorization:`Bearer ${t}`}});J.data.success&&n(J.data.data)}catch(J){console.error("Error fetching streams:",J)}},V=async()=>{try{u(!0);const J=await ne.get(`${ie}/classes/gradelevel-classes/${a}`,{headers:{Authorization:`Bearer ${t}`}});if(J.data.success){const U=J.data.data;D({stream_id:U.stream_id||"",name:U.name||"",homeroom_teacher_employee_number:U.homeroom_teacher_employee_number||"",capacity:U.capacity||""}),U.teacher_name&&P(`${U.teacher_name} (${U.homeroom_teacher_employee_number})`)}else x("Failed to load class information.")}catch{x("Failed to load class information.")}finally{u(!1)}},H=async J=>{try{L(!0),E("");const U=await ne.get(`${ie}/employees/search?q=${encodeURIComponent(J)}`,{headers:{Authorization:`Bearer ${t}`}});U.data.success?$(U.data.data):E("Failed to search employees")}catch{E("Failed to search employees")}finally{L(!1)}},B=J=>{const{name:U,value:ee}=J.target;D(he=>({...he,[U]:ee}))},W=J=>{P(J.target.value),z(!0)},K=J=>{D(U=>({...U,homeroom_teacher_employee_number:J.employee_id})),P(`${J.full_name} (${J.employee_id})`),z(!1)},X=()=>M.stream_id?M.name.trim()?M.capacity&&isNaN(Number(M.capacity))?(x("Capacity must be a number"),!1):!0:(x("Class name is required"),!1):(x("Stream is required"),!1),Q=async J=>{if(J.preventDefault(),x(""),!!X())try{o(!0);const U={...M,capacity:M.capacity?Number(M.capacity):null,homeroom_teacher_employee_number:M.homeroom_teacher_employee_number||null};(await ne.put(`${ie}/classes/gradelevel-classes/${a}`,U,{headers:{Authorization:`Bearer ${t}`}})).data.success&&b(!0)}catch(U){U.response?.data?.message?(N({message:U.response.data.message}),v(!0)):x("Failed to update class")}finally{o(!1)}},ye=()=>{b(!1),r("/dashboard/classes")},Y=()=>{v(!1),N({})};return d?e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{icon:Yr,spin:!0,className:"h-8 w-8 text-gray-400 mb-4"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Loading class information..."})]})})}):e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("button",{onClick:()=>r("/dashboard/classes"),className:"mr-3 p-2 text-gray-400 hover:text-gray-600",title:"Back to Classes",children:e.jsx(R,{icon:em,className:"h-4 w-4"})}),e.jsxs("h1",{className:"text-lg font-bold text-gray-900 flex items-center",children:[e.jsx(R,{icon:ha,className:"mr-2 h-5 w-5 text-gray-400"}),"Edit Gradelevel Class"]})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Update the gradelevel class information."})]}),m&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-3",children:e.jsx("div",{className:"text-xs text-red-600",children:m})}),e.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Stream ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"stream_id",value:M.stream_id,onChange:B,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Stream"}),s.map(J=>e.jsxs("option",{value:J.id,children:[J.name," (",J.stage,")"]},J.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Class Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:M.name,onChange:B,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 1A, 2B, Form 1",required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Homeroom Teacher ",e.jsx("span",{className:"text-gray-400",children:"(search by name or ID)"})]}),e.jsx("input",{type:"text",name:"homeroom_teacher_search",value:w,onChange:W,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Type to search...",autoComplete:"off",onFocus:()=>z(!0)}),A&&w&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded shadow max-h-48 overflow-y-auto",children:O?e.jsxs("div",{className:"p-2 text-xs text-gray-500 flex items-center",children:[e.jsx(R,{icon:Yr,spin:!0,className:"mr-2"}),"Searching..."]}):_?e.jsx("div",{className:"p-2 text-xs text-red-600",children:_}):k.length===0?e.jsx("div",{className:"p-2 text-xs text-gray-500",children:"No employees found."}):k.map(J=>e.jsxs("div",{className:"p-2 text-xs cursor-pointer hover:bg-blue-50",onClick:()=>K(J),children:[e.jsx("span",{className:"font-medium text-gray-900",children:J.full_name})," ",e.jsxs("span",{className:"text-gray-500",children:["(",J.employee_id,")"]}),J.job_title&&e.jsx("span",{className:"ml-2 text-gray-400",children:J.job_title})]},J.employee_id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Capacity"}),e.jsx("input",{type:"number",name:"capacity",value:M.capacity,onChange:B,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 40",min:"1"})]})]})}),e.jsxs("div",{className:"flex justify-start space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>r("/dashboard/classes"),className:"px-6 py-2 text-xs font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:`px-6 py-2 text-xs font-medium text-white ${i?"bg-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-800"}`,children:i?"Updating...":"Update Class"})]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-green-100 mb-4",children:e.jsx(R,{icon:sn,className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Class Updated Successfully"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"The gradelevel class has been updated successfully."}),e.jsx("button",{onClick:ye,className:"px-4 py-2 bg-gray-700 text-white text-xs hover:bg-gray-800",children:"Continue"})]})})}),p&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-red-100 mb-4",children:e.jsx(R,{icon:la,className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Updating Class"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:j.message}),e.jsx("button",{onClick:Y,className:"px-4 py-2 bg-red-600 text-white text-xs hover:bg-red-700",children:"Close"})]})})})]})},hU=({classId:t})=>{const{token:a}=ut(),[r,s]=g.useState([]),[n,i]=g.useState(!0),[o,d]=g.useState(""),[u,m]=g.useState(!1),[x,f]=g.useState(""),[b,p]=g.useState([]),[v,j]=g.useState(!1),[N,w]=g.useState(""),[P,k]=g.useState(null),[$,O]=g.useState(""),[L,_]=g.useState(null),[E,A]=g.useState(null),[z,M]=g.useState("");g.useEffect(()=>{D()},[t]);const D=async()=>{i(!0),d("");try{const B=await ne.get(`${ie}/classes/gradelevel-enrollments`,{params:{gradelevel_class_id:t},headers:{Authorization:`Bearer ${a}`}});B.data.success?s(B.data.data||[]):d("Failed to load students.")}catch{d("Failed to load students.")}finally{i(!1)}},I=async B=>{B.preventDefault(),j(!0),w(""),p([]);try{const W=await ne.get(`${ie}/students/search`,{params:{query:x},headers:{Authorization:`Bearer ${a}`}});W.data.success?p(W.data.data||[]):w("Failed to search students.")}catch{w("Failed to search students.")}finally{j(!1)}},V=async B=>{k(B.RegNumber),O("");try{const W=await ne.post(`${ie}/classes/gradelevel-enrollments`,{student_regnumber:B.RegNumber,gradelevel_class_id:t},{headers:{Authorization:`Bearer ${a}`}});W.data.success?(m(!1),f(""),p([]),D()):O(W.data.message||"Failed to add student.")}catch(W){O(W.response?.data?.message||"Failed to add student.")}finally{k(null)}},H=async B=>{_(B.id),M("");try{await ne.delete(`${ie}/classes/gradelevel-enrollments/${B.id}`,{headers:{Authorization:`Bearer ${a}`}}),D(),A(null)}catch{M("Failed to de-enroll student.")}finally{_(null)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-sm text-gray-700 flex items-center",children:[e.jsx(R,{icon:Is,className:"mr-2 h-4 w-4 text-gray-400"}),"Students Enrolled"]}),e.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium text-white bg-gray-900  hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(R,{icon:Ot,className:"mr-1 h-3 w-3"}),"Add Student"]})]}),n?e.jsx("div",{className:"text-xs text-gray-500",children:"Loading students..."}):o?e.jsx("div",{className:"text-xs text-red-600",children:o}):r.length===0?e.jsx("div",{className:"text-xs text-gray-500",children:"No students enrolled in this class."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Student Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Student ID"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(B=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap",children:[B.Name," ",B.Surname]}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:B.RegNumber}),e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap",children:[e.jsxs("button",{onClick:()=>A(B.id),className:"inline-flex items-center px-2 py-1 text-xs text-red-600 hover:text-white border border-red-200 hover:bg-red-600 rounded",disabled:L===B.id,children:[e.jsx(R,{icon:Yt,className:"h-3 w-3 mr-1"}),"De-enroll"]}),E===B.id&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded shadow w-full max-w-md",children:[e.jsx("div",{className:"text-base text-gray-900 mb-4",children:"Are you sure you want to de-enroll this student?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>A(null),className:"px-5 py-2 text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsxs("button",{onClick:()=>H(B),className:"px-5 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 flex items-center",disabled:L===B.id,children:[L===B.id?e.jsx(R,{icon:Yr,spin:!0,className:"h-4 w-4 mr-2"}):e.jsx(R,{icon:Yt,className:"h-4 w-4 mr-2"}),"De-enroll"]})]})]})})]})]},B.RegNumber))})]})}),u&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded shadow w-full max-w-2xl",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Add Student to Class"}),e.jsxs("form",{onSubmit:I,className:"mb-4",children:[e.jsxs("div",{className:"flex mb-2",children:[e.jsx("input",{type:"text",value:x,onChange:B=>f(B.target.value),placeholder:"Search by registration number, first name, or surname",className:"flex-1 px-3 py-2 border border-gray-300 text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),e.jsxs("button",{type:"submit",className:"ml-2 px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 flex items-center",disabled:v,children:[v?e.jsx(R,{icon:Yr,spin:!0,className:"h-4 w-4"}):e.jsx(R,{icon:aa,className:"h-4 w-4"}),e.jsx("span",{className:"ml-2",children:"Search"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" You can search by registration number, first name, or surname"})]}),N&&e.jsx("div",{className:"text-xs text-red-600 mb-2",children:N}),$&&e.jsx("div",{className:"text-xs text-red-600 mb-2",children:$}),e.jsxs("div",{className:"max-h-80 overflow-y-auto",children:[b.length===0&&!v&&e.jsx("div",{className:"text-xs text-gray-500",children:"No students found."}),b.map(B=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-sm text-gray-900",children:[B.Name," ",B.Surname]}),e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:B.RegNumber})]}),e.jsxs("button",{onClick:()=>V(B),className:"ml-2 px-4 py-2 bg-blue-600 text-white text-xs font-medium rounded hover:bg-blue-700 flex items-center",disabled:P===B.RegNumber,children:[P===B.RegNumber?e.jsx(R,{icon:Yr,spin:!0,className:"h-4 w-4"}):e.jsx(R,{icon:Ot,className:"h-4 w-4"}),e.jsx("span",{className:"ml-2",children:"Add"})]})]},B.RegNumber))]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>m(!1),className:"px-5 py-2 text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Close"})})]})})]})},fU=({classId:t,streamId:a})=>{const{token:r}=ut(),[s,n]=g.useState(!1),[i,o]=g.useState({subject_id:"",employee_number:"",capacity:""}),[d,u]=g.useState(""),[m,x]=g.useState([]),[f,b]=g.useState(!1),[p,v]=g.useState(!1),[j,N]=g.useState(""),[w,P]=g.useState([]),[k,$]=g.useState(!1),[O,L]=g.useState(!1),[_,E]=g.useState(!1),[A,z]=g.useState(""),[M,D]=g.useState(!1),[I,V]=g.useState(!1),[H,B]=g.useState({}),[W,K]=g.useState([]),[X,Q]=g.useState(!1),[ye,Y]=g.useState(""),[J,U]=g.useState(null),[ee,he]=g.useState(null),[pe,se]=g.useState("");xx.useEffect(()=>{if(!d.trim()){x([]);return}b(!0);const ve=setTimeout(async()=>{try{const Me=await ne.get(`${ie}/classes/subjects/search`,{params:{q:d},headers:{Authorization:`Bearer ${r}`}});Me.data.success&&x(Me.data.data||[])}catch{x([])}finally{b(!1)}},400);return()=>clearTimeout(ve)},[d,r]),xx.useEffect(()=>{if(!j.trim()){P([]);return}$(!0);const ve=setTimeout(async()=>{try{const Me=await ne.get(`${ie}/employees/search`,{params:{query:j},headers:{Authorization:`Bearer ${r}`}});Me.data.success&&P(Me.data.data||[])}catch{P([])}finally{$(!1)}},400);return()=>clearTimeout(ve)},[j,r]),xx.useEffect(()=>{t&&(Q(!0),Y(""),ne.get(`${ie}/classes/subject-classes`,{params:{gradelevel_class_id:t},headers:{Authorization:`Bearer ${r}`}}).then(ve=>{ve.data.success?K(ve.data.data||[]):Y("Failed to load subject classes.")}).catch(()=>Y("Failed to load subject classes.")).finally(()=>Q(!1)))},[t,s]);const te=ve=>{const{name:Me,value:et}=ve.target;o(Ie=>({...Ie,[Me]:et}))},ue=ve=>{u(ve.target.value),v(!0)},ge=ve=>{o(Me=>({...Me,subject_id:ve.id})),u(`${ve.name} (${ve.code})`),v(!1)},ce=ve=>{N(ve.target.value),L(!0)},De=ve=>{o(Me=>({...Me,employee_number:ve.employee_id})),N(`${ve.full_name} (${ve.employee_id})`),L(!1)},ke=()=>i.subject_id?i.employee_number?!0:(z("Teacher is required"),!1):(z("Subject is required"),!1),re=async ve=>{if(ve.preventDefault(),z(""),!!ke())try{E(!0);const Me={...i,gradelevel_class_id:t,stream_id:a,capacity:i.capacity?Number(i.capacity):null};(await ne.post(`${ie}/classes/subject-classes`,Me,{headers:{Authorization:`Bearer ${r}`}})).data.success&&(D(!0),o({subject_id:"",employee_number:"",capacity:""}),u(""),N(""),n(!1))}catch(Me){Me.response?.data?.message?(B({message:Me.response.data.message}),V(!0)):z("Failed to create subject class")}finally{E(!1)}},Ee=()=>D(!1),Se=()=>{V(!1),B({})},Ge=async ve=>{U(ve.id),se("");try{await ne.delete(`${ie}/classes/subject-classes/${ve.id}`,{headers:{Authorization:`Bearer ${r}`}}),he(null),K(Me=>Me.filter(et=>et.id!==ve.id))}catch{se("Failed to delete subject class.")}finally{U(null)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-sm text-gray-700 flex items-center",children:[e.jsx(R,{icon:ko,className:"mr-2 h-4 w-4 text-gray-400"}),"Subject Classes"]}),e.jsxs("button",{onClick:()=>n(!0),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(R,{icon:Ot,className:"mr-1 h-3 w-3"}),"Add Subject Class"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-900 mb-2",children:"Subject Classes"}),X?e.jsx("div",{className:"text-xs text-gray-500",children:"Loading subject classes..."}):ye?e.jsx("div",{className:"text-xs text-red-600",children:ye}):W.length===0?e.jsx("div",{className:"text-xs text-gray-500",children:"No subject classes found for this class."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Subject Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Code"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Teacher"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Capacity"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map(ve=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ve.subject_name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ve.subject_code}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ve.employee_number||"-"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ve.capacity||"Unlimited"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Zt,{to:`/dashboard/classes/subject-classes/view/${ve.id}`,className:"text-blue-600 hover:text-blue-900",title:"View",children:"View"}),e.jsx("button",{className:"text-red-600 hover:text-red-900",title:"Delete",onClick:()=>he(ve.id),children:"Delete"}),ee===ve.id&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded shadow w-full max-w-md",children:[e.jsx("div",{className:"text-base text-gray-900 mb-4",children:"Are you sure you want to delete this subject class?"}),pe&&e.jsx("div",{className:"text-xs text-red-600 mb-2",children:pe}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>he(null),className:"px-5 py-2 text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsxs("button",{onClick:()=>Ge(ve),className:"px-5 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 flex items-center",disabled:J===ve.id,children:[J===ve.id?e.jsx(R,{icon:Yr,spin:!0,className:"h-4 w-4 mr-2"}):null,"Delete"]})]})]})})]})})]},ve.id))})]})})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded shadow w-full max-w-2xl",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Add Subject Class"}),A&&e.jsx("div",{className:"mb-2 bg-red-50 border border-red-200 p-2 text-xs text-red-600",children:A}),e.jsxs("form",{onSubmit:re,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Subject ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"subject_search",value:d,onChange:ue,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Type to search...",autoComplete:"off",onFocus:()=>v(!0)}),p&&d&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded shadow max-h-48 overflow-y-auto",children:f?e.jsxs("div",{className:"p-2 text-xs text-gray-500 flex items-center",children:[e.jsx(R,{icon:Yr,spin:!0,className:"mr-2"}),"Searching..."]}):m.length===0?e.jsx("div",{className:"p-2 text-xs text-gray-500",children:"No subjects found."}):m.map(ve=>e.jsxs("div",{className:"p-2 text-xs cursor-pointer hover:bg-blue-50",onClick:()=>ge(ve),children:[e.jsx("span",{className:"font-medium text-gray-900",children:ve.name})," ",e.jsxs("span",{className:"text-gray-500",children:["(",ve.code,")"]})]},ve.id))})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Teacher ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"teacher_search",value:j,onChange:ce,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Type to search...",autoComplete:"off",onFocus:()=>L(!0)}),O&&j&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded shadow max-h-48 overflow-y-auto",children:k?e.jsxs("div",{className:"p-2 text-xs text-gray-500 flex items-center",children:[e.jsx(R,{icon:Yr,spin:!0,className:"mr-2"}),"Searching..."]}):w.length===0?e.jsx("div",{className:"p-2 text-xs text-gray-500",children:"No employees found."}):w.map(ve=>e.jsxs("div",{className:"p-2 text-xs cursor-pointer hover:bg-blue-50",onClick:()=>De(ve),children:[e.jsx("span",{className:"font-medium text-gray-900",children:ve.full_name})," ",e.jsxs("span",{className:"text-gray-500",children:["(",ve.employee_id,")"]}),ve.job_title&&e.jsx("span",{className:"ml-2 text-gray-400",children:ve.job_title})]},ve.employee_id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Capacity"}),e.jsx("input",{type:"number",name:"capacity",value:i.capacity,onChange:te,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 40",min:"1"})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-5 py-2 text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300 mr-2",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:_,className:`px-6 py-2 text-xs font-medium text-white ${_?"bg-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-800"}`,children:_?"Creating...":"Create Subject Class"})]})]})]})}),M&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-green-100 mb-4",children:e.jsx(R,{icon:sn,className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Subject Class Created Successfully"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"The subject class has been added to the system successfully."}),e.jsx("button",{onClick:Ee,className:"px-4 py-2 bg-gray-700 text-white text-xs hover:bg-gray-800",children:"Continue"})]})})}),I&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-red-100 mb-4",children:e.jsx(R,{icon:la,className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Creating Subject Class"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:H.message}),e.jsx("button",{onClick:Se,className:"px-4 py-2 bg-red-600 text-white text-xs hover:bg-red-700",children:"Close"})]})})})]})},pU=()=>{const{token:t}=ut(),{id:a}=ln(),[r,s]=g.useState("students"),[n,i]=g.useState(null),[o,d]=g.useState(!0),[u,m]=g.useState("");g.useEffect(()=>{x()},[a]);const x=async()=>{d(!0),m("");try{const b=await ne.get(`${ie}/classes/gradelevel-classes/${a}`,{headers:{Authorization:`Bearer ${t}`}});b.data.success?i(b.data.data):m("Failed to load class information.")}catch{m("Failed to load class information.")}finally{d(!1)}},f=()=>{if(o)return e.jsx("div",{className:"text-xs text-gray-500",children:"Loading..."});if(u)return e.jsx("div",{className:"text-xs text-red-600",children:u});if(!n)return e.jsx("div",{className:"text-xs text-gray-500",children:"No data found."});switch(r){case"students":return e.jsx(hU,{classId:n.id});case"subjectclasses":return e.jsx(fU,{classId:n.id,streamId:n.stream_id});default:return null}};return e.jsxs("div",{className:"",children:[o?e.jsx("div",{className:"text-xs text-gray-500 mb-4",children:"Loading..."}):u?e.jsx("div",{className:"text-xs text-red-600 mb-4",children:u}):n?e.jsx("div",{className:"mb-6  border-b border-gray-200",children:e.jsxs("div",{className:"px-6 pt-2 pb-2",children:[e.jsx("div",{className:"text-xl text-gray-900 font-semibold mb-1",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:[n.stream_name," (",n.stream_stage,")"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-8 text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[e.jsx(R,{icon:WI,className:"mr-2 h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Teacher:"}),e.jsx("span",{className:"ml-1 text-gray-900",children:n.teacher_name||"Not Assigned"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Capacity:"}),e.jsx("span",{className:"ml-1 text-gray-900",children:n.capacity||"Unlimited"})]})]})]})}):null,e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8 px-6",children:[e.jsxs("button",{onClick:()=>s("students"),className:`py-3 text-sm font-medium border-b-2 transition-colors duration-150 ${r==="students"?"border-gray-700 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:za,className:"mr-2 h-4 w-4"}),"Students"]}),e.jsxs("button",{onClick:()=>s("subjectclasses"),className:`py-3 text-sm font-medium border-b-2 transition-colors duration-150 ${r==="subjectclasses"?"border-gray-700 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:ko,className:"mr-2 h-4 w-4"}),"Subject Classes"]})]})}),e.jsx("div",{className:"px-0 md:px-6",children:f()})]})},gU=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState(null),[i,o]=g.useState(null),[d,u]=g.useState(!1),[m,x]=g.useState({new_term:"",new_academic_year:""}),[f,b]=g.useState("close"),p=k=>{const{name:$,value:O}=k.target;x(L=>({...L,[$]:O}))},v=async()=>{try{r(!0),n(null),o(null);const k=t?{Authorization:`Bearer ${t}`}:{},$=await ne.post(`${ie}/close-to-term/close-to-term`,{},{headers:k});o(`Close to Term completed successfully! ${$.data.data.closed_count} enrollments closed.`),u(!1)}catch(k){console.error("Error closing term:",k),n(k.response?.data?.message||"Failed to close term"),u(!1)}finally{r(!1)}},j=async()=>{if(!m.new_term||!m.new_academic_year){n("Please enter both term and academic year");return}try{r(!0),n(null),o(null);const k=t?{Authorization:`Bearer ${t}`}:{},$=await ne.post(`${ie}/close-to-term/open-to-term`,m,{headers:k});o(`Open to Term completed successfully! ${$.data.data.classes_updated} classes updated.`),u(!1),x({new_term:"",new_academic_year:""})}catch(k){console.error("Error opening term:",k),n(k.response?.data?.message||"Failed to open term"),u(!1)}finally{r(!1)}},N=()=>{u(!1)},w=()=>{if(f==="open"&&(!m.new_term||!m.new_academic_year)){n("Please enter both term and academic year");return}u(!0)},P=()=>{f==="close"?v():j()};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Term Management"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Close current term or open to next term"})]})})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>b("close"),className:`py-2 px-1 border-b-2 font-medium text-xs ${f==="close"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Close to Term"}),e.jsx("button",{onClick:()=>b("open"),className:`py-2 px-1 border-b-2 font-medium text-xs ${f==="open"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Open to Term"})]})})}),e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white border border-gray-200 shadow",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:f==="close"?"Close to Term":"Open to Term"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:f==="close"?"De-enroll all students from current term (no balance changes)":"Move classes to next term and academic year"})]}),e.jsxs("div",{className:"p-4",children:[i&&e.jsxs("div",{className:"mb-4 p-3 bg-green-100 border border-green-200 text-green-700 text-xs",children:[e.jsx(R,{icon:Ra,className:"mr-2"}),i]}),s&&e.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 text-xs",children:[e.jsx(R,{icon:la,className:"mr-2"}),s]}),e.jsxs("div",{className:"space-y-4",children:[f==="close"?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"This will close ALL active enrollments (both gradelevel and subject classes). No balance changes will be made."})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"New Term *"}),e.jsx("input",{type:"text",name:"new_term",value:m.new_term,onChange:p,placeholder:"e.g., Term 1, Term 2, Term 3",required:!0,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"New Academic Year *"}),e.jsx("input",{type:"text",name:"new_academic_year",value:m.new_academic_year,onChange:p,placeholder:"e.g., 2025, 2026",required:!0,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:w,disabled:a||f==="open"&&(!m.new_term||!m.new_academic_year),className:"flex-1 px-4 py-2 bg-orange-600 text-white hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed text-xs font-medium flex items-center justify-center",children:[a?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):e.jsx(R,{icon:kx,className:"mr-2"}),a?"Processing...":f==="close"?"Close to Term":"Open to Term"]})})]})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-base font-bold text-gray-900",children:["Confirm ",f==="close"?"Close to Term":"Open to Term"]}),e.jsx("button",{onClick:N,className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt})})]}),e.jsxs("div",{className:"mb-4 p-3 bg-orange-50 border border-orange-200 rounded",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(R,{icon:la,className:"text-orange-600 text-xs mr-2"}),e.jsx("span",{className:"text-xs font-medium text-orange-800",children:"Warning"})]}),e.jsx("p",{className:"text-xs text-orange-700",children:f==="close"?e.jsx(e.Fragment,{children:"Are you sure you want to close ALL active enrollments? This will de-enroll all students from both gradelevel and subject classes. This action will NOT affect student balances."}):e.jsxs(e.Fragment,{children:["Are you sure you want to set all classes to ",e.jsxs("strong",{children:[m.new_term," ",m.new_academic_year]}),"? This will update the class term year for all gradelevel and subject classes."]})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:N,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 text-xs font-medium rounded",children:"Cancel"}),e.jsxs("button",{onClick:P,disabled:a,className:"px-4 py-2 bg-orange-600 text-white hover:bg-orange-700 disabled:opacity-50 text-xs font-medium rounded flex items-center",children:[a?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):e.jsx(R,{icon:kx,className:"mr-2"}),a?"Processing...":`Yes, ${f==="close"?"Close to Term":"Open to Term"}`]})]})]})})]})})},yU=({subjectClassId:t,gradelevelClassId:a})=>{const{token:r}=ut(),[s,n]=g.useState([]),[i,o]=g.useState(!0),[d,u]=g.useState(""),[m,x]=g.useState(!1),[f,b]=g.useState(""),[p,v]=g.useState([]),[j,N]=g.useState(!1),[w,P]=g.useState(""),[k,$]=g.useState(null),[O,L]=g.useState(""),[_,E]=g.useState(null),[A,z]=g.useState(null),[M,D]=g.useState("");g.useEffect(()=>{t&&I()},[t]);const I=async()=>{o(!0),u("");try{const W=await ne.get(`${ie}/classes/subject-enrollments`,{params:{subject_class_id:t},headers:{Authorization:`Bearer ${r}`}});W.data.success?n(W.data.data||[]):u("Failed to load students.")}catch{u("Failed to load students.")}finally{o(!1)}},V=async W=>{W.preventDefault(),N(!0),P(""),v([]);try{const K=await ne.get(`${ie}/students/search`,{params:{query:f},headers:{Authorization:`Bearer ${r}`}});K.data.success?v(K.data.data||[]):P("Failed to search students.")}catch{P("Failed to search students.")}finally{N(!1)}},H=async W=>{$(W.RegNumber),L("");try{const K=await ne.post(`${ie}/classes/subject-enrollments`,{student_regnumber:W.RegNumber,subject_class_id:t,gradelevel_class_id:a},{headers:{Authorization:`Bearer ${r}`}});K.data.success?(x(!1),b(""),v([]),I()):L(K.data.message||"Failed to enroll student.")}catch(K){L(K.response?.data?.message||"Failed to enroll student.")}finally{$(null)}},B=async W=>{E(W.id),D("");try{await ne.delete(`${ie}/classes/subject-enrollments/${W.id}`,{headers:{Authorization:`Bearer ${r}`}}),I(),z(null)}catch{D("Failed to de-enroll student.")}finally{E(null)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-sm text-gray-700 flex items-center",children:[e.jsx(R,{icon:Is,className:"mr-2 h-4 w-4 text-gray-400"}),"Students Enrolled"]}),e.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(R,{icon:Ot,className:"mr-1 h-3 w-3"}),"Enroll Student"]})]}),i?e.jsx("div",{className:"text-xs text-gray-500",children:"Loading students..."}):d?e.jsx("div",{className:"text-xs text-red-600",children:d}):s.length===0?e.jsx("div",{className:"text-xs text-gray-500",children:"No students enrolled in this subject class."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Student Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Student ID"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(W=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap",children:[W.Name," ",W.Surname]}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:W.RegNumber}),e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap",children:[e.jsxs("button",{onClick:()=>z(W.id),className:"inline-flex items-center px-2 py-1 text-xs text-red-600 hover:text-white border border-red-200 hover:bg-red-600 rounded",disabled:_===W.id,children:[e.jsx(R,{icon:Yt,className:"h-3 w-3 mr-1"}),"De-enroll"]}),A===W.id&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded shadow w-full max-w-md",children:[e.jsx("div",{className:"text-base text-gray-900 mb-4",children:"Are you sure you want to de-enroll this student?"}),M&&e.jsx("div",{className:"text-xs text-red-600 mb-2",children:M}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>z(null),className:"px-5 py-2 text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300",disabled:_===W.id,children:"Cancel"}),e.jsxs("button",{onClick:()=>B(W),className:"px-5 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 flex items-center",disabled:_===W.id,children:[_===W.id?e.jsx(R,{icon:Yr,spin:!0,className:"h-4 w-4 mr-2"}):e.jsx(R,{icon:Yt,className:"h-4 w-4 mr-2"}),"De-enroll"]})]})]})})]})]},W.RegNumber))})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded shadow w-full max-w-2xl relative",children:[k&&e.jsxs("div",{className:"absolute inset-0 bg-white bg-opacity-70 flex items-center justify-center z-50",children:[e.jsx(R,{icon:Yr,spin:!0,className:"h-8 w-8 text-gray-700"}),e.jsx("span",{className:"ml-3 text-gray-700 text-sm",children:"Enrolling..."})]}),e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Enroll Student in Subject Class"}),e.jsxs("form",{onSubmit:V,className:"flex mb-4",children:[e.jsx("input",{type:"text",value:f,onChange:W=>b(W.target.value),placeholder:"Search by name or reg number...",className:"flex-1 px-3 py-2 border border-gray-300 text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:!!k}),e.jsxs("button",{type:"submit",className:"ml-2 px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 flex items-center",disabled:j||!!k,children:[j?e.jsx(R,{icon:Yr,spin:!0,className:"h-4 w-4"}):e.jsx(R,{icon:aa,className:"h-4 w-4"}),e.jsx("span",{className:"ml-2",children:"Search"})]})]}),w&&e.jsx("div",{className:"text-xs text-red-600 mb-2",children:w}),O&&e.jsx("div",{className:"text-xs text-red-600 mb-2",children:O}),e.jsxs("div",{className:"max-h-80 overflow-y-auto",children:[p.length===0&&!j&&e.jsx("div",{className:"text-xs text-gray-500",children:"No students found."}),p.map(W=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-sm text-gray-900",children:[W.Name," ",W.Surname]}),e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:W.RegNumber})]}),e.jsxs("button",{onClick:()=>H(W),className:"ml-2 px-4 py-2 bg-blue-600 text-white text-xs font-medium rounded hover:bg-blue-700 flex items-center",disabled:!!k,children:[k===W.RegNumber?e.jsx(R,{icon:Yr,spin:!0,className:"h-4 w-4"}):e.jsx(R,{icon:Ot,className:"h-4 w-4"}),e.jsx("span",{className:"ml-2",children:"Enroll"})]})]},W.RegNumber))]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>x(!1),className:"px-5 py-2 text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300",disabled:!!k,children:"Close"})})]})})]})},bU=()=>{const{token:t}=ut(),{id:a}=ln();ga();const[r,s]=g.useState(null),[n,i]=g.useState(!0),[o,d]=g.useState(""),[u,m]=g.useState("students");g.useEffect(()=>{x()},[a]);const x=async()=>{i(!0),d("");try{const b=await ne.get(`${ie}/classes/subject-classes/${a}`,{headers:{Authorization:`Bearer ${t}`}});b.data.success?s(b.data.data):d("Failed to load subject class information.")}catch{d("Failed to load subject class information.")}finally{i(!1)}},f=()=>{if(n)return e.jsx("div",{className:"text-xs text-gray-500",children:"Loading..."});if(o)return e.jsx("div",{className:"text-xs text-red-600",children:o});if(!r)return e.jsx("div",{className:"text-xs text-gray-500",children:"No data found."});switch(u){case"students":default:return e.jsx(yU,{subjectClassId:r.id,gradelevelClassId:r.gradelevel_class_id})}};return e.jsxs("div",{className:"px-0 py-1 w-full",children:[e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsxs("div",{className:"pt-2 pb-2",children:[e.jsxs("div",{className:" text-gray-900 font-semibold mb-1 flex items-center",children:[e.jsx(R,{icon:ko,className:"mr-2 h-5 w-5 text-gray-400"}),"Subject Class Information"]}),r&&e.jsx("div",{className:"border border-gray-200 p-4 mt-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Subject Name"}),e.jsx("div",{className:"text-sm text-gray-900",children:r.subject_name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Subject Code"}),e.jsx("div",{className:"text-sm text-gray-900",children:r.subject_code})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Stream"}),e.jsxs("div",{className:"text-sm text-gray-900",children:[r.stream_name," (",r.stream_stage,")"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Gradelevel Class"}),e.jsx("div",{className:"text-sm text-gray-900",children:r.gradelevel_class_name||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Teacher"}),e.jsx("div",{className:"text-sm text-gray-900",children:r.teacher_name||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Capacity"}),e.jsx("div",{className:"text-sm text-gray-900",children:r.capacity||"Unlimited"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Syllabus"}),e.jsx("div",{className:"text-sm text-gray-900",children:r.subject_syllabus||"-"})]})]})})]})}),e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:e.jsxs("button",{onClick:()=>m("students"),className:`py-3 text-xs font-medium border-b-2 transition-colors duration-150 ${u==="students"?"border-gray-700 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:za,className:"mr-2 h-4 w-4"}),"Students"]})})}),e.jsx("div",{className:"px-0 md:px-6",children:f()})]})},vU=["Asset","Liability","Equity","Revenue","Expense"],jU={Asset:"1",Liability:"2",Equity:"3",Revenue:"4",Expense:"5"},NU=()=>{const{token:t}=ut(),[a,r]=g.useState([]),[s,n]=g.useState([]),[i,o]=g.useState(!0),[d,u]=g.useState(""),[m,x]=g.useState(!1),[f,b]=g.useState(!1),[p,v]=g.useState(null),[j,N]=g.useState({code:"",name:"",type:"",parent_id:"",is_active:!0}),[w,P]=g.useState({account_id:"",amount:"",balance_type:"debit",description:"",reference:"",opening_balance_date:new Date().toISOString().split("T")[0],currency_id:1}),[k,$]=g.useState(!1),[O,L]=g.useState(!1),[_,E]=g.useState(""),[A,z]=g.useState(""),[M,D]=g.useState("");g.useEffect(()=>{V(),I()},[]);const I=async()=>{try{const Q=await ne.get(`${ie}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}});if(Q.data.success){const ye=Q.data.data||[];n(ye);const Y=ye.find(J=>J.base_currency)||ye[0];Y&&P(J=>({...J,currency_id:Y.id}))}}catch(Q){console.error("Error loading currencies:",Q)}};g.useEffect(()=>{if(!j.type){N(J=>({...J,code:""}));return}const Q=jU[j.type],ye=a.filter(J=>J.type===j.type&&J.code&&J.code.startsWith(Q)).map(J=>parseInt(J.code,10)).filter(J=>!isNaN(J));let Y;ye.length===0?Y=Q+"000":Y=(Math.max(...ye)+1).toString(),N(J=>({...J,code:Y}))},[j.type,a]);const V=async()=>{o(!0),u("");try{const Q=await ne.get(`${ie}/accounting/chart-of-accounts`,{headers:{Authorization:`Bearer ${t}`}});Q.data.success?r(Q.data.data||[]):u("Failed to load accounts.")}catch{u("Failed to load accounts.")}finally{o(!1)}},H=Q=>{const{name:ye,value:Y,type:J,checked:U}=Q.target;N(ee=>({...ee,[ye]:J==="checkbox"?U:Y}))},B=async Q=>{Q.preventDefault(),$(!0),E("");try{const ye={...j,parent_id:j.parent_id||null,is_active:!!j.is_active},Y=await ne.post(`${ie}/accounting/chart-of-accounts`,ye,{headers:{Authorization:`Bearer ${t}`}});Y.data.success?(x(!1),N({code:"",name:"",type:"",parent_id:"",is_active:!0}),V()):E(Y.data.message||"Failed to add account.")}catch(ye){E(ye.response?.data?.message||"Failed to add account.")}finally{$(!1)}},W=Q=>{v(Q);const ye=Q.type==="Asset"||Q.type==="Expense"?"debit":"credit";P({account_id:Q.id,amount:"",balance_type:ye,description:`Opening Balance - ${Q.name} (${Q.code})`,reference:`OB-${Q.code}-${Date.now()}`,opening_balance_date:new Date().toISOString().split("T")[0],currency_id:s.find(Y=>Y.base_currency)?.id||s[0]?.id||1}),z(""),D(""),b(!0)},K=Q=>{const{name:ye,value:Y}=Q.target;P(J=>({...J,[ye]:Y}))},X=async Q=>{Q.preventDefault(),L(!0),z(""),D("");try{const ye={...w,amount:parseFloat(w.amount)},Y=await ne.post(`${ie}/accounting/chart-of-accounts/opening-balance`,ye,{headers:{Authorization:`Bearer ${t}`}});Y.data.success?(D("Opening balance created successfully!"),b(!1),P({account_id:"",amount:"",balance_type:"debit",description:"",reference:"",opening_balance_date:new Date().toISOString().split("T")[0],currency_id:1}),setTimeout(()=>D(""),3e3)):z(Y.data.message||"Failed to create opening balance.")}catch(ye){z(ye.response?.data?.message||"Failed to create opening balance.")}finally{L(!1)}};return e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-base font-semibold text-gray-800",children:"Chart of Accounts"}),e.jsx("button",{className:"px-4 py-2 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900",style:{borderRadius:0},onClick:()=>x(!0),children:"+ Add Account"})]})}),M&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 text-xs text-green-800",children:M}),m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-700 bg-opacity-50",children:e.jsxs("div",{className:"bg-white border border-gray-300 w-full max-w-md p-0",style:{borderRadius:0},children:[e.jsxs("div",{className:"border-b border-gray-200 px-6 py-3 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-800",children:"Add Account"}),e.jsx("button",{className:"text-xs text-gray-500 hover:text-gray-800",onClick:()=>x(!1),style:{borderRadius:0},children:""})]}),e.jsxs("form",{className:"px-6 py-4",onSubmit:B,children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"code",value:j.code,readOnly:!0,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 bg-gray-100 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0},required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:j.name,onChange:H,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0},required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"type",value:j.type,onChange:H,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0},required:!0,children:[e.jsx("option",{value:"",children:"Select type"}),vU.map(Q=>e.jsx("option",{value:Q,children:Q},Q))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Parent Account"}),e.jsxs("select",{name:"parent_id",value:j.parent_id,onChange:H,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0},children:[e.jsx("option",{value:"",children:"None"}),a.map(Q=>e.jsxs("option",{value:Q.id,children:[Q.code," - ",Q.name]},Q.id))]})]}),e.jsxs("div",{className:"mb-4 flex items-center",children:[e.jsx("input",{type:"checkbox",name:"is_active",checked:j.is_active,onChange:H,className:"mr-2 border-gray-300 focus:ring-gray-900",style:{borderRadius:0},id:"is_active"}),e.jsx("label",{htmlFor:"is_active",className:"text-xs text-gray-700",children:"Active"})]}),_&&e.jsx("div",{className:"text-xs text-red-600 mb-2",children:_}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",className:"px-4 py-2 text-xs font-medium text-gray-800 bg-gray-200 hover:bg-gray-300 border border-gray-300 mr-2",style:{borderRadius:0},onClick:()=>x(!1),disabled:k,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900",style:{borderRadius:0},disabled:k,children:k?"Saving...":"Save"})]})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 sm:px-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-xs font-semibold text-gray-700",children:"Accounts List"})}),e.jsx("div",{className:"border-t border-gray-200",children:i?e.jsx("div",{className:"p-6 text-xs ",children:"Loading accounts..."}):d?e.jsx("div",{className:"p-6 text-xs text-red-600",children:d}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Code"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Type"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Parent"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(Q=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap font-mono",children:Q.code}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:Q.name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:Q.type}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:Q.parent_id||"-"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("span",{className:Q.is_active?"text-gray-700":"text-gray-400",children:Q.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Zt,{to:`/dashboard/accounting/chart-of-accounts/view/${Q.id}`,className:"px-3 py-1.5 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900",style:{borderRadius:0},children:"View"}),e.jsx("button",{onClick:()=>W(Q),className:"px-3 py-1.5 text-xs font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 border border-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",style:{borderRadius:0},title:"Add Opening Balance",children:"Opening Balance"})]})})]},Q.id))})]})})})]}),f&&p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-700 bg-opacity-50",children:e.jsxs("div",{className:"bg-white border border-gray-300 w-full max-w-md p-0",style:{borderRadius:0},children:[e.jsxs("div",{className:"border-b border-gray-200 px-6 py-3 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xs font-semibold text-gray-800",children:["Add Opening Balance - ",p.code," - ",p.name]}),e.jsx("button",{className:"text-xs text-gray-500 hover:text-gray-800",onClick:()=>b(!1),style:{borderRadius:0},children:""})]}),e.jsxs("form",{className:"px-6 py-4",onSubmit:X,children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-3 mb-4",children:[e.jsx("p",{className:"text-xs text-yellow-800 font-semibold mb-1",children:" Use This ONLY for Opening Balances"}),e.jsx("p",{className:"text-xs text-yellow-700",children:"This feature is for recording historical balances that existed BEFORE the system was implemented. Do NOT use this for mid-term adjustments."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Account"}),e.jsx("input",{type:"text",value:`${p.code} - ${p.name} (${p.type})`,readOnly:!0,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 bg-gray-100",style:{borderRadius:0}})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Balance Type ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500 font-normal",children:["(",p.type==="Asset"||p.type==="Expense"?"Debit = Positive, Credit = Negative":"Credit = Positive, Debit = Negative",")"]})]}),e.jsxs("select",{name:"balance_type",value:w.balance_type,onChange:K,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0},required:!0,children:[e.jsx("option",{value:"debit",children:"Debit"}),e.jsx("option",{value:"credit",children:"Credit"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"amount",value:w.amount,onChange:K,step:"0.01",min:"0",className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0},required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Currency ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{name:"currency_id",value:w.currency_id,onChange:K,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0},required:!0,children:s.map(Q=>e.jsxs("option",{value:Q.id,children:[Q.code," - ",Q.name," ",Q.base_currency&&"(Base)"]},Q.id))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Opening Balance Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"opening_balance_date",value:w.opening_balance_date,onChange:K,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0},required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{name:"description",value:w.description,onChange:K,rows:"2",className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0},required:!0,placeholder:"e.g., Opening Balance - Historical balance from previous system"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reference"}),e.jsx("input",{type:"text",name:"reference",value:w.reference,onChange:K,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0},placeholder:"Auto-generated if left blank"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 mb-4",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"Note:"})," This will create a journal entry using Retained Earnings (3998) as the offsetting account. This ensures historical balances don't affect current period financial statements."]})}),A&&e.jsx("div",{className:"text-xs text-red-600 mb-3",children:A}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",className:"px-4 py-2 text-xs font-medium text-gray-800 bg-gray-200 hover:bg-gray-300 border border-gray-300 mr-2",style:{borderRadius:0},onClick:()=>b(!1),disabled:O,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900",style:{borderRadius:0},disabled:O,children:O?"Creating...":"Create Opening Balance"})]})]})]})})]})},wU=()=>{const{id:t}=ln(),{token:a}=ut(),[r,s]=g.useState(null),[n,i]=g.useState(!0),[o,d]=g.useState(""),[u,m]=g.useState(null),[x,f]=g.useState([]),[b,p]=g.useState([]),[v,j]=g.useState(!0),[N,w]=g.useState(null),[P,k]=g.useState({balance:"",as_of_date:""}),[$,O]=g.useState(!1),[L,_]=g.useState(""),[E,A]=g.useState([]),[z,M]=g.useState(!1),[D,I]=g.useState({current_page:1,total_pages:1,total_records:0,limit:10}),[V,H]=g.useState({search:"",startDate:"",endDate:"",transactionType:""});g.useEffect(()=>{B()},[t]),g.useEffect(()=>{r&&(W(),K())},[r,V,D.current_page]);const B=async()=>{i(!0),d("");try{const U=await ne.get(`${ie}/accounting/chart-of-accounts/${t}`,{headers:{Authorization:`Bearer ${a}`}});if(U.data.success){if(s(U.data.data),U.data.data.parent_id){const ee=await ne.get(`${ie}/accounting/chart-of-accounts/${U.data.data.parent_id}`,{headers:{Authorization:`Bearer ${a}`}});ee.data.success&&m(ee.data.data)}}else d("Failed to load account.")}catch{d("Failed to load account.")}finally{i(!1)}},W=async()=>{j(!0);try{const U=await ne.get(`${ie}/accounting/currencies`,{headers:{Authorization:`Bearer ${a}`}});if(U.data.success){f(U.data.data||[]);const ee=await Promise.all((U.data.data||[]).map(async he=>{try{const pe=await ne.get(`${ie}/accounting/account-balances/${t}?currency_id=${he.id}`,{headers:{Authorization:`Bearer ${a}`}});return{currency:he,balance:pe.data.data?pe.data.data.balance:0,as_of_date:pe.data.data?pe.data.data.as_of_date:""}}catch{return{currency:he,balance:0,as_of_date:""}}}));p(ee)}}catch{p([])}finally{j(!1)}},K=async()=>{if(r){M(!0);try{const U={page:D.current_page,limit:D.limit,...V,accountId:t},he=(await ne.get(`${ie}/accounting/general-ledger/journal-entries/account/${t}`,{params:U,headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data;A(he.data||[]),I(he.pagination||D)}catch(U){console.error("Error fetching ledger entries:",U)}finally{M(!1)}}},X=(U,ee)=>{H(he=>({...he,[U]:ee})),I(he=>({...he,current_page:1}))},Q=U=>{I(ee=>({...ee,current_page:U}))},ye=U=>new Date(U).toLocaleDateString(),Y=(U,ee="$")=>`${ee}${parseFloat(U||0).toFixed(2)}`,J=U=>U==="fee_payment"?Ia:Is;return e.jsx("div",{className:"px-2 md:px-4 lg:px-8 w-full max-w-full",children:n?e.jsx("div",{className:"p-3 md:p-6 text-xs text-gray-500",children:"Loading account..."}):o?e.jsx("div",{className:"p-3 md:p-6 text-xs text-red-600",children:o}):r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 md:mb-8 border-b border-gray-200 pb-3 md:pb-4",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-6",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-base md:text-lg font-bold text-gray-900 mb-1",children:[r.code,"  ",r.name]}),e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:r.type}),e.jsx("div",{className:"text-xs text-gray-500",children:r.parent_id&&u?`Parent: ${u.code} - ${u.name}`:""})]})})}),e.jsxs("div",{className:"mb-4 md:mb-8",children:[e.jsx("div",{className:"mb-2 text-xs font-semibold text-gray-700",children:"Account Balances"}),e.jsx("div",{className:"border border-gray-200 overflow-hidden",children:v?e.jsx("div",{className:"p-3 md:p-4 text-xs text-gray-500",children:"Loading balances..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full divide-y divide-gray-200 text-xs",style:{minWidth:"400px"},children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Currency"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider hidden sm:table-cell",children:"Symbol"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Balance"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider hidden md:table-cell",children:"As of Date"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map((U,ee)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-900",children:[U.currency.code," - ",U.currency.name]}),e.jsx("div",{className:"text-xs text-gray-500 sm:hidden",children:U.currency.symbol||"-"})]}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap hidden sm:table-cell",children:U.currency.symbol||"-"}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap",children:e.jsx("span",{className:`text-xs font-medium ${U.balance<0?"text-green-600":U.balance>0?"text-red-600":""}`,children:U.balance===0?"0.00":`${Y(Math.abs(U.balance),U.currency.symbol)} ${U.balance<0?"CR":"DR"}`})}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap hidden md:table-cell",children:U.as_of_date?U.as_of_date.slice(0,10):"-"})]},U.currency.id))})]})})})]}),e.jsxs("div",{className:"mb-4 md:mb-8",children:[e.jsxs("div",{className:"mb-3 md:mb-4",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Ledger Entries & Transactions"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Transactions affecting this account"})]}),e.jsx("div",{className:"bg-gray-50 p-3 md:p-4 rounded-lg mb-3 md:mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),e.jsx("input",{type:"text",value:V.search,onChange:U=>X("search",U.target.value),placeholder:"Search transactions...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:V.startDate,onChange:U=>X("startDate",U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:V.endDate,onChange:U=>X("endDate",U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:V.transactionType,onChange:U=>X("transactionType",U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"DEBIT",children:"Debit"}),e.jsx("option",{value:"CREDIT",children:"Credit"})]})]})]})}),e.jsxs("div",{className:"border border-gray-200 overflow-hidden",children:[z?e.jsx("div",{className:"p-3 md:p-4 text-xs text-gray-500",children:"Loading ledger entries..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full divide-y divide-gray-200 text-xs",style:{minWidth:"500px"},children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Date"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Description"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-right font-medium tracking-wider",children:"DR"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-right font-medium tracking-wider",children:"CR"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Reference"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(U=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-gray-900",children:ye(U.transaction_date)}),e.jsx("td",{className:"px-2 md:px-3 py-2 text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:J(U.source),className:"mr-2 text-gray-400 h-3 w-3 flex-shrink-0"}),e.jsx("div",{children:e.jsx("div",{className:"text-xs font-medium",children:U.description})})]})}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-right font-medium text-red-600",children:U.debit_amount>0?Y(U.debit_amount):"-"}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-right font-medium text-green-600",children:U.credit_amount>0?Y(U.credit_amount):"-"}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-gray-500",children:U.reference||U.receipt_number||U.reference_number||"-"})]},`${U.source}-${U.id}`))})]})}),!z&&E.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:Tn,className:"mx-auto h-8 w-8 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No ledger entries found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:V.search||V.startDate||V.endDate?"Try adjusting your filters.":"No transactions have been recorded for this account yet."})]})]}),D.total_pages>1&&e.jsxs("div",{className:"mt-3 md:mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-700 text-center sm:text-left",children:["Showing page ",D.current_page," of ",D.total_pages,"(",D.total_records," total entries)"]}),e.jsxs("div",{className:"flex justify-center sm:justify-end space-x-2",children:[e.jsx("button",{onClick:()=>Q(D.current_page-1),disabled:D.current_page===1,className:"px-3 py-1 border border-gray-300 text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md",children:"Previous"}),e.jsx("button",{onClick:()=>Q(D.current_page+1),disabled:D.current_page===D.total_pages,className:"px-3 py-1 border border-gray-300 text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md",children:"Next"})]})]})]})]}):e.jsx("div",{className:"p-3 md:p-6 text-xs text-gray-500",children:"Account not found."})})},SU=()=>{const{token:t}=ut(),[a,r]=g.useState([]),[s,n]=g.useState(!0),[i,o]=g.useState(""),[d,u]=g.useState(!1),[m,x]=g.useState(""),[f,b]=g.useState(null),[p,v]=g.useState([]),[j,N]=g.useState(!1),[w,P]=g.useState(""),[k,$]=g.useState(1),[O,L]=g.useState(1),[_,E]=g.useState({amount:"",description:"",reference:"",currency_id:1});g.useEffect(()=>{A()},[]);const A=async()=>{n(!0),o("");try{const W=await ne.get(`${ie}/accounting/cash-bank/balances`,{headers:{Authorization:`Bearer ${t}`}});W.data.success?(r(W.data.data),o("")):o("Failed to load account balances")}catch(W){console.error("Error loading balances:",W),o("Error loading account balances. Please try again."),r([])}finally{n(!1)}},z=async(W,K=1)=>{N(!0);try{const X={page:K,limit:10,search:w,startDate:"",endDate:"",transactionType:""},ye=(await ne.get(`${ie}/accounting/general-ledger/journal-entries/account/${W}`,{params:X,headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data;v(ye.data||[]),L(ye.pagination?.total_pages||1),$(K)}catch(X){console.error("Error loading transactions:",X)}finally{N(!1)}},M=W=>{b(W),z(W.id)},D=W=>{x(W),u(!0),E({amount:"",description:"",reference:"",currency_id:1})},I=()=>{u(!1),x(""),E({amount:"",description:"",reference:"",currency_id:1})},V=async W=>{if(W.preventDefault(),!_.amount||!_.description){alert("Amount and description are required");return}try{let K="";switch(m){case"cash-injection":K="/accounting/cash-bank/cash/injection";break;case"cash-withdrawal":K="/accounting/cash-bank/cash/withdrawal";break;case"bank-deposit":K="/accounting/cash-bank/bank/deposit";break;case"bank-withdrawal":K="/accounting/cash-bank/bank/withdrawal";break;case"cash-to-bank":K="/accounting/cash-bank/transfer/cash-to-bank";break;case"bank-to-cash":K="/accounting/cash-bank/transfer/bank-to-cash";break;default:return}const Q=(await ne.post(`${ie}${K}`,_,{headers:{Authorization:`Bearer ${t}`}})).data;Q.success?(alert("Transaction recorded successfully!"),I(),A(),f&&z(f.id,k)):alert(`Error: ${Q.message}`)}catch(K){console.error("Error recording transaction:",K),alert("Error recording transaction")}},H=()=>{switch(m){case"cash-injection":return"Cash Injection";case"cash-withdrawal":return"Cash Withdrawal";case"bank-deposit":return"Bank Deposit";case"bank-withdrawal":return"Bank Withdrawal";case"cash-to-bank":return"Cash to Bank Transfer";case"bank-to-cash":return"Bank to Cash Transfer";default:return"Transaction"}},B=()=>{switch(m){case"cash-injection":return"Add cash to the business";case"cash-withdrawal":return"Take cash out of the business";case"bank-deposit":return"Deposit money into bank account";case"bank-withdrawal":return"Withdraw money from bank account";case"cash-to-bank":return"Transfer cash to bank account";case"bank-to-cash":return"Transfer money from bank to cash";default:return""}};return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg",children:"Loading..."})}):e.jsxs("div",{className:"px-2 md:px-4 lg:px-8 w-full max-w-full",children:[e.jsx("div",{className:"mb-4 md:mb-8 border-b border-gray-200 pb-3 md:pb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base md:text-lg font-bold text-gray-900 mb-1",children:"Cash & Bank Management"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Manage cash and bank operations"})]}),e.jsx("button",{onClick:A,className:"mt-2 md:mt-0 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-xs",children:"Refresh"})]})}),e.jsxs("div",{className:"mb-4 md:mb-8",children:[e.jsx("div",{className:"mb-2 text-xs font-semibold text-gray-700",children:"Quick Actions"}),e.jsx("div",{className:"border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"bg-gray-50 p-3 md:p-4",children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-2",children:[e.jsxs("button",{onClick:()=>D("cash-injection"),className:"px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-xs",children:[e.jsx(R,{icon:Ot,className:"mr-1"}),"Cash In"]}),e.jsxs("button",{onClick:()=>D("cash-withdrawal"),className:"px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors text-xs",children:[e.jsx(R,{icon:Up,className:"mr-1"}),"Cash Out"]}),e.jsxs("button",{onClick:()=>D("bank-deposit"),className:"px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-xs",children:[e.jsx(R,{icon:Ot,className:"mr-1"}),"Bank In"]}),e.jsxs("button",{onClick:()=>D("bank-withdrawal"),className:"px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors text-xs",children:[e.jsx(R,{icon:Up,className:"mr-1"}),"Bank Out"]}),e.jsxs("button",{onClick:()=>D("cash-to-bank"),className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors text-xs",children:[e.jsx(R,{icon:pB,className:"mr-1"}),"CashBank"]}),e.jsxs("button",{onClick:()=>D("bank-to-cash"),className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors text-xs",children:[e.jsx(R,{icon:em,className:"mr-1"}),"BankCash"]})]})})})]}),f?e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 md:mb-8 border-b border-gray-200 pb-3 md:pb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(R,{icon:f.account_name.toLowerCase().includes("cash")?Ia:Mn,className:"text-lg text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base md:text-lg font-bold text-gray-900",children:f.account_name}),e.jsx("div",{className:"text-xs text-gray-500",children:f.code})]})]}),e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:f.account_type}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Currency: ",f.currency_code]})]}),e.jsx("button",{onClick:()=>b(null),className:"mt-2 md:mt-0 px-3 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"Back to Overview"})]})}),e.jsxs("div",{className:"mb-4 md:mb-8",children:[e.jsx("div",{className:"mb-2 text-xs font-semibold text-gray-700",children:"Account Balance"}),e.jsx("div",{className:"border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"bg-gray-50 p-3 md:p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:f.current_balance.toLocaleString()}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Current Balance (",f.currency_code,")"]})]})})})]}),e.jsxs("div",{className:"mb-4 md:mb-8",children:[e.jsxs("div",{className:"mb-3 md:mb-4",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Transaction History"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Transactions affecting this account"})]}),e.jsx("div",{className:"bg-gray-50 p-3 md:p-4 rounded-lg mb-3 md:mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:aa,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-3 w-3"}),e.jsx("input",{type:"text",placeholder:"Search transactions...",value:w,onChange:W=>P(W.target.value),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>z(f.id,1),className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-xs",children:"Search"})})]})}),e.jsxs("div",{className:"border border-gray-200 overflow-hidden",children:[j?e.jsx("div",{className:"p-3 md:p-4 text-xs text-gray-500",children:"Loading transactions..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full divide-y divide-gray-200 text-xs",style:{minWidth:"500px"},children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Date"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Description"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-right font-medium tracking-wider",children:"DR"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-right font-medium tracking-wider",children:"CR"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Reference"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-2 md:px-3 py-4 text-center text-gray-500",children:"No transactions found"})}):p.map((W,K)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-gray-900",children:new Date(W.transaction_date).toLocaleDateString()}),e.jsx("td",{className:"px-2 md:px-3 py-2 text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:Ia,className:"mr-2 text-gray-400 h-3 w-3 flex-shrink-0"}),e.jsx("div",{children:e.jsx("div",{className:"text-xs font-medium",children:W.description})})]})}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-right font-medium text-red-600",children:W.debit_amount>0?`$${parseFloat(W.debit_amount||0).toFixed(2)}`:"-"}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-right font-medium text-green-600",children:W.credit_amount>0?`$${parseFloat(W.credit_amount||0).toFixed(2)}`:"-"}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-gray-500",children:W.reference||"-"})]},K))})]})}),!j&&p.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:Ia,className:"mx-auto h-8 w-8 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No transactions found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:w?"Try adjusting your search.":"No transactions have been recorded for this account yet."})]})]}),O>1&&e.jsxs("div",{className:"mt-3 md:mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-700 text-center sm:text-left",children:["Showing page ",k," of ",O]}),e.jsxs("div",{className:"flex justify-center sm:justify-end space-x-2",children:[e.jsx("button",{onClick:()=>z(f.id,k-1),disabled:k===1,className:"px-3 py-1 border border-gray-300 text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md",children:"Previous"}),e.jsx("button",{onClick:()=>z(f.id,k+1),disabled:k===O,className:"px-3 py-1 border border-gray-300 text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md",children:"Next"})]})]})]})]}):e.jsxs(e.Fragment,{children:[i&&e.jsx("div",{className:"mb-3 md:mb-4 bg-red-50 border border-red-200 rounded-md p-3",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(R,{icon:Up,className:"h-4 w-4 text-red-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-xs font-medium text-red-800",children:"Error"}),e.jsx("div",{className:"mt-1 text-xs text-red-700",children:e.jsx("p",{children:i})})]})]})}),e.jsxs("div",{className:"mb-4 md:mb-8",children:[e.jsx("div",{className:"mb-2 text-xs font-semibold text-gray-700",children:"Cash & Bank Accounts"}),e.jsx("div",{className:"border border-gray-200 overflow-hidden",children:s?e.jsx("div",{className:"p-3 md:p-4 text-xs text-gray-500",children:"Loading accounts..."}):a.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full divide-y divide-gray-200 text-xs",style:{minWidth:"400px"},children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Account"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Type"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-right font-medium tracking-wider",children:"Balance"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Currency"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-center font-medium tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(W=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:W.account_name.toLowerCase().includes("cash")?Ia:Mn,className:"mr-2 text-blue-600 h-3 w-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:W.account_name}),e.jsx("div",{className:"text-xs text-gray-500",children:W.code})]})]})}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-xs text-gray-500",children:W.account_type}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-right",children:e.jsx("span",{className:"text-xs font-medium text-gray-900",children:W.current_balance.toLocaleString()})}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-xs text-gray-500",children:W.currency_code}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-center",children:e.jsxs("button",{onClick:()=>M(W),className:"px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-xs",children:[e.jsx(R,{icon:Ma,className:"mr-1"}),"View"]})})]},W.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:Ia,className:"mx-auto h-8 w-8 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No Cash/Bank Accounts Found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Cash and Bank accounts need to be set up in the Chart of Accounts first."}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:'Please ensure you have accounts with "Cash" or "Bank" in their names in the Chart of Accounts.'})]})})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-900 mb-1",children:H()}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:B()}),e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Amount *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:_.amount,onChange:W=>E({..._,amount:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Enter amount",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description *"}),e.jsx("textarea",{value:_.description,onChange:W=>E({..._,description:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Enter description",rows:"3",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reference Number"}),e.jsx("input",{type:"text",value:_.reference,onChange:W=>E({..._,reference:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Enter reference number (optional)"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 mt-4 md:mt-6",children:[e.jsx("button",{type:"button",onClick:I,className:"w-full sm:w-auto px-3 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors text-xs",children:"Cancel"}),e.jsx("button",{type:"submit",className:"w-full sm:w-auto px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-xs",children:"Record Transaction"})]})]})]})})})]})},_U=()=>{const{token:t}=ut(),[a,r]=g.useState(null),[s,n]=g.useState(!1),[i,o]=g.useState(""),[d,u]=g.useState(""),[m,x]=g.useState(new Date().toISOString().slice(0,10)),[f,b]=g.useState(!1),[p,v]=g.useState(!1),[j,N]=g.useState(!1),[w,P]=g.useState(""),[k,$]=g.useState(""),[O,L]=g.useState(""),[_,E]=g.useState([]),[A,z]=g.useState(!1),[M,D]=g.useState([]),[I,V]=g.useState(null),[H,B]=g.useState(!1);g.useEffect(()=>{W()},[]);const W=async()=>{n(!0),o("");try{const se=await ne.get(`${ie}/accounting/trial-balance`,{params:{as_of_date:m},headers:{Authorization:`Bearer ${t}`}});r(se.data.data)}catch(se){console.error("Error fetching trial balance:",se),o(se.response?.data?.message||"Failed to fetch trial balance")}finally{n(!1)}},K=async()=>{try{const se=await ne.get(`${ie}/accounting/trial-balance/export`,{params:{as_of_date:m},headers:{Authorization:`Bearer ${t}`},responseType:"blob"}),te=window.URL.createObjectURL(new Blob([se.data])),ue=document.createElement("a");ue.href=te,ue.setAttribute("download",`trial_balance_${m}.csv`),document.body.appendChild(ue),ue.click(),ue.remove()}catch(se){console.error("Error exporting trial balance:",se),o("Failed to export trial balance")}},X=async()=>{if(!a){o("Please generate a trial balance first");return}b(!0),P(`Trial Balance - ${new Date(m).toLocaleDateString()}`)},Q=async()=>{if(!w.trim()){o("Please enter a report name");return}try{n(!0),await ne.post(`${ie}/accounting/saved-reports`,{report_type:"trial_balance",report_name:w,report_description:k,period_start_date:m,period_end_date:m,report_data:a,report_summary:{total_debit:a.totals.total_debit,total_credit:a.totals.total_credit,is_balanced:a.is_balanced,difference:a.totals.difference},tags:O},{headers:{Authorization:`Bearer ${t}`}}),u("Report saved successfully!"),b(!1),P(""),$(""),L("")}catch(se){console.error("Error saving report:",se),o(se.response?.data?.error||"Failed to save report")}finally{n(!1)}},ye=async()=>{z(!0),o("");try{console.log(" Loading saved reports..."),console.log("URL:",`${ie}/accounting/saved-reports`);const se=await ne.get(`${ie}/accounting/saved-reports`,{params:{report_type:"trial_balance"},headers:{Authorization:`Bearer ${t}`}});console.log(" Response:",se.data),E(se.data.data.reports),v(!0)}catch(se){console.error(" Error loading saved reports:",se),console.error("Error response:",se.response?.data),console.error("Error message:",se.message),o(se.response?.data?.error||se.message||"Failed to load saved reports")}finally{z(!1)}},Y=async se=>{try{n(!0);const ue=(await ne.get(`${ie}/accounting/saved-reports/${se}`,{headers:{Authorization:`Bearer ${t}`}})).data.data;r(ue.report_data),x(ue.period_start_date),v(!1),B(!1),u(`Loaded: ${ue.report_name}`)}catch(te){console.error("Error loading report:",te),o("Failed to load report")}finally{n(!1)}},J=async()=>{z(!0),o("");try{const se=await ne.get(`${ie}/accounting/saved-reports`,{params:{report_type:"trial_balance"},headers:{Authorization:`Bearer ${t}`}});E(se.data.data.reports),D([]),N(!0)}catch(se){console.error("Error loading saved reports:",se),o(se.response?.data?.error||"Failed to load saved reports")}finally{z(!1)}},U=se=>{D(te=>te.includes(se)?te.filter(ue=>ue!==se):te.length>=5?(o("You can only compare up to 5 reports at once"),te):[...te,se])},ee=async()=>{if(M.length<2){o("Please select at least 2 reports to compare");return}try{n(!0),o("");const se=M.map(ce=>ne.get(`${ie}/accounting/saved-reports/${ce}`,{headers:{Authorization:`Bearer ${t}`}})),ue=(await Promise.all(se)).map(ce=>ce.data.data),ge=new Map;ue.forEach((ce,De)=>{ce.report_data.trial_balance.forEach(ke=>{ge.has(ke.account_code)||ge.set(ke.account_code,{account_code:ke.account_code,account_name:ke.account_name,type:ke.type,balances:[]});const re=ge.get(ke.account_code);re.balances[De]={debit:ke.debit_balance,credit:ke.credit_balance,balance:ke.balance}})}),ge.forEach(ce=>{for(let De=0;De<ue.length;De++)ce.balances[De]||(ce.balances[De]={debit:0,credit:0,balance:0})}),V({reports:ue.map(ce=>({id:ce.id,name:ce.report_name,date:ce.period_start_date,totals:ce.report_data.totals})),accounts:Array.from(ge.values())}),N(!1),B(!0),u(`Comparing ${ue.length} trial balance reports`)}catch(se){console.error("Error comparing reports:",se),o("Failed to load reports for comparison")}finally{n(!1)}},he=se=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(se||0),pe=se=>{const te=Math.abs(se),ue=se<0?"CR":"DR";return e.jsxs("span",{className:se<0?"text-green-600":"text-red-600",children:[he(te)," ",ue]})};return e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Trial Balance"}),e.jsx("p",{className:"text-xs text-gray-600",children:"View account balances and verify books are balanced"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 p-4 mb-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[e.jsx(R,{icon:ua,className:"mr-1"}),"As of Date"]}),e.jsx("input",{type:"date",value:m,onChange:se=>x(se.target.value),className:"w-full px-2 py-1.5 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-900"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:W,disabled:s,className:"w-full px-3 py-1.5 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 disabled:bg-gray-400 disabled:cursor-not-allowed",children:s?e.jsxs(e.Fragment,{children:[e.jsx(R,{icon:Yr,spin:!0,className:"mr-1"}),"Loading..."]}):"Generate Trial Balance"})}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:K,disabled:s||!a,className:"w-full px-3 py-1.5 text-xs font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(R,{icon:bn,className:"mr-1"}),"Export CSV"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:X,disabled:s||!a,className:"w-full px-3 py-1.5 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(R,{icon:Er,className:"mr-1"}),"Save Report"]})}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:ye,disabled:A,className:"w-full px-3 py-1.5 text-xs font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(R,{icon:$d,className:"mr-1"}),"Load Report"]})}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:J,disabled:A,className:"w-full px-3 py-1.5 text-xs font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(R,{icon:Xn,className:"mr-1"}),"Compare Reports"]})})]})]}),i&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 mb-4",children:[e.jsx(R,{icon:la,className:"mr-2 text-xs"}),e.jsx("span",{className:"text-xs",children:i})]}),d&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-3 py-2 mb-4",children:[e.jsx(R,{icon:Ra,className:"mr-2 text-xs"}),e.jsx("span",{className:"text-xs",children:d})]}),a&&e.jsx("div",{className:`border p-3 mb-4 ${a.is_balanced?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:a.is_balanced?Ra:la,className:`text-lg mr-2 ${a.is_balanced?"text-green-600":"text-red-600"}`}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold ${a.is_balanced?"text-green-900":"text-red-900"}`,children:a.is_balanced?"Books are Balanced":"Books are NOT Balanced"}),e.jsx("p",{className:`text-xs ${a.is_balanced?"text-green-700":"text-red-700"}`,children:a.is_balanced?"Total debits equal total credits":`Difference: ${he(Math.abs(a.totals.difference))}`})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"As of"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:new Date(a.as_of_date).toLocaleDateString()})]})]})}),H&&I&&e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden mb-4",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Trial Balance Comparison (",I.reports.length," Reports)"]}),e.jsxs("button",{onClick:()=>B(!1),className:"text-xs px-3 py-1 text-gray-600 hover:text-gray-900 border border-gray-300 hover:bg-gray-50",children:[e.jsx(R,{icon:Bt,className:"mr-1"}),"Close Comparison"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 border-r border-gray-300",children:"Code"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 border-r border-gray-300",children:"Account Name"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 border-r border-gray-300",children:"Type"}),I.reports.map((se,te)=>e.jsxs("th",{className:"px-4 py-3 text-right font-semibold text-gray-700 border-l border-gray-300 bg-gray-100",children:[e.jsx("div",{className:"font-bold",children:se.name}),e.jsx("div",{className:"text-xs font-normal text-gray-600 mt-1",children:new Date(se.date).toLocaleDateString()})]},te))]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:I.accounts.map((se,te)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2.5 whitespace-nowrap text-gray-900 font-mono border-r border-gray-200",children:se.account_code}),e.jsx("td",{className:"px-3 py-2.5 text-gray-900 border-r border-gray-200",children:se.account_name}),e.jsx("td",{className:"px-3 py-2.5 whitespace-nowrap border-r border-gray-200",children:e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded ${se.type==="Asset"?"bg-blue-100 text-blue-800":se.type==="Liability"?"bg-red-100 text-red-800":se.type==="Equity"?"bg-purple-100 text-purple-800":se.type==="Revenue"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:se.type})}),se.balances.map((ue,ge)=>e.jsx("td",{className:`px-4 py-2.5 text-right font-mono border-l border-gray-200 ${ue.balance<0?"text-red-600":ue.balance>0?"text-gray-900":"text-gray-400"}`,children:e.jsx("span",{className:"font-semibold",children:ue.balance<0?`(${he(Math.abs(ue.balance))})`:he(ue.balance)})},ge))]},te))}),e.jsxs("tfoot",{className:"bg-gray-100 font-bold border-t-2 border-gray-300",children:[e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{colSpan:"3",className:"px-3 py-3 text-gray-900 text-sm",children:"Total Debits"}),I.reports.map((se,te)=>e.jsx("td",{className:"px-4 py-3 text-right font-mono text-sm border-l border-gray-300",children:he(se.totals.total_debit)},te))]}),e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{colSpan:"3",className:"px-3 py-3 text-gray-900 text-sm",children:"Total Credits"}),I.reports.map((se,te)=>e.jsx("td",{className:"px-4 py-3 text-right font-mono text-sm border-l border-gray-300",children:he(se.totals.total_credit)},te))]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{colSpan:"3",className:"px-3 py-3 text-gray-900 text-sm",children:"Difference"}),I.reports.map((se,te)=>e.jsx("td",{className:`px-4 py-3 text-right font-mono text-sm border-l border-gray-300 ${se.totals.difference===0?"text-green-600":"text-red-600"}`,children:he(se.totals.difference)},te))]})]})]})})]}),a&&!H&&e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700 tracking-wider",children:"Account Code"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700 tracking-wider",children:"Account Name"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700 tracking-wider",children:"Type"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700 tracking-wider",children:"Debit"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700 tracking-wider",children:"Credit"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700 tracking-wider",children:"Balance"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.trial_balance.map(se=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs font-mono text-gray-900",children:se.account_code}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-900",children:se.account_name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 text-xs font-semibold rounded-full ${se.account_type==="Asset"?"bg-blue-100 text-blue-800":se.account_type==="Liability"?"bg-red-100 text-red-800":se.account_type==="Equity"?"bg-purple-100 text-purple-800":se.account_type==="Revenue"?"bg-green-100 text-green-800":se.account_type==="Expense"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:se.account_type})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right text-red-600",children:se.total_debit>0?he(se.total_debit):"-"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right text-green-600",children:se.total_credit>0?he(se.total_credit):"-"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right font-medium",children:pe(se.balance)})]},se.id))}),e.jsx("tfoot",{className:"bg-gray-100 border-t-2 border-gray-300",children:e.jsxs("tr",{children:[e.jsxs("td",{colSpan:"3",className:"px-3 py-2 text-xs font-bold text-gray-900",children:[e.jsx(R,{icon:Xn,className:"mr-1"}),"Total"]}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right font-bold text-red-600",children:he(a.totals.total_debit)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right font-bold text-green-600",children:he(a.totals.total_credit)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right font-bold text-gray-900",children:a.totals.difference!==0?he(Math.abs(a.totals.difference)):"-"})]})})]})}),a.trial_balance.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:Xn,className:"text-4xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No account activity found for this date"})]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Save Trial Balance"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Report Name *"}),e.jsx("input",{type:"text",value:w,onChange:se=>P(se.target.value),placeholder:"e.g., Trial Balance - October 2024",className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{value:k,onChange:se=>$(se.target.value),placeholder:"Add any notes or description...",rows:3,className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tags (Optional)"}),e.jsx("input",{type:"text",value:O,onChange:se=>L(se.target.value),placeholder:"e.g., monthly, approved, october",className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate tags with commas"})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>b(!1),className:"flex-1 px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:Q,disabled:s||!w.trim(),className:"flex-1 px-4 py-2 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400",children:[e.jsx(R,{icon:Er,className:"mr-1"}),"Save Report"]})]})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Load Saved Trial Balance"}),e.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt})})]}),_.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:$d,className:"text-4xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No saved trial balance reports found"})]}):e.jsx("div",{className:"space-y-2",children:_.map(se=>e.jsx("div",{className:"border border-gray-200 p-3 hover:bg-gray-50 cursor-pointer",onClick:()=>Y(se.id),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:se.report_name}),se.report_description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:se.report_description}),e.jsxs("div",{className:"flex gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Date: ",new Date(se.period_start_date).toLocaleDateString()]}),e.jsxs("span",{children:["Saved: ",new Date(se.saved_at).toLocaleDateString()]}),se.report_summary&&e.jsx("span",{className:se.report_summary.is_balanced?"text-green-600":"text-red-600",children:se.report_summary.is_balanced?" Balanced":" Not Balanced"})]}),se.tags&&e.jsx("div",{className:"mt-2",children:se.tags.split(",").map((te,ue)=>e.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 text-xs px-2 py-0.5 mr-1",children:te.trim()},ue))})]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-xs font-medium ml-4",children:"Load "})]})},se.id))}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>v(!1),className:"w-full px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Close"})})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Compare Trial Balance Reports"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Select 2-5 reports to compare (",M.length," selected)"]})]}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt})})]}),_.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:Xn,className:"text-4xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No saved trial balance reports found"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto mb-4",children:_.map(se=>e.jsx("div",{className:`border p-3 cursor-pointer transition-all ${M.includes(se.id)?"border-orange-500 bg-orange-50":"border-gray-200 hover:bg-gray-50"}`,onClick:()=>U(se.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"checkbox",checked:M.includes(se.id),onChange:()=>{},className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:se.report_name}),se.report_description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:se.report_description}),e.jsxs("div",{className:"flex gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Date: ",new Date(se.period_start_date).toLocaleDateString()]}),e.jsxs("span",{children:["Saved: ",new Date(se.saved_at).toLocaleDateString()]}),se.report_summary&&e.jsx("span",{className:se.report_summary.is_balanced?"text-green-600":"text-red-600",children:se.report_summary.is_balanced?" Balanced":" Not Balanced"})]})]})]})},se.id))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>N(!1),className:"flex-1 px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:ee,disabled:M.length<2,className:"flex-1 px-4 py-2 text-xs font-medium text-white bg-orange-600 hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(R,{icon:Xn,className:"mr-1"}),"Compare ",M.length," Reports"]})]})]})]})})]})},AU=()=>{const{token:t}=ut(),[a,r]=g.useState([]),[s,n]=g.useState(!0),[i,o]=g.useState(""),[d,u]=g.useState(!1),[m,x]=g.useState("add"),[f,b]=g.useState({id:null,name:"",contact_person:"",phone:"",email:"",address:"",is_active:!0}),[p,v]=g.useState(""),[j,N]=g.useState(!1),w=async()=>{n(!0),o("");try{const _=await ne.get(`${ie}/expenses/suppliers`,{headers:{Authorization:`Bearer ${t}`}});r(_.data.data||[])}catch{o("Failed to load suppliers.")}finally{n(!1)}};g.useEffect(()=>{w()},[]);const P=()=>{b({id:null,name:"",contact_person:"",phone:"",email:"",address:"",is_active:!0}),x("add"),u(!0),v("")},k=_=>{b({..._}),x("edit"),u(!0),v("")},$=_=>{const{name:E,value:A,type:z,checked:M}=_.target;b(D=>({...D,[E]:z==="checkbox"?M:A}))},O=async _=>{_.preventDefault(),N(!0),v("");try{if(!f.name){v("Name is required."),N(!1);return}m==="add"?await ne.post(`${ie}/expenses/suppliers`,f,{headers:{Authorization:`Bearer ${t}`}}):await ne.put(`${ie}/expenses/suppliers/${f.id}`,f,{headers:{Authorization:`Bearer ${t}`}}),u(!1),w()}catch{v("Failed to save supplier.")}finally{N(!1)}},L=async _=>{if(window.confirm("Are you sure you want to delete this supplier?"))try{await ne.delete(`${ie}/expenses/suppliers/${_}`,{headers:{Authorization:`Bearer ${t}`}}),w()}catch{alert("Failed to delete supplier.")}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-base font-semibold text-gray-800",children:"Suppliers"}),e.jsx("button",{className:"px-3 py-1 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800",style:{borderRadius:0},onClick:P,children:"+ Add Supplier"})]}),e.jsx("div",{className:"border-t border-gray-200",children:s?e.jsx("div",{className:"text-xs text-gray-500 p-4",children:"Loading suppliers..."}):i?e.jsx("div",{className:"text-xs text-red-600 p-4",children:i}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Contact Person"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Email"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Address"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(_=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:_.name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:_.contact_person}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:_.phone}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:_.email}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:_.address}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:_.is_active?"Active":"Inactive"}),e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap",children:[e.jsx("button",{className:"text-gray-700 hover:text-gray-900 text-xs mr-2",style:{borderRadius:0},onClick:()=>k(_),children:"Edit"}),e.jsx("button",{className:"text-red-600 hover:text-red-800 text-xs",style:{borderRadius:0},onClick:()=>L(_.id),children:"Delete"})]})]},_.id))})]})})}),d&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 z-50",children:e.jsxs("div",{className:"bg-white border border-gray-200 p-6 w-full max-w-md",style:{borderRadius:0},children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800 mb-4",children:m==="add"?"Add Supplier":"Edit Supplier"}),e.jsxs("form",{onSubmit:O,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:f.name,onChange:$,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Contact Person"}),e.jsx("input",{type:"text",name:"contact_person",value:f.contact_person,onChange:$,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Phone"}),e.jsx("input",{type:"text",name:"phone",value:f.phone,onChange:$,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:f.email,onChange:$,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Address"}),e.jsx("input",{type:"text",name:"address",value:f.address,onChange:$,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0}})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"is_active",checked:f.is_active,onChange:$,className:"mr-2"}),e.jsx("label",{className:"text-xs text-gray-600",children:"Active"})]}),p&&e.jsx("div",{className:"text-xs text-red-600",children:p}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[e.jsx("button",{type:"button",className:"px-3 py-1 text-xs text-gray-700 bg-gray-200 hover:bg-gray-300",style:{borderRadius:0},onClick:()=>u(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-3 py-1 text-xs text-white bg-gray-900 hover:bg-gray-800",style:{borderRadius:0},disabled:j,children:j?"Saving...":"Save"})]})]})]})})]})},kU=()=>{const{token:t}=ut(),[a,r]=g.useState([]),[s,n]=g.useState(!0),[i,o]=g.useState(""),[d,u]=g.useState(null),[m,x]=g.useState(!1),[f,b]=g.useState(null),[p,v]=g.useState(!1),[j,N]=g.useState(1),[w]=g.useState(20),[P,k]=g.useState(0),[$,O]=g.useState(""),[L,_]=g.useState(""),[E,A]=g.useState(""),z=ga(),M=async()=>{n(!0),o("");try{const H=[];H.push(`page=${j}`),H.push(`pageSize=${w}`),$&&H.push(`search=${encodeURIComponent($)}`),L&&H.push(`startDate=${L}`),E&&H.push(`endDate=${E}`);const B=H.length?`?${H.join("&")}`:"",W=await ne.get(`${ie}/expenses/expenses${B}`,{headers:{Authorization:`Bearer ${t}`}});r(W.data.data||[]),k(W.data.total||0)}catch{o("Failed to load expenses.")}finally{n(!1)}};g.useEffect(()=>{M()},[j,$,L,E]);const D=async H=>{if(window.confirm("Are you sure you want to delete this expense?")){u(H);try{await ne.delete(`${ie}/expenses/expenses/${H}`,{headers:{Authorization:`Bearer ${t}`}}),M()}catch{alert("Failed to delete expense.")}finally{u(null)}}},I=async H=>{x(!0),v(!0),b(null);try{const B=await ne.get(`${ie}/expenses/expenses/${H}`,{headers:{Authorization:`Bearer ${t}`}});b(B.data.data)}catch{b(null)}finally{v(!1)}},V=Math.ceil(P/w);return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-base font-semibold text-gray-800",children:"Expenses"}),e.jsx("button",{className:"px-3 py-1 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800",style:{borderRadius:0},onClick:()=>z("/dashboard/expenses/expenses/add"),children:"+ Add Expense"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("input",{type:"text",placeholder:"Search...",value:$,onChange:H=>{N(1),O(H.target.value)},className:"border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0}}),e.jsx("input",{type:"date",value:L,onChange:H=>{N(1),_(H.target.value)},className:"border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0}}),e.jsx("input",{type:"date",value:E,onChange:H=>{N(1),A(H.target.value)},className:"border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0}}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["Total: ",P]})]}),e.jsx("div",{className:"border-t border-gray-200",children:s?e.jsx("div",{className:"text-xs text-gray-500 p-4",children:"Loading expenses..."}):i?e.jsx("div",{className:"text-xs text-red-600 p-4",children:i}):e.jsx("div",{className:"overflow-x-auto border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Date"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Supplier"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Description"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Currency"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Payment Method"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Payment Status"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(H=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:H.expense_date}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:H.supplier_name||"-"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:H.description}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:parseFloat(H.amount).toFixed(2)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:H.currency_code}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:H.payment_method}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:H.payment_status}),e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap flex gap-2",children:[e.jsx("button",{title:"View",className:"text-gray-700 hover:text-gray-900 text-xs",style:{borderRadius:0},onClick:()=>I(H.id),children:e.jsx(R,{icon:Ma})}),e.jsx("button",{title:"Edit",className:"text-blue-700 hover:text-blue-900 text-xs",style:{borderRadius:0},onClick:()=>z(`/dashboard/expenses/expenses/edit/${H.id}`),children:e.jsx(R,{icon:ha})}),e.jsx("button",{title:"Delete",className:"text-red-600 hover:text-red-800 text-xs",style:{borderRadius:0},onClick:()=>D(H.id),disabled:d===H.id,children:d===H.id?"...":e.jsx(R,{icon:Yt})})]})]},H.id))})]})})}),e.jsxs("div",{className:"flex justify-center items-center mt-4 gap-2",children:[e.jsx("button",{className:"px-2 py-1 text-xs bg-gray-200 hover:bg-gray-300",style:{borderRadius:0},disabled:j===1,onClick:()=>N(j-1),children:"Prev"}),e.jsxs("span",{className:"text-xs",children:[j," / ",V||1]}),e.jsx("button",{className:"px-2 py-1 text-xs bg-gray-200 hover:bg-gray-300",style:{borderRadius:0},disabled:j===V||V===0,onClick:()=>N(j+1),children:"Next"})]}),m&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 z-50",children:e.jsxs("div",{className:"bg-white border border-gray-200 p-6 w-full max-w-md",style:{borderRadius:0},children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800",children:"Expense Receipt"}),e.jsx("button",{className:"text-gray-500 hover:text-gray-800 text-lg",onClick:()=>x(!1),children:""})]}),p?e.jsx("div",{className:"text-xs text-gray-500",children:"Loading..."}):f?e.jsxs("div",{className:"text-xs",children:[e.jsxs("div",{className:"mb-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Date:"}),e.jsx("span",{children:f.expense_date})]}),e.jsxs("div",{className:"mb-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Supplier:"}),e.jsx("span",{children:f.supplier_name||"-"})]}),e.jsxs("div",{className:"mb-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Description:"}),e.jsx("span",{children:f.description})]}),e.jsxs("div",{className:"mb-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Amount:"}),e.jsx("span",{children:parseFloat(f.amount).toFixed(2)})]}),e.jsxs("div",{className:"mb-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Currency:"}),e.jsx("span",{children:f.currency_code})]}),e.jsxs("div",{className:"mb-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Payment Method:"}),e.jsx("span",{children:f.payment_method})]}),e.jsxs("div",{className:"mb-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Payment Status:"}),e.jsx("span",{children:f.payment_status})]}),e.jsxs("div",{className:"mb-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Journal:"}),e.jsx("span",{children:f.journal_description||"-"})]}),e.jsxs("div",{className:"mb-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Recorded At:"}),e.jsx("span",{children:f.created_at})]})]}):e.jsx("div",{className:"text-xs text-red-600",children:"Failed to load expense details."})]})})]})},CU=()=>{const{token:t}=ut(),a=ga(),[r,s]=g.useState({supplier_id:"",amount:"",currency_id:"",expense_date:"",description:"",payment_method:"cash",payment_status:"full",expense_account_id:"",amount_paid:"",reference_number:""}),[n,i]=g.useState(""),[o,d]=g.useState(!1),[u,m]=g.useState([]),[x,f]=g.useState([]),[b,p]=g.useState([]),v=async()=>{try{const O=await ne.get(`${ie}/expenses/suppliers`,{headers:{Authorization:`Bearer ${t}`}});m(O.data.data||[])}catch{}},j=async()=>{try{const O=await ne.get(`${ie}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}});f(O.data.data||[])}catch{}},N=async()=>{try{const L=(await ne.get(`${ie}/accounting/chart-of-accounts`,{headers:{Authorization:`Bearer ${t}`}})).data.data||[];p(L.filter(_=>_.type==="Expense"))}catch{}};g.useEffect(()=>{v(),j(),N()},[]);const w=O=>{const{name:L,value:_}=O.target;if(s(E=>({...E,[L]:_})),L==="amount"&&r.payment_status==="partial"){const E=parseFloat(_)||0;(parseFloat(r.amount_paid)||0)>E&&s(z=>({...z,amount_paid:_}))}},P=()=>{const O=Date.now(),L=Math.floor(Math.random()*1e3);return`EXP-${O}-${L}`},k=async O=>{O.preventDefault(),d(!0),i("");try{if(!r.amount||!r.currency_id||!r.expense_date||!r.payment_method||!r.payment_status||!r.expense_account_id){i("Please fill all required fields."),d(!1);return}if(!r.reference_number){i("Please add a reference number."),d(!1);return}if(r.payment_status==="partial"){if(!r.amount_paid||parseFloat(r.amount_paid)<=0){i("Please enter the amount paid for partial payment."),d(!1);return}if(parseFloat(r.amount_paid)>=parseFloat(r.amount)){i("Amount paid must be less than total amount for partial payment."),d(!1);return}}await ne.post(`${ie}/expenses/expenses`,{...r,supplier_id:r.supplier_id||null,amount:parseFloat(r.amount),amount_paid:r.payment_status==="partial"?parseFloat(r.amount_paid):null,expense_account_id:r.expense_account_id,reference_number:r.reference_number},{headers:{Authorization:`Bearer ${t}`}}),a("/dashboard/expenses/expenses")}catch{i("Failed to save expense.")}finally{d(!1)}},$=r.amount&&r.amount_paid?(parseFloat(r.amount)-parseFloat(r.amount_paid)).toFixed(2):"";return e.jsxs("div",{className:"bg-white border border-gray-200 p-4 w-full",children:[e.jsx("h1",{className:"text-base font-medium text-gray-900 mb-4",children:"Record Expense"}),e.jsxs("form",{onSubmit:k,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Supplier"}),e.jsxs("select",{name:"supplier_id",value:r.supplier_id,onChange:w,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"-- None --"}),u.map(O=>e.jsx("option",{value:O.id,children:O.name},O.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Total Amount"}),e.jsx("input",{type:"number",name:"amount",value:r.amount,onChange:w,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Currency"}),e.jsxs("select",{name:"currency_id",value:r.currency_id,onChange:w,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"",children:"-- Select --"}),x.map(O=>e.jsx("option",{value:O.id,children:O.code},O.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("input",{type:"date",name:"expense_date",value:r.expense_date,onChange:w,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Expense Account"}),e.jsxs("select",{name:"expense_account_id",value:r.expense_account_id,onChange:w,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"",children:"-- Select --"}),b.map(O=>e.jsxs("option",{value:O.id,children:[O.code," - ",O.name]},O.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Payment Method"}),e.jsxs("select",{name:"payment_method",value:r.payment_method,onChange:w,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Cheque",children:"Cheque"}),e.jsx("option",{value:"Mobile Money",children:"Mobile Money"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Payment Status"}),e.jsxs("select",{name:"payment_status",value:r.payment_status,onChange:w,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"full",children:"Full Payment"}),e.jsx("option",{value:"partial",children:"Partial Payment"}),e.jsx("option",{value:"debt",children:"Credit/Debt"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reference Number"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",name:"reference_number",value:r.reference_number,onChange:w,placeholder:"Enter reference",className:"flex-1 border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"}),e.jsx("button",{type:"button",onClick:()=>s(O=>({...O,reference_number:P()})),className:"bg-gray-600 text-white px-2 py-1.5 text-xs hover:bg-gray-700",children:"Auto"})]})]}),r.payment_status==="partial"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Amount Paid"}),e.jsx("input",{type:"number",name:"amount_paid",value:r.amount_paid,onChange:w,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,step:"0.01"}),$&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Remaining: ",$]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("input",{type:"text",name:"description",value:r.description,onChange:w,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),n&&e.jsx("div",{className:"text-xs text-red-600",children:n}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",className:"px-3 py-1.5 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",onClick:()=>a("/dashboard/expenses/expenses"),children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-3 py-1.5 bg-gray-900 text-white text-xs hover:bg-gray-800",disabled:o,children:o?"Saving...":"Save Expense"})]})]})]})},EU=()=>{const{token:t}=ut(),a=ga(),{id:r}=ln(),[s,n]=g.useState({supplier_id:"",amount:"",currency_id:"",expense_date:"",description:"",payment_method:"cash",payment_status:"full"}),[i,o]=g.useState(""),[d,u]=g.useState(!1),[m,x]=g.useState([]),[f,b]=g.useState([]),[p,v]=g.useState(null),[j,N]=g.useState(!0),w=async()=>{try{const _=await ne.get(`${ie}/expenses/suppliers`,{headers:{Authorization:`Bearer ${t}`}});x(_.data.data||[])}catch{}},P=async()=>{try{const _=await ne.get(`${ie}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}});b(_.data.data||[])}catch{}},k=async()=>{try{const E=(await ne.get(`${ie}/accounting/chart-of-accounts`,{headers:{Authorization:`Bearer ${t}`}})).data.data||[],A=E.find(z=>z.code==="5000")||E.find(z=>z.type==="Expense");v(A)}catch{}},$=async()=>{N(!0);try{const E=(await ne.get(`${ie}/expenses/expenses/${r}`,{headers:{Authorization:`Bearer ${t}`}})).data.data;n({supplier_id:E.supplier_id||"",amount:E.amount||"",currency_id:E.currency_id||"",expense_date:E.expense_date||"",description:E.description||"",payment_method:E.payment_method||"cash",payment_status:E.payment_status||"full"})}catch{o("Failed to load expense.")}finally{N(!1)}};g.useEffect(()=>{w(),P(),k(),$()},[r]);const O=_=>{const{name:E,value:A}=_.target;n(z=>({...z,[E]:A}))},L=async _=>{_.preventDefault(),u(!0),o("");try{if(!s.amount||!s.currency_id||!s.expense_date||!s.payment_method||!s.payment_status){o("Please fill all required fields."),u(!1);return}await ne.put(`${ie}/expenses/expenses/${r}`,{...s,supplier_id:s.supplier_id||null,amount:parseFloat(s.amount)},{headers:{Authorization:`Bearer ${t}`}}),a("/dashboard/expenses/expenses")}catch{o("Failed to update expense.")}finally{u(!1)}};return j?e.jsx("div",{className:"flex items-center justify-center h-64 text-xs text-gray-500",children:"Loading expense..."}):e.jsxs("div",{className:"p-6 w-full max-w-5xl mx-auto",children:[e.jsx("h1",{className:"text-base font-semibold text-gray-800 mb-6",children:"Edit Expense"}),e.jsxs("form",{onSubmit:L,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Supplier"}),e.jsxs("select",{name:"supplier_id",value:s.supplier_id,onChange:O,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0},children:[e.jsx("option",{value:"",children:"-- None --"}),m.map(_=>e.jsx("option",{value:_.id,children:_.name},_.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Amount"}),e.jsx("input",{type:"number",name:"amount",value:s.amount,onChange:O,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0},required:!0,step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Currency"}),e.jsxs("select",{name:"currency_id",value:s.currency_id,onChange:O,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0},required:!0,children:[e.jsx("option",{value:"",children:"-- Select --"}),f.map(_=>e.jsx("option",{value:_.id,children:_.code},_.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Date"}),e.jsx("input",{type:"date",name:"expense_date",value:s.expense_date,onChange:O,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Expense Account"}),e.jsx("input",{type:"text",value:p?`${p.code} - ${p.name}`:"",className:"w-full border border-gray-300 px-2 py-1 text-xs bg-gray-100",style:{borderRadius:0},readOnly:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Description"}),e.jsx("input",{type:"text",name:"description",value:s.description,onChange:O,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Payment Method"}),e.jsxs("select",{name:"payment_method",value:s.payment_method,onChange:O,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0},required:!0,children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"bank",children:"Bank"}),e.jsx("option",{value:"credit",children:"Credit"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Payment Status"}),e.jsxs("select",{name:"payment_status",value:s.payment_status,onChange:O,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0},required:!0,children:[e.jsx("option",{value:"full",children:"Full"}),e.jsx("option",{value:"partial",children:"Partial"}),e.jsx("option",{value:"debt",children:"Debt"})]})]})]}),i&&e.jsx("div",{className:"text-xs text-red-600",children:i}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[e.jsx("button",{type:"button",className:"px-3 py-1 text-xs text-gray-700 bg-gray-200 hover:bg-gray-300",style:{borderRadius:0},onClick:()=>a("/dashboard/expenses/expenses"),children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-3 py-1 text-xs text-white bg-gray-900 hover:bg-gray-800",style:{borderRadius:0},disabled:d,children:d?"Saving...":"Save"})]})]})]})},TU=()=>{const{token:t}=ut();ga();const[a,r]=g.useState([]),[s,n]=g.useState({}),[i,o]=g.useState(!0),[d,u]=g.useState(""),[m,x]=g.useState(""),[f,b]=g.useState(""),[p,v]=g.useState(1),[j,N]=g.useState(20),[w,P]=g.useState(0),[k,$]=g.useState(!1),[O,L]=g.useState(null),[_,E]=g.useState({amount:"",currency_id:"",payment_date:"",payment_method:"cash",description:""}),[A,z]=g.useState([]),[M,D]=g.useState(!1),[I,V]=g.useState(!1),[H,B]=g.useState(null),[W,K]=g.useState([]),[X,Q]=g.useState(!1),[ye,Y]=g.useState(!1),[J,U]=g.useState([]),[ee,he]=g.useState({supplier_id:"",amount:"",description:"",reference_number:"",due_date:"",opening_balance_date:"",currency_id:1}),[pe,se]=g.useState(!1),te=async()=>{try{const Ie=await ne.get(`${ie}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}});z(Ie.data.data||[])}catch{}},ue=async()=>{try{const Ie=await ne.get(`${ie}/expenses/suppliers`,{headers:{Authorization:`Bearer ${t}`}});U(Ie.data.data||[])}catch{}},ge=async()=>{try{o(!0);const Ie=new URLSearchParams({page:p.toString(),pageSize:j.toString()});m&&Ie.append("search",m),f&&Ie.append("status",f);const tt=await ne.get(`${ie}/expenses/accounts-payable?${Ie}`,{headers:{Authorization:`Bearer ${t}`}});r(tt.data.data||[]),P(tt.data.total||0)}catch{u("Failed to load accounts payable")}finally{o(!1)}},ce=async()=>{try{const Ie=await ne.get(`${ie}/expenses/accounts-payable/summary`,{headers:{Authorization:`Bearer ${t}`}});n(Ie.data.data||{})}catch{}},De=async Ie=>{try{Q(!0);const tt=await ne.get(`${ie}/expenses/accounts-payable/${Ie}/payments`,{headers:{Authorization:`Bearer ${t}`}});K(tt.data.data||[])}catch(tt){console.error("Error fetching transactions:",tt)}finally{Q(!1)}};g.useEffect(()=>{te(),ue(),ge(),ce()},[p,j,m,f]);const ke=Ie=>{x(Ie.target.value),v(1)},re=Ie=>{b(Ie.target.value),v(1)},Ee=Ie=>{L(Ie),E({amount:Ie.outstanding_balance,currency_id:Ie.currency_id,payment_date:new Date().toISOString().split("T")[0],payment_method:"cash",description:`Payment for ${Ie.expense_description}`}),u(""),$(!0)},Se=async Ie=>{B(Ie),V(!0),await De(Ie.id)},Ge=async Ie=>{Ie.preventDefault(),D(!0),u("");try{await ne.post(`${ie}/expenses/accounts-payable/${O.id}/pay`,{amount:parseFloat(_.amount),currency_id:O.currency_id,payment_date:_.payment_date,payment_method:_.payment_method,description:_.description},{headers:{Authorization:`Bearer ${t}`}}),$(!1),u(""),ge(),ce()}catch(tt){console.error("Payment error:",tt),u(tt.response?.data?.message||tt.message)}finally{D(!1)}},ve=async Ie=>{Ie.preventDefault(),se(!0);try{await ne.post(`${ie}/expenses/accounts-payable/opening-balance`,{supplier_id:ee.supplier_id||null,amount:parseFloat(ee.amount),description:ee.description,reference_number:ee.reference_number,due_date:ee.due_date||null,opening_balance_date:ee.opening_balance_date,currency_id:ee.currency_id},{headers:{Authorization:`Bearer ${t}`}}),Y(!1),he({supplier_id:"",amount:"",description:"",reference_number:"",due_date:"",opening_balance_date:"",currency_id:1}),ge(),ce(),alert("Opening balance created successfully!")}catch(tt){console.error("Opening balance error:",tt),u("Failed to create opening balance: "+(tt.response?.data?.message||tt.message))}finally{se(!1)}},Me=Ie=>{switch(Ie){case"outstanding":return"text-red-600 bg-red-100";case"partial":return"text-yellow-600 bg-yellow-100";case"paid":return"text-green-600 bg-green-100";case"overdue":return"text-red-800 bg-red-200";default:return"text-gray-600 bg-gray-100"}},et=(Ie,tt)=>`${tt} ${parseFloat(Ie).toFixed(2)}`;return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-bold text-gray-900 mb-2",children:"Accounts Payable"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage outstanding payments and track transaction history"})]}),e.jsx("button",{onClick:()=>Y(!0),className:"bg-blue-600 text-white px-4 py-2 text-xs hover:bg-blue-700 flex items-center space-x-2",children:e.jsx("span",{children:"+ Add Opening Balance"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white p-4 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Total Payables"}),e.jsx("div",{className:"text-lg font-semibold",children:s.total_payables||0})]}),e.jsxs("div",{className:"bg-white p-4 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Total Outstanding"}),e.jsx("div",{className:"text-lg font-semibold text-red-600",children:s.total_outstanding?et(s.total_outstanding,"USD"):"USD 0.00"})]}),e.jsxs("div",{className:"bg-white p-4 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Outstanding"}),e.jsx("div",{className:"text-lg font-semibold text-red-600",children:s.outstanding_count||0})]}),e.jsxs("div",{className:"bg-white p-4 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Overdue"}),e.jsx("div",{className:"text-lg font-semibold text-red-800",children:s.overdue_count||0})]})]}),e.jsx("div",{className:"bg-white p-4 border border-gray-200 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Search"}),e.jsx("input",{type:"text",value:m,onChange:ke,placeholder:"Search by supplier, description...",className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Status"}),e.jsxs("select",{value:f,onChange:re,className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"outstanding",children:"Outstanding"}),e.jsx("option",{value:"partial",children:"Partial"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"overdue",children:"Overdue"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Page Size"}),e.jsxs("select",{value:j,onChange:Ie=>N(Number(Ie.target.value)),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"})]})]})]})}),e.jsx("div",{className:"mt-8 flex flex-col",children:e.jsx("div",{className:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Payable To"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Description"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Original Amount"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Paid Amount"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Outstanding"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Due Date"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-3 py-4 text-center text-xs text-gray-500",children:"Loading..."})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-3 py-4 text-center text-xs text-gray-500",children:"No accounts payable found"})}):a.map(Ie=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:Ie.payable_to||"Non-Supplier"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:Ie.expense_description})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:et(Ie.original_amount,Ie.currency_code)})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:et(Ie.paid_amount,Ie.currency_code)})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900 font-medium",children:et(Ie.outstanding_balance,Ie.currency_code)})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded ${Me(Ie.status)}`,children:Ie.status})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:Ie.due_date||"Not set"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Se(Ie),className:"text-blue-600 hover:text-blue-900",title:"View Transactions",children:e.jsx(R,{icon:Ma,className:"h-3 w-3"})}),Ie.status!=="paid"&&e.jsx("button",{onClick:()=>Ee(Ie),className:"text-green-600 hover:text-green-900",title:"Make Payment",children:"Pay"})]})})]},Ie.id))})]})})})})}),w>j&&e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:["Showing ",(p-1)*j+1," to ",Math.min(p*j,w)," of ",w," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>v(p-1),disabled:p===1,className:"px-3 py-1 text-xs text-gray-700 bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>v(p+1),disabled:p*j>=w,className:"px-3 py-1 text-xs text-gray-700 bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:"Next"})]})]}),k&&O&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 w-full max-w-md",children:[d&&e.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 text-xs rounded",children:[e.jsx("strong",{children:"Error:"})," ",d]}),e.jsx("h2",{className:"text-base font-semibold mb-4",children:"Make Payment"}),e.jsxs("form",{onSubmit:Ge,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Amount"}),e.jsx("input",{type:"number",value:_.amount,onChange:Ie=>E(tt=>({...tt,amount:Ie.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",required:!0,step:"0.01",max:O.outstanding_balance})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Payment Date"}),e.jsx("input",{type:"date",value:_.payment_date,onChange:Ie=>E(tt=>({...tt,payment_date:Ie.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Payment Method"}),e.jsxs("select",{value:_.payment_method,onChange:Ie=>E(tt=>({...tt,payment_method:Ie.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"bank",children:"Bank"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:_.description,onChange:Ie=>E(tt=>({...tt,description:Ie.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{$(!1),u("")},className:"px-4 py-1 text-xs text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:M,className:"px-4 py-1 text-xs text-white bg-gray-900 hover:bg-gray-800",children:M?"Processing...":"Make Payment"})]})]})]})}),I&&H&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-base font-semibold",children:"Transaction History"}),e.jsx("button",{onClick:()=>V(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Payable Details"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Payable To:"}),e.jsx("div",{className:"font-medium",children:H.payable_to||"Non-Supplier"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Description:"}),e.jsx("div",{className:"font-medium",children:H.expense_description})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Outstanding:"}),e.jsx("div",{className:"font-medium text-red-600",children:et(H.outstanding_balance,H.currency_code)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("div",{className:"font-medium",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded ${Me(H.status)}`,children:H.status})})]})]})]}),X?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"text-xs text-gray-500",children:"Loading transactions..."})}):W.length===0?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"text-xs text-gray-500",children:"No transactions found"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Payment Date"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Amount Paid"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Payment Method"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Description"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map(Ie=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:new Date(Ie.payment_date).toLocaleDateString()})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900 font-medium",children:et(Ie.amount_paid,H.currency_code)})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900 capitalize",children:Ie.payment_method})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:Ie.description||"N/A"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-green-100 text-green-800",children:Ie.status})})]},Ie.id))})]})})]})}),ye&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold",children:"Add Opening Balance"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Record historical debt or payable"})]}),e.jsx("button",{onClick:()=>Y(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),e.jsxs("form",{onSubmit:ve,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Supplier ",e.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),e.jsxs("select",{value:ee.supplier_id,onChange:Ie=>he(tt=>({...tt,supplier_id:Ie.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Supplier (Optional)"}),J.map(Ie=>e.jsx("option",{value:Ie.id,children:Ie.name},Ie.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:ee.amount,onChange:Ie=>he(tt=>({...tt,amount:Ie.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:"e.g., 50000.00"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:ee.description,onChange:Ie=>he(tt=>({...tt,description:Ie.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:"3",required:!0,placeholder:"e.g., City Council - Historical Debt from 2020"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Reference Number"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:ee.reference_number,onChange:Ie=>he(tt=>({...tt,reference_number:Ie.target.value})),className:"flex-1 border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., CC-2020-DEBT"}),e.jsx("button",{type:"button",onClick:()=>{const Ie=Date.now(),tt=Math.floor(Math.random()*1e3).toString().padStart(3,"0"),Re=`OB-${new Date().getFullYear()}-${tt}-${Ie.toString().slice(-4)}`;he(bt=>({...bt,reference_number:Re}))},className:"px-3 py-1 text-xs bg-gray-600 text-white hover:bg-gray-700 whitespace-nowrap",children:"Auto Generate"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank or click Auto Generate"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Opening Balance Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:ee.opening_balance_date,onChange:Ie=>he(tt=>({...tt,opening_balance_date:Ie.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",value:ee.due_date,onChange:Ie=>he(tt=>({...tt,due_date:Ie.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 mt-4",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"Note:"})," This will create a journal entry debiting Retained Earnings (3998) and crediting Accounts Payable (2000). This ensures historical debts don't inflate current period expenses. The payable will appear in the list above and can be paid off like any other payable."]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>Y(!1),className:"px-4 py-2 text-xs text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:pe,className:"px-4 py-2 text-xs text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:pe?"Creating...":"Create Opening Balance"})]})]})]})})]})},PU=()=>{const{token:t}=ut(),a=ga(),[r,s]=g.useState([]),[n,i]=g.useState(!0),[o,d]=g.useState(""),[u,m]=g.useState("");g.useEffect(()=>{x()},[]);const x=async()=>{try{i(!0);const v=await ne.get(`${ie}/classes/gradelevel-classes`,{headers:{Authorization:`Bearer ${t}`}});s(v.data.data||[])}catch(v){console.error("Error fetching classes:",v),d("Failed to fetch classes")}finally{i(!1)}},f=v=>{a(`/dashboard/results/view/${v}`)},b=v=>{a(`/dashboard/results/entry/${v}`)},p=r.filter(v=>v.name&&v.name.toLowerCase().includes(u.toLowerCase())||v.stream_name&&v.stream_name.toLowerCase().includes(u.toLowerCase()));return e.jsxs("div",{className:"p-2 md:p-4",children:[e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("h1",{className:"text-lg md:text-xl font-bold text-gray-900 mb-2",children:"Results Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View and manage student results by class"})]}),e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:e.jsx("div",{className:"flex-1 max-w-md w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:aa,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-3 w-3"}),e.jsx("input",{type:"text",placeholder:"Search classes...",value:u,onChange:v=>m(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})})}),e.jsx("div",{className:"bg-white border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class Name"}),e.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stage"}),e.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stream"}),e.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capacity"}),e.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-2 py-4 text-center text-xs text-gray-500",children:"Loading..."})}):p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-2 py-4 text-center text-xs text-gray-500",children:u?"No classes found matching your search":"No classes found"})}):p.map(v=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-bold text-gray-900",children:v.name})}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:v.stream_stage||"N/A"})}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:v.stream_name||"N/A"})}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:v.capacity||"Unlimited"})}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-center",children:e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("button",{onClick:()=>f(v.id),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50 transition-colors",title:"View Results",children:e.jsx(R,{icon:Ma,className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>b(v.id),className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50 transition-colors",title:"Add Result",children:e.jsx(R,{icon:Ot,className:"h-4 w-4"})})]})})]},v.id))})]})})}),o&&e.jsx("div",{className:"mt-4 text-xs text-red-600",children:o})]})},OU=()=>{const{token:t}=ut();ga();const[a,r]=g.useState([]),[s,n]=g.useState(!0),[i,o]=g.useState(""),[d,u]=g.useState(""),[m,x]=g.useState(!1),[f,b]=g.useState(!1),[p,v]=g.useState(null),[j,N]=g.useState({grade:"",min_mark:"",max_mark:"",points:"",description:""}),[w,P]=g.useState(!1);g.useEffect(()=>{k()},[]);const k=async()=>{try{n(!0);const A=await ne.get(`${ie}/results/grading`,{headers:{Authorization:`Bearer ${t}`}});r(A.data.data||[])}catch(A){console.error("Error fetching grading criteria:",A),o("Failed to fetch grading criteria")}finally{n(!1)}},$=async A=>{A.preventDefault(),P(!0);try{const z={...j,min_mark:parseInt(j.min_mark),max_mark:parseInt(j.max_mark),points:parseInt(j.points)};await ne.post(`${ie}/results/grading`,z,{headers:{Authorization:`Bearer ${t}`}}),x(!1),N({grade:"",min_mark:"",max_mark:"",points:"",description:""}),k()}catch(z){console.error("Error adding grading criterion:",z),o("Failed to add grading criterion: "+(z.response?.data?.message||z.message))}finally{P(!1)}},O=async A=>{A.preventDefault(),P(!0);try{const z={...j,min_mark:parseInt(j.min_mark),max_mark:parseInt(j.max_mark),points:parseInt(j.points)};await ne.put(`${ie}/results/grading/${p.id}`,z,{headers:{Authorization:`Bearer ${t}`}}),b(!1),v(null),N({grade:"",min_mark:"",max_mark:"",points:"",description:""}),k()}catch(z){console.error("Error updating grading criterion:",z),o("Failed to update grading criterion: "+(z.response?.data?.message||z.message))}finally{P(!1)}},L=async A=>{if(window.confirm(`Are you sure you want to delete grade "${A.grade}"?`))try{await ne.delete(`${ie}/results/grading/${A.id}`,{headers:{Authorization:`Bearer ${t}`}}),k()}catch(z){console.error("Error deleting grading criterion:",z),o("Failed to delete grading criterion: "+(z.response?.data?.message||z.message))}},_=A=>{v(A),N({grade:A.grade,min_mark:A.min_mark.toString(),max_mark:A.max_mark.toString(),points:A.points.toString(),description:A.description||""}),b(!0)},E=a.filter(A=>A.grade.toLowerCase().includes(d.toLowerCase())||A.description&&A.description.toLowerCase().includes(d.toLowerCase()));return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-base font-bold text-gray-900 mb-2",children:"Grading Criteria"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage grade ranges and points for automatic grade calculation"})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:aa,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-3 w-3"}),e.jsx("input",{type:"text",placeholder:"Search grades...",value:d,onChange:A=>u(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("button",{onClick:()=>x(!0),className:"ml-4 px-4 py-2 bg-gray-900 text-white text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(R,{icon:Ot,className:"mr-2 h-3 w-3"}),"Add Grade"]})]}),e.jsx("div",{className:"bg-white border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mark Range"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-3 py-4 text-center text-xs text-gray-500",children:"Loading..."})}):E.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-3 py-4 text-center text-xs text-gray-500",children:d?"No grades found matching your search":"No grading criteria found"})}):E.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-bold text-gray-900",children:A.grade})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"text-xs text-gray-900",children:[A.min_mark," - ",A.max_mark]})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-medium text-gray-900",children:A.points})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("div",{className:"text-xs text-gray-900",children:A.description||"No description"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${A.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:A.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>_(A),className:"text-blue-600 hover:text-blue-900",title:"Edit Grade",children:e.jsx(R,{icon:ha,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>L(A),className:"text-red-600 hover:text-red-900",title:"Delete Grade",children:e.jsx(R,{icon:Yt,className:"h-3 w-3"})})]})})]},A.id))})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 w-full max-w-md rounded-lg",children:[e.jsx("h2",{className:"text-base font-semibold mb-4",children:"Add New Grade"}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Grade *"}),e.jsx("input",{type:"text",value:j.grade,onChange:A=>N(z=>({...z,grade:A.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:"e.g., A, B, C, D, E, F"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Min Mark *"}),e.jsx("input",{type:"number",value:j.min_mark,onChange:A=>N(z=>({...z,min_mark:A.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:"0",max:"100",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Max Mark *"}),e.jsx("input",{type:"number",value:j.max_mark,onChange:A=>N(z=>({...z,max_mark:A.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:"0",max:"100",placeholder:"100"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Points *"}),e.jsx("input",{type:"number",value:j.points,onChange:A=>N(z=>({...z,points:A.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:"0",placeholder:"e.g., 12 for A, 10 for B"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Description"}),e.jsx("textarea",{value:j.description,onChange:A=>N(z=>({...z,description:A.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:"2",placeholder:"Optional description (e.g., Excellent, Good, Pass)"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{x(!1),N({grade:"",min_mark:"",max_mark:"",points:"",description:""})},className:"px-4 py-1 text-xs text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:w,className:"px-4 py-1 text-xs text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50",children:w?"Adding...":"Add Grade"})]})]})]})}),f&&p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 w-full max-w-md rounded-lg",children:[e.jsx("h2",{className:"text-base font-semibold mb-4",children:"Edit Grade"}),e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Grade *"}),e.jsx("input",{type:"text",value:j.grade,onChange:A=>N(z=>({...z,grade:A.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Min Mark *"}),e.jsx("input",{type:"number",value:j.min_mark,onChange:A=>N(z=>({...z,min_mark:A.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Max Mark *"}),e.jsx("input",{type:"number",value:j.max_mark,onChange:A=>N(z=>({...z,max_mark:A.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:"0",max:"100"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Points *"}),e.jsx("input",{type:"number",value:j.points,onChange:A=>N(z=>({...z,points:A.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Description"}),e.jsx("textarea",{value:j.description,onChange:A=>N(z=>({...z,description:A.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:"2"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{b(!1),v(null),N({grade:"",min_mark:"",max_mark:"",points:"",description:""})},className:"px-4 py-1 text-xs text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:w,className:"px-4 py-1 text-xs text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50",children:w?"Updating...":"Update Grade"})]})]})]})}),i&&e.jsx("div",{className:"mt-4 text-xs text-red-600",children:i})]})},DU=()=>{const{token:t}=ut(),{classId:a}=ln(),r=ga(),s=Do(),n=s.state?.editMode||!1,i=s.state?.resultData||null,o=s.state?.studentId||null,[d,u]=g.useState(!1),[m,x]=g.useState(""),[f,b]=g.useState(""),[p,v]=g.useState(null),[j,N]=g.useState([]),[w,P]=g.useState([]),[k,$]=g.useState([]),[O,L]=g.useState(""),[_,E]=g.useState(""),[A,z]=g.useState(""),[M,D]=g.useState(new Date().getFullYear().toString()),[I,V]=g.useState(""),[H,B]=g.useState([{name:"Paper 1",mark:""}]),[W,K]=g.useState(!1);g.useEffect(()=>{a&&(X(),Q(),ye(),Y())},[a]),g.useEffect(()=>{n&&i&&o&&(L(i.subject_class_id.toString()),E(o),z(i.term),D(i.academic_year),J())},[n,i,o]);const X=async()=>{try{const ce=await ne.get(`${ie}/classes/gradelevel-classes/${a}`,{headers:{Authorization:`Bearer ${t}`}});v(ce.data.data)}catch(ce){console.error("Error fetching class info:",ce)}},Q=async()=>{try{const ce=await ne.get(`${ie}/classes/subject-classes?gradelevel_class_id=${a}`,{headers:{Authorization:`Bearer ${t}`}});N(ce.data.data||[])}catch(ce){console.error("Error fetching subjects:",ce)}},ye=async()=>{try{const ce=await ne.get(`${ie}/classes/gradelevel-classes/${a}/students`,{headers:{Authorization:`Bearer ${t}`}});P(ce.data.data||[])}catch(ce){console.error("Error fetching students:",ce)}},Y=async()=>{try{const ce=await ne.get(`${ie}/results/grading`,{headers:{Authorization:`Bearer ${t}`}});$(ce.data.data||[])}catch(ce){console.error("Error fetching grading criteria:",ce)}},J=async()=>{try{const ce=await ne.get(`${ie}/results/coursework`,{headers:{Authorization:`Bearer ${t}`},params:{reg_number:o,subject_class_id:i.subject_class_id,gradelevel_class_id:a,term:i.term,academic_year:i.academic_year}});if(ce.data.data&&ce.data.data.length>0&&V(ce.data.data[0].coursework_mark.toString()),i.paper_marks&&i.paper_marks.length>0){const De=i.paper_marks.map(ke=>({name:ke.paper_name,mark:ke.mark.toString()}));B(De)}}catch(ce){console.error("Error loading existing data:",ce)}},U=()=>{B([...H,{name:`Paper ${H.length+1}`,mark:""}])},ee=ce=>{if(H.length>1){const De=H.filter((ke,re)=>re!==ce);B(De)}},he=(ce,De,ke)=>{const re=[...H];re[ce][De]=ke,B(re)},pe=()=>{const ce=H.filter(re=>re.mark&&parseFloat(re.mark)>0);if(ce.length===0)return 0;const ke=ce.reduce((re,Ee)=>re+(parseFloat(Ee.mark)||0),0)/ce.length;return Math.round(ke*100)/100},se=ce=>{const De=k.find(ke=>ce>=ke.min_mark&&ce<=ke.max_mark);return De?{grade:De.grade,points:De.points}:{grade:"N/A",points:0}},te=async()=>{if(console.log("=== VALIDATION CHECK ==="),console.log("selectedSubject:",O),console.log("selectedStudent:",_),console.log("selectedTerm:",A),console.log("selectedYear:",M),console.log("courseworkMark:",I),console.log("paperMarks:",H),console.log("editMode:",n),!O||!_||!A||!M){console.log(" VALIDATION FAILED - Missing required fields"),x("Please fill in all required fields");return}K(!0);try{const ce=pe(),De=se(ce);if(console.log("=== CALCULATED VALUES ==="),console.log("totalMarks:",ce),console.log("gradeInfo:",De),n&&i){if(console.log(" UPDATING EXISTING RESULT"),I){const ke={reg_number:_,subject_class_id:O,gradelevel_class_id:a,term:A,academic_year:M,coursework_mark:parseFloat(I)};console.log(" UPDATING COURSEWORK:",ke),await ne.post(`${ie}/results/coursework`,ke,{headers:{Authorization:`Bearer ${t}`}}),console.log(" Coursework updated successfully")}for(let ke=0;ke<H.length;ke++){const re=H[ke];if(re.mark){let Ee=null;try{const Se={name:re.name,description:`${re.name} for ${O}`};console.log(" CREATING PAPER:",Se),Ee=(await ne.post(`${ie}/results/papers`,Se,{headers:{Authorization:`Bearer ${t}`}})).data.data.id,console.log(" Paper created successfully with ID:",Ee)}catch{console.log(" Paper creation failed, trying to get existing paper");try{const ve=(await ne.get(`${ie}/results/papers`,{headers:{Authorization:`Bearer ${t}`}})).data.data.find(Me=>Me.name===re.name);if(ve)Ee=ve.id,console.log(" Found existing paper, ID:",Ee);else{console.error(" Could not find or create paper");continue}}catch{console.error(" Could not get existing papers");continue}}if(Ee){const Se={result_id:i.id,paper_id:Ee,mark:parseFloat(re.mark)};console.log(" UPDATING PAPER MARK:",Se),await ne.post(`${ie}/results/results/paper-mark`,Se,{headers:{Authorization:`Bearer ${t}`}}),console.log(" Paper mark updated successfully")}}else console.log(" Skipping empty paper mark:",re)}b("Result updated successfully!")}else{if(console.log(" CREATING NEW RESULT"),I){const Se={reg_number:_,subject_class_id:O,gradelevel_class_id:a,term:A,academic_year:M,coursework_mark:parseFloat(I)};console.log(" SAVING COURSEWORK:",Se),await ne.post(`${ie}/results/coursework`,Se,{headers:{Authorization:`Bearer ${t}`}}),console.log(" Coursework saved successfully")}else console.log(" No coursework mark to save");const ke={reg_number:_,subject_class_id:O,gradelevel_class_id:a,term:A,academic_year:M};console.log(" SAVING MAIN RESULT:",ke);const re=await ne.post(`${ie}/results/results`,ke,{headers:{Authorization:`Bearer ${t}`}});console.log(" Main result saved successfully");const Ee=re.data.data.id;for(let Se=0;Se<H.length;Se++){const Ge=H[Se];if(Ge.mark){let ve=null;try{const Me={name:Ge.name,description:`${Ge.name} for ${O}`};console.log(" CREATING PAPER:",Me),ve=(await ne.post(`${ie}/results/papers`,Me,{headers:{Authorization:`Bearer ${t}`}})).data.data.id,console.log(" Paper created successfully with ID:",ve)}catch{console.log(" Paper creation failed, trying to get existing paper");try{const Ie=(await ne.get(`${ie}/results/papers`,{headers:{Authorization:`Bearer ${t}`}})).data.data.find(tt=>tt.name===Ge.name);if(Ie)ve=Ie.id,console.log(" Found existing paper, ID:",ve);else{console.error(" Could not find or create paper");continue}}catch{console.error(" Could not get existing papers");continue}}if(ve){const Me={result_id:Ee,paper_id:ve,mark:parseFloat(Ge.mark)};console.log(" SAVING PAPER MARK:",Me),await ne.post(`${ie}/results/results/paper-mark`,Me,{headers:{Authorization:`Bearer ${t}`}}),console.log(" Paper mark saved successfully")}}else console.log(" Skipping empty paper mark:",Ge)}b("Result saved successfully!"),V(""),B([{name:"Paper 1",mark:""}]),E("")}setTimeout(()=>{r(`/dashboard/results/student/${a}/${_}`)},1500)}catch(ce){console.error(" ERROR SAVING RESULT:",ce),console.error("Error response:",ce.response?.data),console.error("Error status:",ce.response?.status),console.error("Error message:",ce.message),x("Failed to save result: "+(ce.response?.data?.message||ce.message))}finally{K(!1)}},ue=pe(),ge=se(ue);return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-base font-bold text-gray-900 mb-2",children:n?"Edit Result":"Enter Results"}),p&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Class: ",p.name," - ",p.stream_stage," - ",p.stream_name]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Subject *"}),e.jsxs("select",{value:O,onChange:ce=>L(ce.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Subject"}),j.map(ce=>e.jsx("option",{value:ce.id,children:ce.subject_name},ce.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Student *"}),e.jsxs("select",{value:_,onChange:ce=>E(ce.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Student"}),w.map(ce=>e.jsxs("option",{value:ce.RegNumber,children:[ce.Surname," ",ce.Name," (",ce.RegNumber,")"]},ce.RegNumber))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Term *"}),e.jsxs("select",{value:A,onChange:ce=>z(ce.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Academic Year *"}),e.jsx("input",{type:"text",value:M,onChange:ce=>D(ce.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Coursework Mark"}),e.jsx("input",{type:"number",value:I,onChange:ce=>V(ce.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",min:"0",max:"100",step:"0.1",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-xs text-gray-600",children:"Paper Marks"}),e.jsxs("button",{type:"button",onClick:U,className:"text-blue-600 hover:text-blue-900 text-xs flex items-center",children:[e.jsx(R,{icon:Ot,className:"h-3 w-3 mr-1"}),"Add Paper"]})]}),e.jsx("div",{className:"space-y-2",children:H.map((ce,De)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:ce.name,onChange:ke=>he(De,"name",ke.target.value),className:"flex-1 border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Paper name"}),e.jsx("input",{type:"number",value:ce.mark,onChange:ke=>he(De,"mark",ke.target.value),className:"w-20 border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",min:"0",max:"100",step:"0.1",placeholder:"0"}),H.length>1&&e.jsx("button",{type:"button",onClick:()=>ee(De),className:"text-red-600 hover:text-red-900",children:e.jsx(R,{icon:Yt,className:"h-3 w-3"})})]},De))})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-200",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase mb-2",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Coursework:"})," ",I||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Paper Average:"})," ",ue]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Grade:"})," ",ge.grade]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Points:"})," ",ge.points]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("button",{onClick:te,disabled:W||!O||!_||!A||!M,className:"px-4 py-2 bg-gray-900 text-white text-xs hover:bg-gray-800 disabled:opacity-50 flex items-center",children:[e.jsx(R,{icon:Er,className:"mr-2 h-3 w-3"}),W?"Saving...":n?"Update Result":"Save Result"]})})]}),m&&e.jsx("div",{className:"mt-4 text-xs text-red-600",children:m}),f&&e.jsx("div",{className:"mt-4 text-xs text-green-600",children:f})]})},LU=()=>{const{token:t}=ut(),{classId:a}=ln(),r=ga(),[s,n]=g.useState(null),[i,o]=g.useState([]),[d,u]=g.useState(!0),[m,x]=g.useState("");g.useEffect(()=>{a&&(f(),b())},[a]);const f=async()=>{try{const w=await ne.get(`${ie}/classes/gradelevel-classes/${a}`,{headers:{Authorization:`Bearer ${t}`}});n(w.data.data)}catch(w){console.error("Error fetching class info:",w)}},b=async()=>{try{u(!0);const P=(await ne.get(`${ie}/classes/gradelevel-classes/${a}/students`,{headers:{Authorization:`Bearer ${t}`}})).data.data||[];if(P.length>0){const k=new Date().getFullYear(),$="1";try{const L=(await ne.get(`${ie}/results/results/class-positions`,{headers:{Authorization:`Bearer ${t}`},params:{gradelevel_class_id:a,term:$,academic_year:k}})).data.data||[],_=P.map(E=>{const A=L.find(z=>z.RegNumber===E.RegNumber);return{...E,position:A?.position||"N/A",total_marks:A?.total_mark||"N/A",average:A?.average||"N/A",grade:A?.grade||"N/A"}});o(_)}catch{console.log("No position data available, showing students without positions"),o(P)}}else o([])}catch(w){console.error("Error fetching students:",w),x("Failed to fetch students")}finally{u(!1)}},p=w=>{r(`/dashboard/results/student/${a}/${w.RegNumber}`)},v=()=>{r(`/dashboard/results/entry/${a}`)},j=w=>w===1?e.jsx(R,{icon:Rd,className:"h-3 w-3 text-yellow-500"}):w===2?e.jsx(R,{icon:EC,className:"h-3 w-3 text-gray-400"}):w===3?e.jsx(R,{icon:RC,className:"h-3 w-3 text-orange-500"}):null,N=w=>w===1?"bg-yellow-100 text-yellow-800":w===2?"bg-gray-100 text-gray-800":w===3?"bg-orange-100 text-orange-800":w==="N/A"?"bg-gray-100 text-gray-600":"bg-blue-100 text-blue-800";return e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"mb-6",children:e.jsx("h1",{className:"text-base font-bold text-gray-900 mb-2",children:"Class Results"})}),s&&e.jsx("div",{className:"bg-white border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Class Name"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Stage"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.stream_stage||"N/A"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Stream"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.stream_name||"N/A"})]})]})}),e.jsx("div",{className:"flex justify-end mb-6",children:e.jsxs("button",{onClick:v,className:"px-4 py-2 bg-gray-900 text-white text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(R,{icon:Ot,className:"mr-2 h-3 w-3"}),"Add Result"]})}),e.jsx("div",{className:"bg-white border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registration Number"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-3 py-4 text-center text-xs text-gray-500",children:"Loading..."})}):i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-3 py-4 text-center text-xs text-gray-500",children:"No students found in this class"})}):i.map((w,P)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[w.position!=="N/A"&&j(w.position),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${N(w.position)}`,children:w.position!=="N/A"?w.position:"N/A"})]})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"text-xs font-bold text-gray-900",children:[w.Surname," ",w.Name]})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:w.RegNumber})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs font-medium",children:e.jsx("button",{onClick:()=>p(w),className:"text-blue-600 hover:text-blue-900",title:"View Student Results",children:e.jsx(R,{icon:Ma,className:"h-3 w-3"})})})]},w.RegNumber))})]})}),m&&e.jsx("div",{className:"mt-4 text-xs text-red-600",children:m})]})},MU=()=>{const{token:t}=ut(),{classId:a,studentId:r}=ln(),s=ga(),[n,i]=g.useState(null),[o,d]=g.useState(null),[u,m]=g.useState([]),[x,f]=g.useState(null),[b,p]=g.useState(null),[v,j]=g.useState([]),[N,w]=g.useState(!0),[P,k]=g.useState(""),[$,O]=g.useState(!1),[L,_]=g.useState(null);g.useEffect(()=>{a&&r&&(E(),A(),z(),M(),I())},[a,r]),g.useEffect(()=>{n&&n.stream_id&&r&&D()},[n,r]);const E=async()=>{try{const X=await ne.get(`${ie}/classes/gradelevel-classes/${a}`,{headers:{Authorization:`Bearer ${t}`}});i(X.data.data)}catch(X){console.error("Error fetching class info:",X)}},A=async()=>{try{const Q=(await ne.get(`${ie}/classes/gradelevel-classes/${a}/students`,{headers:{Authorization:`Bearer ${t}`}})).data.data.find(ye=>ye.RegNumber===r);Q&&d(Q)}catch(X){console.error("Error fetching student info:",X)}},z=async()=>{try{w(!0);const X=new Date().getFullYear(),ye=await ne.get(`${ie}/results/results`,{headers:{Authorization:`Bearer ${t}`},params:{reg_number:r,gradelevel_class_id:a,term:"1",academic_year:X}});m(ye.data.data||[])}catch(X){console.error("Error fetching student results:",X),k("Failed to fetch student results")}finally{w(!1)}},M=async()=>{try{const X=new Date().getFullYear(),J=((await ne.get(`${ie}/results/results/class-positions`,{headers:{Authorization:`Bearer ${t}`},params:{gradelevel_class_id:a,term:"1",academic_year:X}})).data.data||[]).find(U=>U.RegNumber===r);J&&f(J)}catch(X){console.error("Error fetching student position:",X)}},D=async()=>{try{const X=new Date().getFullYear(),Q="1";if(n&&n.stream_id){const J=((await ne.get(`${ie}/results/results/stream-positions`,{headers:{Authorization:`Bearer ${t}`},params:{stream_id:n.stream_id,term:Q,academic_year:X}})).data.data||[]).find(U=>U.RegNumber===r);J&&p(J)}}catch(X){console.error("Error fetching student stream position:",X)}},I=async()=>{try{const X=new Date().getFullYear(),ye=await ne.get(`${ie}/results/coursework`,{headers:{Authorization:`Bearer ${t}`},params:{reg_number:r,gradelevel_class_id:a,term:"1",academic_year:X}});j(ye.data.data||[])}catch(X){console.error("Error fetching coursework marks:",X)}},V=X=>X===1?e.jsx(R,{icon:Rd,className:"h-3 w-3 text-yellow-500"}):X===2?e.jsx(R,{icon:EC,className:"h-3 w-3 text-gray-400"}):X===3?e.jsx(R,{icon:RC,className:"h-3 w-3 text-orange-500"}):null,H=X=>X===1?"bg-yellow-100 text-yellow-800":X===2?"bg-gray-100 text-gray-800":X===3?"bg-orange-100 text-orange-800":X==="N/A"?"bg-gray-100 text-gray-600":"bg-blue-100 text-blue-800",B=X=>{s(`/dashboard/results/entry/${a}`,{state:{editMode:!0,resultData:X,studentId:r}})},W=X=>{_(X),O(!0)},K=async()=>{try{await ne.delete(`${ie}/results/results/${L.id}`,{headers:{Authorization:`Bearer ${t}`}}),z(),M(),D(),O(!1),_(null)}catch(X){console.error("Error deleting result:",X),k("Failed to delete result")}};return e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"mb-6",children:e.jsx("h1",{className:"text-base font-bold text-gray-900 mb-2",children:"Student Results"})}),o&&e.jsx("div",{className:"bg-white border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Student Name"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[o.Surname," ",o.Name]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Registration Number"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.RegNumber})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Class"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Grade Level"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.stream_stage||"N/A"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Stream"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.stream_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Gender"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.Gender})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Term"}),e.jsx("p",{className:"text-sm text-gray-900",children:"Term 1"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Academic Year"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date().getFullYear()})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Class Position"}),e.jsx("p",{className:"text-sm text-gray-900",children:x?e.jsxs("span",{className:"flex items-center",children:[V(x.position),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${H(x.position)}`,children:x.position})]}):"N/A"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Stream Position"}),e.jsx("p",{className:"text-sm text-gray-900",children:b?e.jsxs("span",{className:"flex items-center",children:[V(b.streamPosition),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${H(b.streamPosition)}`,children:b.streamPosition})]}):"N/A"})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"Subject Results"})}),N?e.jsx("div",{className:"px-4 py-8 text-center text-xs text-gray-500",children:"Loading results..."}):u.length===0?e.jsx("div",{className:"px-4 py-8 text-center text-xs text-gray-500",children:"No results found for this student"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coursework"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paper Marks"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(X=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-medium text-gray-900",children:X.subject_name})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:(()=>{const Q=v.find(ye=>ye.subject_class_id===X.subject_class_id);return Q?Q.coursework_mark:"N/A"})()})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:X.paper_marks&&X.paper_marks.length>0?e.jsx("div",{children:X.paper_marks.map((Q,ye)=>e.jsxs("div",{className:"text-xs",children:[Q.paper_name,": ",Q.mark]},ye))}):"N/A"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-medium text-gray-900",children:X.total_mark||"N/A"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-medium text-gray-900",children:X.grade||"N/A"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>B(X),className:"text-blue-600 hover:text-blue-900",title:"Edit Result",children:e.jsx(R,{icon:ha,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>W(X),className:"text-red-600 hover:text-red-900",title:"Delete Result",children:e.jsx(R,{icon:Yt,className:"h-3 w-3"})})]})})]},X.id))})]})})]}),P&&e.jsx("div",{className:"mt-4 text-xs text-red-600",children:P}),$&&L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 w-full max-w-md",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"Delete Result"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Are you sure you want to delete the result for"," ",e.jsx("span",{className:"font-semibold",children:L.subject_name}),"?"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This action cannot be undone."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{O(!1),_(null)},className:"px-4 py-2 text-xs bg-gray-300 text-gray-700 hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{onClick:K,className:"px-4 py-2 text-xs bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})})]})},RU=()=>{const{token:t}=ut();ga();const[a,r]=g.useState(!1),[s,n]=g.useState(""),[i,o]=g.useState(""),[d,u]=g.useState([]),[m,x]=g.useState([]),[f,b]=g.useState([]),[p,v]=g.useState([]),[j,N]=g.useState(""),[w,P]=g.useState(""),[k,$]=g.useState(""),[O,L]=g.useState(new Date().getFullYear().toString()),[_,E]=g.useState({}),[A,z]=g.useState(!1);g.useEffect(()=>{M()},[]),g.useEffect(()=>{j&&(D(),I())},[j]),g.useEffect(()=>{j&&w&&k&&O&&V()},[j,w,k,O]);const M=async()=>{try{const K=await ne.get(`${ie}/classes/gradelevel-classes`,{headers:{Authorization:`Bearer ${t}`}});u(K.data.data||[])}catch(K){console.error("Error fetching classes:",K)}},D=async()=>{try{const K=await ne.get(`${ie}/classes/subject-classes?gradelevel_class_id=${j}`,{headers:{Authorization:`Bearer ${t}`}});x(K.data.data||[])}catch(K){console.error("Error fetching subjects:",K)}},I=async()=>{try{const K=await ne.get(`${ie}/classes/gradelevel-classes/${j}/students`,{headers:{Authorization:`Bearer ${t}`}});b(K.data.data||[])}catch(K){console.error("Error fetching students:",K)}},V=async()=>{try{r(!0);const K=await ne.get(`${ie}/results/coursework`,{headers:{Authorization:`Bearer ${t}`},params:{gradelevel_class_id:j,subject_class_id:w,term:k,academic_year:O}});v(K.data.data||[]);const X={};K.data.data.forEach(Q=>{X[Q.reg_number]=Q.coursework_mark}),E(X)}catch(K){console.error("Error fetching coursework:",K),n("Failed to fetch coursework")}finally{r(!1)}},H=(K,X)=>{E(Q=>({...Q,[K]:X}))},B=async()=>{z(!0),n(""),o("");try{const K=[];Object.keys(_).forEach(X=>{const Q=_[X];Q!==void 0&&Q!==""&&K.push(ne.post(`${ie}/results/coursework`,{reg_number:X,subject_class_id:w,gradelevel_class_id:j,academic_year:O,term:k,coursework_mark:parseFloat(Q)},{headers:{Authorization:`Bearer ${t}`}}))}),await Promise.all(K),o("All coursework marks saved successfully!"),V()}catch(K){console.error("Error saving coursework:",K),n("Failed to save coursework: "+(K.response?.data?.message||K.message))}finally{z(!1)}},W=async()=>{z(!0),n(""),o("");try{const K=[];if(f.forEach(X=>{const Q=_[X.RegNumber];Q!==void 0&&Q!==""&&K.push({reg_number:X.RegNumber,subject_class_id:w,gradelevel_class_id:j,academic_year:O,term:k,coursework_mark:parseFloat(Q)})}),K.length===0){n("No coursework marks to save");return}await ne.post(`${ie}/results/coursework/bulk`,{coursework_data:K},{headers:{Authorization:`Bearer ${t}`}}),o(`Successfully saved ${K.length} coursework marks!`),V()}catch(K){console.error("Error bulk saving coursework:",K),n("Failed to save coursework: "+(K.response?.data?.message||K.message))}finally{z(!1)}};return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-base font-bold text-gray-900 mb-2",children:"Coursework Entry"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enter mid-term coursework marks for students"})]}),e.jsx("div",{className:"bg-white p-4 border border-gray-200 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Class"}),e.jsxs("select",{value:j,onChange:K=>N(K.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Class"}),d.map(K=>e.jsx("option",{value:K.id,children:K.name},K.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Subject"}),e.jsxs("select",{value:w,onChange:K=>P(K.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:!j,children:[e.jsx("option",{value:"",children:"Select Subject"}),m.map(K=>e.jsx("option",{value:K.id,children:K.name},K.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Term"}),e.jsxs("select",{value:k,onChange:K=>$(K.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Academic Year"}),e.jsx("input",{type:"text",value:O,onChange:K=>L(K.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 2024"})]})]})}),j&&w&&k&&O&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Coursework Entry - ",m.find(K=>K.id==w)?.name,"(",k," ",O,")"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:B,disabled:A,className:"px-4 py-2 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50 flex items-center",children:[e.jsx(R,{icon:Er,className:"mr-2 h-3 w-3"}),A?"Saving...":"Save Marks"]}),e.jsxs("button",{onClick:W,disabled:A,className:"px-4 py-2 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 disabled:opacity-50 flex items-center",children:[e.jsx(R,{icon:Ot,className:"mr-2 h-3 w-3"}),A?"Saving...":"Bulk Save"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coursework Mark"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"px-3 py-4 text-center text-xs text-gray-500",children:"Loading..."})}):f.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"px-3 py-4 text-center text-xs text-gray-500",children:"No students found in this class"})}):f.map(K=>{const X=p.find(Q=>Q.reg_number===K.RegNumber);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-900",children:[K.Surname," ",K.Name]}),e.jsx("div",{className:"text-xs text-gray-500",children:K.RegNumber})]}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:_[K.RegNumber]||"",onChange:Q=>H(K.RegNumber,Q.target.value),className:"w-20 border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${X?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:X?"Saved":"Not Saved"})})]},K.RegNumber)})})]})})]}),s&&e.jsx("div",{className:"mt-4 text-xs text-red-600",children:s}),i&&e.jsx("div",{className:"mt-4 text-xs text-green-600",children:i})]})},G6=()=>{const[t,a]=g.useState([]),[r,s]=g.useState(!0),[n,i]=g.useState(!1),[o,d]=g.useState(!1),[u,m]=g.useState(null),[x,f]=g.useState(""),[b,p]=g.useState(""),{token:v}=ut(),j=ga(),[N,w]=g.useState({name:"",description:"",location:"",gender:"Male"});g.useEffect(()=>{P()},[]);const P=async()=>{try{s(!0);const E=await ne.get(`${ie}/boarding/hostels`,{headers:{Authorization:`Bearer ${v}`}});console.log("Hostels API response:",E.data),console.log("Response data type:",typeof E.data),console.log("Is array:",Array.isArray(E.data)),Array.isArray(E.data)?a(E.data):E.data&&Array.isArray(E.data.data)?a(E.data.data):E.data&&E.data.hostels&&Array.isArray(E.data.hostels)?a(E.data.hostels):(console.warn("Unexpected response format, setting empty array"),a([]))}catch(E){console.error("Error fetching hostels:",E),p("Failed to load hostels"),a([])}finally{s(!1)}},k=async E=>{E.preventDefault();try{o?await ne.put(`${ie}/boarding/hostels/${u.id}`,N,{headers:{Authorization:`Bearer ${v}`}}):await ne.post(`${ie}/boarding/hostels`,N,{headers:{Authorization:`Bearer ${v}`}}),i(!1),d(!1),w({name:"",description:"",location:"",gender:"Male"}),P()}catch(A){console.error("Error saving hostel:",A);let z="Failed to save hostel";A.response&&A.response.data&&A.response.data.message?z=A.response.data.message:A.message&&(z=A.message),p(z)}},$=E=>{m(E),w({name:E.name,description:E.description,location:E.location,gender:E.gender}),d(!0)},O=E=>{j(`/dashboard/boarding/hostel/${E.id}`)},L=async E=>{if(window.confirm("Are you sure you want to delete this hostel?"))try{await ne.delete(`${ie}/boarding/hostels/${E.id}`,{headers:{Authorization:`Bearer ${v}`}}),P()}catch(A){console.error("Error deleting hostel:",A),p("Failed to delete hostel")}},_=(()=>{try{return Array.isArray(t)?t.filter(E=>E&&E.name&&E.name.toLowerCase().includes(x.toLowerCase())||E&&E.location&&E.location.toLowerCase().includes(x.toLowerCase())):(console.warn("Hostels is not an array:",t),[])}catch(E){return console.error("Error filtering hostels:",E),[]}})();return r?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-6"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((E,A)=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},A))})]})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Hostels"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage boarding hostels and their details"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"bg-gray-900 text-white px-3 py-1.5 flex items-center space-x-2 hover:bg-gray-800 text-xs font-medium",children:[e.jsx(R,{icon:Ot}),e.jsx("span",{children:"Add Hostel"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:aa,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search hostels...",value:x,onChange:E=>f(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200/30 focus:outline-none focus:ring-2 focus:ring-gray-500 text-xs"})]})}),b&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 text-xs",children:b}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200/30",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gender"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Rooms"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Capacity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200/30",children:(_||[]).map((E,A)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:E?.name||"N/A"}),e.jsx("div",{className:"text-xs text-gray-500",children:E?.description||""})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:E?.location||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:E?.gender||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:E?.total_rooms||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:E?.total_capacity||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>E&&O(E),className:"text-blue-600 hover:text-blue-900 p-1",disabled:!E,children:e.jsx(R,{icon:Ma,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>E&&$(E),className:"text-green-600 hover:text-green-900 p-1",disabled:!E,children:e.jsx(R,{icon:ha,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>E&&L(E),className:"text-red-600 hover:text-red-900 p-1",disabled:!E,children:e.jsx(R,{icon:Yt,className:"h-3 w-3"})})]})})]},E?.id||A))})]})}),(n||o)&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-30 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-3/4 max-w-4xl shadow-lg bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:o?"Edit Hostel":"Add New Hostel"}),e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",required:!0,value:N.name,onChange:E=>w({...N,name:E.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:N.description,onChange:E=>w({...N,description:E.target.value}),rows:"3",className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Location"}),e.jsx("input",{type:"text",required:!0,value:N.location,onChange:E=>w({...N,location:E.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Gender"}),e.jsxs("select",{required:!0,value:N.gender,onChange:E=>w({...N,gender:E.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{i(!1),d(!1),w({name:"",description:"",location:"",gender:"Male"})},className:"px-3 py-1.5 border border-gray-300 text-xs font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-3 py-1.5 bg-gray-900 text-white text-xs font-medium hover:bg-gray-800",children:o?"Update":"Create"})]})]})]})})})]})},$U=()=>{const[t,a]=g.useState("hostels"),r=[{id:"hostels",name:"Hostels",icon:Mn}],s=()=>{switch(t){case"hostels":return e.jsx(G6,{});default:return e.jsx(G6,{})}};return e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Boarding Facilities"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage hostels, rooms, and student enrollments"})]})})}),e.jsx("div",{className:"mb-6",children:e.jsx("nav",{className:"flex space-x-8 border-b border-gray-200",children:r.map(n=>e.jsxs("button",{onClick:()=>a(n.id),className:`py-2 px-1 border-b-2 font-medium text-xs flex items-center ${t===n.id?"border-gray-700 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:n.icon,className:"mr-2 h-3 w-3"}),n.name]},n.id))})}),e.jsx("div",{className:"min-h-96",children:s()})]})},FU=()=>{const[t,a]=g.useState(null),[r,s]=g.useState(!0),[n,i]=g.useState(""),[o,d]=g.useState("rooms"),{token:u}=ut(),{id:m}=ln();ga();const x=[{id:"rooms",name:"Rooms",icon:dg},{id:"enrollments",name:"Enrollments",icon:Mr},{id:"billing",name:"Billing",icon:OB}];g.useEffect(()=>{f()},[m]);const f=async()=>{try{s(!0);const p=await ne.get(`${ie}/boarding/hostels/${m}`,{headers:{Authorization:`Bearer ${u}`}});a(p.data.data)}catch(p){console.error("Error fetching hostel:",p),i("Failed to load hostel details")}finally{s(!1)}},b=()=>{switch(o){case"rooms":return e.jsx(V6,{hostelId:m});case"enrollments":return e.jsx(IU,{hostelId:m});case"billing":return e.jsx(BU,{hostelId:m});default:return e.jsx(V6,{hostelId:m})}};return r?e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-6"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((p,v)=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},v))})]})}):n?e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 text-xs",children:n})}):t?e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage hostel details and operations"})]})})})}),e.jsxs("div",{className:"mb-6 bg-white border border-gray-200/30 p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Location"}),e.jsx("p",{className:"text-xs text-gray-900",children:t.location||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Gender"}),e.jsx("p",{className:"text-xs text-gray-900",children:t.gender||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Total Rooms"}),e.jsx("p",{className:"text-xs text-gray-900",children:t.total_rooms||0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Total Capacity"}),e.jsx("p",{className:"text-xs text-gray-900",children:t.total_capacity||0})]})]}),t.description&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Description"}),e.jsx("p",{className:"text-xs text-gray-900",children:t.description})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("nav",{className:"flex space-x-8 border-b border-gray-200",children:x.map(p=>e.jsxs("button",{onClick:()=>d(p.id),className:`py-2 px-1 border-b-2 font-medium text-xs flex items-center ${o===p.id?"border-gray-700 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:p.icon,className:"mr-2 h-3 w-3"}),p.name]},p.id))})}),e.jsx("div",{className:"min-h-96",children:b()})]}):e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"mb-4 p-4 bg-yellow-100 border border-yellow-400 text-yellow-700 text-xs",children:"Hostel not found"})})},V6=({hostelId:t})=>{const[a,r]=g.useState([]),[s,n]=g.useState(!0),[i,o]=g.useState(!1),[d,u]=g.useState(!1),[m,x]=g.useState(!1),[f,b]=g.useState(null),[p,v]=g.useState(""),[j,N]=g.useState(""),{token:w}=ut(),[P,k]=g.useState({room_number:"",room_type:"Single",floor_number:"",capacity:1,description:""});g.useEffect(()=>{$()},[t]);const $=async()=>{try{n(!0);const z=await ne.get(`${ie}/boarding/hostels/${t}/rooms`,{headers:{Authorization:`Bearer ${w}`}});z.data&&Array.isArray(z.data.data)?r(z.data.data):r([])}catch(z){console.error("Error fetching rooms:",z),N("Failed to load rooms"),r([])}finally{n(!1)}},O=async z=>{z.preventDefault();try{d?await ne.put(`${ie}/boarding/rooms/${f.id}`,P,{headers:{Authorization:`Bearer ${w}`}}):await ne.post(`${ie}/boarding/rooms`,{...P,hostel_id:t},{headers:{Authorization:`Bearer ${w}`}}),o(!1),u(!1),k({room_number:"",room_type:"Single",floor_number:"",capacity:1,description:""}),$()}catch(M){console.error("Error saving room:",M),N("Failed to save room")}},L=z=>{b(z),k({room_number:z.room_number,room_type:z.room_type,floor_number:z.floor_number,capacity:z.capacity,description:z.description||""}),u(!0)},_=z=>{b(z),x(!0)},E=async z=>{if(window.confirm("Are you sure you want to delete this room?"))try{await ne.delete(`${ie}/boarding/rooms/${z.id}`,{headers:{Authorization:`Bearer ${w}`}}),$()}catch(M){console.error("Error deleting room:",M),N("Failed to delete room")}},A=a.filter(z=>z&&z.room_number&&z.room_number.toLowerCase().includes(p.toLowerCase())||z&&z.room_type&&z.room_type.toLowerCase().includes(p.toLowerCase()));return s?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((z,M)=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},M))})]}):e.jsxs("div",{className:"bg-white border border-gray-200/30 p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Rooms"}),e.jsxs("button",{onClick:()=>o(!0),className:"bg-gray-900 text-white px-3 py-1.5 text-xs font-medium hover:bg-gray-800",children:[e.jsx(R,{icon:Ot,className:"mr-1"}),"Add Room"]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:aa,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search rooms...",value:p,onChange:z=>v(z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200/30 focus:outline-none focus:ring-2 focus:ring-gray-500 text-xs"})]})}),j&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 text-xs",children:j}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200/30",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Room Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Floor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capacity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Occupancy"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200/30",children:(A||[]).map((z,M)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:z?.room_number||"N/A"}),e.jsx("div",{className:"text-xs text-gray-500",children:z?.description||""})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:z?.room_type||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:z?.floor_number||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:z?.capacity||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:z?.current_enrollments||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>z&&_(z),className:"text-blue-600 hover:text-blue-900 p-1",disabled:!z,children:e.jsx(R,{icon:Ma,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>z&&L(z),className:"text-green-600 hover:text-green-900 p-1",disabled:!z,children:e.jsx(R,{icon:ha,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>z&&E(z),className:"text-red-600 hover:text-red-900 p-1",disabled:!z,children:e.jsx(R,{icon:Yt,className:"h-3 w-3"})})]})})]},z?.id||M))})]})}),(i||d)&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-30 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-3/4 max-w-4xl shadow-lg bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:d?"Edit Room":"Add New Room"}),e.jsxs("form",{onSubmit:O,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Room Number"}),e.jsx("input",{type:"text",required:!0,value:P.room_number,onChange:z=>k({...P,room_number:z.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Room Type"}),e.jsxs("select",{required:!0,value:P.room_type,onChange:z=>k({...P,room_type:z.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"Single",children:"Single"}),e.jsx("option",{value:"Double",children:"Double"}),e.jsx("option",{value:"Triple",children:"Triple"}),e.jsx("option",{value:"Quad",children:"Quad"}),e.jsx("option",{value:"Many",children:"Many"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Floor Number"}),e.jsx("input",{type:"number",required:!0,value:P.floor_number,onChange:z=>k({...P,floor_number:z.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Capacity"}),e.jsx("input",{type:"number",required:!0,min:"1",value:P.capacity,onChange:z=>k({...P,capacity:parseInt(z.target.value)}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:P.description,onChange:z=>k({...P,description:z.target.value}),rows:"3",className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{o(!1),u(!1),k({room_number:"",room_type:"Single",floor_number:"",capacity:1,description:""})},className:"px-3 py-1.5 border border-gray-300 text-xs font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-3 py-1.5 bg-gray-900 text-white text-xs font-medium hover:bg-gray-800",children:d?"Update":"Create"})]})]})]})})}),m&&f&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Room Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Room Number"}),e.jsx("p",{className:"text-xs text-gray-900",children:f?.room_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Room Type"}),e.jsx("p",{className:"text-xs text-gray-900",children:f?.room_type||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Floor Number"}),e.jsx("p",{className:"text-xs text-gray-900",children:f?.floor_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Capacity"}),e.jsx("p",{className:"text-xs text-gray-900",children:f?.capacity||0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Current Occupancy"}),e.jsx("p",{className:"text-xs text-gray-900",children:f?.current_enrollments||0})]}),f?.description&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Description"}),e.jsx("p",{className:"text-xs text-gray-900",children:f.description})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>x(!1),className:"px-3 py-1.5 bg-gray-900 text-white text-xs font-medium hover:bg-gray-800",children:"Close"})})]})})})]})},IU=({hostelId:t})=>{const[a,r]=g.useState([]),[s,n]=g.useState([]),[i,o]=g.useState(!0),[d,u]=g.useState(!1),[m,x]=g.useState(!1),[f,b]=g.useState(!1),[p,v]=g.useState(null),[j,N]=g.useState(""),[w,P]=g.useState(""),[k,$]=g.useState(""),[O,L]=g.useState(""),[_,E]=g.useState(!1),{token:A}=ut(),[z,M]=g.useState({student_reg_number:"",room_id:"",academic_year:"",term:"",enrollment_date:"",check_in_date:"",check_out_date:"",status:"enrolled",notes:""}),[D,I]=g.useState(""),[V,H]=g.useState(null);g.useEffect(()=>{W(),B()},[t]);const B=g.useCallback(async()=>{try{o(!0);const ue=new URLSearchParams;w&&ue.append("term",w),k&&ue.append("academic_year",k);const ge=`${ie}/boarding/hostels/${t}/enrollments${ue.toString()?`?${ue.toString()}`:""}`,ce=await ne.get(ge,{headers:{Authorization:`Bearer ${A}`}});ce.data&&Array.isArray(ce.data.data)?r(ce.data.data):r([])}catch(ue){console.error("Error fetching enrollments:",ue),L("Failed to load enrollments"),r([])}finally{o(!1)}},[t,w,k,A]),W=g.useCallback(async()=>{try{const ue=await ne.get(`${ie}/boarding/hostels/${t}/rooms`,{headers:{Authorization:`Bearer ${A}`}});ue.data&&Array.isArray(ue.data.data)?n(ue.data.data):n([])}catch(ue){console.error("Error fetching rooms:",ue),n([])}},[t,A]),K=async ue=>{if(ue.preventDefault(),!z.student_reg_number){L("Student registration number is required");return}if(!z.room_id){L("Room selection is required");return}if(!z.academic_year){L("Academic year is required");return}if(!z.term){L("Term is required");return}if(!z.enrollment_date){L("Enrollment date is required");return}E(!0),L("");try{const ge={...z};ge.term&&ge.term.startsWith("Term ")&&(ge.term=ge.term.replace("Term ",""));const ce=m?ge:{...ge,hostel_id:t};if(console.log("Sending enrollment data:",ce),m)await ne.put(`${ie}/boarding/enrollments/${p.id}`,ge,{headers:{Authorization:`Bearer ${A}`}});else{const De=await ne.post(`${ie}/boarding/enrollments`,ce,{headers:{Authorization:`Bearer ${A}`}});console.log("Enrollment response:",De.data)}u(!1),x(!1),M({student_reg_number:"",room_id:"",academic_year:"",term:"",enrollment_date:"",check_in_date:"",check_out_date:"",status:"enrolled",notes:""}),ee(),B()}catch(ge){console.error("Error saving enrollment:",ge),ge.response&&ge.response.data&&ge.response.data.message?L(ge.response.data.message):L("Failed to save enrollment")}finally{E(!1)}},X=async ue=>{v(ue);let ge=ue.term;ue.term&&!ue.term.startsWith("Term ")&&(ge=`Term ${ue.term}`),M({student_reg_number:ue.student_reg_number,room_id:ue.room_id||"",academic_year:ue.academic_year,term:ge,enrollment_date:ue.enrollment_date,check_in_date:ue.check_in_date||"",check_out_date:ue.check_out_date||"",status:ue.status,notes:ue.notes||""}),I(ue.student_reg_number);try{const ce=await ne.get(`${ie}/students/search`,{params:{query:ue.student_reg_number},headers:{Authorization:`Bearer ${A}`}});if(ce.data.success&&ce.data.data.length>0){const De=ce.data.data.find(ke=>ke.RegNumber===ue.student_reg_number);De&&H(De)}}catch(ce){console.error("Error searching for student during edit:",ce)}x(!0)},Q=ue=>{v(ue),b(!0)},ye=async ue=>{if(window.confirm("Are you sure you want to delete this enrollment?"))try{const ge=await ne.delete(`${ie}/boarding/enrollments/${ue.id}`,{headers:{Authorization:`Bearer ${A}`}});ge.data.success?B():L(ge.data.message||"Failed to delete enrollment")}catch(ge){console.error("Error deleting enrollment:",ge);const ce=ge.response?.data?.message||ge.response?.data?.error||"Failed to delete enrollment";L(ce)}},Y=async ue=>{try{await ne.post(`${ie}/boarding/enrollments/${ue.id}/checkin`,{},{headers:{Authorization:`Bearer ${A}`}}),B()}catch(ge){console.error("Error checking in student:",ge),L("Failed to check in student")}},J=async ue=>{try{await ne.post(`${ie}/boarding/enrollments/${ue.id}/checkout`,{},{headers:{Authorization:`Bearer ${A}`}}),B()}catch(ge){console.error("Error checking out student:",ge),L("Failed to check out student")}},U=async()=>{if(!D.trim()){L("Please enter a registration number");return}try{L("");const ue=await ne.get(`${ie}/students/search`,{params:{query:D},headers:{Authorization:`Bearer ${A}`}});if(ue.data.success&&ue.data.data.length>0){const ge=ue.data.data.find(ce=>ce.RegNumber===D);ge?(H(ge),M({...z,student_reg_number:ge.RegNumber})):(H(null),L("Student not found with this registration number"))}else H(null),L("Student not found with this registration number")}catch(ue){console.error("Error searching for student:",ue),H(null),L("Error searching for student. Please try again.")}},ee=()=>{I(""),H(null),M({...z,student_reg_number:""})},he=ue=>"Student",pe=ue=>{const ge=s.find(ce=>ce.id===ue);return ge?ge.room_number:"N/A"},se=ue=>{const ge={enrolled:"bg-blue-100 text-blue-800",checked_in:"bg-green-100 text-green-800",checked_out:"bg-yellow-100 text-yellow-800",cancelled:"bg-red-100 text-red-800"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ge[ue]||"bg-gray-100 text-gray-800"}`,children:ue.replace("_"," ").toUpperCase()})},te=a.filter(ue=>ue&&he(ue.student_reg_number).toLowerCase().includes(j.toLowerCase())||ue&&ue.status&&ue.status.toLowerCase().includes(j.toLowerCase()));return i?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((ue,ge)=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},ge))})]}):e.jsxs("div",{className:"bg-white border border-gray-200/30 p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Enrollments"}),e.jsxs("button",{onClick:()=>u(!0),className:"bg-gray-900 text-white px-3 py-1.5 text-xs font-medium hover:bg-gray-800",children:[e.jsx(R,{icon:Ot,className:"mr-1"}),"Enroll Student"]})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:aa,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search enrollments...",value:j,onChange:ue=>N(ue.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200/30 focus:outline-none focus:ring-2 focus:ring-gray-500 text-xs"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Academic Year"}),e.jsx("input",{type:"text",placeholder:"Enter year (e.g., 2025)",value:k,onChange:ue=>$(ue.target.value),className:"w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Term"}),e.jsxs("select",{value:w,onChange:ue=>P(ue.target.value),className:"w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"",children:"All Terms"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:B,className:"w-full bg-gray-900 text-white px-3 py-2 text-xs font-medium hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500",children:[e.jsx(R,{icon:aa,className:"mr-1"}),"Search"]})})]})]}),O&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 text-xs",children:O}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200/30",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Room"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academic Year"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Term"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200/30",children:(te||[]).map((ue,ge)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:he(ue?.student_reg_number)}),e.jsx("div",{className:"text-xs text-gray-500",children:ue?.student_reg_number})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:pe(ue?.room_id)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:ue?.academic_year||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:ue?.term||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs font-medium",children:se(ue?.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>ue&&Q(ue),className:"text-blue-600 hover:text-blue-900 p-1",disabled:!ue,children:e.jsx(R,{icon:Ma,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>ue&&X(ue),className:"text-green-600 hover:text-green-900 p-1",disabled:!ue,children:e.jsx(R,{icon:ha,className:"h-3 w-3"})}),ue?.status==="enrolled"&&e.jsx("button",{onClick:()=>ue&&Y(ue),className:"text-purple-600 hover:text-purple-900 p-1",disabled:!ue,title:"Check In",children:e.jsx(R,{icon:Mr,className:"h-3 w-3"})}),ue?.status==="checked_in"&&e.jsx("button",{onClick:()=>ue&&J(ue),className:"text-orange-600 hover:text-orange-900 p-1",disabled:!ue,title:"Check Out",children:e.jsx(R,{icon:Mr,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>ue&&ye(ue),className:"text-red-600 hover:text-red-900 p-1",disabled:!ue,children:e.jsx(R,{icon:Yt,className:"h-3 w-3"})})]})})]},ue?.id||ge))})]})}),(d||m)&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-30 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-3/4 max-w-4xl shadow-lg bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:m?"Edit Enrollment":"Enroll New Student"}),O&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 text-xs",children:O}),e.jsxs("form",{onSubmit:K,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Student Registration Number"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Enter registration number",value:D,onChange:ue=>I(ue.target.value),className:"flex-1 border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"}),e.jsx("button",{type:"button",onClick:U,className:"bg-gray-900 text-white px-3 py-2 text-xs font-medium hover:bg-gray-800",children:"Search"})]}),V&&e.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded",children:[e.jsxs("p",{className:"text-xs text-green-800",children:[e.jsx("strong",{children:"Found:"})," ",V.Name," ",V.Surname," (",V.RegNumber,")"]}),e.jsx("button",{type:"button",onClick:ee,className:"text-xs text-red-600 hover:text-red-800 mt-1",children:"Clear"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Room"}),e.jsxs("select",{value:z.room_id,onChange:ue=>M({...z,room_id:ue.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"",children:"Select Room"}),s.map(ue=>e.jsxs("option",{value:ue.id,children:[ue.room_number," (",ue.room_type,") - ",ue.current_enrollments||0,"/",ue.capacity]},ue.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Academic Year"}),e.jsx("input",{type:"text",required:!0,value:z.academic_year,onChange:ue=>M({...z,academic_year:ue.target.value}),placeholder:"e.g., 2025",className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Term"}),e.jsxs("select",{required:!0,value:z.term,onChange:ue=>M({...z,term:ue.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Enrollment Date"}),e.jsx("input",{type:"date",required:!0,value:z.enrollment_date,onChange:ue=>M({...z,enrollment_date:ue.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Status"}),e.jsxs("select",{required:!0,value:z.status,onChange:ue=>M({...z,status:ue.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"enrolled",children:"Enrolled"}),e.jsx("option",{value:"checked_in",children:"Checked In"}),e.jsx("option",{value:"checked_out",children:"Checked Out"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Check In Date"}),e.jsx("input",{type:"date",value:z.check_in_date,onChange:ue=>M({...z,check_in_date:ue.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Check Out Date"}),e.jsx("input",{type:"date",value:z.check_out_date,onChange:ue=>M({...z,check_out_date:ue.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Notes"}),e.jsx("textarea",{value:z.notes,onChange:ue=>M({...z,notes:ue.target.value}),rows:"3",className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{u(!1),x(!1),M({student_reg_number:"",room_id:"",academic_year:"",term:"",enrollment_date:"",check_in_date:"",check_out_date:"",status:"enrolled",notes:""}),ee()},className:"px-3 py-1.5 border border-gray-300 text-xs font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:_,className:`px-3 py-1.5 text-xs font-medium ${_?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800"}`,children:_?e.jsxs(e.Fragment,{children:[e.jsx(R,{icon:Yr,className:"mr-1 animate-spin"}),m?"Updating...":"Enrolling..."]}):m?"Update":"Enroll"})]})]})]})})}),f&&p&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Enrollment Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Student"}),e.jsx("p",{className:"text-xs text-gray-900",children:he(p?.student_reg_number)}),e.jsx("p",{className:"text-xs text-gray-500",children:p?.student_reg_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Room"}),e.jsx("p",{className:"text-xs text-gray-900",children:pe(p?.room_id)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Academic Year"}),e.jsx("p",{className:"text-xs text-gray-900",children:p?.academic_year||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Term"}),e.jsx("p",{className:"text-xs text-gray-900",children:p?.term||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Status"}),e.jsx("div",{className:"mt-1",children:se(p?.status)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Enrollment Date"}),e.jsx("p",{className:"text-xs text-gray-900",children:p?.enrollment_date||"N/A"})]}),p?.check_in_date&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Check In Date"}),e.jsx("p",{className:"text-xs text-gray-900",children:p.check_in_date})]}),p?.check_out_date&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Check Out Date"}),e.jsx("p",{className:"text-xs text-gray-900",children:p.check_out_date})]}),p?.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Notes"}),e.jsx("p",{className:"text-xs text-gray-900",children:p.notes})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>b(!1),className:"px-3 py-1.5 bg-gray-900 text-white text-xs font-medium hover:bg-gray-800",children:"Close"})})]})})})]})},BU=({hostelId:t})=>{const[a,r]=g.useState([]),[s,n]=g.useState([]),[i,o]=g.useState(!0),[d,u]=g.useState(!1),[m,x]=g.useState(!1),[f,b]=g.useState(null),[p,v]=g.useState(""),{token:j}=ut(),[N,w]=g.useState({term:"",academic_year:"",amount:"",currency_id:""});g.useEffect(()=>{P(),k()},[t]);const P=async()=>{try{o(!0),console.log("Fetching billing fees for hostel:",t),console.log("Request URL:",`${ie}/boarding/hostels/${t}/billing-fees`);const A=await ne.get(`${ie}/boarding/hostels/${t}/billing-fees`,{headers:{Authorization:`Bearer ${j}`}});console.log("Billing fees response:",A.data),A.data&&Array.isArray(A.data.data)?r(A.data.data):r([])}catch(A){console.error("Error fetching billing fees:",A),console.error("Error details:",{message:A.message,status:A.response?.status,statusText:A.response?.statusText,data:A.response?.data,config:{url:A.config?.url,method:A.config?.method,headers:A.config?.headers}}),v("Failed to load billing fees"),r([])}finally{o(!1)}},k=async()=>{try{const A=await ne.get(`${ie}/accounting/currencies`,{headers:{Authorization:`Bearer ${j}`}});A.data&&Array.isArray(A.data.data)?n(A.data.data):n([])}catch(A){console.error("Error fetching currencies:",A),n([])}},$=async A=>{A.preventDefault();try{m?await ne.put(`${ie}/boarding/billing-fees/${f.id}`,N,{headers:{Authorization:`Bearer ${j}`}}):await ne.post(`${ie}/boarding/billing-fees`,{...N,hostel_id:t},{headers:{Authorization:`Bearer ${j}`}}),u(!1),x(!1),w({term:"",academic_year:"",amount:"",currency_id:""}),P()}catch(z){console.error("Error saving billing fee:",z),z.response&&z.response.data&&z.response.data.message?v(z.response.data.message):v("Failed to save billing fee")}},O=A=>{b(A),w({term:A.term,academic_year:A.academic_year,amount:A.amount,currency_id:A.currency_id}),x(!0)},L=async A=>{if(window.confirm("Are you sure you want to delete this billing fee?"))try{await ne.delete(`${ie}/boarding/billing-fees/${A.id}`,{headers:{Authorization:`Bearer ${j}`}}),P()}catch(z){console.error("Error deleting billing fee:",z),v("Failed to delete billing fee")}},_=A=>{const z=s.find(M=>M.id===A);return z?z.name:"N/A"},E=A=>{const z=s.find(M=>M.id===A);return z?z.symbol:""};return i?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((A,z)=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},z))})]}):e.jsxs("div",{className:"bg-white border border-gray-200/30 p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Billing & Fees"}),e.jsxs("button",{onClick:()=>u(!0),className:"bg-gray-900 text-white px-3 py-1.5 text-xs font-medium hover:bg-gray-800",children:[e.jsx(R,{icon:Ot,className:"mr-1"}),"Add Billing"]})]}),p&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 text-xs",children:p}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200/30",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Term"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academic Year"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Currency"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200/30",children:(a||[]).map((A,z)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:A?.term||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:A?.academic_year||"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:[E(A?.currency_id),A?.amount||0]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:_(A?.currency_id)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>A&&O(A),className:"text-green-600 hover:text-green-900 p-1",disabled:!A,children:e.jsx(R,{icon:ha,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>A&&L(A),className:"text-red-600 hover:text-red-900 p-1",disabled:!A,children:e.jsx(R,{icon:Yt,className:"h-3 w-3"})})]})})]},A?.id||z))})]})}),(d||m)&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-30 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-3/4 max-w-4xl shadow-lg bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:m?"Edit Fee Structure":"Add New Fee Structure"}),p&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 text-xs",children:p}),e.jsxs("form",{onSubmit:$,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Term"}),e.jsxs("select",{required:!0,value:N.term,onChange:A=>w({...N,term:A.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Academic Year"}),e.jsx("input",{type:"text",required:!0,value:N.academic_year,onChange:A=>w({...N,academic_year:A.target.value}),placeholder:"e.g., 2025",className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Amount"}),e.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",value:N.amount,onChange:A=>w({...N,amount:A.target.value}),placeholder:"0.00",className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Currency"}),e.jsxs("select",{required:!0,value:N.currency_id,onChange:A=>w({...N,currency_id:A.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"",children:"Select Currency"}),s.map(A=>e.jsxs("option",{value:A.id,children:[A.name," (",A.symbol,")"]},A.id))]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{u(!1),x(!1),w({term:"",academic_year:"",amount:"",currency_id:""})},className:"px-3 py-1.5 border border-gray-300 text-xs font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-3 py-1.5 bg-gray-900 text-white text-xs font-medium hover:bg-gray-800",children:m?"Update":"Create"})]})]})]})})})]})},zU=()=>{const[t,a]=g.useState([]),[r,s]=g.useState([]),[n,i]=g.useState([]),[o,d]=g.useState([]),[u,m]=g.useState(!0),[x,f]=g.useState(!1),[b,p]=g.useState(!1),[v,j]=g.useState(!1),[N,w]=g.useState(null),[P,k]=g.useState(""),[$,O]=g.useState(""),{token:L}=ut(),[_,E]=g.useState({student_id:"",hostel_id:"",room_id:"",academic_year:"",term:"",enrollment_date:"",check_in_date:"",check_out_date:"",status:"ACTIVE"});g.useEffect(()=>{A(),z(),M()},[]);const A=async()=>{try{m(!0);const U=await ne.get("/api/boarding/enrollments",{headers:{Authorization:`Bearer ${L}`}});console.log("Enrollments API response:",U.data),Array.isArray(U.data)?a(U.data):U.data&&Array.isArray(U.data.data)?a(U.data.data):U.data&&U.data.enrollments&&Array.isArray(U.data.enrollments)?a(U.data.enrollments):(console.warn("Unexpected response format, setting empty array"),a([]))}catch(U){console.error("Error fetching enrollments:",U),O("Failed to load enrollments"),a([])}finally{m(!1)}},z=async()=>{try{const U=await ne.get("/api/students",{headers:{Authorization:`Bearer ${L}`}});console.log("Students API response:",U.data),Array.isArray(U.data)?s(U.data):U.data&&Array.isArray(U.data.data)?s(U.data.data):U.data&&U.data.students&&Array.isArray(U.data.students)?s(U.data.students):(console.warn("Unexpected students response format, setting empty array"),s([]))}catch(U){console.error("Error fetching students:",U),s([])}},M=async()=>{try{const U=await ne.get("/api/boarding/hostels",{headers:{Authorization:`Bearer ${L}`}});console.log("Hostels for enrollments API response:",U.data),Array.isArray(U.data)?i(U.data):U.data&&Array.isArray(U.data.data)?i(U.data.data):U.data&&U.data.hostels&&Array.isArray(U.data.hostels)?i(U.data.hostels):(console.warn("Unexpected hostels response format, setting empty array"),i([]))}catch(U){console.error("Error fetching hostels:",U),i([])}},D=async U=>{try{const ee=await ne.get(`/api/boarding/rooms/available/${U}`,{headers:{Authorization:`Bearer ${L}`}});console.log("Rooms for enrollments API response:",ee.data),Array.isArray(ee.data)?d(ee.data):ee.data&&Array.isArray(ee.data.data)?d(ee.data.data):ee.data&&ee.data.rooms&&Array.isArray(ee.data.rooms)?d(ee.data.rooms):(console.warn("Unexpected rooms response format, setting empty array"),d([]))}catch(ee){console.error("Error fetching rooms:",ee),d([])}},I=async U=>{U.preventDefault();try{b?await ne.put(`/api/boarding/enrollments/${N.id}`,_,{headers:{Authorization:`Bearer ${L}`}}):await ne.post("/api/boarding/enrollments",_,{headers:{Authorization:`Bearer ${L}`}}),f(!1),p(!1),E({student_id:"",hostel_id:"",room_id:"",academic_year:"",term:"",enrollment_date:"",check_in_date:"",check_out_date:"",status:"ACTIVE"}),A()}catch(ee){console.error("Error saving enrollment:",ee),O("Failed to save enrollment")}},V=U=>{w(U),E({student_id:U.student_id,hostel_id:U.hostel_id,room_id:U.room_id,academic_year:U.academic_year,term:U.term,enrollment_date:U.enrollment_date,check_in_date:U.check_in_date,check_out_date:U.check_out_date,status:U.status}),p(!0)},H=U=>{w(U),j(!0)},B=async U=>{if(window.confirm("Are you sure you want to cancel this enrollment?"))try{await ne.delete(`/api/boarding/enrollments/${U.id}`,{headers:{Authorization:`Bearer ${L}`}}),A()}catch(ee){console.error("Error deleting enrollment:",ee),O("Failed to cancel enrollment")}},W=async U=>{try{await ne.post(`/api/boarding/enrollments/${U.id}/checkin`,{},{headers:{Authorization:`Bearer ${L}`}}),A()}catch(ee){console.error("Error checking in student:",ee),O("Failed to check in student")}},K=async U=>{try{await ne.post(`/api/boarding/enrollments/${U.id}/checkout`,{},{headers:{Authorization:`Bearer ${L}`}}),A()}catch(ee){console.error("Error checking out student:",ee),O("Failed to check out student")}},X=U=>{const ee=(r||[]).find(he=>he.id===U);return ee?`${ee.Name} ${ee.Surname}`:"Unknown Student"},Q=U=>{const ee=(n||[]).find(he=>he.id===U);return ee?ee.name:"Unknown Hostel"},ye=U=>{const ee=(o||[]).find(he=>he.id===U);return ee?ee.room_number:"Unknown Room"},Y=U=>{const ee={ACTIVE:{bg:"bg-green-100",text:"text-green-800",label:"Active"},CHECKED_IN:{bg:"bg-blue-100",text:"text-blue-800",label:"Checked In"},CHECKED_OUT:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Checked Out"},CANCELLED:{bg:"bg-red-100",text:"text-red-800",label:"Cancelled"}},he=ee[U]||ee.ACTIVE;return e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${he.bg} ${he.text}`,children:he.label})},J=(()=>{try{return Array.isArray(t)?t.filter(U=>U&&X(U.student_id).toLowerCase().includes(P.toLowerCase())||U&&Q(U.hostel_id).toLowerCase().includes(P.toLowerCase())):(console.warn("Enrollments is not an array:",t),[])}catch(U){return console.error("Error filtering enrollments:",U),[]}})();return u?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-6"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((U,ee)=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},ee))})]})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:"Boarding Enrollments"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage student enrollments in boarding facilities"})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Enrollments"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage student enrollments in boarding facilities"})]}),e.jsxs("button",{onClick:()=>f(!0),className:"bg-gray-900 text-white px-4 py-2 rounded flex items-center space-x-2 hover:bg-gray-800",children:[e.jsx(R,{icon:Ot}),e.jsx("span",{children:"Enroll Student"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:aa,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search enrollments...",value:P,onChange:U=>k(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),$&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:$}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hostel"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Room"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academic Year"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Term"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(J||[]).map((U,ee)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:X(U?.student_id)}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Enrolled: ",U?.enrollment_date?new Date(U.enrollment_date).toLocaleDateString():"N/A"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Q(U?.hostel_id)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ye(U?.room_id)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:U?.academic_year||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:U?.term||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Y(U?.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>U&&H(U),className:"text-blue-600 hover:text-blue-900",disabled:!U,children:e.jsx(R,{icon:Ma})}),e.jsx("button",{onClick:()=>U&&V(U),className:"text-green-600 hover:text-green-900",disabled:!U,children:e.jsx(R,{icon:ha})}),U?.status==="ACTIVE"&&e.jsx("button",{onClick:()=>U&&W(U),className:"text-blue-600 hover:text-blue-900",title:"Check In",disabled:!U,children:e.jsx(R,{icon:nB})}),U?.status==="CHECKED_IN"&&e.jsx("button",{onClick:()=>U&&K(U),className:"text-yellow-600 hover:text-yellow-900",title:"Check Out",disabled:!U,children:e.jsx(R,{icon:Z2})}),e.jsx("button",{onClick:()=>U&&B(U),className:"text-red-600 hover:text-red-900",disabled:!U,children:e.jsx(R,{icon:Yt})})]})})]},U?.id||ee))})]})}),(x||b)&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:b?"Edit Enrollment":"Enroll Student"}),e.jsxs("form",{onSubmit:I,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Student"}),e.jsxs("select",{required:!0,value:_.student_id,onChange:U=>E({..._,student_id:U.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Student"}),(r||[]).map(U=>e.jsxs("option",{value:U.id,children:[U.Name," ",U.Surname]},U.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Hostel"}),e.jsxs("select",{required:!0,value:_.hostel_id,onChange:U=>{E({..._,hostel_id:U.target.value,room_id:""}),U.target.value&&D(U.target.value)},className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Hostel"}),(n||[]).map(U=>e.jsx("option",{value:U.id,children:U.name},U.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Room"}),e.jsxs("select",{required:!0,value:_.room_id,onChange:U=>E({..._,room_id:U.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Room"}),(o||[]).map(U=>e.jsxs("option",{value:U.id,children:[U.room_number," (",U.room_type,")"]},U.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Academic Year"}),e.jsx("input",{type:"text",required:!0,value:_.academic_year,onChange:U=>E({..._,academic_year:U.target.value}),placeholder:"e.g., 2024-2025",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Term"}),e.jsxs("select",{required:!0,value:_.term,onChange:U=>E({..._,term:U.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Enrollment Date"}),e.jsx("input",{type:"date",required:!0,value:_.enrollment_date,onChange:U=>E({..._,enrollment_date:U.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{required:!0,value:_.status,onChange:U=>E({..._,status:U.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"CHECKED_IN",children:"Checked In"}),e.jsx("option",{value:"CHECKED_OUT",children:"Checked Out"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{f(!1),p(!1),E({student_id:"",hostel_id:"",room_id:"",academic_year:"",term:"",enrollment_date:"",check_in_date:"",check_out_date:"",status:"ACTIVE"})},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-gray-900 text-white rounded-md text-sm font-medium hover:bg-gray-800",children:b?"Update":"Enroll"})]})]})]})})}),v&&N&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Enrollment Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Student"}),e.jsx("p",{className:"text-sm text-gray-900",children:X(N?.student_id)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Hostel"}),e.jsx("p",{className:"text-sm text-gray-900",children:Q(N?.hostel_id)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Room"}),e.jsx("p",{className:"text-sm text-gray-900",children:ye(N?.room_id)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Academic Year"}),e.jsx("p",{className:"text-sm text-gray-900",children:N?.academic_year||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Term"}),e.jsx("p",{className:"text-sm text-gray-900",children:N?.term||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Enrollment Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:N?.enrollment_date?new Date(N.enrollment_date).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("div",{className:"mt-1",children:Y(N?.status)})]}),N?.check_in_date&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Check In Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(N.check_in_date).toLocaleDateString()})]}),N?.check_out_date&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Check Out Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(N.check_out_date).toLocaleDateString()})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 bg-gray-900 text-white rounded-md text-sm font-medium hover:bg-gray-800",children:"Close"})})]})})})]})},cm=({isOpen:t,onClose:a,message:r})=>t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:Ra,className:"text-green-500 text-lg mr-2"}),e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Success"})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt,className:"text-xs"})})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-4",children:r}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-3 py-1.5 bg-gray-900 text-white rounded text-xs hover:bg-gray-800",children:"OK"})})]})}):null,Cc=({isOpen:t,onClose:a,message:r})=>t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:la,className:"text-red-500 text-lg mr-2"}),e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Error"})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt,className:"text-xs"})})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-4",children:r}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-3 py-1.5 bg-gray-900 text-white rounded text-xs hover:bg-gray-800",children:"OK"})})]})}):null,qU="modulepreload",UU=function(t){return"/"+t},W6={},Ev=function(a,r,s){let n=Promise.resolve();if(r&&r.length>0){let u=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),d=o?.nonce||o?.getAttribute("nonce");n=u(r.map(m=>{if(m=UU(m),m in W6)return;W6[m]=!0;const x=m.endsWith(".css"),f=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${f}`))return;const b=document.createElement("link");if(b.rel=x?"stylesheet":qU,x||(b.as="script"),b.crossOrigin="",b.href=m,d&&b.setAttribute("nonce",d),document.head.appendChild(b),x)return new Promise((p,v)=>{b.addEventListener("load",p),b.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(o){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=o,window.dispatchEvent(d),!d.defaultPrevented)throw o}return n.then(o=>{for(const d of o||[])d.status==="rejected"&&i(d.reason);return a().catch(i)})};function Ka(t){"@babel/helpers - typeof";return Ka=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Ka(t)}var Hl=Uint8Array,ki=Uint16Array,kN=Int32Array,CN=new Hl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),EN=new Hl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),K6=new Hl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),y9=function(t,a){for(var r=new ki(31),s=0;s<31;++s)r[s]=a+=1<<t[s-1];for(var n=new kN(r[30]),s=1;s<30;++s)for(var i=r[s];i<r[s+1];++i)n[i]=i-r[s]<<5|s;return{b:r,r:n}},b9=y9(CN,2),HU=b9.b,lj=b9.r;HU[28]=258,lj[258]=28;var YU=y9(EN,0),X6=YU.r,oj=new ki(32768);for(var pr=0;pr<32768;++pr){var Nd=(pr&43690)>>1|(pr&21845)<<1;Nd=(Nd&52428)>>2|(Nd&13107)<<2,Nd=(Nd&61680)>>4|(Nd&3855)<<4,oj[pr]=((Nd&65280)>>8|(Nd&255)<<8)>>1}var hf=function(t,a,r){for(var s=t.length,n=0,i=new ki(a);n<s;++n)t[n]&&++i[t[n]-1];var o=new ki(a);for(n=1;n<a;++n)o[n]=o[n-1]+i[n-1]<<1;var d;if(r){d=new ki(1<<a);var u=15-a;for(n=0;n<s;++n)if(t[n])for(var m=n<<4|t[n],x=a-t[n],f=o[t[n]-1]++<<x,b=f|(1<<x)-1;f<=b;++f)d[oj[f]>>u]=m}else for(d=new ki(s),n=0;n<s;++n)t[n]&&(d[n]=oj[o[t[n]-1]++]>>15-t[n]);return d},am=new Hl(288);for(var pr=0;pr<144;++pr)am[pr]=8;for(var pr=144;pr<256;++pr)am[pr]=9;for(var pr=256;pr<280;++pr)am[pr]=7;for(var pr=280;pr<288;++pr)am[pr]=8;var hg=new Hl(32);for(var pr=0;pr<32;++pr)hg[pr]=5;var GU=hf(am,9,0),VU=hf(hg,5,0),v9=function(t){return(t+7)/8|0},WU=function(t,a,r){return(r==null||r>t.length)&&(r=t.length),new Hl(t.subarray(a,r))},oc=function(t,a,r){r<<=a&7;var s=a/8|0;t[s]|=r,t[s+1]|=r>>8},Wh=function(t,a,r){r<<=a&7;var s=a/8|0;t[s]|=r,t[s+1]|=r>>8,t[s+2]|=r>>16},Tv=function(t,a){for(var r=[],s=0;s<t.length;++s)t[s]&&r.push({s,f:t[s]});var n=r.length,i=r.slice();if(!n)return{t:N9,l:0};if(n==1){var o=new Hl(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(O,L){return O.f-L.f}),r.push({s:-1,f:25001});var d=r[0],u=r[1],m=0,x=1,f=2;for(r[0]={s:-1,f:d.f+u.f,l:d,r:u};x!=n-1;)d=r[r[m].f<r[f].f?m++:f++],u=r[m!=x&&r[m].f<r[f].f?m++:f++],r[x++]={s:-1,f:d.f+u.f,l:d,r:u};for(var b=i[0].s,s=1;s<n;++s)i[s].s>b&&(b=i[s].s);var p=new ki(b+1),v=cj(r[x-1],p,0);if(v>a){var s=0,j=0,N=v-a,w=1<<N;for(i.sort(function(L,_){return p[_.s]-p[L.s]||L.f-_.f});s<n;++s){var P=i[s].s;if(p[P]>a)j+=w-(1<<v-p[P]),p[P]=a;else break}for(j>>=N;j>0;){var k=i[s].s;p[k]<a?j-=1<<a-p[k]++-1:++s}for(;s>=0&&j;--s){var $=i[s].s;p[$]==a&&(--p[$],++j)}v=a}return{t:new Hl(p),l:v}},cj=function(t,a,r){return t.s==-1?Math.max(cj(t.l,a,r+1),cj(t.r,a,r+1)):a[t.s]=r},J6=function(t){for(var a=t.length;a&&!t[--a];);for(var r=new ki(++a),s=0,n=t[0],i=1,o=function(u){r[s++]=u},d=1;d<=a;++d)if(t[d]==n&&d!=a)++i;else{if(!n&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(n),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(n);i=1,n=t[d]}return{c:r.subarray(0,s),n:a}},Kh=function(t,a){for(var r=0,s=0;s<a.length;++s)r+=t[s]*a[s];return r},j9=function(t,a,r){var s=r.length,n=v9(a+2);t[n]=s&255,t[n+1]=s>>8,t[n+2]=t[n]^255,t[n+3]=t[n+1]^255;for(var i=0;i<s;++i)t[n+i+4]=r[i];return(n+4+s)*8},Z6=function(t,a,r,s,n,i,o,d,u,m,x){oc(a,x++,r),++n[256];for(var f=Tv(n,15),b=f.t,p=f.l,v=Tv(i,15),j=v.t,N=v.l,w=J6(b),P=w.c,k=w.n,$=J6(j),O=$.c,L=$.n,_=new ki(19),E=0;E<P.length;++E)++_[P[E]&31];for(var E=0;E<O.length;++E)++_[O[E]&31];for(var A=Tv(_,7),z=A.t,M=A.l,D=19;D>4&&!z[K6[D-1]];--D);var I=m+5<<3,V=Kh(n,am)+Kh(i,hg)+o,H=Kh(n,b)+Kh(i,j)+o+14+3*D+Kh(_,z)+2*_[16]+3*_[17]+7*_[18];if(u>=0&&I<=V&&I<=H)return j9(a,x,t.subarray(u,u+m));var B,W,K,X;if(oc(a,x,1+(H<V)),x+=2,H<V){B=hf(b,p,0),W=b,K=hf(j,N,0),X=j;var Q=hf(z,M,0);oc(a,x,k-257),oc(a,x+5,L-1),oc(a,x+10,D-4),x+=14;for(var E=0;E<D;++E)oc(a,x+3*E,z[K6[E]]);x+=3*D;for(var ye=[P,O],Y=0;Y<2;++Y)for(var J=ye[Y],E=0;E<J.length;++E){var U=J[E]&31;oc(a,x,Q[U]),x+=z[U],U>15&&(oc(a,x,J[E]>>5&127),x+=J[E]>>12)}}else B=GU,W=am,K=VU,X=hg;for(var E=0;E<d;++E){var ee=s[E];if(ee>255){var U=ee>>18&31;Wh(a,x,B[U+257]),x+=W[U+257],U>7&&(oc(a,x,ee>>23&31),x+=CN[U]);var he=ee&31;Wh(a,x,K[he]),x+=X[he],he>3&&(Wh(a,x,ee>>5&8191),x+=EN[he])}else Wh(a,x,B[ee]),x+=W[ee]}return Wh(a,x,B[256]),x+W[256]},KU=new kN([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),N9=new Hl(0),XU=function(t,a,r,s,n,i){var o=i.z||t.length,d=new Hl(s+o+5*(1+Math.ceil(o/7e3))+n),u=d.subarray(s,d.length-n),m=i.l,x=(i.r||0)&7;if(a){x&&(u[0]=i.r>>3);for(var f=KU[a-1],b=f>>13,p=f&8191,v=(1<<r)-1,j=i.p||new ki(32768),N=i.h||new ki(v+1),w=Math.ceil(r/3),P=2*w,k=function(ke){return(t[ke]^t[ke+1]<<w^t[ke+2]<<P)&v},$=new kN(25e3),O=new ki(288),L=new ki(32),_=0,E=0,A=i.i||0,z=0,M=i.w||0,D=0;A+2<o;++A){var I=k(A),V=A&32767,H=N[I];if(j[V]=H,N[I]=V,M<=A){var B=o-A;if((_>7e3||z>24576)&&(B>423||!m)){x=Z6(t,u,0,$,O,L,E,z,D,A-D,x),z=_=E=0,D=A;for(var W=0;W<286;++W)O[W]=0;for(var W=0;W<30;++W)L[W]=0}var K=2,X=0,Q=p,ye=V-H&32767;if(B>2&&I==k(A-ye))for(var Y=Math.min(b,B)-1,J=Math.min(32767,A),U=Math.min(258,B);ye<=J&&--Q&&V!=H;){if(t[A+K]==t[A+K-ye]){for(var ee=0;ee<U&&t[A+ee]==t[A+ee-ye];++ee);if(ee>K){if(K=ee,X=ye,ee>Y)break;for(var he=Math.min(ye,ee-2),pe=0,W=0;W<he;++W){var se=A-ye+W&32767,te=j[se],ue=se-te&32767;ue>pe&&(pe=ue,H=se)}}}V=H,H=j[V],ye+=V-H&32767}if(X){$[z++]=268435456|lj[K]<<18|X6[X];var ge=lj[K]&31,ce=X6[X]&31;E+=CN[ge]+EN[ce],++O[257+ge],++L[ce],M=A+K,++_}else $[z++]=t[A],++O[t[A]]}}for(A=Math.max(A,M);A<o;++A)$[z++]=t[A],++O[t[A]];x=Z6(t,u,m,$,O,L,E,z,D,A-D,x),m||(i.r=x&7|u[x/8|0]<<3,x-=7,i.h=N,i.p=j,i.i=A,i.w=M)}else{for(var A=i.w||0;A<o+m;A+=65535){var De=A+65535;De>=o&&(u[x/8|0]=m,De=o),x=j9(u,x+1,t.subarray(A,De))}i.i=o}return WU(d,0,s+v9(x)+n)},w9=function(){var t=1,a=0;return{p:function(r){for(var s=t,n=a,i=r.length|0,o=0;o!=i;){for(var d=Math.min(o+2655,i);o<d;++o)n+=s+=r[o];s=(s&65535)+15*(s>>16),n=(n&65535)+15*(n>>16)}t=s,a=n},d:function(){return t%=65521,a%=65521,(t&255)<<24|(t&65280)<<8|(a&255)<<8|a>>8}}},JU=function(t,a,r,s,n){if(!n&&(n={l:1},a.dictionary)){var i=a.dictionary.subarray(-32768),o=new Hl(i.length+t.length);o.set(i),o.set(t,i.length),t=o,n.w=i.length}return XU(t,a.level==null?6:a.level,a.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+a.mem,r,s,n)},S9=function(t,a,r){for(;r;++a)t[a]=r,r>>>=8},ZU=function(t,a){var r=a.level,s=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=s<<6|(a.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,a.dictionary){var n=w9();n.p(a.dictionary),S9(t,2,n.d())}};function dj(t,a){a||(a={});var r=w9();r.p(t);var s=JU(t,a,a.dictionary?6:2,4);return ZU(s,a),S9(s,s.length-4,r.d()),s}var QU=typeof TextDecoder<"u"&&new TextDecoder,eH=0;try{QU.decode(N9,{stream:!0}),eH=1}catch{}function tH(t){if(Array.isArray(t))return t}function aH(t,a){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,n,i,o,d=[],u=!0,m=!1;try{if(i=(r=r.call(t)).next,a!==0)for(;!(u=(s=i.call(r)).done)&&(d.push(s.value),d.length!==a);u=!0);}catch(x){m=!0,n=x}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(m)throw n}}return d}}function Q6(t,a){(a==null||a>t.length)&&(a=t.length);for(var r=0,s=Array(a);r<a;r++)s[r]=t[r];return s}function rH(t,a){if(t){if(typeof t=="string")return Q6(t,a);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q6(t,a):void 0}}function sH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eS(t,a){return tH(t)||aH(t,a)||rH(t,a)||sH()}function tS(t,a="utf8"){return new TextDecoder(a).decode(t)}const nH=new TextEncoder;function iH(t){return nH.encode(t)}const lH=1024*8,oH=(()=>{const t=new Uint8Array(4),a=new Uint32Array(t.buffer);return!((a[0]=1)&t[0])})(),Pv={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class TN{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(a=lH,r={}){let s=!1;typeof a=="number"?a=new ArrayBuffer(a):(s=!0,this.lastWrittenByte=a.byteLength);const n=r.offset?r.offset>>>0:0,i=a.byteLength-n;let o=n;(ArrayBuffer.isView(a)||a instanceof TN)&&(a.byteLength!==a.buffer.byteLength&&(o=a.byteOffset+n),a=a.buffer),s?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=a,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(a=1){return this.offset+a<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(a=1){return this.offset+=a,this}back(a=1){return this.offset-=a,this}seek(a){return this.offset=a,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const a=this._marks.pop();if(a===void 0)throw new Error("Mark stack empty");return this.seek(a),this}rewind(){return this.offset=0,this}ensureAvailable(a=1){if(!this.available(a)){const s=(this.offset+a)*2,n=new Uint8Array(s);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(a=1){return this.readArray(a,"uint8")}readArray(a,r){const s=Pv[r].BYTES_PER_ELEMENT*a,n=this.byteOffset+this.offset,i=this.buffer.slice(n,n+s);if(this.littleEndian===oH&&r!=="uint8"&&r!=="int8"){const d=new Uint8Array(this.buffer.slice(n,n+s));d.reverse();const u=new Pv[r](d.buffer);return this.offset+=s,u.reverse(),u}const o=new Pv[r](i);return this.offset+=s,o}readInt16(){const a=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,a}readUint16(){const a=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,a}readInt32(){const a=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,a}readUint32(){const a=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,a}readFloat32(){const a=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,a}readFloat64(){const a=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,a}readBigInt64(){const a=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,a}readBigUint64(){const a=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,a}readChar(){return String.fromCharCode(this.readInt8())}readChars(a=1){let r="";for(let s=0;s<a;s++)r+=this.readChar();return r}readUtf8(a=1){return tS(this.readBytes(a))}decodeText(a=1,r="utf8"){return tS(this.readBytes(a),r)}writeBoolean(a){return this.writeUint8(a?255:0),this}writeInt8(a){return this.ensureAvailable(1),this._data.setInt8(this.offset++,a),this._updateLastWrittenByte(),this}writeUint8(a){return this.ensureAvailable(1),this._data.setUint8(this.offset++,a),this._updateLastWrittenByte(),this}writeByte(a){return this.writeUint8(a)}writeBytes(a){this.ensureAvailable(a.length);for(let r=0;r<a.length;r++)this._data.setUint8(this.offset++,a[r]);return this._updateLastWrittenByte(),this}writeInt16(a){return this.ensureAvailable(2),this._data.setInt16(this.offset,a,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(a){return this.ensureAvailable(2),this._data.setUint16(this.offset,a,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(a){return this.ensureAvailable(4),this._data.setInt32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(a){return this.ensureAvailable(4),this._data.setUint32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(a){return this.ensureAvailable(4),this._data.setFloat32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(a){return this.ensureAvailable(8),this._data.setFloat64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(a){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(a){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(a){return this.writeUint8(a.charCodeAt(0))}writeChars(a){for(let r=0;r<a.length;r++)this.writeUint8(a.charCodeAt(r));return this}writeUtf8(a){return this.writeBytes(iH(a))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function qx(t){let a=t.length;for(;--a>=0;)t[a]=0}const cH=3,dH=258,_9=29,uH=256,mH=uH+1+_9,A9=30,xH=512,hH=new Array((mH+2)*2);qx(hH);const fH=new Array(A9*2);qx(fH);const pH=new Array(xH);qx(pH);const gH=new Array(dH-cH+1);qx(gH);const yH=new Array(_9);qx(yH);const bH=new Array(A9);qx(bH);const vH=(t,a,r,s)=>{let n=t&65535|0,i=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do n=n+a[s++]|0,i=i+n|0;while(--o);n%=65521,i%=65521}return n|i<<16|0};var uj=vH;const jH=()=>{let t,a=[];for(var r=0;r<256;r++){t=r;for(var s=0;s<8;s++)t=t&1?3988292384^t>>>1:t>>>1;a[r]=t}return a},NH=new Uint32Array(jH()),wH=(t,a,r,s)=>{const n=NH,i=s+r;t^=-1;for(let o=s;o<i;o++)t=t>>>8^n[(t^a[o])&255];return t^-1};var bo=wH,mj={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},k9={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const SH=(t,a)=>Object.prototype.hasOwnProperty.call(t,a);var _H=function(t){const a=Array.prototype.slice.call(arguments,1);for(;a.length;){const r=a.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const s in r)SH(r,s)&&(t[s]=r[s])}}return t},AH=t=>{let a=0;for(let s=0,n=t.length;s<n;s++)a+=t[s].length;const r=new Uint8Array(a);for(let s=0,n=0,i=t.length;s<i;s++){let o=t[s];r.set(o,n),n+=o.length}return r},C9={assign:_H,flattenChunks:AH};let E9=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{E9=!1}const Sf=new Uint8Array(256);for(let t=0;t<256;t++)Sf[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Sf[254]=Sf[254]=1;var kH=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let a,r,s,n,i,o=t.length,d=0;for(n=0;n<o;n++)r=t.charCodeAt(n),(r&64512)===55296&&n+1<o&&(s=t.charCodeAt(n+1),(s&64512)===56320&&(r=65536+(r-55296<<10)+(s-56320),n++)),d+=r<128?1:r<2048?2:r<65536?3:4;for(a=new Uint8Array(d),i=0,n=0;i<d;n++)r=t.charCodeAt(n),(r&64512)===55296&&n+1<o&&(s=t.charCodeAt(n+1),(s&64512)===56320&&(r=65536+(r-55296<<10)+(s-56320),n++)),r<128?a[i++]=r:r<2048?(a[i++]=192|r>>>6,a[i++]=128|r&63):r<65536?(a[i++]=224|r>>>12,a[i++]=128|r>>>6&63,a[i++]=128|r&63):(a[i++]=240|r>>>18,a[i++]=128|r>>>12&63,a[i++]=128|r>>>6&63,a[i++]=128|r&63);return a};const CH=(t,a)=>{if(a<65534&&t.subarray&&E9)return String.fromCharCode.apply(null,t.length===a?t:t.subarray(0,a));let r="";for(let s=0;s<a;s++)r+=String.fromCharCode(t[s]);return r};var EH=(t,a)=>{const r=a||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,a));let s,n;const i=new Array(r*2);for(n=0,s=0;s<r;){let o=t[s++];if(o<128){i[n++]=o;continue}let d=Sf[o];if(d>4){i[n++]=65533,s+=d-1;continue}for(o&=d===2?31:d===3?15:7;d>1&&s<r;)o=o<<6|t[s++]&63,d--;if(d>1){i[n++]=65533;continue}o<65536?i[n++]=o:(o-=65536,i[n++]=55296|o>>10&1023,i[n++]=56320|o&1023)}return CH(i,n)},TH=(t,a)=>{a=a||t.length,a>t.length&&(a=t.length);let r=a-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?a:r+Sf[t[r]]>a?r:a},xj={string2buf:kH,buf2string:EH,utf8border:TH};function PH(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var OH=PH;const fp=16209,DH=16191;var LH=function(a,r){let s,n,i,o,d,u,m,x,f,b,p,v,j,N,w,P,k,$,O,L,_,E,A,z;const M=a.state;s=a.next_in,A=a.input,n=s+(a.avail_in-5),i=a.next_out,z=a.output,o=i-(r-a.avail_out),d=i+(a.avail_out-257),u=M.dmax,m=M.wsize,x=M.whave,f=M.wnext,b=M.window,p=M.hold,v=M.bits,j=M.lencode,N=M.distcode,w=(1<<M.lenbits)-1,P=(1<<M.distbits)-1;e:do{v<15&&(p+=A[s++]<<v,v+=8,p+=A[s++]<<v,v+=8),k=j[p&w];t:for(;;){if($=k>>>24,p>>>=$,v-=$,$=k>>>16&255,$===0)z[i++]=k&65535;else if($&16){O=k&65535,$&=15,$&&(v<$&&(p+=A[s++]<<v,v+=8),O+=p&(1<<$)-1,p>>>=$,v-=$),v<15&&(p+=A[s++]<<v,v+=8,p+=A[s++]<<v,v+=8),k=N[p&P];a:for(;;){if($=k>>>24,p>>>=$,v-=$,$=k>>>16&255,$&16){if(L=k&65535,$&=15,v<$&&(p+=A[s++]<<v,v+=8,v<$&&(p+=A[s++]<<v,v+=8)),L+=p&(1<<$)-1,L>u){a.msg="invalid distance too far back",M.mode=fp;break e}if(p>>>=$,v-=$,$=i-o,L>$){if($=L-$,$>x&&M.sane){a.msg="invalid distance too far back",M.mode=fp;break e}if(_=0,E=b,f===0){if(_+=m-$,$<O){O-=$;do z[i++]=b[_++];while(--$);_=i-L,E=z}}else if(f<$){if(_+=m+f-$,$-=f,$<O){O-=$;do z[i++]=b[_++];while(--$);if(_=0,f<O){$=f,O-=$;do z[i++]=b[_++];while(--$);_=i-L,E=z}}}else if(_+=f-$,$<O){O-=$;do z[i++]=b[_++];while(--$);_=i-L,E=z}for(;O>2;)z[i++]=E[_++],z[i++]=E[_++],z[i++]=E[_++],O-=3;O&&(z[i++]=E[_++],O>1&&(z[i++]=E[_++]))}else{_=i-L;do z[i++]=z[_++],z[i++]=z[_++],z[i++]=z[_++],O-=3;while(O>2);O&&(z[i++]=z[_++],O>1&&(z[i++]=z[_++]))}}else if(($&64)===0){k=N[(k&65535)+(p&(1<<$)-1)];continue a}else{a.msg="invalid distance code",M.mode=fp;break e}break}}else if(($&64)===0){k=j[(k&65535)+(p&(1<<$)-1)];continue t}else if($&32){M.mode=DH;break e}else{a.msg="invalid literal/length code",M.mode=fp;break e}break}}while(s<n&&i<d);O=v>>3,s-=O,v-=O<<3,p&=(1<<v)-1,a.next_in=s,a.next_out=i,a.avail_in=s<n?5+(n-s):5-(s-n),a.avail_out=i<d?257+(d-i):257-(i-d),M.hold=p,M.bits=v};const tx=15,aS=852,rS=592,sS=0,Ov=1,nS=2,MH=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),RH=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),$H=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),FH=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),IH=(t,a,r,s,n,i,o,d)=>{const u=d.bits;let m=0,x=0,f=0,b=0,p=0,v=0,j=0,N=0,w=0,P=0,k,$,O,L,_,E=null,A;const z=new Uint16Array(tx+1),M=new Uint16Array(tx+1);let D=null,I,V,H;for(m=0;m<=tx;m++)z[m]=0;for(x=0;x<s;x++)z[a[r+x]]++;for(p=u,b=tx;b>=1&&z[b]===0;b--);if(p>b&&(p=b),b===0)return n[i++]=1<<24|64<<16|0,n[i++]=1<<24|64<<16|0,d.bits=1,0;for(f=1;f<b&&z[f]===0;f++);for(p<f&&(p=f),N=1,m=1;m<=tx;m++)if(N<<=1,N-=z[m],N<0)return-1;if(N>0&&(t===sS||b!==1))return-1;for(M[1]=0,m=1;m<tx;m++)M[m+1]=M[m]+z[m];for(x=0;x<s;x++)a[r+x]!==0&&(o[M[a[r+x]]++]=x);if(t===sS?(E=D=o,A=20):t===Ov?(E=MH,D=RH,A=257):(E=$H,D=FH,A=0),P=0,x=0,m=f,_=i,v=p,j=0,O=-1,w=1<<p,L=w-1,t===Ov&&w>aS||t===nS&&w>rS)return 1;for(;;){I=m-j,o[x]+1<A?(V=0,H=o[x]):o[x]>=A?(V=D[o[x]-A],H=E[o[x]-A]):(V=96,H=0),k=1<<m-j,$=1<<v,f=$;do $-=k,n[_+(P>>j)+$]=I<<24|V<<16|H|0;while($!==0);for(k=1<<m-1;P&k;)k>>=1;if(k!==0?(P&=k-1,P+=k):P=0,x++,--z[m]===0){if(m===b)break;m=a[r+o[x]]}if(m>p&&(P&L)!==O){for(j===0&&(j=p),_+=f,v=m-j,N=1<<v;v+j<b&&(N-=z[v+j],!(N<=0));)v++,N<<=1;if(w+=1<<v,t===Ov&&w>aS||t===nS&&w>rS)return 1;O=P&L,n[O]=p<<24|v<<16|_-i|0}}return P!==0&&(n[_+P]=m-j<<24|64<<16|0),d.bits=p,0};var ff=IH;const BH=0,T9=1,P9=2,{Z_FINISH:iS,Z_BLOCK:zH,Z_TREES:pp,Z_OK:rm,Z_STREAM_END:qH,Z_NEED_DICT:UH,Z_STREAM_ERROR:ul,Z_DATA_ERROR:O9,Z_MEM_ERROR:D9,Z_BUF_ERROR:HH,Z_DEFLATED:lS}=k9,gy=16180,oS=16181,cS=16182,dS=16183,uS=16184,mS=16185,xS=16186,hS=16187,fS=16188,pS=16189,fg=16190,cc=16191,Dv=16192,gS=16193,Lv=16194,yS=16195,bS=16196,vS=16197,jS=16198,gp=16199,yp=16200,NS=16201,wS=16202,SS=16203,_S=16204,AS=16205,Mv=16206,kS=16207,CS=16208,Sr=16209,L9=16210,M9=16211,YH=852,GH=592,VH=15,WH=VH,ES=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function KH(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const dm=t=>{if(!t)return 1;const a=t.state;return!a||a.strm!==t||a.mode<gy||a.mode>M9?1:0},R9=t=>{if(dm(t))return ul;const a=t.state;return t.total_in=t.total_out=a.total=0,t.msg="",a.wrap&&(t.adler=a.wrap&1),a.mode=gy,a.last=0,a.havedict=0,a.flags=-1,a.dmax=32768,a.head=null,a.hold=0,a.bits=0,a.lencode=a.lendyn=new Int32Array(YH),a.distcode=a.distdyn=new Int32Array(GH),a.sane=1,a.back=-1,rm},$9=t=>{if(dm(t))return ul;const a=t.state;return a.wsize=0,a.whave=0,a.wnext=0,R9(t)},F9=(t,a)=>{let r;if(dm(t))return ul;const s=t.state;return a<0?(r=0,a=-a):(r=(a>>4)+5,a<48&&(a&=15)),a&&(a<8||a>15)?ul:(s.window!==null&&s.wbits!==a&&(s.window=null),s.wrap=r,s.wbits=a,$9(t))},I9=(t,a)=>{if(!t)return ul;const r=new KH;t.state=r,r.strm=t,r.window=null,r.mode=gy;const s=F9(t,a);return s!==rm&&(t.state=null),s},XH=t=>I9(t,WH);let TS=!0,Rv,$v;const JH=t=>{if(TS){Rv=new Int32Array(512),$v=new Int32Array(32);let a=0;for(;a<144;)t.lens[a++]=8;for(;a<256;)t.lens[a++]=9;for(;a<280;)t.lens[a++]=7;for(;a<288;)t.lens[a++]=8;for(ff(T9,t.lens,0,288,Rv,0,t.work,{bits:9}),a=0;a<32;)t.lens[a++]=5;ff(P9,t.lens,0,32,$v,0,t.work,{bits:5}),TS=!1}t.lencode=Rv,t.lenbits=9,t.distcode=$v,t.distbits=5},B9=(t,a,r,s)=>{let n;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),s>=i.wsize?(i.window.set(a.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(n=i.wsize-i.wnext,n>s&&(n=s),i.window.set(a.subarray(r-s,r-s+n),i.wnext),s-=n,s?(i.window.set(a.subarray(r-s,r),0),i.wnext=s,i.whave=i.wsize):(i.wnext+=n,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=n))),0},ZH=(t,a)=>{let r,s,n,i,o,d,u,m,x,f,b,p,v,j,N=0,w,P,k,$,O,L,_,E;const A=new Uint8Array(4);let z,M;const D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(dm(t)||!t.output||!t.input&&t.avail_in!==0)return ul;r=t.state,r.mode===cc&&(r.mode=Dv),o=t.next_out,n=t.output,u=t.avail_out,i=t.next_in,s=t.input,d=t.avail_in,m=r.hold,x=r.bits,f=d,b=u,E=rm;e:for(;;)switch(r.mode){case gy:if(r.wrap===0){r.mode=Dv;break}for(;x<16;){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}if(r.wrap&2&&m===35615){r.wbits===0&&(r.wbits=15),r.check=0,A[0]=m&255,A[1]=m>>>8&255,r.check=bo(r.check,A,2,0),m=0,x=0,r.mode=oS;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((m&255)<<8)+(m>>8))%31){t.msg="incorrect header check",r.mode=Sr;break}if((m&15)!==lS){t.msg="unknown compression method",r.mode=Sr;break}if(m>>>=4,x-=4,_=(m&15)+8,r.wbits===0&&(r.wbits=_),_>15||_>r.wbits){t.msg="invalid window size",r.mode=Sr;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=m&512?pS:cc,m=0,x=0;break;case oS:for(;x<16;){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}if(r.flags=m,(r.flags&255)!==lS){t.msg="unknown compression method",r.mode=Sr;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Sr;break}r.head&&(r.head.text=m>>8&1),r.flags&512&&r.wrap&4&&(A[0]=m&255,A[1]=m>>>8&255,r.check=bo(r.check,A,2,0)),m=0,x=0,r.mode=cS;case cS:for(;x<32;){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}r.head&&(r.head.time=m),r.flags&512&&r.wrap&4&&(A[0]=m&255,A[1]=m>>>8&255,A[2]=m>>>16&255,A[3]=m>>>24&255,r.check=bo(r.check,A,4,0)),m=0,x=0,r.mode=dS;case dS:for(;x<16;){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}r.head&&(r.head.xflags=m&255,r.head.os=m>>8),r.flags&512&&r.wrap&4&&(A[0]=m&255,A[1]=m>>>8&255,r.check=bo(r.check,A,2,0)),m=0,x=0,r.mode=uS;case uS:if(r.flags&1024){for(;x<16;){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}r.length=m,r.head&&(r.head.extra_len=m),r.flags&512&&r.wrap&4&&(A[0]=m&255,A[1]=m>>>8&255,r.check=bo(r.check,A,2,0)),m=0,x=0}else r.head&&(r.head.extra=null);r.mode=mS;case mS:if(r.flags&1024&&(p=r.length,p>d&&(p=d),p&&(r.head&&(_=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(s.subarray(i,i+p),_)),r.flags&512&&r.wrap&4&&(r.check=bo(r.check,s,p,i)),d-=p,i+=p,r.length-=p),r.length))break e;r.length=0,r.mode=xS;case xS:if(r.flags&2048){if(d===0)break e;p=0;do _=s[i+p++],r.head&&_&&r.length<65536&&(r.head.name+=String.fromCharCode(_));while(_&&p<d);if(r.flags&512&&r.wrap&4&&(r.check=bo(r.check,s,p,i)),d-=p,i+=p,_)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=hS;case hS:if(r.flags&4096){if(d===0)break e;p=0;do _=s[i+p++],r.head&&_&&r.length<65536&&(r.head.comment+=String.fromCharCode(_));while(_&&p<d);if(r.flags&512&&r.wrap&4&&(r.check=bo(r.check,s,p,i)),d-=p,i+=p,_)break e}else r.head&&(r.head.comment=null);r.mode=fS;case fS:if(r.flags&512){for(;x<16;){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}if(r.wrap&4&&m!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Sr;break}m=0,x=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=cc;break;case pS:for(;x<32;){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}t.adler=r.check=ES(m),m=0,x=0,r.mode=fg;case fg:if(r.havedict===0)return t.next_out=o,t.avail_out=u,t.next_in=i,t.avail_in=d,r.hold=m,r.bits=x,UH;t.adler=r.check=1,r.mode=cc;case cc:if(a===zH||a===pp)break e;case Dv:if(r.last){m>>>=x&7,x-=x&7,r.mode=Mv;break}for(;x<3;){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}switch(r.last=m&1,m>>>=1,x-=1,m&3){case 0:r.mode=gS;break;case 1:if(JH(r),r.mode=gp,a===pp){m>>>=2,x-=2;break e}break;case 2:r.mode=bS;break;case 3:t.msg="invalid block type",r.mode=Sr}m>>>=2,x-=2;break;case gS:for(m>>>=x&7,x-=x&7;x<32;){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}if((m&65535)!==(m>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Sr;break}if(r.length=m&65535,m=0,x=0,r.mode=Lv,a===pp)break e;case Lv:r.mode=yS;case yS:if(p=r.length,p){if(p>d&&(p=d),p>u&&(p=u),p===0)break e;n.set(s.subarray(i,i+p),o),d-=p,i+=p,u-=p,o+=p,r.length-=p;break}r.mode=cc;break;case bS:for(;x<14;){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}if(r.nlen=(m&31)+257,m>>>=5,x-=5,r.ndist=(m&31)+1,m>>>=5,x-=5,r.ncode=(m&15)+4,m>>>=4,x-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Sr;break}r.have=0,r.mode=vS;case vS:for(;r.have<r.ncode;){for(;x<3;){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}r.lens[D[r.have++]]=m&7,m>>>=3,x-=3}for(;r.have<19;)r.lens[D[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,z={bits:r.lenbits},E=ff(BH,r.lens,0,19,r.lencode,0,r.work,z),r.lenbits=z.bits,E){t.msg="invalid code lengths set",r.mode=Sr;break}r.have=0,r.mode=jS;case jS:for(;r.have<r.nlen+r.ndist;){for(;N=r.lencode[m&(1<<r.lenbits)-1],w=N>>>24,P=N>>>16&255,k=N&65535,!(w<=x);){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}if(k<16)m>>>=w,x-=w,r.lens[r.have++]=k;else{if(k===16){for(M=w+2;x<M;){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}if(m>>>=w,x-=w,r.have===0){t.msg="invalid bit length repeat",r.mode=Sr;break}_=r.lens[r.have-1],p=3+(m&3),m>>>=2,x-=2}else if(k===17){for(M=w+3;x<M;){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}m>>>=w,x-=w,_=0,p=3+(m&7),m>>>=3,x-=3}else{for(M=w+7;x<M;){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}m>>>=w,x-=w,_=0,p=11+(m&127),m>>>=7,x-=7}if(r.have+p>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Sr;break}for(;p--;)r.lens[r.have++]=_}}if(r.mode===Sr)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Sr;break}if(r.lenbits=9,z={bits:r.lenbits},E=ff(T9,r.lens,0,r.nlen,r.lencode,0,r.work,z),r.lenbits=z.bits,E){t.msg="invalid literal/lengths set",r.mode=Sr;break}if(r.distbits=6,r.distcode=r.distdyn,z={bits:r.distbits},E=ff(P9,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,z),r.distbits=z.bits,E){t.msg="invalid distances set",r.mode=Sr;break}if(r.mode=gp,a===pp)break e;case gp:r.mode=yp;case yp:if(d>=6&&u>=258){t.next_out=o,t.avail_out=u,t.next_in=i,t.avail_in=d,r.hold=m,r.bits=x,LH(t,b),o=t.next_out,n=t.output,u=t.avail_out,i=t.next_in,s=t.input,d=t.avail_in,m=r.hold,x=r.bits,r.mode===cc&&(r.back=-1);break}for(r.back=0;N=r.lencode[m&(1<<r.lenbits)-1],w=N>>>24,P=N>>>16&255,k=N&65535,!(w<=x);){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}if(P&&(P&240)===0){for($=w,O=P,L=k;N=r.lencode[L+((m&(1<<$+O)-1)>>$)],w=N>>>24,P=N>>>16&255,k=N&65535,!($+w<=x);){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}m>>>=$,x-=$,r.back+=$}if(m>>>=w,x-=w,r.back+=w,r.length=k,P===0){r.mode=AS;break}if(P&32){r.back=-1,r.mode=cc;break}if(P&64){t.msg="invalid literal/length code",r.mode=Sr;break}r.extra=P&15,r.mode=NS;case NS:if(r.extra){for(M=r.extra;x<M;){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}r.length+=m&(1<<r.extra)-1,m>>>=r.extra,x-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=wS;case wS:for(;N=r.distcode[m&(1<<r.distbits)-1],w=N>>>24,P=N>>>16&255,k=N&65535,!(w<=x);){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}if((P&240)===0){for($=w,O=P,L=k;N=r.distcode[L+((m&(1<<$+O)-1)>>$)],w=N>>>24,P=N>>>16&255,k=N&65535,!($+w<=x);){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}m>>>=$,x-=$,r.back+=$}if(m>>>=w,x-=w,r.back+=w,P&64){t.msg="invalid distance code",r.mode=Sr;break}r.offset=k,r.extra=P&15,r.mode=SS;case SS:if(r.extra){for(M=r.extra;x<M;){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}r.offset+=m&(1<<r.extra)-1,m>>>=r.extra,x-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Sr;break}r.mode=_S;case _S:if(u===0)break e;if(p=b-u,r.offset>p){if(p=r.offset-p,p>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Sr;break}p>r.wnext?(p-=r.wnext,v=r.wsize-p):v=r.wnext-p,p>r.length&&(p=r.length),j=r.window}else j=n,v=o-r.offset,p=r.length;p>u&&(p=u),u-=p,r.length-=p;do n[o++]=j[v++];while(--p);r.length===0&&(r.mode=yp);break;case AS:if(u===0)break e;n[o++]=r.length,u--,r.mode=yp;break;case Mv:if(r.wrap){for(;x<32;){if(d===0)break e;d--,m|=s[i++]<<x,x+=8}if(b-=u,t.total_out+=b,r.total+=b,r.wrap&4&&b&&(t.adler=r.check=r.flags?bo(r.check,n,b,o-b):uj(r.check,n,b,o-b)),b=u,r.wrap&4&&(r.flags?m:ES(m))!==r.check){t.msg="incorrect data check",r.mode=Sr;break}m=0,x=0}r.mode=kS;case kS:if(r.wrap&&r.flags){for(;x<32;){if(d===0)break e;d--,m+=s[i++]<<x,x+=8}if(r.wrap&4&&m!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Sr;break}m=0,x=0}r.mode=CS;case CS:E=qH;break e;case Sr:E=O9;break e;case L9:return D9;case M9:default:return ul}return t.next_out=o,t.avail_out=u,t.next_in=i,t.avail_in=d,r.hold=m,r.bits=x,(r.wsize||b!==t.avail_out&&r.mode<Sr&&(r.mode<Mv||a!==iS))&&B9(t,t.output,t.next_out,b-t.avail_out),f-=t.avail_in,b-=t.avail_out,t.total_in+=f,t.total_out+=b,r.total+=b,r.wrap&4&&b&&(t.adler=r.check=r.flags?bo(r.check,n,b,t.next_out-b):uj(r.check,n,b,t.next_out-b)),t.data_type=r.bits+(r.last?64:0)+(r.mode===cc?128:0)+(r.mode===gp||r.mode===Lv?256:0),(f===0&&b===0||a===iS)&&E===rm&&(E=HH),E},QH=t=>{if(dm(t))return ul;let a=t.state;return a.window&&(a.window=null),t.state=null,rm},eY=(t,a)=>{if(dm(t))return ul;const r=t.state;return(r.wrap&2)===0?ul:(r.head=a,a.done=!1,rm)},tY=(t,a)=>{const r=a.length;let s,n,i;return dm(t)||(s=t.state,s.wrap!==0&&s.mode!==fg)?ul:s.mode===fg&&(n=1,n=uj(n,a,r,0),n!==s.check)?O9:(i=B9(t,a,r,r),i?(s.mode=L9,D9):(s.havedict=1,rm))};var aY=$9,rY=F9,sY=R9,nY=XH,iY=I9,lY=ZH,oY=QH,cY=eY,dY=tY,uY="pako inflate (from Nodeca project)",dc={inflateReset:aY,inflateReset2:rY,inflateResetKeep:sY,inflateInit:nY,inflateInit2:iY,inflate:lY,inflateEnd:oY,inflateGetHeader:cY,inflateSetDictionary:dY,inflateInfo:uY};function mY(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var xY=mY;const z9=Object.prototype.toString,{Z_NO_FLUSH:hY,Z_FINISH:fY,Z_OK:_f,Z_STREAM_END:Fv,Z_NEED_DICT:Iv,Z_STREAM_ERROR:pY,Z_DATA_ERROR:PS,Z_MEM_ERROR:gY}=k9;function Wf(t){this.options=C9.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const a=this.options;a.raw&&a.windowBits>=0&&a.windowBits<16&&(a.windowBits=-a.windowBits,a.windowBits===0&&(a.windowBits=-15)),a.windowBits>=0&&a.windowBits<16&&!(t&&t.windowBits)&&(a.windowBits+=32),a.windowBits>15&&a.windowBits<48&&(a.windowBits&15)===0&&(a.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new OH,this.strm.avail_out=0;let r=dc.inflateInit2(this.strm,a.windowBits);if(r!==_f)throw new Error(mj[r]);if(this.header=new xY,dc.inflateGetHeader(this.strm,this.header),a.dictionary&&(typeof a.dictionary=="string"?a.dictionary=xj.string2buf(a.dictionary):z9.call(a.dictionary)==="[object ArrayBuffer]"&&(a.dictionary=new Uint8Array(a.dictionary)),a.raw&&(r=dc.inflateSetDictionary(this.strm,a.dictionary),r!==_f)))throw new Error(mj[r])}Wf.prototype.push=function(t,a){const r=this.strm,s=this.options.chunkSize,n=this.options.dictionary;let i,o,d;if(this.ended)return!1;for(a===~~a?o=a:o=a===!0?fY:hY,z9.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(s),r.next_out=0,r.avail_out=s),i=dc.inflate(r,o),i===Iv&&n&&(i=dc.inflateSetDictionary(r,n),i===_f?i=dc.inflate(r,o):i===PS&&(i=Iv));r.avail_in>0&&i===Fv&&r.state.wrap>0&&t[r.next_in]!==0;)dc.inflateReset(r),i=dc.inflate(r,o);switch(i){case pY:case PS:case Iv:case gY:return this.onEnd(i),this.ended=!0,!1}if(d=r.avail_out,r.next_out&&(r.avail_out===0||i===Fv))if(this.options.to==="string"){let u=xj.utf8border(r.output,r.next_out),m=r.next_out-u,x=xj.buf2string(r.output,u);r.next_out=m,r.avail_out=s-m,m&&r.output.set(r.output.subarray(u,u+m),0),this.onData(x)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===_f&&d===0)){if(i===Fv)return i=dc.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Wf.prototype.onData=function(t){this.chunks.push(t)};Wf.prototype.onEnd=function(t){t===_f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=C9.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function yY(t,a){const r=new Wf(a);if(r.push(t),r.err)throw r.msg||mj[r.err];return r.result}var bY=Wf,vY=yY,jY={Inflate:bY,inflate:vY};const{Inflate:NY,inflate:wY}=jY;var OS=NY,SY=wY;const q9=[];for(let t=0;t<256;t++){let a=t;for(let r=0;r<8;r++)a&1?a=3988292384^a>>>1:a=a>>>1;q9[t]=a}const DS=4294967295;function _Y(t,a,r){let s=t;for(let n=0;n<r;n++)s=q9[(s^a[n])&255]^s>>>8;return s}function AY(t,a){return(_Y(DS,t,a)^DS)>>>0}function LS(t,a,r){const s=t.readUint32(),n=AY(new Uint8Array(t.buffer,t.byteOffset+t.offset-a-4,a),a);if(n!==s)throw new Error(`CRC mismatch for chunk ${r}. Expected ${s}, found ${n}`)}function U9(t,a,r){for(let s=0;s<r;s++)a[s]=t[s]}function H9(t,a,r,s){let n=0;for(;n<s;n++)a[n]=t[n];for(;n<r;n++)a[n]=t[n]+a[n-s]&255}function Y9(t,a,r,s){let n=0;if(r.length===0)for(;n<s;n++)a[n]=t[n];else for(;n<s;n++)a[n]=t[n]+r[n]&255}function G9(t,a,r,s,n){let i=0;if(r.length===0){for(;i<n;i++)a[i]=t[i];for(;i<s;i++)a[i]=t[i]+(a[i-n]>>1)&255}else{for(;i<n;i++)a[i]=t[i]+(r[i]>>1)&255;for(;i<s;i++)a[i]=t[i]+(a[i-n]+r[i]>>1)&255}}function V9(t,a,r,s,n){let i=0;if(r.length===0){for(;i<n;i++)a[i]=t[i];for(;i<s;i++)a[i]=t[i]+a[i-n]&255}else{for(;i<n;i++)a[i]=t[i]+r[i]&255;for(;i<s;i++)a[i]=t[i]+kY(a[i-n],r[i],r[i-n])&255}}function kY(t,a,r){const s=t+a-r,n=Math.abs(s-t),i=Math.abs(s-a),o=Math.abs(s-r);return n<=i&&n<=o?t:i<=o?a:r}function CY(t,a,r,s,n,i){switch(t){case 0:U9(a,r,n);break;case 1:H9(a,r,n,i);break;case 2:Y9(a,r,s,n);break;case 3:G9(a,r,s,n,i);break;case 4:V9(a,r,s,n,i);break;default:throw new Error(`Unsupported filter: ${t}`)}}const EY=new Uint16Array([255]),TY=new Uint8Array(EY.buffer),PY=TY[0]===255;function OY(t){const{data:a,width:r,height:s,channels:n,depth:i}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],d=Math.ceil(i/8)*n,u=new Uint8Array(s*r*d);let m=0;for(let x=0;x<7;x++){const f=o[x],b=Math.ceil((r-f.x)/f.xStep),p=Math.ceil((s-f.y)/f.yStep);if(b<=0||p<=0)continue;const v=b*d,j=new Uint8Array(v);for(let N=0;N<p;N++){const w=a[m++],P=a.subarray(m,m+v);m+=v;const k=new Uint8Array(v);CY(w,P,k,j,v,d),j.set(k);for(let $=0;$<b;$++){const O=f.x+$*f.xStep,L=f.y+N*f.yStep;if(!(O>=r||L>=s))for(let _=0;_<d;_++)u[(L*r+O)*d+_]=k[$*d+_]}}}if(i===16){const x=new Uint16Array(u.buffer);if(PY)for(let f=0;f<x.length;f++)x[f]=DY(x[f]);return x}else return u}function DY(t){return(t&255)<<8|t>>8&255}const LY=new Uint16Array([255]),MY=new Uint8Array(LY.buffer),RY=MY[0]===255,$Y=new Uint8Array(0);function MS(t){const{data:a,width:r,height:s,channels:n,depth:i}=t,o=Math.ceil(i/8)*n,d=Math.ceil(i/8*n*r),u=new Uint8Array(s*d);let m=$Y,x=0,f,b;for(let p=0;p<s;p++){switch(f=a.subarray(x+1,x+1+d),b=u.subarray(p*d,(p+1)*d),a[x]){case 0:U9(f,b,d);break;case 1:H9(f,b,d,o);break;case 2:Y9(f,b,m,d);break;case 3:G9(f,b,m,d,o);break;case 4:V9(f,b,m,d,o);break;default:throw new Error(`Unsupported filter: ${a[x]}`)}m=b,x+=d+1}if(i===16){const p=new Uint16Array(u.buffer);if(RY)for(let v=0;v<p.length;v++)p[v]=FY(p[v]);return p}else return u}function FY(t){return(t&255)<<8|t>>8&255}const Wp=Uint8Array.of(137,80,78,71,13,10,26,10);function RS(t){if(!IY(t.readBytes(Wp.length)))throw new Error("wrong PNG signature")}function IY(t){if(t.length<Wp.length)return!1;for(let a=0;a<Wp.length;a++)if(t[a]!==Wp[a])return!1;return!0}const BY="tEXt",zY=0,W9=new TextDecoder("latin1");function qY(t){if(HY(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const UY=/^[\u0000-\u00FF]*$/;function HY(t){if(!UY.test(t))throw new Error("invalid latin1 text")}function YY(t,a,r){const s=K9(a);t[s]=GY(a,r-s.length-1)}function K9(t){for(t.mark();t.readByte()!==zY;);const a=t.offset;t.reset();const r=W9.decode(t.readBytes(a-t.offset-1));return t.skip(1),qY(r),r}function GY(t,a){return W9.decode(t.readBytes(a))}const vi={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Bv={UNKNOWN:-1,DEFLATE:0},$S={UNKNOWN:-1,ADAPTIVE:0},zv={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},bp={NONE:0,BACKGROUND:1,PREVIOUS:2},qv={SOURCE:0,OVER:1};class VY extends TN{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(a,r={}){super(a);const{checkCrc:s=!1}=r;this._checkCrc=s,this._inflator=new OS,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Bv.UNKNOWN,this._filterMethod=$S.UNKNOWN,this._interlaceMethod=zv.UNKNOWN,this._colorType=vi.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(RS(this);!this._end;){const a=this.readUint32(),r=this.readChars(4);this.decodeChunk(a,r)}return this.decodeImage(),this._png}decodeApng(){for(RS(this);!this._end;){const a=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(a,r)}return this.decodeApngImage(),this._apng}decodeChunk(a,r){const s=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(a);break;case"IDAT":this.decodeIDAT(a);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(a);break;case"iCCP":this.decodeiCCP(a);break;case BY:YY(this._png.text,this,a);break;case"pHYs":this.decodepHYs();break;default:this.skip(a);break}if(this.offset-s!==a)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?LS(this,a+4,r):this.skip(4)}decodeApngChunk(a,r){const s=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(a);break;default:this.decodeChunk(a,r),this.offset=s+a;break}if(this.offset-s!==a)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?LS(this,a+4,r):this.skip(4)}decodeIHDR(){const a=this._png;a.width=this.readUint32(),a.height=this.readUint32(),a.depth=WY(this.readUint8());const r=this.readUint8();this._colorType=r;let s;switch(r){case vi.GREYSCALE:s=1;break;case vi.TRUECOLOUR:s=3;break;case vi.INDEXED_COLOUR:s=1;break;case vi.GREYSCALE_ALPHA:s=2;break;case vi.TRUECOLOUR_ALPHA:s=4;break;case vi.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==Bv.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const a={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(a)}decodePLTE(a){if(a%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${a}`);const r=a/3;this._hasPalette=!0;const s=[];this._palette=s;for(let n=0;n<r;n++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(a){this._writingDataChunks=!0;const r=a,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(a)}decodeFDAT(a){this._writingDataChunks=!0;let r=a,s=this.offset+this.byteOffset;if(s+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,s,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(a)}decodetRNS(a){switch(this._colorType){case vi.GREYSCALE:case vi.TRUECOLOUR:{if(a%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${a}`);if(a/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${a/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(a/2);for(let r=0;r<a/2;r++)this._transparency[r]=this.readUint16();break}case vi.INDEXED_COLOUR:{if(a>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${a} vs ${this._palette.length})`);let r=0;for(;r<a;r++){const s=this.readByte();this._palette[r].push(s)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case vi.UNKNOWN:case vi.GREYSCALE_ALPHA:case vi.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(a){const r=K9(this),s=this.readUint8();if(s!==Bv.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const n=this.readBytes(a-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:SY(n)}}decodepHYs(){const a=this.readUint32(),r=this.readUint32(),s=this.readByte();this._png.resolution={x:a,y:r,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let a=0;a<this._numberOfFrames;a++){const r={sequenceNumber:this._frames[a].sequenceNumber,delayNumber:this._frames[a].delayNumber,delayDenominator:this._frames[a].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(a);if(s){if(s.data=MS({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),a===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)r.data=s.data;else{const n=this._apng.frames.at(a-1);this.disposeFrame(s,n,r),this.addFrameDataToCanvas(r,s)}this._apng.frames.push(r)}}return this._apng}disposeFrame(a,r,s){switch(a.disposeOp){case bp.NONE:break;case bp.BACKGROUND:for(let n=0;n<this._png.height;n++)for(let i=0;i<this._png.width;i++){const o=(n*a.width+i)*this._png.channels;for(let d=0;d<this._png.channels;d++)s.data[o+d]=0}break;case bp.PREVIOUS:s.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(a,r){const s=1<<this._png.depth,n=(i,o)=>{const d=((i+r.yOffset)*this._png.width+r.xOffset+o)*this._png.channels,u=(i*r.width+o)*this._png.channels;return{index:d,frameIndex:u}};switch(r.blendOp){case qv.SOURCE:for(let i=0;i<r.height;i++)for(let o=0;o<r.width;o++){const{index:d,frameIndex:u}=n(i,o);for(let m=0;m<this._png.channels;m++)a.data[d+m]=r.data[u+m]}break;case qv.OVER:for(let i=0;i<r.height;i++)for(let o=0;o<r.width;o++){const{index:d,frameIndex:u}=n(i,o);for(let m=0;m<this._png.channels;m++){const x=r.data[u+this._png.channels-1]/s,f=m%(this._png.channels-1)===0?1:r.data[u+m],b=Math.floor(x*f+(1-x)*a.data[d+m]);a.data[d+m]+=b}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const a=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==$S.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===zv.NO_INTERLACE)this._png.data=MS({data:a,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===zv.ADAM7)this._png.data=OY({data:a,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const a=this._inflator.result,r=this._frames.at(-1);r?r.data=a:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:bp.NONE,blendOp:qv.SOURCE,data:a}),this._inflator=new OS,this._writingDataChunks=!1}}function WY(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var FS;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(FS||(FS={}));function KY(t,a){return new VY(t,a).decode()}var na=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Uv(){na.console&&typeof na.console.log=="function"&&na.console.log.apply(na.console,arguments)}var rr={log:Uv,warn:function(t){na.console&&(typeof na.console.warn=="function"?na.console.warn.apply(na.console,arguments):Uv.call(null,arguments))},error:function(t){na.console&&(typeof na.console.error=="function"?na.console.error.apply(na.console,arguments):Uv(t))}};function Hv(t,a,r){var s=new XMLHttpRequest;s.open("GET",t),s.responseType="blob",s.onload=function(){Tu(s.response,a,r)},s.onerror=function(){rr.error("could not download file")},s.send()}function IS(t){var a=new XMLHttpRequest;a.open("HEAD",t,!1);try{a.send()}catch{}return a.status>=200&&a.status<=299}function vp(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(a)}}var Tu=na.saveAs||((typeof window>"u"?"undefined":Ka(window))!=="object"||window!==na?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,a,r){var s=na.URL||na.webkitURL,n=document.createElement("a");a=a||t.name||"download",n.download=a,n.rel="noopener",typeof t=="string"?(n.href=t,n.origin!==location.origin?IS(n.href)?Hv(t,a,r):vp(n,n.target="_blank"):vp(n)):(n.href=s.createObjectURL(t),setTimeout(function(){s.revokeObjectURL(n.href)},4e4),setTimeout(function(){vp(n)},0))}:"msSaveOrOpenBlob"in navigator?function(t,a,r){if(a=a||t.name||"download",typeof t=="string")if(IS(t))Hv(t,a,r);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout(function(){vp(s)})}else navigator.msSaveOrOpenBlob(function(n,i){return i===void 0?i={autoBom:!1}:Ka(i)!=="object"&&(rr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}(t,r),a)}:function(t,a,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof t=="string")return Hv(t,a,r);var n=t.type==="application/octet-stream",i=/constructor/i.test(na.HTMLElement)||na.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||n&&i)&&(typeof FileReader>"u"?"undefined":Ka(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var x=d.result;x=o?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=x:location=x,s=null},d.readAsDataURL(t)}else{var u=na.URL||na.webkitURL,m=u.createObjectURL(t);s?s.location=m:location.href=m,s=null,setTimeout(function(){u.revokeObjectURL(m)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function X9(t){var a;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],s=0;s<r.length;s++){var n=r[s].re,i=r[s].process,o=n.exec(t);o&&(a=i(o),this.r=a[0],this.g=a[1],this.b=a[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),u=this.g.toString(16),m=this.b.toString(16);return d.length==1&&(d="0"+d),u.length==1&&(u="0"+u),m.length==1&&(m="0"+m),"#"+d+u+m}}var Kp=na.atob.bind(na),BS=na.btoa.bind(na);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Yv(t,a){var r=t[0],s=t[1],n=t[2],i=t[3];r=dn(r,s,n,i,a[0],7,-680876936),i=dn(i,r,s,n,a[1],12,-389564586),n=dn(n,i,r,s,a[2],17,606105819),s=dn(s,n,i,r,a[3],22,-1044525330),r=dn(r,s,n,i,a[4],7,-176418897),i=dn(i,r,s,n,a[5],12,1200080426),n=dn(n,i,r,s,a[6],17,-1473231341),s=dn(s,n,i,r,a[7],22,-45705983),r=dn(r,s,n,i,a[8],7,1770035416),i=dn(i,r,s,n,a[9],12,-1958414417),n=dn(n,i,r,s,a[10],17,-42063),s=dn(s,n,i,r,a[11],22,-1990404162),r=dn(r,s,n,i,a[12],7,1804603682),i=dn(i,r,s,n,a[13],12,-40341101),n=dn(n,i,r,s,a[14],17,-1502002290),r=un(r,s=dn(s,n,i,r,a[15],22,1236535329),n,i,a[1],5,-165796510),i=un(i,r,s,n,a[6],9,-1069501632),n=un(n,i,r,s,a[11],14,643717713),s=un(s,n,i,r,a[0],20,-373897302),r=un(r,s,n,i,a[5],5,-701558691),i=un(i,r,s,n,a[10],9,38016083),n=un(n,i,r,s,a[15],14,-660478335),s=un(s,n,i,r,a[4],20,-405537848),r=un(r,s,n,i,a[9],5,568446438),i=un(i,r,s,n,a[14],9,-1019803690),n=un(n,i,r,s,a[3],14,-187363961),s=un(s,n,i,r,a[8],20,1163531501),r=un(r,s,n,i,a[13],5,-1444681467),i=un(i,r,s,n,a[2],9,-51403784),n=un(n,i,r,s,a[7],14,1735328473),r=mn(r,s=un(s,n,i,r,a[12],20,-1926607734),n,i,a[5],4,-378558),i=mn(i,r,s,n,a[8],11,-2022574463),n=mn(n,i,r,s,a[11],16,1839030562),s=mn(s,n,i,r,a[14],23,-35309556),r=mn(r,s,n,i,a[1],4,-1530992060),i=mn(i,r,s,n,a[4],11,1272893353),n=mn(n,i,r,s,a[7],16,-155497632),s=mn(s,n,i,r,a[10],23,-1094730640),r=mn(r,s,n,i,a[13],4,681279174),i=mn(i,r,s,n,a[0],11,-358537222),n=mn(n,i,r,s,a[3],16,-722521979),s=mn(s,n,i,r,a[6],23,76029189),r=mn(r,s,n,i,a[9],4,-640364487),i=mn(i,r,s,n,a[12],11,-421815835),n=mn(n,i,r,s,a[15],16,530742520),r=xn(r,s=mn(s,n,i,r,a[2],23,-995338651),n,i,a[0],6,-198630844),i=xn(i,r,s,n,a[7],10,1126891415),n=xn(n,i,r,s,a[14],15,-1416354905),s=xn(s,n,i,r,a[5],21,-57434055),r=xn(r,s,n,i,a[12],6,1700485571),i=xn(i,r,s,n,a[3],10,-1894986606),n=xn(n,i,r,s,a[10],15,-1051523),s=xn(s,n,i,r,a[1],21,-2054922799),r=xn(r,s,n,i,a[8],6,1873313359),i=xn(i,r,s,n,a[15],10,-30611744),n=xn(n,i,r,s,a[6],15,-1560198380),s=xn(s,n,i,r,a[13],21,1309151649),r=xn(r,s,n,i,a[4],6,-145523070),i=xn(i,r,s,n,a[11],10,-1120210379),n=xn(n,i,r,s,a[2],15,718787259),s=xn(s,n,i,r,a[9],21,-343485551),t[0]=Ed(r,t[0]),t[1]=Ed(s,t[1]),t[2]=Ed(n,t[2]),t[3]=Ed(i,t[3])}function yy(t,a,r,s,n,i){return a=Ed(Ed(a,t),Ed(s,i)),Ed(a<<n|a>>>32-n,r)}function dn(t,a,r,s,n,i,o){return yy(a&r|~a&s,t,a,n,i,o)}function un(t,a,r,s,n,i,o){return yy(a&s|r&~s,t,a,n,i,o)}function mn(t,a,r,s,n,i,o){return yy(a^r^s,t,a,n,i,o)}function xn(t,a,r,s,n,i,o){return yy(r^(a|~s),t,a,n,i,o)}function J9(t){var a,r=t.length,s=[1732584193,-271733879,-1732584194,271733878];for(a=64;a<=t.length;a+=64)Yv(s,XY(t.substring(a-64,a)));t=t.substring(a-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(a=0;a<t.length;a++)n[a>>2]|=t.charCodeAt(a)<<(a%4<<3);if(n[a>>2]|=128<<(a%4<<3),a>55)for(Yv(s,n),a=0;a<16;a++)n[a]=0;return n[14]=8*r,Yv(s,n),s}function XY(t){var a,r=[];for(a=0;a<64;a+=4)r[a>>2]=t.charCodeAt(a)+(t.charCodeAt(a+1)<<8)+(t.charCodeAt(a+2)<<16)+(t.charCodeAt(a+3)<<24);return r}var zS="0123456789abcdef".split("");function JY(t){for(var a="",r=0;r<4;r++)a+=zS[t>>8*r+4&15]+zS[t>>8*r&15];return a}function ZY(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function hj(t){return J9(t).map(ZY).join("")}var QY=function(t){for(var a=0;a<t.length;a++)t[a]=JY(t[a]);return t.join("")}(J9("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ed(t,a){if(QY){var r=(65535&t)+(65535&a);return(t>>16)+(a>>16)+(r>>16)<<16|65535&r}return t+a&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function fj(t,a){var r,s,n,i;if(t!==r){for(var o=(n=t,i=1+(256/t.length|0),new Array(i+1).join(n)),d=[],u=0;u<256;u++)d[u]=u;var m=0;for(u=0;u<256;u++){var x=d[u];m=(m+x+o.charCodeAt(u))%256,d[u]=d[m],d[m]=x}r=t,s=d}else d=s;var f=a.length,b=0,p=0,v="";for(u=0;u<f;u++)p=(p+(x=d[b=(b+1)%256]))%256,d[b]=d[p],d[p]=x,o=d[(d[b]+d[p])%256],v+=String.fromCharCode(a.charCodeAt(u)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var qS={print:4,modify:8,copy:16,"annot-forms":32};function ix(t,a,r,s){this.v=1,this.r=2;var n=192;t.forEach(function(d){if(qS.perm!==void 0)throw new Error("Invalid permission: "+d);n+=qS[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(a+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^n)),this.encryptionKey=hj(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=fj(this.encryptionKey,this.padding)}function lx(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var a="",r=t.length,s=0;s<r;s++){var n=t.charCodeAt(s);a+=n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?"#"+("0"+n.toString(16)).slice(-2):t[s]}return a}function US(t){if(Ka(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var a={};this.subscribe=function(r,s,n){if(n=n||!1,typeof r!="string"||typeof s!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");a.hasOwnProperty(r)||(a[r]={});var i=Math.random().toString(35);return a[r][i]=[s,!!n],i},this.unsubscribe=function(r){for(var s in a)if(a[s][r])return delete a[s][r],Object.keys(a[s]).length===0&&delete a[s],!0;return!1},this.publish=function(r){if(a.hasOwnProperty(r)){var s=Array.prototype.slice.call(arguments,1),n=[];for(var i in a[r]){var o=a[r][i];try{o[0].apply(t,s)}catch(d){na.console&&rr.error("jsPDF PubSub Error",d.message,d)}o[1]&&n.push(i)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return a}}function pg(t){if(!(this instanceof pg))return new pg(t);var a="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&a.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function Z9(t,a){this.gState=t,this.matrix=a,this.id="",this.objectNumber=-1}function Lu(t,a,r,s,n){if(!(this instanceof Lu))return new Lu(t,a,r,s,n);this.type=t==="axial"?2:3,this.coords=a,this.colors=r,Z9.call(this,s,n)}function dx(t,a,r,s,n){if(!(this instanceof dx))return new dx(t,a,r,s,n);this.boundingBox=t,this.xStep=a,this.yStep=r,this.stream="",this.cloneIndex=0,Z9.call(this,s,n)}function $t(t){var a,r=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],n=arguments[2],i=arguments[3],o=[],d=1,u=16,m="S",x=null;Ka(t=t||{})==="object"&&(r=t.orientation,s=t.unit||s,n=t.format||n,i=t.compress||t.compressPdf||i,(x=t.encryption||null)!==null&&(x.userPassword=x.userPassword||"",x.ownerPassword=x.ownerPassword||"",x.userPermissions=x.userPermissions||[]),d=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(a=t.precision),t.floatPrecision!==void 0&&(u=t.floatPrecision),m=t.defaultPathOperation||"S"),o=t.filters||(i===!0?["FlateEncode"]:o),s=s||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,b={},p={internal:{},__private__:{}};p.__private__.PubSub=US;var v="1.3",j=p.__private__.getPdfVersion=function(){return v};p.__private__.setPdfVersion=function(q){v=q};var N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return N};var w=p.__private__.getPageFormat=function(q){return N[q]};n=n||"a4";var P="compat",k="advanced",$=P;function O(){this.saveGraphicsState(),re(new Gt(_e,0,0,-_e,0,wn()*_e).toString()+" cm"),this.setFontSize(this.getFontSize()/_e),m="n",$=k}function L(){this.restoreGraphicsState(),m="S",$=P}var _=p.__private__.combineFontStyleAndFontWeight=function(q,oe){if(q=="bold"&&oe=="normal"||q=="bold"&&oe==400||q=="normal"&&oe=="italic"||q=="bold"&&oe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return oe&&(q=oe==400||oe==="normal"?q==="italic"?"italic":"normal":oe!=700&&oe!=="bold"||q!=="normal"?(oe==700?"bold":oe)+""+q:"bold"),q};p.advancedAPI=function(q){var oe=$===P;return oe&&O.call(this),typeof q!="function"||(q(this),oe&&L.call(this)),this},p.compatAPI=function(q){var oe=$===k;return oe&&L.call(this),typeof q!="function"||(q(this),oe&&O.call(this)),this},p.isAdvancedAPI=function(){return $===k};var E,A=function(q){if($!==k)throw new Error(q+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},z=p.roundToPrecision=p.__private__.roundToPrecision=function(q,oe){var we=a||oe;if(isNaN(q)||isNaN(we))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return q.toFixed(we).replace(/0+$/,"")};E=p.hpf=p.__private__.hpf=typeof u=="number"?function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.hpf");return z(q,u)}:u==="smart"?function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.hpf");return z(q,q>-1&&q<1?16:5)}:function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.hpf");return z(q,16)};var M=p.f2=p.__private__.f2=function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.f2");return z(q,2)},D=p.__private__.f3=function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.f3");return z(q,3)},I=p.scale=p.__private__.scale=function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.scale");return $===P?q*_e:$===k?q:void 0},V=function(q){return I(function(oe){return $===P?wn()-oe:$===k?oe:void 0}(q))};p.__private__.setPrecision=p.setPrecision=function(q){typeof parseInt(q,10)=="number"&&(a=parseInt(q,10))};var H,B="00000000000000000000000000000000",W=p.__private__.getFileId=function(){return B},K=p.__private__.setFileId=function(q){return B=q!==void 0&&/^[a-fA-F0-9]{32}$/.test(q)?q.toUpperCase():B.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),x!==null&&(Aa=new ix(x.userPermissions,x.userPassword,x.ownerPassword,B)),B};p.setFileId=function(q){return K(q),this},p.getFileId=function(){return W()};var X=p.__private__.convertDateToPDFDate=function(q){var oe=q.getTimezoneOffset(),we=oe<0?"+":"-",Ce=Math.floor(Math.abs(oe/60)),Fe=Math.abs(oe%60),at=[we,U(Ce),"'",U(Fe),"'"].join("");return["D:",q.getFullYear(),U(q.getMonth()+1),U(q.getDate()),U(q.getHours()),U(q.getMinutes()),U(q.getSeconds()),at].join("")},Q=p.__private__.convertPDFDateToDate=function(q){var oe=parseInt(q.substr(2,4),10),we=parseInt(q.substr(6,2),10)-1,Ce=parseInt(q.substr(8,2),10),Fe=parseInt(q.substr(10,2),10),at=parseInt(q.substr(12,2),10),ot=parseInt(q.substr(14,2),10);return new Date(oe,we,Ce,Fe,at,ot,0)},ye=p.__private__.setCreationDate=function(q){var oe;if(q===void 0&&(q=new Date),q instanceof Date)oe=X(q);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(q))throw new Error("Invalid argument passed to jsPDF.setCreationDate");oe=q}return H=oe},Y=p.__private__.getCreationDate=function(q){var oe=H;return q==="jsDate"&&(oe=Q(H)),oe};p.setCreationDate=function(q){return ye(q),this},p.getCreationDate=function(q){return Y(q)};var J,U=p.__private__.padd2=function(q){return("0"+parseInt(q)).slice(-2)},ee=p.__private__.padd2Hex=function(q){return("00"+(q=q.toString())).substr(q.length)},he=0,pe=[],se=[],te=0,ue=[],ge=[],ce=!1,De=se;p.__private__.setCustomOutputDestination=function(q){ce=!0,De=q};var ke=function(q){ce||(De=q)};p.__private__.resetCustomOutputDestination=function(){ce=!1,De=se};var re=p.__private__.out=function(q){return q=q.toString(),te+=q.length+1,De.push(q),De},Ee=p.__private__.write=function(q){return re(arguments.length===1?q.toString():Array.prototype.join.call(arguments," "))},Se=p.__private__.getArrayBuffer=function(q){for(var oe=q.length,we=new ArrayBuffer(oe),Ce=new Uint8Array(we);oe--;)Ce[oe]=q.charCodeAt(oe);return we},Ge=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Ge};var ve=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(q){return ve=$===k?q/_e:q,this};var Me,et=p.__private__.getFontSize=p.getFontSize=function(){return $===P?ve:ve*_e},Ie=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(q){return Ie=q,this},p.__private__.getR2L=p.getR2L=function(){return Ie};var tt,Re=p.__private__.setZoomMode=function(q){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(q))Me=q;else if(isNaN(q)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(q)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+q+'" is not recognized.');Me=q}else Me=parseInt(q,10)};p.__private__.getZoomMode=function(){return Me};var bt,Nt=p.__private__.setPageMode=function(q){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(q)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+q+'" is not recognized.');tt=q};p.__private__.getPageMode=function(){return tt};var Ut=p.__private__.setLayoutMode=function(q){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(q)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+q+'" is not recognized.');bt=q};p.__private__.getLayoutMode=function(){return bt},p.__private__.setDisplayMode=p.setDisplayMode=function(q,oe,we){return Re(q),Ut(oe),Nt(we),this};var Mt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(q){if(Object.keys(Mt).indexOf(q)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Mt[q]},p.__private__.getDocumentProperties=function(){return Mt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(q){for(var oe in Mt)Mt.hasOwnProperty(oe)&&q[oe]&&(Mt[oe]=q[oe]);return this},p.__private__.setDocumentProperty=function(q,oe){if(Object.keys(Mt).indexOf(q)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Mt[q]=oe};var pt,_e,Oe,ct,xt,Ze={},nt={},gt=[],mt={},Ht={},vt={},At={},Xt=null,Ft=0,Rt=[],Ta=new US(p),Kl=t.hotfixes||[],is={},ri={},si=[],Gt=function q(oe,we,Ce,Fe,at,ot){if(!(this instanceof q))return new q(oe,we,Ce,Fe,at,ot);isNaN(oe)&&(oe=1),isNaN(we)&&(we=0),isNaN(Ce)&&(Ce=0),isNaN(Fe)&&(Fe=1),isNaN(at)&&(at=0),isNaN(ot)&&(ot=0),this._matrix=[oe,we,Ce,Fe,at,ot]};Object.defineProperty(Gt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(q){this._matrix[0]=q}}),Object.defineProperty(Gt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(q){this._matrix[1]=q}}),Object.defineProperty(Gt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(q){this._matrix[2]=q}}),Object.defineProperty(Gt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(q){this._matrix[3]=q}}),Object.defineProperty(Gt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(q){this._matrix[4]=q}}),Object.defineProperty(Gt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(q){this._matrix[5]=q}}),Object.defineProperty(Gt.prototype,"a",{get:function(){return this._matrix[0]},set:function(q){this._matrix[0]=q}}),Object.defineProperty(Gt.prototype,"b",{get:function(){return this._matrix[1]},set:function(q){this._matrix[1]=q}}),Object.defineProperty(Gt.prototype,"c",{get:function(){return this._matrix[2]},set:function(q){this._matrix[2]=q}}),Object.defineProperty(Gt.prototype,"d",{get:function(){return this._matrix[3]},set:function(q){this._matrix[3]=q}}),Object.defineProperty(Gt.prototype,"e",{get:function(){return this._matrix[4]},set:function(q){this._matrix[4]=q}}),Object.defineProperty(Gt.prototype,"f",{get:function(){return this._matrix[5]},set:function(q){this._matrix[5]=q}}),Object.defineProperty(Gt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Gt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Gt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Gt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Gt.prototype.join=function(q){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(q)},Gt.prototype.multiply=function(q){var oe=q.sx*this.sx+q.shy*this.shx,we=q.sx*this.shy+q.shy*this.sy,Ce=q.shx*this.sx+q.sy*this.shx,Fe=q.shx*this.shy+q.sy*this.sy,at=q.tx*this.sx+q.ty*this.shx+this.tx,ot=q.tx*this.shy+q.ty*this.sy+this.ty;return new Gt(oe,we,Ce,Fe,at,ot)},Gt.prototype.decompose=function(){var q=this.sx,oe=this.shy,we=this.shx,Ce=this.sy,Fe=this.tx,at=this.ty,ot=Math.sqrt(q*q+oe*oe),kt=(q/=ot)*we+(oe/=ot)*Ce;we-=q*kt,Ce-=oe*kt;var Dt=Math.sqrt(we*we+Ce*Ce);return kt/=Dt,q*(Ce/=Dt)<oe*(we/=Dt)&&(q=-q,oe=-oe,kt=-kt,ot=-ot),{scale:new Gt(ot,0,0,Dt,0,0),translate:new Gt(1,0,0,1,Fe,at),rotate:new Gt(q,oe,-oe,q,0,0),skew:new Gt(1,0,kt,1,0,0)}},Gt.prototype.toString=function(q){return this.join(" ")},Gt.prototype.inversed=function(){var q=this.sx,oe=this.shy,we=this.shx,Ce=this.sy,Fe=this.tx,at=this.ty,ot=1/(q*Ce-oe*we),kt=Ce*ot,Dt=-oe*ot,Jt=-we*ot,oa=q*ot;return new Gt(kt,Dt,Jt,oa,-kt*Fe-Jt*at,-Dt*Fe-oa*at)},Gt.prototype.applyToPoint=function(q){var oe=q.x*this.sx+q.y*this.shx+this.tx,we=q.x*this.shy+q.y*this.sy+this.ty;return new Bo(oe,we)},Gt.prototype.applyToRectangle=function(q){var oe=this.applyToPoint(q),we=this.applyToPoint(new Bo(q.x+q.w,q.y+q.h));return new zo(oe.x,oe.y,we.x-oe.x,we.y-oe.y)},Gt.prototype.clone=function(){var q=this.sx,oe=this.shy,we=this.shx,Ce=this.sy,Fe=this.tx,at=this.ty;return new Gt(q,oe,we,Ce,Fe,at)},p.Matrix=Gt;var ks=p.matrixMult=function(q,oe){return oe.multiply(q)},lr=new Gt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=lr;var Qa=function(q,oe){if(!Ht[q]){var we=(oe instanceof Lu?"Sh":"P")+(Object.keys(mt).length+1).toString(10);oe.id=we,Ht[q]=we,mt[we]=oe,Ta.publish("addPattern",oe)}};p.ShadingPattern=Lu,p.TilingPattern=dx,p.addShadingPattern=function(q,oe){return A("addShadingPattern()"),Qa(q,oe),this},p.beginTilingPattern=function(q){A("beginTilingPattern()"),bl(q.boundingBox[0],q.boundingBox[1],q.boundingBox[2]-q.boundingBox[0],q.boundingBox[3]-q.boundingBox[1],q.matrix)},p.endTilingPattern=function(q,oe){A("endTilingPattern()"),oe.stream=ge[J].join(`
`),Qa(q,oe),Ta.publish("endTilingPattern",oe),si.pop().restore()};var fs,or=p.__private__.newObject=function(){var q=ls();return ps(q,!0),q},ls=p.__private__.newObjectDeferred=function(){return he++,pe[he]=function(){return te},he},ps=function(q,oe){return oe=typeof oe=="boolean"&&oe,pe[q]=te,oe&&re(q+" 0 obj"),q},Xl=p.__private__.newAdditionalObject=function(){var q={objId:ls(),content:""};return ue.push(q),q},Rn=ls(),vn=ls(),qs=p.__private__.decodeColorString=function(q){var oe=q.split(" ");if(oe.length!==2||oe[1]!=="g"&&oe[1]!=="G")oe.length!==5||oe[4]!=="k"&&oe[4]!=="K"||(oe=[(1-oe[0])*(1-oe[3]),(1-oe[1])*(1-oe[3]),(1-oe[2])*(1-oe[3]),"r"]);else{var we=parseFloat(oe[0]);oe=[we,we,we,"r"]}for(var Ce="#",Fe=0;Fe<3;Fe++)Ce+=("0"+Math.floor(255*parseFloat(oe[Fe])).toString(16)).slice(-2);return Ce},Cs=p.__private__.encodeColorString=function(q){var oe;typeof q=="string"&&(q={ch1:q});var we=q.ch1,Ce=q.ch2,Fe=q.ch3,at=q.ch4,ot=q.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof we=="string"&&we.charAt(0)!=="#"){var kt=new X9(we);if(kt.ok)we=kt.toHex();else if(!/^\d*\.?\d*$/.test(we))throw new Error('Invalid color "'+we+'" passed to jsPDF.encodeColorString.')}if(typeof we=="string"&&/^#[0-9A-Fa-f]{3}$/.test(we)&&(we="#"+we[1]+we[1]+we[2]+we[2]+we[3]+we[3]),typeof we=="string"&&/^#[0-9A-Fa-f]{6}$/.test(we)){var Dt=parseInt(we.substr(1),16);we=Dt>>16&255,Ce=Dt>>8&255,Fe=255&Dt}if(Ce===void 0||at===void 0&&we===Ce&&Ce===Fe)oe=typeof we=="string"?we+" "+ot[0]:q.precision===2?M(we/255)+" "+ot[0]:D(we/255)+" "+ot[0];else if(at===void 0||Ka(at)==="object"){if(at&&!isNaN(at.a)&&at.a===0)return["1.","1.","1.",ot[1]].join(" ");oe=typeof we=="string"?[we,Ce,Fe,ot[1]].join(" "):q.precision===2?[M(we/255),M(Ce/255),M(Fe/255),ot[1]].join(" "):[D(we/255),D(Ce/255),D(Fe/255),ot[1]].join(" ")}else oe=typeof we=="string"?[we,Ce,Fe,at,ot[2]].join(" "):q.precision===2?[M(we),M(Ce),M(Fe),M(at),ot[2]].join(" "):[D(we),D(Ce),D(Fe),D(at),ot[2]].join(" ");return oe},Us=p.__private__.getFilters=function(){return o},gs=p.__private__.putStream=function(q){var oe=(q=q||{}).data||"",we=q.filters||Us(),Ce=q.alreadyAppliedFilters||[],Fe=q.addLength1||!1,at=oe.length,ot=q.objectId,kt=function(Ir){return Ir};if(x!==null&&ot===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");x!==null&&(kt=Aa.encryptor(ot,0));var Dt={};we===!0&&(we=["FlateEncode"]);var Jt=q.additionalKeyValues||[],oa=(Dt=$t.API.processDataByFilters!==void 0?$t.API.processDataByFilters(oe,we):{data:oe,reverseChain:[]}).reverseChain+(Array.isArray(Ce)?Ce.join(" "):Ce.toString());if(Dt.data.length!==0&&(Jt.push({key:"Length",value:Dt.data.length}),Fe===!0&&Jt.push({key:"Length1",value:at})),oa.length!=0)if(oa.split("/").length-1==1)Jt.push({key:"Filter",value:oa});else{Jt.push({key:"Filter",value:"["+oa+"]"});for(var Sa=0;Sa<Jt.length;Sa+=1)if(Jt[Sa].key==="DecodeParms"){for(var mr=[],Fr=0;Fr<Dt.reverseChain.split("/").length-1;Fr+=1)mr.push("null");mr.push(Jt[Sa].value),Jt[Sa].value="["+mr.join(" ")+"]"}}re("<<");for(var qa=0;qa<Jt.length;qa++)re("/"+Jt[qa].key+" "+Jt[qa].value);re(">>"),Dt.data.length!==0&&(re("stream"),re(kt(Dt.data)),re("endstream"))},cr=p.__private__.putPage=function(q){var oe=q.number,we=q.data,Ce=q.objId,Fe=q.contentsObjId;ps(Ce,!0),re("<</Type /Page"),re("/Parent "+q.rootDictionaryObjId+" 0 R"),re("/Resources "+q.resourceDictionaryObjId+" 0 R"),re("/MediaBox ["+parseFloat(E(q.mediaBox.bottomLeftX))+" "+parseFloat(E(q.mediaBox.bottomLeftY))+" "+E(q.mediaBox.topRightX)+" "+E(q.mediaBox.topRightY)+"]"),q.cropBox!==null&&re("/CropBox ["+E(q.cropBox.bottomLeftX)+" "+E(q.cropBox.bottomLeftY)+" "+E(q.cropBox.topRightX)+" "+E(q.cropBox.topRightY)+"]"),q.bleedBox!==null&&re("/BleedBox ["+E(q.bleedBox.bottomLeftX)+" "+E(q.bleedBox.bottomLeftY)+" "+E(q.bleedBox.topRightX)+" "+E(q.bleedBox.topRightY)+"]"),q.trimBox!==null&&re("/TrimBox ["+E(q.trimBox.bottomLeftX)+" "+E(q.trimBox.bottomLeftY)+" "+E(q.trimBox.topRightX)+" "+E(q.trimBox.topRightY)+"]"),q.artBox!==null&&re("/ArtBox ["+E(q.artBox.bottomLeftX)+" "+E(q.artBox.bottomLeftY)+" "+E(q.artBox.topRightX)+" "+E(q.artBox.topRightY)+"]"),typeof q.userUnit=="number"&&q.userUnit!==1&&re("/UserUnit "+q.userUnit),Ta.publish("putPage",{objId:Ce,pageContext:Rt[oe],pageNumber:oe,page:we}),re("/Contents "+Fe+" 0 R"),re(">>"),re("endobj");var at=we.join(`
`);return $===k&&(at+=`
Q`),ps(Fe,!0),gs({data:at,filters:Us(),objectId:Fe}),re("endobj"),Ce},ni=p.__private__.putPages=function(){var q,oe,we=[];for(q=1;q<=Ft;q++)Rt[q].objId=ls(),Rt[q].contentsObjId=ls();for(q=1;q<=Ft;q++)we.push(cr({number:q,data:ge[q],objId:Rt[q].objId,contentsObjId:Rt[q].contentsObjId,mediaBox:Rt[q].mediaBox,cropBox:Rt[q].cropBox,bleedBox:Rt[q].bleedBox,trimBox:Rt[q].trimBox,artBox:Rt[q].artBox,userUnit:Rt[q].userUnit,rootDictionaryObjId:Rn,resourceDictionaryObjId:vn}));ps(Rn,!0),re("<</Type /Pages");var Ce="/Kids [";for(oe=0;oe<Ft;oe++)Ce+=we[oe]+" 0 R ";re(Ce+"]"),re("/Count "+Ft),re(">>"),re("endobj"),Ta.publish("postPutPages")},Jl=function(q){Ta.publish("putFont",{font:q,out:re,newObject:or,putStream:gs}),q.isAlreadyPutted!==!0&&(q.objectNumber=or(),re("<<"),re("/Type /Font"),re("/BaseFont /"+lx(q.postScriptName)),re("/Subtype /Type1"),typeof q.encoding=="string"&&re("/Encoding /"+q.encoding),re("/FirstChar 32"),re("/LastChar 255"),re(">>"),re("endobj"))},$n=function(q){q.objectNumber=or();var oe=[];oe.push({key:"Type",value:"/XObject"}),oe.push({key:"Subtype",value:"/Form"}),oe.push({key:"BBox",value:"["+[E(q.x),E(q.y),E(q.x+q.width),E(q.y+q.height)].join(" ")+"]"}),oe.push({key:"Matrix",value:"["+q.matrix.toString()+"]"});var we=q.pages[1].join(`
`);gs({data:we,additionalKeyValues:oe,objectId:q.objectNumber}),re("endobj")},ii=function(q,oe){oe||(oe=21);var we=or(),Ce=function(ot,kt){var Dt,Jt=[],oa=1/(kt-1);for(Dt=0;Dt<1;Dt+=oa)Jt.push(Dt);if(Jt.push(1),ot[0].offset!=0){var Sa={offset:0,color:ot[0].color};ot.unshift(Sa)}if(ot[ot.length-1].offset!=1){var mr={offset:1,color:ot[ot.length-1].color};ot.push(mr)}for(var Fr="",qa=0,Ir=0;Ir<Jt.length;Ir++){for(Dt=Jt[Ir];Dt>ot[qa+1].offset;)qa++;var Br=ot[qa].offset,ys=(Dt-Br)/(ot[qa+1].offset-Br),vl=ot[qa].color,ro=ot[qa+1].color;Fr+=ee(Math.round((1-ys)*vl[0]+ys*ro[0]).toString(16))+ee(Math.round((1-ys)*vl[1]+ys*ro[1]).toString(16))+ee(Math.round((1-ys)*vl[2]+ys*ro[2]).toString(16))}return Fr.trim()}(q.colors,oe),Fe=[];Fe.push({key:"FunctionType",value:"0"}),Fe.push({key:"Domain",value:"[0.0 1.0]"}),Fe.push({key:"Size",value:"["+oe+"]"}),Fe.push({key:"BitsPerSample",value:"8"}),Fe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gs({data:Ce,additionalKeyValues:Fe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:we}),re("endobj"),q.objectNumber=or(),re("<< /ShadingType "+q.type),re("/ColorSpace /DeviceRGB");var at="/Coords ["+E(parseFloat(q.coords[0]))+" "+E(parseFloat(q.coords[1]))+" ";q.type===2?at+=E(parseFloat(q.coords[2]))+" "+E(parseFloat(q.coords[3])):at+=E(parseFloat(q.coords[2]))+" "+E(parseFloat(q.coords[3]))+" "+E(parseFloat(q.coords[4]))+" "+E(parseFloat(q.coords[5])),re(at+="]"),q.matrix&&re("/Matrix ["+q.matrix.toString()+"]"),re("/Function "+we+" 0 R"),re("/Extend [true true]"),re(">>"),re("endobj")},Lc=function(q,oe){var we=ls(),Ce=or();oe.push({resourcesOid:we,objectOid:Ce}),q.objectNumber=Ce;var Fe=[];Fe.push({key:"Type",value:"/Pattern"}),Fe.push({key:"PatternType",value:"1"}),Fe.push({key:"PaintType",value:"1"}),Fe.push({key:"TilingType",value:"1"}),Fe.push({key:"BBox",value:"["+q.boundingBox.map(E).join(" ")+"]"}),Fe.push({key:"XStep",value:E(q.xStep)}),Fe.push({key:"YStep",value:E(q.yStep)}),Fe.push({key:"Resources",value:we+" 0 R"}),q.matrix&&Fe.push({key:"Matrix",value:"["+q.matrix.toString()+"]"}),gs({data:q.stream,additionalKeyValues:Fe,objectId:q.objectNumber}),re("endobj")},pm=function(q){for(var oe in q.objectNumber=or(),re("<<"),q)switch(oe){case"opacity":re("/ca "+M(q[oe]));break;case"stroke-opacity":re("/CA "+M(q[oe]))}re(">>"),re("endobj")},Mc=function(q){ps(q.resourcesOid,!0),re("<<"),re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var oe in re("/Font <<"),Ze)Ze.hasOwnProperty(oe)&&(f===!1||f===!0&&b.hasOwnProperty(oe))&&re("/"+oe+" "+Ze[oe].objectNumber+" 0 R");re(">>")}(),function(){if(Object.keys(mt).length>0){for(var oe in re("/Shading <<"),mt)mt.hasOwnProperty(oe)&&mt[oe]instanceof Lu&&mt[oe].objectNumber>=0&&re("/"+oe+" "+mt[oe].objectNumber+" 0 R");Ta.publish("putShadingPatternDict"),re(">>")}}(),function(oe){if(Object.keys(mt).length>0){for(var we in re("/Pattern <<"),mt)mt.hasOwnProperty(we)&&mt[we]instanceof p.TilingPattern&&mt[we].objectNumber>=0&&mt[we].objectNumber<oe&&re("/"+we+" "+mt[we].objectNumber+" 0 R");Ta.publish("putTilingPatternDict"),re(">>")}}(q.objectOid),function(){if(Object.keys(vt).length>0){var oe;for(oe in re("/ExtGState <<"),vt)vt.hasOwnProperty(oe)&&vt[oe].objectNumber>=0&&re("/"+oe+" "+vt[oe].objectNumber+" 0 R");Ta.publish("putGStateDict"),re(">>")}}(),function(){for(var oe in re("/XObject <<"),is)is.hasOwnProperty(oe)&&is[oe].objectNumber>=0&&re("/"+oe+" "+is[oe].objectNumber+" 0 R");Ta.publish("putXobjectDict"),re(">>")}(),re(">>"),re("endobj")},gm=function(q){nt[q.fontName]=nt[q.fontName]||{},nt[q.fontName][q.fontStyle]=q.id},Mo=function(q,oe,we,Ce,Fe){var at={id:"F"+(Object.keys(Ze).length+1).toString(10),postScriptName:q,fontName:oe,fontStyle:we,encoding:Ce,isStandardFont:Fe||!1,metadata:{}};return Ta.publish("addFont",{font:at,instance:this}),Ze[at.id]=at,gm(at),at.id},Hs=p.__private__.pdfEscape=p.pdfEscape=function(q,oe){return function(we,Ce){var Fe,at,ot,kt,Dt,Jt,oa,Sa,mr;if(ot=(Ce=Ce||{}).sourceEncoding||"Unicode",Dt=Ce.outputEncoding,(Ce.autoencode||Dt)&&Ze[pt].metadata&&Ze[pt].metadata[ot]&&Ze[pt].metadata[ot].encoding&&(kt=Ze[pt].metadata[ot].encoding,!Dt&&Ze[pt].encoding&&(Dt=Ze[pt].encoding),!Dt&&kt.codePages&&(Dt=kt.codePages[0]),typeof Dt=="string"&&(Dt=kt[Dt]),Dt)){for(oa=!1,Jt=[],Fe=0,at=we.length;Fe<at;Fe++)(Sa=Dt[we.charCodeAt(Fe)])?Jt.push(String.fromCharCode(Sa)):Jt.push(we[Fe]),Jt[Fe].charCodeAt(0)>>8&&(oa=!0);we=Jt.join("")}for(Fe=we.length;oa===void 0&&Fe!==0;)we.charCodeAt(Fe-1)>>8&&(oa=!0),Fe--;if(!oa)return we;for(Jt=Ce.noBOM?[]:[254,255],Fe=0,at=we.length;Fe<at;Fe++){if((mr=(Sa=we.charCodeAt(Fe))>>8)>>8)throw new Error("Character at position "+Fe+" of string '"+we+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Jt.push(mr),Jt.push(Sa-(mr<<8))}return String.fromCharCode.apply(void 0,Jt)}(q,oe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},jn=p.__private__.beginPage=function(q){ge[++Ft]=[],Rt[Ft]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(q[0]),topRightY:Number(q[1])}},fl(Ft),ke(ge[J])},Rc=function(q,oe){var we,Ce,Fe;switch(r=oe||r,typeof q=="string"&&(we=w(q.toLowerCase()),Array.isArray(we)&&(Ce=we[0],Fe=we[1])),Array.isArray(q)&&(Ce=q[0]*_e,Fe=q[1]*_e),isNaN(Ce)&&(Ce=n[0],Fe=n[1]),(Ce>14400||Fe>14400)&&(rr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ce=Math.min(14400,Ce),Fe=Math.min(14400,Fe)),n=[Ce,Fe],r.substr(0,1)){case"l":Fe>Ce&&(n=[Fe,Ce]);break;case"p":Ce>Fe&&(n=[Fe,Ce])}jn(n),su(Ri),re(gl),di!==0&&re(di+" J"),to!==0&&re(to+" j"),Ta.publish("addPage",{pageNumber:Ft})},$c=function(q){q>0&&q<=Ft&&(ge.splice(q,1),Rt.splice(q,1),Ft--,J>Ft&&(J=Ft),this.setPage(J))},fl=function(q){q>0&&q<=Ft&&(J=q)},Fc=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return ge.length-1},Ic=function(q,oe,we){var Ce,Fe=void 0;return we=we||{},q=q!==void 0?q:Ze[pt].fontName,oe=oe!==void 0?oe:Ze[pt].fontStyle,Ce=q.toLowerCase(),nt[Ce]!==void 0&&nt[Ce][oe]!==void 0?Fe=nt[Ce][oe]:nt[q]!==void 0&&nt[q][oe]!==void 0?Fe=nt[q][oe]:we.disableWarning===!1&&rr.warn("Unable to look up font label for font '"+q+"', '"+oe+"'. Refer to getFontList() for available fonts."),Fe||we.noFallback||(Fe=nt.times[oe])==null&&(Fe=nt.times.normal),Fe},Bc=p.__private__.putInfo=function(){var q=or(),oe=function(Ce){return Ce};for(var we in x!==null&&(oe=Aa.encryptor(q,0)),re("<<"),re("/Producer ("+Hs(oe("jsPDF "+$t.version))+")"),Mt)Mt.hasOwnProperty(we)&&Mt[we]&&re("/"+we.substr(0,1).toUpperCase()+we.substr(1)+" ("+Hs(oe(Mt[we]))+")");re("/CreationDate ("+Hs(oe(H))+")"),re(">>"),re("endobj")},ym=p.__private__.putCatalog=function(q){var oe=(q=q||{}).rootDictionaryObjId||Rn;switch(or(),re("<<"),re("/Type /Catalog"),re("/Pages "+oe+" 0 R"),Me||(Me="fullwidth"),Me){case"fullwidth":re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":re("/OpenAction [3 0 R /Fit]");break;case"original":re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var we=""+Me;we.substr(we.length-1)==="%"&&(Me=parseInt(Me)/100),typeof Me=="number"&&re("/OpenAction [3 0 R /XYZ null null "+M(Me)+"]")}switch(bt||(bt="continuous"),bt){case"continuous":re("/PageLayout /OneColumn");break;case"single":re("/PageLayout /SinglePage");break;case"two":case"twoleft":re("/PageLayout /TwoColumnLeft");break;case"tworight":re("/PageLayout /TwoColumnRight")}tt&&re("/PageMode /"+tt),Ta.publish("putCatalog"),re(">>"),re("endobj")},Pa=p.__private__.putTrailer=function(){re("trailer"),re("<<"),re("/Size "+(he+1)),re("/Root "+he+" 0 R"),re("/Info "+(he-1)+" 0 R"),x!==null&&re("/Encrypt "+Aa.oid+" 0 R"),re("/ID [ <"+B+"> <"+B+"> ]"),re(">>")},Zd=p.__private__.putHeader=function(){re("%PDF-"+v),re("%")},bm=p.__private__.putXRef=function(){var q="0000000000";re("xref"),re("0 "+(he+1)),re("0000000000 65535 f ");for(var oe=1;oe<=he;oe++)typeof pe[oe]=="function"?re((q+pe[oe]()).slice(-10)+" 00000 n "):pe[oe]!==void 0?re((q+pe[oe]).slice(-10)+" 00000 n "):re("0000000000 00000 n ")},Fn=p.__private__.buildDocument=function(){var q;he=0,te=0,se=[],pe=[],ue=[],Rn=ls(),vn=ls(),ke(se),Ta.publish("buildDocument"),Zd(),ni(),function(){Ta.publish("putAdditionalObjects");for(var we=0;we<ue.length;we++){var Ce=ue[we];ps(Ce.objId,!0),re(Ce.content),re("endobj")}Ta.publish("postPutAdditionalObjects")}(),q=[],function(){for(var we in Ze)Ze.hasOwnProperty(we)&&(f===!1||f===!0&&b.hasOwnProperty(we))&&Jl(Ze[we])}(),function(){var we;for(we in vt)vt.hasOwnProperty(we)&&pm(vt[we])}(),function(){for(var we in is)is.hasOwnProperty(we)&&$n(is[we])}(),function(we){var Ce;for(Ce in mt)mt.hasOwnProperty(Ce)&&(mt[Ce]instanceof Lu?ii(mt[Ce]):mt[Ce]instanceof dx&&Lc(mt[Ce],we))}(q),Ta.publish("putResources"),q.forEach(Mc),Mc({resourcesOid:vn,objectOid:Number.MAX_SAFE_INTEGER}),Ta.publish("postPutResources"),x!==null&&(Aa.oid=or(),re("<<"),re("/Filter /Standard"),re("/V "+Aa.v),re("/R "+Aa.r),re("/U <"+Aa.toHexString(Aa.U)+">"),re("/O <"+Aa.toHexString(Aa.O)+">"),re("/P "+Aa.P),re(">>"),re("endobj")),Bc(),ym();var oe=te;return bm(),Pa(),re("startxref"),re(""+oe),re("%%EOF"),ke(ge[J]),se.join(`
`)},Zl=p.__private__.getBlob=function(q){return new Blob([Se(q)],{type:"application/pdf"})},on=p.output=p.__private__.output=(fs=function(q,oe){switch(typeof(oe=oe||{})=="string"?oe={filename:oe}:oe.filename=oe.filename||"generated.pdf",q){case void 0:return Fn();case"save":p.save(oe.filename);break;case"arraybuffer":return Se(Fn());case"blob":return Zl(Fn());case"bloburi":case"bloburl":if(na.URL!==void 0&&typeof na.URL.createObjectURL=="function")return na.URL&&na.URL.createObjectURL(Zl(Fn()))||void 0;rr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var we="",Ce=Fn();try{we=BS(Ce)}catch{we=BS(unescape(encodeURIComponent(Ce)))}return"data:application/pdf;filename="+oe.filename+";base64,"+we;case"pdfobjectnewwindow":if(Object.prototype.toString.call(na)==="[object Window]"){var Fe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",at=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';oe.pdfObjectUrl&&(Fe=oe.pdfObjectUrl,at="");var ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Fe+'"'+at+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(oe)+");<\/script></body></html>",kt=na.open();return kt!==null&&kt.document.write(ot),kt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(na)==="[object Window]"){var Dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(oe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+oe.filename+'" width="500px" height="400px" /></body></html>',Jt=na.open();if(Jt!==null){Jt.document.write(Dt);var oa=this;Jt.document.documentElement.querySelector("#pdfViewer").onload=function(){Jt.document.title=oe.filename,Jt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(oa.output("bloburl"))}}return Jt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(na)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Sa='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",oe)+'"></iframe></body></html>',mr=na.open();if(mr!==null&&(mr.document.write(Sa),mr.document.title=oe.filename),mr||typeof safari>"u")return mr;break;case"datauri":case"dataurl":return na.document.location.href=this.output("datauristring",oe);default:return null}},fs.foo=function(){try{return fs.apply(this,arguments)}catch(we){var q=we.stack||"";~q.indexOf(" at ")&&(q=q.split(" at ")[1]);var oe="Error in function "+q.split(`
`)[0].split("<")[0]+": "+we.message;if(!na.console)throw new Error(oe);na.console.error(oe,we),na.alert&&alert(oe)}},fs.foo.bar=fs,fs.foo),Ro=function(q){return Array.isArray(Kl)===!0&&Kl.indexOf(q)>-1};switch(s){case"pt":_e=1;break;case"mm":_e=72/25.4;break;case"cm":_e=72/2.54;break;case"in":_e=72;break;case"px":_e=Ro("px_scaling")==1?.75:96/72;break;case"pc":case"em":_e=12;break;case"ex":_e=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);_e=s}var Aa=null;ye(),K();var $o=p.__private__.getPageInfo=p.getPageInfo=function(q){if(isNaN(q)||q%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Rt[q].objId,pageNumber:q,pageContext:Rt[q]}},vm=p.__private__.getPageInfoByObjId=function(q){if(isNaN(q)||q%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var oe in Rt)if(Rt[oe].objId===q)break;return $o(oe)},Qd=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Rt[J].objId,pageNumber:J,pageContext:Rt[J]}};p.addPage=function(){return Rc.apply(this,arguments),this},p.setPage=function(){return fl.apply(this,arguments),ke.call(this,ge[J]),this},p.insertPage=function(q){return this.addPage(),this.movePage(J,q),this},p.movePage=function(q,oe){var we,Ce;if(q>oe){we=ge[q],Ce=Rt[q];for(var Fe=q;Fe>oe;Fe--)ge[Fe]=ge[Fe-1],Rt[Fe]=Rt[Fe-1];ge[oe]=we,Rt[oe]=Ce,this.setPage(oe)}else if(q<oe){we=ge[q],Ce=Rt[q];for(var at=q;at<oe;at++)ge[at]=ge[at+1],Rt[at]=Rt[at+1];ge[oe]=we,Rt[oe]=Ce,this.setPage(oe)}return this},p.deletePage=function(){return $c.apply(this,arguments),this},p.__private__.text=p.text=function(q,oe,we,Ce,Fe){var at,ot,kt,Dt,Jt,oa,Sa,mr,Fr,qa=(Ce=Ce||{}).scope||this;if(typeof q=="number"&&typeof oe=="number"&&(typeof we=="string"||Array.isArray(we))){var Ir=we;we=oe,oe=q,q=Ir}if(arguments[3]instanceof Gt==0?(kt=arguments[4],Dt=arguments[5],Ka(Sa=arguments[3])==="object"&&Sa!==null||(typeof kt=="string"&&(Dt=kt,kt=null),typeof Sa=="string"&&(Dt=Sa,Sa=null),typeof Sa=="number"&&(kt=Sa,Sa=null),Ce={flags:Sa,angle:kt,align:Dt})):(A("The transform parameter of text() with a Matrix value"),Fr=Fe),isNaN(oe)||isNaN(we)||q==null)throw new Error("Invalid arguments passed to jsPDF.text");if(q.length===0)return qa;var Br,ys="",vl=typeof Ce.lineHeightFactor=="number"?Ce.lineHeightFactor:In,ro=qa.internal.scaleFactor;function eh(Oa){return Oa=Oa.split("	").join(Array(Ce.TabLen||9).join(" ")),Hs(Oa,Sa)}function wm(Oa){for(var Ua,er=Oa.concat(),xr=[],Ki=er.length;Ki--;)typeof(Ua=er.shift())=="string"?xr.push(Ua):Array.isArray(Oa)&&(Ua.length===1||Ua[1]===void 0&&Ua[2]===void 0)?xr.push(Ua[0]):xr.push([Ua[0],Ua[1],Ua[2]]);return xr}function qo(Oa,Ua){var er;if(typeof Oa=="string")er=Ua(Oa)[0];else if(Array.isArray(Oa)){for(var xr,Ki,Un=Oa.concat(),Vs=[],Ho=Un.length;Ho--;)typeof(xr=Un.shift())=="string"?Vs.push(Ua(xr)[0]):Array.isArray(xr)&&typeof xr[0]=="string"&&(Ki=Ua(xr[0],xr[1],xr[2]),Vs.push([Ki[0],Ki[1],Ki[2]]));er=Vs}return er}var mi=!1,lu=!0;if(typeof q=="string")mi=!0;else if(Array.isArray(q)){var so=q.concat();ot=[];for(var Bn,os=so.length;os--;)(typeof(Bn=so.shift())!="string"||Array.isArray(Bn)&&typeof Bn[0]!="string")&&(lu=!1);mi=lu}if(mi===!1)throw new Error('Type of text must be string or Array. "'+q+'" is not recognized.');typeof q=="string"&&(q=q.match(/[\r?\n]/)?q.split(/\r\n|\r|\n/g):[q]);var zi=ve/qa.internal.scaleFactor,qi=zi*(vl-1);switch(Ce.baseline){case"bottom":we-=qi;break;case"top":we+=zi-qi;break;case"hanging":we+=zi-2*qi;break;case"middle":we+=zi/2-qi}if((oa=Ce.maxWidth||0)>0&&(typeof q=="string"?q=qa.splitTextToSize(q,oa):Object.prototype.toString.call(q)==="[object Array]"&&(q=q.reduce(function(Oa,Ua){return Oa.concat(qa.splitTextToSize(Ua,oa))},[]))),at={text:q,x:oe,y:we,options:Ce,mutex:{pdfEscape:Hs,activeFontKey:pt,fonts:Ze,activeFontSize:ve}},Ta.publish("preProcessText",at),q=at.text,kt=(Ce=at.options).angle,Fr instanceof Gt==0&&kt&&typeof kt=="number"){kt*=Math.PI/180,Ce.rotationDirection===0&&(kt=-kt),$===k&&(kt=-kt);var Uo=Math.cos(kt),Hc=Math.sin(kt);Fr=new Gt(Uo,Hc,-Hc,Uo,0,0)}else kt&&kt instanceof Gt&&(Fr=kt);$!==k||Fr||(Fr=lr),(Jt=Ce.charSpace||Io)!==void 0&&(ys+=E(I(Jt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(mr=Ce.horizontalScale)!==void 0&&(ys+=E(100*mr)+` Tz
`),Ce.lang;var Ts=-1,jl=Ce.renderingMode!==void 0?Ce.renderingMode:Ce.stroke,Yc=qa.internal.getCurrentPageInfo().pageContext;switch(jl){case 0:case!1:case"fill":Ts=0;break;case 1:case!0:case"stroke":Ts=1;break;case 2:case"fillThenStroke":Ts=2;break;case 3:case"invisible":Ts=3;break;case 4:case"fillAndAddForClipping":Ts=4;break;case 5:case"strokeAndAddPathForClipping":Ts=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ts=6;break;case 7:case"addToPathForClipping":Ts=7}var Sm=Yc.usedRenderingMode!==void 0?Yc.usedRenderingMode:-1;Ts!==-1?ys+=Ts+` Tr
`:Sm!==-1&&(ys+=`0 Tr
`),Ts!==-1&&(Yc.usedRenderingMode=Ts),Dt=Ce.align||"left";var Gr,Sn=ve*vl,Gc=qa.internal.pageSize.getWidth(),Nl=Ze[pt];Jt=Ce.charSpace||Io,oa=Ce.maxWidth||0,Sa=Object.assign({autoencode:!0,noBOM:!0},Ce.flags);var zn=[],Vc=function(Oa){return qa.getStringUnitWidth(Oa,{font:Nl,charSpace:Jt,fontSize:ve,doKerning:!1})*ve/ro};if(Object.prototype.toString.call(q)==="[object Array]"){var bs;ot=wm(q),Dt!=="left"&&(Gr=ot.map(Vc));var Ys,no=0;if(Dt==="right"){oe-=Gr[0],q=[],os=ot.length;for(var qn=0;qn<os;qn++)qn===0?(Ys=ci(oe),bs=Nn(we)):(Ys=I(no-Gr[qn]),bs=-Sn),q.push([ot[qn],Ys,bs]),no=Gr[qn]}else if(Dt==="center"){oe-=Gr[0]/2,q=[],os=ot.length;for(var Ui=0;Ui<os;Ui++)Ui===0?(Ys=ci(oe),bs=Nn(we)):(Ys=I((no-Gr[Ui])/2),bs=-Sn),q.push([ot[Ui],Ys,bs]),no=Gr[Ui]}else if(Dt==="left"){q=[],os=ot.length;for(var Wc=0;Wc<os;Wc++)q.push(ot[Wc])}else if(Dt==="justify"&&Nl.encoding==="Identity-H"){q=[],os=ot.length,oa=oa!==0?oa:Gc;for(var wl=0,yr=0;yr<os;yr++)if(bs=yr===0?Nn(we):-Sn,Ys=yr===0?ci(oe):wl,yr<os-1){var th=I((oa-Gr[yr])/(ot[yr].split(" ").length-1)),Hi=ot[yr].split(" ");q.push([Hi[0]+" ",Ys,bs]),wl=0;for(var Yi=1;Yi<Hi.length;Yi++){var Kc=(Vc(Hi[Yi-1]+" "+Hi[Yi])-Vc(Hi[Yi]))*ro+th;Yi==Hi.length-1?q.push([Hi[Yi],Kc,0]):q.push([Hi[Yi]+" ",Kc,0]),wl-=Kc}}else q.push([ot[yr],Ys,bs]);q.push(["",wl,0])}else{if(Dt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(q=[],os=ot.length,oa=oa!==0?oa:Gc,yr=0;yr<os;yr++)bs=yr===0?Nn(we):-Sn,Ys=yr===0?ci(oe):0,yr<os-1?zn.push(E(I((oa-Gr[yr])/(ot[yr].split(" ").length-1)))):zn.push(0),q.push([ot[yr],Ys,bs])}}(typeof Ce.R2L=="boolean"?Ce.R2L:Ie)===!0&&(q=qo(q,function(Oa,Ua,er){return[Oa.split("").reverse().join(""),Ua,er]})),at={text:q,x:oe,y:we,options:Ce,mutex:{pdfEscape:Hs,activeFontKey:pt,fonts:Ze,activeFontSize:ve}},Ta.publish("postProcessText",at),q=at.text,Br=at.mutex.isHex||!1;var ou=Ze[pt].encoding;ou!=="WinAnsiEncoding"&&ou!=="StandardEncoding"||(q=qo(q,function(Oa,Ua,er){return[eh(Oa),Ua,er]})),ot=wm(q),q=[];for(var cs,Gi,io,lo=Array.isArray(ot[0])?1:0,Vi="",Xc=function(Oa,Ua,er){var xr="";return er instanceof Gt?(er=typeof Ce.angle=="number"?ks(er,new Gt(1,0,0,1,Oa,Ua)):ks(new Gt(1,0,0,1,Oa,Ua),er),$===k&&(er=ks(new Gt(1,0,0,-1,0,0),er)),xr=er.join(" ")+` Tm
`):xr=E(Oa)+" "+E(Ua)+` Td
`,xr},Gs=0;Gs<ot.length;Gs++){switch(Vi="",lo){case 1:io=(Br?"<":"(")+ot[Gs][0]+(Br?">":")"),cs=parseFloat(ot[Gs][1]),Gi=parseFloat(ot[Gs][2]);break;case 0:io=(Br?"<":"(")+ot[Gs]+(Br?">":")"),cs=ci(oe),Gi=Nn(we)}zn!==void 0&&zn[Gs]!==void 0&&(Vi=zn[Gs]+` Tw
`),Gs===0?q.push(Vi+Xc(cs,Gi,Fr)+io):lo===0?q.push(Vi+io):lo===1&&q.push(Vi+Xc(cs,Gi,Fr)+io)}q=lo===0?q.join(` Tj
T* `):q.join(` Tj
`),q+=` Tj
`;var Wi=`BT
/`;return Wi+=pt+" "+ve+` Tf
`,Wi+=E(ve*vl)+` TL
`,Wi+=Fi+`
`,Wi+=ys,Wi+=q,re(Wi+="ET"),b[pt]=!0,qa};var Ql=p.__private__.clip=p.clip=function(q){return re(q==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Ql("evenodd")},p.__private__.discardPath=p.discardPath=function(){return re("n"),this};var li=p.__private__.isValidStyle=function(q){var oe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(q)!==-1&&(oe=!0),oe};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(q){return li(q)&&(m=q),this};var eu=p.__private__.getStyle=p.getStyle=function(q){var oe=m;switch(q){case"D":case"S":oe="S";break;case"F":oe="f";break;case"FD":case"DF":oe="B";break;case"f":case"f*":case"B":case"B*":oe=q}return oe},pl=p.close=function(){return re("h"),this};p.stroke=function(){return re("S"),this},p.fill=function(q){return eo("f",q),this},p.fillEvenOdd=function(q){return eo("f*",q),this},p.fillStroke=function(q){return eo("B",q),this},p.fillStrokeEvenOdd=function(q){return eo("B*",q),this};var eo=function(q,oe){Ka(oe)==="object"?tu(oe,q):re(q)},zc=function(q){q===null||$===k&&q===void 0||(q=eu(q),re(q))};function jm(q,oe,we,Ce,Fe){var at=new dx(oe||this.boundingBox,we||this.xStep,Ce||this.yStep,this.gState,Fe||this.matrix);at.stream=this.stream;var ot=q+"$$"+this.cloneIndex+++"$$";return Qa(ot,at),at}var tu=function(q,oe){var we=Ht[q.key],Ce=mt[we];if(Ce instanceof Lu)re("q"),re(Qx(oe)),Ce.gState&&p.setGState(Ce.gState),re(q.matrix.toString()+" cm"),re("/"+we+" sh"),re("Q");else if(Ce instanceof dx){var Fe=new Gt(1,0,0,-1,0,wn());q.matrix&&(Fe=Fe.multiply(q.matrix||lr),we=jm.call(Ce,q.key,q.boundingBox,q.xStep,q.yStep,Fe).id),re("q"),re("/Pattern cs"),re("/"+we+" scn"),Ce.gState&&p.setGState(Ce.gState),re(oe),re("Q")}},Qx=function(q){switch(q){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},au=p.moveTo=function(q,oe){return re(E(I(q))+" "+E(V(oe))+" m"),this},Li=p.lineTo=function(q,oe){return re(E(I(q))+" "+E(V(oe))+" l"),this},Mi=p.curveTo=function(q,oe,we,Ce,Fe,at){return re([E(I(q)),E(V(oe)),E(I(we)),E(V(Ce)),E(I(Fe)),E(V(at)),"c"].join(" ")),this};p.__private__.line=p.line=function(q,oe,we,Ce,Fe){if(isNaN(q)||isNaN(oe)||isNaN(we)||isNaN(Ce)||!li(Fe))throw new Error("Invalid arguments passed to jsPDF.line");return $===P?this.lines([[we-q,Ce-oe]],q,oe,[1,1],Fe||"S"):this.lines([[we-q,Ce-oe]],q,oe,[1,1]).stroke()},p.__private__.lines=p.lines=function(q,oe,we,Ce,Fe,at){var ot,kt,Dt,Jt,oa,Sa,mr,Fr,qa,Ir,Br,ys;if(typeof q=="number"&&(ys=we,we=oe,oe=q,q=ys),Ce=Ce||[1,1],at=at||!1,isNaN(oe)||isNaN(we)||!Array.isArray(q)||!Array.isArray(Ce)||!li(Fe)||typeof at!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(au(oe,we),ot=Ce[0],kt=Ce[1],Jt=q.length,Ir=oe,Br=we,Dt=0;Dt<Jt;Dt++)(oa=q[Dt]).length===2?(Ir=oa[0]*ot+Ir,Br=oa[1]*kt+Br,Li(Ir,Br)):(Sa=oa[0]*ot+Ir,mr=oa[1]*kt+Br,Fr=oa[2]*ot+Ir,qa=oa[3]*kt+Br,Ir=oa[4]*ot+Ir,Br=oa[5]*kt+Br,Mi(Sa,mr,Fr,qa,Ir,Br));return at&&pl(),zc(Fe),this},p.path=function(q){for(var oe=0;oe<q.length;oe++){var we=q[oe],Ce=we.c;switch(we.op){case"m":au(Ce[0],Ce[1]);break;case"l":Li(Ce[0],Ce[1]);break;case"c":Mi.apply(this,Ce);break;case"h":pl()}}return this},p.__private__.rect=p.rect=function(q,oe,we,Ce,Fe){if(isNaN(q)||isNaN(oe)||isNaN(we)||isNaN(Ce)||!li(Fe))throw new Error("Invalid arguments passed to jsPDF.rect");return $===P&&(Ce=-Ce),re([E(I(q)),E(V(oe)),E(I(we)),E(I(Ce)),"re"].join(" ")),zc(Fe),this},p.__private__.triangle=p.triangle=function(q,oe,we,Ce,Fe,at,ot){if(isNaN(q)||isNaN(oe)||isNaN(we)||isNaN(Ce)||isNaN(Fe)||isNaN(at)||!li(ot))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[we-q,Ce-oe],[Fe-we,at-Ce],[q-Fe,oe-at]],q,oe,[1,1],ot,!0),this},p.__private__.roundedRect=p.roundedRect=function(q,oe,we,Ce,Fe,at,ot){if(isNaN(q)||isNaN(oe)||isNaN(we)||isNaN(Ce)||isNaN(Fe)||isNaN(at)||!li(ot))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var kt=4/3*(Math.SQRT2-1);return Fe=Math.min(Fe,.5*we),at=Math.min(at,.5*Ce),this.lines([[we-2*Fe,0],[Fe*kt,0,Fe,at-at*kt,Fe,at],[0,Ce-2*at],[0,at*kt,-Fe*kt,at,-Fe,at],[2*Fe-we,0],[-Fe*kt,0,-Fe,-at*kt,-Fe,-at],[0,2*at-Ce],[0,-at*kt,Fe*kt,-at,Fe,-at]],q+Fe,oe,[1,1],ot,!0),this},p.__private__.ellipse=p.ellipse=function(q,oe,we,Ce,Fe){if(isNaN(q)||isNaN(oe)||isNaN(we)||isNaN(Ce)||!li(Fe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var at=4/3*(Math.SQRT2-1)*we,ot=4/3*(Math.SQRT2-1)*Ce;return au(q+we,oe),Mi(q+we,oe-ot,q+at,oe-Ce,q,oe-Ce),Mi(q-at,oe-Ce,q-we,oe-ot,q-we,oe),Mi(q-we,oe+ot,q-at,oe+Ce,q,oe+Ce),Mi(q+at,oe+Ce,q+we,oe+ot,q+we,oe),zc(Fe),this},p.__private__.circle=p.circle=function(q,oe,we,Ce){if(isNaN(q)||isNaN(oe)||isNaN(we)||!li(Ce))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(q,oe,we,we,Ce)},p.setFont=function(q,oe,we){return we&&(oe=_(oe,we)),pt=Ic(q,oe,{disableWarning:!1}),this};var ru=p.__private__.getFont=p.getFont=function(){return Ze[Ic.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var q,oe,we={};for(q in nt)if(nt.hasOwnProperty(q))for(oe in we[q]=[],nt[q])nt[q].hasOwnProperty(oe)&&we[q].push(oe);return we},p.addFont=function(q,oe,we,Ce,Fe){var at=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&at.indexOf(arguments[3])!==-1?Fe=arguments[3]:arguments[3]&&at.indexOf(arguments[3])==-1&&(we=_(we,Ce)),Mo.call(this,q,oe,we,Fe=Fe||"Identity-H")};var In,Ri=t.lineWidth||.200025,Qt=p.__private__.getLineWidth=p.getLineWidth=function(){return Ri},su=p.__private__.setLineWidth=p.setLineWidth=function(q){return Ri=q,re(E(I(q))+" w"),this};p.__private__.setLineDash=$t.API.setLineDash=$t.API.setLineDashPattern=function(q,oe){if(q=q||[],oe=oe||0,isNaN(oe)||!Array.isArray(q))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return q=q.map(function(we){return E(I(we))}).join(" "),oe=E(I(oe)),re("["+q+"] "+oe+" d"),this};var Nm=p.__private__.getLineHeight=p.getLineHeight=function(){return ve*In};p.__private__.getLineHeight=p.getLineHeight=function(){return ve*In};var Fo=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(q){return typeof(q=q||1.15)=="number"&&(In=q),this},oi=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return In};Fo(t.lineHeight);var ci=p.__private__.getHorizontalCoordinate=function(q){return I(q)},Nn=p.__private__.getVerticalCoordinate=function(q){return $===k?q:Rt[J].mediaBox.topRightY-Rt[J].mediaBox.bottomLeftY-I(q)},$i=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(q){return E(ci(q))},nu=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(q){return E(Nn(q))},gl=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return qs(gl)},p.__private__.setStrokeColor=p.setDrawColor=function(q,oe,we,Ce){return gl=Cs({ch1:q,ch2:oe,ch3:we,ch4:Ce,pdfColorType:"draw",precision:2}),re(gl),this};var qc=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return qs(qc)},p.__private__.setFillColor=p.setFillColor=function(q,oe,we,Ce){return qc=Cs({ch1:q,ch2:oe,ch3:we,ch4:Ce,pdfColorType:"fill",precision:2}),re(qc),this};var Fi=t.textColor||"0 g",yl=p.__private__.getTextColor=p.getTextColor=function(){return qs(Fi)};p.__private__.setTextColor=p.setTextColor=function(q,oe,we,Ce){return Fi=Cs({ch1:q,ch2:oe,ch3:we,ch4:Ce,pdfColorType:"text",precision:3}),this};var Io=t.charSpace,Es=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Io||0)};p.__private__.setCharSpace=p.setCharSpace=function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Io=q,this};var di=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(q){var oe=p.CapJoinStyles[q];if(oe===void 0)throw new Error("Line cap style of '"+q+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return di=oe,re(oe+" J"),this};var to=0;p.__private__.setLineJoin=p.setLineJoin=function(q){var oe=p.CapJoinStyles[q];if(oe===void 0)throw new Error("Line join style of '"+q+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return to=oe,re(oe+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(q){if(q=q||0,isNaN(q))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return re(E(I(q))+" M"),this},p.GState=pg,p.setGState=function(q){(q=typeof q=="string"?vt[At[q]]:ui(null,q)).equals(Xt)||(re("/"+q.id+" gs"),Xt=q)};var ui=function(q,oe){if(!q||!At[q]){var we=!1;for(var Ce in vt)if(vt.hasOwnProperty(Ce)&&vt[Ce].equals(oe)){we=!0;break}if(we)oe=vt[Ce];else{var Fe="GS"+(Object.keys(vt).length+1).toString(10);vt[Fe]=oe,oe.id=Fe}return q&&(At[q]=oe.id),Ta.publish("addGState",oe),oe}};p.addGState=function(q,oe){return ui(q,oe),this},p.saveGraphicsState=function(){return re("q"),gt.push({key:pt,size:ve,color:Fi}),this},p.restoreGraphicsState=function(){re("Q");var q=gt.pop();return pt=q.key,ve=q.size,Fi=q.color,Xt=null,this},p.setCurrentTransformationMatrix=function(q){return re(q.toString()+" cm"),this},p.comment=function(q){return re("#"+q),this};var Bo=function(q,oe){var we=q||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return we},set:function(at){isNaN(at)||(we=parseFloat(at))}});var Ce=oe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ce},set:function(at){isNaN(at)||(Ce=parseFloat(at))}});var Fe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Fe},set:function(at){Fe=at.toString()}}),this},zo=function(q,oe,we,Ce){Bo.call(this,q,oe),this.type="rect";var Fe=we||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Fe},set:function(ot){isNaN(ot)||(Fe=parseFloat(ot))}});var at=Ce||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return at},set:function(ot){isNaN(ot)||(at=parseFloat(ot))}}),this},ao=function(){this.page=Ft,this.currentPage=J,this.pages=ge.slice(0),this.pagesContext=Rt.slice(0),this.x=Oe,this.y=ct,this.matrix=xt,this.width=Uc(J),this.height=wn(J),this.outputDestination=De,this.id="",this.objectNumber=-1};ao.prototype.restore=function(){Ft=this.page,J=this.currentPage,Rt=this.pagesContext,ge=this.pages,Oe=this.x,ct=this.y,xt=this.matrix,iu(J,this.width),Bi(J,this.height),De=this.outputDestination};var bl=function(q,oe,we,Ce,Fe){si.push(new ao),Ft=J=0,ge=[],Oe=q,ct=oe,xt=Fe,jn([we,Ce])};for(var Ii in p.beginFormObject=function(q,oe,we,Ce,Fe){return bl(q,oe,we,Ce,Fe),this},p.endFormObject=function(q){return function(oe){if(ri[oe])si.pop().restore();else{var we=new ao,Ce="Xo"+(Object.keys(is).length+1).toString(10);we.id=Ce,ri[oe]=Ce,is[Ce]=we,Ta.publish("addFormObject",we),si.pop().restore()}}(q),this},p.doFormObject=function(q,oe){var we=is[ri[q]];return re("q"),re(oe.toString()+" cm"),re("/"+we.id+" Do"),re("Q"),this},p.getFormObject=function(q){var oe=is[ri[q]];return{x:oe.x,y:oe.y,width:oe.width,height:oe.height,matrix:oe.matrix}},p.save=function(q,oe){return q=q||"generated.pdf",(oe=oe||{}).returnPromise=oe.returnPromise||!1,oe.returnPromise===!1?(Tu(Zl(Fn()),q),typeof Tu.unload=="function"&&na.setTimeout&&setTimeout(Tu.unload,911),this):new Promise(function(we,Ce){try{var Fe=Tu(Zl(Fn()),q);typeof Tu.unload=="function"&&na.setTimeout&&setTimeout(Tu.unload,911),we(Fe)}catch(at){Ce(at.message)}})},$t.API)$t.API.hasOwnProperty(Ii)&&(Ii==="events"&&$t.API.events.length?function(q,oe){var we,Ce,Fe;for(Fe=oe.length-1;Fe!==-1;Fe--)we=oe[Fe][0],Ce=oe[Fe][1],q.subscribe.apply(q,[we].concat(typeof Ce=="function"?[Ce]:Ce))}(Ta,$t.API.events):p[Ii]=$t.API[Ii]);var Uc=p.getPageWidth=function(q){return(Rt[q=q||J].mediaBox.topRightX-Rt[q].mediaBox.bottomLeftX)/_e},iu=p.setPageWidth=function(q,oe){Rt[q].mediaBox.topRightX=oe*_e+Rt[q].mediaBox.bottomLeftX},wn=p.getPageHeight=function(q){return(Rt[q=q||J].mediaBox.topRightY-Rt[q].mediaBox.bottomLeftY)/_e},Bi=p.setPageHeight=function(q,oe){Rt[q].mediaBox.topRightY=oe*_e+Rt[q].mediaBox.bottomLeftY};return p.internal={pdfEscape:Hs,getStyle:eu,getFont:ru,getFontSize:et,getCharSpace:Es,getTextColor:yl,getLineHeight:Nm,getLineHeightFactor:oi,getLineWidth:Qt,write:Ee,getHorizontalCoordinate:ci,getVerticalCoordinate:Nn,getCoordinateString:$i,getVerticalCoordinateString:nu,collections:{},newObject:or,newAdditionalObject:Xl,newObjectDeferred:ls,newObjectDeferredBegin:ps,getFilters:Us,putStream:gs,events:Ta,scaleFactor:_e,pageSize:{getWidth:function(){return Uc(J)},setWidth:function(q){iu(J,q)},getHeight:function(){return wn(J)},setHeight:function(q){Bi(J,q)}},encryptionOptions:x,encryption:Aa,getEncryptor:function(q){return x!==null?Aa.encryptor(q,0):function(oe){return oe}},output:on,getNumberOfPages:Fc,pages:ge,out:re,f2:M,f3:D,getPageInfo:$o,getPageInfoByObjId:vm,getCurrentPageInfo:Qd,getPDFVersion:j,Point:Bo,Rectangle:zo,Matrix:Gt,hasHotfix:Ro},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Uc(J)},set:function(q){iu(J,q)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return wn(J)},set:function(q){Bi(J,q)},enumerable:!0,configurable:!0}),(function(q){for(var oe=0,we=Ge.length;oe<we;oe++){var Ce=Mo.call(this,q[oe][0],q[oe][1],q[oe][2],Ge[oe][3],!0);f===!1&&(b[Ce]=!0);var Fe=q[oe][0].split("-");gm({id:Ce,fontName:Fe[0],fontStyle:Fe[1]||""})}Ta.publish("addFonts",{fonts:Ze,dictionary:nt})}).call(p,Ge),pt="F1",Rc(n,r),Ta.publish("initialized"),p}ix.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},ix.prototype.toHexString=function(t){return t.split("").map(function(a){return("0"+(255&a.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ix.prototype.hexToBytes=function(t){for(var a=[],r=0;r<t.length;r+=2)a.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return a.join("")},ix.prototype.processOwnerPassword=function(t,a){return fj(hj(a).substr(0,5),t)},ix.prototype.encryptor=function(t,a){var r=hj(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&a,a>>8&255)).substr(0,10);return function(s){return fj(r,s)}},pg.prototype.equals=function(t){var a,r="id,objectNumber,equals";if(!t||Ka(t)!==Ka(this))return!1;var s=0;for(a in this)if(!(r.indexOf(a)>=0)){if(this.hasOwnProperty(a)&&!t.hasOwnProperty(a)||this[a]!==t[a])return!1;s++}for(a in t)t.hasOwnProperty(a)&&r.indexOf(a)<0&&s--;return s===0},$t.API={events:[]},$t.version="3.0.2";var Ur=$t.API,PN=1,um=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ax=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ca=function(t){return t.toFixed(2)},wd=function(t){return t.toFixed(5)};Ur.__acroform__={};var ei=function(t,a){t.prototype=Object.create(a.prototype),t.prototype.constructor=t},HS=function(t){return t*PN},vo=function(t){var a=new eE,r=Tt.internal.getHeight(t)||0,s=Tt.internal.getWidth(t)||0;return a.BBox=[0,0,Number(ca(s)),Number(ca(r))],a},eG=Ur.__acroform__.setBit=function(t,a){if(t=t||0,a=a||0,isNaN(t)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<a},tG=Ur.__acroform__.clearBit=function(t,a){if(t=t||0,a=a||0,isNaN(t)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<a)},aG=Ur.__acroform__.getBit=function(t,a){if(isNaN(t)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<a?1:0},ts=Ur.__acroform__.getBitForPdf=function(t,a){if(isNaN(t)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return aG(t,a-1)},as=Ur.__acroform__.setBitForPdf=function(t,a){if(isNaN(t)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return eG(t,a-1)},rs=Ur.__acroform__.clearBitForPdf=function(t,a){if(isNaN(t)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return tG(t,a-1)},rG=Ur.__acroform__.calculateCoordinates=function(t,a){var r=a.internal.getHorizontalCoordinate,s=a.internal.getVerticalCoordinate,n=t[0],i=t[1],o=t[2],d=t[3],u={};return u.lowerLeft_X=r(n)||0,u.lowerLeft_Y=s(i+d)||0,u.upperRight_X=r(n+o)||0,u.upperRight_Y=s(i)||0,[Number(ca(u.lowerLeft_X)),Number(ca(u.lowerLeft_Y)),Number(ca(u.upperRight_X)),Number(ca(u.upperRight_Y))]},sG=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var a=[],r=t._V||t.DV,s=pj(t,r),n=t.scope.internal.getFont(t.fontName,t.fontStyle).id;a.push("/Tx BMC"),a.push("q"),a.push("BT"),a.push(t.scope.__private__.encodeColorString(t.color)),a.push("/"+n+" "+ca(s.fontSize)+" Tf"),a.push("1 0 0 1 0 0 Tm"),a.push(s.text),a.push("ET"),a.push("Q"),a.push("EMC");var i=vo(t);return i.scope=t.scope,i.stream=a.join(`
`),i}},pj=function(t,a){var r=t.fontSize===0?t.maxFontSize:t.fontSize,s={text:"",fontSize:""},n=(a=(a=a.substr(0,1)=="("?a.substr(1):a).substr(a.length-1)==")"?a.substr(0,a.length-1):a).split(" ");n=t.multiline?n.map(function(M){return M.split(`
`)}):n.map(function(M){return[M]});var i=r,o=Tt.internal.getHeight(t)||0;o=o<0?-o:o;var d=Tt.internal.getWidth(t)||0;d=d<0?-d:d;var u=function(M,D,I){if(M+1<n.length){var V=D+" "+n[M+1][0];return jp(V,t,I).width<=d-4}return!1};i++;e:for(;i>0;){a="",i--;var m,x,f=jp("3",t,i).height,b=t.multiline?o-i:(o-f)/2,p=b+=2,v=0,j=0,N=0;if(i<=0){a=`(...) Tj
`,a+="% Width of Text: "+jp(a,t,i=12).width+", FieldWidth:"+d+`
`;break}for(var w="",P=0,k=0;k<n.length;k++)if(n.hasOwnProperty(k)){var $=!1;if(n[k].length!==1&&N!==n[k].length-1){if((f+2)*(P+2)+2>o)continue e;w+=n[k][N],$=!0,j=k,k--}else{w=(w+=n[k][N]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var O=parseInt(k),L=u(O,w,i),_=k>=n.length-1;if(L&&!_){w+=" ",N=0;continue}if(L||_){if(_)j=O;else if(t.multiline&&(f+2)*(P+2)+2>o)continue e}else{if(!t.multiline||(f+2)*(P+2)+2>o)continue e;j=O}}for(var E="",A=v;A<=j;A++){var z=n[A];if(t.multiline){if(A===j){E+=z[N]+" ",N=(N+1)%z.length;continue}if(A===v){E+=z[z.length-1]+" ";continue}}E+=z[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,x=jp(E,t,i).width,t.textAlign){case"right":m=d-x-2;break;case"center":m=(d-x)/2;break;default:m=2}a+=ca(m)+" "+ca(p)+` Td
`,a+="("+um(E)+`) Tj
`,a+=-ca(m)+` 0 Td
`,p=-(i+2),x=0,v=$?j:j+1,P++,w=""}break}return s.text=a,s.fontSize=i,s},jp=function(t,a,r){var s=a.scope.internal.getFont(a.fontName,a.fontStyle),n=a.scope.getStringUnitWidth(t,{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:a.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:n}},nG={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},iG=function(t,a){var r={type:"reference",object:t};a.internal.getPageInfo(t.page).pageContext.annotations.find(function(s){return s.type===r.type&&s.object===r.object})===void 0&&a.internal.getPageInfo(t.page).pageContext.annotations.push(r)},lG=function(t,a){if(a.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Gl.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(nG)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");PN=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new tE,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in s)if(s.hasOwnProperty(n)){var i=s[n];i.objId=void 0,i.hasAnnotation&&iG(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(s,n){var i=!s;for(var o in s||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(o)){var d=s[o],u=[],m=d.Rect;if(d.Rect&&(d.Rect=rG(d.Rect,n)),n.internal.newObjectDeferredBegin(d.objId,!0),d.DA=Tt.createDefaultAppearanceStream(d),Ka(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(u=d.getKeyValueListForStream()),d.Rect=m,d.hasAppearanceStream&&!d.appearanceStreamContent){var x=sG(d);u.push({key:"AP",value:"<</N "+x+">>"}),n.internal.acroformPlugin.xForms.push(x)}if(d.appearanceStreamContent){var f="";for(var b in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(b)){var p=d.appearanceStreamContent[b];if(f+="/"+b+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var v=p[o];typeof v=="function"&&(v=v.call(n,d)),f+="/"+o+" "+v+" ",n.internal.acroformPlugin.xForms.indexOf(v)>=0||n.internal.acroformPlugin.xForms.push(v)}}else typeof(v=p)=="function"&&(v=v.call(n,d)),f+="/"+o+" "+v,n.internal.acroformPlugin.xForms.indexOf(v)>=0||n.internal.acroformPlugin.xForms.push(v);f+=">>"}u.push({key:"AP",value:`<<
`+f+">>"})}n.internal.putStream({additionalKeyValues:u,objectId:d.objId}),n.internal.out("endobj")}i&&function(j,N){for(var w in j)if(j.hasOwnProperty(w)){var P=w,k=j[w];N.internal.newObjectDeferredBegin(k.objId,!0),Ka(k)==="object"&&typeof k.putStream=="function"&&k.putStream(),delete j[P]}}(n.internal.acroformPlugin.xForms,n)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},Q9=Ur.__acroform__.arrayToPdfArray=function(t,a,r){var s=function(o){return o};if(Array.isArray(t)){for(var n="[",i=0;i<t.length;i++)switch(i!==0&&(n+=" "),Ka(t[i])){case"boolean":case"number":case"object":n+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(a!==void 0&&r&&(s=r.internal.getEncryptor(a)),n+="("+um(s(t[i].toString()))+")"):n+=t[i].toString()}return n+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Gv=function(t,a,r){var s=function(n){return n};return a!==void 0&&r&&(s=r.internal.getEncryptor(a)),(t=t||"").toString(),"("+um(s(t))+")"},wo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};wo.prototype.toString=function(){return this.objId+" 0 R"},wo.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},wo.prototype.getKeyValueListForStream=function(){var t=[],a=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in a)if(Object.getOwnPropertyDescriptor(this,a[r]).configurable===!1){var s=a[r],n=this[s];n&&(Array.isArray(n)?t.push({key:s,value:Q9(n,this.objId,this.scope)}):n instanceof wo?(n.scope=this.scope,t.push({key:s,value:n.objId+" 0 R"})):typeof n!="function"&&t.push({key:s,value:n}))}return t};var eE=function(){wo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,a=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return a},set:function(r){a=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};ei(eE,wo);var tE=function(){wo.call(this);var t,a=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return a.length>0?a:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return a}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(s){return s};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+um(r(t))+")"}},set:function(r){t=r}})};ei(tE,wo);var Gl=function t(){wo.call(this);var a=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return a},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');a=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ts(a,3)},set:function(w){w?this.F=as(a,3):this.F=rs(a,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');r=w}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(w){s=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(w){s[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(w){s[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(w){s[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(w){s[3]=w}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof gg)return;i="FieldObject"+t.FieldNum++}var w=function(P){return P};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+um(w(i))+")"},set:function(w){i=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(w){i=w}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(w){d=w}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(w){u=w}});var m=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return m===void 0?50/PN:m},set:function(w){m=w}});var x="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return x},set:function(w){x=w}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof gg||this instanceof Hu))return Gv(f,this.objId,this.scope)},set:function(w){w=w.toString(),f=w}});var b=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof $s==0?Gv(b,this.objId,this.scope):b},set:function(w){w=w.toString(),b=this instanceof $s==0?w.substr(0,1)==="("?ax(w.substr(1,w.length-2)):ax(w):w}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof $s==1?ax(b.substr(1,b.length-1)):b},set:function(w){w=w.toString(),b=this instanceof $s==1?"/"+w:w}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof $s==0?Gv(p,this.objId,this.scope):p},set:function(w){w=w.toString(),p=this instanceof $s==0?w.substr(0,1)==="("?ax(w.substr(1,w.length-2)):ax(w):w}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof $s==1?ax(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof $s==1?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(w){w=!!w,j=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(w){v=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,1)},set:function(w){w?this.Ff=as(this.Ff,1):this.Ff=rs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,2)},set:function(w){w?this.Ff=as(this.Ff,2):this.Ff=rs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,3)},set:function(w){w?this.Ff=as(this.Ff,3):this.Ff=rs(this.Ff,3)}});var N=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(N!==null)return N},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');N=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(N){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:N=2;break;case"center":case 1:N=1;break;default:N=0}}})};ei(Gl,wo);var px=function(){Gl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var a=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Q9(a,this.objId,this.scope)},set:function(r){var s,n;n=[],typeof(s=r)=="string"&&(n=function(i,o,d){d||(d=1);for(var u,m=[];u=o.exec(i);)m.push(u[d]);return m}(s,/\((.*?)\)/g)),a=n}}),this.getOptions=function(){return a},this.setOptions=function(r){a=r,this.sort&&a.sort()},this.addOption=function(r){r=(r=r||"").toString(),a.push(r),this.sort&&a.sort()},this.removeOption=function(r,s){for(s=s||!1,r=(r=r||"").toString();a.indexOf(r)!==-1&&(a.splice(a.indexOf(r),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,18)},set:function(r){r?this.Ff=as(this.Ff,18):this.Ff=rs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=as(this.Ff,19):this.Ff=rs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,20)},set:function(r){r?(this.Ff=as(this.Ff,20),a.sort()):this.Ff=rs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,22)},set:function(r){r?this.Ff=as(this.Ff,22):this.Ff=rs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,23)},set:function(r){r?this.Ff=as(this.Ff,23):this.Ff=rs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,27)},set:function(r){r?this.Ff=as(this.Ff,27):this.Ff=rs(this.Ff,27)}}),this.hasAppearanceStream=!1};ei(px,Gl);var gx=function(){px.call(this),this.fontName="helvetica",this.combo=!1};ei(gx,px);var yx=function(){gx.call(this),this.combo=!0};ei(yx,gx);var Xp=function(){yx.call(this),this.edit=!0};ei(Xp,yx);var $s=function(){Gl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,15)},set:function(r){r?this.Ff=as(this.Ff,15):this.Ff=rs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,16)},set:function(r){r?this.Ff=as(this.Ff,16):this.Ff=rs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,17)},set:function(r){r?this.Ff=as(this.Ff,17):this.Ff=rs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,26)},set:function(r){r?this.Ff=as(this.Ff,26):this.Ff=rs(this.Ff,26)}});var t,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(a).length!==0){var s,n=[];for(s in n.push("<<"),a)n.push("/"+s+" ("+um(r(a[s]))+")");return n.push(">>"),n.join(`
`)}},set:function(r){Ka(r)==="object"&&(a=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(r){typeof r=="string"&&(a.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};ei($s,Gl);var Jp=function(){$s.call(this),this.pushButton=!0};ei(Jp,$s);var bx=function(){$s.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(a){t=a!==void 0?a:[]}})};ei(bx,$s);var gg=function(){var t,a;Gl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return a},set:function(n){a=n}});var r,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(d){return d};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),s)o.push("/"+i+" ("+um(n(s[i]))+")");return o.push(">>"),o.join(`
`)},set:function(n){Ka(n)==="object"&&(s=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(n){typeof n=="string"&&(s.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(n){r="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Tt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ei(gg,Gl),bx.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var a in this.Kids)if(this.Kids.hasOwnProperty(a)){var r=this.Kids[a];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},bx.prototype.createOption=function(t){var a=new gg;return a.Parent=this,a.optionName=t,this.Kids.push(a),oG.call(this.scope,a),a};var Zp=function(){$s.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Tt.CheckBox.createAppearanceStream()};ei(Zp,$s);var Hu=function(){Gl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,13)},set:function(a){a?this.Ff=as(this.Ff,13):this.Ff=rs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,21)},set:function(a){a?this.Ff=as(this.Ff,21):this.Ff=rs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,23)},set:function(a){a?this.Ff=as(this.Ff,23):this.Ff=rs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,24)},set:function(a){a?this.Ff=as(this.Ff,24):this.Ff=rs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,25)},set:function(a){a?this.Ff=as(this.Ff,25):this.Ff=rs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,26)},set:function(a){a?this.Ff=as(this.Ff,26):this.Ff=rs(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(a){Number.isInteger(a)&&(t=a)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ei(Hu,Gl);var Qp=function(){Hu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ts(this.Ff,14)},set:function(t){t?this.Ff=as(this.Ff,14):this.Ff=rs(this.Ff,14)}}),this.password=!0};ei(Qp,Hu);var Tt={CheckBox:{createAppearanceStream:function(){return{N:{On:Tt.CheckBox.YesNormal},D:{On:Tt.CheckBox.YesPushDown,Off:Tt.CheckBox.OffPushDown}}},YesPushDown:function(t){var a=vo(t);a.scope=t.scope;var r=[],s=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=pj(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+ca(Tt.internal.getWidth(t))+" "+ca(Tt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+s+" "+ca(i.fontSize)+" Tf "+n),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),a.stream=r.join(`
`),a},YesNormal:function(t){var a=vo(t);a.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),n=[],i=Tt.internal.getHeight(t),o=Tt.internal.getWidth(t),d=pj(t,t.caption);return n.push("1 g"),n.push("0 0 "+ca(o)+" "+ca(i)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+ca(o-1)+" "+ca(i-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+r+" "+ca(d.fontSize)+" Tf "+s),n.push(d.text),n.push("ET"),n.push("Q"),a.stream=n.join(`
`),a},OffPushDown:function(t){var a=vo(t);a.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ca(Tt.internal.getWidth(t))+" "+ca(Tt.internal.getHeight(t))+" re"),r.push("f"),a.stream=r.join(`
`),a}},RadioButton:{Circle:{createAppearanceStream:function(t){var a={D:{Off:Tt.RadioButton.Circle.OffPushDown},N:{}};return a.N[t]=Tt.RadioButton.Circle.YesNormal,a.D[t]=Tt.RadioButton.Circle.YesPushDown,a},getCA:function(){return"l"},YesNormal:function(t){var a=vo(t);a.scope=t.scope;var r=[],s=Tt.internal.getWidth(t)<=Tt.internal.getHeight(t)?Tt.internal.getWidth(t)/4:Tt.internal.getHeight(t)/4;s=Number((.9*s).toFixed(5));var n=Tt.internal.Bezier_C,i=Number((s*n).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+wd(Tt.internal.getWidth(t)/2)+" "+wd(Tt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),a.stream=r.join(`
`),a},YesPushDown:function(t){var a=vo(t);a.scope=t.scope;var r=[],s=Tt.internal.getWidth(t)<=Tt.internal.getHeight(t)?Tt.internal.getWidth(t)/4:Tt.internal.getHeight(t)/4;s=Number((.9*s).toFixed(5));var n=Number((2*s).toFixed(5)),i=Number((n*Tt.internal.Bezier_C).toFixed(5)),o=Number((s*Tt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+wd(Tt.internal.getWidth(t)/2)+" "+wd(Tt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+wd(Tt.internal.getWidth(t)/2)+" "+wd(Tt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),r.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),r.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),r.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),r.push("f"),r.push("Q"),a.stream=r.join(`
`),a},OffPushDown:function(t){var a=vo(t);a.scope=t.scope;var r=[],s=Tt.internal.getWidth(t)<=Tt.internal.getHeight(t)?Tt.internal.getWidth(t)/4:Tt.internal.getHeight(t)/4;s=Number((.9*s).toFixed(5));var n=Number((2*s).toFixed(5)),i=Number((n*Tt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+wd(Tt.internal.getWidth(t)/2)+" "+wd(Tt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),a.stream=r.join(`
`),a}},Cross:{createAppearanceStream:function(t){var a={D:{Off:Tt.RadioButton.Cross.OffPushDown},N:{}};return a.N[t]=Tt.RadioButton.Cross.YesNormal,a.D[t]=Tt.RadioButton.Cross.YesPushDown,a},getCA:function(){return"8"},YesNormal:function(t){var a=vo(t);a.scope=t.scope;var r=[],s=Tt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+ca(Tt.internal.getWidth(t)-2)+" "+ca(Tt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(ca(s.x1.x)+" "+ca(s.x1.y)+" m"),r.push(ca(s.x2.x)+" "+ca(s.x2.y)+" l"),r.push(ca(s.x4.x)+" "+ca(s.x4.y)+" m"),r.push(ca(s.x3.x)+" "+ca(s.x3.y)+" l"),r.push("s"),r.push("Q"),a.stream=r.join(`
`),a},YesPushDown:function(t){var a=vo(t);a.scope=t.scope;var r=Tt.internal.calculateCross(t),s=[];return s.push("0.749023 g"),s.push("0 0 "+ca(Tt.internal.getWidth(t))+" "+ca(Tt.internal.getHeight(t))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+ca(Tt.internal.getWidth(t)-2)+" "+ca(Tt.internal.getHeight(t)-2)+" re"),s.push("W"),s.push("n"),s.push(ca(r.x1.x)+" "+ca(r.x1.y)+" m"),s.push(ca(r.x2.x)+" "+ca(r.x2.y)+" l"),s.push(ca(r.x4.x)+" "+ca(r.x4.y)+" m"),s.push(ca(r.x3.x)+" "+ca(r.x3.y)+" l"),s.push("s"),s.push("Q"),a.stream=s.join(`
`),a},OffPushDown:function(t){var a=vo(t);a.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ca(Tt.internal.getWidth(t))+" "+ca(Tt.internal.getHeight(t))+" re"),r.push("f"),a.stream=r.join(`
`),a}}},createDefaultAppearanceStream:function(t){var a=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+a+" "+t.fontSize+" Tf "+r}};Tt.internal={Bezier_C:.551915024494,calculateCross:function(t){var a=Tt.internal.getWidth(t),r=Tt.internal.getHeight(t),s=Math.min(a,r);return{x1:{x:(a-s)/2,y:(r-s)/2+s},x2:{x:(a-s)/2+s,y:(r-s)/2},x3:{x:(a-s)/2,y:(r-s)/2},x4:{x:(a-s)/2+s,y:(r-s)/2+s}}}},Tt.internal.getWidth=function(t){var a=0;return Ka(t)==="object"&&(a=HS(t.Rect[2])),a},Tt.internal.getHeight=function(t){var a=0;return Ka(t)==="object"&&(a=HS(t.Rect[3])),a};var oG=Ur.addField=function(t){if(lG(this,t),!(t instanceof Gl))throw new Error("Invalid argument passed to jsPDF.addField.");var a;return(a=t).scope.internal.acroformPlugin.printedOut&&(a.scope.internal.acroformPlugin.printedOut=!1,a.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),a.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(a),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Ur.AcroFormChoiceField=px,Ur.AcroFormListBox=gx,Ur.AcroFormComboBox=yx,Ur.AcroFormEditBox=Xp,Ur.AcroFormButton=$s,Ur.AcroFormPushButton=Jp,Ur.AcroFormRadioButton=bx,Ur.AcroFormCheckBox=Zp,Ur.AcroFormTextField=Hu,Ur.AcroFormPasswordField=Qp,Ur.AcroFormAppearance=Tt,Ur.AcroForm={ChoiceField:px,ListBox:gx,ComboBox:yx,EditBox:Xp,Button:$s,PushButton:Jp,RadioButton:bx,CheckBox:Zp,TextField:Hu,PasswordField:Qp,Appearance:Tt},$t.AcroForm={ChoiceField:px,ListBox:gx,ComboBox:yx,EditBox:Xp,Button:$s,PushButton:Jp,RadioButton:bx,CheckBox:Zp,TextField:Hu,PasswordField:Qp,Appearance:Tt};$t.AcroForm;function aE(t){return t.reduce(function(a,r,s){return a[r]=s,a},{})}(function(t){var a="addImage_";t.__addimage__={};var r="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(M,D){var I,V,H,B,W,K=r;if((D=D||r)==="RGBA"||M.data!==void 0&&M.data instanceof Uint8ClampedArray&&"height"in M&&"width"in M)return"RGBA";if(L(M))for(W in s)for(H=s[W],I=0;I<H.length;I+=1){for(B=!0,V=0;V<H[I].length;V+=1)if(H[I][V]!==void 0&&H[I][V]!==M[V]){B=!1;break}if(B===!0){K=W;break}}else for(W in s)for(H=s[W],I=0;I<H.length;I+=1){for(B=!0,V=0;V<H[I].length;V+=1)if(H[I][V]!==void 0&&H[I][V]!==M.charCodeAt(V)){B=!1;break}if(B===!0){K=W;break}}return K===r&&D!==r&&(K=D),K},i=function M(D){for(var I=this.internal.write,V=this.internal.putStream,H=(0,this.internal.getFilters)();H.indexOf("FlateEncode")!==-1;)H.splice(H.indexOf("FlateEncode"),1);D.objectId=this.internal.newObject();var B=[];if(B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Image"}),B.push({key:"Width",value:D.width}),B.push({key:"Height",value:D.height}),D.colorSpace===w.INDEXED?B.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(D.palette.length/3-1)+" "+("sMask"in D&&D.sMask!==void 0?D.objectId+2:D.objectId+1)+" 0 R]"}):(B.push({key:"ColorSpace",value:"/"+D.colorSpace}),D.colorSpace===w.DEVICE_CMYK&&B.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),B.push({key:"BitsPerComponent",value:D.bitsPerComponent}),"decodeParameters"in D&&D.decodeParameters!==void 0&&B.push({key:"DecodeParms",value:"<<"+D.decodeParameters+">>"}),"transparency"in D&&Array.isArray(D.transparency)){for(var W="",K=0,X=D.transparency.length;K<X;K++)W+=D.transparency[K]+" "+D.transparency[K]+" ";B.push({key:"Mask",value:"["+W+"]"})}D.sMask!==void 0&&B.push({key:"SMask",value:D.objectId+1+" 0 R"});var Q=D.filter!==void 0?["/"+D.filter]:void 0;if(V({data:D.data,additionalKeyValues:B,alreadyAppliedFilters:Q,objectId:D.objectId}),I("endobj"),"sMask"in D&&D.sMask!==void 0){var ye=(D.predictor!=null?"/Predictor "+D.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+D.width,Y={width:D.width,height:D.height,colorSpace:"DeviceGray",bitsPerComponent:D.bitsPerComponent,decodeParameters:ye,data:D.sMask};"filter"in D&&(Y.filter=D.filter),M.call(this,Y)}if(D.colorSpace===w.INDEXED){var J=this.internal.newObject();V({data:E(new Uint8Array(D.palette)),objectId:J}),I("endobj")}},o=function(){var M=this.internal.collections[a+"images"];for(var D in M)i.call(this,M[D])},d=function(){var M,D=this.internal.collections[a+"images"],I=this.internal.write;for(var V in D)I("/I"+(M=D[V]).index,M.objectId,"0","R")},u=function(){this.internal.collections[a+"images"]||(this.internal.collections[a+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",d))},m=function(){var M=this.internal.collections[a+"images"];return u.call(this),M},x=function(){return Object.keys(this.internal.collections[a+"images"]).length},f=function(M){return typeof t["process"+M.toUpperCase()]=="function"},b=function(M){return Ka(M)==="object"&&M.nodeType===1},p=function(M,D){if(M.nodeName==="IMG"&&M.hasAttribute("src")){var I=""+M.getAttribute("src");if(I.indexOf("data:image/")===0)return Kp(unescape(I).split("base64,").pop());var V=t.loadFile(I,!0);if(V!==void 0)return V}if(M.nodeName==="CANVAS"){if(M.width===0||M.height===0)throw new Error("Given canvas must have data. Canvas width: "+M.width+", height: "+M.height);var H;switch(D){case"PNG":H="image/png";break;case"WEBP":H="image/webp";break;default:H="image/jpeg"}return Kp(M.toDataURL(H,1).split("base64,").pop())}},v=function(M){var D=this.internal.collections[a+"images"];if(D){for(var I in D)if(M===D[I].alias)return D[I]}},j=function(M,D,I){return M||D||(M=-96,D=-96),M<0&&(M=-1*I.width*72/M/this.internal.scaleFactor),D<0&&(D=-1*I.height*72/D/this.internal.scaleFactor),M===0&&(M=D*I.width/I.height),D===0&&(D=M*I.height/I.width),[M,D]},N=function(M,D,I,V,H,B){var W=j.call(this,I,V,H),K=this.internal.getCoordinateString,X=this.internal.getVerticalCoordinateString,Q=m.call(this);if(I=W[0],V=W[1],Q[H.index]=H,B){B*=Math.PI/180;var ye=Math.cos(B),Y=Math.sin(B),J=function(ee){return ee.toFixed(4)},U=[J(ye),J(Y),J(-1*Y),J(ye),0,0,"cm"]}this.internal.write("q"),B?(this.internal.write([1,"0","0",1,K(M),X(D+V),"cm"].join(" ")),this.internal.write(U.join(" ")),this.internal.write([K(I),"0","0",K(V),"0","0","cm"].join(" "))):this.internal.write([K(I),"0","0",K(V),K(M),X(D+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+H.index+" Do"),this.internal.write("Q")},w=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var P=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=t.__addimage__.sHashCode=function(M){var D,I,V=0;if(typeof M=="string")for(I=M.length,D=0;D<I;D++)V=(V<<5)-V+M.charCodeAt(D),V|=0;else if(L(M))for(I=M.byteLength/2,D=0;D<I;D++)V=(V<<5)-V+M[D],V|=0;return V},$=t.__addimage__.validateStringAsBase64=function(M){(M=M||"").toString().trim();var D=!0;return M.length===0&&(D=!1),M.length%4!=0&&(D=!1),/^[A-Za-z0-9+/]+$/.test(M.substr(0,M.length-2))===!1&&(D=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(M.substr(-2))===!1&&(D=!1),D},O=t.__addimage__.extractImageFromDataUrl=function(M){if(M==null||!(M=M.trim()).startsWith("data:"))return null;var D=M.indexOf(",");return D<0?null:M.substring(0,D).trim().endsWith("base64")?M.substring(D+1):null};t.__addimage__.isArrayBuffer=function(M){return M instanceof ArrayBuffer};var L=t.__addimage__.isArrayBufferView=function(M){return M instanceof Int8Array||M instanceof Uint8Array||M instanceof Uint8ClampedArray||M instanceof Int16Array||M instanceof Uint16Array||M instanceof Int32Array||M instanceof Uint32Array||M instanceof Float32Array||M instanceof Float64Array},_=t.__addimage__.binaryStringToUint8Array=function(M){for(var D=M.length,I=new Uint8Array(D),V=0;V<D;V++)I[V]=M.charCodeAt(V);return I},E=t.__addimage__.arrayBufferToBinaryString=function(M){for(var D="",I=L(M)?M:new Uint8Array(M),V=0;V<I.length;V+=8192)D+=String.fromCharCode.apply(null,I.subarray(V,V+8192));return D};t.addImage=function(){var M,D,I,V,H,B,W,K,X;if(typeof arguments[1]=="number"?(D=r,I=arguments[1],V=arguments[2],H=arguments[3],B=arguments[4],W=arguments[5],K=arguments[6],X=arguments[7]):(D=arguments[1],I=arguments[2],V=arguments[3],H=arguments[4],B=arguments[5],W=arguments[6],K=arguments[7],X=arguments[8]),Ka(M=arguments[0])==="object"&&!b(M)&&"imageData"in M){var Q=M;M=Q.imageData,D=Q.format||D||r,I=Q.x||I||0,V=Q.y||V||0,H=Q.w||Q.width||H,B=Q.h||Q.height||B,W=Q.alias||W,K=Q.compression||K,X=Q.rotation||Q.angle||X}var ye=this.internal.getFilters();if(K===void 0&&ye.indexOf("FlateEncode")!==-1&&(K="SLOW"),isNaN(I)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var Y=A.call(this,M,D,W,K);return N.call(this,I,V,H,B,Y,X),this};var A=function(M,D,I,V){var H,B,W;if(typeof M=="string"&&n(M)===r){M=unescape(M);var K=z(M,!1);(K!==""||(K=t.loadFile(M,!0))!==void 0)&&(M=K)}if(b(M)&&(M=p(M,D)),D=n(M,D),!f(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(((W=I)==null||W.length===0)&&(I=function(X){return typeof X=="string"||L(X)?k(X):L(X.data)?k(X.data):null}(M)),(H=v.call(this,I))||(M instanceof Uint8Array||D==="RGBA"||(B=M,M=_(M)),H=this["process"+D.toUpperCase()](M,x.call(this),I,function(X){return X&&typeof X=="string"&&(X=X.toUpperCase()),X in t.image_compression?X:P.NONE}(V),B)),!H)throw new Error("An unknown error occurred whilst processing the image.");return H},z=t.__addimage__.convertBase64ToBinaryString=function(M,D){D=typeof D!="boolean"||D;var I,V="";if(typeof M=="string"){var H;I=(H=O(M))!==null&&H!==void 0?H:M;try{V=Kp(I)}catch(B){if(D)throw $(I)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+B.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return V};t.getImageProperties=function(M){var D,I,V="";if(b(M)&&(M=p(M)),typeof M=="string"&&n(M)===r&&((V=z(M,!1))===""&&(V=t.loadFile(M)||""),M=V),I=n(M),!f(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(M instanceof Uint8Array||(M=_(M)),!(D=this["process"+I.toUpperCase()](M)))throw new Error("An unknown error occurred whilst processing the image");return D.fileType=I,D}})($t.API),function(t){var a=function(r){if(r!==void 0&&r!="")return!0};$t.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var s,n,i,o=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(r.objId),m=r.pageContext.annotations,x=!1,f=0;f<m.length&&!x;f++)switch((s=m[f]).type){case"link":(a(s.options.url)||a(s.options.pageNumber))&&(x=!0);break;case"reference":case"text":case"freetext":x=!0}if(x!=0){this.internal.write("/Annots [");for(var b=0;b<m.length;b++){s=m[b];var p=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),N=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(j.objId),P=s.title||"Note";i="<</Type /Annot /Subtype /Text "+(n="/Rect ["+o(s.bounds.x)+" "+d(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w)+" "+d(s.bounds.y)+"] ")+"/Contents ("+p(w(s.contents))+")",i+=" /Popup "+N.objId+" 0 R",i+=" /P "+u.objId+" 0 R",i+=" /T ("+p(w(P))+") >>",j.content=i;var k=j.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+o(s.bounds.x+30)+" "+d(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w+30)+" "+d(s.bounds.y)+"] ")+" /Parent "+k,s.open&&(i+=" /Open true"),i+=" >>",N.content=i,this.internal.write(j.objId,"0 R",N.objId,"0 R");break;case"freetext":n="/Rect ["+o(s.bounds.x)+" "+d(s.bounds.y)+" "+o(s.bounds.x+s.bounds.w)+" "+d(s.bounds.y+s.bounds.h)+"] ";var $=s.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+p(v(s.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+$+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(s.options.name){var O=this.annotations._nameMap[s.options.name];s.options.pageNumber=O.page,s.options.top=O.y}else s.options.top||(s.options.top=0);if(n="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",i="",s.options.url)i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+p(v(s.options.url))+") >>";else if(s.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,i+=" /FitV "+s.options.left+"]";break;default:var L=d(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),i+=" /XYZ "+s.options.left+" "+L+" "+s.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var s=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":s.pageContext.annotations.push(r)}},t.link=function(r,s,n,i,o){var d=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:u(r),y:m(s),w:u(r+n),h:m(s+i)},options:o,type:"link"})},t.textWithLink=function(r,s,n,i){var o,d,u=this.getTextWidth(r),m=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){d=i.maxWidth;var x=this.splitTextToSize(r,d).length;o=Math.ceil(m*x)}else d=u,o=m;return this.text(r,s,n,i),n+=.2*m,i.align==="center"&&(s-=u/2),i.align==="right"&&(s-=u),this.link(s,n-m,d,o,i),u},t.getTextWidth=function(r){var s=this.internal.getFontSize();return this.getStringUnitWidth(r)*s/this.internal.scaleFactor}}($t.API),function(t){var a={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(j){return a[j.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},d=t.__arabicParser__.isArabicEndLetter=function(j){return o(j)&&i(j)&&a[j.charCodeAt(0)].length<=2},u=t.__arabicParser__.isArabicAlfLetter=function(j){return o(j)&&n.indexOf(j.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return o(j)&&i(j)&&a[j.charCodeAt(0)].length>=1};var m=t.__arabicParser__.arabicLetterHasFinalForm=function(j){return o(j)&&i(j)&&a[j.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(j){return o(j)&&i(j)&&a[j.charCodeAt(0)].length>=3};var x=t.__arabicParser__.arabicLetterHasMedialForm=function(j){return o(j)&&i(j)&&a[j.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(j){var N=0,w=r,P="",k=0;for(N=0;N<j.length;N+=1)w[j.charCodeAt(N)]!==void 0?(k++,typeof(w=w[j.charCodeAt(N)])=="number"&&(P+=String.fromCharCode(w),w=r,k=0),N===j.length-1&&(w=r,P+=j.charAt(N-(k-1)),N-=k-1,k=0)):(w=r,P+=j.charAt(N-k),N-=k,k=0);return P};t.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&s[j.charCodeAt(0)]!==void 0};var b=t.__arabicParser__.getCorrectForm=function(j,N,w){return o(j)?i(j)===!1?-1:!m(j)||!o(N)&&!o(w)||!o(w)&&d(N)||d(j)&&!o(N)||d(j)&&u(N)||d(j)&&d(N)?0:x(j)&&o(N)&&!d(N)&&o(w)&&m(w)?3:d(j)||!o(w)?1:2:-1},p=function(j){var N=0,w=0,P=0,k="",$="",O="",L=(j=j||"").split("\\s+"),_=[];for(N=0;N<L.length;N+=1){for(_.push(""),w=0;w<L[N].length;w+=1)k=L[N][w],$=L[N][w-1],O=L[N][w+1],o(k)?(P=b(k,$,O),_[N]+=P!==-1?String.fromCharCode(a[k.charCodeAt(0)][P]):k):_[N]+=k;_[N]=f(_[N])}return _.join(" ")},v=t.__arabicParser__.processArabic=t.processArabic=function(){var j,N=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(N)){var P=0;for(w=[],P=0;P<N.length;P+=1)Array.isArray(N[P])?w.push([p(N[P][0]),N[P][1],N[P][2]]):w.push([p(N[P])]);j=w}else j=p(N);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};t.events.push(["preProcessText",v])}($t.API),$t.API.autoPrint=function(t){var a;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){a=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+a+" 0 R")})),this},function(t){var a=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(d){r=d}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(d){s=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(d){n=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(d){i=d}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(d){o=d}}),Object.defineProperty(this,"parentNode",{})};a.prototype.getContext=function(r,s){var n;if((r=r||"2d")!=="2d")return null;for(n in s)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=s[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},a.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new a,this.canvas.pdf=this}])}($t.API),function(t){var a={left:0,top:0,bottom:0,right:0},r=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},a),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(j){u=j}});var m=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return m},set:function(j){m=j}});var x=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return x},set:function(j){x=j}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(j){f=j}});var b=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return b},set:function(j){b=j}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(j){p=j}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(j){v=j}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(u){return s.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},t.getTextDimensions=function(u,m){s.call(this);var x=(m=m||{}).fontSize||this.getFontSize(),f=m.font||this.getFont(),b=m.scaleFactor||this.internal.scaleFactor,p=0,v=0,j=0,N=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var w=m.maxWidth;w>0?typeof u=="string"?u=this.splitTextToSize(u,w):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(k,$){return k.concat(N.splitTextToSize($,w))},[])):u=Array.isArray(u)?u:[u];for(var P=0;P<u.length;P++)p<(j=this.getStringUnitWidth(u[P],{font:f})*x)&&(p=j);return p!==0&&(v=u.length),{w:p/=b,h:Math.max((v*x*this.getLineHeightFactor()-x*(this.getLineHeightFactor()-1))/b,0)}},t.cellAddPage=function(){s.call(this),this.addPage();var u=this.internal.__cell__.margins||a;return this.internal.__cell__.lastCell=new i(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var u;u=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var m=this.internal.__cell__.lastCell,x=this.internal.__cell__.padding,f=this.internal.__cell__.margins||a,b=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return m.lineNumber!==void 0&&(m.lineNumber===u.lineNumber?(u.x=(m.x||0)+(m.width||0),u.y=m.y||0):m.y+m.height+u.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=f.top,p&&b&&(this.printHeaderRow(u.lineNumber,!0),u.y+=b[0].height)):u.y=m.y+m.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,r===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-x,u.y+x,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+x,{align:"center",baseline:"top",maxWidth:u.width-x-x}):this.text(u.text,u.x+x,u.y+x,{align:"left",baseline:"top",maxWidth:u.width-x-x})),this.internal.__cell__.lastCell=u,this};t.table=function(u,m,x,f,b){if(s.call(this),!x)throw new Error("No data for PDF table.");var p,v,j,N,w=[],P=[],k=[],$={},O={},L=[],_=[],E=(b=b||{}).autoSize||!1,A=b.printHeaders!==!1,z=b.css&&b.css["font-size"]!==void 0?16*b.css["font-size"]:b.fontSize||12,M=b.margins||Object.assign({width:this.getPageWidth()},a),D=typeof b.padding=="number"?b.padding:3,I=b.headerBackgroundColor||"#c8c8c8",V=b.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=A,this.internal.__cell__.margins=M,this.internal.__cell__.table_font_size=z,this.internal.__cell__.padding=D,this.internal.__cell__.headerBackgroundColor=I,this.internal.__cell__.headerTextColor=V,this.setFontSize(z),f==null)P=w=Object.keys(x[0]),k=w.map(function(){return"left"});else if(Array.isArray(f)&&Ka(f[0])==="object")for(w=f.map(function(Q){return Q.name}),P=f.map(function(Q){return Q.prompt||Q.name||""}),k=f.map(function(Q){return Q.align||"left"}),p=0;p<f.length;p+=1)O[f[p].name]=.7499990551181103*f[p].width;else Array.isArray(f)&&typeof f[0]=="string"&&(P=w=f,k=w.map(function(){return"left"}));if(E||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<w.length;p+=1){for($[N=w[p]]=x.map(function(Q){return Q[N]}),this.setFont(void 0,"bold"),L.push(this.getTextDimensions(P[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=$[N],this.setFont(void 0,"normal"),j=0;j<v.length;j+=1)L.push(this.getTextDimensions(v[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);O[N]=Math.max.apply(null,L)+D+D,L=[]}if(A){var H={};for(p=0;p<w.length;p+=1)H[w[p]]={},H[w[p]].text=P[p],H[w[p]].align=k[p];var B=d.call(this,H,O);_=w.map(function(Q){return new i(u,m,O[Q],B,H[Q].text,void 0,H[Q].align)}),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var W=f.reduce(function(Q,ye){return Q[ye.name]=ye.align,Q},{});for(p=0;p<x.length;p+=1){"rowStart"in b&&b.rowStart instanceof Function&&b.rowStart({row:p,data:x[p]},this);var K=d.call(this,x[p],O);for(j=0;j<w.length;j+=1){var X=x[p][w[j]];"cellStart"in b&&b.cellStart instanceof Function&&b.cellStart({row:p,col:j,data:X},this),o.call(this,new i(u,m,O[w[j]],K,X,p+2,W[w[j]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=m,this};var d=function(u,m){var x=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,b=this.internal.scaleFactor;return Object.keys(u).map(function(p){var v=u[p];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,m[p]-x-x)},this).map(function(p){return this.getLineHeightFactor()*p.length*f/b+x+x},this).reduce(function(p,v){return Math.max(p,v)},0)};t.setTableHeaderRow=function(u){s.call(this),this.internal.__cell__.tableHeaderRow=u},t.printHeaderRow=function(u,m){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var x;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var b=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){x=this.internal.__cell__.tableHeaderRow[p].clone(),m&&(x.y=this.internal.__cell__.margins.top||0,b.push(x)),x.lineNumber=u;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,x),this.setTextColor(v)}b.length>0&&this.setTableHeaderRow(b),this.setFont(void 0,"normal"),r=!1}}($t.API);var rE={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},sE=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],gj=aE(sE),nE=[100,200,300,400,500,600,700,800,900],cG=aE(nE);function Vv(t){var a=t.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return rE[i=i||"normal"]?i:"normal"}(t.style),s=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(t.weight),n=function(i){return typeof gj[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:a,style:r,weight:s,stretch:n,src:t.src||[],ref:t.ref||{name:a,style:[n,r,s].join(" ")}}}function YS(t,a,r,s){var n;for(n=r;n>=0&&n<a.length;n+=s)if(t[a[n]])return t[a[n]];for(n=r;n>=0&&n<a.length;n-=s)if(t[a[n]])return t[a[n]]}var dG={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},GS={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function VS(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function WS(t){return t.trimLeft()}function uG(t,a){for(var r=0;r<t.length;){if(t.charAt(r)===a)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function mG(t){var a=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return a===null?null:[a[0],t.substring(a[0].length)]}var Np,KS,XS,rx,wp,JS,ZS,QS,Wv=["times"];function e_(t,a,r,s){var n=4,i=a_;switch(s){case $t.API.image_compression.FAST:n=1,i=t_;break;case $t.API.image_compression.MEDIUM:n=6,i=r_;break;case $t.API.image_compression.SLOW:n=9,i=s_}t=function(d,u,m,x){for(var f,b=d.length/u,p=new Uint8Array(d.length+b),v=[xG,t_,a_,r_,s_],j=0;j<b;j+=1){var N=j*u,w=d.subarray(N,N+u);if(x)p.set(x(w,m,f),N+j);else{for(var P=v.length,k=[],$=0;$<P;$+=1)k[$]=v[$](w,m,f);var O=fG(k.concat());p.set(k[O],N+j)}f=w}return p}(t,a,r,i);var o=dj(t,{level:n});return $t.API.__addimage__.arrayBufferToBinaryString(o)}function xG(t){var a=Array.apply([],t);return a.unshift(0),a}function t_(t,a){var r=t.length,s=[];s[0]=1;for(var n=0;n<r;n+=1){var i=t[n-a]||0;s[n+1]=t[n]-i+256&255}return s}function a_(t,a,r){var s=t.length,n=[];n[0]=2;for(var i=0;i<s;i+=1){var o=r&&r[i]||0;n[i+1]=t[i]-o+256&255}return n}function r_(t,a,r){var s=t.length,n=[];n[0]=3;for(var i=0;i<s;i+=1){var o=t[i-a]||0,d=r&&r[i]||0;n[i+1]=t[i]+256-(o+d>>>1)&255}return n}function s_(t,a,r){var s=t.length,n=[];n[0]=4;for(var i=0;i<s;i+=1){var o=hG(t[i-a]||0,r&&r[i]||0,r&&r[i-a]||0);n[i+1]=t[i]-o+256&255}return n}function hG(t,a,r){if(t===a&&a===r)return t;var s=Math.abs(a-r),n=Math.abs(t-r),i=Math.abs(t+a-r-r);return s<=n&&s<=i?t:n<=i?a:r}function fG(t){var a=t.map(function(r){return r.reduce(function(s,n){return s+Math.abs(n)},0)});return a.indexOf(Math.min.apply(null,a))}function Kv(t,a,r){var s=a*r,n=Math.floor(s/8),i=16-(s-8*n+r),o=(1<<r)-1;return iE(t,n)>>i&o}function n_(t,a,r,s){var n=r*s,i=Math.floor(n/8),o=16-(n-8*i+s),d=(1<<s)-1,u=(a&d)<<o;(function(m,x,f){if(x+1<m.byteLength)m.setUint16(x,f,!1);else{var b=f>>8&255;m.setUint8(x,b)}})(t,i,iE(t,i)&~(d<<o)&65535|u)}function iE(t,a){return a+1<t.byteLength?t.getUint16(a,!1):t.getUint8(a)<<8}function pG(t){var a=0;if(t[a++]!==71||t[a++]!==73||t[a++]!==70||t[a++]!==56||(t[a++]+1&253)!=56||t[a++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[a++]|t[a++]<<8,s=t[a++]|t[a++]<<8,n=t[a++],i=n>>7,o=1<<1+(7&n);t[a++],t[a++];var d=null,u=null;i&&(d=a,u=o,a+=3*o);var m=!0,x=[],f=0,b=null,p=0,v=null;for(this.width=r,this.height=s;m&&a<t.length;)switch(t[a++]){case 33:switch(t[a++]){case 255:if(t[a]!==11||t[a+1]==78&&t[a+2]==69&&t[a+3]==84&&t[a+4]==83&&t[a+5]==67&&t[a+6]==65&&t[a+7]==80&&t[a+8]==69&&t[a+9]==50&&t[a+10]==46&&t[a+11]==48&&t[a+12]==3&&t[a+13]==1&&t[a+16]==0)a+=14,v=t[a++]|t[a++]<<8,a++;else for(a+=12;;){if(!((M=t[a++])>=0))throw Error("Invalid block size");if(M===0)break;a+=M}break;case 249:if(t[a++]!==4||t[a+4]!==0)throw new Error("Invalid graphics extension block.");var j=t[a++];f=t[a++]|t[a++]<<8,b=t[a++],1&j||(b=null),p=j>>2&7,a++;break;case 254:for(;;){if(!((M=t[a++])>=0))throw Error("Invalid block size");if(M===0)break;a+=M}break;default:throw new Error("Unknown graphic control label: 0x"+t[a-1].toString(16))}break;case 44:var N=t[a++]|t[a++]<<8,w=t[a++]|t[a++]<<8,P=t[a++]|t[a++]<<8,k=t[a++]|t[a++]<<8,$=t[a++],O=$>>6&1,L=1<<1+(7&$),_=d,E=u,A=!1;$>>7&&(A=!0,_=a,E=L,a+=3*L);var z=a;for(a++;;){var M;if(!((M=t[a++])>=0))throw Error("Invalid block size");if(M===0)break;a+=M}x.push({x:N,y:w,width:P,height:k,has_local_palette:A,palette_offset:_,palette_size:E,data_offset:z,data_length:a-z,transparent_index:b,interlaced:!!O,delay:f,disposal:p});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+t[a-1].toString(16))}this.numFrames=function(){return x.length},this.loopCount=function(){return v},this.frameInfo=function(D){if(D<0||D>=x.length)throw new Error("Frame index out of range.");return x[D]},this.decodeAndBlitFrameBGRA=function(D,I){var V=this.frameInfo(D),H=V.width*V.height,B=new Uint8Array(H);i_(t,V.data_offset,B,H);var W=V.palette_offset,K=V.transparent_index;K===null&&(K=256);var X=V.width,Q=r-X,ye=X,Y=4*(V.y*r+V.x),J=4*((V.y+V.height)*r+V.x),U=Y,ee=4*Q;V.interlaced===!0&&(ee+=4*r*7);for(var he=8,pe=0,se=B.length;pe<se;++pe){var te=B[pe];if(ye===0&&(ye=X,(U+=ee)>=J&&(ee=4*Q+4*r*(he-1),U=Y+(X+Q)*(he<<1),he>>=1)),te===K)U+=4;else{var ue=t[W+3*te],ge=t[W+3*te+1],ce=t[W+3*te+2];I[U++]=ce,I[U++]=ge,I[U++]=ue,I[U++]=255}--ye}},this.decodeAndBlitFrameRGBA=function(D,I){var V=this.frameInfo(D),H=V.width*V.height,B=new Uint8Array(H);i_(t,V.data_offset,B,H);var W=V.palette_offset,K=V.transparent_index;K===null&&(K=256);var X=V.width,Q=r-X,ye=X,Y=4*(V.y*r+V.x),J=4*((V.y+V.height)*r+V.x),U=Y,ee=4*Q;V.interlaced===!0&&(ee+=4*r*7);for(var he=8,pe=0,se=B.length;pe<se;++pe){var te=B[pe];if(ye===0&&(ye=X,(U+=ee)>=J&&(ee=4*Q+4*r*(he-1),U=Y+(X+Q)*(he<<1),he>>=1)),te===K)U+=4;else{var ue=t[W+3*te],ge=t[W+3*te+1],ce=t[W+3*te+2];I[U++]=ue,I[U++]=ge,I[U++]=ce,I[U++]=255}--ye}}}function i_(t,a,r,s){for(var n=t[a++],i=1<<n,o=i+1,d=o+1,u=n+1,m=(1<<u)-1,x=0,f=0,b=0,p=t[a++],v=new Int32Array(4096),j=null;;){for(;x<16&&p!==0;)f|=t[a++]<<x,x+=8,p===1?p=t[a++]:--p;if(x<u)break;var N=f&m;if(f>>=u,x-=u,N!==i){if(N===o)break;for(var w=N<d?N:j,P=0,k=w;k>i;)k=v[k]>>8,++P;var $=k;if(b+P+(w!==N?1:0)>s)return void rr.log("Warning, gif stream longer than expected.");r[b++]=$;var O=b+=P;for(w!==N&&(r[b++]=$),k=w;P--;)k=v[k],r[--O]=255&k,k>>=8;j!==null&&d<4096&&(v[d++]=j<<8|$,d>=m+1&&u<12&&(++u,m=m<<1|1)),j=N}else d=o+1,m=(1<<(u=n+1))-1,j=null}return b!==s&&rr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Xv(t){var a,r,s,n,i,o=Math.floor,d=new Array(64),u=new Array(64),m=new Array(64),x=new Array(64),f=new Array(65535),b=new Array(65535),p=new Array(64),v=new Array(64),j=[],N=0,w=7,P=new Array(64),k=new Array(64),$=new Array(64),O=new Array(256),L=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],M=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],H=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function B(Y,J){for(var U=0,ee=0,he=new Array,pe=1;pe<=16;pe++){for(var se=1;se<=Y[pe];se++)he[J[ee]]=[],he[J[ee]][0]=U,he[J[ee]][1]=pe,ee++,U++;U*=2}return he}function W(Y){for(var J=Y[0],U=Y[1]-1;U>=0;)J&1<<U&&(N|=1<<w),U--,--w<0&&(N==255?(K(255),K(0)):K(N),w=7,N=0)}function K(Y){j.push(Y)}function X(Y){K(Y>>8&255),K(255&Y)}function Q(Y,J,U,ee,he){for(var pe,se=he[0],te=he[240],ue=function(ve,Me){var et,Ie,tt,Re,bt,Nt,Ut,Mt,pt,_e,Oe=0;for(pt=0;pt<8;++pt){et=ve[Oe],Ie=ve[Oe+1],tt=ve[Oe+2],Re=ve[Oe+3],bt=ve[Oe+4],Nt=ve[Oe+5],Ut=ve[Oe+6];var ct=et+(Mt=ve[Oe+7]),xt=et-Mt,Ze=Ie+Ut,nt=Ie-Ut,gt=tt+Nt,mt=tt-Nt,Ht=Re+bt,vt=Re-bt,At=ct+Ht,Xt=ct-Ht,Ft=Ze+gt,Rt=Ze-gt;ve[Oe]=At+Ft,ve[Oe+4]=At-Ft;var Ta=.707106781*(Rt+Xt);ve[Oe+2]=Xt+Ta,ve[Oe+6]=Xt-Ta;var Kl=.382683433*((At=vt+mt)-(Rt=nt+xt)),is=.5411961*At+Kl,ri=1.306562965*Rt+Kl,si=.707106781*(Ft=mt+nt),Gt=xt+si,ks=xt-si;ve[Oe+5]=ks+is,ve[Oe+3]=ks-is,ve[Oe+1]=Gt+ri,ve[Oe+7]=Gt-ri,Oe+=8}for(Oe=0,pt=0;pt<8;++pt){et=ve[Oe],Ie=ve[Oe+8],tt=ve[Oe+16],Re=ve[Oe+24],bt=ve[Oe+32],Nt=ve[Oe+40],Ut=ve[Oe+48];var lr=et+(Mt=ve[Oe+56]),Qa=et-Mt,fs=Ie+Ut,or=Ie-Ut,ls=tt+Nt,ps=tt-Nt,Xl=Re+bt,Rn=Re-bt,vn=lr+Xl,qs=lr-Xl,Cs=fs+ls,Us=fs-ls;ve[Oe]=vn+Cs,ve[Oe+32]=vn-Cs;var gs=.707106781*(Us+qs);ve[Oe+16]=qs+gs,ve[Oe+48]=qs-gs;var cr=.382683433*((vn=Rn+ps)-(Us=or+Qa)),ni=.5411961*vn+cr,Jl=1.306562965*Us+cr,$n=.707106781*(Cs=ps+or),ii=Qa+$n,Lc=Qa-$n;ve[Oe+40]=Lc+ni,ve[Oe+24]=Lc-ni,ve[Oe+8]=ii+Jl,ve[Oe+56]=ii-Jl,Oe++}for(pt=0;pt<64;++pt)_e=ve[pt]*Me[pt],p[pt]=_e>0?_e+.5|0:_e-.5|0;return p}(Y,J),ge=0;ge<64;++ge)v[_[ge]]=ue[ge];var ce=v[0]-U;U=v[0],ce==0?W(ee[0]):(W(ee[b[pe=32767+ce]]),W(f[pe]));for(var De=63;De>0&&v[De]==0;)De--;if(De==0)return W(se),U;for(var ke,re=1;re<=De;){for(var Ee=re;v[re]==0&&re<=De;)++re;var Se=re-Ee;if(Se>=16){ke=Se>>4;for(var Ge=1;Ge<=ke;++Ge)W(te);Se&=15}pe=32767+v[re],W(he[(Se<<4)+b[pe]]),W(f[pe]),re++}return De!=63&&W(se),U}function ye(Y){Y=Math.min(Math.max(Y,1),100),i!=Y&&(function(J){for(var U=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var he=o((U[ee]*J+50)/100);he=Math.min(Math.max(he,1),255),d[_[ee]]=he}for(var pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],se=0;se<64;se++){var te=o((pe[se]*J+50)/100);te=Math.min(Math.max(te,1),255),u[_[se]]=te}for(var ue=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ge=0,ce=0;ce<8;ce++)for(var De=0;De<8;De++)m[ge]=1/(d[_[ge]]*ue[ce]*ue[De]*8),x[ge]=1/(u[_[ge]]*ue[ce]*ue[De]*8),ge++}(Y<50?Math.floor(5e3/Y):Math.floor(200-2*Y)),i=Y)}this.encode=function(Y,J){J&&ye(J),j=new Array,N=0,w=7,X(65496),X(65504),X(16),K(74),K(70),K(73),K(70),K(0),K(1),K(1),K(0),X(1),X(1),K(0),K(0),function(){X(65499),X(132),K(0);for(var Ie=0;Ie<64;Ie++)K(d[Ie]);K(1);for(var tt=0;tt<64;tt++)K(u[tt])}(),function(Ie,tt){X(65472),X(17),K(8),X(tt),X(Ie),K(3),K(1),K(17),K(0),K(2),K(17),K(1),K(3),K(17),K(1)}(Y.width,Y.height),function(){X(65476),X(418),K(0);for(var Ie=0;Ie<16;Ie++)K(E[Ie+1]);for(var tt=0;tt<=11;tt++)K(A[tt]);K(16);for(var Re=0;Re<16;Re++)K(z[Re+1]);for(var bt=0;bt<=161;bt++)K(M[bt]);K(1);for(var Nt=0;Nt<16;Nt++)K(D[Nt+1]);for(var Ut=0;Ut<=11;Ut++)K(I[Ut]);K(17);for(var Mt=0;Mt<16;Mt++)K(V[Mt+1]);for(var pt=0;pt<=161;pt++)K(H[pt])}(),X(65498),X(12),K(3),K(1),K(0),K(2),K(17),K(3),K(17),K(0),K(63),K(0);var U=0,ee=0,he=0;N=0,w=7,this.encode.displayName="_encode_";for(var pe,se,te,ue,ge,ce,De,ke,re,Ee=Y.data,Se=Y.width,Ge=Y.height,ve=4*Se,Me=0;Me<Ge;){for(pe=0;pe<ve;){for(ge=ve*Me+pe,De=-1,ke=0,re=0;re<64;re++)ce=ge+(ke=re>>3)*ve+(De=4*(7&re)),Me+ke>=Ge&&(ce-=ve*(Me+1+ke-Ge)),pe+De>=ve&&(ce-=pe+De-ve+4),se=Ee[ce++],te=Ee[ce++],ue=Ee[ce++],P[re]=(L[se]+L[te+256|0]+L[ue+512|0]>>16)-128,k[re]=(L[se+768|0]+L[te+1024|0]+L[ue+1280|0]>>16)-128,$[re]=(L[se+1280|0]+L[te+1536|0]+L[ue+1792|0]>>16)-128;U=Q(P,m,U,a,s),ee=Q(k,x,ee,r,n),he=Q($,x,he,r,n),pe+=32}Me+=8}if(w>=0){var et=[];et[1]=w+1,et[0]=(1<<w+1)-1,W(et)}return X(65497),new Uint8Array(j)},t=t||50,function(){for(var Y=String.fromCharCode,J=0;J<256;J++)O[J]=Y(J)}(),a=B(E,A),r=B(D,I),s=B(z,M),n=B(V,H),function(){for(var Y=1,J=2,U=1;U<=15;U++){for(var ee=Y;ee<J;ee++)b[32767+ee]=U,f[32767+ee]=[],f[32767+ee][1]=U,f[32767+ee][0]=ee;for(var he=-(J-1);he<=-Y;he++)b[32767+he]=U,f[32767+he]=[],f[32767+he][1]=U,f[32767+he][0]=J-1+he;Y<<=1,J<<=1}}(),function(){for(var Y=0;Y<256;Y++)L[Y]=19595*Y,L[Y+256|0]=38470*Y,L[Y+512|0]=7471*Y+32768,L[Y+768|0]=-11059*Y,L[Y+1024|0]=-21709*Y,L[Y+1280|0]=32768*Y+8421375,L[Y+1536|0]=-27439*Y,L[Y+1792|0]=-5329*Y}(),ye(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function $l(t,a){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!a,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function l_(t){function a(A){if(!A)throw Error("assert :P")}function r(A,z,M){for(var D=0;4>D;D++)if(A[z+D]!=M.charCodeAt(D))return!0;return!1}function s(A,z,M,D,I){for(var V=0;V<I;V++)A[z+V]=M[D+V]}function n(A,z,M,D){for(var I=0;I<D;I++)A[z+I]=M}function i(A){return new Int32Array(A)}function o(A,z){for(var M=[],D=0;D<A;D++)M.push(new z);return M}function d(A,z){var M=[];return function D(I,V,H){for(var B=H[V],W=0;W<B&&(I.push(H.length>V+1?[]:new z),!(H.length<V+1));W++)D(I[W],V+1,H)}(M,0,A),M}var u=function(){var A=this;function z(S,T){for(var G=1<<T-1>>>0;S&G;)G>>>=1;return G?(S&G-1)+G:S}function M(S,T,G,Z,le){a(!(Z%G));do S[T+(Z-=G)]=le;while(0<Z)}function D(S,T,G,Z,le){if(a(2328>=le),512>=le)var de=i(512);else if((de=i(le))==null)return 0;return function(me,fe,be,Ne,Te,Ue){var je,Le,Be=fe,Xe=1<<be,qe=i(16),Qe=i(16);for(a(Te!=0),a(Ne!=null),a(me!=null),a(0<be),Le=0;Le<Te;++Le){if(15<Ne[Le])return 0;++qe[Ne[Le]]}if(qe[0]==Te)return 0;for(Qe[1]=0,je=1;15>je;++je){if(qe[je]>1<<je)return 0;Qe[je+1]=Qe[je]+qe[je]}for(Le=0;Le<Te;++Le)je=Ne[Le],0<Ne[Le]&&(Ue[Qe[je]++]=Le);if(Qe[15]==1)return(Ne=new I).g=0,Ne.value=Ue[0],M(me,Be,1,Xe,Ne),Xe;var Je,dt=-1,it=Xe-1,Pt=0,jt=1,ra=1,wt=1<<be;for(Le=0,je=1,Te=2;je<=be;++je,Te<<=1){if(jt+=ra<<=1,0>(ra-=qe[je]))return 0;for(;0<qe[je];--qe[je])(Ne=new I).g=je,Ne.value=Ue[Le++],M(me,Be+Pt,Te,wt,Ne),Pt=z(Pt,je)}for(je=be+1,Te=2;15>=je;++je,Te<<=1){if(jt+=ra<<=1,0>(ra-=qe[je]))return 0;for(;0<qe[je];--qe[je]){if(Ne=new I,(Pt&it)!=dt){for(Be+=wt,Je=1<<(dt=je)-be;15>dt&&!(0>=(Je-=qe[dt]));)++dt,Je<<=1;Xe+=wt=1<<(Je=dt-be),me[fe+(dt=Pt&it)].g=Je+be,me[fe+dt].value=Be-fe-dt}Ne.g=je-be,Ne.value=Ue[Le++],M(me,Be+(Pt>>be),Te,wt,Ne),Pt=z(Pt,je)}}return jt!=2*Qe[15]-1?0:Xe}(S,T,G,Z,le,de)}function I(){this.value=this.g=0}function V(){this.value=this.g=0}function H(){this.G=o(5,I),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(qn,V)}function B(S,T,G,Z){a(S!=null),a(T!=null),a(2147483648>Z),S.Ca=254,S.I=0,S.b=-8,S.Ka=0,S.oa=T,S.pa=G,S.Jd=T,S.Yc=G+Z,S.Zc=4<=Z?G+Z-4+1:G,se(S)}function W(S,T){for(var G=0;0<T--;)G|=ue(S,128)<<T;return G}function K(S,T){var G=W(S,T);return te(S)?-G:G}function X(S,T,G,Z){var le,de=0;for(a(S!=null),a(T!=null),a(4294967288>Z),S.Sb=Z,S.Ra=0,S.u=0,S.h=0,4<Z&&(Z=4),le=0;le<Z;++le)de+=T[G+le]<<8*le;S.Ra=de,S.bb=Z,S.oa=T,S.pa=G}function Q(S){for(;8<=S.u&&S.bb<S.Sb;)S.Ra>>>=8,S.Ra+=S.oa[S.pa+S.bb]<<wl-8>>>0,++S.bb,S.u-=8;ee(S)&&(S.h=1,S.u=0)}function ye(S,T){if(a(0<=T),!S.h&&T<=Wc){var G=U(S)&Ui[T];return S.u+=T,Q(S),G}return S.h=1,S.u=0}function Y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function J(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function U(S){return S.Ra>>>(S.u&wl-1)>>>0}function ee(S){return a(S.bb<=S.Sb),S.h||S.bb==S.Sb&&S.u>wl}function he(S,T){S.u=T,S.h=ee(S)}function pe(S){S.u>=yr&&(a(S.u>=yr),Q(S))}function se(S){a(S!=null&&S.oa!=null),S.pa<S.Zc?(S.I=(S.oa[S.pa++]|S.I<<8)>>>0,S.b+=8):(a(S!=null&&S.oa!=null),S.pa<S.Yc?(S.b+=8,S.I=S.oa[S.pa++]|S.I<<8):S.Ka?S.b=0:(S.I<<=8,S.b+=8,S.Ka=1))}function te(S){return W(S,1)}function ue(S,T){var G=S.Ca;0>S.b&&se(S);var Z=S.b,le=G*T>>>8,de=(S.I>>>Z>le)+0;for(de?(G-=le,S.I-=le+1<<Z>>>0):G=le+1,Z=G,le=0;256<=Z;)le+=8,Z>>=8;return Z=7^le+th[Z],S.b-=Z,S.Ca=(G<<Z)-1,de}function ge(S,T,G){S[T+0]=G>>24&255,S[T+1]=G>>16&255,S[T+2]=G>>8&255,S[T+3]=255&G}function ce(S,T){return S[T+0]|S[T+1]<<8}function De(S,T){return ce(S,T)|S[T+2]<<16}function ke(S,T){return ce(S,T)|ce(S,T+2)<<16}function re(S,T){var G=1<<T;return a(S!=null),a(0<T),S.X=i(G),S.X==null?0:(S.Mb=32-T,S.Xa=T,1)}function Ee(S,T){a(S!=null),a(T!=null),a(S.Xa==T.Xa),s(T.X,0,S.X,0,1<<T.Xa)}function Se(){this.X=[],this.Xa=this.Mb=0}function Ge(S,T,G,Z){a(G!=null),a(Z!=null);var le=G[0],de=Z[0];return le==0&&(le=(S*de+T/2)/T),de==0&&(de=(T*le+S/2)/S),0>=le||0>=de?0:(G[0]=le,Z[0]=de,1)}function ve(S,T){return S+(1<<T)-1>>>T}function Me(S,T){return((4278255360&S)+(4278255360&T)>>>0&4278255360)+((16711935&S)+(16711935&T)>>>0&16711935)>>>0}function et(S,T){A[T]=function(G,Z,le,de,me,fe,be){var Ne;for(Ne=0;Ne<me;++Ne){var Te=A[S](fe[be+Ne-1],le,de+Ne);fe[be+Ne]=Me(G[Z+Ne],Te)}}}function Ie(){this.ud=this.hd=this.jd=0}function tt(S,T){return((4278124286&(S^T))>>>1)+(S&T)>>>0}function Re(S){return 0<=S&&256>S?S:0>S?0:255<S?255:void 0}function bt(S,T){return Re(S+(S-T+.5>>1))}function Nt(S,T,G){return Math.abs(T-G)-Math.abs(S-G)}function Ut(S,T,G,Z,le,de,me){for(Z=de[me-1],G=0;G<le;++G)de[me+G]=Z=Me(S[T+G],Z)}function Mt(S,T,G,Z,le){var de;for(de=0;de<G;++de){var me=S[T+de],fe=me>>8&255,be=16711935&(be=(be=16711935&me)+((fe<<16)+fe));Z[le+de]=(4278255360&me)+be>>>0}}function pt(S,T){T.jd=255&S,T.hd=S>>8&255,T.ud=S>>16&255}function _e(S,T,G,Z,le,de){var me;for(me=0;me<Z;++me){var fe=T[G+me],be=fe>>>8,Ne=fe,Te=255&(Te=(Te=fe>>>16)+((S.jd<<24>>24)*(be<<24>>24)>>>5));Ne=255&(Ne=(Ne+=(S.hd<<24>>24)*(be<<24>>24)>>>5)+((S.ud<<24>>24)*(Te<<24>>24)>>>5)),le[de+me]=(4278255360&fe)+(Te<<16)+Ne}}function Oe(S,T,G,Z,le){A[T]=function(de,me,fe,be,Ne,Te,Ue,je,Le){for(be=Ue;be<je;++be)for(Ue=0;Ue<Le;++Ue)Ne[Te++]=le(fe[Z(de[me++])])},A[S]=function(de,me,fe,be,Ne,Te,Ue){var je=8>>de.b,Le=de.Ea,Be=de.K[0],Xe=de.w;if(8>je)for(de=(1<<de.b)-1,Xe=(1<<je)-1;me<fe;++me){var qe,Qe=0;for(qe=0;qe<Le;++qe)qe&de||(Qe=Z(be[Ne++])),Te[Ue++]=le(Be[Qe&Xe]),Qe>>=je}else A["VP8LMapColor"+G](be,Ne,Be,Xe,Te,Ue,me,fe,Le)}}function ct(S,T,G,Z,le){for(G=T+G;T<G;){var de=S[T++];Z[le++]=de>>16&255,Z[le++]=de>>8&255,Z[le++]=255&de}}function xt(S,T,G,Z,le){for(G=T+G;T<G;){var de=S[T++];Z[le++]=de>>16&255,Z[le++]=de>>8&255,Z[le++]=255&de,Z[le++]=de>>24&255}}function Ze(S,T,G,Z,le){for(G=T+G;T<G;){var de=(me=S[T++])>>16&240|me>>12&15,me=240&me|me>>28&15;Z[le++]=de,Z[le++]=me}}function nt(S,T,G,Z,le){for(G=T+G;T<G;){var de=(me=S[T++])>>16&248|me>>13&7,me=me>>5&224|me>>3&31;Z[le++]=de,Z[le++]=me}}function gt(S,T,G,Z,le){for(G=T+G;T<G;){var de=S[T++];Z[le++]=255&de,Z[le++]=de>>8&255,Z[le++]=de>>16&255}}function mt(S,T,G,Z,le,de){if(de==0)for(G=T+G;T<G;)ge(Z,((de=S[T++])[0]>>24|de[1]>>8&65280|de[2]<<8&16711680|de[3]<<24)>>>0),le+=32;else s(Z,le,S,T,G)}function Ht(S,T){A[T][0]=A[S+"0"],A[T][1]=A[S+"1"],A[T][2]=A[S+"2"],A[T][3]=A[S+"3"],A[T][4]=A[S+"4"],A[T][5]=A[S+"5"],A[T][6]=A[S+"6"],A[T][7]=A[S+"7"],A[T][8]=A[S+"8"],A[T][9]=A[S+"9"],A[T][10]=A[S+"10"],A[T][11]=A[S+"11"],A[T][12]=A[S+"12"],A[T][13]=A[S+"13"],A[T][14]=A[S+"0"],A[T][15]=A[S+"0"]}function vt(S){return S==mu||S==co||S==_l||S==Qc}function At(){this.eb=[],this.size=this.A=this.fb=0}function Xt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ft(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new At,this.f.kb=new Xt,this.sd=null}function Rt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ta(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Kl(S){return alert("todo:WebPSamplerProcessPlane"),S.T}function is(S,T){var G=S.T,Z=T.ba.f.RGBA,le=Z.eb,de=Z.fb+S.ka*Z.A,me=us[T.ba.S],fe=S.y,be=S.O,Ne=S.f,Te=S.N,Ue=S.ea,je=S.W,Le=T.cc,Be=T.dc,Xe=T.Mc,qe=T.Nc,Qe=S.ka,Je=S.ka+S.T,dt=S.U,it=dt+1>>1;for(Qe==0?me(fe,be,null,null,Ne,Te,Ue,je,Ne,Te,Ue,je,le,de,null,null,dt):(me(T.ec,T.fc,fe,be,Le,Be,Xe,qe,Ne,Te,Ue,je,le,de-Z.A,le,de,dt),++G);Qe+2<Je;Qe+=2)Le=Ne,Be=Te,Xe=Ue,qe=je,Te+=S.Rc,je+=S.Rc,de+=2*Z.A,me(fe,(be+=2*S.fa)-S.fa,fe,be,Le,Be,Xe,qe,Ne,Te,Ue,je,le,de-Z.A,le,de,dt);return be+=S.fa,S.j+Je<S.o?(s(T.ec,T.fc,fe,be,dt),s(T.cc,T.dc,Ne,Te,it),s(T.Mc,T.Nc,Ue,je,it),G--):1&Je||me(fe,be,null,null,Ne,Te,Ue,je,Ne,Te,Ue,je,le,de+Z.A,null,null,dt),G}function ri(S,T,G){var Z=S.F,le=[S.J];if(Z!=null){var de=S.U,me=T.ba.S,fe=me==Wo||me==_l;T=T.ba.f.RGBA;var be=[0],Ne=S.ka;be[0]=S.T,S.Kb&&(Ne==0?--be[0]:(--Ne,le[0]-=S.width),S.j+S.ka+S.T==S.o&&(be[0]=S.o-S.j-Ne));var Te=T.eb;Ne=T.fb+Ne*T.A,S=An(Z,le[0],S.width,de,be,Te,Ne+(fe?0:3),T.A),a(G==be),S&&vt(me)&&Jc(Te,Ne,fe,de,be,T.A)}return 0}function si(S){var T=S.ma,G=T.ba.S,Z=11>G,le=G==Zc||G==uu||G==Wo||G==Sl||G==12||vt(G);if(T.memory=null,T.Ib=null,T.Jb=null,T.Nd=null,!bs(T.Oa,S,le?11:12))return 0;if(le&&vt(G)&&lu(),S.da)alert("todo:use_scaling");else{if(Z){if(T.Ib=Kl,S.Kb){if(G=S.U+1>>1,T.memory=i(S.U+2*G),T.memory==null)return 0;T.ec=T.memory,T.fc=0,T.cc=T.ec,T.dc=T.fc+S.U,T.Mc=T.cc,T.Nc=T.dc+G,T.Ib=is,lu()}}else alert("todo:EmitYUV");le&&(T.Jb=ri,Z&&qo())}if(Z&&!b0){for(S=0;256>S;++S)eb[S]=89858*(S-128)+Wr>>el,fu[S]=-22014*(S-128)+Wr,ch[S]=-45773*(S-128),Kr[S]=113618*(S-128)+Wr>>el;for(S=xo;S<Lm;++S)T=76283*(S-16)+Wr>>el,pu[S-xo]=Gr(T,255),dh[S-xo]=Gr(T+8>>4,15);b0=1}return 1}function Gt(S){var T=S.ma,G=S.U,Z=S.T;return a(!(1&S.ka)),0>=G||0>=Z?0:(G=T.Ib(S,T),T.Jb!=null&&T.Jb(S,T,G),T.Dc+=G,1)}function ks(S){S.ma.memory=null}function lr(S,T,G,Z){return ye(S,8)!=47?0:(T[0]=ye(S,14)+1,G[0]=ye(S,14)+1,Z[0]=ye(S,1),ye(S,3)!=0?0:!S.h)}function Qa(S,T){if(4>S)return S+1;var G=S-2>>1;return(2+(1&S)<<G)+ye(T,G)+1}function fs(S,T){return 120<T?T-120:1<=(G=((G=kl[T-1])>>4)*S+(8-(15&G)))?G:1;var G}function or(S,T,G){var Z=U(G),le=S[T+=255&Z].g-8;return 0<le&&(he(G,G.u+8),Z=U(G),T+=S[T].value,T+=Z&(1<<le)-1),he(G,G.u+S[T].g),S[T].value}function ls(S,T,G){return G.g+=S.g,G.value+=S.value<<T>>>0,a(8>=G.g),S.g}function ps(S,T,G){var Z=S.xc;return a((T=Z==0?0:S.vc[S.md*(G>>Z)+(T>>Z)])<S.Wb),S.Ya[T]}function Xl(S,T,G,Z){var le=S.ab,de=S.c*T,me=S.C;T=me+T;var fe=G,be=Z;for(Z=S.Ta,G=S.Ua;0<le--;){var Ne=S.gc[le],Te=me,Ue=T,je=fe,Le=be,Be=(be=Z,fe=G,Ne.Ea);switch(a(Te<Ue),a(Ue<=Ne.nc),Ne.hc){case 2:Kc(je,Le,(Ue-Te)*Be,be,fe);break;case 0:var Xe=Te,qe=Ue,Qe=be,Je=fe,dt=(wt=Ne).Ea;Xe==0&&(Hi(je,Le,null,null,1,Qe,Je),Ut(je,Le+1,0,0,dt-1,Qe,Je+1),Le+=dt,Je+=dt,++Xe);for(var it=1<<wt.b,Pt=it-1,jt=ve(dt,wt.b),ra=wt.K,wt=wt.w+(Xe>>wt.b)*jt;Xe<qe;){var ya=ra,zr=wt,ea=1;for(Yi(je,Le,Qe,Je-dt,1,Qe,Je);ea<dt;){var St=(ea&~Pt)+it;St>dt&&(St=dt),(0,lo[ya[zr++]>>8&15])(je,Le+ +ea,Qe,Je+ea-dt,St-ea,Qe,Je+ea),ea=St}Le+=dt,Je+=dt,++Xe&Pt||(wt+=jt)}Ue!=Ne.nc&&s(be,fe-Be,be,fe+(Ue-Te-1)*Be,Be);break;case 1:for(Be=je,qe=Le,dt=(je=Ne.Ea)-(Je=je&~(Qe=(Le=1<<Ne.b)-1)),Xe=ve(je,Ne.b),it=Ne.K,Ne=Ne.w+(Te>>Ne.b)*Xe;Te<Ue;){for(Pt=it,jt=Ne,ra=new Ie,wt=qe+Je,ya=qe+je;qe<wt;)pt(Pt[jt++],ra),Vi(ra,Be,qe,Le,be,fe),qe+=Le,fe+=Le;qe<ya&&(pt(Pt[jt++],ra),Vi(ra,Be,qe,dt,be,fe),qe+=dt,fe+=dt),++Te&Qe||(Ne+=Xe)}break;case 3:if(je==be&&Le==fe&&0<Ne.b){for(qe=be,je=Be=fe+(Ue-Te)*Be-(Je=(Ue-Te)*ve(Ne.Ea,Ne.b)),Le=be,Qe=fe,Xe=[],Je=(dt=Je)-1;0<=Je;--Je)Xe[Je]=Le[Qe+Je];for(Je=dt-1;0<=Je;--Je)qe[je+Je]=Xe[Je];ou(Ne,Te,Ue,be,Be,be,fe)}else ou(Ne,Te,Ue,je,Le,be,fe)}fe=Z,be=G}be!=G&&s(Z,G,fe,be,de)}function Rn(S,T){var G=S.V,Z=S.Ba+S.c*S.C,le=T-S.C;if(a(T<=S.l.o),a(16>=le),0<le){var de=S.l,me=S.Ta,fe=S.Ua,be=de.width;if(Xl(S,le,G,Z),le=fe=[fe],a((G=S.C)<(Z=T)),a(de.v<de.va),Z>de.o&&(Z=de.o),G<de.j){var Ne=de.j-G;G=de.j,le[0]+=Ne*be}if(G>=Z?G=0:(le[0]+=4*de.v,de.ka=G-de.j,de.U=de.va-de.v,de.T=Z-G,G=1),G){if(fe=fe[0],11>(G=S.ca).S){var Te=G.f.RGBA,Ue=(Z=G.S,le=de.U,de=de.T,Ne=Te.eb,Te.A),je=de;for(Te=Te.fb+S.Ma*Te.A;0<je--;){var Le=me,Be=fe,Xe=le,qe=Ne,Qe=Te;switch(Z){case Ps:Xc(Le,Be,Xe,qe,Qe);break;case Zc:Gs(Le,Be,Xe,qe,Qe);break;case mu:Gs(Le,Be,Xe,qe,Qe),Jc(qe,Qe,0,Xe,1,0);break;case Xi:Ua(Le,Be,Xe,qe,Qe);break;case uu:mt(Le,Be,Xe,qe,Qe,1);break;case co:mt(Le,Be,Xe,qe,Qe,1),Jc(qe,Qe,0,Xe,1,0);break;case Wo:mt(Le,Be,Xe,qe,Qe,0);break;case _l:mt(Le,Be,Xe,qe,Qe,0),Jc(qe,Qe,1,Xe,1,0);break;case Sl:Wi(Le,Be,Xe,qe,Qe);break;case Qc:Wi(Le,Be,Xe,qe,Qe),_n(qe,Qe,Xe,1,0);break;case Em:Oa(Le,Be,Xe,qe,Qe);break;default:a(0)}fe+=be,Te+=Ue}S.Ma+=de}else alert("todo:EmitRescaledRowsYUVA");a(S.Ma<=G.height)}}S.C=T,a(S.C<=S.i)}function vn(S){var T;if(0<S.ua)return 0;for(T=0;T<S.Wb;++T){var G=S.Ya[T].G,Z=S.Ya[T].H;if(0<G[1][Z[1]+0].g||0<G[2][Z[2]+0].g||0<G[3][Z[3]+0].g)return 0}return 1}function qs(S,T,G,Z,le,de){if(S.Z!=0){var me=S.qd,fe=S.rd;for(a(Zi[S.Z]!=null);T<G;++T)Zi[S.Z](me,fe,Z,le,Z,le,de),me=Z,fe=le,le+=de;S.qd=me,S.rd=fe}}function Cs(S,T){var G=S.l.ma,Z=G.Z==0||G.Z==1?S.l.j:S.C;if(Z=S.C<Z?Z:S.C,a(T<=S.l.o),T>Z){var le=S.l.width,de=G.ca,me=G.tb+le*Z,fe=S.V,be=S.Ba+S.c*Z,Ne=S.gc;a(S.ab==1),a(Ne[0].hc==3),Gi(Ne[0],Z,T,fe,be,de,me),qs(G,Z,T,de,me,le)}S.C=S.Ma=T}function Us(S,T,G,Z,le,de,me){var fe=S.$/Z,be=S.$%Z,Ne=S.m,Te=S.s,Ue=G+S.$,je=Ue;le=G+Z*le;var Le=G+Z*de,Be=280+Te.ua,Xe=S.Pb?fe:16777216,qe=0<Te.ua?Te.Wa:null,Qe=Te.wc,Je=Ue<Le?ps(Te,be,fe):null;a(S.C<de),a(Le<=le);var dt=!1;e:for(;;){for(;dt||Ue<Le;){var it=0;if(fe>=Xe){var Pt=Ue-G;a((Xe=S).Pb),Xe.wd=Xe.m,Xe.xd=Pt,0<Xe.s.ua&&Ee(Xe.s.Wa,Xe.s.vb),Xe=fe+p0}if(be&Qe||(Je=ps(Te,be,fe)),a(Je!=null),Je.Qb&&(T[Ue]=Je.qb,dt=!0),!dt)if(pe(Ne),Je.jc){it=Ne,Pt=T;var jt=Ue,ra=Je.pd[U(it)&qn-1];a(Je.jc),256>ra.g?(he(it,it.u+ra.g),Pt[jt]=ra.value,it=0):(he(it,it.u+ra.g-256),a(256<=ra.value),it=ra.value),it==0&&(dt=!0)}else it=or(Je.G[0],Je.H[0],Ne);if(Ne.h)break;if(dt||256>it){if(!dt)if(Je.nd)T[Ue]=(Je.qb|it<<8)>>>0;else{if(pe(Ne),dt=or(Je.G[1],Je.H[1],Ne),pe(Ne),Pt=or(Je.G[2],Je.H[2],Ne),jt=or(Je.G[3],Je.H[3],Ne),Ne.h)break;T[Ue]=(jt<<24|dt<<16|it<<8|Pt)>>>0}if(dt=!1,++Ue,++be>=Z&&(be=0,++fe,me!=null&&fe<=de&&!(fe%16)&&me(S,fe),qe!=null))for(;je<Ue;)it=T[je++],qe.X[(506832829*it&4294967295)>>>qe.Mb]=it}else if(280>it){if(it=Qa(it-256,Ne),Pt=or(Je.G[4],Je.H[4],Ne),pe(Ne),Pt=fs(Z,Pt=Qa(Pt,Ne)),Ne.h)break;if(Ue-G<Pt||le-Ue<it)break e;for(jt=0;jt<it;++jt)T[Ue+jt]=T[Ue+jt-Pt];for(Ue+=it,be+=it;be>=Z;)be-=Z,++fe,me!=null&&fe<=de&&!(fe%16)&&me(S,fe);if(a(Ue<=le),be&Qe&&(Je=ps(Te,be,fe)),qe!=null)for(;je<Ue;)it=T[je++],qe.X[(506832829*it&4294967295)>>>qe.Mb]=it}else{if(!(it<Be))break e;for(dt=it-280,a(qe!=null);je<Ue;)it=T[je++],qe.X[(506832829*it&4294967295)>>>qe.Mb]=it;it=Ue,a(!(dt>>>(Pt=qe).Xa)),T[it]=Pt.X[dt],dt=!0}dt||a(Ne.h==ee(Ne))}if(S.Pb&&Ne.h&&Ue<le)a(S.m.h),S.a=5,S.m=S.wd,S.$=S.xd,0<S.s.ua&&Ee(S.s.vb,S.s.Wa);else{if(Ne.h)break e;me?.(S,fe>de?de:fe),S.a=0,S.$=Ue-G}return 1}return S.a=3,0}function gs(S){a(S!=null),S.vc=null,S.yc=null,S.Ya=null;var T=S.Wa;T!=null&&(T.X=null),S.vb=null,a(S!=null)}function cr(){var S=new mr;return S==null?null:(S.a=0,S.xb=ed,Ht("Predictor","VP8LPredictors"),Ht("Predictor","VP8LPredictors_C"),Ht("PredictorAdd","VP8LPredictorsAdd"),Ht("PredictorAdd","VP8LPredictorsAdd_C"),Kc=Mt,Vi=_e,Xc=ct,Gs=xt,Wi=Ze,Oa=nt,Ua=gt,A.VP8LMapColor32b=cs,A.VP8LMapColor8b=io,S)}function ni(S,T,G,Z,le){var de=1,me=[S],fe=[T],be=Z.m,Ne=Z.s,Te=null,Ue=0;e:for(;;){if(G)for(;de&&ye(be,1);){var je=me,Le=fe,Be=Z,Xe=1,qe=Be.m,Qe=Be.gc[Be.ab],Je=ye(qe,2);if(Be.Oc&1<<Je)de=0;else{switch(Be.Oc|=1<<Je,Qe.hc=Je,Qe.Ea=je[0],Qe.nc=Le[0],Qe.K=[null],++Be.ab,a(4>=Be.ab),Je){case 0:case 1:Qe.b=ye(qe,3)+2,Xe=ni(ve(Qe.Ea,Qe.b),ve(Qe.nc,Qe.b),0,Be,Qe.K),Qe.K=Qe.K[0];break;case 3:var dt,it=ye(qe,8)+1,Pt=16<it?0:4<it?1:2<it?2:3;if(je[0]=ve(Qe.Ea,Pt),Qe.b=Pt,dt=Xe=ni(it,1,0,Be,Qe.K)){var jt,ra=it,wt=Qe,ya=1<<(8>>wt.b),zr=i(ya);if(zr==null)dt=0;else{var ea=wt.K[0],St=wt.w;for(zr[0]=wt.K[0][0],jt=1;jt<1*ra;++jt)zr[jt]=Me(ea[St+jt],zr[jt-1]);for(;jt<4*ya;++jt)zr[jt]=0;wt.K[0]=null,wt.K[0]=zr,dt=1}}Xe=dt;break;case 2:break;default:a(0)}de=Xe}}if(me=me[0],fe=fe[0],de&&ye(be,1)&&!(de=1<=(Ue=ye(be,4))&&11>=Ue)){Z.a=3;break e}var yt;if(yt=de)t:{var hr,sa,da,Ct=Z,ia=me,Na=fe,tr=Ue,Pr=G,Or=Ct.m,vr=Ct.s,fa=[null],wa=1,jr=0,Vt=Xo[tr];a:for(;;){if(Pr&&ye(Or,1)){var Xr=ye(Or,3)+2,En=ve(ia,Xr),Nr=ve(Na,Xr),Ks=En*Nr;if(!ni(En,Nr,0,Ct,fa))break a;for(fa=fa[0],vr.xc=Xr,hr=0;hr<Ks;++hr){var Ya=fa[hr]>>8&65535;fa[hr]=Ya,Ya>=wa&&(wa=Ya+1)}}if(Or.h)break a;for(sa=0;5>sa;++sa){var Dr=kn[sa];!sa&&0<tr&&(Dr+=1<<tr),jr<Dr&&(jr=Dr)}var Xs=o(wa*Vt,I),vs=wa,Xa=o(vs,H);if(Xa==null)var ka=null;else a(65536>=vs),ka=Xa;var Os=i(jr);if(ka==null||Os==null||Xs==null){Ct.a=1;break a}var js=Xs;for(hr=da=0;hr<wa;++hr){var Fa=ka[hr],Js=Fa.G,Jr=Fa.H,tl=0,xi=1,Zr=0;for(sa=0;5>sa;++sa){Dr=kn[sa],Js[sa]=js,Jr[sa]=da,!sa&&0<tr&&(Dr+=1<<tr);s:{var gu,Mm=Dr,yu=Ct,ad=Os,N0=js,w0=da,bu=0,Pl=yu.m,ab=ye(Pl,1);if(n(ad,0,0,Mm),ab){var S0=ye(Pl,1)+1,_0=ye(Pl,1),uh=ye(Pl,_0==0?1:8);ad[uh]=1,S0==2&&(ad[uh=ye(Pl,8)]=1);var rd=1}else{var mh=i(19),xh=ye(Pl,4)+4;if(19<xh){yu.a=3;var vu=0;break s}for(gu=0;gu<xh;++gu)mh[Al[gu]]=ye(Pl,3);var Rm=void 0,sd=void 0,A0=yu,k0=mh,Ol=Mm,ju=ad,$m=0,hi=A0.m,nd=8,hh=o(128,I);r:for(;D(hh,0,7,k0,19);){if(ye(hi,1)){var C0=2+2*ye(hi,3);if((Rm=2+ye(hi,C0))>Ol)break r}else Rm=Ol;for(sd=0;sd<Ol&&Rm--;){pe(hi);var fh=hh[0+(127&U(hi))];he(hi,hi.u+fh.g);var Qo=fh.value;if(16>Qo)ju[sd++]=Qo,Qo!=0&&(nd=Qo);else{var E0=Qo==16,ph=Qo-16,gh=Gn[ph],yh=ye(hi,Tm[ph])+gh;if(sd+yh>Ol)break r;for(var T0=E0?nd:0;0<yh--;)ju[sd++]=T0}}$m=1;break r}$m||(A0.a=3),rd=$m}(rd=rd&&!Pl.h)&&(bu=D(N0,w0,8,ad,Mm)),rd&&bu!=0?vu=bu:(yu.a=3,vu=0)}if(vu==0)break a;if(xi&&Ko[sa]==1&&(xi=js[da].g==0),tl+=js[da].g,da+=vu,3>=sa){var ec,Fm=Os[0];for(ec=1;ec<Dr;++ec)Os[ec]>Fm&&(Fm=Os[ec]);Zr+=Fm}}if(Fa.nd=xi,Fa.Qb=0,xi&&(Fa.qb=(Js[3][Jr[3]+0].value<<24|Js[1][Jr[1]+0].value<<16|Js[2][Jr[2]+0].value)>>>0,tl==0&&256>Js[0][Jr[0]+0].value&&(Fa.Qb=1,Fa.qb+=Js[0][Jr[0]+0].value<<8)),Fa.jc=!Fa.Qb&&6>Zr,Fa.jc){var Nu,Dl=Fa;for(Nu=0;Nu<qn;++Nu){var al=Nu,Ll=Dl.pd[al],wu=Dl.G[0][Dl.H[0]+al];256<=wu.value?(Ll.g=wu.g+256,Ll.value=wu.value):(Ll.g=0,Ll.value=0,al>>=ls(wu,8,Ll),al>>=ls(Dl.G[1][Dl.H[1]+al],16,Ll),al>>=ls(Dl.G[2][Dl.H[2]+al],0,Ll),ls(Dl.G[3][Dl.H[3]+al],24,Ll))}}}vr.vc=fa,vr.Wb=wa,vr.Ya=ka,vr.yc=Xs,yt=1;break t}yt=0}if(!(de=yt)){Z.a=3;break e}if(0<Ue){if(Ne.ua=1<<Ue,!re(Ne.Wa,Ue)){Z.a=1,de=0;break e}}else Ne.ua=0;var Su=Z,bh=me,P0=fe,vh=Su.s,jh=vh.xc;if(Su.c=bh,Su.i=P0,vh.md=ve(bh,jh),vh.wc=jh==0?-1:(1<<jh)-1,G){Z.xb=y0;break e}if((Te=i(me*fe))==null){Z.a=1,de=0;break e}de=(de=Us(Z,Te,0,me,fe,fe,null))&&!be.h;break e}return de?(le!=null?le[0]=Te:(a(Te==null),a(G)),Z.$=0,G||gs(Ne)):gs(Ne),de}function Jl(S,T){var G=S.c*S.i,Z=G+T+16*T;return a(S.c<=T),S.V=i(Z),S.V==null?(S.Ta=null,S.Ua=0,S.a=1,0):(S.Ta=S.V,S.Ua=S.Ba+G+T,1)}function $n(S,T){var G=S.C,Z=T-G,le=S.V,de=S.Ba+S.c*G;for(a(T<=S.l.o);0<Z;){var me=16<Z?16:Z,fe=S.l.ma,be=S.l.width,Ne=be*me,Te=fe.ca,Ue=fe.tb+be*G,je=S.Ta,Le=S.Ua;Xl(S,me,le,de),Yo(je,Le,Te,Ue,Ne),qs(fe,G,G+me,Te,Ue,be),Z-=me,le+=me*S.c,G+=me}a(G==T),S.C=S.Ma=T}function ii(){this.ub=this.yd=this.td=this.Rb=0}function Lc(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function pm(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Mc(){this.Yb=function(){var S=[];return function T(G,Z,le){for(var de=le[Z],me=0;me<de&&(G.push(le.length>Z+1?[]:0),!(le.length<Z+1));me++)T(G[me],Z+1,le)}(S,0,[3,11]),S}()}function gm(){this.jb=i(3),this.Wc=d([4,8],Mc),this.Xc=d([4,17],Mc)}function Mo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Hs(){this.ld=this.La=this.dd=this.tc=0}function jn(){this.Na=this.la=0}function Rc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function $c(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function fl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Hs),this.Y=0,this.ya=Array(new $c),this.aa=0,this.l=new Bc}function Fc(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Ic(){this.cb=this.a=0,this.sc="",this.m=new Y,this.Od=new ii,this.Kc=new Lc,this.ed=new Mo,this.Qa=new pm,this.Ic=this.$c=this.Aa=0,this.D=new fl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Y),this.ia=0,this.pb=o(4,Rc),this.Pa=new gm,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Fc),this.Hd=0,this.rb=Array(new jn),this.sb=0,this.wa=Array(new Hs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new $c),this.L=this.aa=0,this.gd=d([4,2],Hs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Bc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ym(){var S=new Ic;return S!=null&&(S.a=0,S.sc="OK",S.cb=0,S.Xb=0,Vr||(Vr=Fn)),S}function Pa(S,T,G){return S.a==0&&(S.a=T,S.sc=G,S.cb=0),0}function Zd(S,T,G){return 3<=G&&S[T+0]==157&&S[T+1]==1&&S[T+2]==42}function bm(S,T){if(S==null)return 0;if(S.a=0,S.sc="OK",T==null)return Pa(S,2,"null VP8Io passed to VP8GetHeaders()");var G=T.data,Z=T.w,le=T.ha;if(4>le)return Pa(S,7,"Truncated header.");var de=G[Z+0]|G[Z+1]<<8|G[Z+2]<<16,me=S.Od;if(me.Rb=!(1&de),me.td=de>>1&7,me.yd=de>>4&1,me.ub=de>>5,3<me.td)return Pa(S,3,"Incorrect keyframe parameters.");if(!me.yd)return Pa(S,4,"Frame not displayable.");Z+=3,le-=3;var fe=S.Kc;if(me.Rb){if(7>le)return Pa(S,7,"cannot parse picture header");if(!Zd(G,Z,le))return Pa(S,3,"Bad code word");fe.c=16383&(G[Z+4]<<8|G[Z+3]),fe.Td=G[Z+4]>>6,fe.i=16383&(G[Z+6]<<8|G[Z+5]),fe.Ud=G[Z+6]>>6,Z+=7,le-=7,S.za=fe.c+15>>4,S.Ub=fe.i+15>>4,T.width=fe.c,T.height=fe.i,T.Da=0,T.j=0,T.v=0,T.va=T.width,T.o=T.height,T.da=0,T.ib=T.width,T.hb=T.height,T.U=T.width,T.T=T.height,n((de=S.Pa).jb,0,255,de.jb.length),a((de=S.Qa)!=null),de.Cb=0,de.Bb=0,de.Fb=1,n(de.Zb,0,0,de.Zb.length),n(de.Lb,0,0,de.Lb)}if(me.ub>le)return Pa(S,7,"bad partition length");B(de=S.m,G,Z,me.ub),Z+=me.ub,le-=me.ub,me.Rb&&(fe.Ld=te(de),fe.Kd=te(de)),fe=S.Qa;var be,Ne=S.Pa;if(a(de!=null),a(fe!=null),fe.Cb=te(de),fe.Cb){if(fe.Bb=te(de),te(de)){for(fe.Fb=te(de),be=0;4>be;++be)fe.Zb[be]=te(de)?K(de,7):0;for(be=0;4>be;++be)fe.Lb[be]=te(de)?K(de,6):0}if(fe.Bb)for(be=0;3>be;++be)Ne.jb[be]=te(de)?W(de,8):255}else fe.Bb=0;if(de.Ka)return Pa(S,3,"cannot parse segment header");if((fe=S.ed).zd=te(de),fe.Tb=W(de,6),fe.wb=W(de,3),fe.Pc=te(de),fe.Pc&&te(de)){for(Ne=0;4>Ne;++Ne)te(de)&&(fe.vd[Ne]=K(de,6));for(Ne=0;4>Ne;++Ne)te(de)&&(fe.od[Ne]=K(de,6))}if(S.L=fe.Tb==0?0:fe.zd?1:2,de.Ka)return Pa(S,3,"cannot parse filter header");var Te=le;if(le=be=Z,Z=be+Te,fe=Te,S.Xb=(1<<W(S.m,2))-1,Te<3*(Ne=S.Xb))G=7;else{for(be+=3*Ne,fe-=3*Ne,Te=0;Te<Ne;++Te){var Ue=G[le+0]|G[le+1]<<8|G[le+2]<<16;Ue>fe&&(Ue=fe),B(S.Jc[+Te],G,be,Ue),be+=Ue,fe-=Ue,le+=3}B(S.Jc[+Ne],G,be,fe),G=be<Z?0:5}if(G!=0)return Pa(S,G,"cannot parse partitions");for(G=W(be=S.m,7),le=te(be)?K(be,4):0,Z=te(be)?K(be,4):0,fe=te(be)?K(be,4):0,Ne=te(be)?K(be,4):0,be=te(be)?K(be,4):0,Te=S.Qa,Ue=0;4>Ue;++Ue){if(Te.Cb){var je=Te.Zb[Ue];Te.Fb||(je+=G)}else{if(0<Ue){S.pb[Ue]=S.pb[0];continue}je=G}var Le=S.pb[Ue];Le.Sc[0]=xu[Gr(je+le,127)],Le.Sc[1]=hu[Gr(je+0,127)],Le.Eb[0]=2*xu[Gr(je+Z,127)],Le.Eb[1]=101581*hu[Gr(je+fe,127)]>>16,8>Le.Eb[1]&&(Le.Eb[1]=8),Le.Qc[0]=xu[Gr(je+Ne,117)],Le.Qc[1]=hu[Gr(je+be,127)],Le.lc=je+be}if(!me.Rb)return Pa(S,4,"Not a key frame.");for(te(de),me=S.Pa,G=0;4>G;++G){for(le=0;8>le;++le)for(Z=0;3>Z;++Z)for(fe=0;11>fe;++fe)Ne=ue(de,Jo[G][le][Z][fe])?W(de,8):Ji[G][le][Z][fe],me.Wc[G][le].Yb[Z][fe]=Ne;for(le=0;17>le;++le)me.Xc[G][le]=me.Wc[G][g0[le]]}return S.kc=te(de),S.kc&&(S.Bd=W(de,8)),S.cb=1}function Fn(S,T,G,Z,le,de,me){var fe=T[le].Yb[G];for(G=0;16>le;++le){if(!ue(S,fe[G+0]))return le;for(;!ue(S,fe[G+1]);)if(fe=T[++le].Yb[0],G=0,le==16)return 16;var be=T[le+1].Yb;if(ue(S,fe[G+2])){var Ne=S,Te=0;if(ue(Ne,(je=fe)[(Ue=G)+3]))if(ue(Ne,je[Ue+6])){for(fe=0,Ue=2*(Te=ue(Ne,je[Ue+8]))+(je=ue(Ne,je[Ue+9+Te])),Te=0,je=br[Ue];je[fe];++fe)Te+=Te+ue(Ne,je[fe]);Te+=3+(8<<Ue)}else ue(Ne,je[Ue+7])?(Te=7+2*ue(Ne,165),Te+=ue(Ne,145)):Te=5+ue(Ne,159);else Te=ue(Ne,je[Ue+4])?3+ue(Ne,je[Ue+5]):2;fe=be[2]}else Te=1,fe=be[1];be=me+Da[le],0>(Ne=S).b&&se(Ne);var Ue,je=Ne.b,Le=(Ue=Ne.Ca>>1)-(Ne.I>>je)>>31;--Ne.b,Ne.Ca+=Le,Ne.Ca|=1,Ne.I-=(Ue+1&Le)<<je,de[be]=((Te^Le)-Le)*Z[(0<le)+0]}return 16}function Zl(S){var T=S.rb[S.sb-1];T.la=0,T.Na=0,n(S.zc,0,0,S.zc.length),S.ja=0}function on(S,T,G,Z,le){le=S[T+G+32*Z]+(le>>3),S[T+G+32*Z]=-256&le?0>le?0:255:le}function Ro(S,T,G,Z,le,de){on(S,T,0,G,Z+le),on(S,T,1,G,Z+de),on(S,T,2,G,Z-de),on(S,T,3,G,Z-le)}function Aa(S){return(20091*S>>16)+S}function $o(S,T,G,Z){var le,de=0,me=i(16);for(le=0;4>le;++le){var fe=S[T+0]+S[T+8],be=S[T+0]-S[T+8],Ne=(35468*S[T+4]>>16)-Aa(S[T+12]),Te=Aa(S[T+4])+(35468*S[T+12]>>16);me[de+0]=fe+Te,me[de+1]=be+Ne,me[de+2]=be-Ne,me[de+3]=fe-Te,de+=4,T++}for(le=de=0;4>le;++le)fe=(S=me[de+0]+4)+me[de+8],be=S-me[de+8],Ne=(35468*me[de+4]>>16)-Aa(me[de+12]),on(G,Z,0,0,fe+(Te=Aa(me[de+4])+(35468*me[de+12]>>16))),on(G,Z,1,0,be+Ne),on(G,Z,2,0,be-Ne),on(G,Z,3,0,fe-Te),de++,Z+=32}function vm(S,T,G,Z){var le=S[T+0]+4,de=35468*S[T+4]>>16,me=Aa(S[T+4]),fe=35468*S[T+1]>>16;Ro(G,Z,0,le+me,S=Aa(S[T+1]),fe),Ro(G,Z,1,le+de,S,fe),Ro(G,Z,2,le-de,S,fe),Ro(G,Z,3,le-me,S,fe)}function Qd(S,T,G,Z,le){$o(S,T,G,Z),le&&$o(S,T+16,G,Z+4)}function Ql(S,T,G,Z){xr(S,T+0,G,Z,1),xr(S,T+32,G,Z+128,1)}function li(S,T,G,Z){var le;for(S=S[T+0]+4,le=0;4>le;++le)for(T=0;4>T;++T)on(G,Z,T,le,S)}function eu(S,T,G,Z){S[T+0]&&Vs(S,T+0,G,Z),S[T+16]&&Vs(S,T+16,G,Z+4),S[T+32]&&Vs(S,T+32,G,Z+128),S[T+48]&&Vs(S,T+48,G,Z+128+4)}function pl(S,T,G,Z){var le,de=i(16);for(le=0;4>le;++le){var me=S[T+0+le]+S[T+12+le],fe=S[T+4+le]+S[T+8+le],be=S[T+4+le]-S[T+8+le],Ne=S[T+0+le]-S[T+12+le];de[0+le]=me+fe,de[8+le]=me-fe,de[4+le]=Ne+be,de[12+le]=Ne-be}for(le=0;4>le;++le)me=(S=de[0+4*le]+3)+de[3+4*le],fe=de[1+4*le]+de[2+4*le],be=de[1+4*le]-de[2+4*le],Ne=S-de[3+4*le],G[Z+0]=me+fe>>3,G[Z+16]=Ne+be>>3,G[Z+32]=me-fe>>3,G[Z+48]=Ne-be>>3,Z+=64}function eo(S,T,G){var Z,le=T-32,de=ds,me=255-S[le-1];for(Z=0;Z<G;++Z){var fe,be=de,Ne=me+S[T-1];for(fe=0;fe<G;++fe)S[T+fe]=be[Ne+S[le+fe]];T+=32}}function zc(S,T){eo(S,T,4)}function jm(S,T){eo(S,T,8)}function tu(S,T){eo(S,T,16)}function Qx(S,T){var G;for(G=0;16>G;++G)s(S,T+32*G,S,T-32,16)}function au(S,T){var G;for(G=16;0<G;--G)n(S,T,S[T-1],16),T+=32}function Li(S,T,G){var Z;for(Z=0;16>Z;++Z)n(T,G+32*Z,S,16)}function Mi(S,T){var G,Z=16;for(G=0;16>G;++G)Z+=S[T-1+32*G]+S[T+G-32];Li(Z>>5,S,T)}function ru(S,T){var G,Z=8;for(G=0;16>G;++G)Z+=S[T-1+32*G];Li(Z>>4,S,T)}function In(S,T){var G,Z=8;for(G=0;16>G;++G)Z+=S[T+G-32];Li(Z>>4,S,T)}function Ri(S,T){Li(128,S,T)}function Qt(S,T,G){return S+2*T+G+2>>2}function su(S,T){var G,Z=T-32;for(Z=new Uint8Array([Qt(S[Z-1],S[Z+0],S[Z+1]),Qt(S[Z+0],S[Z+1],S[Z+2]),Qt(S[Z+1],S[Z+2],S[Z+3]),Qt(S[Z+2],S[Z+3],S[Z+4])]),G=0;4>G;++G)s(S,T+32*G,Z,0,Z.length)}function Nm(S,T){var G=S[T-1],Z=S[T-1+32],le=S[T-1+64],de=S[T-1+96];ge(S,T+0,16843009*Qt(S[T-1-32],G,Z)),ge(S,T+32,16843009*Qt(G,Z,le)),ge(S,T+64,16843009*Qt(Z,le,de)),ge(S,T+96,16843009*Qt(le,de,de))}function Fo(S,T){var G,Z=4;for(G=0;4>G;++G)Z+=S[T+G-32]+S[T-1+32*G];for(Z>>=3,G=0;4>G;++G)n(S,T+32*G,Z,4)}function oi(S,T){var G=S[T-1+0],Z=S[T-1+32],le=S[T-1+64],de=S[T-1-32],me=S[T+0-32],fe=S[T+1-32],be=S[T+2-32],Ne=S[T+3-32];S[T+0+96]=Qt(Z,le,S[T-1+96]),S[T+1+96]=S[T+0+64]=Qt(G,Z,le),S[T+2+96]=S[T+1+64]=S[T+0+32]=Qt(de,G,Z),S[T+3+96]=S[T+2+64]=S[T+1+32]=S[T+0+0]=Qt(me,de,G),S[T+3+64]=S[T+2+32]=S[T+1+0]=Qt(fe,me,de),S[T+3+32]=S[T+2+0]=Qt(be,fe,me),S[T+3+0]=Qt(Ne,be,fe)}function ci(S,T){var G=S[T+1-32],Z=S[T+2-32],le=S[T+3-32],de=S[T+4-32],me=S[T+5-32],fe=S[T+6-32],be=S[T+7-32];S[T+0+0]=Qt(S[T+0-32],G,Z),S[T+1+0]=S[T+0+32]=Qt(G,Z,le),S[T+2+0]=S[T+1+32]=S[T+0+64]=Qt(Z,le,de),S[T+3+0]=S[T+2+32]=S[T+1+64]=S[T+0+96]=Qt(le,de,me),S[T+3+32]=S[T+2+64]=S[T+1+96]=Qt(de,me,fe),S[T+3+64]=S[T+2+96]=Qt(me,fe,be),S[T+3+96]=Qt(fe,be,be)}function Nn(S,T){var G=S[T-1+0],Z=S[T-1+32],le=S[T-1+64],de=S[T-1-32],me=S[T+0-32],fe=S[T+1-32],be=S[T+2-32],Ne=S[T+3-32];S[T+0+0]=S[T+1+64]=de+me+1>>1,S[T+1+0]=S[T+2+64]=me+fe+1>>1,S[T+2+0]=S[T+3+64]=fe+be+1>>1,S[T+3+0]=be+Ne+1>>1,S[T+0+96]=Qt(le,Z,G),S[T+0+64]=Qt(Z,G,de),S[T+0+32]=S[T+1+96]=Qt(G,de,me),S[T+1+32]=S[T+2+96]=Qt(de,me,fe),S[T+2+32]=S[T+3+96]=Qt(me,fe,be),S[T+3+32]=Qt(fe,be,Ne)}function $i(S,T){var G=S[T+0-32],Z=S[T+1-32],le=S[T+2-32],de=S[T+3-32],me=S[T+4-32],fe=S[T+5-32],be=S[T+6-32],Ne=S[T+7-32];S[T+0+0]=G+Z+1>>1,S[T+1+0]=S[T+0+64]=Z+le+1>>1,S[T+2+0]=S[T+1+64]=le+de+1>>1,S[T+3+0]=S[T+2+64]=de+me+1>>1,S[T+0+32]=Qt(G,Z,le),S[T+1+32]=S[T+0+96]=Qt(Z,le,de),S[T+2+32]=S[T+1+96]=Qt(le,de,me),S[T+3+32]=S[T+2+96]=Qt(de,me,fe),S[T+3+64]=Qt(me,fe,be),S[T+3+96]=Qt(fe,be,Ne)}function nu(S,T){var G=S[T-1+0],Z=S[T-1+32],le=S[T-1+64],de=S[T-1+96];S[T+0+0]=G+Z+1>>1,S[T+2+0]=S[T+0+32]=Z+le+1>>1,S[T+2+32]=S[T+0+64]=le+de+1>>1,S[T+1+0]=Qt(G,Z,le),S[T+3+0]=S[T+1+32]=Qt(Z,le,de),S[T+3+32]=S[T+1+64]=Qt(le,de,de),S[T+3+64]=S[T+2+64]=S[T+0+96]=S[T+1+96]=S[T+2+96]=S[T+3+96]=de}function gl(S,T){var G=S[T-1+0],Z=S[T-1+32],le=S[T-1+64],de=S[T-1+96],me=S[T-1-32],fe=S[T+0-32],be=S[T+1-32],Ne=S[T+2-32];S[T+0+0]=S[T+2+32]=G+me+1>>1,S[T+0+32]=S[T+2+64]=Z+G+1>>1,S[T+0+64]=S[T+2+96]=le+Z+1>>1,S[T+0+96]=de+le+1>>1,S[T+3+0]=Qt(fe,be,Ne),S[T+2+0]=Qt(me,fe,be),S[T+1+0]=S[T+3+32]=Qt(G,me,fe),S[T+1+32]=S[T+3+64]=Qt(Z,G,me),S[T+1+64]=S[T+3+96]=Qt(le,Z,G),S[T+1+96]=Qt(de,le,Z)}function qc(S,T){var G;for(G=0;8>G;++G)s(S,T+32*G,S,T-32,8)}function Fi(S,T){var G;for(G=0;8>G;++G)n(S,T,S[T-1],8),T+=32}function yl(S,T,G){var Z;for(Z=0;8>Z;++Z)n(T,G+32*Z,S,8)}function Io(S,T){var G,Z=8;for(G=0;8>G;++G)Z+=S[T+G-32]+S[T-1+32*G];yl(Z>>4,S,T)}function Es(S,T){var G,Z=4;for(G=0;8>G;++G)Z+=S[T+G-32];yl(Z>>3,S,T)}function di(S,T){var G,Z=4;for(G=0;8>G;++G)Z+=S[T-1+32*G];yl(Z>>3,S,T)}function to(S,T){yl(128,S,T)}function ui(S,T,G){var Z=S[T-G],le=S[T+0],de=3*(le-Z)+Cm[1020+S[T-2*G]-S[T+G]],me=Vo[112+(de+4>>3)];S[T-G]=ds[255+Z+Vo[112+(de+3>>3)]],S[T+0]=ds[255+le-me]}function Bo(S,T,G,Z){var le=S[T+0],de=S[T+G];return Yn[255+S[T-2*G]-S[T-G]]>Z||Yn[255+de-le]>Z}function zo(S,T,G,Z){return 4*Yn[255+S[T-G]-S[T+0]]+Yn[255+S[T-2*G]-S[T+G]]<=Z}function ao(S,T,G,Z,le){var de=S[T-3*G],me=S[T-2*G],fe=S[T-G],be=S[T+0],Ne=S[T+G],Te=S[T+2*G],Ue=S[T+3*G];return 4*Yn[255+fe-be]+Yn[255+me-Ne]>Z?0:Yn[255+S[T-4*G]-de]<=le&&Yn[255+de-me]<=le&&Yn[255+me-fe]<=le&&Yn[255+Ue-Te]<=le&&Yn[255+Te-Ne]<=le&&Yn[255+Ne-be]<=le}function bl(S,T,G,Z){var le=2*Z+1;for(Z=0;16>Z;++Z)zo(S,T+Z,G,le)&&ui(S,T+Z,G)}function Ii(S,T,G,Z){var le=2*Z+1;for(Z=0;16>Z;++Z)zo(S,T+Z*G,1,le)&&ui(S,T+Z*G,1)}function Uc(S,T,G,Z){var le;for(le=3;0<le;--le)bl(S,T+=4*G,G,Z)}function iu(S,T,G,Z){var le;for(le=3;0<le;--le)Ii(S,T+=4,G,Z)}function wn(S,T,G,Z,le,de,me,fe){for(de=2*de+1;0<le--;){if(ao(S,T,G,de,me))if(Bo(S,T,G,fe))ui(S,T,G);else{var be=S,Ne=T,Te=G,Ue=be[Ne-2*Te],je=be[Ne-Te],Le=be[Ne+0],Be=be[Ne+Te],Xe=be[Ne+2*Te],qe=27*(Je=Cm[1020+3*(Le-je)+Cm[1020+Ue-Be]])+63>>7,Qe=18*Je+63>>7,Je=9*Je+63>>7;be[Ne-3*Te]=ds[255+be[Ne-3*Te]+Je],be[Ne-2*Te]=ds[255+Ue+Qe],be[Ne-Te]=ds[255+je+qe],be[Ne+0]=ds[255+Le-qe],be[Ne+Te]=ds[255+Be-Qe],be[Ne+2*Te]=ds[255+Xe-Je]}T+=Z}}function Bi(S,T,G,Z,le,de,me,fe){for(de=2*de+1;0<le--;){if(ao(S,T,G,de,me))if(Bo(S,T,G,fe))ui(S,T,G);else{var be=S,Ne=T,Te=G,Ue=be[Ne-Te],je=be[Ne+0],Le=be[Ne+Te],Be=Vo[112+(4+(Xe=3*(je-Ue))>>3)],Xe=Vo[112+(Xe+3>>3)],qe=Be+1>>1;be[Ne-2*Te]=ds[255+be[Ne-2*Te]+qe],be[Ne-Te]=ds[255+Ue+Xe],be[Ne+0]=ds[255+je-Be],be[Ne+Te]=ds[255+Le-qe]}T+=Z}}function q(S,T,G,Z,le,de){wn(S,T,G,1,16,Z,le,de)}function oe(S,T,G,Z,le,de){wn(S,T,1,G,16,Z,le,de)}function we(S,T,G,Z,le,de){var me;for(me=3;0<me;--me)Bi(S,T+=4*G,G,1,16,Z,le,de)}function Ce(S,T,G,Z,le,de){var me;for(me=3;0<me;--me)Bi(S,T+=4,1,G,16,Z,le,de)}function Fe(S,T,G,Z,le,de,me,fe){wn(S,T,le,1,8,de,me,fe),wn(G,Z,le,1,8,de,me,fe)}function at(S,T,G,Z,le,de,me,fe){wn(S,T,1,le,8,de,me,fe),wn(G,Z,1,le,8,de,me,fe)}function ot(S,T,G,Z,le,de,me,fe){Bi(S,T+4*le,le,1,8,de,me,fe),Bi(G,Z+4*le,le,1,8,de,me,fe)}function kt(S,T,G,Z,le,de,me,fe){Bi(S,T+4,1,le,8,de,me,fe),Bi(G,Z+4,1,le,8,de,me,fe)}function Dt(){this.ba=new Ft,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ta,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Jt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function oa(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Sa(){this.ua=0,this.Wa=new Se,this.vb=new Se,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new H,this.yc=new I}function mr(){this.xb=this.a=0,this.l=new Bc,this.ca=new Ft,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new J,this.Pb=0,this.wd=new J,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Sa,this.ab=0,this.gc=o(4,oa),this.Oc=0}function Fr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Bc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function qa(S,T,G,Z,le,de,me){for(S=S==null?0:S[T+0],T=0;T<me;++T)le[de+T]=S+G[Z+T]&255,S=le[de+T]}function Ir(S,T,G,Z,le,de,me){var fe;if(S==null)qa(null,null,G,Z,le,de,me);else for(fe=0;fe<me;++fe)le[de+fe]=S[T+fe]+G[Z+fe]&255}function Br(S,T,G,Z,le,de,me){if(S==null)qa(null,null,G,Z,le,de,me);else{var fe,be=S[T+0],Ne=be,Te=be;for(fe=0;fe<me;++fe)Ne=Te+(be=S[T+fe])-Ne,Te=G[Z+fe]+(-256&Ne?0>Ne?0:255:Ne)&255,Ne=be,le[de+fe]=Te}}function ys(S,T,G,Z){var le=T.width,de=T.o;if(a(S!=null&&T!=null),0>G||0>=Z||G+Z>de)return null;if(!S.Cc){if(S.ga==null){var me;if(S.ga=new Fr,(me=S.ga==null)||(me=T.width*T.o,a(S.Gb.length==0),S.Gb=i(me),S.Uc=0,S.Gb==null?me=0:(S.mb=S.Gb,S.nb=S.Uc,S.rc=null,me=1),me=!me),!me){me=S.ga;var fe=S.Fa,be=S.P,Ne=S.qc,Te=S.mb,Ue=S.nb,je=be+1,Le=Ne-1,Be=me.l;if(a(fe!=null&&Te!=null&&T!=null),Zi[0]=null,Zi[1]=qa,Zi[2]=Ir,Zi[3]=Br,me.ca=Te,me.tb=Ue,me.c=T.width,me.i=T.height,a(0<me.c&&0<me.i),1>=Ne)T=0;else if(me.$a=3&fe[be+0],me.Z=fe[be+0]>>2&3,me.Lc=fe[be+0]>>4&3,be=fe[be+0]>>6&3,0>me.$a||1<me.$a||4<=me.Z||1<me.Lc||be)T=0;else if(Be.put=Gt,Be.ac=si,Be.bc=ks,Be.ma=me,Be.width=T.width,Be.height=T.height,Be.Da=T.Da,Be.v=T.v,Be.va=T.va,Be.j=T.j,Be.o=T.o,me.$a)e:{a(me.$a==1),T=cr();t:for(;;){if(T==null){T=0;break e}if(a(me!=null),me.mc=T,T.c=me.c,T.i=me.i,T.l=me.l,T.l.ma=me,T.l.width=me.c,T.l.height=me.i,T.a=0,X(T.m,fe,je,Le),!ni(me.c,me.i,1,T,null)||(T.ab==1&&T.gc[0].hc==3&&vn(T.s)?(me.ic=1,fe=T.c*T.i,T.Ta=null,T.Ua=0,T.V=i(fe),T.Ba=0,T.V==null?(T.a=1,T=0):T=1):(me.ic=0,T=Jl(T,me.c)),!T))break t;T=1;break e}me.mc=null,T=0}else T=Le>=me.c*me.i;me=!T}if(me)return null;S.ga.Lc!=1?S.Ga=0:Z=de-G}a(S.ga!=null),a(G+Z<=de);e:{if(T=(fe=S.ga).c,de=fe.l.o,fe.$a==0){if(je=S.rc,Le=S.Vc,Be=S.Fa,be=S.P+1+G*T,Ne=S.mb,Te=S.nb+G*T,a(be<=S.P+S.qc),fe.Z!=0)for(a(Zi[fe.Z]!=null),me=0;me<Z;++me)Zi[fe.Z](je,Le,Be,be,Ne,Te,T),je=Ne,Le=Te,Te+=T,be+=T;else for(me=0;me<Z;++me)s(Ne,Te,Be,be,T),je=Ne,Le=Te,Te+=T,be+=T;S.rc=je,S.Vc=Le}else{if(a(fe.mc!=null),T=G+Z,a((me=fe.mc)!=null),a(T<=me.i),me.C>=T)T=1;else if(fe.ic||qo(),fe.ic){fe=me.V,je=me.Ba,Le=me.c;var Xe=me.i,qe=(Be=1,be=me.$/Le,Ne=me.$%Le,Te=me.m,Ue=me.s,me.$),Qe=Le*Xe,Je=Le*T,dt=Ue.wc,it=qe<Je?ps(Ue,Ne,be):null;a(qe<=Qe),a(T<=Xe),a(vn(Ue));t:for(;;){for(;!Te.h&&qe<Je;){if(Ne&dt||(it=ps(Ue,Ne,be)),a(it!=null),pe(Te),256>(Xe=or(it.G[0],it.H[0],Te)))fe[je+qe]=Xe,++qe,++Ne>=Le&&(Ne=0,++be<=T&&!(be%16)&&Cs(me,be));else{if(!(280>Xe)){Be=0;break t}Xe=Qa(Xe-256,Te);var Pt,jt=or(it.G[4],it.H[4],Te);if(pe(Te),!(qe>=(jt=fs(Le,jt=Qa(jt,Te)))&&Qe-qe>=Xe)){Be=0;break t}for(Pt=0;Pt<Xe;++Pt)fe[je+qe+Pt]=fe[je+qe+Pt-jt];for(qe+=Xe,Ne+=Xe;Ne>=Le;)Ne-=Le,++be<=T&&!(be%16)&&Cs(me,be);qe<Je&&Ne&dt&&(it=ps(Ue,Ne,be))}a(Te.h==ee(Te))}Cs(me,be>T?T:be);break t}!Be||Te.h&&qe<Qe?(Be=0,me.a=Te.h?5:3):me.$=qe,T=Be}else T=Us(me,me.V,me.Ba,me.c,me.i,T,$n);if(!T){Z=0;break e}}G+Z>=de&&(S.Cc=1),Z=1}if(!Z)return null;if(S.Cc&&((Z=S.ga)!=null&&(Z.mc=null),S.ga=null,0<S.Ga))return alert("todo:WebPDequantizeLevels"),null}return S.nb+G*le}function vl(S,T,G,Z,le,de){for(;0<le--;){var me,fe=S,be=T+(G?1:0),Ne=S,Te=T+(G?0:3);for(me=0;me<Z;++me){var Ue=Ne[Te+4*me];Ue!=255&&(Ue*=32897,fe[be+4*me+0]=fe[be+4*me+0]*Ue>>23,fe[be+4*me+1]=fe[be+4*me+1]*Ue>>23,fe[be+4*me+2]=fe[be+4*me+2]*Ue>>23)}T+=de}}function ro(S,T,G,Z,le){for(;0<Z--;){var de;for(de=0;de<G;++de){var me=S[T+2*de+0],fe=15&(Ne=S[T+2*de+1]),be=4369*fe,Ne=(240&Ne|Ne>>4)*be>>16;S[T+2*de+0]=(240&me|me>>4)*be>>16&240|(15&me|me<<4)*be>>16>>4&15,S[T+2*de+1]=240&Ne|fe}T+=le}}function eh(S,T,G,Z,le,de,me,fe){var be,Ne,Te=255;for(Ne=0;Ne<le;++Ne){for(be=0;be<Z;++be){var Ue=S[T+be];de[me+4*be]=Ue,Te&=Ue}T+=G,me+=fe}return Te!=255}function wm(S,T,G,Z,le){var de;for(de=0;de<le;++de)G[Z+de]=S[T+de]>>8}function qo(){Jc=vl,_n=ro,An=eh,Yo=wm}function mi(S,T,G){A[S]=function(Z,le,de,me,fe,be,Ne,Te,Ue,je,Le,Be,Xe,qe,Qe,Je,dt){var it,Pt=dt-1>>1,jt=fe[be+0]|Ne[Te+0]<<16,ra=Ue[je+0]|Le[Be+0]<<16;a(Z!=null);var wt=3*jt+ra+131074>>2;for(T(Z[le+0],255&wt,wt>>16,Xe,qe),de!=null&&(wt=3*ra+jt+131074>>2,T(de[me+0],255&wt,wt>>16,Qe,Je)),it=1;it<=Pt;++it){var ya=fe[be+it]|Ne[Te+it]<<16,zr=Ue[je+it]|Le[Be+it]<<16,ea=jt+ya+ra+zr+524296,St=ea+2*(ya+ra)>>3;wt=St+jt>>1,jt=(ea=ea+2*(jt+zr)>>3)+ya>>1,T(Z[le+2*it-1],255&wt,wt>>16,Xe,qe+(2*it-1)*G),T(Z[le+2*it-0],255&jt,jt>>16,Xe,qe+(2*it-0)*G),de!=null&&(wt=ea+ra>>1,jt=St+zr>>1,T(de[me+2*it-1],255&wt,wt>>16,Qe,Je+(2*it-1)*G),T(de[me+2*it+0],255&jt,jt>>16,Qe,Je+(2*it+0)*G)),jt=ya,ra=zr}1&dt||(wt=3*jt+ra+131074>>2,T(Z[le+dt-1],255&wt,wt>>16,Xe,qe+(dt-1)*G),de!=null&&(wt=3*ra+jt+131074>>2,T(de[me+dt-1],255&wt,wt>>16,Qe,Je+(dt-1)*G)))}}function lu(){us[Ps]=El,us[Zc]=Qi,us[Xi]=mo,us[uu]=Pm,us[Wo]=Om,us[Sl]=td,us[Em]=Dm,us[mu]=Qi,us[co]=Pm,us[_l]=Om,us[Qc]=td}function so(S){return S&-16384?0>S?0:255:S>>Qy}function Bn(S,T){return so((19077*S>>8)+(26149*T>>8)-14234)}function os(S,T,G){return so((19077*S>>8)-(6419*T>>8)-(13320*G>>8)+8708)}function zi(S,T){return so((19077*S>>8)+(33050*T>>8)-17685)}function qi(S,T,G,Z,le){Z[le+0]=Bn(S,G),Z[le+1]=os(S,T,G),Z[le+2]=zi(S,T)}function Uo(S,T,G,Z,le){Z[le+0]=zi(S,T),Z[le+1]=os(S,T,G),Z[le+2]=Bn(S,G)}function Hc(S,T,G,Z,le){var de=os(S,T,G);T=de<<3&224|zi(S,T)>>3,Z[le+0]=248&Bn(S,G)|de>>5,Z[le+1]=T}function Ts(S,T,G,Z,le){var de=240&zi(S,T)|15;Z[le+0]=240&Bn(S,G)|os(S,T,G)>>4,Z[le+1]=de}function jl(S,T,G,Z,le){Z[le+0]=255,qi(S,T,G,Z,le+1)}function Yc(S,T,G,Z,le){Uo(S,T,G,Z,le),Z[le+3]=255}function Sm(S,T,G,Z,le){qi(S,T,G,Z,le),Z[le+3]=255}function Gr(S,T){return 0>S?0:S>T?T:S}function Sn(S,T,G){A[S]=function(Z,le,de,me,fe,be,Ne,Te,Ue){for(var je=Te+(-2&Ue)*G;Te!=je;)T(Z[le+0],de[me+0],fe[be+0],Ne,Te),T(Z[le+1],de[me+0],fe[be+0],Ne,Te+G),le+=2,++me,++be,Te+=2*G;1&Ue&&T(Z[le+0],de[me+0],fe[be+0],Ne,Te)}}function Gc(S,T,G){return G==0?S==0?T==0?6:5:T==0?4:0:G}function Nl(S,T,G,Z,le){switch(S>>>30){case 3:xr(T,G,Z,le,0);break;case 2:Ki(T,G,Z,le);break;case 1:Vs(T,G,Z,le)}}function zn(S,T){var G,Z,le=T.M,de=T.Nb,me=S.oc,fe=S.pc+40,be=S.oc,Ne=S.pc+584,Te=S.oc,Ue=S.pc+600;for(G=0;16>G;++G)me[fe+32*G-1]=129;for(G=0;8>G;++G)be[Ne+32*G-1]=129,Te[Ue+32*G-1]=129;for(0<le?me[fe-1-32]=be[Ne-1-32]=Te[Ue-1-32]=129:(n(me,fe-32-1,127,21),n(be,Ne-32-1,127,9),n(Te,Ue-32-1,127,9)),Z=0;Z<S.za;++Z){var je=T.ya[T.aa+Z];if(0<Z){for(G=-1;16>G;++G)s(me,fe+32*G-4,me,fe+32*G+12,4);for(G=-1;8>G;++G)s(be,Ne+32*G-4,be,Ne+32*G+4,4),s(Te,Ue+32*G-4,Te,Ue+32*G+4,4)}var Le=S.Gd,Be=S.Hd+Z,Xe=je.ad,qe=je.Hc;if(0<le&&(s(me,fe-32,Le[Be].y,0,16),s(be,Ne-32,Le[Be].f,0,8),s(Te,Ue-32,Le[Be].ea,0,8)),je.Za){var Qe=me,Je=fe-32+16;for(0<le&&(Z>=S.za-1?n(Qe,Je,Le[Be].y[15],4):s(Qe,Je,Le[Be+1].y,0,4)),G=0;4>G;G++)Qe[Je+128+G]=Qe[Je+256+G]=Qe[Je+384+G]=Qe[Je+0+G];for(G=0;16>G;++G,qe<<=2)Qe=me,Je=fe+Zo[G],Ws[je.Ob[G]](Qe,Je),Nl(qe,Xe,16*+G,Qe,Je)}else if(Qe=Gc(Z,le,je.Ob[0]),Cl[Qe](me,fe),qe!=0)for(G=0;16>G;++G,qe<<=2)Nl(qe,Xe,16*+G,me,fe+Zo[G]);for(G=je.Gc,Qe=Gc(Z,le,je.Dd),Cn[Qe](be,Ne),Cn[Qe](Te,Ue),qe=Xe,Qe=be,Je=Ne,255&(je=0|G)&&(170&je?Un(qe,256,Qe,Je):Ho(qe,256,Qe,Je)),je=Te,qe=Ue,255&(G>>=8)&&(170&G?Un(Xe,320,je,qe):Ho(Xe,320,je,qe)),le<S.Ub-1&&(s(Le[Be].y,0,me,fe+480,16),s(Le[Be].f,0,be,Ne+224,8),s(Le[Be].ea,0,Te,Ue+224,8)),G=8*de*S.B,Le=S.sa,Be=S.ta+16*Z+16*de*S.R,Xe=S.qa,je=S.ra+8*Z+G,qe=S.Ha,Qe=S.Ia+8*Z+G,G=0;16>G;++G)s(Le,Be+G*S.R,me,fe+32*G,16);for(G=0;8>G;++G)s(Xe,je+G*S.B,be,Ne+32*G,8),s(qe,Qe+G*S.B,Te,Ue+32*G,8)}}function Vc(S,T,G,Z,le,de,me,fe,be){var Ne=[0],Te=[0],Ue=0,je=be!=null?be.kd:0,Le=be??new Jt;if(S==null||12>G)return 7;Le.data=S,Le.w=T,Le.ha=G,T=[T],G=[G],Le.gb=[Le.gb];e:{var Be=T,Xe=G,qe=Le.gb;if(a(S!=null),a(Xe!=null),a(qe!=null),qe[0]=0,12<=Xe[0]&&!r(S,Be[0],"RIFF")){if(r(S,Be[0]+8,"WEBP")){qe=3;break e}var Qe=ke(S,Be[0]+4);if(12>Qe||4294967286<Qe){qe=3;break e}if(je&&Qe>Xe[0]-8){qe=7;break e}qe[0]=Qe,Be[0]+=12,Xe[0]-=12}qe=0}if(qe!=0)return qe;for(Qe=0<Le.gb[0],G=G[0];;){e:{var Je=S;Xe=T,qe=G;var dt=Ne,it=Te,Pt=Be=[0];if((wt=Ue=[Ue])[0]=0,8>qe[0])qe=7;else{if(!r(Je,Xe[0],"VP8X")){if(ke(Je,Xe[0]+4)!=10){qe=3;break e}if(18>qe[0]){qe=7;break e}var jt=ke(Je,Xe[0]+8),ra=1+De(Je,Xe[0]+12);if(2147483648<=ra*(Je=1+De(Je,Xe[0]+15))){qe=3;break e}Pt!=null&&(Pt[0]=jt),dt!=null&&(dt[0]=ra),it!=null&&(it[0]=Je),Xe[0]+=18,qe[0]-=18,wt[0]=1}qe=0}}if(Ue=Ue[0],Be=Be[0],qe!=0)return qe;if(Xe=!!(2&Be),!Qe&&Ue)return 3;if(de!=null&&(de[0]=!!(16&Be)),me!=null&&(me[0]=Xe),fe!=null&&(fe[0]=0),me=Ne[0],Be=Te[0],Ue&&Xe&&be==null){qe=0;break}if(4>G){qe=7;break}if(Qe&&Ue||!Qe&&!Ue&&!r(S,T[0],"ALPH")){G=[G],Le.na=[Le.na],Le.P=[Le.P],Le.Sa=[Le.Sa];e:{jt=S,qe=T,Qe=G;var wt=Le.gb;dt=Le.na,it=Le.P,Pt=Le.Sa,ra=22,a(jt!=null),a(Qe!=null),Je=qe[0];var ya=Qe[0];for(a(dt!=null),a(Pt!=null),dt[0]=null,it[0]=null,Pt[0]=0;;){if(qe[0]=Je,Qe[0]=ya,8>ya){qe=7;break e}var zr=ke(jt,Je+4);if(4294967286<zr){qe=3;break e}var ea=8+zr+1&-2;if(ra+=ea,0<wt&&ra>wt){qe=3;break e}if(!r(jt,Je,"VP8 ")||!r(jt,Je,"VP8L")){qe=0;break e}if(ya[0]<ea){qe=7;break e}r(jt,Je,"ALPH")||(dt[0]=jt,it[0]=Je+8,Pt[0]=zr),Je+=ea,ya-=ea}}if(G=G[0],Le.na=Le.na[0],Le.P=Le.P[0],Le.Sa=Le.Sa[0],qe!=0)break}G=[G],Le.Ja=[Le.Ja],Le.xa=[Le.xa];e:if(wt=S,qe=T,Qe=G,dt=Le.gb[0],it=Le.Ja,Pt=Le.xa,jt=qe[0],Je=!r(wt,jt,"VP8 "),ra=!r(wt,jt,"VP8L"),a(wt!=null),a(Qe!=null),a(it!=null),a(Pt!=null),8>Qe[0])qe=7;else{if(Je||ra){if(wt=ke(wt,jt+4),12<=dt&&wt>dt-12){qe=3;break e}if(je&&wt>Qe[0]-8){qe=7;break e}it[0]=wt,qe[0]+=8,Qe[0]-=8,Pt[0]=ra}else Pt[0]=5<=Qe[0]&&wt[jt+0]==47&&!(wt[jt+4]>>5),it[0]=Qe[0];qe=0}if(G=G[0],Le.Ja=Le.Ja[0],Le.xa=Le.xa[0],T=T[0],qe!=0)break;if(4294967286<Le.Ja)return 3;if(fe==null||Xe||(fe[0]=Le.xa?2:1),me=[me],Be=[Be],Le.xa){if(5>G){qe=7;break}fe=me,je=Be,Xe=de,S==null||5>G?S=0:5<=G&&S[T+0]==47&&!(S[T+4]>>5)?(Qe=[0],wt=[0],dt=[0],X(it=new J,S,T,G),lr(it,Qe,wt,dt)?(fe!=null&&(fe[0]=Qe[0]),je!=null&&(je[0]=wt[0]),Xe!=null&&(Xe[0]=dt[0]),S=1):S=0):S=0}else{if(10>G){qe=7;break}fe=Be,S==null||10>G||!Zd(S,T+3,G-3)?S=0:(je=S[T+0]|S[T+1]<<8|S[T+2]<<16,Xe=16383&(S[T+7]<<8|S[T+6]),S=16383&(S[T+9]<<8|S[T+8]),1&je||3<(je>>1&7)||!(je>>4&1)||je>>5>=Le.Ja||!Xe||!S?S=0:(me&&(me[0]=Xe),fe&&(fe[0]=S),S=1))}if(!S||(me=me[0],Be=Be[0],Ue&&(Ne[0]!=me||Te[0]!=Be)))return 3;be!=null&&(be[0]=Le,be.offset=T-be.w,a(4294967286>T-be.w),a(be.offset==be.ha-G));break}return qe==0||qe==7&&Ue&&be==null?(de!=null&&(de[0]|=Le.na!=null&&0<Le.na.length),Z!=null&&(Z[0]=me),le!=null&&(le[0]=Be),0):qe}function bs(S,T,G){var Z=T.width,le=T.height,de=0,me=0,fe=Z,be=le;if(T.Da=S!=null&&0<S.Da,T.Da&&(fe=S.cd,be=S.bd,de=S.v,me=S.j,11>G||(de&=-2,me&=-2),0>de||0>me||0>=fe||0>=be||de+fe>Z||me+be>le))return 0;if(T.v=de,T.j=me,T.va=de+fe,T.o=me+be,T.U=fe,T.T=be,T.da=S!=null&&0<S.da,T.da){if(!Ge(fe,be,G=[S.ib],de=[S.hb]))return 0;T.ib=G[0],T.hb=de[0]}return T.ob=S!=null&&S.ob,T.Kb=S==null||!S.Sd,T.da&&(T.ob=T.ib<3*Z/4&&T.hb<3*le/4,T.Kb=0),1}function Ys(S){if(S==null)return 2;if(11>S.S){var T=S.f.RGBA;T.fb+=(S.height-1)*T.A,T.A=-T.A}else T=S.f.kb,S=S.height,T.O+=(S-1)*T.fa,T.fa=-T.fa,T.N+=(S-1>>1)*T.Ab,T.Ab=-T.Ab,T.W+=(S-1>>1)*T.Db,T.Db=-T.Db,T.F!=null&&(T.J+=(S-1)*T.lb,T.lb=-T.lb);return 0}function no(S,T,G,Z){if(Z==null||0>=S||0>=T)return 2;if(G!=null){if(G.Da){var le=G.cd,de=G.bd,me=-2&G.v,fe=-2&G.j;if(0>me||0>fe||0>=le||0>=de||me+le>S||fe+de>T)return 2;S=le,T=de}if(G.da){if(!Ge(S,T,le=[G.ib],de=[G.hb]))return 2;S=le[0],T=de[0]}}Z.width=S,Z.height=T;e:{var be=Z.width,Ne=Z.height;if(S=Z.S,0>=be||0>=Ne||!(S>=Ps&&13>S))S=2;else{if(0>=Z.Rd&&Z.sd==null){me=de=le=T=0;var Te=(fe=be*j0[S])*Ne;if(11>S||(de=(Ne+1)/2*(T=(be+1)/2),S==12&&(me=(le=be)*Ne)),(Ne=i(Te+2*de+me))==null){S=1;break e}Z.sd=Ne,11>S?((be=Z.f.RGBA).eb=Ne,be.fb=0,be.A=fe,be.size=Te):((be=Z.f.kb).y=Ne,be.O=0,be.fa=fe,be.Fd=Te,be.f=Ne,be.N=0+Te,be.Ab=T,be.Cd=de,be.ea=Ne,be.W=0+Te+de,be.Db=T,be.Ed=de,S==12&&(be.F=Ne,be.J=0+Te+2*de),be.Tc=me,be.lb=le)}if(T=1,le=Z.S,de=Z.width,me=Z.height,le>=Ps&&13>le)if(11>le)S=Z.f.RGBA,T&=(fe=Math.abs(S.A))*(me-1)+de<=S.size,T&=fe>=de*j0[le],T&=S.eb!=null;else{S=Z.f.kb,fe=(de+1)/2,Te=(me+1)/2,be=Math.abs(S.fa),Ne=Math.abs(S.Ab);var Ue=Math.abs(S.Db),je=Math.abs(S.lb),Le=je*(me-1)+de;T&=be*(me-1)+de<=S.Fd,T&=Ne*(Te-1)+fe<=S.Cd,T=(T&=Ue*(Te-1)+fe<=S.Ed)&be>=de&Ne>=fe&Ue>=fe,T&=S.y!=null,T&=S.f!=null,T&=S.ea!=null,le==12&&(T&=je>=de,T&=Le<=S.Tc,T&=S.F!=null)}else T=0;S=T?0:2}}return S!=0||G!=null&&G.fd&&(S=Ys(Z)),S}var qn=64,Ui=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Wc=24,wl=32,yr=8,th=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];et("Predictor0","PredictorAdd0"),A.Predictor0=function(){return 4278190080},A.Predictor1=function(S){return S},A.Predictor2=function(S,T,G){return T[G+0]},A.Predictor3=function(S,T,G){return T[G+1]},A.Predictor4=function(S,T,G){return T[G-1]},A.Predictor5=function(S,T,G){return tt(tt(S,T[G+1]),T[G+0])},A.Predictor6=function(S,T,G){return tt(S,T[G-1])},A.Predictor7=function(S,T,G){return tt(S,T[G+0])},A.Predictor8=function(S,T,G){return tt(T[G-1],T[G+0])},A.Predictor9=function(S,T,G){return tt(T[G+0],T[G+1])},A.Predictor10=function(S,T,G){return tt(tt(S,T[G-1]),tt(T[G+0],T[G+1]))},A.Predictor11=function(S,T,G){var Z=T[G+0];return 0>=Nt(Z>>24&255,S>>24&255,(T=T[G-1])>>24&255)+Nt(Z>>16&255,S>>16&255,T>>16&255)+Nt(Z>>8&255,S>>8&255,T>>8&255)+Nt(255&Z,255&S,255&T)?Z:S},A.Predictor12=function(S,T,G){var Z=T[G+0];return(Re((S>>24&255)+(Z>>24&255)-((T=T[G-1])>>24&255))<<24|Re((S>>16&255)+(Z>>16&255)-(T>>16&255))<<16|Re((S>>8&255)+(Z>>8&255)-(T>>8&255))<<8|Re((255&S)+(255&Z)-(255&T)))>>>0},A.Predictor13=function(S,T,G){var Z=T[G-1];return(bt((S=tt(S,T[G+0]))>>24&255,Z>>24&255)<<24|bt(S>>16&255,Z>>16&255)<<16|bt(S>>8&255,Z>>8&255)<<8|bt(255&S,255&Z))>>>0};var Hi=A.PredictorAdd0;A.PredictorAdd1=Ut,et("Predictor2","PredictorAdd2"),et("Predictor3","PredictorAdd3"),et("Predictor4","PredictorAdd4"),et("Predictor5","PredictorAdd5"),et("Predictor6","PredictorAdd6"),et("Predictor7","PredictorAdd7"),et("Predictor8","PredictorAdd8"),et("Predictor9","PredictorAdd9"),et("Predictor10","PredictorAdd10"),et("Predictor11","PredictorAdd11"),et("Predictor12","PredictorAdd12"),et("Predictor13","PredictorAdd13");var Yi=A.PredictorAdd2;Oe("ColorIndexInverseTransform","MapARGB","32b",function(S){return S>>8&255},function(S){return S}),Oe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(S){return S},function(S){return S>>8&255});var Kc,ou=A.ColorIndexInverseTransform,cs=A.MapARGB,Gi=A.VP8LColorIndexInverseTransformAlpha,io=A.MapAlpha,lo=A.VP8LPredictorsAdd=[];lo.length=16,(A.VP8LPredictors=[]).length=16,(A.VP8LPredictorsAdd_C=[]).length=16,(A.VP8LPredictors_C=[]).length=16;var Vi,Xc,Gs,Wi,Oa,Ua,er,xr,Ki,Un,Vs,Ho,ah,oo,rh,sh,nh,x0,h0,f0,ih,lh,_m,Hn,Jc,_n,An,Yo,Am=i(511),cu=i(2041),du=i(225),km=i(767),Go=0,Cm=cu,Vo=du,ds=km,Yn=Am,Ps=0,Zc=1,Xi=2,uu=3,Wo=4,Sl=5,Em=6,mu=7,co=8,_l=9,Qc=10,Tm=[2,3,7],Gn=[3,3,11],kn=[280,256,256,256,40],Ko=[0,1,1,1,0],Al=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],kl=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Xo=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],p0=8,xu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],hu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Vr=null,br=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Da=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],uo=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ji=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],oh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Jo=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],g0=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Cl=[],Ws=[],Cn=[],y0=1,ed=2,Zi=[],us=[];mi("UpsampleRgbLinePair",qi,3),mi("UpsampleBgrLinePair",Uo,3),mi("UpsampleRgbaLinePair",Sm,4),mi("UpsampleBgraLinePair",Yc,4),mi("UpsampleArgbLinePair",jl,4),mi("UpsampleRgba4444LinePair",Ts,2),mi("UpsampleRgb565LinePair",Hc,2);var El=A.UpsampleRgbLinePair,mo=A.UpsampleBgrLinePair,Qi=A.UpsampleRgbaLinePair,Pm=A.UpsampleBgraLinePair,Om=A.UpsampleArgbLinePair,td=A.UpsampleRgba4444LinePair,Dm=A.UpsampleRgb565LinePair,el=16,Wr=1<<el-1,xo=-227,Lm=482,Qy=6,b0=0,eb=i(256),Kr=i(256),ch=i(256),fu=i(256),pu=i(Lm-xo),dh=i(Lm-xo);Sn("YuvToRgbRow",qi,3),Sn("YuvToBgrRow",Uo,3),Sn("YuvToRgbaRow",Sm,4),Sn("YuvToBgraRow",Yc,4),Sn("YuvToArgbRow",jl,4),Sn("YuvToRgba4444Row",Ts,2),Sn("YuvToRgb565Row",Hc,2);var Zo=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Tl=[0,2,8],tb=[8,7,6,4,4,2,2,2,1,1,1,1],v0=1;this.WebPDecodeRGBA=function(S,T,G,Z,le){var de=Zc,me=new Dt,fe=new Ft;me.ba=fe,fe.S=de,fe.width=[fe.width],fe.height=[fe.height];var be=fe.width,Ne=fe.height,Te=new Rt;if(Te==null||S==null)var Ue=2;else a(Te!=null),Ue=Vc(S,T,G,Te.width,Te.height,Te.Pd,Te.Qd,Te.format,null);if(Ue!=0?be=0:(be!=null&&(be[0]=Te.width[0]),Ne!=null&&(Ne[0]=Te.height[0]),be=1),be){fe.width=fe.width[0],fe.height=fe.height[0],Z!=null&&(Z[0]=fe.width),le!=null&&(le[0]=fe.height);e:{if(Z=new Bc,(le=new Jt).data=S,le.w=T,le.ha=G,le.kd=1,T=[0],a(le!=null),((S=Vc(le.data,le.w,le.ha,null,null,null,T,null,le))==0||S==7)&&T[0]&&(S=4),(T=S)==0){if(a(me!=null),Z.data=le.data,Z.w=le.w+le.offset,Z.ha=le.ha-le.offset,Z.put=Gt,Z.ac=si,Z.bc=ks,Z.ma=me,le.xa){if((S=cr())==null){me=1;break e}if(function(je,Le){var Be=[0],Xe=[0],qe=[0];t:for(;;){if(je==null)return 0;if(Le==null)return je.a=2,0;if(je.l=Le,je.a=0,X(je.m,Le.data,Le.w,Le.ha),!lr(je.m,Be,Xe,qe)){je.a=3;break t}if(je.xb=ed,Le.width=Be[0],Le.height=Xe[0],!ni(Be[0],Xe[0],1,je,null))break t;return 1}return a(je.a!=0),0}(S,Z)){if(Z=(T=no(Z.width,Z.height,me.Oa,me.ba))==0){t:{Z=S;a:for(;;){if(Z==null){Z=0;break t}if(a(Z.s.yc!=null),a(Z.s.Ya!=null),a(0<Z.s.Wb),a((G=Z.l)!=null),a((le=G.ma)!=null),Z.xb!=0){if(Z.ca=le.ba,Z.tb=le.tb,a(Z.ca!=null),!bs(le.Oa,G,uu)){Z.a=2;break a}if(!Jl(Z,G.width)||G.da)break a;if((G.da||vt(Z.ca.S))&&qo(),11>Z.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Z.ca.f.kb.F!=null&&qo()),Z.Pb&&0<Z.s.ua&&Z.s.vb.X==null&&!re(Z.s.vb,Z.s.Wa.Xa)){Z.a=1;break a}Z.xb=0}if(!Us(Z,Z.V,Z.Ba,Z.c,Z.i,G.o,Rn))break a;le.Dc=Z.Ma,Z=1;break t}a(Z.a!=0),Z=0}Z=!Z}Z&&(T=S.a)}else T=S.a}else{if((S=new ym)==null){me=1;break e}if(S.Fa=le.na,S.P=le.P,S.qc=le.Sa,bm(S,Z)){if((T=no(Z.width,Z.height,me.Oa,me.ba))==0){if(S.Aa=0,G=me.Oa,a((le=S)!=null),G!=null){if(0<(be=0>(be=G.Md)?0:100<be?255:255*be/100)){for(Ne=Te=0;4>Ne;++Ne)12>(Ue=le.pb[Ne]).lc&&(Ue.ia=be*tb[0>Ue.lc?0:Ue.lc]>>3),Te|=Ue.ia;Te&&(alert("todo:VP8InitRandom"),le.ia=1)}le.Ga=G.Id,100<le.Ga?le.Ga=100:0>le.Ga&&(le.Ga=0)}(function(je,Le){if(je==null)return 0;if(Le==null)return Pa(je,2,"NULL VP8Io parameter in VP8Decode().");if(!je.cb&&!bm(je,Le))return 0;if(a(je.cb),Le.ac==null||Le.ac(Le)){Le.ob&&(je.L=0);var Be=Tl[je.L];if(je.L==2?(je.yb=0,je.zb=0):(je.yb=Le.v-Be>>4,je.zb=Le.j-Be>>4,0>je.yb&&(je.yb=0),0>je.zb&&(je.zb=0)),je.Va=Le.o+15+Be>>4,je.Hb=Le.va+15+Be>>4,je.Hb>je.za&&(je.Hb=je.za),je.Va>je.Ub&&(je.Va=je.Ub),0<je.L){var Xe=je.ed;for(Be=0;4>Be;++Be){var qe;if(je.Qa.Cb){var Qe=je.Qa.Lb[Be];je.Qa.Fb||(Qe+=Xe.Tb)}else Qe=Xe.Tb;for(qe=0;1>=qe;++qe){var Je=je.gd[Be][qe],dt=Qe;if(Xe.Pc&&(dt+=Xe.vd[0],qe&&(dt+=Xe.od[0])),0<(dt=0>dt?0:63<dt?63:dt)){var it=dt;0<Xe.wb&&(it=4<Xe.wb?it>>2:it>>1)>9-Xe.wb&&(it=9-Xe.wb),1>it&&(it=1),Je.dd=it,Je.tc=2*dt+it,Je.ld=40<=dt?2:15<=dt?1:0}else Je.tc=0;Je.La=qe}}}Be=0}else Pa(je,6,"Frame setup failed"),Be=je.a;if(Be=Be==0){if(Be){je.$c=0,0<je.Aa||(je.Ic=v0);t:{Be=je.Ic,Xe=4*(it=je.za);var Pt=32*it,jt=it+1,ra=0<je.L?it*(0<je.Aa?2:1):0,wt=(je.Aa==2?2:1)*it;if((Je=Xe+832+(qe=3*(16*Be+Tl[je.L])/2*Pt)+(Qe=je.Fa!=null&&0<je.Fa.length?je.Kc.c*je.Kc.i:0))!=Je)Be=0;else{if(Je>je.Vb){if(je.Vb=0,je.Ec=i(Je),je.Fc=0,je.Ec==null){Be=Pa(je,1,"no memory during frame initialization.");break t}je.Vb=Je}Je=je.Ec,dt=je.Fc,je.Ac=Je,je.Bc=dt,dt+=Xe,je.Gd=o(Pt,Fc),je.Hd=0,je.rb=o(jt+1,jn),je.sb=1,je.wa=ra?o(ra,Hs):null,je.Y=0,je.D.Nb=0,je.D.wa=je.wa,je.D.Y=je.Y,0<je.Aa&&(je.D.Y+=it),a(!0),je.oc=Je,je.pc=dt,dt+=832,je.ya=o(wt,$c),je.aa=0,je.D.ya=je.ya,je.D.aa=je.aa,je.Aa==2&&(je.D.aa+=it),je.R=16*it,je.B=8*it,it=(Pt=Tl[je.L])*je.R,Pt=Pt/2*je.B,je.sa=Je,je.ta=dt+it,je.qa=je.sa,je.ra=je.ta+16*Be*je.R+Pt,je.Ha=je.qa,je.Ia=je.ra+8*Be*je.B+Pt,je.$c=0,dt+=qe,je.mb=Qe?Je:null,je.nb=Qe?dt:null,a(dt+Qe<=je.Fc+je.Vb),Zl(je),n(je.Ac,je.Bc,0,Xe),Be=1}}if(Be){if(Le.ka=0,Le.y=je.sa,Le.O=je.ta,Le.f=je.qa,Le.N=je.ra,Le.ea=je.Ha,Le.Vd=je.Ia,Le.fa=je.R,Le.Rc=je.B,Le.F=null,Le.J=0,!Go){for(Be=-255;255>=Be;++Be)Am[255+Be]=0>Be?-Be:Be;for(Be=-1020;1020>=Be;++Be)cu[1020+Be]=-128>Be?-128:127<Be?127:Be;for(Be=-112;112>=Be;++Be)du[112+Be]=-16>Be?-16:15<Be?15:Be;for(Be=-255;510>=Be;++Be)km[255+Be]=0>Be?0:255<Be?255:Be;Go=1}er=pl,xr=Qd,Un=Ql,Vs=li,Ho=eu,Ki=vm,ah=q,oo=oe,rh=Fe,sh=at,nh=we,x0=Ce,h0=ot,f0=kt,ih=bl,lh=Ii,_m=Uc,Hn=iu,Ws[0]=Fo,Ws[1]=zc,Ws[2]=su,Ws[3]=Nm,Ws[4]=oi,Ws[5]=Nn,Ws[6]=ci,Ws[7]=$i,Ws[8]=gl,Ws[9]=nu,Cl[0]=Mi,Cl[1]=tu,Cl[2]=Qx,Cl[3]=au,Cl[4]=ru,Cl[5]=In,Cl[6]=Ri,Cn[0]=Io,Cn[1]=jm,Cn[2]=qc,Cn[3]=Fi,Cn[4]=di,Cn[5]=Es,Cn[6]=to,Be=1}else Be=0}Be&&(Be=function(ya,zr){for(ya.M=0;ya.M<ya.Va;++ya.M){var ea,St=ya.Jc[ya.M&ya.Xb],yt=ya.m,hr=ya;for(ea=0;ea<hr.za;++ea){var sa=yt,da=hr,Ct=da.Ac,ia=da.Bc+4*ea,Na=da.zc,tr=da.ya[da.aa+ea];if(da.Qa.Bb?tr.$b=ue(sa,da.Pa.jb[0])?2+ue(sa,da.Pa.jb[2]):ue(sa,da.Pa.jb[1]):tr.$b=0,da.kc&&(tr.Ad=ue(sa,da.Bd)),tr.Za=!ue(sa,145)+0,tr.Za){var Pr=tr.Ob,Or=0;for(da=0;4>da;++da){var vr,fa=Na[0+da];for(vr=0;4>vr;++vr){fa=oh[Ct[ia+vr]][fa];for(var wa=uo[ue(sa,fa[0])];0<wa;)wa=uo[2*wa+ue(sa,fa[wa])];fa=-wa,Ct[ia+vr]=fa}s(Pr,Or,Ct,ia,4),Or+=4,Na[0+da]=fa}}else fa=ue(sa,156)?ue(sa,128)?1:3:ue(sa,163)?2:0,tr.Ob[0]=fa,n(Ct,ia,fa,4),n(Na,0,fa,4);tr.Dd=ue(sa,142)?ue(sa,114)?ue(sa,183)?1:3:2:0}if(hr.m.Ka)return Pa(ya,7,"Premature end-of-partition0 encountered.");for(;ya.ja<ya.za;++ya.ja){if(hr=St,sa=(yt=ya).rb[yt.sb-1],Ct=yt.rb[yt.sb+yt.ja],ea=yt.ya[yt.aa+yt.ja],ia=yt.kc?ea.Ad:0)sa.la=Ct.la=0,ea.Za||(sa.Na=Ct.Na=0),ea.Hc=0,ea.Gc=0,ea.ia=0;else{var jr,Vt;if(sa=Ct,Ct=hr,ia=yt.Pa.Xc,Na=yt.ya[yt.aa+yt.ja],tr=yt.pb[Na.$b],da=Na.ad,Pr=0,Or=yt.rb[yt.sb-1],fa=vr=0,n(da,Pr,0,384),Na.Za)var Xr=0,En=ia[3];else{wa=i(16);var Nr=sa.Na+Or.Na;if(Nr=Vr(Ct,ia[1],Nr,tr.Eb,0,wa,0),sa.Na=Or.Na=(0<Nr)+0,1<Nr)er(wa,0,da,Pr);else{var Ks=wa[0]+3>>3;for(wa=0;256>wa;wa+=16)da[Pr+wa]=Ks}Xr=1,En=ia[0]}var Ya=15&sa.la,Dr=15&Or.la;for(wa=0;4>wa;++wa){var Xs=1&Dr;for(Ks=Vt=0;4>Ks;++Ks)Ya=Ya>>1|(Xs=(Nr=Vr(Ct,En,Nr=Xs+(1&Ya),tr.Sc,Xr,da,Pr))>Xr)<<7,Vt=Vt<<2|(3<Nr?3:1<Nr?2:da[Pr+0]!=0),Pr+=16;Ya>>=4,Dr=Dr>>1|Xs<<7,vr=(vr<<8|Vt)>>>0}for(En=Ya,Xr=Dr>>4,jr=0;4>jr;jr+=2){for(Vt=0,Ya=sa.la>>4+jr,Dr=Or.la>>4+jr,wa=0;2>wa;++wa){for(Xs=1&Dr,Ks=0;2>Ks;++Ks)Nr=Xs+(1&Ya),Ya=Ya>>1|(Xs=0<(Nr=Vr(Ct,ia[2],Nr,tr.Qc,0,da,Pr)))<<3,Vt=Vt<<2|(3<Nr?3:1<Nr?2:da[Pr+0]!=0),Pr+=16;Ya>>=2,Dr=Dr>>1|Xs<<5}fa|=Vt<<4*jr,En|=Ya<<4<<jr,Xr|=(240&Dr)<<jr}sa.la=En,Or.la=Xr,Na.Hc=vr,Na.Gc=fa,Na.ia=43690&fa?0:tr.ia,ia=!(vr|fa)}if(0<yt.L&&(yt.wa[yt.Y+yt.ja]=yt.gd[ea.$b][ea.Za],yt.wa[yt.Y+yt.ja].La|=!ia),hr.Ka)return Pa(ya,7,"Premature end-of-file encountered.")}if(Zl(ya),yt=zr,hr=1,ea=(St=ya).D,sa=0<St.L&&St.M>=St.zb&&St.M<=St.Va,St.Aa==0)t:{if(ea.M=St.M,ea.uc=sa,zn(St,ea),hr=1,ea=(Vt=St.D).Nb,sa=(fa=Tl[St.L])*St.R,Ct=fa/2*St.B,wa=16*ea*St.R,Ks=8*ea*St.B,ia=St.sa,Na=St.ta-sa+wa,tr=St.qa,da=St.ra-Ct+Ks,Pr=St.Ha,Or=St.Ia-Ct+Ks,Dr=(Ya=Vt.M)==0,vr=Ya>=St.Va-1,St.Aa==2&&zn(St,Vt),Vt.uc)for(Xs=(Nr=St).D.M,a(Nr.D.uc),Vt=Nr.yb;Vt<Nr.Hb;++Vt){Xr=Vt,En=Xs;var vs=(Xa=(Zr=Nr).D).Nb;jr=Zr.R;var Xa=Xa.wa[Xa.Y+Xr],ka=Zr.sa,Os=Zr.ta+16*vs*jr+16*Xr,js=Xa.dd,Fa=Xa.tc;if(Fa!=0)if(a(3<=Fa),Zr.L==1)0<Xr&&lh(ka,Os,jr,Fa+4),Xa.La&&Hn(ka,Os,jr,Fa),0<En&&ih(ka,Os,jr,Fa+4),Xa.La&&_m(ka,Os,jr,Fa);else{var Js=Zr.B,Jr=Zr.qa,tl=Zr.ra+8*vs*Js+8*Xr,xi=Zr.Ha,Zr=Zr.Ia+8*vs*Js+8*Xr;vs=Xa.ld,0<Xr&&(oo(ka,Os,jr,Fa+4,js,vs),sh(Jr,tl,xi,Zr,Js,Fa+4,js,vs)),Xa.La&&(x0(ka,Os,jr,Fa,js,vs),f0(Jr,tl,xi,Zr,Js,Fa,js,vs)),0<En&&(ah(ka,Os,jr,Fa+4,js,vs),rh(Jr,tl,xi,Zr,Js,Fa+4,js,vs)),Xa.La&&(nh(ka,Os,jr,Fa,js,vs),h0(Jr,tl,xi,Zr,Js,Fa,js,vs))}}if(St.ia&&alert("todo:DitherRow"),yt.put!=null){if(Vt=16*Ya,Ya=16*(Ya+1),Dr?(yt.y=St.sa,yt.O=St.ta+wa,yt.f=St.qa,yt.N=St.ra+Ks,yt.ea=St.Ha,yt.W=St.Ia+Ks):(Vt-=fa,yt.y=ia,yt.O=Na,yt.f=tr,yt.N=da,yt.ea=Pr,yt.W=Or),vr||(Ya-=fa),Ya>yt.o&&(Ya=yt.o),yt.F=null,yt.J=null,St.Fa!=null&&0<St.Fa.length&&Vt<Ya&&(yt.J=ys(St,yt,Vt,Ya-Vt),yt.F=St.mb,yt.F==null&&yt.F.length==0)){hr=Pa(St,3,"Could not decode alpha data.");break t}Vt<yt.j&&(fa=yt.j-Vt,Vt=yt.j,a(!(1&fa)),yt.O+=St.R*fa,yt.N+=St.B*(fa>>1),yt.W+=St.B*(fa>>1),yt.F!=null&&(yt.J+=yt.width*fa)),Vt<Ya&&(yt.O+=yt.v,yt.N+=yt.v>>1,yt.W+=yt.v>>1,yt.F!=null&&(yt.J+=yt.v),yt.ka=Vt-yt.j,yt.U=yt.va-yt.v,yt.T=Ya-Vt,hr=yt.put(yt))}ea+1!=St.Ic||vr||(s(St.sa,St.ta-sa,ia,Na+16*St.R,sa),s(St.qa,St.ra-Ct,tr,da+8*St.B,Ct),s(St.Ha,St.Ia-Ct,Pr,Or+8*St.B,Ct))}if(!hr)return Pa(ya,6,"Output aborted.")}return 1}(je,Le)),Le.bc!=null&&Le.bc(Le),Be&=1}return Be?(je.cb=0,Be):0})(S,Z)||(T=S.a)}}else T=S.a}T==0&&me.Oa!=null&&me.Oa.fd&&(T=Ys(me.ba))}me=T}de=me!=0?null:11>de?fe.f.RGBA.eb:fe.f.kb.y}else de=null;return de};var j0=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function m(A,z){for(var M="",D=0;D<4;D++)M+=String.fromCharCode(A[z++]);return M}function x(A,z){return A[z+0]|A[z+1]<<8}function f(A,z){return(A[z+0]|A[z+1]<<8|A[z+2]<<16)>>>0}function b(A,z){return(A[z+0]|A[z+1]<<8|A[z+2]<<16|A[z+3]<<24)>>>0}new u;var p=[0],v=[0],j=[],N=new u,w=t,P=function(A,z){var M={},D=0,I=!1,V=0,H=0;if(M.frames=[],!function(Y,J){for(var U=0;U<4;U++)if(Y[J+U]!="RIFF".charCodeAt(U))return!0;return!1}(A,z)){for(b(A,z+=4),z+=8;z<A.length;){var B=m(A,z),W=b(A,z+=4);z+=4;var K=W+(1&W);switch(B){case"VP8 ":case"VP8L":M.frames[D]===void 0&&(M.frames[D]={}),(ye=M.frames[D]).src_off=I?H:z-8,ye.src_size=V+W+8,D++,I&&(I=!1,V=0,H=0);break;case"VP8X":(ye=M.header={}).feature_flags=A[z];var X=z+4;ye.canvas_width=1+f(A,X),X+=3,ye.canvas_height=1+f(A,X),X+=3;break;case"ALPH":I=!0,V=K+8,H=z-8;break;case"ANIM":(ye=M.header).bgcolor=b(A,z),X=z+4,ye.loop_count=x(A,X),X+=2;break;case"ANMF":var Q,ye;(ye=M.frames[D]={}).offset_x=2*f(A,z),z+=3,ye.offset_y=2*f(A,z),z+=3,ye.width=1+f(A,z),z+=3,ye.height=1+f(A,z),z+=3,ye.duration=f(A,z),z+=3,Q=A[z++],ye.dispose=1&Q,ye.blend=Q>>1&1}B!="ANMF"&&(z+=K)}return M}}(w,0);P.response=w,P.rgbaoutput=!0,P.dataurl=!1;var k=P.header?P.header:null,$=P.frames?P.frames:null;if(k){k.loop_counter=k.loop_count,p=[k.canvas_height],v=[k.canvas_width];for(var O=0;O<$.length&&$[O].blend!=0;O++);}var L=$[0],_=N.WebPDecodeRGBA(w,L.src_off,L.src_size,v,p);L.rgba=_,L.imgwidth=v[0],L.imgheight=p[0];for(var E=0;E<v[0]*p[0]*4;E++)j[E]=_[E];return this.width=v,this.height=p,this.data=j,this}(function(t){var a,r,s,n,i,o,d,u,m,x=function(Y){return Y=Y||{},this.isStrokeTransparent=Y.isStrokeTransparent||!1,this.strokeOpacity=Y.strokeOpacity||1,this.strokeStyle=Y.strokeStyle||"#000000",this.fillStyle=Y.fillStyle||"#000000",this.isFillTransparent=Y.isFillTransparent||!1,this.fillOpacity=Y.fillOpacity||1,this.font=Y.font||"10px sans-serif",this.textBaseline=Y.textBaseline||"alphabetic",this.textAlign=Y.textAlign||"left",this.lineWidth=Y.lineWidth||1,this.lineJoin=Y.lineJoin||"miter",this.lineCap=Y.lineCap||"butt",this.path=Y.path||[],this.transform=Y.transform!==void 0?Y.transform.clone():new u,this.globalCompositeOperation=Y.globalCompositeOperation||"normal",this.globalAlpha=Y.globalAlpha||1,this.clip_path=Y.clip_path||[],this.currentPoint=Y.currentPoint||new o,this.miterLimit=Y.miterLimit||10,this.lastPoint=Y.lastPoint||new o,this.lineDashOffset=Y.lineDashOffset||0,this.lineDash=Y.lineDash||[],this.margin=Y.margin||[0,0,0,0],this.prevPageLastElemOffset=Y.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Y.ignoreClearRect!="boolean"||Y.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),a=this.internal.f2,r=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,d=this.internal.Rectangle,u=this.internal.Matrix,m=new x}]);var f=function(Y){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var J=Y;Object.defineProperty(this,"pdf",{get:function(){return J}});var U=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return U},set:function(ke){U=!!ke}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(ke){ee=!!ke}});var he=0;Object.defineProperty(this,"posX",{get:function(){return he},set:function(ke){isNaN(ke)||(he=ke)}});var pe=0;Object.defineProperty(this,"posY",{get:function(){return pe},set:function(ke){isNaN(ke)||(pe=ke)}}),Object.defineProperty(this,"margin",{get:function(){return m.margin},set:function(ke){var re;typeof ke=="number"?re=[ke,ke,ke,ke]:((re=new Array(4))[0]=ke[0],re[1]=ke.length>=2?ke[1]:re[0],re[2]=ke.length>=3?ke[2]:re[0],re[3]=ke.length>=4?ke[3]:re[1]),m.margin=re}});var se=!1;Object.defineProperty(this,"autoPaging",{get:function(){return se},set:function(ke){se=ke}});var te=0;Object.defineProperty(this,"lastBreak",{get:function(){return te},set:function(ke){te=ke}});var ue=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ue},set:function(ke){ue=ke}}),Object.defineProperty(this,"ctx",{get:function(){return m},set:function(ke){ke instanceof x&&(m=ke)}}),Object.defineProperty(this,"path",{get:function(){return m.path},set:function(ke){m.path=ke}});var ge=[];Object.defineProperty(this,"ctxStack",{get:function(){return ge},set:function(ke){ge=ke}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ke){var re;re=b(ke),this.ctx.fillStyle=re.style,this.ctx.isFillTransparent=re.a===0,this.ctx.fillOpacity=re.a,this.pdf.setFillColor(re.r,re.g,re.b,{a:re.a}),this.pdf.setTextColor(re.r,re.g,re.b,{a:re.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ke){var re=b(ke);this.ctx.strokeStyle=re.style,this.ctx.isStrokeTransparent=re.a===0,this.ctx.strokeOpacity=re.a,re.a===0?this.pdf.setDrawColor(255,255,255):(re.a,this.pdf.setDrawColor(re.r,re.g,re.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ke){["butt","round","square"].indexOf(ke)!==-1&&(this.ctx.lineCap=ke,this.pdf.setLineCap(ke))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ke){isNaN(ke)||(this.ctx.lineWidth=ke,this.pdf.setLineWidth(ke))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ke){["bevel","round","miter"].indexOf(ke)!==-1&&(this.ctx.lineJoin=ke,this.pdf.setLineJoin(ke))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ke){isNaN(ke)||(this.ctx.miterLimit=ke,this.pdf.setMiterLimit(ke))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ke){this.ctx.textBaseline=ke}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ke){["right","end","center","left","start"].indexOf(ke)!==-1&&(this.ctx.textAlign=ke)}});var ce=null,De=null;Object.defineProperty(this,"fontFaces",{get:function(){return De},set:function(ke){ce=null,De=ke}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ke){var re;if(this.ctx.font=ke,(re=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ke))!==null){var Ee=re[1];re[2];var Se=re[3],Ge=re[4];re[5];var ve=re[6],Me=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ge)[2];Ge=Math.floor(Me==="px"?parseFloat(Ge)*this.pdf.internal.scaleFactor:Me==="em"?parseFloat(Ge)*this.pdf.getFontSize():parseFloat(Ge)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ge);var et=function(_e){var Oe,ct,xt=[],Ze=_e.trim();if(Ze==="")return Wv;if(Ze in GS)return[GS[Ze]];for(;Ze!=="";){switch(ct=null,Oe=(Ze=WS(Ze)).charAt(0)){case'"':case"'":ct=uG(Ze.substring(1),Oe);break;default:ct=mG(Ze)}if(ct===null||(xt.push(ct[0]),(Ze=WS(ct[1]))!==""&&Ze.charAt(0)!==","))return Wv;Ze=Ze.replace(/^,/,"")}return xt}(ve);if(this.fontFaces){var Ie=function(_e,Oe){if(ce===null){var ct=function(xt){var Ze=[];return Object.keys(xt).forEach(function(nt){xt[nt].forEach(function(gt){var mt=null;switch(gt){case"bold":mt={family:nt,weight:"bold"};break;case"italic":mt={family:nt,style:"italic"};break;case"bolditalic":mt={family:nt,weight:"bold",style:"italic"};break;case"":case"normal":mt={family:nt}}mt!==null&&(mt.ref={name:nt,style:gt},Ze.push(mt))})}),Ze}(_e.getFontList());ce=function(xt){for(var Ze={},nt=0;nt<xt.length;++nt){var gt=Vv(xt[nt]),mt=gt.family,Ht=gt.stretch,vt=gt.style,At=gt.weight;Ze[mt]=Ze[mt]||{},Ze[mt][Ht]=Ze[mt][Ht]||{},Ze[mt][Ht][vt]=Ze[mt][Ht][vt]||{},Ze[mt][Ht][vt][At]=gt}return Ze}(ct.concat(Oe))}return ce}(this.pdf,this.fontFaces),tt=et.map(function(_e){return{family:_e,stretch:"normal",weight:Se,style:Ee}}),Re=function(_e,Oe,ct){for(var xt=(ct=ct||{}).defaultFontFamily||"times",Ze=Object.assign({},dG,ct.genericFontFamilies||{}),nt=null,gt=null,mt=0;mt<Oe.length;++mt)if(Ze[(nt=Vv(Oe[mt])).family]&&(nt.family=Ze[nt.family]),_e.hasOwnProperty(nt.family)){gt=_e[nt.family];break}if(!(gt=gt||_e[xt]))throw new Error("Could not find a font-family for the rule '"+VS(nt)+"' and default family '"+xt+"'.");if(gt=function(Ht,vt){if(vt[Ht])return vt[Ht];var At=gj[Ht],Xt=At<=gj.normal?-1:1,Ft=YS(vt,sE,At,Xt);if(!Ft)throw new Error("Could not find a matching font-stretch value for "+Ht);return Ft}(nt.stretch,gt),gt=function(Ht,vt){if(vt[Ht])return vt[Ht];for(var At=rE[Ht],Xt=0;Xt<At.length;++Xt)if(vt[At[Xt]])return vt[At[Xt]];throw new Error("Could not find a matching font-style for "+Ht)}(nt.style,gt),!(gt=function(Ht,vt){if(vt[Ht])return vt[Ht];if(Ht===400&&vt[500])return vt[500];if(Ht===500&&vt[400])return vt[400];var At=cG[Ht],Xt=YS(vt,nE,At,Ht<400?-1:1);if(!Xt)throw new Error("Could not find a matching font-weight for value "+Ht);return Xt}(nt.weight,gt)))throw new Error("Failed to resolve a font for the rule '"+VS(nt)+"'.");return gt}(Ie,tt);this.pdf.setFont(Re.ref.name,Re.ref.style)}else{var bt="";(Se==="bold"||parseInt(Se,10)>=700||Ee==="bold")&&(bt="bold"),Ee==="italic"&&(bt+="italic"),bt.length===0&&(bt="normal");for(var Nt="",Ut={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Mt=0;Mt<et.length;Mt++){if(this.pdf.internal.getFont(et[Mt],bt,{noFallback:!0,disableWarning:!0})!==void 0){Nt=et[Mt];break}if(bt==="bolditalic"&&this.pdf.internal.getFont(et[Mt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Nt=et[Mt],bt="bold";else if(this.pdf.internal.getFont(et[Mt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Nt=et[Mt],bt="normal";break}}if(Nt===""){for(var pt=0;pt<et.length;pt++)if(Ut[et[pt]]){Nt=Ut[et[pt]];break}}Nt=Nt===""?"Times":Nt,this.pdf.setFont(Nt,bt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ke){this.ctx.globalCompositeOperation=ke}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ke){this.ctx.globalAlpha=ke}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ke){this.ctx.lineDashOffset=ke,ye.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ke){this.ctx.lineDash=ke,ye.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ke){this.ctx.ignoreClearRect=!!ke}})};f.prototype.setLineDash=function(Y){this.lineDash=Y},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){$.call(this,"fill",!1)},f.prototype.stroke=function(){$.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(Y,J){if(isNaN(Y)||isNaN(J))throw rr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var U=this.ctx.transform.applyToPoint(new o(Y,J));this.path.push({type:"mt",x:U.x,y:U.y}),this.ctx.lastPoint=new o(Y,J)},f.prototype.closePath=function(){var Y=new o(0,0),J=0;for(J=this.path.length-1;J!==-1;J--)if(this.path[J].type==="begin"&&Ka(this.path[J+1])==="object"&&typeof this.path[J+1].x=="number"){Y=new o(this.path[J+1].x,this.path[J+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(Y.x,Y.y)},f.prototype.lineTo=function(Y,J){if(isNaN(Y)||isNaN(J))throw rr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var U=this.ctx.transform.applyToPoint(new o(Y,J));this.path.push({type:"lt",x:U.x,y:U.y}),this.ctx.lastPoint=new o(U.x,U.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),$.call(this,null,!0)},f.prototype.quadraticCurveTo=function(Y,J,U,ee){if(isNaN(U)||isNaN(ee)||isNaN(Y)||isNaN(J))throw rr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var he=this.ctx.transform.applyToPoint(new o(U,ee)),pe=this.ctx.transform.applyToPoint(new o(Y,J));this.path.push({type:"qct",x1:pe.x,y1:pe.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},f.prototype.bezierCurveTo=function(Y,J,U,ee,he,pe){if(isNaN(he)||isNaN(pe)||isNaN(Y)||isNaN(J)||isNaN(U)||isNaN(ee))throw rr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var se=this.ctx.transform.applyToPoint(new o(he,pe)),te=this.ctx.transform.applyToPoint(new o(Y,J)),ue=this.ctx.transform.applyToPoint(new o(U,ee));this.path.push({type:"bct",x1:te.x,y1:te.y,x2:ue.x,y2:ue.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},f.prototype.arc=function(Y,J,U,ee,he,pe){if(isNaN(Y)||isNaN(J)||isNaN(U)||isNaN(ee)||isNaN(he))throw rr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pe=!!pe,!this.ctx.transform.isIdentity){var se=this.ctx.transform.applyToPoint(new o(Y,J));Y=se.x,J=se.y;var te=this.ctx.transform.applyToPoint(new o(0,U)),ue=this.ctx.transform.applyToPoint(new o(0,0));U=Math.sqrt(Math.pow(te.x-ue.x,2)+Math.pow(te.y-ue.y,2))}Math.abs(he-ee)>=2*Math.PI&&(ee=0,he=2*Math.PI),this.path.push({type:"arc",x:Y,y:J,radius:U,startAngle:ee,endAngle:he,counterclockwise:pe})},f.prototype.arcTo=function(Y,J,U,ee,he){throw new Error("arcTo not implemented.")},f.prototype.rect=function(Y,J,U,ee){if(isNaN(Y)||isNaN(J)||isNaN(U)||isNaN(ee))throw rr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Y,J),this.lineTo(Y+U,J),this.lineTo(Y+U,J+ee),this.lineTo(Y,J+ee),this.lineTo(Y,J),this.lineTo(Y+U,J),this.lineTo(Y,J)},f.prototype.fillRect=function(Y,J,U,ee){if(isNaN(Y)||isNaN(J)||isNaN(U)||isNaN(ee))throw rr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var he={};this.lineCap!=="butt"&&(he.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(he.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Y,J,U,ee),this.fill(),he.hasOwnProperty("lineCap")&&(this.lineCap=he.lineCap),he.hasOwnProperty("lineJoin")&&(this.lineJoin=he.lineJoin)}},f.prototype.strokeRect=function(Y,J,U,ee){if(isNaN(Y)||isNaN(J)||isNaN(U)||isNaN(ee))throw rr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(Y,J,U,ee),this.stroke())},f.prototype.clearRect=function(Y,J,U,ee){if(isNaN(Y)||isNaN(J)||isNaN(U)||isNaN(ee))throw rr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Y,J,U,ee))},f.prototype.save=function(Y){Y=typeof Y!="boolean"||Y;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("q");if(this.pdf.setPage(J),Y){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new x(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},f.prototype.restore=function(Y){Y=typeof Y!="boolean"||Y;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,U=0;U<this.pdf.internal.getNumberOfPages();U++)this.pdf.setPage(U+1),this.pdf.internal.out("Q");this.pdf.setPage(J),Y&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var b=function(Y){var J,U,ee,he;if(Y.isCanvasGradient===!0&&(Y=Y.getColor()),!Y)return{r:0,g:0,b:0,a:0,style:Y};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Y))J=0,U=0,ee=0,he=0;else{var pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Y);if(pe!==null)J=parseInt(pe[1]),U=parseInt(pe[2]),ee=parseInt(pe[3]),he=1;else if((pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Y))!==null)J=parseInt(pe[1]),U=parseInt(pe[2]),ee=parseInt(pe[3]),he=parseFloat(pe[4]);else{if(he=1,typeof Y=="string"&&Y.charAt(0)!=="#"){var se=new X9(Y);Y=se.ok?se.toHex():"#000000"}Y.length===4?(J=Y.substring(1,2),J+=J,U=Y.substring(2,3),U+=U,ee=Y.substring(3,4),ee+=ee):(J=Y.substring(1,3),U=Y.substring(3,5),ee=Y.substring(5,7)),J=parseInt(J,16),U=parseInt(U,16),ee=parseInt(ee,16)}}return{r:J,g:U,b:ee,a:he,style:Y}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(Y,J,U,ee){if(isNaN(J)||isNaN(U)||typeof Y!="string")throw rr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!p.call(this)){var he=K(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;D.call(this,{text:Y,x:J,y:U,scale:pe,angle:he,align:this.textAlign,maxWidth:ee})}},f.prototype.strokeText=function(Y,J,U,ee){if(isNaN(J)||isNaN(U)||typeof Y!="string")throw rr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){ee=isNaN(ee)?void 0:ee;var he=K(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;D.call(this,{text:Y,x:J,y:U,scale:pe,renderingMode:"stroke",angle:he,align:this.textAlign,maxWidth:ee})}},f.prototype.measureText=function(Y){if(typeof Y!="string")throw rr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var J=this.pdf,U=this.pdf.internal.scaleFactor,ee=J.internal.getFontSize(),he=J.getStringUnitWidth(Y)*ee/J.internal.scaleFactor;return new function(pe){var se=(pe=pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return se}}),this}({width:he*=Math.round(96*U/72*1e4)/1e4})},f.prototype.scale=function(Y,J){if(isNaN(Y)||isNaN(J))throw rr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var U=new u(Y,0,0,J,0,0);this.ctx.transform=this.ctx.transform.multiply(U)},f.prototype.rotate=function(Y){if(isNaN(Y))throw rr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var J=new u(Math.cos(Y),Math.sin(Y),-Math.sin(Y),Math.cos(Y),0,0);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.translate=function(Y,J){if(isNaN(Y)||isNaN(J))throw rr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var U=new u(1,0,0,1,Y,J);this.ctx.transform=this.ctx.transform.multiply(U)},f.prototype.transform=function(Y,J,U,ee,he,pe){if(isNaN(Y)||isNaN(J)||isNaN(U)||isNaN(ee)||isNaN(he)||isNaN(pe))throw rr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var se=new u(Y,J,U,ee,he,pe);this.ctx.transform=this.ctx.transform.multiply(se)},f.prototype.setTransform=function(Y,J,U,ee,he,pe){Y=isNaN(Y)?1:Y,J=isNaN(J)?0:J,U=isNaN(U)?0:U,ee=isNaN(ee)?1:ee,he=isNaN(he)?0:he,pe=isNaN(pe)?0:pe,this.ctx.transform=new u(Y,J,U,ee,he,pe)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(Y,J,U,ee,he,pe,se,te,ue){var ge=this.pdf.getImageProperties(Y),ce=1,De=1,ke=1,re=1;ee!==void 0&&te!==void 0&&(ke=te/ee,re=ue/he,ce=ge.width/ee*te/ee,De=ge.height/he*ue/he),pe===void 0&&(pe=J,se=U,J=0,U=0),ee!==void 0&&te===void 0&&(te=ee,ue=he),ee===void 0&&te===void 0&&(te=ge.width,ue=ge.height);for(var Ee,Se=this.ctx.transform.decompose(),Ge=K(Se.rotate.shx),ve=new u,Me=(ve=(ve=(ve=ve.multiply(Se.translate)).multiply(Se.skew)).multiply(Se.scale)).applyToRectangle(new d(pe-J*ke,se-U*re,ee*ce,he*De)),et=N.call(this,Me),Ie=[],tt=0;tt<et.length;tt+=1)Ie.indexOf(et[tt])===-1&&Ie.push(et[tt]);if(k(Ie),this.autoPaging)for(var Re=Ie[0],bt=Ie[Ie.length-1],Nt=Re;Nt<bt+1;Nt++){this.pdf.setPage(Nt);var Ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=Nt===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_e=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Oe=Nt===1?0:pt+(Nt-2)*_e;if(this.ctx.clip_path.length!==0){var ct=this.path;Ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(Ee,this.posX+this.margin[3],-Oe+Mt+this.ctx.prevPageLastElemOffset),O.call(this,"fill",!0),this.path=ct}var xt=JSON.parse(JSON.stringify(Me));xt=P([xt],this.posX+this.margin[3],-Oe+Mt+this.ctx.prevPageLastElemOffset)[0];var Ze=(Nt>Re||Nt<bt)&&j.call(this);Ze&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ut,_e,null).clip().discardPath()),this.pdf.addImage(Y,"JPEG",xt.x,xt.y,xt.w,xt.h,null,null,Ge),Ze&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Y,"JPEG",Me.x,Me.y,Me.w,Me.h,null,null,Ge)};var N=function(Y,J,U){var ee=[];J=J||this.pdf.internal.pageSize.width,U=U||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var he=this.posY+this.ctx.prevPageLastElemOffset;switch(Y.type){default:case"mt":case"lt":ee.push(Math.floor((Y.y+he)/U)+1);break;case"arc":ee.push(Math.floor((Y.y+he-Y.radius)/U)+1),ee.push(Math.floor((Y.y+he+Y.radius)/U)+1);break;case"qct":var pe=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Y.x1,Y.y1,Y.x,Y.y);ee.push(Math.floor((pe.y+he)/U)+1),ee.push(Math.floor((pe.y+pe.h+he)/U)+1);break;case"bct":var se=Q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Y.x1,Y.y1,Y.x2,Y.y2,Y.x,Y.y);ee.push(Math.floor((se.y+he)/U)+1),ee.push(Math.floor((se.y+se.h+he)/U)+1);break;case"rect":ee.push(Math.floor((Y.y+he)/U)+1),ee.push(Math.floor((Y.y+Y.h+he)/U)+1)}for(var te=0;te<ee.length;te+=1)for(;this.pdf.internal.getNumberOfPages()<ee[te];)w.call(this);return ee},w=function(){var Y=this.fillStyle,J=this.strokeStyle,U=this.font,ee=this.lineCap,he=this.lineWidth,pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=Y,this.strokeStyle=J,this.font=U,this.lineCap=ee,this.lineWidth=he,this.lineJoin=pe},P=function(Y,J,U){for(var ee=0;ee<Y.length;ee++)switch(Y[ee].type){case"bct":Y[ee].x2+=J,Y[ee].y2+=U;case"qct":Y[ee].x1+=J,Y[ee].y1+=U;default:Y[ee].x+=J,Y[ee].y+=U}return Y},k=function(Y){return Y.sort(function(J,U){return J-U})},$=function(Y,J){for(var U,ee,he=this.fillStyle,pe=this.strokeStyle,se=this.lineCap,te=this.lineWidth,ue=Math.abs(te*this.ctx.transform.scaleX),ge=this.lineJoin,ce=JSON.parse(JSON.stringify(this.path)),De=JSON.parse(JSON.stringify(this.path)),ke=[],re=0;re<De.length;re++)if(De[re].x!==void 0)for(var Ee=N.call(this,De[re]),Se=0;Se<Ee.length;Se+=1)ke.indexOf(Ee[Se])===-1&&ke.push(Ee[Se]);for(var Ge=0;Ge<ke.length;Ge++)for(;this.pdf.internal.getNumberOfPages()<ke[Ge];)w.call(this);if(k(ke),this.autoPaging)for(var ve=ke[0],Me=ke[ke.length-1],et=ve;et<Me+1;et++){this.pdf.setPage(et),this.fillStyle=he,this.strokeStyle=pe,this.lineCap=se,this.lineWidth=ue,this.lineJoin=ge;var Ie=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tt=et===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Nt=et===1?0:Re+(et-2)*bt;if(this.ctx.clip_path.length!==0){var Ut=this.path;U=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(U,this.posX+this.margin[3],-Nt+tt+this.ctx.prevPageLastElemOffset),O.call(this,Y,!0),this.path=Ut}if(ee=JSON.parse(JSON.stringify(ce)),this.path=P(ee,this.posX+this.margin[3],-Nt+tt+this.ctx.prevPageLastElemOffset),J===!1||et===0){var Mt=(et>ve||et<Me)&&j.call(this);Mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ie,bt,null).clip().discardPath()),O.call(this,Y,J),Mt&&this.pdf.restoreGraphicsState()}this.lineWidth=te}else this.lineWidth=ue,O.call(this,Y,J),this.lineWidth=te;this.path=ce},O=function(Y,J){if((Y!=="stroke"||J||!v.call(this))&&(Y==="stroke"||J||!p.call(this))){for(var U,ee,he=[],pe=this.path,se=0;se<pe.length;se++){var te=pe[se];switch(te.type){case"begin":he.push({begin:!0});break;case"close":he.push({close:!0});break;case"mt":he.push({start:te,deltas:[],abs:[]});break;case"lt":var ue=he.length;if(pe[se-1]&&!isNaN(pe[se-1].x)&&(U=[te.x-pe[se-1].x,te.y-pe[se-1].y],ue>0)){for(;ue>=0;ue--)if(he[ue-1].close!==!0&&he[ue-1].begin!==!0){he[ue-1].deltas.push(U),he[ue-1].abs.push(te);break}}break;case"bct":U=[te.x1-pe[se-1].x,te.y1-pe[se-1].y,te.x2-pe[se-1].x,te.y2-pe[se-1].y,te.x-pe[se-1].x,te.y-pe[se-1].y],he[he.length-1].deltas.push(U);break;case"qct":var ge=pe[se-1].x+2/3*(te.x1-pe[se-1].x),ce=pe[se-1].y+2/3*(te.y1-pe[se-1].y),De=te.x+2/3*(te.x1-te.x),ke=te.y+2/3*(te.y1-te.y),re=te.x,Ee=te.y;U=[ge-pe[se-1].x,ce-pe[se-1].y,De-pe[se-1].x,ke-pe[se-1].y,re-pe[se-1].x,Ee-pe[se-1].y],he[he.length-1].deltas.push(U);break;case"arc":he.push({deltas:[],abs:[],arc:!0}),Array.isArray(he[he.length-1].abs)&&he[he.length-1].abs.push(te)}}ee=J?null:Y==="stroke"?"stroke":"fill";for(var Se=!1,Ge=0;Ge<he.length;Ge++)if(he[Ge].arc)for(var ve=he[Ge].abs,Me=0;Me<ve.length;Me++){var et=ve[Me];et.type==="arc"?E.call(this,et.x,et.y,et.radius,et.startAngle,et.endAngle,et.counterclockwise,void 0,J,!Se):I.call(this,et.x,et.y),Se=!0}else if(he[Ge].close===!0)this.pdf.internal.out("h"),Se=!1;else if(he[Ge].begin!==!0){var Ie=he[Ge].start.x,tt=he[Ge].start.y;V.call(this,he[Ge].deltas,Ie,tt),Se=!0}ee&&A.call(this,ee),J&&z.call(this)}},L=function(Y){var J=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,U=J*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Y-U;case"top":return Y+J-U;case"hanging":return Y+J-2*U;case"middle":return Y+J/2-U;default:return Y}},_=function(Y){return Y+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var Y=function(){};return Y.colorStops=[],Y.addColorStop=function(J,U){this.colorStops.push([J,U])},Y.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Y.isCanvasGradient=!0,Y},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(Y,J,U,ee,he,pe,se,te,ue){for(var ge=B.call(this,U,ee,he,pe),ce=0;ce<ge.length;ce++){var De=ge[ce];ce===0&&(ue?M.call(this,De.x1+Y,De.y1+J):I.call(this,De.x1+Y,De.y1+J)),H.call(this,Y,J,De.x2,De.y2,De.x3,De.y3,De.x4,De.y4)}te?z.call(this):A.call(this,se)},A=function(Y){switch(Y){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},z=function(){this.pdf.clip(),this.pdf.discardPath()},M=function(Y,J){this.pdf.internal.out(r(Y)+" "+s(J)+" m")},D=function(Y){var J;switch(Y.align){case"right":case"end":J="right";break;case"center":J="center";break;default:J="left"}var U=this.pdf.getTextDimensions(Y.text),ee=L.call(this,Y.y),he=_.call(this,ee)-U.h,pe=this.ctx.transform.applyToPoint(new o(Y.x,ee)),se=this.ctx.transform.decompose(),te=new u;te=(te=(te=te.multiply(se.translate)).multiply(se.skew)).multiply(se.scale);for(var ue,ge,ce,De=this.ctx.transform.applyToRectangle(new d(Y.x,ee,U.w,U.h)),ke=te.applyToRectangle(new d(Y.x,he,U.w,U.h)),re=N.call(this,ke),Ee=[],Se=0;Se<re.length;Se+=1)Ee.indexOf(re[Se])===-1&&Ee.push(re[Se]);if(k(Ee),this.autoPaging)for(var Ge=Ee[0],ve=Ee[Ee.length-1],Me=Ge;Me<ve+1;Me++){this.pdf.setPage(Me);var et=Me===1?this.posY+this.margin[0]:this.margin[0],Ie=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[2],Re=tt-this.margin[0],bt=this.pdf.internal.pageSize.width-this.margin[1],Nt=bt-this.margin[3],Ut=Me===1?0:Ie+(Me-2)*Re;if(this.ctx.clip_path.length!==0){var Mt=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(ue,this.posX+this.margin[3],-1*Ut+et),O.call(this,"fill",!0),this.path=Mt}var pt=P([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-Ut+et+this.ctx.prevPageLastElemOffset)[0];Y.scale>=.01&&(ge=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ge*Y.scale),ce=this.lineWidth,this.lineWidth=ce*Y.scale);var _e=this.autoPaging!=="text";if(_e||pt.y+pt.h<=tt){if(_e||pt.y>=et&&pt.x<=bt){var Oe=_e?Y.text:this.pdf.splitTextToSize(Y.text,Y.maxWidth||bt-pt.x)[0],ct=P([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-Ut+et+this.ctx.prevPageLastElemOffset)[0],xt=_e&&(Me>Ge||Me<ve)&&j.call(this);xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Nt,Re,null).clip().discardPath()),this.pdf.text(Oe,ct.x,ct.y,{angle:Y.angle,align:J,renderingMode:Y.renderingMode}),xt&&this.pdf.restoreGraphicsState()}}else pt.y<tt&&(this.ctx.prevPageLastElemOffset+=tt-pt.y);Y.scale>=.01&&(this.pdf.setFontSize(ge),this.lineWidth=ce)}else Y.scale>=.01&&(ge=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ge*Y.scale),ce=this.lineWidth,this.lineWidth=ce*Y.scale),this.pdf.text(Y.text,pe.x+this.posX,pe.y+this.posY,{angle:Y.angle,align:J,renderingMode:Y.renderingMode,maxWidth:Y.maxWidth}),Y.scale>=.01&&(this.pdf.setFontSize(ge),this.lineWidth=ce)},I=function(Y,J,U,ee){U=U||0,ee=ee||0,this.pdf.internal.out(r(Y+U)+" "+s(J+ee)+" l")},V=function(Y,J,U){return this.pdf.lines(Y,J,U,null,null)},H=function(Y,J,U,ee,he,pe,se,te){this.pdf.internal.out([a(n(U+Y)),a(i(ee+J)),a(n(he+Y)),a(i(pe+J)),a(n(se+Y)),a(i(te+J)),"c"].join(" "))},B=function(Y,J,U,ee){for(var he=2*Math.PI,pe=Math.PI/2;J>U;)J-=he;var se=Math.abs(U-J);se<he&&ee&&(se=he-se);for(var te=[],ue=ee?-1:1,ge=J;se>1e-5;){var ce=ge+ue*Math.min(se,pe);te.push(W.call(this,Y,ge,ce)),se-=Math.abs(ce-ge),ge=ce}return te},W=function(Y,J,U){var ee=(U-J)/2,he=Y*Math.cos(ee),pe=Y*Math.sin(ee),se=he,te=-pe,ue=se*se+te*te,ge=ue+se*he+te*pe,ce=4/3*(Math.sqrt(2*ue*ge)-ge)/(se*pe-te*he),De=se-ce*te,ke=te+ce*se,re=De,Ee=-ke,Se=ee+J,Ge=Math.cos(Se),ve=Math.sin(Se);return{x1:Y*Math.cos(J),y1:Y*Math.sin(J),x2:De*Ge-ke*ve,y2:De*ve+ke*Ge,x3:re*Ge-Ee*ve,y3:re*ve+Ee*Ge,x4:Y*Math.cos(U),y4:Y*Math.sin(U)}},K=function(Y){return 180*Y/Math.PI},X=function(Y,J,U,ee,he,pe){var se=Y+.5*(U-Y),te=J+.5*(ee-J),ue=he+.5*(U-he),ge=pe+.5*(ee-pe),ce=Math.min(Y,he,se,ue),De=Math.max(Y,he,se,ue),ke=Math.min(J,pe,te,ge),re=Math.max(J,pe,te,ge);return new d(ce,ke,De-ce,re-ke)},Q=function(Y,J,U,ee,he,pe,se,te){var ue,ge,ce,De,ke,re,Ee,Se,Ge,ve,Me,et,Ie,tt,Re=U-Y,bt=ee-J,Nt=he-U,Ut=pe-ee,Mt=se-he,pt=te-pe;for(ge=0;ge<41;ge++)Ge=(Ee=(ce=Y+(ue=ge/40)*Re)+ue*((ke=U+ue*Nt)-ce))+ue*(ke+ue*(he+ue*Mt-ke)-Ee),ve=(Se=(De=J+ue*bt)+ue*((re=ee+ue*Ut)-De))+ue*(re+ue*(pe+ue*pt-re)-Se),ge==0?(Me=Ge,et=ve,Ie=Ge,tt=ve):(Me=Math.min(Me,Ge),et=Math.min(et,ve),Ie=Math.max(Ie,Ge),tt=Math.max(tt,ve));return new d(Math.round(Me),Math.round(et),Math.round(Ie-Me),Math.round(tt-et))},ye=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Y,J,U=(Y=this.ctx.lineDash,J=this.ctx.lineDashOffset,JSON.stringify({lineDash:Y,lineDashOffset:J}));this.prevLineDash!==U&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=U)}}})($t.API),function(t){var a=function(o){var d,u,m,x,f,b,p,v,j,N;for(u=[],m=0,x=(o+=d="\0\0\0\0".slice(o.length%4||4)).length;x>m;m+=4)(f=(o.charCodeAt(m)<<24)+(o.charCodeAt(m+1)<<16)+(o.charCodeAt(m+2)<<8)+o.charCodeAt(m+3))!==0?(b=(f=((f=((f=((f=(f-(N=f%85))/85)-(j=f%85))/85)-(v=f%85))/85)-(p=f%85))/85)%85,u.push(b+33,p+33,v+33,j+33,N+33)):u.push(122);return function(w,P){for(var k=P;k>0;k--)w.pop()}(u,d.length),String.fromCharCode.apply(String,u)+"~>"},r=function(o){var d,u,m,x,f,b=String,p="length",v=255,j="charCodeAt",N="slice",w="replace";for(o[N](-2),o=o[N](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),m=[],x=0,f=(o+=d="uuuuu"[N](o[p]%5||5))[p];f>x;x+=5)u=52200625*(o[j](x)-33)+614125*(o[j](x+1)-33)+7225*(o[j](x+2)-33)+85*(o[j](x+3)-33)+(o[j](x+4)-33),m.push(v&u>>24,v&u>>16,v&u>>8,v&u);return function(P,k){for(var $=k;$>0;$--)P.pop()}(m,d[p]),b.fromCharCode.apply(b,m)},s=function(o){return o.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">"},n=function(o){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),d.test(o)===!1)return"";for(var u="",m=0;m<o.length;m+=2)u+=String.fromCharCode("0x"+(o[m]+o[m+1]));return u},i=function(o){for(var d=new Uint8Array(o.length),u=o.length;u--;)d[u]=o.charCodeAt(u);return(d=dj(d)).reduce(function(m,x){return m+String.fromCharCode(x)},"")};t.processDataByFilters=function(o,d){var u=0,m=o||"",x=[];for(typeof(d=d||[])=="string"&&(d=[d]),u=0;u<d.length;u+=1)switch(d[u]){case"ASCII85Decode":case"/ASCII85Decode":m=r(m),x.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=a(m),x.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=n(m),x.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=s(m),x.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=i(m),x.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[u]+'" is not implemented')}return{data:m,reverseChain:x.reverse().join(" ")}}}($t.API),function(t){t.loadFile=function(a,r,s){return function(n,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var d=void 0;try{d=function(u,m,x){var f=new XMLHttpRequest,b=0,p=function(v){var j=v.length,N=[],w=String.fromCharCode;for(b=0;b<j;b+=1)N.push(w(255&v.charCodeAt(b)));return N.join("")};if(f.open("GET",u,!m),f.overrideMimeType("text/plain; charset=x-user-defined"),m===!1&&(f.onload=function(){f.status===200?x(p(this.responseText)):x(void 0)}),f.send(null),m&&f.status===200)return p(f.responseText)}(n,i,o)}catch{}return d}(a,r,s)},t.loadImageFile=t.loadFile}($t.API),function(t){function a(){return(na.html2canvas?Promise.resolve(na.html2canvas):Ev(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function r(){return(na.DOMPurify?Promise.resolve(na.DOMPurify):Ev(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var s=function(d){var u=Ka(d);return u==="undefined"?"undefined":u==="string"||d instanceof String?"string":u==="number"||d instanceof Number?"number":u==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":u==="object"?"object":"unknown"},n=function(d,u){var m=document.createElement(d);for(var x in u.className&&(m.className=u.className),u.innerHTML&&u.dompurify&&(m.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)m.style[x]=u.style[x];return m},i=function d(u,m){for(var x=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),f=u.firstChild;f;f=f.nextSibling)m!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||x.appendChild(d(f,m));return u.nodeType===1&&(u.nodeName==="CANVAS"?(x.width=u.width,x.height=u.height,x.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(x.value=u.value),x.addEventListener("load",function(){x.scrollTop=u.scrollTop,x.scrollLeft=u.scrollLeft},!0)),x},o=function d(u){var m=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),x=d.convert(Promise.resolve(),m);return(x=x.setProgress(1,d,1,[d])).set(u)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(d,u){return d.__proto__=u||o.prototype,d},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(d,u){return this.then(function(){switch(u=u||function(m){switch(s(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(d),u){case"string":return this.then(r).then(function(m){return this.set({src:n("div",{innerHTML:d,dompurify:m})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},o.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(a).then(function(u){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,u(this.prop.container,m)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(a).then(function(u){var m=this.opt.jsPDF,x=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=x,x)for(var p=0;p<x.length;++p){var v=x[p],j=v.src.find(function(N){return N.format==="truetype"});j&&m.addFont(j.url,v.ref.name,v.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,m.context2d.save(!0),u(this.prop.container,b)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(d,u,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(d,u):this.outputPdf(d,u)},o.prototype.outputPdf=function(d,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,u)})},o.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},o.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(d){if(s(d)!=="object")return this;var u=Object.keys(d||{}).map(function(m){if(m in o.template.prop)return function(){this.prop[m]=d[m]};switch(m){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[m]=d[m]}}},this);return this.then(function(){return this.thenList(u)})},o.prototype.get=function(d,u){return this.then(function(){var m=d in o.template.prop?this.prop[d]:this.opt[d];return u?u(m):m})},o.prototype.setMargin=function(d){return this.then(function(){switch(s(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},o.prototype.setPageSize=function(d){function u(m,x){return Math.floor(m*x/72*96)}return this.then(function(){(d=d||$t.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:u(d.inner.width,d.k),height:u(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},o.prototype.setProgress=function(d,u,m,x){return d!=null&&(this.progress.val=d),u!=null&&(this.progress.state=u),m!=null&&(this.progress.n=m),x!=null&&(this.progress.stack=x),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(d,u,m,x){return this.setProgress(d?this.progress.val+d:null,u||null,m?this.progress.n+m:null,x?this.progress.stack.concat(x):null)},o.prototype.then=function(d,u){var m=this;return this.thenCore(d,u,function(x,f){return m.updateProgress(null,null,1,[x]),Promise.prototype.then.call(this,function(b){return m.updateProgress(null,x),b}).then(x,f).then(function(b){return m.updateProgress(1),b})})},o.prototype.thenCore=function(d,u,m){m=m||Promise.prototype.then;var x=this;d&&(d=d.bind(x)),u&&(u=u.bind(x));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?x:o.convert(Object.assign({},x),Promise.prototype),b=m.call(f,d,u);return o.convert(b,x.__proto__)},o.prototype.thenExternal=function(d,u){return Promise.prototype.then.call(this,d,u)},o.prototype.thenList=function(d){var u=this;return d.forEach(function(m){u=u.thenCore(m)}),u},o.prototype.catch=function(d){d&&(d=d.bind(this));var u=Promise.prototype.catch.call(this,d);return o.convert(u,this)},o.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},o.prototype.error=function(d){return this.then(function(){throw new Error(d)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,$t.getPageSize=function(d,u,m){if(Ka(d)==="object"){var x=d;d=x.orientation,u=x.unit||u,m=x.format||m}u=u||"mm",m=m||"a4",d=(""+(d||"P")).toLowerCase();var f,b=(""+m).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+u}var v,j=0,N=0;if(p.hasOwnProperty(b))j=p[b][1]/f,N=p[b][0]/f;else try{j=m[1],N=m[0]}catch{throw new Error("Invalid format: "+m)}if(d==="p"||d==="portrait")d="p",N>j&&(v=N,N=j,j=v);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",j>N&&(v=N,N=j,j=v)}return{width:N,height:j,unit:u,k:f,orientation:d}},t.html=function(d,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(Vv):null;var m=new o(u);return u.worker?m:m.from(d).doCallback()}}($t.API),$t.API.addJS=function(t){return XS=t,this.internal.events.subscribe("postPutResources",function(){Np=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Np+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),KS=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+XS+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Np!==void 0&&KS!==void 0&&this.internal.out("/Names <</JavaScript "+Np+" 0 R>>")}),this},function(t){var a;t.events.push(["postPutResources",function(){var r=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=r.outline.render().split(/\r\n/),i=0;i<n.length;i++){var o=n[i],d=s.exec(o);if(d!=null){var u=d[1];r.internal.newObjectDeferredBegin(u,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var m=this.internal.pages.length,x=[];for(i=0;i<m;i++){var f=r.internal.newObject();x.push(f);var b=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+b.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<x.length;i++)r.internal.write("(page_"+(i+1)+")"+x[i]+" 0 R");r.internal.write(" ] >>","endobj"),a=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+a+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(s,n,i){var o={title:n,options:i,children:[]};return s==null&&(s=this.root),s.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(s){s.id=r.internal.newObjectDeferred();for(var n=0;n<s.children.length;n++)this.genIds_r(s.children[n])},r.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},r.outline.renderItems=function(s){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<s.children.length;i++){var o=s.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(s)),i>0&&this.line("/Prev "+this.makeRef(s.children[i-1])),i<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var d=this.count=this.count_r({count:0},o);if(d>0&&this.line("/Count "+d),o.options&&o.options.pageNumber){var u=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var m=0;m<s.children.length;m++)this.renderItems(s.children[m])},r.outline.line=function(s){this.ctx.val+=s+`\r
`},r.outline.makeRef=function(s){return s.id+" 0 R"},r.outline.makeString=function(s){return"("+r.internal.pdfEscape(s)+")"},r.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(s,n){for(var i=0;i<n.children.length;i++)s.count++,this.count_r(s,n.children[i]);return s.count}}])}($t.API),function(t){var a=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,s,n,i,o,d){var u,m=this.decode.DCT_DECODE,x=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,u=function(f){for(var b,p=256*f.charCodeAt(4)+f.charCodeAt(5),v=f.length,j={width:0,height:0,numcomponents:1},N=4;N<v;N+=2){if(N+=p,a.indexOf(f.charCodeAt(N+1))!==-1){b=256*f.charCodeAt(N+5)+f.charCodeAt(N+6),j={width:256*f.charCodeAt(N+7)+f.charCodeAt(N+8),height:b,numcomponents:f.charCodeAt(N+9)};break}p=256*f.charCodeAt(N+2)+f.charCodeAt(N+3)}return j}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),u.numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}x={data:r,width:u.width,height:u.height,colorSpace:d,bitsPerComponent:8,filter:m,index:s,alias:n}}return x}}($t.API),$t.API.processPNG=function(t,a,r,s){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var n,i=KY(t,{checkCrc:!0}),o=i.width,d=i.height,u=i.channels,m=i.palette,x=i.depth;n=m&&u===1?function(_){for(var E=_.width,A=_.height,z=_.data,M=_.palette,D=_.depth,I=!1,V=[],H=[],B=void 0,W=!1,K=0,X=0;X<M.length;X++){var Q=eS(M[X],4),ye=Q[0],Y=Q[1],J=Q[2],U=Q[3];V.push(ye,Y,J),U!=null&&(U===0?(K++,H.length<1&&H.push(X)):U<255&&(W=!0))}if(W||K>1){I=!0,H=void 0;var ee=E*A;B=new Uint8Array(ee);for(var he=new DataView(z.buffer),pe=0;pe<ee;pe++){var se=Kv(he,pe,D),te=eS(M[se],4)[3];B[pe]=te}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:z,alphaBytes:B,needSMask:I,palette:V,mask:H}}(i):u===2||u===4?function(_){for(var E=_.data,A=_.width,z=_.height,M=_.channels,D=_.depth,I=M===2?"DeviceGray":"DeviceRGB",V=M-1,H=A*z,B=V,W=H*B,K=1*H,X=Math.ceil(W*D/8),Q=Math.ceil(K*D/8),ye=new Uint8Array(X),Y=new Uint8Array(Q),J=new DataView(E.buffer),U=new DataView(ye.buffer),ee=new DataView(Y.buffer),he=!1,pe=0;pe<H;pe++){for(var se=pe*M,te=0;te<B;te++)n_(U,Kv(J,se+te,D),pe*B+te,D);var ue=Kv(J,se+B,D);ue<(1<<D)-1&&(he=!0),n_(ee,ue,1*pe,D)}return{colorSpace:I,colorsPerPixel:V,colorBytes:ye,alphaBytes:Y,needSMask:he}}(i):function(_){var E=_.data,A=_.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:A,colorsPerPixel:A==="DeviceGray"?1:3,colorBytes:E instanceof Uint8Array?E:new Uint8Array(E.buffer),needSMask:!1}}(i);var f,b,p,v=n,j=v.colorSpace,N=v.colorsPerPixel,w=v.colorBytes,P=v.alphaBytes,k=v.needSMask,$=v.palette,O=v.mask,L=null;return s!==$t.API.image_compression.NONE&&typeof dj=="function"?(L=function(_){var E;switch(_){case $t.API.image_compression.FAST:E=11;break;case $t.API.image_compression.MEDIUM:E=13;break;case $t.API.image_compression.SLOW:E=14;break;default:E=12}return E}(s),f=this.decode.FLATE_DECODE,b="/Predictor ".concat(L," "),t=e_(w,o*N,N,s),k&&(p=e_(P,o,1,s))):(f=void 0,b="",t=w,k&&(p=P)),b+="/Colors ".concat(N," /BitsPerComponent ").concat(x," /Columns ").concat(o),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:r,data:t,index:a,filter:f,decodeParameters:b,transparency:O,palette:$,sMask:p,predictor:L,width:o,height:d,bitsPerComponent:x,colorSpace:j}}},function(t){t.processGIF89A=function(a,r,s,n){var i=new pG(a),o=i.width,d=i.height,u=[];i.decodeAndBlitFrameRGBA(0,u);var m={data:u,width:o,height:d},x=new Xv(100).encode(m,100);return t.processJPEG.call(this,x,r,s,n)},t.processGIF87A=t.processGIF89A}($t.API),$l.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var a=0;a<t;a++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[a]={red:n,green:s,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},$l.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,a=this.width*this.height*4;this.data=new Uint8Array(a),this[t]()}catch(r){rr.log("bit decode error:"+r)}},$l.prototype.bit1=function(){var t,a=Math.ceil(this.width/8),r=a%4;for(t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,n=0;n<a;n++)for(var i=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+8*n*4,d=0;d<8&&8*n+d<this.width;d++){var u=this.palette[i>>7-d&1];this.data[o+4*d]=u.blue,this.data[o+4*d+1]=u.green,this.data[o+4*d+2]=u.red,this.data[o+4*d+3]=255}r!==0&&(this.pos+=4-r)}},$l.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),a=t%4,r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,n=0;n<t;n++){var i=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+2*n*4,d=i>>4,u=15&i,m=this.palette[d];if(this.data[o]=m.blue,this.data[o+1]=m.green,this.data[o+2]=m.red,this.data[o+3]=255,2*n+1>=this.width)break;m=this.palette[u],this.data[o+4]=m.blue,this.data[o+4+1]=m.green,this.data[o+4+2]=m.red,this.data[o+4+3]=255}a!==0&&(this.pos+=4-a)}},$l.prototype.bit8=function(){for(var t=this.width%4,a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,s=0;s<this.width;s++){var n=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*s;if(n<this.palette.length){var o=this.palette[n];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},$l.prototype.bit15=function(){for(var t=this.width%3,a=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,n=0;n<this.width;n++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&a)/a*255|0,d=(i>>5&a)/a*255|0,u=(i>>10&a)/a*255|0,m=i>>15?255:0,x=s*this.width*4+4*n;this.data[x]=u,this.data[x+1]=d,this.data[x+2]=o,this.data[x+3]=m}this.pos+=t}},$l.prototype.bit16=function(){for(var t=this.width%3,a=parseInt("11111",2),r=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(o&a)/a*255|0,u=(o>>5&r)/r*255|0,m=(o>>11)/a*255|0,x=n*this.width*4+4*i;this.data[x]=m,this.data[x+1]=u,this.data[x+2]=d,this.data[x+3]=255}this.pos+=t}},$l.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var a=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+4*r;this.data[o]=i,this.data[o+1]=n,this.data[o+2]=s,this.data[o+3]=255}this.pos+=this.width%4}},$l.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var a=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),d=a*this.width*4+4*r;this.data[d]=i,this.data[d+1]=n,this.data[d+2]=s,this.data[d+3]=o}},$l.prototype.getData=function(){return this.data},function(t){t.processBMP=function(a,r,s,n){var i=new $l(a,!1),o=i.width,d=i.height,u={data:i.getData(),width:o,height:d},m=new Xv(100).encode(u,100);return t.processJPEG.call(this,m,r,s,n)}}($t.API),l_.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(a,r,s,n){var i=new l_(a),o=i.width,d=i.height,u={data:i.getData(),width:o,height:d},m=new Xv(100).encode(u,100);return t.processJPEG.call(this,m,r,s,n)}}($t.API),$t.API.processRGBA=function(t,a,r){for(var s=t.data,n=s.length,i=new Uint8Array(n/4*3),o=new Uint8Array(n/4),d=0,u=0,m=0;m<n;m+=4){var x=s[m],f=s[m+1],b=s[m+2],p=s[m+3];i[d++]=x,i[d++]=f,i[d++]=b,o[u++]=p}var v=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:a,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},$t.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},rx=$t.API,wp=rx.getCharWidthsArray=function(t,a){var r,s,n=(a=a||{}).font||this.internal.getFont(),i=a.fontSize||this.internal.getFontSize(),o=a.charSpace||this.internal.getCharSpace(),d=a.widths?a.widths:n.metadata.Unicode.widths,u=d.fof?d.fof:1,m=a.kerning?a.kerning:n.metadata.Unicode.kerning,x=m.fof?m.fof:1,f=a.doKerning!==!1,b=0,p=t.length,v=0,j=d[0]||u,N=[];for(r=0;r<p;r++)s=t.charCodeAt(r),typeof n.metadata.widthOfString=="function"?N.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(s))+o*(1e3/i)||0)/1e3):(b=f&&Ka(m[s])==="object"&&!isNaN(parseInt(m[s][v],10))?m[s][v]/x:0,N.push((d[s]||j)/u+b)),v=s;return N},JS=rx.getStringUnitWidth=function(t,a){var r=(a=a||{}).fontSize||this.internal.getFontSize(),s=a.font||this.internal.getFont(),n=a.charSpace||this.internal.getCharSpace();return rx.processArabic&&(t=rx.processArabic(t)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(t,r,n)/r:wp.apply(this,arguments).reduce(function(i,o){return i+o},0)},ZS=function(t,a,r,s){for(var n=[],i=0,o=t.length,d=0;i!==o&&d+a[i]<r;)d+=a[i],i++;n.push(t.slice(0,i));var u=i;for(d=0;i!==o;)d+a[i]>s&&(n.push(t.slice(u,i)),d=0,u=i),d+=a[i],i++;return u!==i&&n.push(t.slice(u,i)),n},QS=function(t,a,r){r||(r={});var s,n,i,o,d,u,m,x=[],f=[x],b=r.textIndent||0,p=0,v=0,j=t.split(" "),N=wp.apply(this,[" ",r])[0];if(u=r.lineIndent===-1?j[0].length+2:r.lineIndent||0){var w=Array(u).join(" "),P=[];j.map(function($){($=$.split(/\s*\n/)).length>1?P=P.concat($.map(function(O,L){return(L&&O.length?`
`:"")+O})):P.push($[0])}),j=P,u=JS.apply(this,[w,r])}for(i=0,o=j.length;i<o;i++){var k=0;if(s=j[i],u&&s[0]==`
`&&(s=s.substr(1),k=1),b+p+(v=(n=wp.apply(this,[s,r])).reduce(function($,O){return $+O},0))>a||k){if(v>a){for(d=ZS.apply(this,[s,n,a-(b+p),a]),x.push(d.shift()),x=[d.pop()];d.length;)f.push([d.shift()]);v=n.slice(s.length-(x[0]?x[0].length:0)).reduce(function($,O){return $+O},0)}else x=[s];f.push(x),b=v+u,p=N}else x.push(s),b+=p+v,p=N}return m=u?function($,O){return(O?w:"")+$.join(" ")}:function($){return $.join(" ")},f.map(m)},rx.splitTextToSize=function(t,a,r){var s,n=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(x){if(x.widths&&x.kerning)return{widths:x.widths,kerning:x.kerning};var f=this.internal.getFont(x.fontName,x.fontStyle),b="Unicode";return f.metadata[b]?{widths:f.metadata[b].widths||{0:1},kerning:f.metadata[b].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);s=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*a/n;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/n:0,i.lineIndent=r.lineIndent;var d,u,m=[];for(d=0,u=s.length;d<u;d++)m=m.concat(QS.apply(this,[s[d],o,i]));return m},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var a="0123456789abcdef",r="klmnopqrstuvwxyz",s={},n={},i=0;i<16;i++)s[r[i]]=a[i],n[a[i]]=r[i];var o=function(b){return"0x"+parseInt(b,10).toString(16)},d=t.__fontmetrics__.compress=function(b){var p,v,j,N,w=["{"];for(var P in b){if(p=b[P],isNaN(parseInt(P,10))?v="'"+P+"'":(P=parseInt(P,10),v=(v=o(P).slice(2)).slice(0,-1)+n[v.slice(-1)]),typeof p=="number")p<0?(j=o(p).slice(3),N="-"):(j=o(p).slice(2),N=""),j=N+j.slice(0,-1)+n[j.slice(-1)];else{if(Ka(p)!=="object")throw new Error("Don't know what to do with value type "+Ka(p)+".");j=d(p)}w.push(v+j)}return w.push("}"),w.join("")},u=t.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,v,j,N,w={},P=1,k=w,$=[],O="",L="",_=b.length-1,E=1;E<_;E+=1)(N=b[E])=="'"?p?(j=p.join(""),p=void 0):p=[]:p?p.push(N):N=="{"?($.push([k,j]),k={},j=void 0):N=="}"?((v=$.pop())[0][v[1]]=k,j=void 0,k=v[0]):N=="-"?P=-1:j===void 0?s.hasOwnProperty(N)?(O+=s[N],j=parseInt(O,16)*P,P=1,O=""):O+=N:s.hasOwnProperty(N)?(L+=s[N],k[j]=parseInt(L,16)*P,P=1,j=void 0,L=""):L+=N;return w},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},x={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},f={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(b){var p=b.font,v=f.Unicode[p.postScriptName];v&&(p.metadata.Unicode={},p.metadata.Unicode.widths=v.widths,p.metadata.Unicode.kerning=v.kerning);var j=x.Unicode[p.postScriptName];j&&(p.metadata.Unicode.encoding=j,p.encoding=j.codePages[0])}])}($t.API),function(t){var a=function(r){for(var s=r.length,n=new Uint8Array(s),i=0;i<s;i++)n[i]=r.charCodeAt(i);return n};t.API.events.push(["addFont",function(r){var s=void 0,n=r.font,i=r.instance;if(!n.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(s=i.existsFileInVFS(n.postScriptName)===!1?i.loadFile(n.postScriptName):i.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(o,d){d=/^\x00\x01\x00\x00/.test(d)?a(d):a(Kp(d)),o.metadata=t.API.TTFFont.open(d),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(n,s)}}])}($t),$t.API.addSvgAsImage=function(t,a,r,s,n,i,o,d){if(isNaN(a)||isNaN(r))throw rr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(n))throw rr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=s,u.height=n;var m=u.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,u.width,u.height);var x={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(na.canvg?Promise.resolve(na.canvg):Ev(()=>import("./index.es-Cq9sMEjw.js"),[])).catch(function(b){return Promise.reject(new Error("Could not load canvg: "+b))}).then(function(b){return b.default?b.default:b}).then(function(b){return b.fromString(m,t,x)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(x)}).then(function(){f.addImage(u.toDataURL("image/jpeg",1),a,r,s,n,o,d)})},$t.API.putTotalPages=function(t){var a,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(a=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(a=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var n=0;n<this.internal.pages[s].length;n++)this.internal.pages[s][n]=this.internal.pages[s][n].replace(a,r);return this},$t.API.viewerPreferences=function(t,a){var r;t=t||{},a=a||!1;var s,n,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(o),u=[],m=0,x=0,f=0;function b(v,j){var N,w=!1;for(N=0;N<v.length;N+=1)v[N]===j&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||a===!0){var p=d.length;for(f=0;f<p;f+=1)r[d[f]].value=r[d[f]].defaultValue,r[d[f]].explicitSet=!1}if(Ka(t)==="object"){for(n in t)if(i=t[n],b(d,n)&&i!==void 0){if(r[n].type==="boolean"&&typeof i=="boolean")r[n].value=i;else if(r[n].type==="name"&&b(r[n].valueSet,i))r[n].value=i;else if(r[n].type==="integer"&&Number.isInteger(i))r[n].value=i;else if(r[n].type==="array"){for(m=0;m<i.length;m+=1)if(s=!0,i[m].length===1&&typeof i[m][0]=="number")u.push(String(i[m]-1));else if(i[m].length>1){for(x=0;x<i[m].length;x+=1)typeof i[m][x]!="number"&&(s=!1);s===!0&&u.push([i[m][0]-1,i[m][1]-1].join(" "))}r[n].value="["+u.join(" ")+"]"}else r[n].value=r[n].defaultValue;r[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,j=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?j.push("/"+v+" /"+r[v].value):j.push("/"+v+" "+r[v].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var a=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',n=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(s)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),m=i.length+o.length+d.length+n.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+m+" >>"),this.internal.write("stream"),this.internal.write(n+i+o+d+u),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(s,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",a)),this}}($t.API),function(t){var a=t.API,r=a.pdfEscape16=function(i,o){for(var d,u=o.metadata.Unicode.widths,m=["","0","00","000","0000"],x=[""],f=0,b=i.length;f<b;++f){if(d=o.metadata.characterToGlyph(i.charCodeAt(f)),o.metadata.glyIdsUsed.push(d),o.metadata.toUnicode[d]=i.charCodeAt(f),u.indexOf(d)==-1&&(u.push(d),u.push([parseInt(o.metadata.widthOfGlyph(d),10)])),d=="0")return x.join("");d=d.toString(16),x.push(m[4-d.length],d)}return x.join("")},s=function(i){var o,d,u,m,x,f,b;for(x=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],f=0,b=(d=Object.keys(i).sort(function(p,v){return p-v})).length;f<b;f++)o=d[f],u.length>=100&&(x+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(m=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),u.push("<"+o+"><"+m+">"));return u.length&&(x+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),x+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};a.events.push(["putFont",function(i){(function(o){var d=o.font,u=o.out,m=o.newObject,x=o.putStream;if(d.metadata instanceof t.API.TTFFont&&d.encoding==="Identity-H"){for(var f=d.metadata.Unicode.widths,b=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),p="",v=0;v<b.length;v++)p+=String.fromCharCode(b[v]);var j=m();x({data:p,addLength1:!0,objectId:j}),u("endobj");var N=m();x({data:s(d.metadata.toUnicode),addLength1:!0,objectId:N}),u("endobj");var w=m();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+lx(d.fontName)),u("/FontFile2 "+j+" 0 R"),u("/FontBBox "+t.API.PDFObject.convert(d.metadata.bbox)),u("/Flags "+d.metadata.flags),u("/StemV "+d.metadata.stemV),u("/ItalicAngle "+d.metadata.italicAngle),u("/Ascent "+d.metadata.ascender),u("/Descent "+d.metadata.decender),u("/CapHeight "+d.metadata.capHeight),u(">>"),u("endobj");var P=m();u("<<"),u("/Type /Font"),u("/BaseFont /"+lx(d.fontName)),u("/FontDescriptor "+w+" 0 R"),u("/W "+t.API.PDFObject.convert(f)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+d.encoding+")"),u(">>"),u(">>"),u("endobj"),d.objectNumber=m(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+N+" 0 R"),u("/BaseFont /"+lx(d.fontName)),u("/Encoding /"+d.encoding),u("/DescendantFonts ["+P+" 0 R]"),u(">>"),u("endobj"),d.isAlreadyPutted=!0}})(i)}]),a.events.push(["putFont",function(i){(function(o){var d=o.font,u=o.out,m=o.newObject,x=o.putStream;if(d.metadata instanceof t.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var f=d.metadata.rawData,b="",p=0;p<f.length;p++)b+=String.fromCharCode(f[p]);var v=m();x({data:b,addLength1:!0,objectId:v}),u("endobj");var j=m();x({data:s(d.metadata.toUnicode),addLength1:!0,objectId:j}),u("endobj");var N=m();u("<<"),u("/Descent "+d.metadata.decender),u("/CapHeight "+d.metadata.capHeight),u("/StemV "+d.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+v+" 0 R"),u("/Flags 96"),u("/FontBBox "+t.API.PDFObject.convert(d.metadata.bbox)),u("/FontName /"+lx(d.fontName)),u("/ItalicAngle "+d.metadata.italicAngle),u("/Ascent "+d.metadata.ascender),u(">>"),u("endobj"),d.objectNumber=m();for(var w=0;w<d.metadata.hmtx.widths.length;w++)d.metadata.hmtx.widths[w]=parseInt(d.metadata.hmtx.widths[w]*(1e3/d.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+lx(d.fontName)+"/FontDescriptor "+N+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),u("endobj"),d.isAlreadyPutted=!0}})(i)}]);var n=function(i){var o,d=i.text||"",u=i.x,m=i.y,x=i.options||{},f=i.mutex||{},b=f.pdfEscape,p=f.activeFontKey,v=f.fonts,j=p,N="",w=0,P="",k=v[j].encoding;if(v[j].encoding!=="Identity-H")return{text:d,x:u,y:m,options:x,mutex:f};for(P=d,j=p,Array.isArray(d)&&(P=d[0]),w=0;w<P.length;w+=1)v[j].metadata.hasOwnProperty("cmap")&&(o=v[j].metadata.cmap.unicode.codeMap[P[w].charCodeAt(0)]),o||P[w].charCodeAt(0)<256&&v[j].metadata.hasOwnProperty("Unicode")?N+=P[w]:N+="";var $="";return parseInt(j.slice(1))<14||k==="WinAnsiEncoding"?$=b(N,j).split("").map(function(O){return O.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&($=r(N,v[j])),f.isHex=!0,{text:$,x:u,y:m,options:x,mutex:f}};a.events.push(["postProcessText",function(i){var o=i.text||"",d=[],u={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var m=0;for(m=0;m<o.length;m+=1)Array.isArray(o[m])&&o[m].length===3?d.push([n(Object.assign({},u,{text:o[m][0]})).text,o[m][1],o[m][2]]):d.push(n(Object.assign({},u,{text:o[m]})).text);i.text=d}else i.text=n(Object.assign({},u,{text:o})).text}])}($t),function(t){var a=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return a.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,s){return a.call(this),this.internal.vFS[r]=s,this},t.getFileFromVFS=function(r){return a.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}($t.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(s){var n,i,o,d,u,m,x,f=a,b=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},N=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),P=!1,k=0;this.__bidiEngine__={};var $=function(M){var D=M.charCodeAt(),I=D>>8,V=j[I];return V!==void 0?f[256*V+(255&D)]:I===252||I===253?"AL":w.test(I)?"L":I===8?"R":"N"},O=function(M){for(var D,I=0;I<M.length;I++){if((D=$(M.charAt(I)))==="L")return!1;if(D==="R")return!0}return!1},L=function(M,D,I,V){var H,B,W,K,X=D[V];switch(X){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":P=!1;break;case"N":case"AN":break;case"EN":P&&(X="AN");break;case"AL":P=!0,X="R";break;case"WS":case"BN":X="N";break;case"CS":V<1||V+1>=D.length||(H=I[V-1])!=="EN"&&H!=="AN"||(B=D[V+1])!=="EN"&&B!=="AN"?X="N":P&&(B="AN"),X=B===H?B:"N";break;case"ES":X=(H=V>0?I[V-1]:"B")==="EN"&&V+1<D.length&&D[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&I[V-1]==="EN"){X="EN";break}if(P){X="N";break}for(W=V+1,K=D.length;W<K&&D[W]==="ET";)W++;X=W<K&&D[W]==="EN"?"EN":"N";break;case"NSM":if(o&&!d){for(K=D.length,W=V+1;W<K&&D[W]==="NSM";)W++;if(W<K){var Q=M[V],ye=Q>=1425&&Q<=2303||Q===64286;if(H=D[W],ye&&(H==="R"||H==="AL")){X="R";break}}}X=V<1||(H=D[V-1])==="B"?"N":I[V-1];break;case"B":P=!1,n=!0,X=k;break;case"S":i=!0,X="N"}return X},_=function(M,D,I){var V=M.split("");return I&&E(V,I,{hiLevel:k}),V.reverse(),D&&D.reverse(),V.join("")},E=function(M,D,I){var V,H,B,W,K,X=-1,Q=M.length,ye=0,Y=[],J=k?p:b,U=[];for(P=!1,n=!1,i=!1,H=0;H<Q;H++)U[H]=$(M[H]);for(B=0;B<Q;B++){if(K=ye,Y[B]=L(M,U,Y,B),V=240&(ye=J[K][v[Y[B]]]),ye&=15,D[B]=W=J[ye][5],V>0)if(V===16){for(H=X;H<B;H++)D[H]=1;X=-1}else X=-1;if(J[ye][6])X===-1&&(X=B);else if(X>-1){for(H=X;H<B;H++)D[H]=W;X=-1}U[B]==="B"&&(D[B]=0),I.hiLevel|=W}i&&function(ee,he,pe){for(var se=0;se<pe;se++)if(ee[se]==="S"){he[se]=k;for(var te=se-1;te>=0&&ee[te]==="WS";te--)he[te]=k}}(U,D,Q)},A=function(M,D,I,V,H){if(!(H.hiLevel<M)){if(M===1&&k===1&&!n)return D.reverse(),void(I&&I.reverse());for(var B,W,K,X,Q=D.length,ye=0;ye<Q;){if(V[ye]>=M){for(K=ye+1;K<Q&&V[K]>=M;)K++;for(X=ye,W=K-1;X<W;X++,W--)B=D[X],D[X]=D[W],D[W]=B,I&&(B=I[X],I[X]=I[W],I[W]=B);ye=K}ye++}}},z=function(M,D,I){var V=M.split(""),H={hiLevel:k};return I||(I=[]),E(V,I,H),function(B,W,K){if(K.hiLevel!==0&&x)for(var X,Q=0;Q<B.length;Q++)W[Q]===1&&(X=N.indexOf(B[Q]))>=0&&(B[Q]=N[X+1])}(V,I,H),A(2,V,D,I,H),A(1,V,D,I,H),V.join("")};return this.__bidiEngine__.doBidiReorder=function(M,D,I){if(function(H,B){if(B)for(var W=0;W<H.length;W++)B[W]=W;d===void 0&&(d=O(H)),m===void 0&&(m=O(H))}(M,D),o||!u||m)if(o&&u&&d^m)k=d?1:0,M=_(M,D,I);else if(!o&&u&&m)k=d?1:0,M=z(M,D,I),M=_(M,D);else if(!o||d||u||m){if(o&&!u&&d^m)M=_(M,D),d?(k=0,M=z(M,D,I)):(k=1,M=z(M,D,I),M=_(M,D));else if(o&&d&&!u&&m)k=1,M=z(M,D,I),M=_(M,D);else if(!o&&!u&&d^m){var V=x;d?(k=1,M=z(M,D,I),k=0,x=!1,M=z(M,D,I),x=V):(k=0,M=z(M,D,I),M=_(M,D),k=1,x=!1,M=z(M,D,I),x=V,M=_(M,D))}}else k=0,M=z(M,D,I);else k=d?1:0,M=z(M,D,I);return M},this.__bidiEngine__.setOptions=function(M){M&&(o=M.isInputVisual,u=M.isOutputVisual,d=M.isInputRtl,m=M.isOutputRtl,x=M.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var a=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(s){var n=s.text;s.x,s.y;var i=s.options||{};s.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(n)==="[object Array]"){var d=0;for(o=[],d=0;d<n.length;d+=1)Object.prototype.toString.call(n[d])==="[object Array]"?o.push([r.doBidiReorder(n[d][0]),n[d][1],n[d][2]]):o.push([r.doBidiReorder(n[d])]);s.text=o}else s.text=r.doBidiReorder(n);r.setOptions({isInputVisual:!0})}])}($t),$t.API.TTFFont=function(){function t(a){var r;if(this.rawData=a,r=this.contents=new Fd(a),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new PG(this),this.registerTTF()}return t.open=function(a){return new t(a)},t.prototype.parse=function(){return this.directory=new gG(this.contents),this.head=new bG(this),this.name=new SG(this),this.cmap=new lE(this),this.toUnicode={},this.hhea=new vG(this),this.maxp=new _G(this),this.hmtx=new AG(this),this.post=new NG(this),this.os2=new jG(this),this.loca=new TG(this),this.glyf=new kG(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var a,r,s,n,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,d,u,m;for(m=[],o=0,d=(u=this.bbox).length;o<d;o++)a=u[o],m.push(Math.round(a*this.scaleFactor));return m}).call(this),this.stemV=0,this.post.exists?(s=255&(n=this.post.italic_angle),32768&(r=n>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(a){var r;return((r=this.cmap.unicode)!=null?r.codeMap[a]:void 0)||0},t.prototype.widthOfGlyph=function(a){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(a).advance*r},t.prototype.widthOfString=function(a,r,s){var n,i,o,d;for(o=0,i=0,d=(a=""+a).length;0<=d?i<d:i>d;i=0<=d?++i:--i)n=a.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(n))+s*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(a,r){var s;return r==null&&(r=!1),s=r?this.lineGap:0,(this.ascender+s-this.decender)/1e3*a},t}();var Vl,Fd=function(){function t(a){this.data=a??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(a){return this.data[this.pos++]=a},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(a){return this.writeByte(a>>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},t.prototype.readInt32=function(){var a;return(a=this.readUInt32())>=2147483648?a-4294967296:a},t.prototype.writeInt32=function(a){return a<0&&(a+=4294967296),this.writeUInt32(a)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(a){return this.writeByte(a>>8&255),this.writeByte(255&a)},t.prototype.readInt16=function(){var a;return(a=this.readUInt16())>=32768?a-65536:a},t.prototype.writeInt16=function(a){return a<0&&(a+=65536),this.writeUInt16(a)},t.prototype.readString=function(a){var r,s;for(s=[],r=0;0<=a?r<a:r>a;r=0<=a?++r:--r)s[r]=String.fromCharCode(this.readByte());return s.join("")},t.prototype.writeString=function(a){var r,s,n;for(n=[],r=0,s=a.length;0<=s?r<s:r>s;r=0<=s?++r:--r)n.push(this.writeByte(a.charCodeAt(r)));return n},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(a){return this.writeInt16(a)},t.prototype.readLongLong=function(){var a,r,s,n,i,o,d,u;return a=this.readByte(),r=this.readByte(),s=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),d=this.readByte(),u=this.readByte(),128&a?-1*(72057594037927940*(255^a)+281474976710656*(255^r)+1099511627776*(255^s)+4294967296*(255^n)+16777216*(255^i)+65536*(255^o)+256*(255^d)+(255^u)+1):72057594037927940*a+281474976710656*r+1099511627776*s+4294967296*n+16777216*i+65536*o+256*d+u},t.prototype.writeLongLong=function(a){var r,s;return r=Math.floor(a/4294967296),s=4294967295&a,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(a){return this.writeInt32(a)},t.prototype.read=function(a){var r,s;for(r=[],s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)r.push(this.readByte());return r},t.prototype.write=function(a){var r,s,n,i;for(i=[],s=0,n=a.length;s<n;s++)r=a[s],i.push(this.writeByte(r));return i},t}(),gG=function(){var t;function a(r){var s,n,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:n>i;n=0<=i?++n:--n)s={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[s.tag]=s}return a.prototype.encode=function(r){var s,n,i,o,d,u,m,x,f,b,p,v,j;for(j in p=Object.keys(r).length,u=Math.log(2),f=16*Math.floor(Math.log(p)/u),o=Math.floor(f/u),x=16*p-f,(n=new Fd).writeInt(this.scalarType),n.writeShort(p),n.writeShort(f),n.writeShort(o),n.writeShort(x),i=16*p,m=n.pos+i,d=null,v=[],r)for(b=r[j],n.writeString(j),n.writeInt(t(b)),n.writeInt(m),n.writeInt(b.length),v=v.concat(b),j==="head"&&(d=m),m+=b.length;m%4;)v.push(0),m++;return n.write(v),s=2981146554-t(n.data),n.pos=d+8,n.writeUInt32(s),n.data},t=function(r){var s,n,i,o;for(r=oE.call(r);r.length%4;)r.push(0);for(i=new Fd(r),n=0,s=0,o=r.length;s<o;s=s+=4)n+=i.readUInt32();return 4294967295&n},a}(),yG={}.hasOwnProperty,Lo=function(t,a){for(var r in a)yG.call(a,r)&&(t[r]=a[r]);function s(){this.constructor=t}return s.prototype=a.prototype,t.prototype=new s,t.__super__=a.prototype,t};Vl=function(){function t(a){var r;this.file=a,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var bG=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,Vl),t.prototype.tag="head",t.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.revision=a.readInt(),this.checkSumAdjustment=a.readInt(),this.magicNumber=a.readInt(),this.flags=a.readShort(),this.unitsPerEm=a.readShort(),this.created=a.readLongLong(),this.modified=a.readLongLong(),this.xMin=a.readShort(),this.yMin=a.readShort(),this.xMax=a.readShort(),this.yMax=a.readShort(),this.macStyle=a.readShort(),this.lowestRecPPEM=a.readShort(),this.fontDirectionHint=a.readShort(),this.indexToLocFormat=a.readShort(),this.glyphDataFormat=a.readShort()},t.prototype.encode=function(a){var r;return(r=new Fd).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(a),r.writeShort(this.glyphDataFormat),r.data},t}(),o_=function(){function t(a,r){var s,n,i,o,d,u,m,x,f,b,p,v,j,N,w,P,k;switch(this.platformID=a.readUInt16(),this.encodingID=a.readShort(),this.offset=r+a.readInt(),f=a.pos,a.pos=this.offset,this.format=a.readUInt16(),this.length=a.readUInt16(),this.language=a.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=a.readByte();break;case 4:for(p=a.readUInt16(),b=p/2,a.pos+=6,i=function(){var $,O;for(O=[],u=$=0;0<=b?$<b:$>b;u=0<=b?++$:--$)O.push(a.readUInt16());return O}(),a.pos+=2,j=function(){var $,O;for(O=[],u=$=0;0<=b?$<b:$>b;u=0<=b?++$:--$)O.push(a.readUInt16());return O}(),m=function(){var $,O;for(O=[],u=$=0;0<=b?$<b:$>b;u=0<=b?++$:--$)O.push(a.readUInt16());return O}(),x=function(){var $,O;for(O=[],u=$=0;0<=b?$<b:$>b;u=0<=b?++$:--$)O.push(a.readUInt16());return O}(),n=(this.length-a.pos+this.offset)/2,d=function(){var $,O;for(O=[],u=$=0;0<=n?$<n:$>n;u=0<=n?++$:--$)O.push(a.readUInt16());return O}(),u=w=0,k=i.length;w<k;u=++w)for(N=i[u],s=P=v=j[u];v<=N?P<=N:P>=N;s=v<=N?++P:--P)x[u]===0?o=s+m[u]:(o=d[x[u]/2+(s-v)-(b-u)]||0)!==0&&(o+=m[u]),this.codeMap[s]=65535&o}a.pos=f}return t.encode=function(a,r){var s,n,i,o,d,u,m,x,f,b,p,v,j,N,w,P,k,$,O,L,_,E,A,z,M,D,I,V,H,B,W,K,X,Q,ye,Y,J,U,ee,he,pe,se,te,ue,ge,ce;switch(V=new Fd,o=Object.keys(a).sort(function(De,ke){return De-ke}),r){case"macroman":for(j=0,N=function(){var De=[];for(v=0;v<256;++v)De.push(0);return De}(),P={0:0},i={},H=0,X=o.length;H<X;H++)P[te=a[n=o[H]]]==null&&(P[te]=++j),i[n]={old:a[n],new:P[a[n]]},N[n]=P[a[n]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(N),{charMap:i,subtable:V.data,maxGlyphID:j+1};case"unicode":for(D=[],f=[],k=0,P={},s={},w=m=null,B=0,Q=o.length;B<Q;B++)P[O=a[n=o[B]]]==null&&(P[O]=++k),s[n]={old:O,new:P[O]},d=P[O]-n,w!=null&&d===m||(w&&f.push(w),D.push(n),m=d),w=n;for(w&&f.push(w),f.push(65535),D.push(65535),z=2*(A=D.length),E=2*Math.pow(Math.log(A)/Math.LN2,2),b=Math.log(E/2)/Math.LN2,_=2*A-E,u=[],L=[],p=[],v=W=0,ye=D.length;W<ye;v=++W){if(M=D[v],x=f[v],M===65535){u.push(0),L.push(0);break}if(M-(I=s[M].new)>=32768)for(u.push(0),L.push(2*(p.length+A-v)),n=K=M;M<=x?K<=x:K>=x;n=M<=x?++K:--K)p.push(s[n].new);else u.push(I-M),L.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*A+2*p.length),V.writeUInt16(0),V.writeUInt16(z),V.writeUInt16(E),V.writeUInt16(b),V.writeUInt16(_),pe=0,Y=f.length;pe<Y;pe++)n=f[pe],V.writeUInt16(n);for(V.writeUInt16(0),se=0,J=D.length;se<J;se++)n=D[se],V.writeUInt16(n);for(ue=0,U=u.length;ue<U;ue++)d=u[ue],V.writeUInt16(d);for(ge=0,ee=L.length;ge<ee;ge++)$=L[ge],V.writeUInt16($);for(ce=0,he=p.length;ce<he;ce++)j=p[ce],V.writeUInt16(j);return{charMap:s,subtable:V.data,maxGlyphID:k+1}}},t}(),lE=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,Vl),t.prototype.tag="cmap",t.prototype.parse=function(a){var r,s,n;for(a.pos=this.offset,this.version=a.readUInt16(),n=a.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)r=new o_(a,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(a,r){var s,n;return r==null&&(r="macroman"),s=o_.encode(a,r),(n=new Fd).writeUInt16(0),n.writeUInt16(1),s.table=n.data.concat(s.subtable),s},t}(),vG=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,Vl),t.prototype.tag="hhea",t.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.ascender=a.readShort(),this.decender=a.readShort(),this.lineGap=a.readShort(),this.advanceWidthMax=a.readShort(),this.minLeftSideBearing=a.readShort(),this.minRightSideBearing=a.readShort(),this.xMaxExtent=a.readShort(),this.caretSlopeRise=a.readShort(),this.caretSlopeRun=a.readShort(),this.caretOffset=a.readShort(),a.pos+=8,this.metricDataFormat=a.readShort(),this.numberOfMetrics=a.readUInt16()},t}(),jG=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,Vl),t.prototype.tag="OS/2",t.prototype.parse=function(a){if(a.pos=this.offset,this.version=a.readUInt16(),this.averageCharWidth=a.readShort(),this.weightClass=a.readUInt16(),this.widthClass=a.readUInt16(),this.type=a.readShort(),this.ySubscriptXSize=a.readShort(),this.ySubscriptYSize=a.readShort(),this.ySubscriptXOffset=a.readShort(),this.ySubscriptYOffset=a.readShort(),this.ySuperscriptXSize=a.readShort(),this.ySuperscriptYSize=a.readShort(),this.ySuperscriptXOffset=a.readShort(),this.ySuperscriptYOffset=a.readShort(),this.yStrikeoutSize=a.readShort(),this.yStrikeoutPosition=a.readShort(),this.familyClass=a.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(a.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(a.readInt());return s}(),this.vendorID=a.readString(4),this.selection=a.readShort(),this.firstCharIndex=a.readShort(),this.lastCharIndex=a.readShort(),this.version>0&&(this.ascent=a.readShort(),this.descent=a.readShort(),this.lineGap=a.readShort(),this.winAscent=a.readShort(),this.winDescent=a.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(a.readInt());return s}(),this.version>1))return this.xHeight=a.readShort(),this.capHeight=a.readShort(),this.defaultChar=a.readShort(),this.breakChar=a.readShort(),this.maxContext=a.readShort()},t}(),NG=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,Vl),t.prototype.tag="post",t.prototype.parse=function(a){var r,s,n;switch(a.pos=this.offset,this.format=a.readInt(),this.italicAngle=a.readInt(),this.underlinePosition=a.readShort(),this.underlineThickness=a.readShort(),this.isFixedPitch=a.readInt(),this.minMemType42=a.readInt(),this.maxMemType42=a.readInt(),this.minMemType1=a.readInt(),this.maxMemType1=a.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(s=a.readUInt16(),this.glyphNameIndex=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)this.glyphNameIndex.push(a.readUInt16());for(this.names=[],n=[];a.pos<this.offset+this.length;)r=a.readByte(),n.push(this.names.push(a.readString(r)));return n;case 151552:return s=a.readUInt16(),this.offsets=a.read(s);case 262144:return this.map=(function(){var o,d,u;for(u=[],i=o=0,d=this.file.maxp.numGlyphs;0<=d?o<d:o>d;i=0<=d?++o:--o)u.push(a.readUInt32());return u}).call(this)}},t}(),wG=function(t,a){this.raw=t,this.length=t.length,this.platformID=a.platformID,this.encodingID=a.encodingID,this.languageID=a.languageID},SG=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,Vl),t.prototype.tag="name",t.prototype.parse=function(a){var r,s,n,i,o,d,u,m,x,f,b;for(a.pos=this.offset,a.readShort(),r=a.readShort(),d=a.readShort(),s=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)s.push({platformID:a.readShort(),encodingID:a.readShort(),languageID:a.readShort(),nameID:a.readShort(),length:a.readShort(),offset:this.offset+d+a.readShort()});for(u={},i=x=0,f=s.length;x<f;i=++x)n=s[i],a.pos=n.offset,m=a.readString(n.length),o=new wG(m,n),u[b=n.nameID]==null&&(u[b]=[]),u[n.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),_G=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,Vl),t.prototype.tag="maxp",t.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.numGlyphs=a.readUInt16(),this.maxPoints=a.readUInt16(),this.maxContours=a.readUInt16(),this.maxCompositePoints=a.readUInt16(),this.maxComponentContours=a.readUInt16(),this.maxZones=a.readUInt16(),this.maxTwilightPoints=a.readUInt16(),this.maxStorage=a.readUInt16(),this.maxFunctionDefs=a.readUInt16(),this.maxInstructionDefs=a.readUInt16(),this.maxStackElements=a.readUInt16(),this.maxSizeOfInstructions=a.readUInt16(),this.maxComponentElements=a.readUInt16(),this.maxComponentDepth=a.readUInt16()},t}(),AG=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,Vl),t.prototype.tag="hmtx",t.prototype.parse=function(a){var r,s,n,i,o,d,u;for(a.pos=this.offset,this.metrics=[],r=0,d=this.file.hhea.numberOfMetrics;0<=d?r<d:r>d;r=0<=d?++r:--r)this.metrics.push({advance:a.readUInt16(),lsb:a.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var m,x;for(x=[],r=m=0;0<=n?m<n:m>n;r=0<=n?++m:--m)x.push(a.readInt16());return x}(),this.widths=(function(){var m,x,f,b;for(b=[],m=0,x=(f=this.metrics).length;m<x;m++)i=f[m],b.push(i.advance);return b}).call(this),s=this.widths[this.widths.length-1],u=[],r=o=0;0<=n?o<n:o>n;r=0<=n?++o:--o)u.push(this.widths.push(s));return u},t.prototype.forGlyph=function(a){return a in this.metrics?this.metrics[a]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[a-this.metrics.length]}},t}(),oE=[].slice,kG=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,Vl),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(a){var r,s,n,i,o,d,u,m,x,f;return a in this.cache?this.cache[a]:(i=this.file.loca,r=this.file.contents,s=i.indexOf(a),(n=i.lengthOf(a))===0?this.cache[a]=null:(r.pos=this.offset+s,o=(d=new Fd(r.read(n))).readShort(),m=d.readShort(),f=d.readShort(),u=d.readShort(),x=d.readShort(),this.cache[a]=o===-1?new EG(d,m,f,u,x):new CG(d,o,m,f,u,x),this.cache[a]))},t.prototype.encode=function(a,r,s){var n,i,o,d,u;for(o=[],i=[],d=0,u=r.length;d<u;d++)n=a[r[d]],i.push(o.length),n&&(o=o.concat(n.encode(s)));return i.push(o.length),{table:o,offsets:i}},t}(),CG=function(){function t(a,r,s,n,i,o){this.raw=a,this.numberOfContours=r,this.xMin=s,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),EG=function(){function t(a,r,s,n,i){var o,d;for(this.raw=a,this.xMin=r,this.yMin=s,this.xMax=n,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;d=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&d;)o.pos+=1&d?4:2,128&d?o.pos+=8:64&d?o.pos+=4:8&d&&(o.pos+=2)}return t.prototype.encode=function(){var a,r,s;for(r=new Fd(oE.call(this.raw.data)),a=0,s=this.glyphIDs.length;a<s;++a)r.pos=this.glyphOffsets[a];return r.data},t}(),TG=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lo(t,Vl),t.prototype.tag="loca",t.prototype.parse=function(a){var r,s;return a.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var n,i;for(i=[],s=0,n=this.length;s<n;s+=2)i.push(2*a.readUInt16());return i}).call(this):(function(){var n,i;for(i=[],s=0,n=this.length;s<n;s+=4)i.push(a.readUInt32());return i}).call(this)},t.prototype.indexOf=function(a){return this.offsets[a]},t.prototype.lengthOf=function(a){return this.offsets[a+1]-this.offsets[a]},t.prototype.encode=function(a,r){for(var s=new Uint32Array(this.offsets.length),n=0,i=0,o=0;o<s.length;++o)if(s[o]=n,i<r.length&&r[i]==o){++i,s[o]=n;var d=this.offsets[o],u=this.offsets[o+1]-d;u>0&&(n+=u)}for(var m=new Array(4*s.length),x=0;x<s.length;++x)m[4*x+3]=255&s[x],m[4*x+2]=(65280&s[x])>>8,m[4*x+1]=(16711680&s[x])>>16,m[4*x]=(4278190080&s[x])>>24;return m},t}(),PG=function(){function t(a){this.font=a,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var a,r,s,n,i;for(r in n=this.font.cmap.tables[0].codeMap,a={},i=this.subset)s=i[r],a[r]=n[s];return a},t.prototype.glyphsFor=function(a){var r,s,n,i,o,d,u;for(n={},o=0,d=a.length;o<d;o++)n[i=a[o]]=this.font.glyf.glyphFor(i);for(i in r=[],n)(s=n[i])!=null&&s.compound&&r.push.apply(r,s.glyphIDs);if(r.length>0)for(i in u=this.glyphsFor(r))s=u[i],n[i]=s;return n},t.prototype.encode=function(a,r){var s,n,i,o,d,u,m,x,f,b,p,v,j,N,w;for(n in s=lE.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(a),p={0:0},w=s.charMap)p[(u=w[n]).old]=u.new;for(v in b=s.maxGlyphID,o)v in p||(p[v]=b++);return x=function(P){var k,$;for(k in $={},P)$[P[k]]=k;return $}(p),f=Object.keys(x).sort(function(P,k){return P-k}),j=function(){var P,k,$;for($=[],P=0,k=f.length;P<k;P++)d=f[P],$.push(x[d]);return $}(),i=this.font.glyf.encode(o,j,p),m=this.font.loca.encode(i.offsets,j),N={cmap:this.font.cmap.raw(),glyf:i.table,loca:m,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(N["OS/2"]=this.font.os2.raw()),this.font.directory.encode(N)},t}();$t.API.PDFObject=function(){var t;function a(){}return t=function(r,s){return(Array(s+1).join("0")+r).slice(-s)},a.convert=function(r){var s,n,i,o;if(Array.isArray(r))return"["+function(){var d,u,m;for(m=[],d=0,u=r.length;d<u;d++)s=r[d],m.push(a.convert(s));return m}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(n in i=["<<"],r)o=r[n],i.push("/"+n+" "+a.convert(o));return i.push(">>"),i.join(`
`)}return""+r},a}();const c_=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState(""),[i,o]=g.useState(null),[d,u]=g.useState([]),[m,x]=g.useState([]),[f,b]=g.useState([]),[p]=g.useState([{id:"cash",name:"Cash"},{id:"bank_transfer",name:"Bank Transfer"},{id:"cheque",name:"Cheque"},{id:"mobile_money",name:"Mobile Money"},{id:"other",name:"Other"}]),[v,j]=g.useState([]),[N,w]=g.useState(null),[P,k]=g.useState(!1),[$,O]=g.useState(!1),[L,_]=g.useState(null),[E,A]=g.useState({student_reg_number:"",gradelevel_class_id:"",term:"",academic_year:"",invoice_structure_id:"",amount:"",currency_id:"",payment_method_id:"",payment_date:new Date().toISOString().split("T")[0],reference_number:"",notes:""}),[z,M]=g.useState(!1),[D,I]=g.useState(!1),[V,H]=g.useState(""),[B,W]=g.useState("");g.useEffect(()=>{K(),X()},[]),g.useEffect(()=>{E.gradelevel_class_id&&E.term&&E.academic_year&&Q()},[E.gradelevel_class_id,E.term,E.academic_year]);const K=async()=>{try{console.log(" Fetching classes from:",`${ie}/classes/gradelevel-classes`);const te=await ne.get(`${ie}/classes/gradelevel-classes`,{headers:{Authorization:`Bearer ${t}`}});console.log(" Classes response:",te.data),x(te.data.data||[]),console.log(" Classes set:",te.data.data||[])}catch(te){console.error("Error fetching classes:",te),te.response&&console.error("Error response:",te.response.data)}},X=async()=>{try{const te=await ne.get(`${ie}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}});b(te.data.data||[])}catch(te){console.error("Error fetching currencies:",te)}},Q=async()=>{try{const te=await ne.get(`${ie}/fees/invoice-structures/class/${E.gradelevel_class_id}?term=${E.term}&academic_year=${E.academic_year}`,{headers:{Authorization:`Bearer ${t}`}});j(te.data.data||[])}catch(te){console.error("Error fetching invoice structures:",te),j([])}},ye=async()=>{if(s.trim()){r(!0);try{const te=await ne.get(`${ie}/students/search?query=${s}`,{headers:{Authorization:`Bearer ${t}`}});u(te.data.data||[])}catch(te){console.error("Error searching students:",te),u([])}finally{r(!1)}}},Y=te=>{o(te),A(ue=>({...ue,student_reg_number:te.RegNumber})),u([]),n("")},J=te=>{w(te),A(ue=>({...ue,invoice_structure_id:te.id,currency_id:te.currency_id}))},U=()=>{const te=Date.now(),ue=Math.floor(Math.random()*1e3);return`INV-${te}-${ue}`},ee=async te=>{if(te.preventDefault(),!i){W("Please select a student"),I(!0);return}if(!E.amount||!E.currency_id||!E.payment_method_id){W("Please fill in all required fields"),I(!0);return}if(!E.reference_number.trim()){W("Please enter a reference number"),I(!0);return}k(!0)},he=async()=>{r(!0),W("");try{const te={student_reg_number:i.RegNumber,payment_amount:parseFloat(E.amount),payment_currency:E.currency_id,payment_method:p.find(ge=>ge.id===E.payment_method_id)?.name||"Cash",payment_date:E.payment_date,reference_number:E.reference_number,notes:E.notes&&E.notes.trim()||(E.invoice_structure_id?null:"Payment for outstanding debt (no invoice)"),fee_type:"tuition"};E.invoice_structure_id&&(te.invoice_structure_id=E.invoice_structure_id);const ue=await ne.post(`${ie}/fees/payments`,te,{headers:{Authorization:`Bearer ${t}`}});if(ue.data.success){const ge={receipt_number:ue.data.data.receipt_number,student_name:`${i.Name} ${i.Surname}`,student_reg:i.RegNumber,amount:E.amount,currency:f.find(ce=>ce.id===E.currency_id)?.symbol||"",payment_date:E.payment_date,payment_method:p.find(ce=>ce.id===E.payment_method_id)?.name||"Cash",fee_type:"tuition",reference_number:E.reference_number,class_name:N?.class_name||"N/A",term:N?.term||"N/A",academic_year:N?.academic_year||"N/A",notes:E.notes||""};_(ge),k(!1),O(!0),H("Payment processed successfully"),M(!0),A({student_reg_number:"",gradelevel_class_id:"",term:"",academic_year:"",invoice_structure_id:"",amount:"",currency_id:"",payment_method_id:"",payment_date:new Date().toISOString().split("T")[0],reference_number:"",notes:""}),o(null),w(null)}}catch(te){console.error("Error processing payment:",te),te.response&&te.response.data&&te.response.data.message?W(te.response.data.message):W("Failed to process payment"),I(!0),k(!1)}finally{r(!1)}},pe=()=>{k(!1),W("")},se=()=>{if(!L)return;const te=new $t;te.setFont("helvetica"),te.setFontSize(16),te.text("PAYMENT RECEIPT",105,20,{align:"center"}),te.setLineWidth(.5),te.line(20,25,190,25),te.setFontSize(10),te.text("Receipt Number:",20,40),te.text(L.receipt_number,60,40),te.text("Date:",20,50),te.text(L.payment_date,60,50),te.setFontSize(12),te.text("Student Information:",20,70),te.setFontSize(10),te.text("Name:",20,80),te.text(L.student_name,60,80),te.text("Registration:",20,90),te.text(L.student_reg,60,90),te.setFontSize(12),te.text("Payment Details:",20,110),te.setFontSize(10),te.text("Amount:",20,120),te.text(`${L.amount} ${L.currency}`,60,120),te.text("Payment Method:",20,130),te.text(L.payment_method,60,130),te.text("Reference Number:",20,140),te.text(L.reference_number,60,140),te.text("Fee Type:",20,150),te.text(L.fee_type,60,150),L.class_name!=="N/A"?(te.text("Class:",20,160),te.text(L.class_name,60,160),te.text("Term:",20,170),te.text(`${L.term} ${L.academic_year}`,60,170)):(te.text("Payment Type:",20,160),te.text("General Payment (No Invoice)",60,160)),L.notes&&(te.text("Notes:",20,180),te.text(L.notes.substring(0,50),60,180)),te.setLineWidth(.5),te.line(20,190,190,190),te.setFontSize(10),te.text("Thank you for your payment!",105,200,{align:"center"}),te.text(`Generated on: ${new Date().toLocaleString()}`,105,210,{align:"center"}),te.save(`receipt-${L.receipt_number}.pdf`)};return e.jsxs("div",{className:"bg-white border border-gray-200 p-3 md:p-4",children:[e.jsx("h2",{className:"text-sm md:text-base font-medium text-gray-900 mb-3 md:mb-4",children:"Tuition Fee Payments"}),e.jsxs("form",{onSubmit:ee,className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"Student Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Search Student ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(R,{icon:aa,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",value:s,onChange:te=>n(te.target.value),placeholder:"Enter student name or registration number...",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsx("button",{type:"button",onClick:ye,className:"bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 w-full sm:w-auto",children:"Search"})]})]}),d.length>0&&e.jsxs("div",{className:"border border-gray-200 max-h-32 overflow-y-auto",children:[e.jsx("div",{className:"bg-blue-50 p-2 border-b border-gray-200",children:e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"Click on a student below to select:"})}),d.map(te=>e.jsxs("div",{onClick:()=>Y(te),className:"p-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"font-medium text-gray-900 text-xs",children:[te.Name," ",te.Surname]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Reg: ",te.RegNumber," | Class: ",te.Class]})]},te.RegNumber))]}),i&&e.jsxs("div",{className:"bg-green-50 border border-green-200 p-3",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(R,{icon:sn,className:"text-green-600 text-xs mr-2"}),e.jsx("span",{className:"text-xs font-medium text-green-800",children:"Student Selected Successfully"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[i.Name," ",i.Surname]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Registration No:"}),e.jsx("span",{className:"ml-1 font-medium",children:i.RegNumber})]})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:["Invoice Structure ",e.jsx("span",{className:"text-gray-500 font-normal",children:"(Optional - for payments against specific invoices)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:" You can skip this section to record payments for outstanding debts without a specific invoice"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Class (",m.length," loaded)"]}),e.jsxs("select",{value:E.gradelevel_class_id,onChange:te=>A(ue=>({...ue,gradelevel_class_id:te.target.value,term:"",academic_year:"",invoice_structure_id:""})),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Class (Optional)"}),m.map(te=>(console.log(" Class item:",te),e.jsxs("option",{value:te.id,children:[te.name," - ",te.stream_name]},te.id)))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Term"}),e.jsxs("select",{value:E.term,onChange:te=>A(ue=>({...ue,term:te.target.value,academic_year:"",invoice_structure_id:""})),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",disabled:!E.gradelevel_class_id,children:[e.jsx("option",{value:"",children:"Select Term (Optional)"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Academic Year"}),e.jsx("input",{type:"text",value:E.academic_year,onChange:te=>A(ue=>({...ue,academic_year:te.target.value,invoice_structure_id:""})),placeholder:"e.g., 2025 (Optional)",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",disabled:!E.gradelevel_class_id||!E.term})]})]}),v.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"bg-blue-50 p-2 border border-gray-200 mb-2",children:e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"Click on an invoice structure below to select (optional):"})}),e.jsx("div",{className:"space-y-1",children:v.map(te=>e.jsx("div",{onClick:()=>J(te),className:`p-2 border cursor-pointer transition-colors ${N?.id===te.id?"border-gray-500 bg-gray-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 text-xs",children:[te.class_name," - ",te.term," ",te.academic_year]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[te.invoice_items?.length||0," items"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium text-gray-900 text-xs",children:[te.total_amount," ",te.currency_symbol]}),e.jsx("div",{className:"text-xs text-gray-500",children:te.is_active?"Active":"Inactive"})]})]})},te.id))})]}),N&&e.jsxs("div",{className:"mt-3 bg-green-50 border border-green-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:sn,className:"text-green-600 text-xs mr-2"}),e.jsx("span",{className:"text-xs font-medium text-green-800",children:"Invoice Structure Selected"})]}),e.jsx("button",{type:"button",onClick:()=>{w(null),A(te=>({...te,invoice_structure_id:""}))},className:"text-xs text-gray-600 hover:text-gray-800",children:"Clear"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Selected:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[N.class_name," - ",N.term," ",N.academic_year]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[N.total_amount," ",N.currency_symbol]})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("span",{className:"text-xs text-gray-500",children:"Note: Please enter the payment amount manually below"})})]})]}),E.gradelevel_class_id&&E.term&&E.academic_year&&v.length===0&&e.jsx("div",{className:"mt-3 bg-yellow-50 border border-yellow-200 p-3",children:e.jsx("p",{className:"text-xs text-yellow-800",children:" No invoice structures found for this class/term/year. You can still proceed with the payment without selecting an invoice."})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"Payment Details"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:E.amount,onChange:te=>A(ue=>({...ue,amount:te.target.value})),placeholder:"0.00",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Currency ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:E.currency_id,onChange:te=>A(ue=>({...ue,currency_id:te.target.value})),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Currency"}),f.map(te=>e.jsxs("option",{value:te.id,children:[te.name," (",te.symbol,")"]},te.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Payment Method ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:E.payment_method_id,onChange:te=>A(ue=>({...ue,payment_method_id:te.target.value})),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Payment Method"}),p.map(te=>e.jsx("option",{value:te.id,children:te.name},te.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Payment Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:E.payment_date,onChange:te=>A(ue=>({...ue,payment_date:te.target.value})),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Reference Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"text",value:E.reference_number,onChange:te=>A(ue=>({...ue,reference_number:te.target.value})),placeholder:"Enter reference number",className:"flex-1 border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0}),e.jsx("button",{type:"button",onClick:()=>A(te=>({...te,reference_number:U()})),className:"bg-gray-600 text-white px-3 py-1.5 text-xs hover:bg-gray-700 w-full sm:w-auto",children:"Auto"})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:E.notes,onChange:te=>A(ue=>({...ue,notes:te.target.value})),placeholder:"Additional notes...",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",rows:"2"})]})]})]}),e.jsx("div",{className:"flex justify-center sm:justify-end",children:e.jsx("button",{type:"submit",disabled:a,className:"bg-gray-900 text-white px-4 py-2 text-xs hover:bg-gray-800 disabled:opacity-50 w-full sm:w-auto",children:a?"Processing...":"Process Payment"})})]}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-sm md:text-base font-bold text-gray-900",children:"Confirm Payment"}),e.jsx("button",{onClick:pe,className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt,className:"text-xs"})})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Student:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[i?.Name," ",i?.Surname]})]}),N&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Class:"}),e.jsx("span",{className:"font-medium text-gray-900",children:N?.class_name})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Term:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[N?.term," ",N?.academic_year]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Amount:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[E.amount," ",f.find(te=>te.id==E.currency_id)?.symbol]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Reference:"}),e.jsx("span",{className:"font-medium text-gray-900",children:E.reference_number})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[e.jsx("button",{onClick:pe,className:"px-3 py-1.5 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50 w-full sm:w-auto",children:"Cancel"}),e.jsx("button",{onClick:he,disabled:a,className:"px-3 py-1.5 bg-gray-900 text-white rounded text-xs hover:bg-gray-800 disabled:opacity-50 w-full sm:w-auto",children:a?"Processing...":"Confirm Payment"})]})]})}),$&&L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-2xl max-h-[90vh] overflow-y-auto mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Payment Receipt"}),e.jsx("button",{onClick:()=>O(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt,className:"text-xs"})})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Receipt Number"}),e.jsx("p",{className:"text-xs text-gray-900 font-medium",children:L.receipt_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("p",{className:"text-xs text-gray-900 font-medium",children:L.payment_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Student"}),e.jsx("p",{className:"text-xs text-gray-900 font-medium",children:L.student_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Amount"}),e.jsxs("p",{className:"text-xs text-gray-900 font-medium",children:[L.amount," ",L.currency]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reference"}),e.jsx("p",{className:"text-xs text-gray-900 font-medium",children:L.reference_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Payment Method"}),e.jsx("p",{className:"text-xs text-gray-900 font-medium",children:L.payment_method})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx("button",{onClick:se,className:"px-3 py-1.5 bg-gray-900 text-white rounded text-xs hover:bg-gray-800",children:"Download PDF"}),e.jsx("button",{onClick:()=>O(!1),className:"px-3 py-1.5 border border-gray-300 text-gray-700 rounded text-xs hover:bg-gray-50",children:"Close"})]})]})}),e.jsx(cm,{isOpen:z,onClose:()=>M(!1),message:V}),e.jsx(Cc,{isOpen:D,onClose:()=>I(!1),message:B})]})},OG=({onPaymentSuccess:t})=>{const[a,r]=g.useState(""),[s,n]=g.useState(null),[i,o]=g.useState(!1),[d,u]=g.useState(""),[m,x]=g.useState(""),[f,b]=g.useState([]),[p,v]=g.useState([]),[j,N]=g.useState(!1),[w,P]=g.useState(!1),[k,$]=g.useState(!1),[O,L]=g.useState(null),[_,E]=g.useState({fee_type:"boarding",academic_year:new Date().getFullYear().toString(),term:"1",hostel_id:"",amount_paid:"",currency_id:"",payment_method:"Cash",payment_date:new Date().toISOString().split("T")[0],reference_number:"",notes:""}),{token:A}=ut();g.useEffect(()=>{z(),M()},[]);const z=async()=>{try{const ee=await ne.get(`${ie}/accounting/currencies`,{headers:{Authorization:`Bearer ${A}`}});if(ee.data&&Array.isArray(ee.data.data)){b(ee.data.data);const he=ee.data.data.find(pe=>pe.is_base_currency)||ee.data.data[0];he&&E(pe=>({...pe,currency_id:he.id}))}}catch(ee){console.error("Error fetching currencies:",ee)}},M=async()=>{try{const ee=await ne.get(`${ie}/boarding/hostels`,{headers:{Authorization:`Bearer ${A}`}});ee.data&&Array.isArray(ee.data.data)&&v(ee.data.data)}catch(ee){console.error("Error fetching hostels:",ee)}},D=()=>{const ee=Date.now(),he=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`INV-${ee}-${he}`},I=()=>{E(ee=>({...ee,reference_number:D()}))},V=async()=>{if(!a.trim()){u("Please enter a student registration number");return}o(!0),u("");try{const ee=await ne.get(`${ie}/students/search?query=${a}`,{headers:{Authorization:`Bearer ${A}`}});if(ee.data&&ee.data.data&&ee.data.data.length>0){const he=ee.data.data[0];n(he),x("Student found successfully!")}else u("Student not found with this registration number"),n(null)}catch(ee){console.error("Error searching for student:",ee),u("Failed to search for student")}finally{o(!1)}},H=async ee=>{if(ee.preventDefault(),N(!0),!s){u("Please search for a student first");return}if(!_.amount_paid||!_.currency_id||!_.academic_year||!_.term){u("Please fill in all required fields");return}if(!_.hostel_id){u("Please select a hostel for boarding fees");return}if(!_.reference_number.trim()){u("Please enter a reference number");return}P(!0),u("")},B=async()=>{o(!0),u("");try{const ee={student_reg_number:s.RegNumber,academic_year:_.academic_year,term:_.term,hostel_id:_.hostel_id,amount_paid:parseFloat(_.amount_paid),currency_id:_.currency_id,payment_method:_.payment_method,payment_date:_.payment_date,reference_number:_.reference_number,notes:_.notes,fee_type:_.fee_type},he=await ne.post(`${ie}/boarding/payments`,ee,{headers:{Authorization:`Bearer ${A}`}});if(he.data.success){const pe={receipt_number:he.data.data.receipt_number,student_name:`${s.Name} ${s.Surname}`,student_reg:s.RegNumber,amount:_.amount_paid,currency:f.find(se=>se.id===_.currency_id)?.symbol||"",payment_date:_.payment_date,payment_method:_.payment_method,fee_type:_.fee_type,reference_number:_.reference_number,hostel_name:p.find(se=>se.id===_.hostel_id)?.name||""};L(pe),P(!1),$(!0),t(pe)}}catch(ee){console.error("Error processing payment:",ee),ee.response&&ee.response.data&&ee.response.data.message?u(ee.response.data.message):u("Failed to process payment")}finally{o(!1)}},W=()=>{P(!1),u("")},K=()=>{r(""),n(null),N(!1),P(!1),$(!1),L(null),E({fee_type:"boarding",academic_year:new Date().getFullYear().toString(),term:"1",hostel_id:"",amount_paid:"",currency_id:_.currency_id||"",payment_method:"Cash",payment_date:new Date().toISOString().split("T")[0],reference_number:"",notes:""}),u(""),x("")},X=()=>{if(!O)return;const ee=window.open("","_blank");ee.document.write(`
      <html>
        <head>
          <title>Boarding Fees Payment Receipt</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            .receipt { border: 2px solid #000; padding: 20px; max-width: 400px; }
            .header { text-align: center; border-bottom: 1px solid #000; padding-bottom: 10px; margin-bottom: 20px; }
            .row { display: flex; justify-content: space-between; margin: 5px 0; }
            .total { border-top: 1px solid #000; padding-top: 10px; margin-top: 20px; font-weight: bold; }
          </style>
        </head>
        <body>
          <div class="receipt">
            <div class="header">
              <h2>SCHOOL MANAGEMENT SYSTEM</h2>
              <h3>BOARDING FEES PAYMENT RECEIPT</h3>
            </div>
            <div class="row">
              <span>Receipt No:</span>
              <span>${O.receipt_number}</span>
            </div>
            <div class="row">
              <span>Reference No:</span>
              <span>${O.reference_number}</span>
            </div>
            <div class="row">
              <span>Date:</span>
              <span>${O.payment_date}</span>
            </div>
            <div class="row">
              <span>Student:</span>
              <span>${O.student_name}</span>
            </div>
            <div class="row">
              <span>Reg No:</span>
              <span>${O.student_reg}</span>
            </div>
            <div class="row">
              <span>Hostel:</span>
              <span>${O.hostel_name}</span>
            </div>
            <div class="row">
              <span>Payment Method:</span>
              <span>${O.payment_method}</span>
            </div>
            <div class="total">
              <div class="row">
                <span>Amount Paid:</span>
                <span>${O.currency}${O.amount}</span>
              </div>
            </div>
            <div style="text-align: center; margin-top: 30px;">
              <p>Thank you for your payment!</p>
            </div>
          </div>
        </body>
      </html>
    `),ee.document.close(),ee.print()},Q=async()=>{if(O)try{const ee={receipt_number:O.receipt_number,reference_number:O.reference_number,payment_date:O.payment_date,student_name:O.student_name,student_reg:O.student_reg,hostel_name:O.hostel_name,payment_method:O.payment_method,amount:O.amount,currency:O.currency},he=await ne.post(`${ie}/boarding/payments/download-receipt`,ee,{headers:{Authorization:`Bearer ${A}`},responseType:"blob"}),pe=window.URL.createObjectURL(new Blob([he.data])),se=document.createElement("a");se.href=pe,se.setAttribute("download",`receipt-${O.receipt_number}.pdf`),document.body.appendChild(se),se.click(),se.remove(),window.URL.revokeObjectURL(pe)}catch(ee){console.error("Error downloading PDF:",ee);const he=`
SCHOOL MANAGEMENT SYSTEM
BOARDING FEES PAYMENT RECEIPT

Receipt No: ${O.receipt_number}
Reference No: ${O.reference_number}
Date: ${O.payment_date}
Student: ${O.student_name}
Registration No: ${O.student_reg}
Hostel: ${O.hostel_name}
Payment Method: ${O.payment_method}
Amount Paid: ${O.currency}${O.amount}

Thank you for your payment!
      `,pe=new Blob([he],{type:"text/plain"}),se=window.URL.createObjectURL(pe),te=document.createElement("a");te.href=se,te.download=`receipt-${O.receipt_number}.txt`,document.body.appendChild(te),te.click(),window.URL.revokeObjectURL(se),document.body.removeChild(te)}},ye=ee=>["amount_paid","currency_id","academic_year","term","reference_number","hostel_id"].includes(ee),Y=ee=>{if(!j)return!0;const he=_[ee];return ye(ee)?he&&he.toString().trim()!=="":!0},J=()=>{const ee=p.find(he=>he.id===_.hostel_id);return ee?ee.name:""},U=()=>{const ee=f.find(he=>he.id===_.currency_id);return ee?ee.symbol:""};return k&&O?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(R,{icon:Ra,className:"text-4xl text-green-500 mb-2"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Payment Successful!"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Your boarding fees payment has been processed successfully."})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4 text-center",children:"Payment Receipt"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Receipt No:"}),e.jsx("span",{className:"font-bold",children:O.receipt_number})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Reference No:"}),e.jsx("span",{className:"font-bold",children:O.reference_number})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Student Name:"}),e.jsx("span",{className:"font-bold",children:O.student_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Registration No:"}),e.jsx("span",{className:"font-bold",children:O.student_reg})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Hostel:"}),e.jsx("span",{className:"font-bold",children:O.hostel_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Payment Date:"}),e.jsx("span",{className:"font-bold",children:O.payment_date})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Payment Method:"}),e.jsx("span",{className:"font-bold",children:O.payment_method})]}),e.jsxs("div",{className:"flex justify-between border-t pt-3",children:[e.jsx("span",{className:"text-gray-900 font-bold text-lg",children:"Amount Paid:"}),e.jsxs("span",{className:"text-gray-900 font-bold text-lg",children:[O.currency,O.amount]})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:X,className:"flex-1 bg-gray-900 text-white px-4 py-2 text-sm hover:bg-gray-800 flex items-center justify-center",children:[e.jsx(R,{icon:Ln,className:"mr-2"}),"Print Receipt"]}),e.jsxs("button",{onClick:Q,className:"flex-1 bg-blue-600 text-white px-4 py-2 text-sm hover:bg-blue-700 flex items-center justify-center",children:[e.jsx(R,{icon:bn,className:"mr-2"}),"Download PDF"]}),e.jsx("button",{onClick:K,className:"flex-1 bg-gray-200 text-gray-700 px-4 py-2 text-sm hover:bg-gray-300 flex items-center justify-center",children:"New Payment"})]})]}):w?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Confirm Payment"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Student Name:"}),e.jsxs("span",{className:"font-medium",children:[s?.Name," ",s?.Surname]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Registration No:"}),e.jsx("span",{className:"font-medium",children:s?.RegNumber})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Fee Type:"}),e.jsx("span",{className:"font-medium",children:"Boarding Fees"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Hostel:"}),e.jsx("span",{className:"font-medium",children:J()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Academic Year:"}),e.jsx("span",{className:"font-medium",children:_.academic_year})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Term:"}),e.jsxs("span",{className:"font-medium",children:["Term ",_.term]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),e.jsx("span",{className:"font-medium",children:_.payment_method})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Payment Date:"}),e.jsx("span",{className:"font-medium",children:_.payment_date})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Reference Number:"}),e.jsx("span",{className:"font-medium",children:_.reference_number})]}),_.notes&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Notes:"}),e.jsx("span",{className:"font-medium",children:_.notes})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-900 font-medium",children:"Amount to Pay:"}),e.jsxs("span",{className:"text-gray-900 font-bold text-sm",children:[U(),_.amount_paid]})]})]})]}),d&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 text-xs rounded",children:d}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:B,disabled:i,className:"flex-1 bg-green-600 text-white px-4 py-2 text-xs hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:i?"Processing...":e.jsxs(e.Fragment,{children:[e.jsx(R,{icon:Ra,className:"mr-1"}),"Confirm Payment"]})}),e.jsxs("button",{onClick:W,disabled:i,className:"flex-1 bg-gray-500 text-white px-4 py-2 text-xs hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:[e.jsx(R,{icon:Bt,className:"mr-1"}),"Cancel"]})]})]}):e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Boarding Fee Payments"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Student Registration Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:a,onChange:ee=>r(ee.target.value),placeholder:"Enter student registration number",className:`flex-1 border px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500 ${j&&!a.trim()?"border-red-500":"border-gray-300"}`}),e.jsx("button",{onClick:V,disabled:i,className:"bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 disabled:opacity-50",children:i?"Searching...":e.jsxs(e.Fragment,{children:[e.jsx(R,{icon:aa,className:"mr-1"}),"Search"]})})]})]}),s&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg mb-4",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"Student Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[s.Name," ",s.Surname]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Registration No:"}),e.jsx("span",{className:"ml-1 font-medium",children:s.RegNumber})]})]})]}),d&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 text-xs rounded",children:d}),m&&e.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 text-xs rounded",children:m}),e.jsxs("form",{onSubmit:H,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Academic Year ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:_.academic_year,onChange:ee=>E({..._,academic_year:ee.target.value}),placeholder:"e.g., 2025",className:`w-full border px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500 ${Y("academic_year")?"border-gray-300":"border-red-500"}`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Term ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:_.term,onChange:ee=>E({..._,term:ee.target.value}),className:`w-full border px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500 ${Y("term")?"border-gray-300":"border-red-500"}`,children:[e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Hostel ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:_.hostel_id,onChange:ee=>E({..._,hostel_id:ee.target.value}),className:`w-full border px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500 ${Y("hostel_id")?"border-gray-300":"border-red-500"}`,children:[e.jsx("option",{value:"",children:"Select a hostel"}),p.map(ee=>e.jsx("option",{value:ee.id,children:ee.name},ee.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:_.amount_paid,onChange:ee=>E({..._,amount_paid:ee.target.value}),placeholder:"0.00",className:`w-full border px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500 ${Y("amount_paid")?"border-gray-300":"border-red-500"}`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Currency ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:_.currency_id,onChange:ee=>E({..._,currency_id:ee.target.value}),className:`w-full border px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500 ${Y("currency_id")?"border-gray-300":"border-red-500"}`,children:[e.jsx("option",{value:"",children:"Select currency"}),f.map(ee=>e.jsxs("option",{value:ee.id,children:[ee.name," (",ee.symbol,")"]},ee.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Payment Method ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:_.payment_method,onChange:ee=>E({..._,payment_method:ee.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Cheque",children:"Cheque"}),e.jsx("option",{value:"Mobile Money",children:"Mobile Money"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Payment Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:_.payment_date,onChange:ee=>E({..._,payment_date:ee.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Reference Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:_.reference_number,onChange:ee=>E({..._,reference_number:ee.target.value}),placeholder:"Enter reference number or auto-generate",className:`flex-1 border px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500 ${Y("reference_number")?"border-gray-300":"border-red-500"}`}),e.jsx("button",{type:"button",onClick:I,className:"bg-blue-600 text-white px-2 py-1.5 text-xs hover:bg-blue-700",title:"Auto-generate reference number",children:e.jsx(R,{icon:qC})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),e.jsx("textarea",{value:_.notes,onChange:ee=>E({..._,notes:ee.target.value}),rows:"2",placeholder:"Additional notes about this payment",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsx("button",{type:"submit",disabled:i||!s,className:"w-full bg-gray-900 text-white px-4 py-2 text-xs hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Processing...":e.jsxs(e.Fragment,{children:[e.jsx(R,{icon:On,className:"mr-1"}),"Process Payment"]})})]})]})},DG=()=>{const{token:t}=ut(),[a,r]=g.useState(""),[s,n]=g.useState([]),[i,o]=g.useState(null),[d,u]=g.useState([]),[m,x]=g.useState([]),[f,b]=g.useState(!1),[p,v]=g.useState(!1),[j,N]=g.useState(!1),[w,P]=g.useState([]),[k,$]=g.useState({amount:"",payment_method:"Cash",payment_date:new Date().toISOString().split("T")[0],currency_id:"",reference_number:"",notes:""}),O=()=>{const H=new Date,B=H.toISOString().slice(0,10).replace(/-/g,""),W=H.toTimeString().slice(0,8).replace(/:/g,"");return`AF${B}${W}`};g.useEffect(()=>{L(),_()},[]);const L=async()=>{try{const B=await(await fetch(`${ie}/additional-fees/structures`,{headers:{Authorization:`Bearer ${t}`}})).json();B.success&&u(B.data)}catch(H){console.error("Error loading available fees:",H)}},_=async()=>{try{const B=await(await fetch(`${ie}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}})).json();B.success&&x(B.data)}catch(H){console.error("Error loading currencies:",H)}},E=async()=>{if(a.trim())try{b(!0);const B=await(await fetch(`${ie}/students/search?query=${encodeURIComponent(a)}`,{headers:{Authorization:`Bearer ${t}`}})).json();B.success&&n(B.data)}catch(H){console.error("Error searching students:",H)}finally{b(!1)}},A=H=>{o(H),P([]),$({amount:"",payment_method:"Cash",payment_date:new Date().toISOString().split("T")[0],currency_id:"",reference_number:"",notes:""})},z=H=>{P(B=>B.find(K=>K.id===H.id)?B.filter(K=>K.id!==H.id):[...B,H])},M=H=>{if(H.preventDefault(),w.length===0){alert("Please select at least one fee to pay for");return}if(!k.amount||parseFloat(k.amount)<=0){alert("Please enter a valid payment amount");return}if(!k.currency_id){alert("Please select a currency");return}if(!k.reference_number.trim()){alert("Please enter a reference number");return}v(!0)},D=async()=>{if(!(!i||w.length===0))try{b(!0);const H=k.reference_number,B=parseFloat(k.amount)/w.length;let W=!0;const K=[];for(const X of w){console.log(" Processing payment for fee:",X),console.log(" Processing payment for fee:",X.id,"student:",i.RegNumber),console.log(" Payment method being sent:",k.payment_method,"Type:",typeof k.payment_method);const Q=await fetch(`${ie}/additional-fees/payments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({fee_structure_id:X.id,student_reg_number:i.RegNumber,amount:B,payment_method:k.payment_method,currency_id:k.currency_id,exchange_rate:1,receipt_number:k.reference_number,reference_number:k.reference_number,academic_year:new Date().getFullYear().toString()})});if(Q.ok){const ye=await Q.json();console.log(" Payment response:",ye)}else{console.error(` Failed to process payment for fee ${X.id}`,Q.status);const ye=await Q.json();console.error(" Payment error:",ye),W=!1,K.push(`Fee ${X.fee_name}: ${ye.message||"Payment failed"}`)}}if(!W){alert(`Payment failed for some fees:
${K.join(`
`)}`);return}N(!0),v(!1),P([]),o(null),$({amount:"",payment_method:"Cash",payment_date:new Date().toISOString().split("T")[0],currency_id:"",reference_number:"",notes:""}),r(""),n([]),alert("Payment processed successfully!")}catch(H){console.error("Error processing payment:",H),alert("Error processing payment")}finally{b(!1)}},I=()=>{v(!1)},V=H=>H==="annual"?ko:Tn;return e.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[e.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Additional Fees Payment"}),e.jsxs("form",{onSubmit:M,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"Student Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Search Student ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(R,{icon:aa,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",value:a,onChange:H=>r(H.target.value),placeholder:"Enter student name or registration number...",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsx("button",{type:"button",onClick:E,className:"bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800",children:"Search"})]})]}),s.length>0&&e.jsxs("div",{className:"border border-gray-200 max-h-32 overflow-y-auto",children:[e.jsx("div",{className:"bg-blue-50 p-2 border-b border-gray-200",children:e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"Click on a student below to select:"})}),s.map(H=>e.jsxs("div",{onClick:()=>A(H),className:"p-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"font-medium text-gray-900 text-xs",children:[H.Name||H.FirstName," ",H.Surname||H.LastName]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Reg: ",H.RegNumber," | Class: ",H.Class||"N/A"]})]},H.RegNumber))]}),i&&e.jsxs("div",{className:"bg-green-50 border border-green-200 p-3",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(R,{icon:sn,className:"text-green-600 text-xs mr-2"}),e.jsx("span",{className:"text-xs font-medium text-green-800",children:"Student Selected Successfully"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[i.Name||i.FirstName," ",i.Surname||i.LastName]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Registration No:"}),e.jsx("span",{className:"ml-1 font-medium",children:i.RegNumber})]})]})]})]})]}),i&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"Select Fees to Pay For"}),e.jsxs("div",{className:"border border-gray-200 max-h-40 overflow-y-auto",children:[e.jsx("div",{className:"bg-blue-50 p-2 border-b border-gray-200",children:e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"Click on fees below to select:"})}),d.map(H=>{const B=w.find(W=>W.id===H.id);return e.jsx("div",{onClick:()=>z(H),className:`p-2 cursor-pointer transition-colors border-b border-gray-100 last:border-b-0 ${B?"border-gray-500 bg-gray-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:V(H.fee_type),className:"text-gray-400 text-xs"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 text-xs",children:H.fee_name}),e.jsx("div",{className:"text-xs text-gray-500",children:H.description}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Type: ",H.fee_type," | Amount: $",(parseFloat(H.amount)||0).toFixed(2)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium text-gray-900 text-xs",children:["$",(parseFloat(H.amount)||0).toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500",children:H.fee_type}),B&&e.jsx(R,{icon:sn,className:"text-green-600 text-xs mt-1"})]})]})},H.id)})]}),w.length>0&&e.jsxs("div",{className:"mt-3 bg-green-50 border border-green-200 p-3",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(R,{icon:sn,className:"text-green-600 text-xs mr-2"}),e.jsx("span",{className:"text-xs font-medium text-green-800",children:"Fees Selected Successfully"})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:w.length})," fee(s) selected"]})]})]}),i&&w.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"Payment Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:k.amount,onChange:H=>$(B=>({...B,amount:H.target.value})),placeholder:"0.00",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Currency ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:k.currency_id,onChange:H=>$(B=>({...B,currency_id:H.target.value})),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Currency"}),m.map(H=>e.jsxs("option",{value:H.id,children:[H.symbol," - ",H.name]},H.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Payment Method ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:k.payment_method,onChange:H=>$(B=>({...B,payment_method:H.target.value})),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Mobile Money",children:"Mobile Money"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Payment Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:k.payment_date,onChange:H=>$(B=>({...B,payment_date:H.target.value})),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Reference Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:k.reference_number,onChange:H=>$(B=>({...B,reference_number:H.target.value})),placeholder:"Enter reference number...",className:"flex-1 border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0}),e.jsx("button",{type:"button",onClick:()=>$(H=>({...H,reference_number:O()})),className:"px-2 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 border border-gray-300",title:"Generate reference number",children:"Auto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("input",{type:"text",value:k.notes,onChange:H=>$(B=>({...B,notes:H.target.value})),placeholder:"Optional notes...",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]})]}),i&&w.length>0&&e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{o(null),P([]),$({amount:"",payment_method:"Cash",payment_date:new Date().toISOString().split("T")[0],currency_id:"",reference_number:"",notes:""}),r(""),n([])},className:"px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:!k.amount||parseFloat(k.amount)<=0||!k.currency_id||!k.reference_number.trim(),className:"px-3 py-1.5 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50",children:"Process Payment"})]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white border border-gray-200 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Confirm Payment"}),e.jsx("button",{onClick:I,className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-3",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["Student: ",i?.Name||i?.FirstName," ",i?.Surname||i?.LastName]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Amount: ",m.find(H=>H.id===k.currency_id)?.symbol||"$",(parseFloat(k.amount)||0).toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Method: ",k.payment_method]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Currency: ",m.find(H=>H.id===k.currency_id)?.name||"N/A"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Reference: ",k.reference_number]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Selected Fees: ",w.length]})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("p",{children:"This will:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 mt-2",children:[e.jsx("li",{children:"Create fee assignments for the selected fees"}),e.jsx("li",{children:"Split the payment amount equally among selected fees"}),e.jsx("li",{children:"Update student balance and create transaction records"})]})]})]}),e.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end space-x-2",children:[e.jsx("button",{onClick:I,className:"px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{onClick:D,disabled:f,className:"px-3 py-1.5 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50",children:f?"Processing...":"Confirm Payment"})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-6 max-w-md w-full mx-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"All payments have been processed successfully. The student's balance has been updated and transactions have been recorded."}),e.jsx("button",{onClick:()=>N(!1),className:"w-full bg-green-600 text-white px-4 py-2 text-sm font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Close"})]})})})]})},LG=()=>{const[t,a]=g.useState("tuition");ga();const r=[{id:"tuition",name:"Tuition Fee Payments",icon:Nf},{id:"boarding",name:"Boarding Fee Payments",icon:dg},{id:"other",name:"Other Payments",icon:JI}],s=i=>{console.log("Payment successful:",i)},n=()=>{switch(t){case"tuition":return e.jsx(c_,{});case"boarding":return e.jsx(OG,{onPaymentSuccess:s});case"other":return e.jsx(DG,{});default:return e.jsx(c_,{})}};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-2 md:py-6",children:e.jsxs("div",{className:"w-full px-2 md:px-4 lg:px-8",children:[e.jsx("div",{className:"mb-4 md:mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg md:text-xl font-bold text-gray-900",children:"Fees Payment"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Process student fee payments"})]})}),e.jsx("div",{className:"mb-4 md:mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex flex-wrap space-x-2 md:space-x-8 overflow-x-auto",children:r.map(i=>e.jsxs("button",{onClick:()=>a(i.id),className:`py-2 px-1 border-b-2 font-medium text-xs flex items-center space-x-1 whitespace-nowrap ${t===i.id?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:i.icon,className:"text-xs"}),e.jsx("span",{className:"hidden sm:inline",children:i.name}),e.jsx("span",{className:"sm:hidden",children:i.name.split(" ")[0]})]},i.id))})})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:gap-6",children:e.jsx("div",{children:n()})})]})})},MG=({payment:t,currencies:a,onUpdate:r,onClose:s})=>{const[n,i]=g.useState({amount_paid:"",currency_id:"",payment_method:"",payment_date:"",reference_number:"",notes:""}),[o,d]=g.useState(!1);g.useEffect(()=>{t&&(console.log("Payment data in edit modal:",t),console.log("Currencies in edit modal:",a),console.log("Payment currency_id:",t.currency_id,"Type:",typeof t.currency_id),i({amount_paid:t.amount_paid||"",currency_id:t.currency_id?t.currency_id.toString():"",payment_method:t.payment_method||"",payment_date:t.payment_date?t.payment_date.split("T")[0]:"",reference_number:t.reference_number||"",notes:t.notes||""}),console.log("Form data set:",{amount_paid:t.amount_paid||"",currency_id:t.currency_id?t.currency_id.toString():"",payment_method:t.payment_method||"",payment_date:t.payment_date?t.payment_date.split("T")[0]:"",reference_number:t.reference_number||"",notes:t.notes||""}))},[t,a]);const u=async x=>{x.preventDefault(),d(!0);try{await r(n)}catch(f){console.error("Error updating payment:",f)}finally{d(!1)}},m=(x,f)=>{i(b=>({...b,[x]:f}))};return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-10 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Payment"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt})})]}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 p-3 rounded",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[t?.student_name," ",t?.student_surname]}),e.jsx("div",{className:"text-gray-600",children:t?.student_reg_number}),e.jsx("div",{className:"text-gray-600",children:t?.hostel_name})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:n.amount_paid,onChange:x=>m("amount_paid",x.target.value),className:"w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Currency ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:n.currency_id,onChange:x=>m("currency_id",x.target.value),className:"w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"",children:"Select currency"}),a&&a.length>0?a.map(x=>e.jsxs("option",{value:x.id.toString(),children:[x.name," (",x.symbol,")"]},x.id)):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"1",children:"US Dollar ($)"}),e.jsx("option",{value:"2",children:"Zimbabwe Dollar (ZWL)"})]})]}),a&&a.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Using default currencies"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Payment Method ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:n.payment_method,onChange:x=>m("payment_method",x.target.value),className:"w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"",children:"Select payment method"}),e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Cheque",children:"Cheque"}),e.jsx("option",{value:"Mobile Money",children:"Mobile Money"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Payment Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:n.payment_date,onChange:x=>m("payment_date",x.target.value),className:"w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Reference Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n.reference_number,onChange:x=>m("reference_number",x.target.value),className:"w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:n.notes,onChange:x=>m("notes",x.target.value),rows:"3",className:"w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 text-xs hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:o,className:"flex-1 bg-gray-900 text-white px-4 py-2 text-xs hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:o?"Updating...":e.jsxs(e.Fragment,{children:[e.jsx(R,{icon:Er,className:"mr-1"}),"Update Payment"]})})]})]})]})})})},RG=({isOpen:t,message:a,onClose:r})=>t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:e.jsx(R,{icon:Ra,className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Success!"}),e.jsx("div",{className:"mt-2 px-7 py-3",children:e.jsx("p",{className:"text-sm text-gray-500",children:a})}),e.jsx("div",{className:"items-center px-4 py-3",children:e.jsx("button",{onClick:r,className:"px-4 py-2 bg-green-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-300",children:"OK"})})]})})}):null,$G=({isOpen:t,message:a,onClose:r})=>t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx(R,{icon:la,className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error"}),e.jsx("div",{className:"mt-2 px-7 py-3",children:e.jsx("p",{className:"text-sm text-gray-500",children:a})}),e.jsx("div",{className:"items-center px-4 py-3",children:e.jsx("button",{onClick:r,className:"px-4 py-2 bg-red-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-300",children:"OK"})})]})})}):null,FG=()=>{const[t,a]=g.useState([]),[r,s]=g.useState(!0),[n,i]=g.useState(""),[o,d]=g.useState({current_page:1,total_pages:1,total_items:0,items_per_page:10,has_next:!1,has_prev:!1}),[u,m]=g.useState({search:"",academic_year:"",term:"",hostel_id:""}),[x,f]=g.useState([]),[b,p]=g.useState(!1),[v,j]=g.useState(!1),[N,w]=g.useState(!1),[P,k]=g.useState(null),[$,O]=g.useState([]),[L,_]=g.useState(!1),[E,A]=g.useState(!1),[z,M]=g.useState(""),[D,I]=g.useState(""),{token:V}=ut();g.useEffect(()=>{H(),B(),W()},[o.current_page,u]);const H=async()=>{try{const ge=await ne.get(`${ie}/boarding/hostels`,{headers:{Authorization:`Bearer ${V}`}});ge.data&&Array.isArray(ge.data.data)&&f(ge.data.data)}catch(ge){console.error("Error fetching hostels:",ge)}},B=async()=>{try{const ge=await ne.get(`${ie}/accounting/currencies`,{headers:{Authorization:`Bearer ${V}`}});console.log("Currencies response:",ge.data),ge.data&&Array.isArray(ge.data.data)&&(O(ge.data.data),console.log("Currencies set:",ge.data.data))}catch(ge){console.error("Error fetching currencies:",ge),O([{id:1,name:"US Dollar",symbol:"$"},{id:2,name:"Zimbabwe Dollar",symbol:"ZWL"}])}},W=async()=>{s(!0),i("");try{const ge=new URLSearchParams({page:o.current_page,limit:o.items_per_page,...u});console.log("Frontend params being sent:",{page:o.current_page,limit:o.items_per_page,filters:u,fullParams:ge.toString()});const ce=await ne.get(`${ie}/boarding/payments?${ge}`,{headers:{Authorization:`Bearer ${V}`}});ce.data.success&&(a(ce.data.data),d(ce.data.pagination))}catch(ge){console.error("Error fetching payments:",ge),i("Failed to fetch payments")}finally{s(!1)}},K=(ge,ce)=>{m(De=>({...De,[ge]:ce})),d(De=>({...De,current_page:1}))},X=ge=>{d(ce=>({...ce,current_page:ge}))},Q=()=>{d(ge=>({...ge,current_page:1}))},ye=()=>{m({search:"",academic_year:"",term:"",hostel_id:""}),d(ge=>({...ge,current_page:1}))},Y=ge=>new Date(ge).toLocaleDateString("en-GB"),J=(ge,ce)=>`${ce}${parseFloat(ge).toFixed(2)}`,U=ge=>`${ge.student_name||""} ${ge.student_surname||""}`.trim()||"N/A",ee=async ge=>{try{s(!0);const ce=await ne.get(`${ie}/boarding/payments/${ge.id}`,{headers:{Authorization:`Bearer ${V}`}});ce.data&&ce.data.success&&ce.data.data?(k(ce.data.data),j(!0)):(I("Invalid response from server"),A(!0))}catch(ce){console.error("Error fetching payment details:",ce);const De=ce.response?.data?.message||ce.response?.data?.error||ce.message||"Failed to fetch payment details";I(De),A(!0)}finally{s(!1)}},he=async ge=>{try{s(!0);const ce=await ne.get(`${ie}/boarding/payments/${ge.id}`,{headers:{Authorization:`Bearer ${V}`}});ce.data&&ce.data.success&&ce.data.data?(console.log("Payment details for edit:",ce.data.data),console.log("Available currencies:",$),k(ce.data.data),w(!0)):(I("Invalid response from server"),A(!0))}catch(ce){console.error("Error fetching payment details:",ce);const De=ce.response?.data?.message||ce.response?.data?.error||ce.message||"Failed to fetch payment details";I(De),A(!0)}finally{s(!1)}},pe=async ge=>{if(window.confirm("Are you sure you want to delete this payment? This will also delete all related accounting entries."))try{const ce=await ne.delete(`${ie}/boarding/payments/${ge.id}`,{headers:{Authorization:`Bearer ${V}`}});ce.data.success&&(M(ce.data.message||"Payment and related accounting entries deleted successfully!"),_(!0),W())}catch(ce){console.error("Error deleting payment:",ce);const De=ce.response?.data?.message||"Failed to delete payment";I(De),A(!0)}},se=async ge=>{try{const ce={receipt_number:ge.receipt_number,reference_number:ge.reference_number,payment_date:ge.payment_date,student_name:U(ge),student_reg:ge.student_reg_number,hostel_name:ge.hostel_name,payment_method:ge.payment_method,amount:ge.amount_paid,currency:ge.currency_symbol},De=`
SCHOOL MANAGEMENT SYSTEM
BOARDING FEES PAYMENT RECEIPT

Receipt No: ${ce.receipt_number}
Reference No: ${ce.reference_number}
Date: ${ce.payment_date}
Student: ${ce.student_name}
Registration No: ${ce.student_reg}
Hostel: ${ce.hostel_name}
Payment Method: ${ce.payment_method}
Amount Paid: ${ce.currency}${ce.amount}

Thank you for your payment!
      `,ke=new Blob([De],{type:"text/plain"}),re=window.URL.createObjectURL(ke),Ee=document.createElement("a");Ee.href=re,Ee.download=`receipt-${ce.receipt_number}.txt`,document.body.appendChild(Ee),Ee.click(),window.URL.revokeObjectURL(re),document.body.removeChild(Ee)}catch(ce){console.error("Error downloading receipt:",ce),I("Failed to download receipt"),A(!0)}},te=async ge=>{try{const ce=await ne.put(`${ie}/boarding/payments/${P.id}`,ge,{headers:{Authorization:`Bearer ${V}`}});ce.data.success&&(M(ce.data.message||"Payment and related accounting entries updated successfully!"),_(!0),w(!1),k(null),W())}catch(ce){console.error("Error updating payment:",ce);const De=ce.response?.data?.message||"Failed to update payment";I(De),A(!0)}},ue=ge=>{const ce={receipt_number:ge.receipt_number,reference_number:ge.reference_number,payment_date:ge.payment_date,student_name:U(ge),student_reg:ge.student_reg_number,hostel_name:ge.hostel_name,payment_method:ge.payment_method,amount:ge.amount_paid,currency:ge.currency_symbol},De=window.open("","_blank");De.document.write(`
      <html>
        <head>
          <title>Boarding Fees Payment Receipt</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            .receipt { border: 2px solid #000; padding: 20px; max-width: 400px; }
            .header { text-align: center; border-bottom: 1px solid #000; padding-bottom: 10px; margin-bottom: 20px; }
            .row { display: flex; justify-content: space-between; margin: 5px 0; }
            .total { border-top: 1px solid #000; padding-top: 10px; margin-top: 20px; font-weight: bold; }
          </style>
        </head>
        <body>
          <div class="receipt">
            <div class="header">
              <h2>SCHOOL MANAGEMENT SYSTEM</h2>
              <h3>BOARDING FEES PAYMENT RECEIPT</h3>
            </div>
            <div class="row">
              <span>Receipt No:</span>
              <span>${ce.receipt_number}</span>
            </div>
            <div class="row">
              <span>Reference No:</span>
              <span>${ce.reference_number}</span>
            </div>
            <div class="row">
              <span>Date:</span>
              <span>${ce.payment_date}</span>
            </div>
            <div class="row">
              <span>Student:</span>
              <span>${ce.student_name}</span>
            </div>
            <div class="row">
              <span>Reg No:</span>
              <span>${ce.student_reg}</span>
            </div>
            <div class="row">
              <span>Hostel:</span>
              <span>${ce.hostel_name}</span>
            </div>
            <div class="row">
              <span>Payment Method:</span>
              <span>${ce.payment_method}</span>
            </div>
            <div class="total">
              <div class="row">
                <span>Amount Paid:</span>
                <span>${ce.currency}${ce.amount}</span>
              </div>
            </div>
            <div style="text-align: center; margin-top: 30px;">
              <p>Thank you for your payment!</p>
            </div>
          </div>
        </body>
      </html>
    `),De.document.close(),De.print()};return e.jsxs("div",{className:"min-h-screen bg-gray-50 py-6",children:[e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"All Boarding Fees Payments"}),e.jsx("p",{className:"text-xs text-gray-600",children:"View and manage all boarding fees payments"})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by student name or registration number...",value:u.search,onChange:ge=>K("search",ge.target.value),className:"w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"}),e.jsx("button",{onClick:Q,className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:aa})})]})}),e.jsxs("button",{onClick:()=>p(!b),className:"bg-gray-900 text-white px-4 py-2 text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(R,{icon:$r,className:"mr-1"}),"Filters"]})]}),b&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Academic Year"}),e.jsx("input",{type:"text",placeholder:"e.g., 2025",value:u.academic_year,onChange:ge=>K("academic_year",ge.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Term"}),e.jsxs("select",{value:u.term,onChange:ge=>K("term",ge.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Terms"}),e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Hostel"}),e.jsxs("select",{value:u.hostel_id,onChange:ge=>K("hostel_id",ge.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Hostels"}),x.map(ge=>e.jsx("option",{value:ge.id,children:ge.name},ge.id))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:ye,className:"w-full bg-gray-200 text-gray-700 px-4 py-1.5 text-xs hover:bg-gray-300",children:"Clear Filters"})})]})})]}),n&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 text-xs rounded",children:n}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:r?e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Loading payments..."})}):t.length===0?e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-sm text-gray-600",children:"No payments found"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receipt No"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hostel"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academic Year"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Term"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Method"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(ge=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:U(ge)}),e.jsx("div",{className:"text-gray-500",children:ge.student_reg_number})]})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:ge.receipt_number}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:ge.hostel_name||"N/A"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:ge.academic_year}),e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:["Term ",ge.term]}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:J(ge.amount_paid,ge.currency_symbol)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:ge.payment_method}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:Y(ge.payment_date)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>ee(ge),className:"text-blue-600 hover:text-blue-900",title:"View Details",children:e.jsx(R,{icon:Ma})}),e.jsx("button",{onClick:()=>ue(ge),className:"text-gray-600 hover:text-gray-900",title:"Print Receipt",children:e.jsx(R,{icon:Ln})}),e.jsx("button",{onClick:()=>se(ge),className:"text-green-600 hover:text-green-900",title:"Download Receipt",children:e.jsx(R,{icon:bn})}),e.jsx("button",{onClick:()=>he(ge),className:"text-yellow-600 hover:text-yellow-900",title:"Edit Payment",children:e.jsx(R,{icon:ha})}),e.jsx("button",{onClick:()=>pe(ge),className:"text-red-600 hover:text-red-900",title:"Delete Payment",children:e.jsx(R,{icon:Yt})})]})})]},ge.id))})]})}),o.total_pages>1&&e.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>X(o.current_page-1),disabled:!o.has_prev,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>X(o.current_page+1),disabled:!o.has_next,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-xs text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(o.current_page-1)*o.items_per_page+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(o.current_page*o.items_per_page,o.total_items)})," ","of"," ",e.jsx("span",{className:"font-medium",children:o.total_items})," ","results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>X(o.current_page-1),disabled:!o.has_prev,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-xs font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:Math.min(5,o.total_pages)},(ge,ce)=>{const De=ce+1;return e.jsx("button",{onClick:()=>X(De),className:`relative inline-flex items-center px-3 py-2 border text-xs font-medium ${De===o.current_page?"z-10 bg-gray-900 border-gray-900 text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:De},De)}),e.jsx("button",{onClick:()=>X(o.current_page+1),disabled:!o.has_next,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-xs font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]})})]})})]}),v&&P&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Payment Details"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Receipt No:"}),e.jsx("span",{children:P.receipt_number})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Reference No:"}),e.jsx("span",{children:P.reference_number})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Student:"}),e.jsx("span",{children:U(P)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Registration No:"}),e.jsx("span",{children:P.student_reg_number})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Hostel:"}),e.jsx("span",{children:P.hostel_name||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Academic Year:"}),e.jsx("span",{children:P.academic_year})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Term:"}),e.jsxs("span",{children:["Term ",P.term]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Amount:"}),e.jsx("span",{children:J(P.amount_paid,P.currency_symbol)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Payment Method:"}),e.jsx("span",{children:P.payment_method})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Payment Date:"}),e.jsx("span",{children:Y(P.payment_date)})]}),P.notes&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Notes:"}),e.jsx("span",{children:P.notes})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>{j(!1),k(null)},className:"bg-gray-500 text-white px-4 py-2 text-xs hover:bg-gray-600",children:"Close"})})]})})}),N&&P&&e.jsx(MG,{payment:P,currencies:$,onUpdate:te,onClose:()=>{w(!1),k(null)}}),e.jsx(RG,{isOpen:L,message:z,onClose:()=>{_(!1),M("")}}),e.jsx($G,{isOpen:E,message:D,onClose:()=>{A(!1),I("")}})]})},IG=()=>{const{token:t}=ut(),[a,r]=g.useState([]),[s,n]=g.useState([]),[i,o]=g.useState([]),[d,u]=g.useState(!1),[m,x]=g.useState(null),[f,b]=g.useState(""),[p,v]=g.useState(""),[j,N]=g.useState(""),[w,P]=g.useState(""),[k,$]=g.useState(!1),[O,L]=g.useState(!1),[_,E]=g.useState(!1),[A,z]=g.useState(!1),[M,D]=g.useState(!1),[I,V]=g.useState(null),[H,B]=g.useState({gradelevel_class_id:"",term:"",academic_year:"",currency_id:"",invoice_items:[{item_name:"",amount:""}]}),[W,K]=g.useState(!1),[X,Q]=g.useState(!1),[ye,Y]=g.useState(""),[J,U]=g.useState("");g.useEffect(()=>{he(),pe()},[]),g.useEffect(()=>{k&&ee()},[k,p]);const ee=async()=>{u(!0);try{const ve=await ne.get(`${ie}/fees/invoice-structures?${p?`search=${p}`:""}`,{headers:{Authorization:`Bearer ${t}`}});r(ve.data.data||[])}catch(ve){console.error("Error fetching invoice structures:",ve),x("Failed to fetch invoice structures")}finally{u(!1)}},he=async()=>{try{const ve=await ne.get(`${ie}/classes/gradelevel-classes`,{headers:{Authorization:`Bearer ${t}`}});n(ve.data.data||[])}catch(ve){console.error("Error fetching classes:",ve)}},pe=async()=>{try{const ve=await ne.get(`${ie}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}});o(ve.data.data||[])}catch(ve){console.error("Error fetching currencies:",ve)}},se=()=>{v(""),$(!0)},te=()=>{B(ve=>({...ve,invoice_items:[...ve.invoice_items,{item_name:"",amount:""}]}))},ue=ve=>{B(Me=>({...Me,invoice_items:Me.invoice_items.filter((et,Ie)=>Ie!==ve)}))},ge=(ve,Me,et)=>{B(Ie=>({...Ie,invoice_items:Ie.invoice_items.map((tt,Re)=>Re===ve?{...tt,[Me]:et}:tt)}))},ce=()=>H.invoice_items.reduce((ve,Me)=>ve+(parseFloat(Me.amount)||0),0),De=async ve=>{ve.preventDefault();const Me=H.invoice_items.filter(Ie=>Ie.item_name&&Ie.amount),et={...H,total_amount:ce(),invoice_items:Me};try{I?(await ne.put(`${ie}/fees/invoice-structures/${I.id}`,et,{headers:{Authorization:`Bearer ${t}`}}),Y("Invoice structure updated successfully")):(await ne.post(`${ie}/fees/invoice-structures`,et,{headers:{Authorization:`Bearer ${t}`}}),Y("Invoice structure created successfully")),K(!0),L(!1),z(!1),Se(),ee()}catch(Ie){console.error("Error saving invoice structure:",Ie),U(Ie.response?.data?.message||"Failed to save invoice structure"),Q(!0)}},ke=ve=>{V(ve),E(!0)},re=ve=>{V(ve),B({gradelevel_class_id:ve.gradelevel_class_id,term:ve.term,academic_year:ve.academic_year,currency_id:ve.currency_id,invoice_items:ve.invoice_items?.length>0?ve.invoice_items:[{item_name:"",amount:""}]}),z(!0)},Ee=async()=>{try{await ne.delete(`${ie}/fees/invoice-structures/${I.id}`,{headers:{Authorization:`Bearer ${t}`}}),Y("Invoice structure deleted successfully"),K(!0),D(!1),ee()}catch(ve){console.error("Error deleting invoice structure:",ve),U(ve.response?.data?.message||"Failed to delete invoice structure"),Q(!0)}},Se=()=>{B({gradelevel_class_id:"",term:"",academic_year:"",currency_id:"",invoice_items:[{item_name:"",amount:""}]}),V(null)},Ge=a.filter(ve=>{const Me=p.toLowerCase(),et=!p||ve.class_name?.toLowerCase().includes(Me)||ve.term?.toLowerCase().includes(Me)||ve.academic_year?.toLowerCase().includes(Me),Ie=!j||ve.academic_year===j,tt=!w||ve.term===w;return et&&Ie&&tt});return e.jsxs("div",{className:"p-2 md:p-6",children:[e.jsx("div",{className:"mb-4 md:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg md:text-xl font-bold text-gray-900",children:"Invoice Structures"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:"Manage tuition fee structures with itemized breakdowns"})]}),e.jsx("button",{onClick:()=>{Se(),L(!0)},className:"inline-flex items-center px-3 py-2 border border-gray-300 text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 w-full sm:w-auto justify-center",children:"Add Invoice Structure"})]})}),e.jsx("div",{className:"mb-4 md:mb-6 space-y-3 md:space-y-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Enter Year (e.g., 2025)",value:j,onChange:ve=>N(ve.target.value),className:"w-full px-3 py-2 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("select",{value:w,onChange:ve=>P(ve.target.value),className:"w-full px-3 py-2 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})}),e.jsx("button",{onClick:se,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 w-full sm:w-auto justify-center",children:"Filter"})]})}),e.jsx("div",{className:"bg-white border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),e.jsx("th",{className:"px-2 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Term"}),e.jsx("th",{className:"px-2 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Year"}),e.jsx("th",{className:"px-2 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),e.jsx("th",{className:"px-2 md:px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-2 md:px-6 py-4 text-center text-gray-500",children:"Loading..."})}):Ge.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-2 md:px-6 py-4 text-center text-gray-500",children:"No invoice structures found"})}):Ge.map(ve=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-2 md:px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:ve.class_name}),e.jsxs("div",{className:"text-xs text-gray-500 sm:hidden",children:[ve.term,"  ",ve.academic_year]})]}),e.jsx("td",{className:"px-2 md:px-6 py-4 whitespace-nowrap hidden sm:table-cell",children:e.jsx("div",{className:"text-xs font-medium text-gray-900",children:ve.term})}),e.jsx("td",{className:"px-2 md:px-6 py-4 whitespace-nowrap hidden md:table-cell",children:e.jsx("div",{className:"text-xs font-medium text-gray-900",children:ve.academic_year})}),e.jsx("td",{className:"px-2 md:px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-xs font-medium text-gray-900",children:[ve.total_amount," ",ve.currency_symbol]})}),e.jsx("td",{className:"px-2 md:px-6 py-4 whitespace-nowrap text-xs font-medium text-center",children:e.jsxs("div",{className:"flex justify-center space-x-1",children:[e.jsx("button",{onClick:()=>ke(ve),className:"text-blue-600 hover:text-blue-900 p-1",title:"View",children:e.jsx(R,{icon:Ma})}),e.jsx("button",{onClick:()=>re(ve),className:"text-indigo-600 hover:text-indigo-900 p-1",title:"Edit",children:e.jsx(R,{icon:ha})}),e.jsx("button",{onClick:()=>{V(ve),D(!0)},className:"text-red-600 hover:text-red-900 p-1",title:"Delete",children:e.jsx(R,{icon:Yt})})]})})]},ve.id))})]})})}),(O||A)&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white border border-gray-200 p-3 md:p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-sm md:text-base font-bold mb-3 md:mb-4",children:I?"Edit Invoice Structure":"Add Invoice Structure"}),e.jsxs("form",{onSubmit:De,className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Class *"}),e.jsxs("select",{value:H.gradelevel_class_id,onChange:ve=>B(Me=>({...Me,gradelevel_class_id:ve.target.value})),className:"w-full border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Class"}),s.map(ve=>e.jsx("option",{value:ve.id,children:ve.name},ve.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Term *"}),e.jsxs("select",{value:H.term,onChange:ve=>B(Me=>({...Me,term:ve.target.value})),className:"w-full border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Academic Year *"}),e.jsx("input",{type:"text",value:H.academic_year,onChange:ve=>B(Me=>({...Me,academic_year:ve.target.value})),placeholder:"e.g., 2025",className:"w-full border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Currency *"}),e.jsxs("select",{value:H.currency_id,onChange:ve=>B(Me=>({...Me,currency_id:ve.target.value})),className:"w-full border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Currency"}),i.map(ve=>e.jsxs("option",{value:ve.id,children:[ve.name," (",ve.symbol,")"]},ve.id))]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Invoice Items *"}),e.jsx("button",{type:"button",onClick:te,className:"text-blue-600 hover:text-blue-800 text-xs",children:"+ Add Item"})]}),e.jsx("div",{className:"space-y-2",children:H.invoice_items.map((ve,Me)=>e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-start",children:[e.jsx("input",{type:"text",value:ve.item_name,onChange:et=>ge(Me,"item_name",et.target.value),placeholder:"Item name (e.g., Levy)",className:"flex-1 border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 text-sm",required:!0}),e.jsx("input",{type:"number",step:"0.01",value:ve.amount,onChange:et=>ge(Me,"amount",et.target.value),placeholder:"Amount",className:"w-full sm:w-32 border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500 text-sm",required:!0}),H.invoice_items.length>1&&e.jsx("button",{type:"button",onClick:()=>ue(Me),className:"text-red-600 hover:text-red-800 px-2 py-2 w-full sm:w-auto",children:""})]},Me))}),e.jsx("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Total Amount"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:ce().toFixed(2)})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{L(!1),z(!1),Se()},className:"inline-flex items-center px-3 py-2 border border-gray-300 text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 w-full sm:w-auto justify-center",children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-3 py-2 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 w-full sm:w-auto justify-center",children:I?"Update":"Create"})]})]})]})}),_&&I&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white border border-gray-200 p-3 md:p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-sm md:text-base font-bold mb-3 md:mb-4",children:"Invoice Structure Details"}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Class"}),e.jsx("p",{className:"text-xs text-gray-900",children:I.class_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Term"}),e.jsx("p",{className:"text-xs text-gray-900",children:I.term})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Academic Year"}),e.jsx("p",{className:"text-xs text-gray-900",children:I.academic_year})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Total Amount"}),e.jsxs("p",{className:"text-xs text-gray-900",children:[I.total_amount," ",I.currency_symbol]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold ${I.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.is_active?"Active":"Inactive"})]})]}),I.invoice_items&&I.invoice_items.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Invoice Items"}),e.jsx("div",{className:"border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I.invoice_items.map((ve,Me)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:ve.item_name}),e.jsxs("td",{className:"px-4 py-2 text-xs text-gray-900",children:[ve.amount," ",I.currency_symbol]})]},Me))})]})})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:()=>E(!1),className:"inline-flex items-center px-3 py-2 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 w-full sm:w-auto justify-center",children:"Close"})})]})}),M&&I&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white border border-gray-200 p-3 md:p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-sm md:text-base font-bold mb-3 md:mb-4",children:"Delete Invoice Structure"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Are you sure you want to delete the invoice structure for ",I.class_name," - ",I.term," ",I.academic_year,"?"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-3",children:[e.jsx("button",{onClick:()=>D(!1),className:"inline-flex items-center px-3 py-2 border border-gray-300 text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 w-full sm:w-auto justify-center",children:"Cancel"}),e.jsx("button",{onClick:Ee,className:"inline-flex items-center px-3 py-2 border border-transparent text-xs font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 w-full sm:w-auto justify-center",children:"Delete"})]})]})}),e.jsx(cm,{isOpen:W,onClose:()=>K(!1),message:ye}),e.jsx(Cc,{isOpen:X,onClose:()=>Q(!1),message:J})]})},BG=()=>{const{token:t}=ut(),[a,r]=g.useState([]),[s,n]=g.useState([]),[i,o]=g.useState(!1),[d,u]=g.useState(null),[m,x]=g.useState(!1),[f,b]=g.useState(!1),[p,v]=g.useState(null),[j,N]=g.useState({term:"",academic_year:"",start_date:"",end_date:""}),[w,P]=g.useState(!1),[k,$]=g.useState(!1),[O,L]=g.useState(""),[_,E]=g.useState("");g.useEffect(()=>{z(),A()},[]);const A=async()=>{o(!0);try{console.log("Fetching all class term years..."),console.log("URL:",`${ie}/classes/class-term-years`);const V=await ne.get(`${ie}/classes/class-term-years`,{headers:{Authorization:`Bearer ${t}`}});console.log("Response:",V.data),r(V.data.data||[])}catch(V){console.error("Error fetching class term years:",V),console.error("Error response:",V.response),console.error("Error status:",V.response?.status),console.error("Error data:",V.response?.data),console.error("Error message:",V.message),u("Failed to fetch class term years")}finally{o(!1)}},z=async()=>{try{console.log("Fetching classes..."),console.log("URL:",`${ie}/classes/gradelevel-classes`);const V=await ne.get(`${ie}/classes/gradelevel-classes`,{headers:{Authorization:`Bearer ${t}`}});console.log("Classes response:",V.data),n(V.data.data||[])}catch(V){console.error("Error fetching classes:",V),console.error("Error response:",V.response),console.error("Error status:",V.response?.status),console.error("Error data:",V.response?.data),console.error("Error message:",V.message)}},M=async V=>{V.preventDefault();try{console.log("Bulk populate data:",j),console.log("URL:",`${ie}/classes/class-term-years/bulk-populate`);const H=await ne.post(`${ie}/classes/class-term-years/bulk-populate`,j,{headers:{Authorization:`Bearer ${t}`}});console.log("Bulk populate response:",H.data),L(H.data.message),P(!0),b(!1),I(),A()}catch(H){console.error("Error bulk populating class term years:",H),console.error("Error response:",H.response),console.error("Error status:",H.response?.status),console.error("Error data:",H.response?.data),console.error("Error message:",H.message),E(H.response?.data?.message||"Failed to bulk populate class term years"),$(!0)}},D=V=>{v(V),x(!0)},I=()=>{N({term:"",academic_year:"",start_date:"",end_date:""})};return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold text-gray-900",children:"Class Term Year Management"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage class assignments for terms and academic years"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>b(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(R,{icon:kx,className:"mr-1"}),"Bulk Populate"]})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Term"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"End Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No class term year records found"})}):a.map(V=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:V.class_name}),e.jsx("div",{className:"text-xs text-gray-500",children:V.stream_name})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-medium text-gray-900",children:V.term})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-medium text-gray-900",children:V.academic_year})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-medium text-gray-900",children:V.start_date||"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-medium text-gray-900",children:V.end_date||"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${V.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:V.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs font-medium",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>D(V),className:"text-blue-600 hover:text-blue-900",children:e.jsx(R,{icon:Ma})})})})]},V.id))})]})})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white border border-gray-200 p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-sm font-bold mb-4",children:"Bulk Populate Class Term Years"}),e.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"This will create class term year records for all active classes for the specified term and academic year."}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Term *"}),e.jsxs("select",{value:j.term,onChange:V=>N(H=>({...H,term:V.target.value})),className:"w-full border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Academic Year *"}),e.jsx("input",{type:"text",value:j.academic_year,onChange:V=>N(H=>({...H,academic_year:V.target.value})),placeholder:"e.g., 2025",className:"w-full border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:j.start_date,onChange:V=>N(H=>({...H,start_date:V.target.value})),className:"w-full border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:j.end_date,onChange:V=>N(H=>({...H,end_date:V.target.value})),className:"w-full border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{b(!1),I()},className:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Populate All Classes"})]})]})]})}),m&&p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white border border-gray-200 p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-sm font-bold mb-4",children:"Class Term Year Details"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Class"}),e.jsx("p",{className:"text-xs text-gray-900",children:p.class_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Stream"}),e.jsx("p",{className:"text-xs text-gray-900",children:p.stream_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Term"}),e.jsx("p",{className:"text-xs text-gray-900",children:p.term})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Academic Year"}),e.jsx("p",{className:"text-xs text-gray-900",children:p.academic_year})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Start Date"}),e.jsx("p",{className:"text-xs text-gray-900",children:p.start_date||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"End Date"}),e.jsx("p",{className:"text-xs text-gray-900",children:p.end_date||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold ${p.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.is_active?"Active":"Inactive"})]})]})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:()=>x(!1),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Close"})})]})}),e.jsx(cm,{isOpen:w,onClose:()=>P(!1),message:O}),e.jsx(Cc,{isOpen:k,onClose:()=>$(!1),message:_})]})},zG=()=>{const{token:t}=ut(),[a,r]=g.useState({name:"",stage:""}),[s,n]=g.useState(!1),[i,o]=g.useState(""),[d,u]=g.useState(""),[m,x]=g.useState([]),[f,b]=g.useState(!1),[p,v]=g.useState(""),[j,N]=g.useState(null),[w,P]=g.useState({name:"",stage:""}),[k,$]=g.useState(!1),[O,L]=g.useState(null),[_,E]=g.useState({code:"",name:"",syllabus:""}),[A,z]=g.useState(!1),[M,D]=g.useState(""),[I,V]=g.useState(""),[H,B]=g.useState([]),[W,K]=g.useState(!1),[X,Q]=g.useState("");g.useEffect(()=>{ye()},[]);const ye=async()=>{b(!0),v("");try{const ce=await ne.get(`${ie}/classes/streams`,{headers:{Authorization:`Bearer ${t}`}});ce.data.success?x(ce.data.data||[]):v("Failed to load streams.")}catch{v("Failed to load streams.")}finally{b(!1)}},Y=ce=>{const{name:De,value:ke}=ce.target;r(re=>({...re,[De]:ke}))},J=async ce=>{if(ce.preventDefault(),o(""),u(""),!a.name.trim()||!a.stage.trim()){o("Both name and stage are required.");return}try{n(!0);const De=await ne.post(`${ie}/classes/streams`,a,{headers:{Authorization:`Bearer ${t}`}});De.data.success?(u("Stream added successfully!"),r({name:"",stage:""}),ye()):o(De.data.message||"Failed to add stream.")}catch(De){o(De.response?.data?.message||"Failed to add stream.")}finally{n(!1)}},U=ce=>{N(ce.id),P({name:ce.name,stage:ce.stage})},ee=()=>{N(null),P({name:"",stage:""})},he=async ce=>{if(!w.name.trim()||!w.stage.trim()){v("Both name and stage are required.");return}try{$(!0),v("");const De=await ne.put(`${ie}/classes/streams/${ce}`,w,{headers:{Authorization:`Bearer ${t}`}});De.data.success?(N(null),P({name:"",stage:""}),ye()):v(De.data.message||"Failed to update stream.")}catch(De){v(De.response?.data?.message||"Failed to update stream.")}finally{$(!1)}},pe=async ce=>{if(window.confirm("Are you sure you want to delete this stream? This action cannot be undone."))try{L(ce),v("");const De=await ne.delete(`${ie}/classes/streams/${ce}`,{headers:{Authorization:`Bearer ${t}`}});De.data.success?ye():v(De.data.message||"Failed to delete stream.")}catch(De){v(De.response?.data?.message||"Failed to delete stream.")}finally{L(null)}};g.useEffect(()=>{se()},[]);const se=async()=>{K(!0),Q("");try{const ce=await ne.get(`${ie}/classes/subjects`,{headers:{Authorization:`Bearer ${t}`}});ce.data.success?B(ce.data.data||[]):Q("Failed to load subjects.")}catch{Q("Failed to load subjects.")}finally{K(!1)}},te=ce=>{const{name:De,value:ke}=ce.target;E(re=>({...re,[De]:ke}))},ue=async ce=>{if(ce.preventDefault(),D(""),V(""),!_.code.trim()||!_.name.trim()){D("Both code and name are required.");return}try{z(!0);const De=await ne.post(`${ie}/classes/subjects`,_,{headers:{Authorization:`Bearer ${t}`}});De.data.success?(V("Subject added successfully!"),E({code:"",name:"",syllabus:""}),se()):D(De.data.message||"Failed to add subject.")}catch(De){console.log("Error adding subject:",De),D(De.response?.data?.message||"Failed to add subject.")}finally{z(!1)}},ge=()=>{const ce=Math.floor(1e3+Math.random()*9e3);E(De=>({...De,code:`SUBJ${ce}`}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-6 mb-6",children:[e.jsxs("h2",{className:" font-semibold text-gray-900 mb-2 flex items-center",children:[e.jsx(R,{icon:za,className:"mr-2 h-5 w-5 text-gray-400"}),"Add New Stream"]}),e.jsxs("form",{onSubmit:J,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Stream Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:Y,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Grade 1, Form 2, ECD A",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Stage ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"stage",value:a.stage,onChange:Y,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Primary, Secondary, ECD",required:!0})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:s,className:`px-6 py-2 text-xs font-medium text-white ${s?"bg-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-800"} w-full`,children:s?"Adding...":"Add Stream"})})]}),(i||d)&&e.jsx("div",{className:`mt-3 text-xs ${i?"text-red-600":"text-green-600"}`,children:i||d})]}),e.jsxs("div",{className:"p-6 mb-6",children:[e.jsxs("h2",{className:" font-semibold text-gray-900 mb-2 flex items-center",children:[e.jsx(R,{icon:ko,className:"mr-2 h-5 w-5 text-gray-400"}),"Add New Subject"]}),e.jsxs("form",{onSubmit:ue,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Subject Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",name:"code",value:_.code,onChange:te,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., ENG101",required:!0}),e.jsx("button",{type:"button",onClick:ge,className:"mt-1 px-2 py-1 text-xs bg-gray-200 hover:bg-gray-300 text-gray-700 border border-gray-300 rounded",children:"Auto"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Subject Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:_.name,onChange:te,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., English Language",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Syllabus"}),e.jsx("input",{type:"text",name:"syllabus",value:_.syllabus,onChange:te,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., ZIMSEC, Cambridge"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:A,className:`px-6 py-2 text-xs font-medium text-white ${A?"bg-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-800"} w-full`,children:A?"Adding...":"Add Subject"})})]}),(M||I)&&e.jsx("div",{className:`mt-3 text-xs ${M?"text-red-600":"text-green-600"}`,children:M||I})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:" font-semibold text-gray-900 mb-2",children:"Existing Streams"}),p&&e.jsx("div",{className:"mb-3 text-xs text-red-600 bg-red-50 p-2 rounded",children:p}),f?e.jsx("div",{className:"text-xs text-gray-500",children:"Loading streams..."}):m.length===0?e.jsx("div",{className:"text-xs text-gray-500",children:"No streams found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Stream Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Stage"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(ce=>e.jsx("tr",{children:j===ce.id?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("input",{type:"text",value:w.name,onChange:De=>P(ke=>({...ke,name:De.target.value})),className:"w-full px-2 py-1 border border-gray-300 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Stream Name"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("input",{type:"text",value:w.stage,onChange:De=>P(ke=>({...ke,stage:De.target.value})),className:"w-full px-2 py-1 border border-gray-300 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Stage"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>he(ce.id),disabled:k,className:"px-2 py-1 text-xs bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 flex items-center",title:"Save",children:e.jsx(R,{icon:Er,className:"h-3 w-3"})}),e.jsx("button",{onClick:ee,disabled:k,className:"px-2 py-1 text-xs bg-gray-500 text-white hover:bg-gray-600 disabled:opacity-50 flex items-center",title:"Cancel",children:e.jsx(R,{icon:Bt,className:"h-3 w-3"})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ce.name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ce.stage}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>U(ce),className:"px-2 py-1 text-xs bg-blue-600 text-white hover:bg-blue-700 flex items-center",title:"Edit",children:e.jsx(R,{icon:ha,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>pe(ce.id),disabled:O===ce.id,className:"px-2 py-1 text-xs bg-red-600 text-white hover:bg-red-700 disabled:opacity-50 flex items-center",title:"Delete",children:e.jsx(R,{icon:Yt,className:"h-3 w-3"})})]})})]})},ce.id))})]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:" font-semibold text-gray-900 mb-2",children:"Existing Subjects"}),W?e.jsx("div",{className:"text-xs text-gray-500",children:"Loading subjects..."}):X?e.jsx("div",{className:"text-xs text-red-600",children:X}):H.length===0?e.jsx("div",{className:"text-xs text-gray-500",children:"No subjects found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Subject Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Code"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Syllabus"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:H.map(ce=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ce.name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ce.code}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ce.syllabus||"-"})]},ce.id))})]})})]})]})},qG=()=>{const{token:t}=ut(),[a,r]=g.useState(""),[s,n]=g.useState(null),[i,o]=g.useState(null),[d,u]=g.useState([]),[m,x]=g.useState(!1),[f,b]=g.useState(""),[p,v]=g.useState({start_date:"",end_date:"",page:1,limit:50}),[j,N]=g.useState({}),w=async()=>{if(console.log(" Starting student search for:",a),!a.trim()){b("Please enter a student registration number");return}x(!0),b("");try{console.log(" Making API call to:",`${ie}/students/search?query=${a}`),console.log(" Making balance API call to:",`${ie}/student-balances/${a}`);const A=await ne.get(`${ie}/students/search?query=${a}`,{headers:{Authorization:`Bearer ${t}`}});console.log(" Student response:",A.data),n(A.data.data[0]);const z=await ne.get(`${ie}/student-balances/${a}`,{headers:{Authorization:`Bearer ${t}`}});console.log(" Balance response:",z.data),o(z.data.data),await P()}catch(A){console.error("Error searching student:",A),console.error("Error response:",A.response),console.error("Error status:",A.response?.status),console.error("Error data:",A.response?.data);let z="Failed to find student";A.response?.status===403?z="Access denied. You may not have permission to view student information.":A.response?.status===404?z="Student not found. Please check the registration number.":A.response?.data?.message&&(z=A.response.data.message),b(z),n(null),o(null),u([])}finally{x(!1)}},P=async()=>{if(a)try{const A=new URLSearchParams({page:p.page,limit:p.limit,...p.start_date&&{start_date:p.start_date},...p.end_date&&{end_date:p.end_date}}),z=await ne.get(`${ie}/student-balances/${a}/statement?${A}`,{headers:{Authorization:`Bearer ${t}`}});u(z.data.data.transactions),N(z.data.data.pagination)}catch(A){console.error("Error fetching statement:",A),b("Failed to fetch student statement")}},k=(A,z)=>{v(M=>({...M,[A]:z,page:1}))},$=()=>{P()},O=A=>{v(z=>({...z,page:A}))},L=(A,z)=>{const M=parseFloat(A).toFixed(2),D=z==="CREDIT"?"text-green-600":"text-red-600",I=z==="CREDIT"?Ot:Up;return e.jsxs("span",{className:`font-semibold ${D} flex items-center gap-1`,children:[e.jsx(R,{icon:I,className:"text-xs"}),"$",M]})},_=A=>new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=A=>A==="CREDIT"?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200";return g.useEffect(()=>{a&&s&&P()},[p.page,p.limit]),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Student Statement"}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex gap-4 items-end",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Student Registration Number"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:A=>r(A.target.value),placeholder:"Enter registration number",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("button",{onClick:w,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:[e.jsx(R,{icon:aa,className:"mr-2"}),m?"Searching...":"Search"]})]})]})})}),f&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:f}),s&&i&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Student Information"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",s.Name," ",s.Surname]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Reg No:"})," ",s.RegNumber]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Gender:"})," ",s.Gender]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Current Balance"}),e.jsxs("div",{className:`text-2xl font-bold ${i.current_balance>=0?"text-green-600":"text-red-600"}`,children:["$",parseFloat(i.current_balance).toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-500",children:i.current_balance>=0?"Credit Balance":"Outstanding Balance"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Last updated: ",_(i.last_updated)]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{className:"w-full px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:[e.jsx(R,{icon:bn,className:"mr-1"}),"Download Statement"]}),e.jsxs("button",{className:"w-full px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:[e.jsx(R,{icon:Ln,className:"mr-1"}),"Print Statement"]})]})]})]})}),s&&e.jsxs("div",{className:"mb-6 bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Filter Transactions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:p.start_date,onChange:A=>k("start_date",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:p.end_date,onChange:A=>k("end_date",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Records per page"}),e.jsxs("select",{value:p.limit,onChange:A=>k("limit",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:$,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx(R,{icon:$r,className:"mr-2"}),"Apply Filters"]})})]})]}),s&&d.length>0&&e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Term/Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class/Hostel"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:_(A.transaction_date)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${E(A.transaction_type)}`,children:A.transaction_type})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:L(A.amount,A.transaction_type)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 max-w-xs truncate",children:A.description}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:A.term&&A.academic_year?`${A.term} ${A.academic_year}`:"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:A.class_name||A.hostel_name||"-"})]},A.id))})]}),j.totalPages>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(j.page-1)*j.limit+1," to ",Math.min(j.page*j.limit,j.total)," of ",j.total," results"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>O(j.page-1),disabled:j.page<=1,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),e.jsxs("span",{className:"px-3 py-1 text-sm text-gray-700",children:["Page ",j.page," of ",j.totalPages]}),e.jsx("button",{onClick:()=>O(j.page+1),disabled:j.page>=j.totalPages,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]}),s&&d.length===0&&!m&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:Ma,className:"text-4xl text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No transactions found for this student."})]})]})})},UG=()=>{const{token:t}=ut(),[a,r]=g.useState([]),[s,n]=g.useState(null),[i,o]=g.useState(!0),[d,u]=g.useState(""),[m,x]=g.useState(""),[f,b]=g.useState(""),[p,v]=g.useState({currentPage:1,totalPages:1,totalStudents:0,limit:20,hasNextPage:!1,hasPreviousPage:!1});g.useEffect(()=>{j(),N()},[p.currentPage,f]);const j=async()=>{try{o(!0),u("");const E=new URLSearchParams({page:p.currentPage,limit:p.limit,...f&&{search:f}}),A=await ne.get(`${ie}/students/balances/outstanding?${E}`,{headers:{Authorization:`Bearer ${t}`}});A.data.success&&(r(A.data.data),v(A.data.pagination),n(A.data.summary))}catch(E){console.error("Error fetching student balances:",E),u("Failed to fetch student balances")}finally{o(!1)}},N=async()=>{try{const E=await ne.get(`${ie}/students/balances/summary`,{headers:{Authorization:`Bearer ${t}`}});E.data.success&&n(E.data.data)}catch(E){console.error("Error fetching summary:",E)}},w=()=>{b(m),v(E=>({...E,currentPage:1}))},P=E=>{v(A=>({...A,currentPage:E}))},k=E=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(E)),$=E=>new Date(E).toLocaleDateString("en-GB"),O=()=>{j(),N()},L=()=>{const E=[["Registration Number","Name","Surname","Class","Outstanding Balance","Last Transaction Date"],...a.map(D=>[D.RegNumber,D.Name,D.Surname,"Not Assigned",Math.abs(D.current_balance).toFixed(2),D.last_transaction_date?$(D.last_transaction_date):"N/A"])].map(D=>D.join(",")).join(`
`),A=new Blob([E],{type:"text/csv"}),z=window.URL.createObjectURL(A),M=document.createElement("a");M.href=z,M.download=`outstanding-balances-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(M),M.click(),window.URL.revokeObjectURL(z),document.body.removeChild(M)},_=()=>{const E=window.open("","_blank");E.document.write(`
      <html>
        <head>
          <title>Outstanding Student Balances</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 10px; margin-bottom: 20px; }
            .summary { background: #f5f5f5; padding: 15px; margin-bottom: 20px; border: 1px solid #ddd; }
            table { width: 100%; border-collapse: collapse; margin-top: 10px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #f2f2f2; }
            .amount { text-align: right; }
            .total { font-weight: bold; background-color: #f9f9f9; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>OUTSTANDING STUDENT BALANCES</h1>
            <p>Generated on ${new Date().toLocaleDateString()}</p>
          </div>
          
          <div class="summary">
            <h3>Summary</h3>
            <p><strong>Total Students with Outstanding Balances:</strong> ${s?.total_students_with_debt||0}</p>
            <p><strong>Total Outstanding Amount:</strong> ${k(s?.total_outstanding_debt||0)}</p>
          </div>
          
          <table>
            <thead>
              <tr>
                <th>Registration No</th>
                <th>Name</th>
                <th>Surname</th>
                <th>Class</th>
                <th class="amount">Outstanding Balance</th>
                <th>Last Transaction</th>
              </tr>
            </thead>
            <tbody>
                             ${a.map(A=>`
                 <tr>
                   <td>${A.RegNumber}</td>
                   <td>${A.Name}</td>
                   <td>${A.Surname}</td>
                   <td>Not Assigned</td>
                   <td class="amount">${k(A.current_balance)}</td>
                   <td>${A.last_transaction_date?$(A.last_transaction_date):"N/A"}</td>
                 </tr>
               `).join("")}
            </tbody>
          </table>
        </body>
      </html>
    `),E.document.close(),E.print()};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Outstanding Student Balances"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Students with outstanding debts and payment obligations"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:O,className:"bg-gray-600 text-white px-3 py-2 text-xs hover:bg-gray-700 flex items-center",children:[e.jsx(R,{icon:zC,className:"mr-1"}),"Refresh"]}),e.jsxs("button",{onClick:L,className:"bg-green-600 text-white px-3 py-2 text-xs hover:bg-green-700 flex items-center",children:[e.jsx(R,{icon:bn,className:"mr-1"}),"Export"]}),e.jsxs("button",{onClick:_,className:"bg-blue-600 text-white px-3 py-2 text-xs hover:bg-blue-700 flex items-center",children:[e.jsx(R,{icon:Ln,className:"mr-1"}),"Print"]})]})]})}),s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:la,className:"text-red-600 text-lg mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Students with Debt"}),e.jsx("p",{className:"text-lg font-bold text-red-900",children:s.total_students_with_debt})]})]})}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:Ia,className:"text-red-600 text-lg mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Total Outstanding"}),e.jsx("p",{className:"text-lg font-bold text-red-900",children:k(s.total_outstanding_debt)})]})]})})]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(R,{icon:aa,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",placeholder:"Search by name or registration number...",value:m,onChange:E=>x(E.target.value),onKeyPress:E=>E.key==="Enter"&&w(),className:"w-full pl-6 pr-2 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsx("button",{onClick:w,className:"bg-gray-900 text-white px-4 py-2 text-xs hover:bg-gray-800",children:"Search"})]})}),d&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 text-xs rounded",children:d}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:i?e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Loading outstanding balances..."})}):a.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(R,{icon:Mr,className:"text-gray-400 text-3xl mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:f?"No students found matching your search":"No students with outstanding balances"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outstanding Balance"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Transaction"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(E=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[E.Name," ",E.Surname]}),e.jsx("div",{className:"text-gray-500",children:E.RegNumber})]})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:"Not Assigned"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right",children:e.jsx("span",{className:"text-red-600 font-bold",children:k(E.current_balance)})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:E.last_transaction_date?$(E.last_transaction_date):"N/A"})]},E.RegNumber))})]})}),p.totalPages>1&&e.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>P(p.currentPage-1),disabled:!p.hasPreviousPage,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>P(p.currentPage+1),disabled:!p.hasNextPage,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-xs text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(p.currentPage-1)*p.limit+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(p.currentPage*p.limit,p.totalStudents)})," ","of"," ",e.jsx("span",{className:"font-medium",children:p.totalStudents})," ","results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>P(p.currentPage-1),disabled:!p.hasPreviousPage,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-xs font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:Math.min(5,p.totalPages)},(E,A)=>{const z=A+1;return e.jsx("button",{onClick:()=>P(z),className:`relative inline-flex items-center px-3 py-2 border text-xs font-medium ${z===p.currentPage?"z-10 bg-gray-900 border-gray-900 text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:z},z)}),e.jsx("button",{onClick:()=>P(p.currentPage+1),disabled:!p.hasNextPage,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-xs font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]})})]})})]})})},HG=()=>{const{token:t}=ut(),[a,r]=g.useState(""),[s,n]=g.useState(null),[i,o]=g.useState(null),[d,u]=g.useState([]),[m,x]=g.useState(!1),[f,b]=g.useState(""),[p,v]=g.useState(""),[j,N]=g.useState(!1),[w,P]=g.useState(!1),[k,$]=g.useState({payment_amount:"",payment_currency:"",exchange_rate:1,payment_method:"Cash",payment_date:new Date().toISOString().split("T")[0],reference_number:"",notes:""}),[O,L]=g.useState(null);g.useEffect(()=>{_()},[]);const _=async()=>{try{const I=await ne.get(`${ie}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}});u(I.data.data)}catch(I){console.error("Error fetching currencies:",I)}},E=async()=>{if(console.log(" Starting student search for:",a),!a.trim()){b("Please enter a student registration number"),P(!0);return}x(!0),b("");try{console.log(" Making API call to:",`${ie}/students/search?query=${a}`);const I=await ne.get(`${ie}/students/search?query=${a}`,{headers:{Authorization:`Bearer ${t}`}});console.log(" Student response:",I.data),n(I.data.data[0]),console.log(" Making balance API call to:",`${ie}/student-balances/${a}`);const V=await ne.get(`${ie}/student-balances/${a}`,{headers:{Authorization:`Bearer ${t}`}});console.log(" Balance response:",V.data),o(V.data.data)}catch(I){console.error("Error searching student:",I),console.error("Error response:",I.response),console.error("Error status:",I.response?.status),console.error("Error data:",I.response?.data);let V="Failed to find student";I.response?.status===403?V="Access denied. You may not have permission to view student information.":I.response?.status===404?V="Student not found. Please check the registration number.":I.response?.data?.message&&(V=I.response.data.message),b(V),P(!0),n(null),o(null)}finally{x(!1)}},A=(I,V)=>{if($(H=>({...H,[I]:V})),I==="payment_currency"){const H=d.find(B=>B.id==V);H&&$(B=>({...B,exchange_rate:H.exchange_rate||1}))}},z=()=>{const I=parseFloat(k.payment_amount)||0,V=parseFloat(k.exchange_rate)||1;return(I*V).toFixed(2)},M=async()=>{if(!s){b("Please search for a student first"),P(!0);return}if(!k.payment_amount||!k.payment_currency||!k.payment_method){b("Please fill in all required fields"),P(!0);return}x(!0),b("");try{const I={student_reg_number:a,...k,base_currency_amount:z()},V=await ne.post(`${ie}/fees/payments`,I,{headers:{Authorization:`Bearer ${t}`}});if(L(V.data.data),v("Payment processed successfully!"),N(!0),$({payment_amount:"",payment_currency:"",exchange_rate:1,payment_method:"Cash",payment_date:new Date().toISOString().split("T")[0],reference_number:"",notes:""}),s){const H=await ne.get(`${ie}/student-balances/${a}`,{headers:{Authorization:`Bearer ${t}`}});o(H.data.data)}}catch(I){console.error("Error processing payment:",I),b(I.response?.data?.message||"Failed to process payment"),P(!0)}finally{x(!1)}},D=()=>{if(O){const I=window.open("","_blank");I.document.write(`
                <html>
                    <head>
                        <title>Payment Receipt</title>
                        <style>
                            body { font-family: Arial, sans-serif; margin: 20px; }
                            .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px; }
                            .receipt-details { margin-bottom: 20px; }
                            .receipt-details table { width: 100%; border-collapse: collapse; }
                            .receipt-details td { padding: 5px; border-bottom: 1px solid #ddd; }
                            .amount { font-size: 18px; font-weight: bold; color: #2563eb; }
                            .footer { margin-top: 30px; text-align: center; font-size: 12px; color: #666; }
                        </style>
                    </head>
                    <body>
                        <div class="header">
                            <h1>Payment Receipt</h1>
                            <p>Receipt #: ${O.receipt_number}</p>
                        </div>
                        <div class="receipt-details">
                            <table>
                                <tr><td><strong>Student:</strong></td><td>${s?.Name} ${s?.Surname}</td></tr>
                                <tr><td><strong>Registration No:</strong></td><td>${s?.RegNumber}</td></tr>
                                <tr><td><strong>Payment Date:</strong></td><td>${k.payment_date}</td></tr>
                                <tr><td><strong>Payment Method:</strong></td><td>${k.payment_method}</td></tr>
                                <tr><td><strong>Amount:</strong></td><td class="amount">$${z()}</td></tr>
                                ${k.reference_number?`<tr><td><strong>Reference:</strong></td><td>${k.reference_number}</td></tr>`:""}
                                ${k.notes?`<tr><td><strong>Notes:</strong></td><td>${k.notes}</td></tr>`:""}
                            </table>
                        </div>
                        <div class="footer">
                            <p>Thank you for your payment!</p>
                            <p>Generated on: ${new Date().toLocaleString()}</p>
                        </div>
                    </body>
                </html>
            `),I.document.close(),I.print()}};return e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Fee Payment"}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex gap-4 items-end",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Student Registration Number"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:I=>r(I.target.value),placeholder:"Enter registration number",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("button",{onClick:E,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:[e.jsx(R,{icon:aa,className:"mr-2"}),m?"Searching...":"Search"]})]})]})})}),s&&i&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-blue-800 mb-2 flex items-center",children:[e.jsx(R,{icon:Is,className:"mr-2"}),"Student Information"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",s.Name," ",s.Surname]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Reg No:"})," ",s.RegNumber]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Gender:"})," ",s.Gender]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[e.jsx(R,{icon:Ia,className:"mr-2"}),"Current Balance"]}),e.jsxs("div",{className:`text-2xl font-bold ${i.current_balance>=0?"text-green-600":"text-red-600"}`,children:["$",parseFloat(i.current_balance).toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-500",children:i.current_balance>=0?"Credit Balance":"Outstanding Balance"})]})]})}),s&&e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(R,{icon:On,className:"mr-2"}),"Payment Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Amount *"}),e.jsx("input",{type:"number",step:"0.01",value:k.payment_amount,onChange:I=>A("payment_amount",I.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency *"}),e.jsxs("select",{value:k.payment_currency,onChange:I=>A("payment_currency",I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Currency"}),d.map(I=>e.jsxs("option",{value:I.id,children:[I.name," (",I.code,")"]},I.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exchange Rate"}),e.jsx("input",{type:"number",step:"0.000001",value:k.exchange_rate,onChange:I=>A("exchange_rate",I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method *"}),e.jsxs("select",{value:k.payment_method,onChange:I=>A("payment_method",I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Cheque",children:"Cheque"}),e.jsx("option",{value:"Mobile Money",children:"Mobile Money"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Date"}),e.jsx("input",{type:"date",value:k.payment_date,onChange:I=>A("payment_date",I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reference Number"}),e.jsx("input",{type:"text",value:k.reference_number,onChange:I=>A("reference_number",I.target.value),placeholder:"Transaction reference",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{value:k.notes,onChange:I=>A("notes",I.target.value),placeholder:"Additional notes...",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),k.payment_amount&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Base Currency Amount:"}),e.jsxs("span",{className:"ml-2 text-lg font-bold text-blue-600",children:["$",z()]})]})}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:M,disabled:m||!k.payment_amount||!k.payment_currency,className:"w-full px-6 py-3 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(R,{icon:sn,className:"mr-2"}),m?"Processing Payment...":"Process Payment"]})})]}),O&&e.jsxs("div",{className:"mt-6 bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-3",children:"Payment Successful!"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Receipt #: ",e.jsx("span",{className:"font-medium",children:O.receipt_number})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx(R,{icon:Ln,className:"mr-2"}),"Print Receipt"]}),e.jsxs("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500",children:[e.jsx(R,{icon:Bt,className:"mr-2"}),"Close"]})]})]})]}),e.jsx(cm,{isOpen:j,onClose:()=>N(!1),title:"Payment Successful",message:p}),e.jsx(Cc,{isOpen:w,onClose:()=>P(!1),title:"Payment Error",message:f})]})},YG=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState(""),[i,o]=g.useState(null),[d,u]=g.useState([]),[m,x]=g.useState(null),[f,b]=g.useState([]),[p,v]=g.useState(!1),[j,N]=g.useState("");g.useEffect(()=>{i&&k()},[i]);const w=async()=>{if(s.trim()){r(!0);try{const _=await ne.get(`${ie}/students/search?query=${s}`,{headers:{Authorization:`Bearer ${t}`}});u(_.data.data||[])}catch(_){console.error("Error searching students:",_),u([]),N("Failed to search students"),v(!0)}finally{r(!1)}}},P=_=>{o(_),u([]),n(""),x(null),b([])},k=async()=>{if(i){r(!0);try{const _=await ne.get(`${ie}/student-financial-records/${i.RegNumber}/summary`,{headers:{Authorization:`Bearer ${t}`}}),E=await ne.get(`${ie}/student-financial-records/${i.RegNumber}/transactions`,{headers:{Authorization:`Bearer ${t}`}});if(console.log("Financial Summary:",_.data.data),console.log("Transactions:",E.data.data),E.data.data&&Array.isArray(E.data.data)){const A=E.data.data.filter(z=>z.fee_type==="boarding");console.log("Boarding transactions found:",A.length),A.forEach((z,M)=>{console.log(`Boarding transaction ${M+1}:`,{id:z.id,amount:z.amount,transaction_type:z.transaction_type,notes:z.notes,fee_type:z.fee_type})})}if(E.data.data&&Array.isArray(E.data.data)){console.log("=== DETAILED TRANSACTION ANALYSIS ==="),console.log("Total transactions received:",E.data.data.length),E.data.data.forEach((I,V)=>{console.log(`Transaction ${V+1}:`,{id:I.id,transaction_type:I.transaction_type,amount:I.amount,fee_type:I.fee_type,notes:I.notes,payment_date:I.payment_date,running_balance:I.running_balance})});const A=E.data.data.every(I=>I.transaction_type!==void 0);console.log("All transactions have transaction_type field:",A);const z=E.data.data.reduce((I,V)=>(I[V.transaction_type]=(I[V.transaction_type]||0)+1,I),{});console.log("Transaction type counts:",z);const M=E.data.data.filter(I=>I.transaction_type==="DEBIT"),D=E.data.data.filter(I=>I.transaction_type==="CREDIT");console.log("DEBIT transactions count:",M.length),console.log("CREDIT transactions count:",D.length),console.log("=== END ANALYSIS ===")}else console.log("No transactions data or not an array:",E.data.data);x(_.data.data||{}),b(E.data.data||[])}catch(_){console.error("Error fetching financial data:",_),console.error("Error response:",_.response?.data),console.error("Error status:",_.response?.status),console.error("Error URL:",_.config?.url),N(`Failed to fetch financial data: ${_.response?.data?.message||_.message}`),v(!0)}finally{r(!1)}}},$=(_,E="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:E}).format(_),O=_=>{switch(_){case"tuition":return bB;case"boarding":return Mr;case"other":return df;default:return Ia}},L=_=>{switch(_){case"tuition":return"text-blue-600";case"boarding":return"text-green-600";case"other":return"text-purple-600";default:return"text-gray-600"}};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          @media print {
            body { margin: 0; }
            .print-break { page-break-before: always; }
            table { page-break-inside: avoid; }
            .print-header { display: block !important; }
            .print-hidden { display: none !important; }
          }
        `}),e.jsxs("div",{className:"bg-white border border-gray-200 p-4 print:p-0",children:[e.jsxs("div",{className:"hidden print:block mb-6 border-b border-gray-300 pb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Student Financial Statement"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Generated on ",new Date().toLocaleDateString()]})]}),i&&e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Student:"})," ",i.Name," ",i.Surname]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Registration No:"})," ",i.RegNumber]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Class:"})," ",i.ClassName||"Not Assigned"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Academic Year:"})," 2025"]})]})]}),e.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4 print:text-base print:hidden",children:"Student Financial Record"}),e.jsxs("div",{className:"mb-6 print:hidden",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-2",children:"Search Student"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(R,{icon:aa,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",value:s,onChange:_=>n(_.target.value),placeholder:"Enter student name or registration number...",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsx("button",{type:"button",onClick:w,disabled:a,className:"bg-gray-600 text-white px-3 py-1.5 text-xs hover:bg-gray-700 disabled:opacity-50",children:a?"Searching...":"Search"})]}),d.length>0&&e.jsx("div",{className:"mt-2 border border-gray-200 max-h-32 overflow-y-auto",children:d.map(_=>e.jsxs("div",{onClick:()=>P(_),className:"p-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"font-medium text-gray-900 text-xs",children:[_.Name," ",_.Surname]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Reg: ",_.RegNumber," | Class: ",_.ClassName||"Not Assigned"]})]},_.RegNumber))}),i&&e.jsx("div",{className:"mt-3 bg-gray-50 p-3 border border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[i.Name," ",i.Surname]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Registration No:"}),e.jsx("span",{className:"ml-1 font-medium",children:i.RegNumber})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Class:"}),e.jsx("span",{className:"ml-1 font-medium",children:i.ClassName||"Not Assigned"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Academic Year:"}),e.jsx("span",{className:"ml-1 font-medium",children:"2025"})]})]})})]}),m&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-gray-50 p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Current Balance"}),e.jsx("div",{className:`text-lg font-bold ${(m.balance||0)>=0?"text-green-900":"text-red-900"}`,children:$(m.balance||0)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-600",children:m.balance>=0?"CR":"DR"}),e.jsx("div",{className:"text-xs font-medium text-gray-900",children:m.balance>=0?"Credit Balance":"Debit Balance"})]})]})})}),i&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-medium text-gray-900 mb-3",children:["Financial Statement (",f.length," records)"]}),a?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"Loading transactions..."})}):f.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border border-gray-200",children:"Date"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border border-gray-200",children:"Type"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border border-gray-200",children:"Description"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider border border-gray-200",children:"DR"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider border border-gray-200",children:"CR"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider border border-gray-200",children:"Balance"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map((_,E)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900 border border-gray-200",children:new Date(_.payment_date).toLocaleDateString()}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:O(_.fee_type),className:`text-xs mr-1 ${L(_.fee_type)}`}),e.jsx("span",{className:`text-xs font-medium capitalize ${L(_.fee_type)}`,children:_.fee_type})]})}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-900 border border-gray-200",children:_.notes||`${_.fee_type} payment`}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right border border-gray-200",children:(console.log("Rendering DR column for transaction:",{id:_.id,transaction_type:_.transaction_type,amount:_.amount,isDebit:_.transaction_type==="DEBIT"}),_.transaction_type==="DEBIT"?e.jsx("span",{className:"text-red-600 font-medium",children:$(Math.abs(_.amount),_.currency_symbol)}):e.jsx("span",{className:"text-gray-400",children:"-"}))}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right border border-gray-200",children:(console.log("Rendering CR column for transaction:",{id:_.id,transaction_type:_.transaction_type,amount:_.amount,isCredit:_.transaction_type==="CREDIT"}),_.transaction_type==="CREDIT"?e.jsx("span",{className:"text-green-600 font-medium",children:$(Math.abs(_.amount),_.currency_symbol)}):e.jsx("span",{className:"text-gray-400",children:"-"}))}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right font-medium border border-gray-200",children:e.jsx("span",{className:_.running_balance>=0?"text-green-600":"text-red-600",children:$(_.running_balance||0,_.currency_symbol)})})]},_.id||E))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:UC,className:"text-gray-400 text-2xl mb-2"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"No transactions found"})]})]}),e.jsx(Cc,{isOpen:p,onClose:()=>v(!1),message:j})]})]})},GG=()=>e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Student Financial Record"}),e.jsx("p",{className:"text-xs text-gray-600",children:"View and manage student financial statements"})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx("div",{children:e.jsx(YG,{})})})]})}),VG=()=>{const{token:t}=ut(),[a,r]=g.useState("journal"),[s,n]=g.useState(!1),[i,o]=g.useState(null),[d,u]=g.useState([]),[m,x]=g.useState({current_page:1,total_pages:1,total_records:0,limit:20}),[f,b]=g.useState({search:"",startDate:"",endDate:"",transactionType:""}),[p,v]=g.useState([]),[j,N]=g.useState([]),[w,P]=g.useState(""),[k,$]=g.useState({summary:[],totals:{total_debits:0,total_credits:0,net_amount:0}});g.useEffect(()=>{a==="journal"?O():a==="balances"?L():a==="summary"&&_()},[a,f,m.current_page,w]),g.useEffect(()=>{E()},[]);const O=async()=>{try{n(!0),o(null);const X={page:m.current_page,limit:m.limit,...f},ye=(await ne.get(`${ie}/accounting/general-ledger`,{params:X,headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data;u(ye.data||[]),x(ye.pagination||m)}catch(X){console.error("Error fetching journal entries:",X),o(X.response?.data?.message||"Failed to fetch journal entries")}finally{n(!1)}},L=async()=>{try{n(!0),o(null);const X={};w&&(X.currency_id=w);const Q=await ne.get(`${ie}/accounting/general-ledger/account-balances`,{params:X,headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});v(Q.data.data||[])}catch(X){console.error("Error fetching account balances:",X),o(X.response?.data?.message||"Failed to fetch account balances")}finally{n(!1)}},_=async()=>{try{n(!0),o(null);const X={};f.startDate&&(X.startDate=f.startDate),f.endDate&&(X.endDate=f.endDate);const Q=await ne.get(`${ie}/accounting/general-ledger/transaction-summary`,{params:X,headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});$(Q.data.data||{summary:[],totals:{total_debits:0,total_credits:0,net_amount:0}})}catch(X){console.error("Error fetching transaction summary:",X),o(X.response?.data?.message||"Failed to fetch transaction summary")}finally{n(!1)}},E=async()=>{try{const X=await ne.get(`${ie}/accounting/general-ledger/currencies`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});N(X.data.data||[])}catch(X){console.error("Error fetching currencies:",X)}},A=(X,Q)=>{b(ye=>({...ye,[X]:Q})),x(ye=>({...ye,current_page:1}))},z=X=>{x(Q=>({...Q,current_page:X}))},M=X=>new Date(X).toLocaleDateString(),D=(X,Q="$")=>`${Q}${parseFloat(X||0).toFixed(2)}`,I=X=>X==="CREDIT"?"text-green-600":"text-red-600",V=X=>X==="CREDIT"?On:df,H=X=>X==="fee_payment"?Ia:Is,B=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsx("input",{type:"text",value:f.search,onChange:X=>A("search",X.target.value),placeholder:"Search transactions...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:f.startDate,onChange:X=>A("startDate",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:f.endDate,onChange:X=>A("endDate",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:f.transactionType,onChange:X=>A("transactionType",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"DEBIT",children:"Debit"}),e.jsx("option",{value:"CREDIT",children:"Credit"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Journal Entries"}),e.jsx("p",{className:"text-sm text-gray-500",children:"All financial transactions recorded in the system"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created By"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(X=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M(X.transaction_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:X.student_reg_number}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:H(X.source),className:"mr-2 text-gray-400 h-4 w-4"}),X.description]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${I(X.transaction_type)}`,children:[e.jsx(R,{icon:V(X.transaction_type),className:"mr-1 h-3 w-3"}),X.transaction_type]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium",children:e.jsx("span",{className:I(X.transaction_type),children:D(X.amount)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:X.receipt_number||X.reference_number||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:X.created_by})]},`${X.source}-${X.id}`))})]})}),!s&&d.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(R,{icon:Tn,className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No journal entries found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:f.search||f.startDate||f.endDate?"Try adjusting your filters.":"No transactions have been recorded yet."})]}),s&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading journal entries..."})]})]}),m.total_pages>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing page ",m.current_page," of ",m.total_pages,"(",m.total_records," total entries)"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>z(m.current_page-1),disabled:m.current_page===1,className:"px-3 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md",children:"Previous"}),e.jsx("button",{onClick:()=>z(m.current_page+1),disabled:m.current_page===m.total_pages,className:"px-3 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md",children:"Next"})]})]})]}),W=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Currency:"}),e.jsxs("select",{value:w,onChange:X=>P(X.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"All Currencies"}),j.map(X=>e.jsxs("option",{value:X.id,children:[X.code," - ",X.name]},X.id))]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Account Balances"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Current balances for all chart of accounts"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parent Account"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Currency"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"As of Date"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(X=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:X.code}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:X.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:X.type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:X.parent_account_name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium",children:X.balance?D(X.balance,X.currency_symbol):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:X.currency_code||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:X.as_of_date?M(X.as_of_date):"-"})]},X.id))})]})}),!s&&p.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(R,{icon:Ia,className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No account balances found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No account balances have been recorded yet."})]}),s&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading account balances..."})]})]})]}),K=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(R,{icon:df,className:"h-8 w-8 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Debits"}),e.jsx("p",{className:"text-2xl font-semibold text-red-600",children:D(k.totals.total_debits)})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(R,{icon:On,className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Credits"}),e.jsx("p",{className:"text-2xl font-semibold text-green-600",children:D(k.totals.total_credits)})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(R,{icon:Ia,className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Net Amount"}),e.jsx("p",{className:`text-2xl font-semibold ${k.totals.net_amount>=0?"text-green-600":"text-red-600"}`,children:D(k.totals.net_amount)})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transaction Summary"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Summary of all transactions by type"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction Type"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction Count"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.summary.map(X=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${I(X.transaction_type)}`,children:[e.jsx(R,{icon:V(X.transaction_type),className:"mr-1 h-3 w-3"}),X.transaction_type]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium",children:e.jsx("span",{className:I(X.transaction_type),children:D(X.total_amount)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-500",children:X.transaction_count})]},X.transaction_type))})]})}),!s&&k.summary.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(R,{icon:Tn,className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No transaction summary available"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No transactions have been recorded yet."})]}),s&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading transaction summary..."})]})]})]});return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"General Ledger"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View journal entries, account balances, and financial summaries"})]}),i&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("div",{className:"text-sm text-red-600",children:i})}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>r("journal"),className:`py-2 px-1 border-b-2 font-medium text-sm ${a==="journal"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:Tn,className:"mr-2"}),"Journal Entries"]}),e.jsxs("button",{onClick:()=>r("balances"),className:`py-2 px-1 border-b-2 font-medium text-sm ${a==="balances"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:Ia,className:"mr-2"}),"Account Balances"]}),e.jsxs("button",{onClick:()=>r("summary"),className:`py-2 px-1 border-b-2 font-medium text-sm ${a==="summary"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:df,className:"mr-2"}),"Transaction Summary"]})]})}),a==="journal"&&B(),a==="balances"&&W(),a==="summary"&&K()]})},WG=()=>{const{token:t}=ut(),[a,r]=g.useState("2025-01"),[s,n]=g.useState("all"),[i,o]=g.useState(""),[d,u]=g.useState(!1),[m,x]=g.useState(!1),[f,b]=g.useState(null),[p,v]=g.useState([]),[j,N]=g.useState([]),[w,P]=g.useState(!0),[k,$]=g.useState(null),[O,L]=g.useState({bank_account_id:"",reconciliation_date:new Date().toISOString().split("T")[0],bank_balance:"",book_balance:"",description:""}),_=t?{Authorization:`Bearer ${t}`}:{};g.useEffect(()=>{E(),A()},[]);const E=async()=>{try{P(!0);const pe=await ne.get(`${ie}/accounting/bank-reconciliation`,{headers:_});v(pe.data)}catch(pe){console.error("Error loading reconciliations:",pe),$("Failed to load bank reconciliations")}finally{P(!1)}},A=async()=>{try{const pe=await ne.get(`${ie}/accounting/bank-reconciliation/accounts`,{headers:_});N(pe.data)}catch(pe){console.error("Error loading bank accounts:",pe),$("Failed to load bank accounts")}},z=async()=>{try{if(!O.bank_account_id||!O.bank_balance){$("Please fill in required fields");return}const pe=await ne.post(`${ie}/accounting/bank-reconciliation`,O,{headers:_});v([pe.data,...p]),x(!1),L({bank_account_id:"",reconciliation_date:new Date().toISOString().split("T")[0],bank_balance:"",book_balance:"",description:""}),$(null)}catch(pe){console.error("Error creating reconciliation:",pe),$(pe.response?.data?.error||"Failed to create reconciliation")}},M=pe=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(pe),[D,I]=g.useState(""),[V,H]=g.useState(null),[B,W]=g.useState([]),[K,X]=g.useState([]);g.useEffect(()=>{(async()=>{if(!D){H(null),W([]),X([]);return}try{P(!0);const se=await ne.get(`${ie}/accounting/bank-reconciliation/${D}`,{headers:_});H(se.data.reconciliation);const te=(se.data.bank_statements||[]).map(ge=>({id:ge.id,date:ge.transaction_date,description:ge.description,reference:ge.reference,debit:parseFloat(ge.amount)<0?Math.abs(parseFloat(ge.amount)):0,credit:parseFloat(ge.amount)>0?parseFloat(ge.amount):0,balance:null,status:ge.is_reconciled?"reconciled":"unreconciled",reconciled_date:ge.reconciled_at||null}));W(te);const ue=(se.data.book_transactions||[]).map(ge=>({id:ge.id,date:ge.transaction_date||ge.entry_date,description:ge.description,reference:ge.reference,amount:parseFloat(ge.amount||ge.debit||ge.credit||0),type:parseFloat(ge.amount||0)>=0||parseFloat(ge.credit||0)>0?"credit":"debit",status:ge.is_reconciled?"reconciled":"unreconciled"}));X(ue)}catch(se){console.error("Error loading reconciliation details:",se),$("Failed to load reconciliation details")}finally{P(!1)}})()},[D]);const Q=B.filter(pe=>{const se=s==="all"||pe.bank_id===parseInt(s),te=pe.description.toLowerCase().includes(i.toLowerCase())||pe.reference.toLowerCase().includes(i.toLowerCase());return se&&te}),ye=K.filter(pe=>pe.description.toLowerCase().includes(i.toLowerCase())||pe.reference.toLowerCase().includes(i.toLowerCase())),Y=p.filter(pe=>pe.status==="completed").length,J=p.filter(pe=>pe.status==="open").length,U=j.reduce((pe,se)=>pe+parseFloat(se.balance||0),0),ee=pe=>{b(pe),u(!0)},he=()=>{console.log("Reconciling transaction:",f),u(!1),b(null)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-medium text-gray-900",children:"Bank Reconciliation"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Reconcile bank statements with system transactions"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>x(!0),className:"bg-blue-600 text-white px-3 py-1.5 text-xs hover:bg-blue-700 flex items-center space-x-1",children:[e.jsx(R,{icon:Ot,className:"text-xs"}),e.jsx("span",{children:"New Reconciliation"})]}),e.jsxs("button",{onClick:E,className:"bg-gray-600 text-white px-3 py-1.5 text-xs hover:bg-gray-700 flex items-center space-x-1",children:[e.jsx(R,{icon:qC,className:"text-xs"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{className:"bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 flex items-center space-x-1",children:[e.jsx(R,{icon:bn,className:"text-xs"}),e.jsx("span",{children:"Export"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(R,{icon:sn,className:"text-green-600 text-xs"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Reconciled"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:Y})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(R,{icon:Bt,className:"text-yellow-600 text-xs"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Unreconciled"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:J})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(R,{icon:_i,className:"text-blue-600 text-xs"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total Balance"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:M(U)})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(R,{icon:Mn,className:"text-purple-600 text-xs"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Banks"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:j.length})]})]})})]}),e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reconciliation"}),e.jsxs("select",{value:D,onChange:pe=>I(pe.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Reconciliation"}),p.map(pe=>e.jsxs("option",{value:pe.id,children:[pe.reconciliation_date," - ",pe.account_name||pe.bank_account_id," (",pe.status,")"]},pe.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Bank"}),e.jsxs("select",{value:s,onChange:pe=>n(pe.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"all",children:"All Banks"}),j.map(pe=>e.jsx("option",{value:pe.id,children:pe.name},pe.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:aa,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",value:i,onChange:pe=>o(pe.target.value),placeholder:"Search transactions...",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{className:"bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 flex items-center space-x-1",children:[e.jsx(R,{icon:$r,className:"text-xs"}),e.jsx("span",{children:"Filter"})]})})]})}),e.jsxs("div",{className:"bg-white border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Bank Statement Transactions"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Reference"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Debit"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Credit"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Balance"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Q.map(pe=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:pe.date}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:pe.description}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:pe.reference}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:pe.debit>0?`KES ${pe.debit.toLocaleString()}`:"-"}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:pe.credit>0?`KES ${pe.credit.toLocaleString()}`:"-"}),e.jsxs("td",{className:"px-4 py-2 text-xs text-gray-900",children:["KES ",pe.balance.toLocaleString()]}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${pe.status==="reconciled"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:pe.status==="reconciled"?"Reconciled":"Unreconciled"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("div",{className:"flex space-x-1",children:e.jsx("button",{onClick:()=>ee(pe),className:"text-blue-600 hover:text-blue-800 text-xs",children:e.jsx(R,{icon:Ma})})})})]},pe.id))})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"System Transactions"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Reference"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ye.map(pe=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:pe.date}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:pe.description}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:pe.reference}),e.jsxs("td",{className:"px-4 py-2 text-xs text-gray-900",children:["KES ",pe.amount.toLocaleString()]}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${pe.type==="credit"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:pe.type==="credit"?"Credit":"Debit"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${pe.status==="reconciled"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:pe.status==="reconciled"?"Reconciled":"Unreconciled"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("div",{className:"flex space-x-1",children:e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-xs",children:e.jsx(R,{icon:Ma})})})})]},pe.id))})]})})]}),k&&e.jsx("div",{className:"bg-red-50 border border-red-200 p-3 mb-4 text-xs text-red-700",children:k}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"New Bank Reconciliation"}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt,className:"text-xs"})})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Bank Account *"}),e.jsxs("select",{value:O.bank_account_id,onChange:pe=>L({...O,bank_account_id:pe.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Bank Account"}),j.map(pe=>e.jsxs("option",{value:pe.id,children:[pe.name," (",pe.code,")"]},pe.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reconciliation Date *"}),e.jsx("input",{type:"date",value:O.reconciliation_date,onChange:pe=>L({...O,reconciliation_date:pe.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Bank Balance *"}),e.jsx("input",{type:"number",step:"0.01",value:O.bank_balance,onChange:pe=>L({...O,bank_balance:pe.target.value}),placeholder:"0.00",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Book Balance"}),e.jsx("input",{type:"number",step:"0.01",value:O.book_balance,onChange:pe=>L({...O,book_balance:pe.target.value}),placeholder:"0.00",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:O.description,onChange:pe=>L({...O,description:pe.target.value}),placeholder:"Optional description...",rows:2,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>x(!1),className:"px-3 py-1.5 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:z,className:"px-3 py-1.5 bg-blue-600 text-white text-xs hover:bg-blue-700",children:"Create Reconciliation"})]})]})}),d&&f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Reconcile Transaction"}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt,className:"text-xs"})})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("p",{className:"text-xs text-gray-900",children:f.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reference"}),e.jsx("p",{className:"text-xs text-gray-900",children:f.reference})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Amount"}),e.jsx("p",{className:"text-xs text-gray-900",children:f.debit>0?`KES ${f.debit.toLocaleString()}`:f.credit>0?`KES ${f.credit.toLocaleString()}`:"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("p",{className:"text-xs text-gray-900",children:f.date})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>u(!1),className:"px-3 py-1.5 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:he,className:"px-3 py-1.5 bg-gray-900 text-white text-xs hover:bg-gray-800",children:"Reconcile"})]})]})})]})},KG=()=>{const{token:t}=ut(),a=ga(),[r,s]=g.useState(null),[n,i]=g.useState(!1),[o,d]=g.useState(!1),[u,m]=g.useState(!1),[x,f]=g.useState(null),[b,p]=g.useState([]),[v,j]=g.useState(null),[N,w]=g.useState(new Date().getFullYear()),[P,k]=g.useState(new Date().getMonth()+1);g.useEffect(()=>{$()},[]),g.useEffect(()=>{r&&A()},[r]);const $=async()=>{try{const D=await ne.get(`${ie}/accounting/periods`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});p(D.data)}catch(D){console.error("Error fetching periods:",D),f("Failed to fetch periods")}},O=D=>D==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(D),L=()=>{const D=new Date().getFullYear(),I=[];for(let V=D;V>=D-5;V--)I.push(V);return I},_=()=>[{value:1,name:"January"},{value:2,name:"February"},{value:3,name:"March"},{value:4,name:"April"},{value:5,name:"May"},{value:6,name:"June"},{value:7,name:"July"},{value:8,name:"August"},{value:9,name:"September"},{value:10,name:"October"},{value:11,name:"November"},{value:12,name:"December"}],E=async()=>{try{m(!0),f(null);const I=(await ne.get(`${ie}/accounting/periods`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data.find(V=>{const H=new Date(V.start_date);return H.getMonth()+1===P&&H.getFullYear()===N});I?(s(I.id),i(I.status==="closed")):(s(null),j(null),f(`No period found for ${_().find(V=>V.value===P)?.name} ${N}`))}catch(D){console.error("Error fetching period data:",D),f("Failed to fetch period data")}finally{m(!1)}},A=async()=>{if(r)try{m(!0),f(null);const D={Authorization:`Bearer ${t}`,"Content-Type":"application/json"},I=await ne.get(`${ie}/accounting/period-closing/preview/${r}`,{headers:D});j(I.data.data)}catch(D){console.error("Error fetching closing preview:",D),f("Failed to fetch closing preview")}finally{m(!1)}},z=()=>{d(!0)},M=async()=>{try{m(!0);const D=await ne.post(`${ie}/accounting/period-closing/close/${r}`,{closed_by:"admin"},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});i(!0),d(!1),await E(),alert(`Period closed successfully!

Net Income: ${O(D.data.data.net_income)}
Revenue Accounts Closed: ${D.data.data.revenue_accounts_closed}
Expense Accounts Closed: ${D.data.data.expense_accounts_closed}`)}catch(D){console.error("Error closing period:",D),alert(D.response?.data?.error||D.response?.data?.details||"Failed to close period")}finally{m(!1)}};return e.jsxs("div",{className:"p-4 md:p-6 space-y-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Period Management"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Close accounting periods and manage financial period transitions"})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:()=>a("/dashboard/reports/income-statement"),className:"bg-blue-600 text-white px-3 py-1.5 text-xs hover:bg-blue-700 flex items-center space-x-1",children:[e.jsx(R,{icon:_o}),e.jsx("span",{children:"View Financial Reports"})]})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[e.jsx(R,{icon:ua,className:"mr-1"}),"Year"]}),e.jsx("select",{value:N,onChange:D=>w(parseInt(D.target.value)),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",children:L().map(D=>e.jsx("option",{value:D,children:D},D))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Month"}),e.jsx("select",{value:P,onChange:D=>k(parseInt(D.target.value)),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",children:_().map(D=>e.jsx("option",{value:D.value,children:D.name},D.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Period Status"}),e.jsx("div",{className:"text-xs text-gray-900 py-1.5 px-2 border border-gray-300 bg-gray-50",children:v?.period?.status?.toUpperCase()||"NOT SELECTED"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:E,className:"w-full bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800",children:[e.jsx(R,{icon:Ma,className:"mr-1"}),"Load Period"]})})]})}),x&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2",children:[e.jsx(R,{icon:la,className:"mr-2 text-xs"}),e.jsx("span",{className:"text-xs",children:x})]}),v&&e.jsxs("div",{className:"bg-white border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Closing Preview - ",v.period?.period_name]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:v.is_closed?"Period is already closed":"Preview of what will happen when period is closed"})]}),!v.is_closed&&e.jsxs("button",{onClick:z,disabled:u,className:"bg-red-600 text-white px-3 py-1.5 text-xs hover:bg-red-700 disabled:opacity-50",children:[e.jsx(R,{icon:wN,className:"mr-1"}),"Close Period"]})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 border border-gray-200",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-900 mb-2",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Revenue:"}),e.jsx("span",{className:"ml-2 font-medium text-green-600",children:O(v.summary?.total_revenue||0)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Expenses:"}),e.jsx("span",{className:"ml-2 font-medium text-red-600",children:O(v.summary?.total_expenses||0)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Net Income:"}),e.jsx("span",{className:"ml-2 font-medium text-blue-600",children:O(v.summary?.net_income||0)})]})]})]}),v.revenue_accounts&&v.revenue_accounts.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-xs font-semibold text-gray-900 mb-2",children:["Revenue Accounts to Close (",v.summary?.revenue_accounts_count||0,")"]}),e.jsx("div",{className:"space-y-1",children:v.revenue_accounts.map((D,I)=>e.jsxs("div",{className:"flex justify-between text-xs py-1 px-2 bg-green-50",children:[e.jsxs("span",{className:"text-gray-700",children:[D.code," - ",D.name]}),e.jsx("span",{className:"text-green-600 font-medium",children:O(D.balance)})]},I))})]}),v.expense_accounts&&v.expense_accounts.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-xs font-semibold text-gray-900 mb-2",children:["Expense Accounts to Close (",v.summary?.expense_accounts_count||0,")"]}),e.jsx("div",{className:"space-y-1",children:v.expense_accounts.map((D,I)=>e.jsxs("div",{className:"flex justify-between text-xs py-1 px-2 bg-red-50",children:[e.jsxs("span",{className:"text-gray-700",children:[D.code," - ",D.name]}),e.jsx("span",{className:"text-red-600 font-medium",children:O(D.balance)})]},I))})]}),(!v.revenue_accounts||v.revenue_accounts.length===0)&&(!v.expense_accounts||v.expense_accounts.length===0)&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"No transactions found for this period"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"This period has no activity yet. You can still close it to create opening balances for the next period."})]})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Close Period"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt,className:"text-xs"})})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:["Are you sure you want to close the period ",e.jsx("strong",{children:v?.period?.period_name}),"?"]}),e.jsx("p",{className:"text-xs text-gray-600",children:"This action will:"}),e.jsxs("ul",{className:"text-xs text-gray-600 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Close all revenue accounts to Income Summary"}),e.jsx("li",{children:"Close all expense accounts to Income Summary"}),e.jsx("li",{children:"Transfer Net Income to Retained Earnings"}),e.jsx("li",{children:"Lock the period for further transactions"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-3 py-1.5 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:M,disabled:u,className:"px-3 py-1.5 bg-red-600 text-white text-xs hover:bg-red-700 disabled:opacity-50",children:u?"Closing...":"Close Period"})]})]})})]})},XG=()=>{const{token:t}=ut(),[a,r]=g.useState([]),[s,n]=g.useState(!1),[i,o]=g.useState(null),[d,u]=g.useState(null),[m,x]=g.useState(!1),[f,b]=g.useState(!1),[p,v]=g.useState(!1),[j,N]=g.useState(!1),[w,P]=g.useState({period_name:"",period_type:"monthly",start_date:"",end_date:""}),[k,$]=g.useState(null),[O,L]=g.useState(null),[_,E]=g.useState(new Date().getFullYear());g.useEffect(()=>{A()},[]);const A=async()=>{try{n(!0);const K=await ne.get(`${ie}/accounting/periods`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});r(K.data)}catch(K){console.error("Error fetching periods:",K),o("Failed to fetch periods")}finally{n(!1)}},z=async K=>{K.preventDefault();try{n(!0),await ne.post(`${ie}/accounting/periods`,w,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),u("Period created successfully"),x(!1),P({period_name:"",period_type:"monthly",start_date:"",end_date:""}),A()}catch(X){console.error("Error creating period:",X),o(X.response?.data?.error||"Failed to create period")}finally{n(!1)}},M=async K=>{K.preventDefault();try{n(!0),await ne.put(`${ie}/accounting/periods/${k.id}`,w,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),u("Period updated successfully"),b(!1),$(null),A()}catch(X){console.error("Error updating period:",X),o(X.response?.data?.error||"Failed to update period")}finally{n(!1)}},D=async()=>{try{n(!0),await ne.delete(`${ie}/accounting/periods/${O.id}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),u("Period deleted successfully"),v(!1),L(null),A()}catch(K){console.error("Error deleting period:",K),o(K.response?.data?.error||"Failed to delete period")}finally{n(!1)}},I=async()=>{try{n(!0);const K=await ne.post(`${ie}/accounting/periods/generate-yearly`,{year:_},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});u(K.data.message),N(!1),A()}catch(K){console.error("Error generating periods:",K),o(K.response?.data?.error||"Failed to generate periods")}finally{n(!1)}},V=K=>{$(K),P({period_name:K.period_name,period_type:K.period_type,start_date:K.start_date.split("T")[0],end_date:K.end_date.split("T")[0]}),b(!0)},H=K=>{L(K),v(!0)},B=K=>new Date(K).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),W=K=>K==="closed"?e.jsxs("span",{className:"px-2 py-0.5 text-xs bg-red-100 text-red-700 border border-red-200",children:[e.jsx(R,{icon:wN,className:"mr-1"}),"Closed"]}):e.jsxs("span",{className:"px-2 py-0.5 text-xs bg-green-100 text-green-700 border border-green-200",children:[e.jsx(R,{icon:aB,className:"mr-1"}),"Open"]});return e.jsxs("div",{className:"p-4 md:p-6 space-y-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Accounting Periods"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Manage accounting periods for financial reporting"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>N(!0),className:"bg-blue-600 text-white px-3 py-1.5 text-xs hover:bg-blue-700 flex items-center space-x-1",children:[e.jsx(R,{icon:ua}),e.jsx("span",{children:"Generate Year"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 flex items-center space-x-1",children:[e.jsx(R,{icon:Ot}),e.jsx("span",{children:"Add Period"})]})]})]})}),d&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-3 py-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:sn,className:"mr-2 text-xs"}),e.jsx("span",{className:"text-xs",children:d})]}),e.jsx("button",{onClick:()=>u(null),className:"text-green-700 hover:text-green-900",children:e.jsx(R,{icon:Bt,className:"text-xs"})})]}),i&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:la,className:"mr-2 text-xs"}),e.jsx("span",{className:"text-xs",children:i})]}),e.jsx("button",{onClick:()=>o(null),className:"text-red-700 hover:text-red-900",children:e.jsx(R,{icon:Bt,className:"text-xs"})})]}),e.jsx("div",{className:"bg-white border border-gray-200",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Period Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Start Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"End Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s&&a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-xs text-gray-500",children:"Loading periods..."})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-xs text-gray-500",children:'No accounting periods found. Click "Generate Year" to create periods for a year.'})}):a.map(K=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:K.period_name}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900 capitalize",children:K.period_type}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:B(K.start_date)}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:B(K.end_date)}),e.jsx("td",{className:"px-4 py-2 text-xs",children:W(K.status)}),e.jsx("td",{className:"px-4 py-2 text-xs",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>V(K),className:"text-blue-600 hover:text-blue-800",title:"Edit Period",children:e.jsx(R,{icon:ha})}),e.jsx("button",{onClick:()=>H(K),className:"text-red-600 hover:text-red-800",title:"Delete Period",disabled:K.status==="closed",children:e.jsx(R,{icon:Yt})})]})})]},K.id))})]})})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Add Accounting Period"}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt,className:"text-xs"})})]}),e.jsxs("form",{onSubmit:z,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Period Name"}),e.jsx("input",{type:"text",value:w.period_name,onChange:K=>P({...w,period_name:K.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",placeholder:"e.g., January 2025",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Period Type"}),e.jsxs("select",{value:w.period_type,onChange:K=>P({...w,period_type:K.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:w.start_date,onChange:K=>P({...w,start_date:K.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:w.end_date,onChange:K=>P({...w,end_date:K.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-3 py-1.5 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s,className:"px-3 py-1.5 bg-gray-900 text-white text-xs hover:bg-gray-800 disabled:opacity-50",children:s?"Creating...":"Create Period"})]})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Edit Accounting Period"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt,className:"text-xs"})})]}),e.jsxs("form",{onSubmit:M,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Period Name"}),e.jsx("input",{type:"text",value:w.period_name,onChange:K=>P({...w,period_name:K.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Period Type"}),e.jsxs("select",{value:w.period_type,onChange:K=>P({...w,period_type:K.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:w.start_date,onChange:K=>P({...w,start_date:K.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:w.end_date,onChange:K=>P({...w,end_date:K.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-3 py-1.5 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s,className:"px-3 py-1.5 bg-gray-900 text-white text-xs hover:bg-gray-800 disabled:opacity-50",children:s?"Updating...":"Update Period"})]})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Delete Period"}),e.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt,className:"text-xs"})})]}),e.jsxs("p",{className:"text-xs text-gray-600 mb-4",children:["Are you sure you want to delete the period ",e.jsx("strong",{children:O?.period_name}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-3 py-1.5 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:D,disabled:s,className:"px-3 py-1.5 bg-red-600 text-white text-xs hover:bg-red-700 disabled:opacity-50",children:s?"Deleting...":"Delete"})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Generate Yearly Periods"}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt,className:"text-xs"})})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"This will create 12 monthly periods for the selected year. Existing periods will not be duplicated."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Year"}),e.jsx("input",{type:"number",value:_,onChange:K=>E(parseInt(K.target.value)),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",min:"2020",max:"2050"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>N(!1),className:"px-3 py-1.5 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:I,disabled:s,className:"px-3 py-1.5 bg-blue-600 text-white text-xs hover:bg-blue-700 disabled:opacity-50",children:s?"Generating...":"Generate Periods"})]})]})})]})},JG=()=>{const{token:t}=ut(),[a,r]=g.useState(new Date().getMonth()+1),[s,n]=g.useState(new Date().getFullYear()),[i,o]=g.useState("monthly"),[d,u]=g.useState(1),[m,x]=g.useState(""),[f,b]=g.useState(""),[p,v]=g.useState(!1),[j,N]=g.useState(null),[w,P]=g.useState(""),[k,$]=g.useState(null),[O,L]=g.useState([]),[_,E]=g.useState(!1),[A,z]=g.useState(!1),[M,D]=g.useState(!1),[I,V]=g.useState(""),[H,B]=g.useState(""),[W,K]=g.useState(""),[X,Q]=g.useState([]),[ye,Y]=g.useState(!1),[J,U]=g.useState([]),[ee,he]=g.useState(null),[pe,se]=g.useState(!1);g.useEffect(()=>{ge()},[]);const te=t?{Authorization:`Bearer ${t}`}:{},ue=()=>{i==="monthly"?ce():i==="quarterly"?De():i==="ytd"?ke():i==="custom"&&re()},ge=async()=>{try{const Re=await ne.get(`${ie}/accounting/income-statement/periods`,{headers:te});L(Re.data)}catch(Re){console.error("Error fetching periods:",Re)}},ce=async()=>{v(!0),N(null),$(null);try{const Re=await ne.get(`${ie}/accounting/income-statement/month/${a}/year/${s}`,{headers:te});$(Re.data)}catch(Re){console.error("Error fetching income statement:",Re),N("Failed to load income statement data"),$(null)}finally{v(!1)}},De=async()=>{v(!0),N(null),$(null);try{const Re=await ne.get(`${ie}/accounting/income-statement/year/${s}/quarter/${d}`,{headers:te});$(Re.data)}catch(Re){console.error("Error fetching quarterly income statement:",Re),N("Failed to load quarterly income statement data"),$(null)}finally{v(!1)}},ke=async()=>{v(!0),N(null),$(null);try{const Re=await ne.get(`${ie}/accounting/income-statement/year/${s}/ytd`,{headers:te});$(Re.data)}catch(Re){console.error("Error fetching year-to-date income statement:",Re),N("Failed to load year-to-date income statement data"),$(null)}finally{v(!1)}},re=async()=>{v(!0),N(null),$(null);try{if(!m||!f)throw new Error("Please select start and end dates");const Re=new URLSearchParams({start:m,end:f}).toString(),bt=await ne.get(`${ie}/accounting/income-statement/range?${Re}`,{headers:te});$(bt.data)}catch(Re){console.error("Error fetching custom range income statement:",Re),N(Re.response?.data?.error||"Failed to load custom range income statement"),$(null)}finally{v(!1)}},Ee=Re=>Re?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Re):"$0.00",Se=async()=>{if(!k){N("Please generate an income statement first");return}E(!0);let Re="";i==="monthly"?Re=`Income Statement - ${new Date(s,a-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}`:i==="quarterly"?Re=`Income Statement - Q${d} ${s}`:i==="ytd"?Re=`Income Statement - ${s} YTD`:Re=`Income Statement - ${m} to ${f}`,V(Re)},Ge=async()=>{if(!I.trim()){N("Please enter a report name");return}try{v(!0),await ne.post(`${ie}/accounting/saved-reports`,{report_type:"income_statement",report_name:I,report_description:H,period_start_date:i==="custom"?m:null,period_end_date:i==="custom"?f:null,report_data:k,report_summary:{total_revenue:k.totals?.total_revenue,total_expenses:k.totals?.total_expenses,net_income:k.totals?.net_income},tags:W},{headers:te}),P("Report saved successfully!"),E(!1),V(""),B(""),K(""),setTimeout(()=>P(""),3e3)}catch(Re){console.error("Error saving report:",Re),N(Re.response?.data?.error||"Failed to save report")}finally{v(!1)}},ve=async()=>{Y(!0),N(null);try{const Re=await ne.get(`${ie}/accounting/saved-reports`,{params:{report_type:"income_statement"},headers:te});Q(Re.data.data.reports),z(!0)}catch(Re){console.error("Error loading saved reports:",Re),N(Re.response?.data?.error||"Failed to load saved reports")}finally{Y(!1)}},Me=async Re=>{try{v(!0);const Nt=(await ne.get(`${ie}/accounting/saved-reports/${Re}`,{headers:te})).data.data;$(Nt.report_data),z(!1),se(!1),P(`Loaded: ${Nt.report_name}`),setTimeout(()=>P(""),3e3)}catch(bt){console.error("Error loading report:",bt),N("Failed to load report")}finally{v(!1)}},et=async()=>{Y(!0),N(null);try{const Re=await ne.get(`${ie}/accounting/saved-reports`,{params:{report_type:"income_statement"},headers:te});Q(Re.data.data.reports),U([]),D(!0)}catch(Re){console.error("Error loading saved reports:",Re),N(Re.response?.data?.error||"Failed to load saved reports")}finally{Y(!1)}},Ie=Re=>{U(bt=>bt.includes(Re)?bt.filter(Nt=>Nt!==Re):bt.length>=5?(N("You can only compare up to 5 reports at once"),setTimeout(()=>N(null),3e3),bt):[...bt,Re])},tt=async()=>{if(J.length<2){N("Please select at least 2 reports to compare");return}try{v(!0),N(null);const Re=J.map(pt=>ne.get(`${ie}/accounting/saved-reports/${pt}`,{headers:te})),Nt=(await Promise.all(Re)).map(pt=>pt.data.data),Ut=new Map,Mt=new Map;Nt.forEach((pt,_e)=>{pt.report_data.revenue.forEach(Oe=>{Ut.has(Oe.account_code)||Ut.set(Oe.account_code,{account_code:Oe.account_code,account_name:Oe.account_name,amounts:[]}),Ut.get(Oe.account_code).amounts[_e]=Oe.amount||0}),pt.report_data.expenses.forEach(Oe=>{Mt.has(Oe.account_code)||Mt.set(Oe.account_code,{account_code:Oe.account_code,account_name:Oe.account_name,amounts:[]}),Mt.get(Oe.account_code).amounts[_e]=Oe.amount||0})}),Ut.forEach(pt=>{for(let _e=0;_e<Nt.length;_e++)pt.amounts[_e]||(pt.amounts[_e]=0)}),Mt.forEach(pt=>{for(let _e=0;_e<Nt.length;_e++)pt.amounts[_e]||(pt.amounts[_e]=0)}),he({reports:Nt.map(pt=>({id:pt.id,name:pt.report_name,date:pt.period_start_date||"N/A",totals:pt.report_data.totals})),revenue:Array.from(Ut.values()),expenses:Array.from(Mt.values())}),D(!1),se(!0),P(`Comparing ${Nt.length} income statements`),setTimeout(()=>P(""),3e3)}catch(Re){console.error("Error comparing reports:",Re),N("Failed to load reports for comparison")}finally{v(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-2 md:px-4 lg:px-6 py-3 md:py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg md:text-xl font-semibold text-gray-900",children:"Income Statement"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Profit & Loss Report"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-wrap gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:Se,disabled:!k,className:"bg-blue-600 text-white px-2 md:px-3 py-1.5 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-1 md:space-x-2 text-xs font-medium justify-center",children:[e.jsx(R,{icon:Er}),e.jsx("span",{children:"Save"})]}),e.jsxs("button",{onClick:ve,disabled:ye,className:"bg-purple-600 text-white px-2 md:px-3 py-1.5 hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-1 md:space-x-2 text-xs font-medium justify-center",children:[e.jsx(R,{icon:$d}),e.jsx("span",{children:"Load"})]}),e.jsxs("button",{onClick:et,disabled:ye,className:"bg-orange-600 text-white px-2 md:px-3 py-1.5 hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-1 md:space-x-2 text-xs font-medium justify-center",children:[e.jsx(R,{icon:Xn}),e.jsx("span",{children:"Compare"})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-2 md:px-4 lg:px-6 py-3",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 md:gap-4 lg:gap-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 md:gap-3 flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:$r,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Report Type:"}),e.jsxs("select",{value:i,onChange:Re=>o(Re.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"ytd",children:"Year-to-Date"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),i==="monthly"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:ua,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Month:"}),e.jsxs("select",{value:a,onChange:Re=>r(parseInt(Re.target.value)),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:1,children:"January"}),e.jsx("option",{value:2,children:"February"}),e.jsx("option",{value:3,children:"March"}),e.jsx("option",{value:4,children:"April"}),e.jsx("option",{value:5,children:"May"}),e.jsx("option",{value:6,children:"June"}),e.jsx("option",{value:7,children:"July"}),e.jsx("option",{value:8,children:"August"}),e.jsx("option",{value:9,children:"September"}),e.jsx("option",{value:10,children:"October"}),e.jsx("option",{value:11,children:"November"}),e.jsx("option",{value:12,children:"December"})]})]}),i==="quarterly"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:ua,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Quarter:"}),e.jsxs("select",{value:d,onChange:Re=>u(parseInt(Re.target.value)),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:1,children:"Q1 (Jan - Mar)"}),e.jsx("option",{value:2,children:"Q2 (Apr - Jun)"}),e.jsx("option",{value:3,children:"Q3 (Jul - Sep)"}),e.jsx("option",{value:4,children:"Q4 (Oct - Dec)"})]})]}),i!=="custom"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:ua,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Year:"}),e.jsxs("select",{value:s,onChange:Re=>n(parseInt(Re.target.value)),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:2025,children:"2025"}),e.jsx("option",{value:2024,children:"2024"}),e.jsx("option",{value:2023,children:"2023"})]})]}),i==="custom"&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:ua,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Start:"}),e.jsx("input",{type:"date",value:m,onChange:Re=>x(Re.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"End:"}),e.jsx("input",{type:"date",value:f,onChange:Re=>b(Re.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto"})]})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("button",{onClick:ue,disabled:p,className:"bg-gray-900 text-white px-3 md:px-4 py-1.5 hover:bg-gray-800 disabled:opacity-50 flex items-center space-x-2 text-xs font-medium w-full sm:w-auto justify-center",children:[e.jsx(R,{icon:$r}),e.jsx("span",{children:p?"Loading...":"Search"})]})})]})})}),e.jsxs("div",{className:"p-2 md:p-4 lg:p-6",children:[p&&e.jsxs("div",{className:"flex items-center justify-center py-6 md:py-8",children:[e.jsx(R,{icon:Yr,className:"text-blue-500 text-xl md:text-2xl animate-spin mr-2"}),e.jsx("span",{className:"text-gray-600 text-xs md:text-sm",children:"Loading income statement..."})]}),j&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 md:p-4 mb-4 md:mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:la,className:"text-red-400 mr-2 text-xs"}),e.jsx("span",{className:"text-red-800 text-xs md:text-sm",children:j})]})}),w&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-3 md:p-4 mb-4 md:mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:Ra,className:"text-green-400 mr-2 text-xs"}),e.jsx("span",{className:"text-green-800 text-xs md:text-sm",children:w})]})}),pe&&ee&&!p&&e.jsxs("div",{className:"bg-white border border-gray-200 mb-6",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Income Statement Comparison (",ee.reports.length," Reports)"]}),e.jsxs("button",{onClick:()=>se(!1),className:"text-xs px-3 py-1 text-gray-600 hover:text-gray-900 border border-gray-300 hover:bg-gray-50",children:[e.jsx(R,{icon:Bt,className:"mr-1"}),"Close Comparison"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-xs",children:[e.jsx("thead",{className:"bg-gray-50 border-b-2 border-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 border-r border-gray-300 w-24",children:"Code"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 border-r border-gray-300",children:"Account Name"}),ee.reports.map((Re,bt)=>e.jsxs("th",{className:"px-4 py-3 text-right font-semibold text-gray-700 border-l border-gray-300 bg-gray-100 min-w-[140px]",children:[e.jsx("div",{className:"font-bold text-sm",children:Re.name}),e.jsx("div",{className:"text-xs font-normal text-gray-600 mt-1",children:Re.date!=="N/A"?new Date(Re.date).toLocaleDateString():Re.date})]},bt))]})}),e.jsxs("tbody",{className:"bg-white",children:[e.jsx("tr",{className:"bg-gray-100",children:e.jsx("td",{colSpan:2+ee.reports.length,className:"px-3 py-2 font-bold text-gray-900 text-sm border-t border-b border-gray-300",children:"Revenue"})}),ee.revenue.map((Re,bt)=>e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-gray-700 border-r border-gray-200",children:Re.account_code}),e.jsx("td",{className:"px-3 py-2 text-gray-700 border-r border-gray-200",children:Re.account_name}),Re.amounts.map((Nt,Ut)=>e.jsx("td",{className:"px-4 py-2 text-right tabular-nums border-l border-gray-200 text-gray-900",children:Ee(Nt)},Ut))]},bt)),e.jsxs("tr",{className:"bg-gray-50 font-semibold border-t border-gray-300",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-2.5 text-gray-900 border-r border-gray-300",children:"Total Revenue"}),ee.reports.map((Re,bt)=>e.jsx("td",{className:"px-4 py-2.5 text-right tabular-nums border-l border-gray-300 text-gray-900",children:Ee(Re.totals.total_revenue)},bt))]}),e.jsx("tr",{className:"bg-gray-100",children:e.jsx("td",{colSpan:2+ee.reports.length,className:"px-3 py-2 font-bold text-gray-900 text-sm border-t-2 border-b border-gray-300",children:"Expenses"})}),ee.expenses.map((Re,bt)=>e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-gray-700 border-r border-gray-200",children:Re.account_code}),e.jsx("td",{className:"px-3 py-2 text-gray-700 border-r border-gray-200",children:Re.account_name}),Re.amounts.map((Nt,Ut)=>e.jsx("td",{className:"px-4 py-2 text-right tabular-nums border-l border-gray-200 text-red-600",children:Ee(Nt)},Ut))]},bt)),e.jsxs("tr",{className:"bg-gray-50 font-semibold border-t border-gray-300",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-2.5 text-gray-900 border-r border-gray-300",children:"Total Expenses"}),ee.reports.map((Re,bt)=>e.jsx("td",{className:"px-4 py-2.5 text-right tabular-nums border-l border-gray-300 text-red-600",children:Ee(Re.totals.total_expenses)},bt))]}),e.jsxs("tr",{className:"bg-gray-100 font-bold border-t-2 border-gray-400",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-3 text-gray-900 text-sm border-r border-gray-300",children:"Net Income"}),ee.reports.map((Re,bt)=>e.jsx("td",{className:`px-4 py-3 text-right tabular-nums text-sm border-l border-gray-300 ${Re.totals.net_income>=0?"text-gray-900":"text-red-600"}`,children:Ee(Re.totals.net_income)},bt))]})]})]})})]}),!p&&!j&&k&&!pe&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4 mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-3 md:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-sm md:text-lg font-semibold text-gray-900",children:Ee(k.totals?.total_revenue)})]}),e.jsx("div",{className:"bg-gray-100 p-2",children:e.jsx(R,{icon:uf,className:"text-gray-600 text-xs md:text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-3 md:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Expenses"}),e.jsx("p",{className:"text-sm md:text-lg font-semibold text-red-600",children:Ee(k.totals?.total_expenses)})]}),e.jsx("div",{className:"bg-red-100 p-2",children:e.jsx(R,{icon:xf,className:"text-red-600 text-xs md:text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-3 md:p-4 sm:col-span-2 lg:col-span-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Net Income"}),e.jsx("p",{className:`text-sm md:text-lg font-semibold ${(k.totals?.net_income||0)>=0?"text-gray-900":"text-red-600"}`,children:Ee(k.totals?.net_income)})]}),e.jsx("div",{className:`p-2 ${(k.totals?.net_income||0)>=0?"bg-gray-100":"bg-red-100"}`,children:e.jsx(R,{icon:(k.totals?.net_income||0)>=0?uf:xf,className:`text-xs md:text-sm ${(k.totals?.net_income||0)>=0?"text-gray-600":"text-red-600"}`})})]})})]}),!p&&!j&&k&&!pe&&e.jsxs("div",{className:"bg-white border border-gray-200",children:[e.jsxs("div",{className:"px-3 md:px-6 py-3 border-b border-gray-200",children:[e.jsx("h2",{className:"text-sm md:text-base font-semibold text-gray-900",children:"Income Statement"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[i==="monthly"&&`${new Date(s,a-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}`,i==="quarterly"&&`Q${d} ${s}`,i==="ytd"&&`${s} Year-to-Date`,i==="custom"&&`${m||"Start"} to ${f||"End"}`]})]}),e.jsxs("div",{className:"p-3 md:p-6",children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h3",{className:"text-xs md:text-sm font-semibold text-gray-900 mb-2 md:mb-3",children:"Revenue"}),e.jsx("div",{className:"space-y-0",children:k.revenue&&k.revenue.length>0?e.jsxs(e.Fragment,{children:[k.revenue.map((Re,bt)=>e.jsxs("div",{className:`flex justify-between items-center py-1.5 px-2 ${bt%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-xs text-gray-700 block truncate",children:Re.account_name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",Re.account_code,")"]})]}),e.jsx("div",{className:"text-right flex-shrink-0 ml-2",children:e.jsx("span",{className:`text-xs font-medium ${parseFloat(Re.amount||0)>0?"text-gray-900":"text-gray-400"}`,children:Ee(Re.amount)})})]},bt)),e.jsxs("div",{className:"flex justify-between items-center py-2 px-2 border-t border-gray-200 bg-gray-100",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"Total Revenue"}),e.jsx("span",{className:"text-xs font-bold text-gray-900",children:Ee(k.totals?.total_revenue)})]})]}):e.jsx("div",{className:"text-center py-4 text-gray-500 text-xs",children:"No revenue accounts configured"})})]}),e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h3",{className:"text-xs md:text-sm font-semibold text-gray-900 mb-2 md:mb-3",children:"Expenses"}),e.jsx("div",{className:"space-y-0",children:k.expenses&&k.expenses.length>0?e.jsxs(e.Fragment,{children:[k.expenses.map((Re,bt)=>e.jsxs("div",{className:`flex justify-between items-center py-1.5 px-2 ${bt%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-xs text-gray-700 block truncate",children:Re.account_name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",Re.account_code,")"]})]}),e.jsx("div",{className:"text-right flex-shrink-0 ml-2",children:e.jsx("span",{className:`text-xs font-medium ${parseFloat(Re.amount||0)>0?"text-red-600":"text-gray-400"}`,children:Ee(Re.amount)})})]},bt)),e.jsxs("div",{className:"flex justify-between items-center py-2 px-2 border-t border-gray-200 bg-gray-100",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"Total Expenses"}),e.jsx("span",{className:"text-xs font-bold text-red-600",children:Ee(k.totals?.total_expenses)})]})]}):e.jsx("div",{className:"text-center py-4 text-gray-500 text-xs",children:"No expense accounts configured"})})]}),e.jsxs("div",{className:"border-t border-gray-300 pt-3 md:pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 md:py-3 px-2 md:px-3 bg-gray-100 border-b border-gray-300",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"Net Income"}),e.jsx("span",{className:`text-xs font-bold ${(k.totals?.net_income||0)>=0?"text-gray-900":"text-red-600"}`,children:Ee(k.totals?.net_income)})]}),e.jsx("div",{className:"border-b-2 border-gray-500"})]})]})]}),!p&&!j&&!k&&!pe&&e.jsxs("div",{className:"bg-white border border-gray-200 p-6 md:p-8 text-center",children:[e.jsx(R,{icon:_o,className:"text-gray-400 text-3xl md:text-4xl mb-3 md:mb-4"}),e.jsx("h3",{className:"text-base md:text-lg font-medium text-gray-900 mb-2",children:"No Income Statement Data"}),e.jsx("p",{className:"text-gray-500 text-xs md:text-sm",children:"Select a period to view the income statement data."})]})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Save Income Statement"}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Report Name *"}),e.jsx("input",{type:"text",value:I,onChange:Re=>V(Re.target.value),placeholder:"e.g., Income Statement - October 2024",className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{value:H,onChange:Re=>B(Re.target.value),placeholder:"Add any notes or description...",rows:3,className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tags (Optional)"}),e.jsx("input",{type:"text",value:W,onChange:Re=>K(Re.target.value),placeholder:"e.g., monthly, approved, october",className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate tags with commas"})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>E(!1),className:"flex-1 px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:Ge,disabled:p||!I.trim(),className:"flex-1 px-4 py-2 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400",children:[e.jsx(R,{icon:Er,className:"mr-1"}),"Save Report"]})]})]})]})}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Load Saved Income Statement"}),e.jsx("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt})})]}),X.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:$d,className:"text-4xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No saved income statements found"})]}):e.jsx("div",{className:"space-y-2",children:X.map(Re=>e.jsx("div",{className:"border border-gray-200 p-3 hover:bg-gray-50 cursor-pointer",onClick:()=>Me(Re.id),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:Re.report_name}),Re.report_description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:Re.report_description}),e.jsxs("div",{className:"flex gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Saved: ",new Date(Re.saved_at).toLocaleDateString()]}),Re.report_summary&&e.jsxs("span",{className:Re.report_summary.net_income>=0?"text-green-600":"text-red-600",children:["Net Income: ",Ee(Re.report_summary.net_income)]})]}),Re.tags&&e.jsx("div",{className:"mt-2",children:Re.tags.split(",").map((bt,Nt)=>e.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 text-xs px-2 py-0.5 mr-1",children:bt.trim()},Nt))})]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-xs font-medium ml-4",children:"Load "})]})},Re.id))}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>z(!1),className:"w-full px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Close"})})]})}),M&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Compare Income Statements"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Select 2-5 reports to compare (",J.length," selected)"]})]}),e.jsx("button",{onClick:()=>D(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt})})]}),X.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:Xn,className:"text-4xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No saved income statements found"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto mb-4",children:X.map(Re=>e.jsx("div",{className:`border p-3 cursor-pointer transition-all ${J.includes(Re.id)?"border-orange-500 bg-orange-50":"border-gray-200 hover:bg-gray-50"}`,onClick:()=>Ie(Re.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"checkbox",checked:J.includes(Re.id),onChange:()=>{},className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:Re.report_name}),Re.report_description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:Re.report_description}),e.jsxs("div",{className:"flex gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Saved: ",new Date(Re.saved_at).toLocaleDateString()]}),Re.report_summary&&e.jsxs("span",{className:Re.report_summary.net_income>=0?"text-green-600":"text-red-600",children:["Net Income: ",Ee(Re.report_summary.net_income)]})]})]})]})},Re.id))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>D(!1),className:"flex-1 px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:tt,disabled:J.length<2,className:"flex-1 px-4 py-2 text-xs font-medium text-white bg-orange-600 hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(R,{icon:Xn,className:"mr-1"}),"Compare ",J.length," Reports"]})]})]})]})})]})},ZG=()=>{const{token:t}=ut(),[a,r]=g.useState("monthly"),[s,n]=g.useState(new Date().getMonth()+1),[i,o]=g.useState(new Date().getFullYear()),[d,u]=g.useState(""),[m,x]=g.useState(!1),[f,b]=g.useState(null),[p,v]=g.useState(""),[j,N]=g.useState(null),[w,P]=g.useState(!1),[k,$]=g.useState(!1),[O,L]=g.useState(!1),[_,E]=g.useState(""),[A,z]=g.useState(""),[M,D]=g.useState(""),[I,V]=g.useState([]),[H,B]=g.useState(!1),[W,K]=g.useState([]),[X,Q]=g.useState(null),[ye,Y]=g.useState(!1),J=t?{Authorization:`Bearer ${t}`}:{},U=re=>{if(re==null)return"$0.00";const Ee=Math.abs(re),Se=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Ee);return re<0?`(${Se})`:Se},ee=async()=>{try{if(x(!0),b(null),N(null),a==="monthly"){const re=await ne.get(`${ie}/accounting/balance-sheet/month/${s}/year/${i}`,{headers:J});N(re.data)}else if(a==="custom"){if(!d){b("Please select an as-of end date"),x(!1);return}const re=new URLSearchParams({end:d}).toString(),Ee=await ne.get(`${ie}/accounting/balance-sheet/range?${re}`,{headers:J});N(Ee.data)}}catch(re){console.error("Error loading balance sheet:",re),b(re.response?.data?.error||"Failed to load balance sheet")}finally{x(!1)}},he=j?.totals||{total_assets:0,total_liabilities:0,total_equity:0},pe=(he.total_liabilities||0)+(he.total_equity||0),se=async()=>{if(!j){b("Please generate a balance sheet first");return}P(!0);let re="";a==="monthly"?re=`Balance Sheet - ${new Date(i,s-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}`:re=`Balance Sheet - As of ${d}`,E(re)},te=async()=>{if(!_.trim()){b("Please enter a report name");return}try{x(!0),await ne.post(`${ie}/accounting/saved-reports`,{report_type:"balance_sheet",report_name:_,report_description:A,period_start_date:a==="custom"?d:null,period_end_date:a==="custom"?d:null,report_data:j,report_summary:{total_assets:he.total_assets,total_liabilities:he.total_liabilities,total_equity:he.total_equity,is_balanced:Math.abs((he.total_assets||0)-pe)<.01},tags:M},{headers:J}),v("Report saved successfully!"),P(!1),E(""),z(""),D(""),setTimeout(()=>v(""),3e3)}catch(re){console.error("Error saving report:",re),b(re.response?.data?.error||"Failed to save report")}finally{x(!1)}},ue=async()=>{B(!0),b(null);try{const re=await ne.get(`${ie}/accounting/saved-reports`,{params:{report_type:"balance_sheet"},headers:J});V(re.data.data.reports),$(!0)}catch(re){console.error("Error loading saved reports:",re),b(re.response?.data?.error||"Failed to load saved reports")}finally{B(!1)}},ge=async re=>{try{x(!0);const Se=(await ne.get(`${ie}/accounting/saved-reports/${re}`,{headers:J})).data.data;N(Se.report_data),$(!1),Y(!1),v(`Loaded: ${Se.report_name}`),setTimeout(()=>v(""),3e3)}catch(Ee){console.error("Error loading report:",Ee),b("Failed to load report")}finally{x(!1)}},ce=async()=>{B(!0),b(null);try{const re=await ne.get(`${ie}/accounting/saved-reports`,{params:{report_type:"balance_sheet"},headers:J});V(re.data.data.reports),K([]),L(!0)}catch(re){console.error("Error loading saved reports:",re),b(re.response?.data?.error||"Failed to load saved reports")}finally{B(!1)}},De=re=>{K(Ee=>Ee.includes(re)?Ee.filter(Se=>Se!==re):Ee.length>=5?(b("You can only compare up to 5 reports at once"),setTimeout(()=>b(null),3e3),Ee):[...Ee,re])},ke=async()=>{if(W.length<2){b("Please select at least 2 reports to compare");return}try{x(!0),b(null);const re=W.map(et=>ne.get(`${ie}/accounting/saved-reports/${et}`,{headers:J})),Se=(await Promise.all(re)).map(et=>et.data.data),Ge=new Map,ve=new Map,Me=new Map;Se.forEach((et,Ie)=>{["current_assets","fixed_assets","other_assets"].forEach(tt=>{et.report_data[tt]&&et.report_data[tt].forEach(Re=>{Ge.has(Re.account_code)||Ge.set(Re.account_code,{account_code:Re.account_code,account_name:Re.account_name,category:tt,amounts:[]}),Ge.get(Re.account_code).amounts[Ie]=Re.balance||0})}),["current_liabilities","long_term_liabilities"].forEach(tt=>{et.report_data[tt]&&et.report_data[tt].forEach(Re=>{ve.has(Re.account_code)||ve.set(Re.account_code,{account_code:Re.account_code,account_name:Re.account_name,category:tt,amounts:[]}),ve.get(Re.account_code).amounts[Ie]=Re.balance||0})}),et.report_data.equity&&et.report_data.equity.forEach(tt=>{Me.has(tt.account_code)||Me.set(tt.account_code,{account_code:tt.account_code,account_name:tt.account_name,amounts:[]}),Me.get(tt.account_code).amounts[Ie]=tt.balance||0})}),[Ge,ve,Me].forEach(et=>{et.forEach(Ie=>{for(let tt=0;tt<Se.length;tt++)Ie.amounts[tt]||(Ie.amounts[tt]=0)})}),Q({reports:Se.map(et=>({id:et.id,name:et.report_name,date:et.period_start_date||"N/A",totals:et.report_data.totals})),assets:Array.from(Ge.values()),liabilities:Array.from(ve.values()),equity:Array.from(Me.values())}),L(!1),Y(!0),v(`Comparing ${Se.length} balance sheets`),setTimeout(()=>v(""),3e3)}catch(re){console.error("Error comparing reports:",re),b("Failed to load reports for comparison")}finally{x(!1)}};return e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Balance Sheet"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Financial Position Report"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-wrap gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:se,disabled:!j,className:"bg-blue-600 text-white px-3 py-1.5 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-1 text-xs font-medium justify-center",children:[e.jsx(R,{icon:Er}),e.jsx("span",{children:"Save"})]}),e.jsxs("button",{onClick:ue,disabled:H,className:"bg-purple-600 text-white px-3 py-1.5 hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-1 text-xs font-medium justify-center",children:[e.jsx(R,{icon:$d}),e.jsx("span",{children:"Load"})]}),e.jsxs("button",{onClick:ce,disabled:H,className:"bg-orange-600 text-white px-3 py-1.5 hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-1 text-xs font-medium justify-center",children:[e.jsx(R,{icon:Xn}),e.jsx("span",{children:"Compare"})]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 mb-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 items-start lg:items-end",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1 w-full",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[e.jsx(R,{icon:$r,className:"mr-1"}),"Report Type"]}),e.jsxs("select",{value:a,onChange:re=>r(re.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"custom",children:"Custom (As of Date)"})]})]}),a==="monthly"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[e.jsx(R,{icon:ua,className:"mr-1"}),"Month"]}),e.jsxs("select",{value:s,onChange:re=>n(parseInt(re.target.value)),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",children:[e.jsx("option",{value:1,children:"January"}),e.jsx("option",{value:2,children:"February"}),e.jsx("option",{value:3,children:"March"}),e.jsx("option",{value:4,children:"April"}),e.jsx("option",{value:5,children:"May"}),e.jsx("option",{value:6,children:"June"}),e.jsx("option",{value:7,children:"July"}),e.jsx("option",{value:8,children:"August"}),e.jsx("option",{value:9,children:"September"}),e.jsx("option",{value:10,children:"October"}),e.jsx("option",{value:11,children:"November"}),e.jsx("option",{value:12,children:"December"})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[e.jsx(R,{icon:ua,className:"mr-1"}),"Year"]}),e.jsxs("select",{value:i,onChange:re=>o(parseInt(re.target.value)),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",children:[e.jsx("option",{value:2025,children:"2025"}),e.jsx("option",{value:2024,children:"2024"}),e.jsx("option",{value:2023,children:"2023"})]})]})]}),a==="custom"&&e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[e.jsx(R,{icon:ua,className:"mr-1"}),"As of Date"]}),e.jsx("input",{type:"date",value:d,onChange:re=>u(re.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900"})]})]}),e.jsx("div",{children:e.jsxs("button",{onClick:ee,disabled:m,className:"w-full sm:w-auto bg-gray-900 text-white px-4 py-1.5 hover:bg-gray-800 disabled:opacity-50 text-xs font-medium",children:[e.jsx(R,{icon:$r,className:"mr-1"}),m?"Loading...":"Generate Report"]})})]})}),f&&e.jsxs("div",{className:"bg-red-50 border border-red-200 p-3 mb-4 text-xs text-red-700",children:[e.jsx(R,{icon:la,className:"mr-2"}),f]}),p&&e.jsxs("div",{className:"bg-green-50 border border-green-200 p-3 mb-4 text-xs text-green-700",children:[e.jsx(R,{icon:Ra,className:"mr-2"}),p]}),m&&e.jsxs("div",{className:"text-center py-8 text-gray-600 text-xs",children:[e.jsx(R,{icon:Yr,spin:!0,className:"mr-2"}),"Loading balance sheet..."]}),ye&&X&&!m&&e.jsxs("div",{className:"bg-white border border-gray-200 mb-6",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Balance Sheet Comparison (",X.reports.length," Reports)"]}),e.jsxs("button",{onClick:()=>Y(!1),className:"text-xs px-3 py-1 text-gray-600 hover:text-gray-900 border border-gray-300 hover:bg-gray-50",children:[e.jsx(R,{icon:Bt,className:"mr-1"}),"Close Comparison"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-xs",children:[e.jsx("thead",{className:"bg-gray-50 border-b-2 border-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 border-r border-gray-300 w-24",children:"Code"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 border-r border-gray-300",children:"Account Name"}),X.reports.map((re,Ee)=>e.jsxs("th",{className:"px-4 py-3 text-right font-semibold text-gray-700 border-l border-gray-300 bg-gray-100 min-w-[140px]",children:[e.jsx("div",{className:"font-bold text-sm",children:re.name}),e.jsx("div",{className:"text-xs font-normal text-gray-600 mt-1",children:re.date!=="N/A"?new Date(re.date).toLocaleDateString():re.date})]},Ee))]})}),e.jsxs("tbody",{className:"bg-white",children:[e.jsx("tr",{className:"bg-gray-100",children:e.jsx("td",{colSpan:2+X.reports.length,className:"px-3 py-2 font-bold text-gray-900 text-sm border-t border-b border-gray-300",children:"ASSETS"})}),X.assets.map((re,Ee)=>e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-gray-700 border-r border-gray-200",children:re.account_code}),e.jsx("td",{className:"px-3 py-2 text-gray-700 border-r border-gray-200",children:re.account_name}),re.amounts.map((Se,Ge)=>e.jsx("td",{className:"px-4 py-2 text-right tabular-nums border-l border-gray-200 text-gray-900",children:U(Se)},Ge))]},Ee)),e.jsxs("tr",{className:"bg-gray-50 font-semibold border-t border-gray-300",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-2.5 text-gray-900 border-r border-gray-300",children:"Total Assets"}),X.reports.map((re,Ee)=>e.jsx("td",{className:"px-4 py-2.5 text-right tabular-nums border-l border-gray-300 text-gray-900",children:U(re.totals.total_assets)},Ee))]}),e.jsx("tr",{className:"bg-gray-100",children:e.jsx("td",{colSpan:2+X.reports.length,className:"px-3 py-2 font-bold text-gray-900 text-sm border-t-2 border-b border-gray-300",children:"LIABILITIES"})}),X.liabilities.map((re,Ee)=>e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-gray-700 border-r border-gray-200",children:re.account_code}),e.jsx("td",{className:"px-3 py-2 text-gray-700 border-r border-gray-200",children:re.account_name}),re.amounts.map((Se,Ge)=>e.jsx("td",{className:"px-4 py-2 text-right tabular-nums border-l border-gray-200 text-gray-900",children:U(Se)},Ge))]},Ee)),e.jsxs("tr",{className:"bg-gray-50 font-semibold border-t border-gray-300",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-2.5 text-gray-900 border-r border-gray-300",children:"Total Liabilities"}),X.reports.map((re,Ee)=>e.jsx("td",{className:"px-4 py-2.5 text-right tabular-nums border-l border-gray-300 text-gray-900",children:U(re.totals.total_liabilities)},Ee))]}),e.jsx("tr",{className:"bg-gray-100",children:e.jsx("td",{colSpan:2+X.reports.length,className:"px-3 py-2 font-bold text-gray-900 text-sm border-t-2 border-b border-gray-300",children:"EQUITY"})}),X.equity.map((re,Ee)=>e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-gray-700 border-r border-gray-200",children:re.account_code}),e.jsx("td",{className:"px-3 py-2 text-gray-700 border-r border-gray-200",children:re.account_name}),re.amounts.map((Se,Ge)=>e.jsx("td",{className:"px-4 py-2 text-right tabular-nums border-l border-gray-200 text-gray-900",children:U(Se)},Ge))]},Ee)),e.jsxs("tr",{className:"bg-gray-50 font-semibold border-t border-gray-300",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-2.5 text-gray-900 border-r border-gray-300",children:"Total Equity"}),X.reports.map((re,Ee)=>e.jsx("td",{className:"px-4 py-2.5 text-right tabular-nums border-l border-gray-300 text-gray-900",children:U(re.totals.total_equity)},Ee))]}),e.jsxs("tr",{className:"bg-gray-100 font-bold border-t-2 border-gray-400",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-3 text-gray-900 text-sm border-r border-gray-300",children:"Total Liabilities & Equity"}),X.reports.map((re,Ee)=>e.jsx("td",{className:"px-4 py-3 text-right tabular-nums text-sm border-l border-gray-300 text-gray-900",children:U((re.totals.total_liabilities||0)+(re.totals.total_equity||0))},Ee))]})]})]})})]}),!m&&!j&&!f&&!ye&&e.jsxs("div",{className:"bg-white border border-gray-200 p-8 text-center",children:[e.jsx(R,{icon:Xn,className:"text-gray-400 text-4xl mb-3"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"No Balance Sheet Data"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Choose filters and click Generate Report."})]}),!m&&!f&&j&&!ye&&e.jsxs("div",{className:"bg-white border border-gray-200 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center py-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"BALANCE SHEET"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:j.period?.period_name?`${j.period.period_name} (As of ${j.period.end_date})`:j.as_of_date?`As of ${j.as_of_date}`:""}),j.period&&e.jsx("div",{className:"mt-2",children:j.period.is_closed?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-gray-600 text-white",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Period Closed"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-300",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),"Period Open"]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-gray-100 px-3 py-1.5 mb-2",children:e.jsx("h3",{className:"text-xs font-bold text-gray-900",children:"ASSETS"})}),j.current_assets&&j.current_assets.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Current Assets"}),j.current_assets.map((re,Ee)=>e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 hover:bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600",children:re.account_name}),e.jsx("span",{className:"text-xs text-gray-900",children:U(re.balance)})]},Ee)),e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 border-t border-gray-300 mt-1",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:"Total Current Assets"}),e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:U(he.total_current_assets||0)})]})]}),j.fixed_assets&&j.fixed_assets.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Fixed Assets"}),j.fixed_assets.map((re,Ee)=>e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 hover:bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600",children:re.account_name}),e.jsx("span",{className:"text-xs text-gray-900",children:U(re.balance)})]},Ee)),e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 border-t border-gray-300 mt-1",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:"Total Fixed Assets"}),e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:U(he.total_fixed_assets||0)})]})]}),j.other_assets&&j.other_assets.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Other Assets"}),j.other_assets.map((re,Ee)=>e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 hover:bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600",children:re.account_name}),e.jsx("span",{className:"text-xs text-gray-900",children:U(re.balance)})]},Ee)),e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 border-t border-gray-300 mt-1",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:"Total Other Assets"}),e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:U(he.total_other_assets||0)})]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-200 border-y border-gray-300",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"TOTAL ASSETS"}),e.jsx("span",{className:"text-xs font-bold text-gray-900",children:U(he.total_assets)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-gray-100 px-3 py-1.5 mb-2",children:e.jsx("h3",{className:"text-xs font-bold text-gray-900",children:"LIABILITIES"})}),j.current_liabilities&&j.current_liabilities.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Current Liabilities"}),j.current_liabilities.map((re,Ee)=>e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 hover:bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600",children:re.account_name}),e.jsx("span",{className:"text-xs text-gray-900",children:U(re.balance)})]},Ee)),e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 border-t border-gray-300 mt-1",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:"Total Current Liabilities"}),e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:U(he.total_current_liabilities||0)})]})]}),j.long_term_liabilities&&j.long_term_liabilities.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Long-term Liabilities"}),j.long_term_liabilities.map((re,Ee)=>e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 hover:bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600",children:re.account_name}),e.jsx("span",{className:"text-xs text-gray-900",children:U(re.balance)})]},Ee)),e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 border-t border-gray-300 mt-1",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:"Total Long-term Liabilities"}),e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:U(he.total_long_term_liabilities||0)})]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-200 border-y border-gray-300",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"TOTAL LIABILITIES"}),e.jsx("span",{className:"text-xs font-bold text-gray-900",children:U(he.total_liabilities)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-gray-100 px-3 py-1.5 mb-2",children:e.jsx("h3",{className:"text-xs font-bold text-gray-900",children:"EQUITY"})}),(j.equity||[]).map((re,Ee)=>e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 hover:bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600",children:re.account_name}),e.jsx("span",{className:"text-xs text-gray-900",children:U(re.balance)})]},Ee)),e.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-200 border-y border-gray-300 mt-2",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"TOTAL EQUITY"}),e.jsx("span",{className:"text-xs font-bold text-gray-900",children:U(he.total_equity)})]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-300 border-y-2 border-gray-400",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"TOTAL LIABILITIES & EQUITY"}),e.jsx("span",{className:"text-xs font-bold text-gray-900",children:U(pe)})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:Math.abs(he.total_assets-pe)<.01?e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-600",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-xs font-medium",children:"Balance Sheet is Balanced"})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-red-600",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("span",{className:"text-xs font-medium",children:["Out of Balance: ",U(Math.abs(he.total_assets-pe))," difference"]})]})})]})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Save Balance Sheet"}),e.jsx("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Report Name *"}),e.jsx("input",{type:"text",value:_,onChange:re=>E(re.target.value),placeholder:"e.g., Balance Sheet - October 2024",className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{value:A,onChange:re=>z(re.target.value),placeholder:"Add any notes or description...",rows:3,className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tags (Optional)"}),e.jsx("input",{type:"text",value:M,onChange:re=>D(re.target.value),placeholder:"e.g., monthly, approved, october",className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate tags with commas"})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>P(!1),className:"flex-1 px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:te,disabled:m||!_.trim(),className:"flex-1 px-4 py-2 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400",children:[e.jsx(R,{icon:Er,className:"mr-1"}),"Save Report"]})]})]})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Load Saved Balance Sheet"}),e.jsx("button",{onClick:()=>$(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt})})]}),I.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:$d,className:"text-4xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No saved balance sheets found"})]}):e.jsx("div",{className:"space-y-2",children:I.map(re=>e.jsx("div",{className:"border border-gray-200 p-3 hover:bg-gray-50 cursor-pointer",onClick:()=>ge(re.id),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:re.report_name}),re.report_description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:re.report_description}),e.jsxs("div",{className:"flex gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Saved: ",new Date(re.saved_at).toLocaleDateString()]}),re.report_summary&&e.jsx("span",{className:re.report_summary.is_balanced?"text-green-600":"text-red-600",children:re.report_summary.is_balanced?" Balanced":" Out of Balance"})]}),re.tags&&e.jsx("div",{className:"mt-2",children:re.tags.split(",").map((Ee,Se)=>e.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 text-xs px-2 py-0.5 mr-1",children:Ee.trim()},Se))})]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-xs font-medium ml-4",children:"Load "})]})},re.id))}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>$(!1),className:"w-full px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Close"})})]})}),O&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Compare Balance Sheets"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Select 2-5 reports to compare (",W.length," selected)"]})]}),e.jsx("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt})})]}),I.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:Xn,className:"text-4xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No saved balance sheets found"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto mb-4",children:I.map(re=>e.jsx("div",{className:`border p-3 cursor-pointer transition-all ${W.includes(re.id)?"border-orange-500 bg-orange-50":"border-gray-200 hover:bg-gray-50"}`,onClick:()=>De(re.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"checkbox",checked:W.includes(re.id),onChange:()=>{},className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:re.report_name}),re.report_description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:re.report_description}),e.jsxs("div",{className:"flex gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Saved: ",new Date(re.saved_at).toLocaleDateString()]}),re.report_summary&&e.jsx("span",{className:re.report_summary.is_balanced?"text-green-600":"text-red-600",children:re.report_summary.is_balanced?" Balanced":" Out of Balance"})]})]})]})},re.id))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>L(!1),className:"flex-1 px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:ke,disabled:W.length<2,className:"flex-1 px-4 py-2 text-xs font-medium text-white bg-orange-600 hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(R,{icon:Xn,className:"mr-1"}),"Compare ",W.length," Reports"]})]})]})]})})]})},QG=()=>{const{token:t}=ut(),[a,r]=g.useState("comparison"),[s,n]=g.useState("monthly"),[i,o]=g.useState(new Date().getMonth()+1),[d,u]=g.useState(new Date().getFullYear()),[m,x]=g.useState(""),[f,b]=g.useState(""),[p,v]=g.useState(1),[j,N]=g.useState(new Date().getFullYear()),[w,P]=g.useState(new Date().getMonth()+1),[k,$]=g.useState(new Date().getFullYear()),[O,L]=g.useState(!1),[_,E]=g.useState(null),[A,z]=g.useState(""),[M,D]=g.useState(null),[I,V]=g.useState(null),[H,B]=g.useState(!1),[W,K]=g.useState(!1),[X,Q]=g.useState(!1),[ye,Y]=g.useState(!1),[J,U]=g.useState(""),[ee,he]=g.useState(""),[pe,se]=g.useState(""),[te,ue]=g.useState([]),[ge,ce]=g.useState(!1),[De,ke]=g.useState([]),[re,Ee]=g.useState(null),[Se,Ge]=g.useState(!1),ve=t?{Authorization:`Bearer ${t}`}:{},Me=_e=>_e==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(_e),et=async()=>{try{if(L(!0),E(null),D(null),V(null),a==="comparison"){const _e=new URLSearchParams({startMonth:p.toString(),startYear:j.toString(),endMonth:w.toString(),endYear:k.toString()}).toString(),Oe=await ne.get(`${ie}/accounting/cash-flow/multi-month?${_e}`,{headers:ve});V(Oe.data)}else if(s==="monthly"){const _e=await ne.get(`${ie}/accounting/cash-flow/month/${i}/year/${d}`,{headers:ve});D(_e.data)}else if(s==="custom"){if(!m||!f){E("Please select both start and end dates"),L(!1);return}const _e=new URLSearchParams({start:m,end:f}).toString(),Oe=await ne.get(`${ie}/accounting/cash-flow/range?${_e}`,{headers:ve});D(Oe.data)}}catch(_e){console.error("Error loading cash flow:",_e),E(_e.response?.data?.error||"Failed to load cash flow statement")}finally{L(!1)}},Ie=M?.totals||{total_inflows:0,total_outflows:0,net_cash_flow:0,beginning_cash:0,ending_cash:0},tt=async()=>{if(!M){E("Please generate a cash flow statement first");return}K(!0);let _e="";s==="monthly"?_e=`Cash Flow - ${new Date(d,i-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}`:_e=`Cash Flow - ${m} to ${f}`,U(_e)},Re=async()=>{if(!J.trim()){E("Please enter a report name");return}try{L(!0),await ne.post(`${ie}/accounting/saved-reports`,{report_type:"cash_flow_statement",report_name:J,report_description:ee,period_start_date:s==="custom"?m:null,period_end_date:s==="custom"?f:null,report_data:M,report_summary:{total_inflows:Ie.total_inflows,total_outflows:Ie.total_outflows,net_cash_flow:Ie.net_cash_flow,beginning_cash:Ie.beginning_cash,ending_cash:Ie.ending_cash},tags:pe},{headers:ve}),z("Report saved successfully!"),K(!1),U(""),he(""),se(""),setTimeout(()=>z(""),3e3)}catch(_e){console.error("Error saving report:",_e),E(_e.response?.data?.error||"Failed to save report")}finally{L(!1)}},bt=async()=>{ce(!0),E(null);try{const _e=await ne.get(`${ie}/accounting/saved-reports`,{params:{report_type:"cash_flow_statement"},headers:ve});ue(_e.data.data.reports),Q(!0)}catch(_e){console.error("Error loading saved reports:",_e),E(_e.response?.data?.error||"Failed to load saved reports")}finally{ce(!1)}},Nt=async _e=>{try{L(!0);const ct=(await ne.get(`${ie}/accounting/saved-reports/${_e}`,{headers:ve})).data.data;D(ct.report_data),Q(!1),Ge(!1),z(`Loaded: ${ct.report_name}`),setTimeout(()=>z(""),3e3)}catch(Oe){console.error("Error loading report:",Oe),E("Failed to load report")}finally{L(!1)}},Ut=async()=>{ce(!0),E(null);try{const _e=await ne.get(`${ie}/accounting/saved-reports`,{params:{report_type:"cash_flow_statement"},headers:ve});ue(_e.data.data.reports),ke([]),Y(!0)}catch(_e){console.error("Error loading saved reports:",_e),E(_e.response?.data?.error||"Failed to load saved reports")}finally{ce(!1)}},Mt=_e=>{ke(Oe=>Oe.includes(_e)?Oe.filter(ct=>ct!==_e):Oe.length>=5?(E("You can only compare up to 5 reports at once"),setTimeout(()=>E(null),3e3),Oe):[...Oe,_e])},pt=async()=>{if(De.length<2){E("Please select at least 2 reports to compare");return}try{L(!0),E(null);const _e=De.map(nt=>ne.get(`${ie}/accounting/saved-reports/${nt}`,{headers:ve})),ct=(await Promise.all(_e)).map(nt=>nt.data.data),xt=new Map,Ze=new Map;ct.forEach((nt,gt)=>{nt.report_data.cash_inflows&&nt.report_data.cash_inflows.forEach(mt=>{xt.has(mt.account_code)||xt.set(mt.account_code,{account_code:mt.account_code,account_name:mt.account_name,amounts:[]}),xt.get(mt.account_code).amounts[gt]=mt.amount||0}),nt.report_data.cash_outflows&&nt.report_data.cash_outflows.forEach(mt=>{Ze.has(mt.account_code)||Ze.set(mt.account_code,{account_code:mt.account_code,account_name:mt.account_name,amounts:[]}),Ze.get(mt.account_code).amounts[gt]=mt.amount||0})}),[xt,Ze].forEach(nt=>{nt.forEach(gt=>{for(let mt=0;mt<ct.length;mt++)gt.amounts[mt]||(gt.amounts[mt]=0)})}),Ee({reports:ct.map(nt=>({id:nt.id,name:nt.report_name,period:nt.period_start_date&&nt.period_end_date?`${nt.period_start_date} to ${nt.period_end_date}`:"N/A",totals:nt.report_data.totals})),inflows:Array.from(xt.values()),outflows:Array.from(Ze.values())}),Y(!1),Ge(!0),z(`Comparing ${ct.length} cash flow statements`),setTimeout(()=>z(""),3e3)}catch(_e){console.error("Error comparing reports:",_e),E("Failed to load reports for comparison")}finally{L(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("style",{children:`
          @media print {
            body * {
              visibility: hidden;
            }
            .printable-area, .printable-area * {
              visibility: visible;
            }
            .printable-area {
              position: absolute;
              left: 0;
              top: 0;
              width: 100%;
            }
            .no-print {
              display: none !important;
            }
            .bg-gray-50 {
              background-color: white !important;
            }
          }
        `}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-2 md:px-4 lg:px-6 py-3 md:py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-base md:text-lg font-semibold text-gray-900",children:"Cash Flow Statement"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Cash In & Cash Out Report"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-wrap gap-2 w-full sm:w-auto no-print",children:[e.jsxs("button",{onClick:tt,disabled:!M,className:"bg-blue-600 text-white px-2 md:px-3 py-1.5 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-1 md:space-x-2 text-xs font-medium justify-center",children:[e.jsx(R,{icon:Er}),e.jsx("span",{children:"Save"})]}),e.jsxs("button",{onClick:bt,disabled:ge,className:"bg-purple-600 text-white px-2 md:px-3 py-1.5 hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-1 md:space-x-2 text-xs font-medium justify-center",children:[e.jsx(R,{icon:$d}),e.jsx("span",{children:"Load"})]}),e.jsxs("button",{onClick:Ut,disabled:ge,className:"bg-orange-600 text-white px-2 md:px-3 py-1.5 hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-1 md:space-x-2 text-xs font-medium justify-center",children:[e.jsx(R,{icon:_i}),e.jsx("span",{children:"Compare"})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200 no-print",children:e.jsx("div",{className:"px-2 md:px-4 lg:px-6 py-3",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 md:gap-4 lg:gap-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 md:gap-3 flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:$r,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"View:"}),e.jsxs("select",{value:a,onChange:_e=>r(_e.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:"comparison",children:"Monthly Comparison"}),e.jsx("option",{value:"single",children:"Single Period"})]})]}),a==="comparison"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"From:"}),e.jsxs("select",{value:p,onChange:_e=>v(parseInt(_e.target.value)),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:1,children:"January"}),e.jsx("option",{value:2,children:"February"}),e.jsx("option",{value:3,children:"March"}),e.jsx("option",{value:4,children:"April"}),e.jsx("option",{value:5,children:"May"}),e.jsx("option",{value:6,children:"June"}),e.jsx("option",{value:7,children:"July"}),e.jsx("option",{value:8,children:"August"}),e.jsx("option",{value:9,children:"September"}),e.jsx("option",{value:10,children:"October"}),e.jsx("option",{value:11,children:"November"}),e.jsx("option",{value:12,children:"December"})]}),e.jsxs("select",{value:j,onChange:_e=>N(parseInt(_e.target.value)),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:2025,children:"2025"}),e.jsx("option",{value:2024,children:"2024"}),e.jsx("option",{value:2023,children:"2023"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"To:"}),e.jsxs("select",{value:w,onChange:_e=>P(parseInt(_e.target.value)),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:1,children:"January"}),e.jsx("option",{value:2,children:"February"}),e.jsx("option",{value:3,children:"March"}),e.jsx("option",{value:4,children:"April"}),e.jsx("option",{value:5,children:"May"}),e.jsx("option",{value:6,children:"June"}),e.jsx("option",{value:7,children:"July"}),e.jsx("option",{value:8,children:"August"}),e.jsx("option",{value:9,children:"September"}),e.jsx("option",{value:10,children:"October"}),e.jsx("option",{value:11,children:"November"}),e.jsx("option",{value:12,children:"December"})]}),e.jsxs("select",{value:k,onChange:_e=>$(parseInt(_e.target.value)),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:2025,children:"2025"}),e.jsx("option",{value:2024,children:"2024"}),e.jsx("option",{value:2023,children:"2023"})]})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:$r,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Report Type:"}),e.jsxs("select",{value:s,onChange:_e=>n(_e.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"custom",children:"Custom Range"})]})]})}),a==="single"&&s==="monthly"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:ua,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Month:"}),e.jsxs("select",{value:i,onChange:_e=>o(parseInt(_e.target.value)),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:1,children:"January"}),e.jsx("option",{value:2,children:"February"}),e.jsx("option",{value:3,children:"March"}),e.jsx("option",{value:4,children:"April"}),e.jsx("option",{value:5,children:"May"}),e.jsx("option",{value:6,children:"June"}),e.jsx("option",{value:7,children:"July"}),e.jsx("option",{value:8,children:"August"}),e.jsx("option",{value:9,children:"September"}),e.jsx("option",{value:10,children:"October"}),e.jsx("option",{value:11,children:"November"}),e.jsx("option",{value:12,children:"December"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:ua,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Year:"}),e.jsxs("select",{value:d,onChange:_e=>u(parseInt(_e.target.value)),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:2025,children:"2025"}),e.jsx("option",{value:2024,children:"2024"}),e.jsx("option",{value:2023,children:"2023"})]})]})]}),a==="single"&&s==="custom"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:ua,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Start Date:"}),e.jsx("input",{type:"date",value:m,onChange:_e=>x(_e.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:ua,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"End Date:"}),e.jsx("input",{type:"date",value:f,onChange:_e=>b(_e.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-xs text-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:H,onChange:_e=>B(_e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{children:"Hide rows without data"})]}),e.jsxs("button",{onClick:et,disabled:O,className:"bg-gray-900 text-white px-3 md:px-4 py-1.5 hover:bg-gray-800 disabled:opacity-50 flex items-center space-x-2 text-xs font-medium w-full sm:w-auto justify-center",children:[e.jsx(R,{icon:$r}),e.jsx("span",{children:O?"Loading...":"Search"})]})]})]})})}),e.jsxs("div",{className:"p-2 md:p-4 lg:p-6",children:[_&&e.jsxs("div",{className:"bg-red-50 border border-red-200 p-3 mb-4 text-xs text-red-700 no-print",children:[e.jsx(R,{icon:la,className:"mr-2"}),_]}),A&&e.jsxs("div",{className:"bg-green-50 border border-green-200 p-3 mb-4 text-xs text-green-700 no-print",children:[e.jsx(R,{icon:Ra,className:"mr-2"}),A]}),O&&e.jsxs("div",{className:"text-center py-6 md:py-8 text-gray-600 text-xs md:text-sm no-print",children:[e.jsx(R,{icon:Yr,spin:!0,className:"mr-2"}),"Loading cash flow statement..."]}),!O&&!M&&!I&&!_&&e.jsxs("div",{className:"bg-white border border-gray-200 p-6 md:p-8 text-center no-print",children:[e.jsx(R,{icon:_i,className:"text-gray-400 text-3xl md:text-4xl mb-3 md:mb-4"}),e.jsx("h3",{className:"text-base md:text-lg font-medium text-gray-900 mb-2",children:"No Cash Flow Data"}),e.jsx("p",{className:"text-gray-500 text-xs md:text-sm",children:"Choose filters and click Search."})]}),!O&&!_&&I&&a==="comparison"&&e.jsxs("div",{className:"bg-white border border-gray-200 printable-area overflow-x-auto",children:[e.jsxs("div",{className:"px-3 md:px-6 py-3 border-b border-gray-200",children:[e.jsx("h2",{className:"text-base md:text-lg font-semibold text-gray-900",children:"Cash Flow Statement"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Monthly Comparison - ",I.fiscalYear]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-xs border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b-2 border-gray-300",children:[e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 border-r border-gray-300 sticky left-0 bg-gray-50 z-10 min-w-[200px]",children:"Account"}),I.months.map((_e,Oe)=>e.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-700 border-r border-gray-300 min-w-[100px]",children:_e.label},Oe)),e.jsxs("th",{className:"px-3 py-2 text-center font-semibold text-gray-700 bg-gray-100 min-w-[100px]",children:["FY-",I.fiscalYear.split("-")[0].slice(-2)]})]})}),e.jsxs("tbody",{children:[e.jsx("tr",{className:"bg-blue-50",children:e.jsx("td",{colSpan:I.months.length+2,className:"px-3 py-2 font-bold text-gray-900 border-b border-gray-300",children:"Cash Flows from Operating Activities"})}),(()=>{const _e=(I.fiscalYearTotals?.categorizedInflows?.Revenue||[]).sort((Oe,ct)=>Oe.account_code.localeCompare(ct.account_code));return _e.length===0?e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-1.5 text-gray-500 italic border-r border-gray-200 sticky left-0 bg-white",children:"No revenue accounts"}),I.monthlyData.map((Oe,ct)=>e.jsx("td",{className:"px-3 py-1.5 text-right border-r border-gray-200",children:"-"},ct)),e.jsx("td",{className:"px-3 py-1.5 text-right bg-gray-50",children:"-"})]}):_e.filter(Oe=>{if(!H)return!0;const ct=(Oe.amount||0)!==0,xt=I.monthlyData.some(Ze=>(Ze.categorizedInflows?.Revenue?.find(gt=>gt.account_code===Oe.account_code)?.amount||0)!==0);return ct||xt}).map((Oe,ct)=>e.jsxs("tr",{children:[e.jsx("td",{className:`px-3 py-1.5 text-gray-700 border-r border-gray-200 sticky left-0 ${ct%2===0?"bg-white":"bg-gray-50"}`,children:Oe.account_name}),I.monthlyData.map((xt,Ze)=>{const gt=xt.categorizedInflows?.Revenue?.find(mt=>mt.account_code===Oe.account_code)?.amount||0;return e.jsx("td",{className:`px-3 py-1.5 text-right border-r border-gray-200 ${ct%2===0?"bg-white":"bg-gray-50"}`,children:gt!==0?Me(gt):"-"},Ze)}),e.jsx("td",{className:`px-3 py-1.5 text-right font-semibold ${ct%2===0?"bg-gray-50":"bg-gray-100"}`,children:Me(Oe.amount||0)})]},Oe.account_code))})(),(()=>{const _e=(I.fiscalYearTotals?.categorizedInflows?.Asset||[]).sort((Oe,ct)=>Oe.account_code.localeCompare(ct.account_code));return _e.length>0&&_e.some(Oe=>(Oe.amount||0)!==0)?e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"bg-green-50",children:e.jsx("td",{colSpan:I.months.length+2,className:"px-3 py-2 font-bold text-gray-900 border-t-2 border-b border-gray-300",children:"Collections from Accounts Receivable & Other Assets (Operating)"})}),_e.map((Oe,ct)=>I.monthlyData.some(Ze=>(Ze.categorizedInflows?.Asset?.find(gt=>gt.account_code===Oe.account_code)?.amount||0)!==0)||(Oe.amount||0)!==0?e.jsxs("tr",{children:[e.jsx("td",{className:`px-3 py-1.5 text-gray-700 border-r border-gray-200 sticky left-0 ${ct%2===0?"bg-white":"bg-gray-50"}`,children:Oe.account_name}),I.monthlyData.map((Ze,nt)=>{const mt=Ze.categorizedInflows?.Asset?.find(Ht=>Ht.account_code===Oe.account_code)?.amount||0;return e.jsx("td",{className:`px-3 py-1.5 text-right border-r border-gray-200 ${ct%2===0?"bg-white":"bg-gray-50"}`,children:mt!==0?Me(mt):"-"},nt)}),e.jsx("td",{className:`px-3 py-1.5 text-right font-semibold ${ct%2===0?"bg-gray-50":"bg-gray-100"}`,children:Me(Oe.amount||0)})]},Oe.account_code):null)]}):null})(),e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900 border-r border-gray-300 sticky left-0 bg-gray-100",children:"Total Cash Flows from Operating Activities (Income)"}),I.monthlyData.map((_e,Oe)=>{const ct=_e.categorizedInflows?.Revenue?.reduce((nt,gt)=>nt+(gt.amount||0),0)||0,xt=_e.categorizedInflows?.Asset?.reduce((nt,gt)=>nt+(gt.amount||0),0)||0,Ze=ct+xt;return e.jsx("td",{className:"px-3 py-2 text-right border-r border-gray-300",children:Me(Ze)},Oe)}),e.jsx("td",{className:"px-3 py-2 text-right font-bold bg-gray-200",children:Me((I.fiscalYearTotals?.categorizedInflows?.Revenue?.reduce((_e,Oe)=>_e+(Oe.amount||0),0)||0)+(I.fiscalYearTotals?.categorizedInflows?.Asset?.reduce((_e,Oe)=>_e+(Oe.amount||0),0)||0))})]}),e.jsx("tr",{className:"bg-red-50",children:e.jsx("td",{colSpan:I.months.length+2,className:"px-3 py-2 font-bold text-gray-900 border-t-2 border-b border-gray-300",children:"Operating Activities (Expense Section)"})}),(()=>{const _e=(I.fiscalYearTotals?.categorizedOutflows?.Expense||[]).sort((Oe,ct)=>Oe.account_code.localeCompare(ct.account_code));return _e.length===0?e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-1.5 text-gray-500 italic border-r border-gray-200 sticky left-0 bg-white",children:"No expense accounts"}),I.monthlyData.map((Oe,ct)=>e.jsx("td",{className:"px-3 py-1.5 text-right border-r border-gray-200",children:"-"},ct)),e.jsx("td",{className:"px-3 py-1.5 text-right bg-gray-50",children:"-"})]}):_e.filter(Oe=>{if(!H)return!0;const ct=(Oe.amount||0)!==0,xt=I.monthlyData.some(Ze=>(Ze.categorizedOutflows?.Expense?.find(gt=>gt.account_code===Oe.account_code)?.amount||0)!==0);return ct||xt}).map((Oe,ct)=>e.jsxs("tr",{children:[e.jsx("td",{className:`px-3 py-1.5 text-gray-700 border-r border-gray-200 sticky left-0 ${ct%2===0?"bg-white":"bg-gray-50"}`,children:Oe.account_name}),I.monthlyData.map((xt,Ze)=>{const gt=xt.categorizedOutflows?.Expense?.find(mt=>mt.account_code===Oe.account_code)?.amount||0;return e.jsx("td",{className:`px-3 py-1.5 text-right border-r border-gray-200 ${ct%2===0?"bg-white":"bg-gray-50"}`,children:gt!==0?Me(gt):"-"},Ze)}),e.jsx("td",{className:`px-3 py-1.5 text-right font-semibold ${ct%2===0?"bg-gray-50":"bg-gray-100"}`,children:Me(Oe.amount||0)})]},Oe.account_code))})(),e.jsxs("tr",{className:"bg-red-100 font-semibold",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900 border-r border-gray-300 sticky left-0 bg-red-100",children:"Total Operating Expenses"}),I.monthlyData.map((_e,Oe)=>{const ct=_e.categorizedOutflows?.Expense?.reduce((xt,Ze)=>xt+(Ze.amount||0),0)||0;return e.jsx("td",{className:"px-3 py-2 text-right border-r border-gray-300",children:Me(ct)},Oe)}),e.jsx("td",{className:"px-3 py-2 text-right font-bold bg-red-200",children:Me(I.fiscalYearTotals?.categorizedOutflows?.Expense?.reduce((_e,Oe)=>_e+(Oe.amount||0),0)||0)})]}),e.jsxs("tr",{className:"bg-gray-200 font-bold border-t-2 border-gray-400",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900 border-r border-gray-300 sticky left-0 bg-gray-200",children:"Total Cash Flows from Operating Activities"}),I.monthlyData.map((_e,Oe)=>{const ct=_e.categorizedInflows?.Revenue?.reduce((gt,mt)=>gt+(mt.amount||0),0)||0,xt=_e.categorizedInflows?.Asset?.reduce((gt,mt)=>gt+(mt.amount||0),0)||0,Ze=_e.categorizedOutflows?.Expense?.reduce((gt,mt)=>gt+(mt.amount||0),0)||0,nt=ct+xt-Ze;return e.jsx("td",{className:`px-3 py-2 text-right border-r border-gray-300 ${nt<0?"text-red-600":"text-green-600"}`,children:Me(nt)},Oe)}),e.jsx("td",{className:`px-3 py-2 text-right font-bold bg-gray-300 ${(()=>{const _e=I.fiscalYearTotals?.categorizedInflows?.Revenue?.reduce((Ze,nt)=>Ze+(nt.amount||0),0)||0,Oe=I.fiscalYearTotals?.categorizedInflows?.Asset?.reduce((Ze,nt)=>Ze+(nt.amount||0),0)||0,ct=I.fiscalYearTotals?.categorizedOutflows?.Expense?.reduce((Ze,nt)=>Ze+(nt.amount||0),0)||0;return _e+Oe-ct<0?"text-red-600":"text-green-600"})()}`,children:(()=>{const _e=I.fiscalYearTotals?.categorizedInflows?.Revenue?.reduce((Ze,nt)=>Ze+(nt.amount||0),0)||0,Oe=I.fiscalYearTotals?.categorizedInflows?.Asset?.reduce((Ze,nt)=>Ze+(nt.amount||0),0)||0,ct=I.fiscalYearTotals?.categorizedOutflows?.Expense?.reduce((Ze,nt)=>Ze+(nt.amount||0),0)||0,xt=_e+Oe-ct;return Me(xt)})()})]}),e.jsx("tr",{className:"bg-purple-50",children:e.jsx("td",{colSpan:I.months.length+2,className:"px-3 py-2 font-bold text-gray-900 border-t-2 border-b border-gray-300",children:"Cash Flows From Investing Activities"})}),(()=>{const _e=(I.fiscalYearTotals?.categorizedOutflows?.Asset||[]).sort((Oe,ct)=>Oe.account_code.localeCompare(ct.account_code));return _e.length===0?e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-1.5 text-gray-500 italic border-r border-gray-200 sticky left-0 bg-white",children:"No investing activities"}),I.monthlyData.map((Oe,ct)=>e.jsx("td",{className:"px-3 py-1.5 text-right border-r border-gray-200",children:"-"},ct)),e.jsx("td",{className:"px-3 py-1.5 text-right bg-gray-50",children:"-"})]}):_e.filter(Oe=>{if(!H)return!0;const ct=(Oe.amount||0)!==0,xt=I.monthlyData.some(Ze=>(Ze.categorizedOutflows?.Asset?.find(gt=>gt.account_code===Oe.account_code)?.amount||0)!==0);return ct||xt}).map((Oe,ct)=>e.jsxs("tr",{children:[e.jsx("td",{className:`px-3 py-1.5 text-gray-700 border-r border-gray-200 sticky left-0 ${ct%2===0?"bg-white":"bg-gray-50"}`,children:Oe.account_name}),I.monthlyData.map((xt,Ze)=>{const gt=xt.categorizedOutflows?.Asset?.find(mt=>mt.account_code===Oe.account_code)?.amount||0;return e.jsx("td",{className:`px-3 py-1.5 text-right border-r border-gray-200 ${ct%2===0?"bg-white":"bg-gray-50"}`,children:gt!==0?Me(gt):"-"},Ze)}),e.jsx("td",{className:`px-3 py-1.5 text-right font-semibold ${ct%2===0?"bg-gray-50":"bg-gray-100"}`,children:Me(Oe.amount||0)})]},Oe.account_code))})(),e.jsxs("tr",{className:"bg-purple-100 font-semibold",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900 border-r border-gray-300 sticky left-0 bg-purple-100",children:"Total Cash Flows From Investing Activities"}),I.monthlyData.map((_e,Oe)=>{const ct=_e.categorizedOutflows?.Asset?.reduce((xt,Ze)=>xt+(Ze.amount||0),0)||0;return e.jsx("td",{className:"px-3 py-2 text-right border-r border-gray-300",children:Me(ct)},Oe)}),e.jsx("td",{className:"px-3 py-2 text-right font-bold bg-purple-200",children:Me(I.fiscalYearTotals?.categorizedOutflows?.Asset?.reduce((_e,Oe)=>_e+(Oe.amount||0),0)||0)})]}),e.jsx("tr",{className:"bg-indigo-50",children:e.jsx("td",{colSpan:I.months.length+2,className:"px-3 py-2 font-bold text-gray-900 border-t-2 border-b border-gray-300",children:"Cash Flows From Financing Activities"})}),(()=>{const _e=(I.fiscalYearTotals?.categorizedOutflows?.Liability||[]).map(xt=>({...xt,account_type:"Liability"})),Oe=(I.fiscalYearTotals?.categorizedOutflows?.Equity||[]).map(xt=>({...xt,account_type:"Equity"})),ct=[..._e,...Oe].sort((xt,Ze)=>xt.account_code.localeCompare(Ze.account_code));return ct.length===0?e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-1.5 text-gray-500 italic border-r border-gray-200 sticky left-0 bg-white",children:"No financing activities"}),I.monthlyData.map((xt,Ze)=>e.jsx("td",{className:"px-3 py-1.5 text-right border-r border-gray-200",children:"-"},Ze)),e.jsx("td",{className:"px-3 py-1.5 text-right bg-gray-50",children:"-"})]}):ct.filter(xt=>{if(!H)return!0;const Ze=(xt.amount||0)!==0,nt=I.monthlyData.some(gt=>(gt.categorizedOutflows?.[xt.account_type]?.find(Ht=>Ht.account_code===xt.account_code)?.amount||0)!==0);return Ze||nt}).map((xt,Ze)=>e.jsxs("tr",{children:[e.jsx("td",{className:`px-3 py-1.5 text-gray-700 border-r border-gray-200 sticky left-0 ${Ze%2===0?"bg-white":"bg-gray-50"}`,children:xt.account_name}),I.monthlyData.map((nt,gt)=>{const Ht=nt.categorizedOutflows?.[xt.account_type]?.find(vt=>vt.account_code===xt.account_code)?.amount||0;return e.jsx("td",{className:`px-3 py-1.5 text-right border-r border-gray-200 ${Ze%2===0?"bg-white":"bg-gray-50"}`,children:Ht!==0?Me(Ht):"-"},gt)}),e.jsx("td",{className:`px-3 py-1.5 text-right font-semibold ${Ze%2===0?"bg-gray-50":"bg-gray-100"}`,children:Me(xt.amount||0)})]},xt.account_code))})(),e.jsxs("tr",{className:"bg-indigo-100 font-semibold",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900 border-r border-gray-300 sticky left-0 bg-indigo-100",children:"Total Cash Flows From Financing Activities"}),I.monthlyData.map((_e,Oe)=>{const ct=_e.categorizedOutflows?.Liability?.reduce((nt,gt)=>nt+(gt.amount||0),0)||0,xt=_e.categorizedOutflows?.Equity?.reduce((nt,gt)=>nt+(gt.amount||0),0)||0,Ze=ct+xt;return e.jsx("td",{className:"px-3 py-2 text-right border-r border-gray-300",children:Ze!==0?Me(Ze):"-"},Oe)}),e.jsx("td",{className:"px-3 py-2 text-right font-bold bg-indigo-200",children:Me((I.fiscalYearTotals?.categorizedOutflows?.Liability?.reduce((_e,Oe)=>_e+(Oe.amount||0),0)||0)+(I.fiscalYearTotals?.categorizedOutflows?.Equity?.reduce((_e,Oe)=>_e+(Oe.amount||0),0)||0))})]}),e.jsxs("tr",{className:"bg-gray-300 font-bold border-t-2 border-gray-500",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900 border-r border-gray-400 sticky left-0 bg-gray-300",children:"Net increase in cash and cash equivalents"}),I.monthlyData.map((_e,Oe)=>{const ct=_e.categorizedInflows?.Revenue?.reduce((Xt,Ft)=>Xt+(Ft.amount||0),0)||0,xt=_e.categorizedInflows?.Asset?.reduce((Xt,Ft)=>Xt+(Ft.amount||0),0)||0,Ze=_e.categorizedOutflows?.Expense?.reduce((Xt,Ft)=>Xt+(Ft.amount||0),0)||0,nt=ct+xt-Ze,gt=_e.categorizedOutflows?.Asset?.reduce((Xt,Ft)=>Xt+(Ft.amount||0),0)||0,mt=_e.categorizedOutflows?.Liability?.reduce((Xt,Ft)=>Xt+(Ft.amount||0),0)||0,Ht=_e.categorizedOutflows?.Equity?.reduce((Xt,Ft)=>Xt+(Ft.amount||0),0)||0,vt=mt+Ht,At=nt-gt-vt;return e.jsx("td",{className:`px-3 py-2 text-right border-r border-gray-400 ${At<0?"text-red-600":"text-green-600"}`,children:Me(At)},Oe)}),e.jsx("td",{className:`px-3 py-2 text-right font-bold bg-gray-400 ${(()=>{const _e=I.fiscalYearTotals?.categorizedInflows?.Revenue?.reduce((vt,At)=>vt+(At.amount||0),0)||0,Oe=I.fiscalYearTotals?.categorizedInflows?.Asset?.reduce((vt,At)=>vt+(At.amount||0),0)||0,ct=I.fiscalYearTotals?.categorizedOutflows?.Expense?.reduce((vt,At)=>vt+(At.amount||0),0)||0,xt=_e+Oe-ct,Ze=I.fiscalYearTotals?.categorizedOutflows?.Asset?.reduce((vt,At)=>vt+(At.amount||0),0)||0,nt=I.fiscalYearTotals?.categorizedOutflows?.Liability?.reduce((vt,At)=>vt+(At.amount||0),0)||0,gt=I.fiscalYearTotals?.categorizedOutflows?.Equity?.reduce((vt,At)=>vt+(At.amount||0),0)||0,mt=nt+gt;return xt-Ze-mt<0?"text-red-600":"text-green-600"})()}`,children:(()=>{const _e=I.fiscalYearTotals?.categorizedInflows?.Revenue?.reduce((vt,At)=>vt+(At.amount||0),0)||0,Oe=I.fiscalYearTotals?.categorizedInflows?.Asset?.reduce((vt,At)=>vt+(At.amount||0),0)||0,ct=I.fiscalYearTotals?.categorizedOutflows?.Expense?.reduce((vt,At)=>vt+(At.amount||0),0)||0,xt=_e+Oe-ct,Ze=I.fiscalYearTotals?.categorizedOutflows?.Asset?.reduce((vt,At)=>vt+(At.amount||0),0)||0,nt=I.fiscalYearTotals?.categorizedOutflows?.Liability?.reduce((vt,At)=>vt+(At.amount||0),0)||0,gt=I.fiscalYearTotals?.categorizedOutflows?.Equity?.reduce((vt,At)=>vt+(At.amount||0),0)||0,mt=nt+gt,Ht=xt-Ze-mt;return Me(Ht)})()})]}),e.jsxs("tr",{className:"bg-gray-900 text-white font-bold",children:[e.jsx("td",{className:"px-3 py-2 border-r border-gray-700 sticky left-0 bg-gray-900",children:"Cash and cash equivalents at end of period"}),(()=>{let _e=I.monthlyData[0]?.totals?.beginning_cash||0;return I.monthlyData.map((Oe,ct)=>{const xt=Oe.categorizedInflows?.Revenue?.reduce((Ft,Rt)=>Ft+(Rt.amount||0),0)||0,Ze=Oe.categorizedInflows?.Asset?.reduce((Ft,Rt)=>Ft+(Rt.amount||0),0)||0,nt=Oe.categorizedOutflows?.Expense?.reduce((Ft,Rt)=>Ft+(Rt.amount||0),0)||0,gt=xt+Ze-nt,mt=Oe.categorizedOutflows?.Asset?.reduce((Ft,Rt)=>Ft+(Rt.amount||0),0)||0,Ht=Oe.categorizedOutflows?.Liability?.reduce((Ft,Rt)=>Ft+(Rt.amount||0),0)||0,vt=Oe.categorizedOutflows?.Equity?.reduce((Ft,Rt)=>Ft+(Rt.amount||0),0)||0,At=Ht+vt,Xt=gt-mt-At;return _e+=Xt,e.jsx("td",{className:"px-3 py-2 text-right border-r border-gray-700",children:Me(_e)},ct)})})(),e.jsx("td",{className:"px-3 py-2 text-right font-bold bg-black",children:(()=>{const _e=I.monthlyData[0]?.totals?.beginning_cash||0,Oe=I.fiscalYearTotals?.categorizedInflows?.Revenue?.reduce((At,Xt)=>At+(Xt.amount||0),0)||0,ct=I.fiscalYearTotals?.categorizedInflows?.Asset?.reduce((At,Xt)=>At+(Xt.amount||0),0)||0,xt=I.fiscalYearTotals?.categorizedOutflows?.Expense?.reduce((At,Xt)=>At+(Xt.amount||0),0)||0,Ze=Oe+ct-xt,nt=I.fiscalYearTotals?.categorizedOutflows?.Asset?.reduce((At,Xt)=>At+(Xt.amount||0),0)||0,gt=I.fiscalYearTotals?.categorizedOutflows?.Liability?.reduce((At,Xt)=>At+(Xt.amount||0),0)||0,mt=I.fiscalYearTotals?.categorizedOutflows?.Equity?.reduce((At,Xt)=>At+(Xt.amount||0),0)||0,Ht=gt+mt,vt=Ze-nt-Ht;return Me(_e+vt)})()})]})]})]})})]}),!O&&!_&&M&&a==="single"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 md:gap-3 mb-3 md:mb-4 no-print",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-2.5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Total Inflows"}),e.jsx("p",{className:"text-base font-semibold text-green-600",children:Me(Ie.total_inflows)})]}),e.jsx("div",{className:"bg-green-100 p-1.5",children:e.jsx(R,{icon:xf,className:"text-green-600 text-xs"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-2.5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Total Outflows"}),e.jsx("p",{className:"text-base font-semibold text-red-600",children:Me(Ie.total_outflows)})]}),e.jsx("div",{className:"bg-red-100 p-1.5",children:e.jsx(R,{icon:uf,className:"text-red-600 text-xs"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-2.5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Net Cash Flow"}),e.jsx("p",{className:`text-base font-semibold ${Ie.net_cash_flow>=0?"text-green-600":"text-red-600"}`,children:Me(Ie.net_cash_flow)})]}),e.jsx("div",{className:"bg-gray-100 p-1.5",children:e.jsx(R,{icon:_o,className:"text-gray-600 text-xs"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-2.5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Current Cash Position"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:Me(Ie.ending_cash)})]}),e.jsx("div",{className:"bg-gray-100 p-1.5",children:e.jsx(R,{icon:_i,className:"text-gray-600 text-xs"})})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 printable-area",children:[e.jsxs("div",{className:"px-3 md:px-6 py-3 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900",children:"Cash Flow Statement"}),e.jsx("p",{className:"text-xs text-gray-600",children:M.period?.period_name?M.period.period_name:M.start_date&&M.end_date?`${M.start_date} to ${M.end_date}`:""})]}),e.jsxs("div",{className:"p-3 md:p-6",children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsxs("h3",{className:"text-xs font-semibold text-gray-700 mb-2 flex items-center",children:[e.jsx(R,{icon:xf,className:"mr-2"}),"Cash In"]}),e.jsxs("div",{className:"space-y-0",children:[(M.cash_inflows||[]).length===0?e.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-500 italic",children:"No cash inflows in this period"}),e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"$0.00"})]}):(M.cash_inflows||[]).filter(_e=>!H||(_e.amount||0)!==0).map((_e,Oe)=>e.jsxs("div",{className:`flex justify-between items-center py-1.5 px-2 ${Oe%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsxs("span",{className:"text-xs text-gray-700",children:[_e.account_code," - ",_e.account_name]}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:Me(_e.amount)})]},Oe)),e.jsxs("div",{className:"flex justify-between items-center py-2 px-2 border-t border-gray-200 bg-gray-100",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"Total Cash In"}),e.jsx("span",{className:"text-xs font-bold text-gray-900",children:Me(Ie.total_inflows)})]})]})]}),e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsxs("h3",{className:"text-xs font-semibold text-gray-700 mb-2 flex items-center",children:[e.jsx(R,{icon:uf,className:"mr-2"}),"Cash Out"]}),e.jsxs("div",{className:"space-y-0",children:[(M.cash_outflows||[]).length===0?e.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-500 italic",children:"No cash outflows in this period"}),e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"$0.00"})]}):(M.cash_outflows||[]).filter(_e=>!H||(_e.amount||0)!==0).map((_e,Oe)=>e.jsxs("div",{className:`flex justify-between items-center py-1.5 px-2 ${Oe%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsxs("span",{className:"text-xs text-gray-700",children:[_e.account_code," - ",_e.account_name]}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:Me(_e.amount)})]},Oe)),e.jsxs("div",{className:"flex justify-between items-center py-2 px-2 border-t border-gray-200 bg-gray-100",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"Total Cash Out"}),e.jsx("span",{className:"text-xs font-bold text-gray-900",children:Me(Ie.total_outflows)})]})]})]}),e.jsxs("div",{className:"border-t-2 border-gray-300 pt-3 md:pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 md:py-2.5 px-2 md:px-3 bg-gray-100 mb-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"Net Cash Flow"}),e.jsx("span",{className:`text-xs font-bold ${Ie.net_cash_flow>=0?"text-green-600":"text-red-600"}`,children:Me(Ie.net_cash_flow)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 md:py-2.5 px-2 md:px-3 bg-gray-50 mb-1",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Beginning Cash & Bank Balance"}),e.jsx("span",{className:"text-xs font-semibold text-gray-700",children:Me(Ie.beginning_cash)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 md:py-2.5 px-2 md:px-3 bg-gray-900 text-white",children:[e.jsx("span",{className:"text-xs font-bold",children:"Current Cash & Bank Position"}),e.jsx("span",{className:"text-xs font-bold",children:Me(Ie.ending_cash)})]})]})]})]})]}),Se&&re&&!O&&e.jsxs("div",{className:"bg-white border border-gray-200 mb-6 no-print",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Cash Flow Comparison (",re.reports.length," Reports)"]}),e.jsxs("button",{onClick:()=>Ge(!1),className:"text-xs px-3 py-1 text-gray-600 hover:text-gray-900 border border-gray-300 hover:bg-gray-50",children:[e.jsx(R,{icon:Bt,className:"mr-1"}),"Close Comparison"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-xs",children:[e.jsx("thead",{className:"bg-gray-50 border-b-2 border-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 border-r border-gray-300 w-24",children:"Code"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 border-r border-gray-300",children:"Account Name"}),re.reports.map((_e,Oe)=>e.jsxs("th",{className:"px-4 py-3 text-right font-semibold text-gray-700 border-l border-gray-300 bg-gray-100 min-w-[140px]",children:[e.jsx("div",{className:"font-bold text-sm",children:_e.name}),e.jsx("div",{className:"text-xs font-normal text-gray-600 mt-1",children:_e.period})]},Oe))]})}),e.jsxs("tbody",{className:"bg-white",children:[e.jsx("tr",{className:"bg-green-50",children:e.jsxs("td",{colSpan:2+re.reports.length,className:"px-3 py-2 font-bold text-gray-900 text-sm border-t border-b border-gray-300",children:[e.jsx(R,{icon:xf,className:"mr-2"}),"CASH IN"]})}),re.inflows.map((_e,Oe)=>e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-gray-700 border-r border-gray-200",children:_e.account_code}),e.jsx("td",{className:"px-3 py-2 text-gray-700 border-r border-gray-200",children:_e.account_name}),_e.amounts.map((ct,xt)=>e.jsx("td",{className:"px-4 py-2 text-right tabular-nums border-l border-gray-200 text-gray-900",children:Me(ct)},xt))]},Oe)),e.jsxs("tr",{className:"bg-green-100 font-semibold border-t border-gray-300",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-2.5 text-gray-900 border-r border-gray-300",children:"Total Cash In"}),re.reports.map((_e,Oe)=>e.jsx("td",{className:"px-4 py-2.5 text-right tabular-nums border-l border-gray-300 text-gray-900",children:Me(_e.totals.total_inflows)},Oe))]}),e.jsx("tr",{className:"bg-red-50",children:e.jsxs("td",{colSpan:2+re.reports.length,className:"px-3 py-2 font-bold text-gray-900 text-sm border-t-2 border-b border-gray-300",children:[e.jsx(R,{icon:uf,className:"mr-2"}),"CASH OUT"]})}),re.outflows.map((_e,Oe)=>e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-gray-700 border-r border-gray-200",children:_e.account_code}),e.jsx("td",{className:"px-3 py-2 text-gray-700 border-r border-gray-200",children:_e.account_name}),_e.amounts.map((ct,xt)=>e.jsx("td",{className:"px-4 py-2 text-right tabular-nums border-l border-gray-200 text-gray-900",children:Me(ct)},xt))]},Oe)),e.jsxs("tr",{className:"bg-red-100 font-semibold border-t border-gray-300",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-2.5 text-gray-900 border-r border-gray-300",children:"Total Cash Out"}),re.reports.map((_e,Oe)=>e.jsx("td",{className:"px-4 py-2.5 text-right tabular-nums border-l border-gray-300 text-gray-900",children:Me(_e.totals.total_outflows)},Oe))]}),e.jsxs("tr",{className:"bg-gray-100 font-bold border-t-2 border-gray-400",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-3 text-gray-900 text-sm border-r border-gray-300",children:"Net Cash Flow"}),re.reports.map((_e,Oe)=>e.jsx("td",{className:`px-4 py-3 text-right tabular-nums text-sm border-l border-gray-300 font-bold ${_e.totals.net_cash_flow>=0?"text-green-600":"text-red-600"}`,children:Me(_e.totals.net_cash_flow)},Oe))]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-2.5 text-gray-700 border-r border-gray-200",children:"Beginning Cash"}),re.reports.map((_e,Oe)=>e.jsx("td",{className:"px-4 py-2.5 text-right tabular-nums border-l border-gray-200 text-gray-900",children:Me(_e.totals.beginning_cash)},Oe))]}),e.jsxs("tr",{className:"bg-gray-900 text-white font-bold",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-3 text-sm border-r border-gray-700",children:"Ending Cash"}),re.reports.map((_e,Oe)=>e.jsx("td",{className:"px-4 py-3 text-right tabular-nums text-sm border-l border-gray-700",children:Me(_e.totals.ending_cash)},Oe))]})]})]})})]})]}),W&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Save Cash Flow Statement"}),e.jsx("button",{onClick:()=>K(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Report Name *"}),e.jsx("input",{type:"text",value:J,onChange:_e=>U(_e.target.value),placeholder:"e.g., Cash Flow - October 2024",className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{value:ee,onChange:_e=>he(_e.target.value),placeholder:"Add any notes or description...",rows:3,className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tags (Optional)"}),e.jsx("input",{type:"text",value:pe,onChange:_e=>se(_e.target.value),placeholder:"e.g., monthly, approved, october",className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate tags with commas"})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>K(!1),className:"flex-1 px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:Re,disabled:O||!J.trim(),className:"flex-1 px-4 py-2 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400",children:[e.jsx(R,{icon:Er,className:"mr-1"}),"Save Report"]})]})]})]})}),X&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Load Saved Cash Flow Statement"}),e.jsx("button",{onClick:()=>Q(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt})})]}),te.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:$d,className:"text-4xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No saved cash flow statements found"})]}):e.jsx("div",{className:"space-y-2",children:te.map(_e=>e.jsx("div",{className:"border border-gray-200 p-3 hover:bg-gray-50 cursor-pointer",onClick:()=>Nt(_e.id),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:_e.report_name}),_e.report_description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:_e.report_description}),e.jsxs("div",{className:"flex gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Saved: ",new Date(_e.saved_at).toLocaleDateString()]}),_e.report_summary&&e.jsxs("span",{className:_e.report_summary.net_cash_flow>=0?"text-green-600":"text-red-600",children:["Net: ",Me(_e.report_summary.net_cash_flow)]})]}),_e.tags&&e.jsx("div",{className:"mt-2",children:_e.tags.split(",").map((Oe,ct)=>e.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 text-xs px-2 py-0.5 mr-1",children:Oe.trim()},ct))})]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-xs font-medium ml-4",children:"Load "})]})},_e.id))}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>Q(!1),className:"w-full px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Close"})})]})}),ye&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Compare Cash Flow Statements"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Select 2-5 reports to compare (",De.length," selected)"]})]}),e.jsx("button",{onClick:()=>Y(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt})})]}),te.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:_i,className:"text-4xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No saved cash flow statements found"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto mb-4",children:te.map(_e=>e.jsx("div",{className:`border p-3 cursor-pointer transition-all ${De.includes(_e.id)?"border-orange-500 bg-orange-50":"border-gray-200 hover:bg-gray-50"}`,onClick:()=>Mt(_e.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"checkbox",checked:De.includes(_e.id),onChange:()=>{},className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:_e.report_name}),_e.report_description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:_e.report_description}),e.jsxs("div",{className:"flex gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Saved: ",new Date(_e.saved_at).toLocaleDateString()]}),_e.report_summary&&e.jsxs("span",{className:_e.report_summary.net_cash_flow>=0?"text-green-600":"text-red-600",children:["Net: ",Me(_e.report_summary.net_cash_flow)]})]})]})]})},_e.id))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Y(!1),className:"flex-1 px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:pt,disabled:De.length<2,className:"flex-1 px-4 py-2 text-xs font-medium text-white bg-orange-600 hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(R,{icon:_i,className:"mr-1"}),"Compare ",De.length," Reports"]})]})]})]})})]})};function cE(t){var a,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(a=0;a<n;a++)t[a]&&(r=cE(t[a]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function Ba(){for(var t,a,r=0,s="",n=arguments.length;r<n;r++)(t=arguments[r])&&(a=cE(t))&&(s&&(s+=" "),s+=a);return s}var Jv={},Zv={},d_;function eV(){return d_||(d_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return r==="__proto__"}t.isUnsafeProperty=a}(Zv)),Zv}var Qv={},u_;function dE(){return u_||(u_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=a}(Qv)),Qv}var e1={},m_;function uE(){return m_||(m_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}t.toKey=a}(e1)),e1}var t1={},x_;function ON(){return x_||(x_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){const s=[],n=r.length;if(n===0)return s;let i=0,o="",d="",u=!1;for(r.charCodeAt(0)===46&&(s.push(""),i++);i<n;){const m=r[i];d?m==="\\"&&i+1<n?(i++,o+=r[i]):m===d?d="":o+=m:u?m==='"'||m==="'"?d=m:m==="]"?(u=!1,s.push(o),o=""):o+=m:m==="["?(u=!0,o&&(s.push(o),o="")):m==="."?o&&(s.push(o),o=""):o+=m,i++}return o&&s.push(o),s}t.toPath=a}(t1)),t1}var h_;function DN(){return h_||(h_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=eV(),r=dE(),s=uE(),n=ON();function i(d,u,m){if(d==null)return m;switch(typeof u){case"string":{if(a.isUnsafeProperty(u))return m;const x=d[u];return x===void 0?r.isDeepKey(u)?i(d,n.toPath(u),m):m:x}case"number":case"symbol":{typeof u=="number"&&(u=s.toKey(u));const x=d[u];return x===void 0?m:x}default:{if(Array.isArray(u))return o(d,u,m);if(Object.is(u?.valueOf(),-0)?u="-0":u=String(u),a.isUnsafeProperty(u))return m;const x=d[u];return x===void 0?m:x}}}function o(d,u,m){if(u.length===0)return m;let x=d;for(let f=0;f<u.length;f++){if(x==null||a.isUnsafeProperty(u[f]))return m;x=x[u[f]]}return x===void 0?m:x}t.get=i}(Jv)),Jv}var a1,f_;function tV(){return f_||(f_=1,a1=DN().get),a1}var aV=tV();const sm=Po(aV);var r1={exports:{}},Ha={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function rV(){if(p_)return Ha;p_=1;var t=typeof Symbol=="function"&&Symbol.for,a=t?Symbol.for("react.element"):60103,r=t?Symbol.for("react.portal"):60106,s=t?Symbol.for("react.fragment"):60107,n=t?Symbol.for("react.strict_mode"):60108,i=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,d=t?Symbol.for("react.context"):60110,u=t?Symbol.for("react.async_mode"):60111,m=t?Symbol.for("react.concurrent_mode"):60111,x=t?Symbol.for("react.forward_ref"):60112,f=t?Symbol.for("react.suspense"):60113,b=t?Symbol.for("react.suspense_list"):60120,p=t?Symbol.for("react.memo"):60115,v=t?Symbol.for("react.lazy"):60116,j=t?Symbol.for("react.block"):60121,N=t?Symbol.for("react.fundamental"):60117,w=t?Symbol.for("react.responder"):60118,P=t?Symbol.for("react.scope"):60119;function k(O){if(typeof O=="object"&&O!==null){var L=O.$$typeof;switch(L){case a:switch(O=O.type,O){case u:case m:case s:case i:case n:case f:return O;default:switch(O=O&&O.$$typeof,O){case d:case x:case v:case p:case o:return O;default:return L}}case r:return L}}}function $(O){return k(O)===m}return Ha.AsyncMode=u,Ha.ConcurrentMode=m,Ha.ContextConsumer=d,Ha.ContextProvider=o,Ha.Element=a,Ha.ForwardRef=x,Ha.Fragment=s,Ha.Lazy=v,Ha.Memo=p,Ha.Portal=r,Ha.Profiler=i,Ha.StrictMode=n,Ha.Suspense=f,Ha.isAsyncMode=function(O){return $(O)||k(O)===u},Ha.isConcurrentMode=$,Ha.isContextConsumer=function(O){return k(O)===d},Ha.isContextProvider=function(O){return k(O)===o},Ha.isElement=function(O){return typeof O=="object"&&O!==null&&O.$$typeof===a},Ha.isForwardRef=function(O){return k(O)===x},Ha.isFragment=function(O){return k(O)===s},Ha.isLazy=function(O){return k(O)===v},Ha.isMemo=function(O){return k(O)===p},Ha.isPortal=function(O){return k(O)===r},Ha.isProfiler=function(O){return k(O)===i},Ha.isStrictMode=function(O){return k(O)===n},Ha.isSuspense=function(O){return k(O)===f},Ha.isValidElementType=function(O){return typeof O=="string"||typeof O=="function"||O===s||O===m||O===i||O===n||O===f||O===b||typeof O=="object"&&O!==null&&(O.$$typeof===v||O.$$typeof===p||O.$$typeof===o||O.$$typeof===d||O.$$typeof===x||O.$$typeof===N||O.$$typeof===w||O.$$typeof===P||O.$$typeof===j)},Ha.typeOf=k,Ha}var g_;function sV(){return g_||(g_=1,r1.exports=rV()),r1.exports}var nV=sV(),Fs=t=>t===0?0:t>0?1:-1,Ei=t=>typeof t=="number"&&t!=+t,$u=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,zt=t=>(typeof t=="number"||t instanceof Number)&&!Ei(t),Eo=t=>zt(t)||typeof t=="string",iV=0,Af=t=>{var a=++iV;return"".concat(t||"").concat(a)},gn=function(a,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!zt(a)&&typeof a!="string")return s;var i;if($u(a)){if(r==null)return s;var o=a.indexOf("%");i=r*parseFloat(a.slice(0,o))/100}else i=+a;return Ei(i)&&(i=s),n&&r!=null&&i>r&&(i=r),i},mE=t=>{if(!Array.isArray(t))return!1;for(var a=t.length,r={},s=0;s<a;s++)if(!r[t[s]])r[t[s]]=!0;else return!0;return!1};function Hr(t,a,r){return zt(t)&&zt(a)?t+r*(a-t):a}function xE(t,a,r){if(!(!t||!t.length))return t.find(s=>s&&(typeof a=="function"?a(s):sm(s,a))===r)}var Cr=t=>t===null||typeof t>"u",Kf=t=>Cr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),lV=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function LN(t){if(typeof t!="string")return!1;var a=lV;return a.includes(t)}var oV=["viewBox","children"],y_=["points","pathLength"],s1={svg:oV,polygon:y_,polyline:y_},MN=(t,a)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(g.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var s={};return Object.keys(r).forEach(n=>{LN(n)&&(s[n]=i=>r[n](r,i))}),s},cV=(t,a,r)=>s=>(t(a,r,s),null),by=(t,a,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var s=null;return Object.keys(t).forEach(n=>{var i=t[n];LN(n)&&typeof i=="function"&&(s||(s={}),s[n]=cV(i,a,r))}),s},dV=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function hE(t){if(typeof t!="string")return!1;var a=dV;return a.includes(t)}function Ec(t){var a=Object.entries(t).filter(r=>{var[s]=r;return hE(s)});return Object.fromEntries(a)}var b_=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",v_=null,n1=null,fE=t=>{if(t===v_&&Array.isArray(n1))return n1;var a=[];return g.Children.forEach(t,r=>{Cr(r)||(nV.isFragment(r)?a=a.concat(fE(r.props.children)):a.push(r))}),n1=a,v_=t,a};function RN(t,a){var r=[],s=[];return Array.isArray(a)?s=a.map(n=>b_(n)):s=[b_(a)],fE(t).forEach(n=>{var i=sm(n,"type.displayName")||sm(n,"type.name");s.indexOf(i)!==-1&&r.push(n)}),r}var pE=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,uV=(t,a,r,s)=>{var n;if(typeof a=="symbol"||typeof a=="number")return!0;var i=(n=s&&s1?.[s])!==null&&n!==void 0?n:[],o=a.startsWith("data-"),d=typeof t!="function"&&(!!s&&i.includes(a)||hE(a)),u=!!r&&LN(a);return o||d||u},Ar=(t,a,r)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(g.isValidElement(t)&&(s=t.props),typeof s!="object"&&typeof s!="function")return null;var n={};return Object.keys(s).forEach(i=>{var o;uV((o=s)===null||o===void 0?void 0:o[i],i,a,r)&&(n[i]=s[i])}),n},mV=["children","width","height","viewBox","className","style","title","desc"];function yj(){return yj=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},yj.apply(null,arguments)}function xV(t,a){if(t==null)return{};var r,s,n=hV(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hV(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var gE=g.forwardRef((t,a)=>{var{children:r,width:s,height:n,viewBox:i,className:o,style:d,title:u,desc:m}=t,x=xV(t,mV),f=i||{width:s,height:n,x:0,y:0},b=Ba("recharts-surface",o);return g.createElement("svg",yj({},Ar(x,!0,"svg"),{className:b,width:s,height:n,style:d,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:a}),g.createElement("title",null,u),g.createElement("desc",null,m),r)}),fV=["children","className"];function bj(){return bj=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},bj.apply(null,arguments)}function pV(t,a){if(t==null)return{};var r,s,n=gV(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gV(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var nn=g.forwardRef((t,a)=>{var{children:r,className:s}=t,n=pV(t,fV),i=Ba("recharts-layer",s);return g.createElement("g",bj({className:i},Ar(n,!0),{ref:a}),r)}),yV=g.createContext(null);function ur(t){return function(){return t}}const yE=Math.cos,yg=Math.sin,Wl=Math.sqrt,bg=Math.PI,vy=2*bg,vj=Math.PI,jj=2*vj,Pu=1e-6,bV=jj-Pu;function bE(t){this._+=t[0];for(let a=1,r=t.length;a<r;++a)this._+=arguments[a]+t[a]}function vV(t){let a=Math.floor(t);if(!(a>=0))throw new Error(`invalid digits: ${t}`);if(a>15)return bE;const r=10**a;return function(s){this._+=s[0];for(let n=1,i=s.length;n<i;++n)this._+=Math.round(arguments[n]*r)/r+s[n]}}class jV{constructor(a){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=a==null?bE:vV(a)}moveTo(a,r){this._append`M${this._x0=this._x1=+a},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(a,r){this._append`L${this._x1=+a},${this._y1=+r}`}quadraticCurveTo(a,r,s,n){this._append`Q${+a},${+r},${this._x1=+s},${this._y1=+n}`}bezierCurveTo(a,r,s,n,i,o){this._append`C${+a},${+r},${+s},${+n},${this._x1=+i},${this._y1=+o}`}arcTo(a,r,s,n,i){if(a=+a,r=+r,s=+s,n=+n,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,d=this._y1,u=s-a,m=n-r,x=o-a,f=d-r,b=x*x+f*f;if(this._x1===null)this._append`M${this._x1=a},${this._y1=r}`;else if(b>Pu)if(!(Math.abs(f*u-m*x)>Pu)||!i)this._append`L${this._x1=a},${this._y1=r}`;else{let p=s-o,v=n-d,j=u*u+m*m,N=p*p+v*v,w=Math.sqrt(j),P=Math.sqrt(b),k=i*Math.tan((vj-Math.acos((j+b-N)/(2*w*P)))/2),$=k/P,O=k/w;Math.abs($-1)>Pu&&this._append`L${a+$*x},${r+$*f}`,this._append`A${i},${i},0,0,${+(f*p>x*v)},${this._x1=a+O*u},${this._y1=r+O*m}`}}arc(a,r,s,n,i,o){if(a=+a,r=+r,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let d=s*Math.cos(n),u=s*Math.sin(n),m=a+d,x=r+u,f=1^o,b=o?n-i:i-n;this._x1===null?this._append`M${m},${x}`:(Math.abs(this._x1-m)>Pu||Math.abs(this._y1-x)>Pu)&&this._append`L${m},${x}`,s&&(b<0&&(b=b%jj+jj),b>bV?this._append`A${s},${s},0,1,${f},${a-d},${r-u}A${s},${s},0,1,${f},${this._x1=m},${this._y1=x}`:b>Pu&&this._append`A${s},${s},0,${+(b>=vj)},${f},${this._x1=a+s*Math.cos(i)},${this._y1=r+s*Math.sin(i)}`)}rect(a,r,s,n){this._append`M${this._x0=this._x1=+a},${this._y0=this._y1=+r}h${s=+s}v${+n}h${-s}Z`}toString(){return this._}}function $N(t){let a=3;return t.digits=function(r){if(!arguments.length)return a;if(r==null)a=null;else{const s=Math.floor(r);if(!(s>=0))throw new RangeError(`invalid digits: ${r}`);a=s}return t},()=>new jV(a)}function FN(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function vE(t){this._context=t}vE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,a){switch(t=+t,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break;case 1:this._point=2;default:this._context.lineTo(t,a);break}}};function jy(t){return new vE(t)}function jE(t){return t[0]}function NE(t){return t[1]}function wE(t,a){var r=ur(!0),s=null,n=jy,i=null,o=$N(d);t=typeof t=="function"?t:t===void 0?jE:ur(t),a=typeof a=="function"?a:a===void 0?NE:ur(a);function d(u){var m,x=(u=FN(u)).length,f,b=!1,p;for(s==null&&(i=n(p=o())),m=0;m<=x;++m)!(m<x&&r(f=u[m],m,u))===b&&((b=!b)?i.lineStart():i.lineEnd()),b&&i.point(+t(f,m,u),+a(f,m,u));if(p)return i=null,p+""||null}return d.x=function(u){return arguments.length?(t=typeof u=="function"?u:ur(+u),d):t},d.y=function(u){return arguments.length?(a=typeof u=="function"?u:ur(+u),d):a},d.defined=function(u){return arguments.length?(r=typeof u=="function"?u:ur(!!u),d):r},d.curve=function(u){return arguments.length?(n=u,s!=null&&(i=n(s)),d):n},d.context=function(u){return arguments.length?(u==null?s=i=null:i=n(s=u),d):s},d}function Sp(t,a,r){var s=null,n=ur(!0),i=null,o=jy,d=null,u=$N(m);t=typeof t=="function"?t:t===void 0?jE:ur(+t),a=typeof a=="function"?a:ur(a===void 0?0:+a),r=typeof r=="function"?r:r===void 0?NE:ur(+r);function m(f){var b,p,v,j=(f=FN(f)).length,N,w=!1,P,k=new Array(j),$=new Array(j);for(i==null&&(d=o(P=u())),b=0;b<=j;++b){if(!(b<j&&n(N=f[b],b,f))===w)if(w=!w)p=b,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),v=b-1;v>=p;--v)d.point(k[v],$[v]);d.lineEnd(),d.areaEnd()}w&&(k[b]=+t(N,b,f),$[b]=+a(N,b,f),d.point(s?+s(N,b,f):k[b],r?+r(N,b,f):$[b]))}if(P)return d=null,P+""||null}function x(){return wE().defined(n).curve(o).context(i)}return m.x=function(f){return arguments.length?(t=typeof f=="function"?f:ur(+f),s=null,m):t},m.x0=function(f){return arguments.length?(t=typeof f=="function"?f:ur(+f),m):t},m.x1=function(f){return arguments.length?(s=f==null?null:typeof f=="function"?f:ur(+f),m):s},m.y=function(f){return arguments.length?(a=typeof f=="function"?f:ur(+f),r=null,m):a},m.y0=function(f){return arguments.length?(a=typeof f=="function"?f:ur(+f),m):a},m.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ur(+f),m):r},m.lineX0=m.lineY0=function(){return x().x(t).y(a)},m.lineY1=function(){return x().x(t).y(r)},m.lineX1=function(){return x().x(s).y(a)},m.defined=function(f){return arguments.length?(n=typeof f=="function"?f:ur(!!f),m):n},m.curve=function(f){return arguments.length?(o=f,i!=null&&(d=o(i)),m):o},m.context=function(f){return arguments.length?(f==null?i=d=null:d=o(i=f),m):i},m}class SE{constructor(a,r){this._context=a,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(a,r){switch(a=+a,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(a,r):this._context.moveTo(a,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+a)/2,this._y0,this._x0,r,a,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,a,this._y0,a,r);break}}this._x0=a,this._y0=r}}function NV(t){return new SE(t,!0)}function wV(t){return new SE(t,!1)}const IN={draw(t,a){const r=Wl(a/bg);t.moveTo(r,0),t.arc(0,0,r,0,vy)}},SV={draw(t,a){const r=Wl(a/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},_E=Wl(1/3),_V=_E*2,AV={draw(t,a){const r=Wl(a/_V),s=r*_E;t.moveTo(0,-r),t.lineTo(s,0),t.lineTo(0,r),t.lineTo(-s,0),t.closePath()}},kV={draw(t,a){const r=Wl(a),s=-r/2;t.rect(s,s,r,r)}},CV=.8908130915292852,AE=yg(bg/10)/yg(7*bg/10),EV=yg(vy/10)*AE,TV=-yE(vy/10)*AE,PV={draw(t,a){const r=Wl(a*CV),s=EV*r,n=TV*r;t.moveTo(0,-r),t.lineTo(s,n);for(let i=1;i<5;++i){const o=vy*i/5,d=yE(o),u=yg(o);t.lineTo(u*r,-d*r),t.lineTo(d*s-u*n,u*s+d*n)}t.closePath()}},i1=Wl(3),OV={draw(t,a){const r=-Wl(a/(i1*3));t.moveTo(0,r*2),t.lineTo(-i1*r,-r),t.lineTo(i1*r,-r),t.closePath()}},il=-.5,ll=Wl(3)/2,Nj=1/Wl(12),DV=(Nj/2+1)*3,LV={draw(t,a){const r=Wl(a/DV),s=r/2,n=r*Nj,i=s,o=r*Nj+r,d=-i,u=o;t.moveTo(s,n),t.lineTo(i,o),t.lineTo(d,u),t.lineTo(il*s-ll*n,ll*s+il*n),t.lineTo(il*i-ll*o,ll*i+il*o),t.lineTo(il*d-ll*u,ll*d+il*u),t.lineTo(il*s+ll*n,il*n-ll*s),t.lineTo(il*i+ll*o,il*o-ll*i),t.lineTo(il*d+ll*u,il*u-ll*d),t.closePath()}};function MV(t,a){let r=null,s=$N(n);t=typeof t=="function"?t:ur(t||IN),a=typeof a=="function"?a:ur(a===void 0?64:+a);function n(){let i;if(r||(r=i=s()),t.apply(this,arguments).draw(r,+a.apply(this,arguments)),i)return r=null,i+""||null}return n.type=function(i){return arguments.length?(t=typeof i=="function"?i:ur(i),n):t},n.size=function(i){return arguments.length?(a=typeof i=="function"?i:ur(+i),n):a},n.context=function(i){return arguments.length?(r=i??null,n):r},n}function vg(){}function jg(t,a,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+a)/6,(t._y0+4*t._y1+r)/6)}function kE(t){this._context=t}kE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,a){switch(t=+t,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jg(this,t,a);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=a}};function RV(t){return new kE(t)}function CE(t){this._context=t}CE.prototype={areaStart:vg,areaEnd:vg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,a){switch(t=+t,a=+a,this._point){case 0:this._point=1,this._x2=t,this._y2=a;break;case 1:this._point=2,this._x3=t,this._y3=a;break;case 2:this._point=3,this._x4=t,this._y4=a,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+a)/6);break;default:jg(this,t,a);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=a}};function $V(t){return new CE(t)}function EE(t){this._context=t}EE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,a){switch(t=+t,a=+a,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,s=(this._y0+4*this._y1+a)/6;this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break;case 3:this._point=4;default:jg(this,t,a);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=a}};function FV(t){return new EE(t)}function TE(t){this._context=t}TE.prototype={areaStart:vg,areaEnd:vg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,a){t=+t,a=+a,this._point?this._context.lineTo(t,a):(this._point=1,this._context.moveTo(t,a))}};function IV(t){return new TE(t)}function j_(t){return t<0?-1:1}function N_(t,a,r){var s=t._x1-t._x0,n=a-t._x1,i=(t._y1-t._y0)/(s||n<0&&-0),o=(r-t._y1)/(n||s<0&&-0),d=(i*n+o*s)/(s+n);return(j_(i)+j_(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(d))||0}function w_(t,a){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-a)/2:a}function l1(t,a,r){var s=t._x0,n=t._y0,i=t._x1,o=t._y1,d=(i-s)/3;t._context.bezierCurveTo(s+d,n+d*a,i-d,o-d*r,i,o)}function Ng(t){this._context=t}Ng.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:l1(this,this._t0,w_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,a){var r=NaN;if(t=+t,a=+a,!(t===this._x1&&a===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break;case 1:this._point=2;break;case 2:this._point=3,l1(this,w_(this,r=N_(this,t,a)),r);break;default:l1(this,this._t0,r=N_(this,t,a));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=a,this._t0=r}}};function PE(t){this._context=new OE(t)}(PE.prototype=Object.create(Ng.prototype)).point=function(t,a){Ng.prototype.point.call(this,a,t)};function OE(t){this._context=t}OE.prototype={moveTo:function(t,a){this._context.moveTo(a,t)},closePath:function(){this._context.closePath()},lineTo:function(t,a){this._context.lineTo(a,t)},bezierCurveTo:function(t,a,r,s,n,i){this._context.bezierCurveTo(a,t,s,r,i,n)}};function BV(t){return new Ng(t)}function zV(t){return new PE(t)}function DE(t){this._context=t}DE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,a=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],a[0]):this._context.moveTo(t[0],a[0]),r===2)this._context.lineTo(t[1],a[1]);else for(var s=S_(t),n=S_(a),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(s[0][i],n[0][i],s[1][i],n[1][i],t[o],a[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,a){this._x.push(+t),this._y.push(+a)}};function S_(t){var a,r=t.length-1,s,n=new Array(r),i=new Array(r),o=new Array(r);for(n[0]=0,i[0]=2,o[0]=t[0]+2*t[1],a=1;a<r-1;++a)n[a]=1,i[a]=4,o[a]=4*t[a]+2*t[a+1];for(n[r-1]=2,i[r-1]=7,o[r-1]=8*t[r-1]+t[r],a=1;a<r;++a)s=n[a]/i[a-1],i[a]-=s,o[a]-=s*o[a-1];for(n[r-1]=o[r-1]/i[r-1],a=r-2;a>=0;--a)n[a]=(o[a]-n[a+1])/i[a];for(i[r-1]=(t[r]+n[r-1])/2,a=0;a<r-1;++a)i[a]=2*t[a+1]-n[a+1];return[n,i]}function qV(t){return new DE(t)}function Ny(t,a){this._context=t,this._t=a}Ny.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,a){switch(t=+t,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,a),this._context.lineTo(t,a);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,a)}break}}this._x=t,this._y=a}};function UV(t){return new Ny(t,.5)}function HV(t){return new Ny(t,0)}function YV(t){return new Ny(t,1)}function Ex(t,a){if((o=t.length)>1)for(var r=1,s,n,i=t[a[0]],o,d=i.length;r<o;++r)for(n=i,i=t[a[r]],s=0;s<d;++s)i[s][1]+=i[s][0]=isNaN(n[s][1])?n[s][0]:n[s][1]}function wj(t){for(var a=t.length,r=new Array(a);--a>=0;)r[a]=a;return r}function GV(t,a){return t[a]}function VV(t){const a=[];return a.key=t,a}function WV(){var t=ur([]),a=wj,r=Ex,s=GV;function n(i){var o=Array.from(t.apply(this,arguments),VV),d,u=o.length,m=-1,x;for(const f of i)for(d=0,++m;d<u;++d)(o[d][m]=[0,+s(f,o[d].key,m,i)]).data=f;for(d=0,x=FN(a(o));d<u;++d)o[x[d]].index=d;return r(o,x),o}return n.keys=function(i){return arguments.length?(t=typeof i=="function"?i:ur(Array.from(i)),n):t},n.value=function(i){return arguments.length?(s=typeof i=="function"?i:ur(+i),n):s},n.order=function(i){return arguments.length?(a=i==null?wj:typeof i=="function"?i:ur(Array.from(i)),n):a},n.offset=function(i){return arguments.length?(r=i??Ex,n):r},n}function KV(t,a){if((s=t.length)>0){for(var r,s,n=0,i=t[0].length,o;n<i;++n){for(o=r=0;r<s;++r)o+=t[r][n][1]||0;if(o)for(r=0;r<s;++r)t[r][n][1]/=o}Ex(t,a)}}function XV(t,a){if((n=t.length)>0){for(var r=0,s=t[a[0]],n,i=s.length;r<i;++r){for(var o=0,d=0;o<n;++o)d+=t[o][r][1]||0;s[r][1]+=s[r][0]=-d/2}Ex(t,a)}}function JV(t,a){if(!(!((o=t.length)>0)||!((i=(n=t[a[0]]).length)>0))){for(var r=0,s=1,n,i,o;s<i;++s){for(var d=0,u=0,m=0;d<o;++d){for(var x=t[a[d]],f=x[s][1]||0,b=x[s-1][1]||0,p=(f-b)/2,v=0;v<d;++v){var j=t[a[v]],N=j[s][1]||0,w=j[s-1][1]||0;p+=N-w}u+=f,m+=p*f}n[s-1][1]+=n[s-1][0]=r,u&&(r-=m/u)}n[s-1][1]+=n[s-1][0]=r,Ex(t,a)}}var ZV=["type","size","sizeType"];function Sj(){return Sj=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Sj.apply(null,arguments)}function __(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function A_(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?__(Object(r),!0).forEach(function(s){QV(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):__(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function QV(t,a,r){return(a=eW(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function eW(t){var a=tW(t,"string");return typeof a=="symbol"?a:a+""}function tW(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function aW(t,a){if(t==null)return{};var r,s,n=rW(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rW(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var LE={symbolCircle:IN,symbolCross:SV,symbolDiamond:AV,symbolSquare:kV,symbolStar:PV,symbolTriangle:OV,symbolWye:LV},sW=Math.PI/180,nW=t=>{var a="symbol".concat(Kf(t));return LE[a]||IN},iW=(t,a,r)=>{if(a==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*sW;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.tan(s)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},lW=(t,a)=>{LE["symbol".concat(Kf(t))]=a},ME=t=>{var{type:a="circle",size:r=64,sizeType:s="area"}=t,n=aW(t,ZV),i=A_(A_({},n),{},{type:a,size:r,sizeType:s}),o="circle";typeof a=="string"&&(o=a);var d=()=>{var b=nW(o),p=MV().type(b).size(iW(r,s,o));return p()},{className:u,cx:m,cy:x}=i,f=Ar(i,!0);return m===+m&&x===+x&&r===+r?g.createElement("path",Sj({},f,{className:Ba("recharts-symbols",u),transform:"translate(".concat(m,", ").concat(x,")"),d:d()})):null};ME.registerSymbol=lW;var o1={},c1={},k_;function oW(){return k_||(k_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r,s){const n=new Map;for(let i=0;i<r.length;i++){const o=r[i],d=s(o);n.has(d)||n.set(d,o)}return Array.from(n.values())}t.uniqBy=a}(c1)),c1}var d1={},C_;function RE(){return C_||(C_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return r}t.identity=a}(d1)),d1}var u1={},m1={},x1={},E_;function cW(){return E_||(E_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=a}(x1)),x1}var T_;function BN(){return T_||(T_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=cW();function r(s){return s!=null&&typeof s!="function"&&a.isLength(s.length)}t.isArrayLike=r}(m1)),m1}var h1={},P_;function dW(){return P_||(P_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return typeof r=="object"&&r!==null}t.isObjectLike=a}(h1)),h1}var O_;function uW(){return O_||(O_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=BN(),r=dW();function s(n){return r.isObjectLike(n)&&a.isArrayLike(n)}t.isArrayLikeObject=s}(u1)),u1}var f1={},p1={},D_;function mW(){return D_||(D_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=DN();function r(s){return function(n){return a.get(n,s)}}t.property=r}(p1)),p1}var g1={},y1={},b1={},v1={},L_;function $E(){return L_||(L_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=a}(v1)),v1}var j1={},M_;function FE(){return M_||(M_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=a}(j1)),j1}var N1={},R_;function IE(){return R_||(R_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r,s){return r===s||Number.isNaN(r)&&Number.isNaN(s)}t.eq=a}(N1)),N1}var $_;function xW(){return $_||($_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=zN(),r=$E(),s=FE(),n=IE();function i(f,b,p){return typeof p!="function"?a.isMatch(f,b):o(f,b,function v(j,N,w,P,k,$){const O=p(j,N,w,P,k,$);return O!==void 0?!!O:o(j,N,v,$)},new Map)}function o(f,b,p,v){if(b===f)return!0;switch(typeof b){case"object":return d(f,b,p,v);case"function":return Object.keys(b).length>0?o(f,{...b},p,v):n.eq(f,b);default:return r.isObject(f)?typeof b=="string"?b==="":!0:n.eq(f,b)}}function d(f,b,p,v){if(b==null)return!0;if(Array.isArray(b))return m(f,b,p,v);if(b instanceof Map)return u(f,b,p,v);if(b instanceof Set)return x(f,b,p,v);const j=Object.keys(b);if(f==null)return j.length===0;if(j.length===0)return!0;if(v&&v.has(b))return v.get(b)===f;v&&v.set(b,f);try{for(let N=0;N<j.length;N++){const w=j[N];if(!s.isPrimitive(f)&&!(w in f)||b[w]===void 0&&f[w]!==void 0||b[w]===null&&f[w]!==null||!p(f[w],b[w],w,f,b,v))return!1}return!0}finally{v&&v.delete(b)}}function u(f,b,p,v){if(b.size===0)return!0;if(!(f instanceof Map))return!1;for(const[j,N]of b.entries()){const w=f.get(j);if(p(w,N,j,f,b,v)===!1)return!1}return!0}function m(f,b,p,v){if(b.length===0)return!0;if(!Array.isArray(f))return!1;const j=new Set;for(let N=0;N<b.length;N++){const w=b[N];let P=!1;for(let k=0;k<f.length;k++){if(j.has(k))continue;const $=f[k];let O=!1;if(p($,w,N,f,b,v)&&(O=!0),O){j.add(k),P=!0;break}}if(!P)return!1}return!0}function x(f,b,p,v){return b.size===0?!0:f instanceof Set?m([...f],[...b],p,v):!1}t.isMatchWith=i,t.isSetMatch=x}(b1)),b1}var F_;function zN(){return F_||(F_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=xW();function r(s,n){return a.isMatchWith(s,n,()=>{})}t.isMatch=r}(y1)),y1}var w1={},S1={},_1={},I_;function hW(){return I_||(I_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return Object.getOwnPropertySymbols(r).filter(s=>Object.prototype.propertyIsEnumerable.call(r,s))}t.getSymbols=a}(_1)),_1}var A1={},B_;function BE(){return B_||(B_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=a}(A1)),A1}var k1={},z_;function zE(){return z_||(z_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a="[object RegExp]",r="[object String]",s="[object Number]",n="[object Boolean]",i="[object Arguments]",o="[object Symbol]",d="[object Date]",u="[object Map]",m="[object Set]",x="[object Array]",f="[object Function]",b="[object ArrayBuffer]",p="[object Object]",v="[object Error]",j="[object DataView]",N="[object Uint8Array]",w="[object Uint8ClampedArray]",P="[object Uint16Array]",k="[object Uint32Array]",$="[object BigUint64Array]",O="[object Int8Array]",L="[object Int16Array]",_="[object Int32Array]",E="[object BigInt64Array]",A="[object Float32Array]",z="[object Float64Array]";t.argumentsTag=i,t.arrayBufferTag=b,t.arrayTag=x,t.bigInt64ArrayTag=E,t.bigUint64ArrayTag=$,t.booleanTag=n,t.dataViewTag=j,t.dateTag=d,t.errorTag=v,t.float32ArrayTag=A,t.float64ArrayTag=z,t.functionTag=f,t.int16ArrayTag=L,t.int32ArrayTag=_,t.int8ArrayTag=O,t.mapTag=u,t.numberTag=s,t.objectTag=p,t.regexpTag=a,t.setTag=m,t.stringTag=r,t.symbolTag=o,t.uint16ArrayTag=P,t.uint32ArrayTag=k,t.uint8ArrayTag=N,t.uint8ClampedArrayTag=w}(k1)),k1}var C1={},q_;function fW(){return q_||(q_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=a}(C1)),C1}var U_;function qE(){return U_||(U_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=hW(),r=BE(),s=zE(),n=FE(),i=fW();function o(x,f){return d(x,void 0,x,new Map,f)}function d(x,f,b,p=new Map,v=void 0){const j=v?.(x,f,b,p);if(j!==void 0)return j;if(n.isPrimitive(x))return x;if(p.has(x))return p.get(x);if(Array.isArray(x)){const N=new Array(x.length);p.set(x,N);for(let w=0;w<x.length;w++)N[w]=d(x[w],w,b,p,v);return Object.hasOwn(x,"index")&&(N.index=x.index),Object.hasOwn(x,"input")&&(N.input=x.input),N}if(x instanceof Date)return new Date(x.getTime());if(x instanceof RegExp){const N=new RegExp(x.source,x.flags);return N.lastIndex=x.lastIndex,N}if(x instanceof Map){const N=new Map;p.set(x,N);for(const[w,P]of x)N.set(w,d(P,w,b,p,v));return N}if(x instanceof Set){const N=new Set;p.set(x,N);for(const w of x)N.add(d(w,void 0,b,p,v));return N}if(typeof Buffer<"u"&&Buffer.isBuffer(x))return x.subarray();if(i.isTypedArray(x)){const N=new(Object.getPrototypeOf(x)).constructor(x.length);p.set(x,N);for(let w=0;w<x.length;w++)N[w]=d(x[w],w,b,p,v);return N}if(x instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&x instanceof SharedArrayBuffer)return x.slice(0);if(x instanceof DataView){const N=new DataView(x.buffer.slice(0),x.byteOffset,x.byteLength);return p.set(x,N),u(N,x,b,p,v),N}if(typeof File<"u"&&x instanceof File){const N=new File([x],x.name,{type:x.type});return p.set(x,N),u(N,x,b,p,v),N}if(x instanceof Blob){const N=new Blob([x],{type:x.type});return p.set(x,N),u(N,x,b,p,v),N}if(x instanceof Error){const N=new x.constructor;return p.set(x,N),N.message=x.message,N.name=x.name,N.stack=x.stack,N.cause=x.cause,u(N,x,b,p,v),N}if(typeof x=="object"&&m(x)){const N=Object.create(Object.getPrototypeOf(x));return p.set(x,N),u(N,x,b,p,v),N}return x}function u(x,f,b=x,p,v){const j=[...Object.keys(f),...a.getSymbols(f)];for(let N=0;N<j.length;N++){const w=j[N],P=Object.getOwnPropertyDescriptor(x,w);(P==null||P.writable)&&(x[w]=d(f[w],w,b,p,v))}}function m(x){switch(r.getTag(x)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=d,t.copyProperties=u}(S1)),S1}var H_;function pW(){return H_||(H_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=qE();function r(s){return a.cloneDeepWithImpl(s,void 0,s,new Map,void 0)}t.cloneDeep=r}(w1)),w1}var Y_;function gW(){return Y_||(Y_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=zN(),r=pW();function s(n){return n=r.cloneDeep(n),i=>a.isMatch(i,n)}t.matches=s}(g1)),g1}var E1={},T1={},P1={},G_;function yW(){return G_||(G_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=qE(),r=zE();function s(n,i){return a.cloneDeepWith(n,(o,d,u,m)=>{const x=i?.(o,d,u,m);if(x!==void 0)return x;if(typeof n=="object")switch(Object.prototype.toString.call(n)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new n.constructor(n?.valueOf());return a.copyProperties(f,n),f}case r.argumentsTag:{const f={};return a.copyProperties(f,n),f.length=n.length,f[Symbol.iterator]=n[Symbol.iterator],f}default:return}})}t.cloneDeepWith=s}(P1)),P1}var V_;function bW(){return V_||(V_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=yW();function r(s){return a.cloneDeepWith(s)}t.cloneDeep=r}(T1)),T1}var O1={},D1={},W_;function UE(){return W_||(W_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=/^(?:0|[1-9]\d*)$/;function r(s,n=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<n;case"symbol":return!1;case"string":return a.test(s)}}t.isIndex=r}(D1)),D1}var L1={},K_;function vW(){return K_||(K_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=BE();function r(s){return s!==null&&typeof s=="object"&&a.getTag(s)==="[object Arguments]"}t.isArguments=r}(L1)),L1}var X_;function jW(){return X_||(X_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=dE(),r=UE(),s=vW(),n=ON();function i(o,d){let u;if(Array.isArray(d)?u=d:typeof d=="string"&&a.isDeepKey(d)&&o?.[d]==null?u=n.toPath(d):u=[d],u.length===0)return!1;let m=o;for(let x=0;x<u.length;x++){const f=u[x];if((m==null||!Object.hasOwn(m,f))&&!((Array.isArray(m)||s.isArguments(m))&&r.isIndex(f)&&f<m.length))return!1;m=m[f]}return!0}t.has=i}(O1)),O1}var J_;function NW(){return J_||(J_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=zN(),r=uE(),s=bW(),n=DN(),i=jW();function o(d,u){switch(typeof d){case"object":{Object.is(d?.valueOf(),-0)&&(d="-0");break}case"number":{d=r.toKey(d);break}}return u=s.cloneDeep(u),function(m){const x=n.get(m,d);return x===void 0?i.has(m,d):u===void 0?x===void 0:a.isMatch(x,u)}}t.matchesProperty=o}(E1)),E1}var Z_;function wW(){return Z_||(Z_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=RE(),r=mW(),s=gW(),n=NW();function i(o){if(o==null)return a.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?n.matchesProperty(o[0],o[1]):s.matches(o);case"string":case"symbol":case"number":return r.property(o)}}t.iteratee=i}(f1)),f1}var Q_;function SW(){return Q_||(Q_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=oW(),r=RE(),s=uW(),n=wW();function i(o,d=r.identity){return s.isArrayLikeObject(o)?a.uniqBy(Array.from(o),n.iteratee(d)):[]}t.uniqBy=i}(o1)),o1}var M1,e8;function _W(){return e8||(e8=1,M1=SW().uniqBy),M1}var AW=_W();const t8=Po(AW);function kW(t,a,r){return a===!0?t8(t,r):typeof a=="function"?t8(t,a):t}var R1={exports:{}},$1={},F1={exports:{}},I1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a8;function CW(){if(a8)return I1;a8=1;var t=Rx();function a(f,b){return f===b&&(f!==0||1/f===1/b)||f!==f&&b!==b}var r=typeof Object.is=="function"?Object.is:a,s=t.useState,n=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function d(f,b){var p=b(),v=s({inst:{value:p,getSnapshot:b}}),j=v[0].inst,N=v[1];return i(function(){j.value=p,j.getSnapshot=b,u(j)&&N({inst:j})},[f,p,b]),n(function(){return u(j)&&N({inst:j}),f(function(){u(j)&&N({inst:j})})},[f]),o(p),p}function u(f){var b=f.getSnapshot;f=f.value;try{var p=b();return!r(f,p)}catch{return!0}}function m(f,b){return b()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return I1.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:x,I1}var r8;function EW(){return r8||(r8=1,F1.exports=CW()),F1.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s8;function TW(){if(s8)return $1;s8=1;var t=Rx(),a=EW();function r(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var s=typeof Object.is=="function"?Object.is:r,n=a.useSyncExternalStore,i=t.useRef,o=t.useEffect,d=t.useMemo,u=t.useDebugValue;return $1.useSyncExternalStoreWithSelector=function(m,x,f,b,p){var v=i(null);if(v.current===null){var j={hasValue:!1,value:null};v.current=j}else j=v.current;v=d(function(){function w(L){if(!P){if(P=!0,k=L,L=b(L),p!==void 0&&j.hasValue){var _=j.value;if(p(_,L))return $=_}return $=L}if(_=$,s(k,L))return _;var E=b(L);return p!==void 0&&p(_,E)?(k=L,_):(k=L,$=E)}var P=!1,k,$,O=f===void 0?null:f;return[function(){return w(x())},O===null?void 0:function(){return w(O())}]},[x,f,b,p]);var N=n(m,v[0],v[1]);return o(function(){j.hasValue=!0,j.value=N},[N]),u(N),N},$1}var n8;function PW(){return n8||(n8=1,R1.exports=TW()),R1.exports}var OW=PW(),qN=g.createContext(null),DW=t=>t,ss=()=>{var t=g.useContext(qN);return t?t.store.dispatch:DW},eg=()=>{},LW=()=>eg,MW=(t,a)=>t===a;function Lt(t){var a=g.useContext(qN);return OW.useSyncExternalStoreWithSelector(a?a.subscription.addNestedSub:LW,a?a.store.getState:eg,a?a.store.getState:eg,a?t:eg,MW)}function RW(t,a=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(a)}function $W(t,a=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(a)}function FW(t,a="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${a}[${r}]`)}}var i8=t=>Array.isArray(t)?t:[t];function IW(t){const a=Array.isArray(t[0])?t[0]:t;return FW(a,"createSelector expects all input-selectors to be functions, but received the following types: "),a}function BW(t,a){const r=[],{length:s}=t;for(let n=0;n<s;n++)r.push(t[n].apply(null,a));return r}var zW=class{constructor(t){this.value=t}deref(){return this.value}},qW=typeof WeakRef<"u"?WeakRef:zW,UW=0,l8=1;function _p(){return{s:UW,v:void 0,o:null,p:null}}function HE(t,a={}){let r=_p();const{resultEqualityCheck:s}=a;let n,i=0;function o(){let d=r;const{length:u}=arguments;for(let f=0,b=u;f<b;f++){const p=arguments[f];if(typeof p=="function"||typeof p=="object"&&p!==null){let v=d.o;v===null&&(d.o=v=new WeakMap);const j=v.get(p);j===void 0?(d=_p(),v.set(p,d)):d=j}else{let v=d.p;v===null&&(d.p=v=new Map);const j=v.get(p);j===void 0?(d=_p(),v.set(p,d)):d=j}}const m=d;let x;if(d.s===l8)x=d.v;else if(x=t.apply(null,arguments),i++,s){const f=n?.deref?.()??n;f!=null&&s(f,x)&&(x=f,i!==0&&i--),n=typeof x=="object"&&x!==null||typeof x=="function"?new qW(x):x}return m.s=l8,m.v=x,x}return o.clearCache=()=>{r=_p(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function HW(t,...a){const r=typeof t=="function"?{memoize:t,memoizeOptions:a}:t,s=(...n)=>{let i=0,o=0,d,u={},m=n.pop();typeof m=="object"&&(u=m,m=n.pop()),RW(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const x={...r,...u},{memoize:f,memoizeOptions:b=[],argsMemoize:p=HE,argsMemoizeOptions:v=[]}=x,j=i8(b),N=i8(v),w=IW(n),P=f(function(){return i++,m.apply(null,arguments)},...j),k=p(function(){o++;const O=BW(w,arguments);return d=P.apply(null,O),d},...N);return Object.assign(k,{resultFunc:m,memoizedResultFunc:P,dependencies:w,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>d,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:p})};return Object.assign(s,{withTypes:()=>s}),s}var We=HW(HE),YW=Object.assign((t,a=We)=>{$W(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),s=r.map(i=>t[i]);return a(s,(...i)=>i.reduce((o,d,u)=>(o[r[u]]=d,o),{}))},{withTypes:()=>YW}),B1={},z1={},q1={},o8;function GW(){return o8||(o8=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(s){return typeof s=="symbol"?1:s===null?2:s===void 0?3:s!==s?4:0}const r=(s,n,i)=>{if(s!==n){const o=a(s),d=a(n);if(o===d&&o===0){if(s<n)return i==="desc"?1:-1;if(s>n)return i==="desc"?-1:1}return i==="desc"?d-o:o-d}return 0};t.compareValues=r}(q1)),q1}var U1={},H1={},c8;function YE(){return c8||(c8=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=a}(H1)),H1}var d8;function VW(){return d8||(d8=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=YE(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function n(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||a.isSymbol(i)?!0:typeof i=="string"&&(s.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}t.isKey=n}(U1)),U1}var u8;function WW(){return u8||(u8=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=GW(),r=VW(),s=ON();function n(i,o,d,u){if(i==null)return[];d=u?void 0:d,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(p=>String(p));const m=(p,v)=>{let j=p;for(let N=0;N<v.length&&j!=null;++N)j=j[v[N]];return j},x=(p,v)=>v==null||p==null?v:typeof p=="object"&&"key"in p?Object.hasOwn(v,p.key)?v[p.key]:m(v,p.path):typeof p=="function"?p(v):Array.isArray(p)?m(v,p):typeof v=="object"?v[p]:v,f=o.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:s.toPath(p)}));return i.map(p=>({original:p,criteria:f.map(v=>x(v,p))})).slice().sort((p,v)=>{for(let j=0;j<f.length;j++){const N=a.compareValues(p.criteria[j],v.criteria[j],d[j]);if(N!==0)return N}return 0}).map(p=>p.original)}t.orderBy=n}(z1)),z1}var Y1={},m8;function KW(){return m8||(m8=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r,s=1){const n=[],i=Math.floor(s),o=(d,u)=>{for(let m=0;m<d.length;m++){const x=d[m];Array.isArray(x)&&u<i?o(x,u+1):n.push(x)}};return o(r,0),n}t.flatten=a}(Y1)),Y1}var G1={},x8;function GE(){return x8||(x8=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=UE(),r=BN(),s=$E(),n=IE();function i(o,d,u){return s.isObject(u)&&(typeof d=="number"&&r.isArrayLike(u)&&a.isIndex(d)&&d<u.length||typeof d=="string"&&d in u)?n.eq(u[d],o):!1}t.isIterateeCall=i}(G1)),G1}var h8;function XW(){return h8||(h8=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=WW(),r=KW(),s=GE();function n(i,...o){const d=o.length;return d>1&&s.isIterateeCall(i,o[0],o[1])?o=[]:d>2&&s.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),a.orderBy(i,r.flatten(o),["asc"])}t.sortBy=n}(B1)),B1}var V1,f8;function JW(){return f8||(f8=1,V1=XW().sortBy),V1}var ZW=JW();const wy=Po(ZW);var VE=t=>t.legend.settings,QW=t=>t.legend.size,eK=t=>t.legend.payload;We([eK,VE],(t,a)=>{var{itemSorter:r}=a,s=t.flat(1);return r?wy(s,r):s});var Ap=1;function tK(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[a,r]=g.useState({height:0,left:0,top:0,width:0}),s=g.useCallback(n=>{if(n!=null){var i=n.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-a.height)>Ap||Math.abs(o.left-a.left)>Ap||Math.abs(o.top-a.top)>Ap||Math.abs(o.width-a.width)>Ap)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[a.width,a.height,a.top,a.left,...t]);return[a,s]}function tn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var aK=typeof Symbol=="function"&&Symbol.observable||"@@observable",p8=aK,W1=()=>Math.random().toString(36).substring(7).split("").join("."),rK={INIT:`@@redux/INIT${W1()}`,REPLACE:`@@redux/REPLACE${W1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${W1()}`},wg=rK;function UN(t){if(typeof t!="object"||t===null)return!1;let a=t;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(t)===a||Object.getPrototypeOf(t)===null}function WE(t,a,r){if(typeof t!="function")throw new Error(tn(2));if(typeof a=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(tn(0));if(typeof a=="function"&&typeof r>"u"&&(r=a,a=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(tn(1));return r(WE)(t,a)}let s=t,n=a,i=new Map,o=i,d=0,u=!1;function m(){o===i&&(o=new Map,i.forEach((N,w)=>{o.set(w,N)}))}function x(){if(u)throw new Error(tn(3));return n}function f(N){if(typeof N!="function")throw new Error(tn(4));if(u)throw new Error(tn(5));let w=!0;m();const P=d++;return o.set(P,N),function(){if(w){if(u)throw new Error(tn(6));w=!1,m(),o.delete(P),i=null}}}function b(N){if(!UN(N))throw new Error(tn(7));if(typeof N.type>"u")throw new Error(tn(8));if(typeof N.type!="string")throw new Error(tn(17));if(u)throw new Error(tn(9));try{u=!0,n=s(n,N)}finally{u=!1}return(i=o).forEach(P=>{P()}),N}function p(N){if(typeof N!="function")throw new Error(tn(10));s=N,b({type:wg.REPLACE})}function v(){const N=f;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(tn(11));function P(){const $=w;$.next&&$.next(x())}return P(),{unsubscribe:N(P)}},[p8](){return this}}}return b({type:wg.INIT}),{dispatch:b,subscribe:f,getState:x,replaceReducer:p,[p8]:v}}function sK(t){Object.keys(t).forEach(a=>{const r=t[a];if(typeof r(void 0,{type:wg.INIT})>"u")throw new Error(tn(12));if(typeof r(void 0,{type:wg.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(tn(13))})}function KE(t){const a=Object.keys(t),r={};for(let i=0;i<a.length;i++){const o=a[i];typeof t[o]=="function"&&(r[o]=t[o])}const s=Object.keys(r);let n;try{sK(r)}catch(i){n=i}return function(o={},d){if(n)throw n;let u=!1;const m={};for(let x=0;x<s.length;x++){const f=s[x],b=r[f],p=o[f],v=b(p,d);if(typeof v>"u")throw d&&d.type,new Error(tn(14));m[f]=v,u=u||v!==p}return u=u||s.length!==Object.keys(o).length,u?m:o}}function Sg(...t){return t.length===0?a=>a:t.length===1?t[0]:t.reduce((a,r)=>(...s)=>a(r(...s)))}function nK(...t){return a=>(r,s)=>{const n=a(r,s);let i=()=>{throw new Error(tn(15))};const o={getState:n.getState,dispatch:(u,...m)=>i(u,...m)},d=t.map(u=>u(o));return i=Sg(...d)(n.dispatch),{...n,dispatch:i}}}function XE(t){return UN(t)&&"type"in t&&typeof t.type=="string"}var JE=Symbol.for("immer-nothing"),g8=Symbol.for("immer-draftable"),Ti=Symbol.for("immer-state");function Fl(t,...a){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Tx=Object.getPrototypeOf;function nm(t){return!!t&&!!t[Ti]}function Nc(t){return t?ZE(t)||Array.isArray(t)||!!t[g8]||!!t.constructor?.[g8]||Xf(t)||_y(t):!1}var iK=Object.prototype.constructor.toString();function ZE(t){if(!t||typeof t!="object")return!1;const a=Tx(t);if(a===null)return!0;const r=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===iK}function _g(t,a){Sy(t)===0?Reflect.ownKeys(t).forEach(r=>{a(r,t[r],t)}):t.forEach((r,s)=>a(s,r,t))}function Sy(t){const a=t[Ti];return a?a.type_:Array.isArray(t)?1:Xf(t)?2:_y(t)?3:0}function _j(t,a){return Sy(t)===2?t.has(a):Object.prototype.hasOwnProperty.call(t,a)}function QE(t,a,r){const s=Sy(t);s===2?t.set(a,r):s===3?t.add(r):t[a]=r}function lK(t,a){return t===a?t!==0||1/t===1/a:t!==t&&a!==a}function Xf(t){return t instanceof Map}function _y(t){return t instanceof Set}function Ou(t){return t.copy_||t.base_}function Aj(t,a){if(Xf(t))return new Map(t);if(_y(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=ZE(t);if(a===!0||a==="class_only"&&!r){const s=Object.getOwnPropertyDescriptors(t);delete s[Ti];let n=Reflect.ownKeys(s);for(let i=0;i<n.length;i++){const o=n[i],d=s[o];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(s[o]={configurable:!0,writable:!0,enumerable:d.enumerable,value:t[o]})}return Object.create(Tx(t),s)}else{const s=Tx(t);if(s!==null&&r)return{...t};const n=Object.create(s);return Object.assign(n,t)}}function HN(t,a=!1){return Ay(t)||nm(t)||!Nc(t)||(Sy(t)>1&&Object.defineProperties(t,{set:{value:kp},add:{value:kp},clear:{value:kp},delete:{value:kp}}),Object.freeze(t),a&&Object.values(t).forEach(r=>HN(r,!0))),t}function kp(){Fl(2)}function Ay(t){return Object.isFrozen(t)}var oK={};function im(t){const a=oK[t];return a||Fl(0,t),a}var kf;function eT(){return kf}function cK(t,a){return{drafts_:[],parent_:t,immer_:a,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function y8(t,a){a&&(im("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=a)}function kj(t){Cj(t),t.drafts_.forEach(dK),t.drafts_=null}function Cj(t){t===kf&&(kf=t.parent_)}function b8(t){return kf=cK(kf,t)}function dK(t){const a=t[Ti];a.type_===0||a.type_===1?a.revoke_():a.revoked_=!0}function v8(t,a){a.unfinalizedDrafts_=a.drafts_.length;const r=a.drafts_[0];return t!==void 0&&t!==r?(r[Ti].modified_&&(kj(a),Fl(4)),Nc(t)&&(t=Ag(a,t),a.parent_||kg(a,t)),a.patches_&&im("Patches").generateReplacementPatches_(r[Ti].base_,t,a.patches_,a.inversePatches_)):t=Ag(a,r,[]),kj(a),a.patches_&&a.patchListener_(a.patches_,a.inversePatches_),t!==JE?t:void 0}function Ag(t,a,r){if(Ay(a))return a;const s=a[Ti];if(!s)return _g(a,(n,i)=>j8(t,s,a,n,i,r)),a;if(s.scope_!==t)return a;if(!s.modified_)return kg(t,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const n=s.copy_;let i=n,o=!1;s.type_===3&&(i=new Set(n),n.clear(),o=!0),_g(i,(d,u)=>j8(t,s,n,d,u,r,o)),kg(t,n,!1),r&&t.patches_&&im("Patches").generatePatches_(s,r,t.patches_,t.inversePatches_)}return s.copy_}function j8(t,a,r,s,n,i,o){if(nm(n)){const d=i&&a&&a.type_!==3&&!_j(a.assigned_,s)?i.concat(s):void 0,u=Ag(t,n,d);if(QE(r,s,u),nm(u))t.canAutoFreeze_=!1;else return}else o&&r.add(n);if(Nc(n)&&!Ay(n)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Ag(t,n),(!a||!a.scope_.parent_)&&typeof s!="symbol"&&(Xf(r)?r.has(s):Object.prototype.propertyIsEnumerable.call(r,s))&&kg(t,n)}}function kg(t,a,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&HN(a,r)}function uK(t,a){const r=Array.isArray(t),s={type_:r?1:0,scope_:a?a.scope_:eT(),modified_:!1,finalized_:!1,assigned_:{},parent_:a,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=s,i=YN;r&&(n=[s],i=Cf);const{revoke:o,proxy:d}=Proxy.revocable(n,i);return s.draft_=d,s.revoke_=o,d}var YN={get(t,a){if(a===Ti)return t;const r=Ou(t);if(!_j(r,a))return mK(t,r,a);const s=r[a];return t.finalized_||!Nc(s)?s:s===K1(t.base_,a)?(X1(t),t.copy_[a]=Tj(s,t)):s},has(t,a){return a in Ou(t)},ownKeys(t){return Reflect.ownKeys(Ou(t))},set(t,a,r){const s=tT(Ou(t),a);if(s?.set)return s.set.call(t.draft_,r),!0;if(!t.modified_){const n=K1(Ou(t),a),i=n?.[Ti];if(i&&i.base_===r)return t.copy_[a]=r,t.assigned_[a]=!1,!0;if(lK(r,n)&&(r!==void 0||_j(t.base_,a)))return!0;X1(t),Ej(t)}return t.copy_[a]===r&&(r!==void 0||a in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[a])||(t.copy_[a]=r,t.assigned_[a]=!0),!0},deleteProperty(t,a){return K1(t.base_,a)!==void 0||a in t.base_?(t.assigned_[a]=!1,X1(t),Ej(t)):delete t.assigned_[a],t.copy_&&delete t.copy_[a],!0},getOwnPropertyDescriptor(t,a){const r=Ou(t),s=Reflect.getOwnPropertyDescriptor(r,a);return s&&{writable:!0,configurable:t.type_!==1||a!=="length",enumerable:s.enumerable,value:r[a]}},defineProperty(){Fl(11)},getPrototypeOf(t){return Tx(t.base_)},setPrototypeOf(){Fl(12)}},Cf={};_g(YN,(t,a)=>{Cf[t]=function(){return arguments[0]=arguments[0][0],a.apply(this,arguments)}});Cf.deleteProperty=function(t,a){return Cf.set.call(this,t,a,void 0)};Cf.set=function(t,a,r){return YN.set.call(this,t[0],a,r,t[0])};function K1(t,a){const r=t[Ti];return(r?Ou(r):t)[a]}function mK(t,a,r){const s=tT(a,r);return s?"value"in s?s.value:s.get?.call(t.draft_):void 0}function tT(t,a){if(!(a in t))return;let r=Tx(t);for(;r;){const s=Object.getOwnPropertyDescriptor(r,a);if(s)return s;r=Tx(r)}}function Ej(t){t.modified_||(t.modified_=!0,t.parent_&&Ej(t.parent_))}function X1(t){t.copy_||(t.copy_=Aj(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var xK=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(a,r,s)=>{if(typeof a=="function"&&typeof r!="function"){const i=r;r=a;const o=this;return function(u=i,...m){return o.produce(u,x=>r.call(this,x,...m))}}typeof r!="function"&&Fl(6),s!==void 0&&typeof s!="function"&&Fl(7);let n;if(Nc(a)){const i=b8(this),o=Tj(a,void 0);let d=!0;try{n=r(o),d=!1}finally{d?kj(i):Cj(i)}return y8(i,s),v8(n,i)}else if(!a||typeof a!="object"){if(n=r(a),n===void 0&&(n=a),n===JE&&(n=void 0),this.autoFreeze_&&HN(n,!0),s){const i=[],o=[];im("Patches").generateReplacementPatches_(a,n,i,o),s(i,o)}return n}else Fl(1,a)},this.produceWithPatches=(a,r)=>{if(typeof a=="function")return(o,...d)=>this.produceWithPatches(o,u=>a(u,...d));let s,n;return[this.produce(a,r,(o,d)=>{s=o,n=d}),s,n]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Nc(t)||Fl(8),nm(t)&&(t=fc(t));const a=b8(this),r=Tj(t,void 0);return r[Ti].isManual_=!0,Cj(a),r}finishDraft(t,a){const r=t&&t[Ti];(!r||!r.isManual_)&&Fl(9);const{scope_:s}=r;return y8(s,a),v8(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,a){let r;for(r=a.length-1;r>=0;r--){const n=a[r];if(n.path.length===0&&n.op==="replace"){t=n.value;break}}r>-1&&(a=a.slice(r+1));const s=im("Patches").applyPatches_;return nm(t)?s(t,a):this.produce(t,n=>s(n,a))}};function Tj(t,a){const r=Xf(t)?im("MapSet").proxyMap_(t,a):_y(t)?im("MapSet").proxySet_(t,a):uK(t,a);return(a?a.scope_:eT()).drafts_.push(r),r}function fc(t){return nm(t)||Fl(10,t),aT(t)}function aT(t){if(!Nc(t)||Ay(t))return t;const a=t[Ti];let r;if(a){if(!a.modified_)return a.base_;a.finalized_=!0,r=Aj(t,a.scope_.immer_.useStrictShallowCopy_)}else r=Aj(t,!0);return _g(r,(s,n)=>{QE(r,s,aT(n))}),a&&(a.finalized_=!1),r}var hK=new xK,rT=hK.produce;function sT(t){return({dispatch:r,getState:s})=>n=>i=>typeof i=="function"?i(r,s,t):n(i)}var fK=sT(),pK=sT,gK=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Sg:Sg.apply(null,arguments)};function ml(t,a){function r(...s){if(a){let n=a(...s);if(!n)throw new Error(Ci(0));return{type:t,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:t,payload:s[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=s=>XE(s)&&s.type===t,r}var nT=class nf extends Array{constructor(...a){super(...a),Object.setPrototypeOf(this,nf.prototype)}static get[Symbol.species](){return nf}concat(...a){return super.concat.apply(this,a)}prepend(...a){return a.length===1&&Array.isArray(a[0])?new nf(...a[0].concat(this)):new nf(...a.concat(this))}};function N8(t){return Nc(t)?rT(t,()=>{}):t}function Cp(t,a,r){return t.has(a)?t.get(a):t.set(a,r(a)).get(a)}function yK(t){return typeof t=="boolean"}var bK=()=>function(a){const{thunk:r=!0,immutableCheck:s=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=a??{};let o=new nT;return r&&(yK(r)?o.push(fK):o.push(pK(r.extraArgument))),o},vK="RTK_autoBatch",w8=t=>a=>{setTimeout(a,t)},jK=(t={type:"raf"})=>a=>(...r)=>{const s=a(...r);let n=!0,i=!1,o=!1;const d=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:w8(10):t.type==="callback"?t.queueNotification:w8(t.timeout),m=()=>{o=!1,i&&(i=!1,d.forEach(x=>x()))};return Object.assign({},s,{subscribe(x){const f=()=>n&&x(),b=s.subscribe(f);return d.add(x),()=>{b(),d.delete(x)}},dispatch(x){try{return n=!x?.meta?.[vK],i=!n,i&&(o||(o=!0,u(m))),s.dispatch(x)}finally{n=!0}}})},NK=t=>function(r){const{autoBatch:s=!0}=r??{};let n=new nT(t);return s&&n.push(jK(typeof s=="object"?s:void 0)),n};function wK(t){const a=bK(),{reducer:r=void 0,middleware:s,devTools:n=!0,preloadedState:i=void 0,enhancers:o=void 0}=t||{};let d;if(typeof r=="function")d=r;else if(UN(r))d=KE(r);else throw new Error(Ci(1));let u;typeof s=="function"?u=s(a):u=a();let m=Sg;n&&(m=gK({trace:!1,...typeof n=="object"&&n}));const x=nK(...u),f=NK(x);let b=typeof o=="function"?o(f):f();const p=m(...b);return WE(d,i,p)}function iT(t){const a={},r=[];let s;const n={addCase(i,o){const d=typeof i=="string"?i:i.type;if(!d)throw new Error(Ci(28));if(d in a)throw new Error(Ci(29));return a[d]=o,n},addAsyncThunk(i,o){return o.pending&&(a[i.pending.type]=o.pending),o.rejected&&(a[i.rejected.type]=o.rejected),o.fulfilled&&(a[i.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:i.settled,reducer:o.settled}),n},addMatcher(i,o){return r.push({matcher:i,reducer:o}),n},addDefaultCase(i){return s=i,n}};return t(n),[a,r,s]}function SK(t){return typeof t=="function"}function _K(t,a){let[r,s,n]=iT(a),i;if(SK(t))i=()=>N8(t());else{const d=N8(t);i=()=>d}function o(d=i(),u){let m=[r[u.type],...s.filter(({matcher:x})=>x(u)).map(({reducer:x})=>x)];return m.filter(x=>!!x).length===0&&(m=[n]),m.reduce((x,f)=>{if(f)if(nm(x)){const p=f(x,u);return p===void 0?x:p}else{if(Nc(x))return rT(x,b=>f(b,u));{const b=f(x,u);if(b===void 0){if(x===null)return x;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return x},d)}return o.getInitialState=i,o}var AK="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",kK=(t=21)=>{let a="",r=t;for(;r--;)a+=AK[Math.random()*64|0];return a},CK=Symbol.for("rtk-slice-createasyncthunk");function EK(t,a){return`${t}/${a}`}function TK({creators:t}={}){const a=t?.asyncThunk?.[CK];return function(s){const{name:n,reducerPath:i=n}=s;if(!n)throw new Error(Ci(11));const o=(typeof s.reducers=="function"?s.reducers(OK()):s.reducers)||{},d=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(k,$){const O=typeof k=="string"?k:k.type;if(!O)throw new Error(Ci(12));if(O in u.sliceCaseReducersByType)throw new Error(Ci(13));return u.sliceCaseReducersByType[O]=$,m},addMatcher(k,$){return u.sliceMatchers.push({matcher:k,reducer:$}),m},exposeAction(k,$){return u.actionCreators[k]=$,m},exposeCaseReducer(k,$){return u.sliceCaseReducersByName[k]=$,m}};d.forEach(k=>{const $=o[k],O={reducerName:k,type:EK(n,k),createNotation:typeof s.reducers=="function"};LK($)?RK(O,$,m,a):DK(O,$,m)});function x(){const[k={},$=[],O=void 0]=typeof s.extraReducers=="function"?iT(s.extraReducers):[s.extraReducers],L={...k,...u.sliceCaseReducersByType};return _K(s.initialState,_=>{for(let E in L)_.addCase(E,L[E]);for(let E of u.sliceMatchers)_.addMatcher(E.matcher,E.reducer);for(let E of $)_.addMatcher(E.matcher,E.reducer);O&&_.addDefaultCase(O)})}const f=k=>k,b=new Map,p=new WeakMap;let v;function j(k,$){return v||(v=x()),v(k,$)}function N(){return v||(v=x()),v.getInitialState()}function w(k,$=!1){function O(_){let E=_[k];return typeof E>"u"&&$&&(E=Cp(p,O,N)),E}function L(_=f){const E=Cp(b,$,()=>new WeakMap);return Cp(E,_,()=>{const A={};for(const[z,M]of Object.entries(s.selectors??{}))A[z]=PK(M,_,()=>Cp(p,_,N),$);return A})}return{reducerPath:k,getSelectors:L,get selectors(){return L(O)},selectSlice:O}}const P={name:n,reducer:j,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:N,...w(i),injectInto(k,{reducerPath:$,...O}={}){const L=$??i;return k.inject({reducerPath:L,reducer:j},O),{...P,...w(L,!0)}}};return P}}function PK(t,a,r,s){function n(i,...o){let d=a(i);return typeof d>"u"&&s&&(d=r()),t(d,...o)}return n.unwrapped=t,n}var Di=TK();function OK(){function t(a,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:a,...r}}return t.withTypes=()=>t,{reducer(a){return Object.assign({[a.name](...r){return a(...r)}}[a.name],{_reducerDefinitionType:"reducer"})},preparedReducer(a,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:a,reducer:r}},asyncThunk:t}}function DK({type:t,reducerName:a,createNotation:r},s,n){let i,o;if("reducer"in s){if(r&&!MK(s))throw new Error(Ci(17));i=s.reducer,o=s.prepare}else i=s;n.addCase(t,i).exposeCaseReducer(a,i).exposeAction(a,o?ml(t,o):ml(t))}function LK(t){return t._reducerDefinitionType==="asyncThunk"}function MK(t){return t._reducerDefinitionType==="reducerWithPrepare"}function RK({type:t,reducerName:a},r,s,n){if(!n)throw new Error(Ci(18));const{payloadCreator:i,fulfilled:o,pending:d,rejected:u,settled:m,options:x}=r,f=n(t,i,x);s.exposeAction(a,f),o&&s.addCase(f.fulfilled,o),d&&s.addCase(f.pending,d),u&&s.addCase(f.rejected,u),m&&s.addMatcher(f.settled,m),s.exposeCaseReducer(a,{fulfilled:o||Ep,pending:d||Ep,rejected:u||Ep,settled:m||Ep})}function Ep(){}var $K="task",lT="listener",oT="completed",GN="cancelled",FK=`task-${GN}`,IK=`task-${oT}`,Pj=`${lT}-${GN}`,BK=`${lT}-${oT}`,ky=class{constructor(t){this.code=t,this.message=`${$K} ${GN} (reason: ${t})`}name="TaskAbortError";message},VN=(t,a)=>{if(typeof t!="function")throw new TypeError(Ci(32))},Cg=()=>{},cT=(t,a=Cg)=>(t.catch(a),t),dT=(t,a)=>(t.addEventListener("abort",a,{once:!0}),()=>t.removeEventListener("abort",a)),Yu=(t,a)=>{const r=t.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:a,configurable:!0,writable:!0}),t.abort(a))},Gu=t=>{if(t.aborted){const{reason:a}=t;throw new ky(a)}};function uT(t,a){let r=Cg;return new Promise((s,n)=>{const i=()=>n(new ky(t.reason));if(t.aborted){i();return}r=dT(t,i),a.finally(()=>r()).then(s,n)}).finally(()=>{r=Cg})}var zK=async(t,a)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof ky?"cancelled":"rejected",error:r}}finally{a?.()}},Eg=t=>a=>cT(uT(t,a).then(r=>(Gu(t),r))),mT=t=>{const a=Eg(t);return r=>a(new Promise(s=>setTimeout(s,r)))},{assign:vx}=Object,S8={},Cy="listenerMiddleware",qK=(t,a)=>{const r=s=>dT(t,()=>Yu(s,t.reason));return(s,n)=>{VN(s);const i=new AbortController;r(i);const o=zK(async()=>{Gu(t),Gu(i.signal);const d=await s({pause:Eg(i.signal),delay:mT(i.signal),signal:i.signal});return Gu(i.signal),d},()=>Yu(i,IK));return n?.autoJoin&&a.push(o.catch(Cg)),{result:Eg(t)(o),cancel(){Yu(i,FK)}}}},UK=(t,a)=>{const r=async(s,n)=>{Gu(a);let i=()=>{};const d=[new Promise((u,m)=>{let x=t({predicate:s,effect:(f,b)=>{b.unsubscribe(),u([f,b.getState(),b.getOriginalState()])}});i=()=>{x(),m()}})];n!=null&&d.push(new Promise(u=>setTimeout(u,n,null)));try{const u=await uT(a,Promise.race(d));return Gu(a),u}finally{i()}};return(s,n)=>cT(r(s,n))},xT=t=>{let{type:a,actionCreator:r,matcher:s,predicate:n,effect:i}=t;if(a)n=ml(a).match;else if(r)a=r.type,n=r.match;else if(s)n=s;else if(!n)throw new Error(Ci(21));return VN(i),{predicate:n,type:a,effect:i}},hT=vx(t=>{const{type:a,predicate:r,effect:s}=xT(t);return{id:kK(),effect:s,type:a,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Ci(22))}}},{withTypes:()=>hT}),_8=(t,a)=>{const{type:r,effect:s,predicate:n}=xT(a);return Array.from(t.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===n)&&i.effect===s)},Oj=t=>{t.pending.forEach(a=>{Yu(a,Pj)})},HK=t=>()=>{t.forEach(Oj),t.clear()},A8=(t,a,r)=>{try{t(a,r)}catch(s){setTimeout(()=>{throw s},0)}},fT=vx(ml(`${Cy}/add`),{withTypes:()=>fT}),YK=ml(`${Cy}/removeAll`),pT=vx(ml(`${Cy}/remove`),{withTypes:()=>pT}),GK=(...t)=>{console.error(`${Cy}/error`,...t)},Jf=(t={})=>{const a=new Map,{extra:r,onError:s=GK}=t;VN(s);const n=x=>(x.unsubscribe=()=>a.delete(x.id),a.set(x.id,x),f=>{x.unsubscribe(),f?.cancelActive&&Oj(x)}),i=x=>{const f=_8(a,x)??hT(x);return n(f)};vx(i,{withTypes:()=>i});const o=x=>{const f=_8(a,x);return f&&(f.unsubscribe(),x.cancelActive&&Oj(f)),!!f};vx(o,{withTypes:()=>o});const d=async(x,f,b,p)=>{const v=new AbortController,j=UK(i,v.signal),N=[];try{x.pending.add(v),await Promise.resolve(x.effect(f,vx({},b,{getOriginalState:p,condition:(w,P)=>j(w,P).then(Boolean),take:j,delay:mT(v.signal),pause:Eg(v.signal),extra:r,signal:v.signal,fork:qK(v.signal,N),unsubscribe:x.unsubscribe,subscribe:()=>{a.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((w,P,k)=>{w!==v&&(Yu(w,Pj),k.delete(w))})},cancel:()=>{Yu(v,Pj),x.pending.delete(v)},throwIfCancelled:()=>{Gu(v.signal)}})))}catch(w){w instanceof ky||A8(s,w,{raisedBy:"effect"})}finally{await Promise.all(N),Yu(v,BK),x.pending.delete(v)}},u=HK(a);return{middleware:x=>f=>b=>{if(!XE(b))return f(b);if(fT.match(b))return i(b.payload);if(YK.match(b)){u();return}if(pT.match(b))return o(b.payload);let p=x.getState();const v=()=>{if(p===S8)throw new Error(Ci(23));return p};let j;try{if(j=f(b),a.size>0){const N=x.getState(),w=Array.from(a.values());for(const P of w){let k=!1;try{k=P.predicate(b,N,p)}catch($){k=!1,A8(s,$,{raisedBy:"predicate"})}k&&d(P,b,x,v)}}}finally{p=S8}return j},startListening:i,stopListening:o,clearListeners:u}};function Ci(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var VK={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},gT=Di({name:"chartLayout",initialState:VK,reducers:{setLayout(t,a){t.layoutType=a.payload},setChartSize(t,a){t.width=a.payload.width,t.height=a.payload.height},setMargin(t,a){var r,s,n,i;t.margin.top=(r=a.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(s=a.payload.right)!==null&&s!==void 0?s:0,t.margin.bottom=(n=a.payload.bottom)!==null&&n!==void 0?n:0,t.margin.left=(i=a.payload.left)!==null&&i!==void 0?i:0},setScale(t,a){t.scale=a.payload}}}),{setMargin:WK,setLayout:KK,setChartSize:XK,setScale:JK}=gT.actions,ZK=gT.reducer;function k8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function C8(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?k8(Object(r),!0).forEach(function(s){QK(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function QK(t,a,r){return(a=eX(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function eX(t){var a=tX(t,"string");return typeof a=="symbol"?a:a+""}function tX(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var Tg=Math.PI/180,aX=t=>t*180/Math.PI,xs=(t,a,r,s)=>({x:t+Math.cos(-Tg*s)*r,y:a+Math.sin(-Tg*s)*r}),yT=function(a,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(a-(s.left||0)-(s.right||0)),Math.abs(r-(s.top||0)-(s.bottom||0)))/2},rX=(t,a)=>{var{x:r,y:s}=t,{x:n,y:i}=a;return Math.sqrt((r-n)**2+(s-i)**2)},sX=(t,a)=>{var{x:r,y:s}=t,{cx:n,cy:i}=a,o=rX({x:r,y:s},{x:n,y:i});if(o<=0)return{radius:o,angle:0};var d=(r-n)/o,u=Math.acos(d);return s>i&&(u=2*Math.PI-u),{radius:o,angle:aX(u),angleInRadian:u}},nX=t=>{var{startAngle:a,endAngle:r}=t,s=Math.floor(a/360),n=Math.floor(r/360),i=Math.min(s,n);return{startAngle:a-i*360,endAngle:r-i*360}},iX=(t,a)=>{var{startAngle:r,endAngle:s}=a,n=Math.floor(r/360),i=Math.floor(s/360),o=Math.min(n,i);return t+o*360},lX=(t,a)=>{var{x:r,y:s}=t,{radius:n,angle:i}=sX({x:r,y:s},a),{innerRadius:o,outerRadius:d}=a;if(n<o||n>d||n===0)return null;var{startAngle:u,endAngle:m}=nX(a),x=i,f;if(u<=m){for(;x>m;)x-=360;for(;x<u;)x+=360;f=x>=u&&x<=m}else{for(;x>u;)x-=360;for(;x<m;)x+=360;f=x>=m&&x<=u}return f?C8(C8({},a),{},{radius:n,angle:iX(x,a)}):null};function bT(t,a,r){return Array.isArray(t)&&t&&a+r!==0?t.slice(a,r+1):t}function E8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function cl(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?E8(Object(r),!0).forEach(function(s){oX(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function oX(t,a,r){return(a=cX(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function cX(t){var a=dX(t,"string");return typeof a=="symbol"?a:a+""}function dX(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function sr(t,a,r){return Cr(t)||Cr(a)?r:Eo(a)?sm(t,a,r):typeof a=="function"?a(t):r}var uX=(t,a,r,s,n)=>{var i,o=-1,d=(i=a?.length)!==null&&i!==void 0?i:0;if(d<=1||t==null)return 0;if(s==="angleAxis"&&n!=null&&Math.abs(Math.abs(n[1]-n[0])-360)<=1e-6)for(var u=0;u<d;u++){var m=u>0?r[u-1].coordinate:r[d-1].coordinate,x=r[u].coordinate,f=u>=d-1?r[0].coordinate:r[u+1].coordinate,b=void 0;if(Fs(x-m)!==Fs(f-x)){var p=[];if(Fs(f-x)===Fs(n[1]-n[0])){b=f;var v=x+n[1]-n[0];p[0]=Math.min(v,(v+m)/2),p[1]=Math.max(v,(v+m)/2)}else{b=m;var j=f+n[1]-n[0];p[0]=Math.min(x,(j+x)/2),p[1]=Math.max(x,(j+x)/2)}var N=[Math.min(x,(b+x)/2),Math.max(x,(b+x)/2)];if(t>N[0]&&t<=N[1]||t>=p[0]&&t<=p[1]){({index:o}=r[u]);break}}else{var w=Math.min(m,f),P=Math.max(m,f);if(t>(w+x)/2&&t<=(P+x)/2){({index:o}=r[u]);break}}}else if(a){for(var k=0;k<d;k++)if(k===0&&t<=(a[k].coordinate+a[k+1].coordinate)/2||k>0&&k<d-1&&t>(a[k].coordinate+a[k-1].coordinate)/2&&t<=(a[k].coordinate+a[k+1].coordinate)/2||k===d-1&&t>(a[k].coordinate+a[k-1].coordinate)/2){({index:o}=a[k]);break}}return o},mX=(t,a,r)=>{if(a&&r){var{width:s,height:n}=r,{align:i,verticalAlign:o,layout:d}=a;if((d==="vertical"||d==="horizontal"&&o==="middle")&&i!=="center"&&zt(t[i]))return cl(cl({},t),{},{[i]:t[i]+(s||0)});if((d==="horizontal"||d==="vertical"&&i==="center")&&o!=="middle"&&zt(t[o]))return cl(cl({},t),{},{[o]:t[o]+(n||0)})}return t},Yd=(t,a)=>t==="horizontal"&&a==="xAxis"||t==="vertical"&&a==="yAxis"||t==="centric"&&a==="angleAxis"||t==="radial"&&a==="radiusAxis",vT=(t,a,r,s)=>{if(s)return t.map(d=>d.coordinate);var n,i,o=t.map(d=>(d.coordinate===a&&(n=!0),d.coordinate===r&&(i=!0),d.coordinate));return n||o.push(a),i||o.push(r),o},jT=(t,a,r)=>{if(!t)return null;var{duplicateDomain:s,type:n,range:i,scale:o,realScaleType:d,isCategorical:u,categoricalDomain:m,tickCount:x,ticks:f,niceTicks:b,axisType:p}=t;if(!o)return null;var v=d==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,j=n==="category"&&o.bandwidth?o.bandwidth()/v:0;if(j=p==="angleAxis"&&i&&i.length>=2?Fs(i[0]-i[1])*2*j:j,f||b){var N=(f||b||[]).map((w,P)=>{var k=s?s.indexOf(w):w;return{coordinate:o(k)+j,value:w,offset:j,index:P}});return N.filter(w=>!Ei(w.coordinate))}return u&&m?m.map((w,P)=>({coordinate:o(w)+j,value:w,index:P,offset:j})):o.ticks&&x!=null?o.ticks(x).map((w,P)=>({coordinate:o(w)+j,value:w,offset:j,index:P})):o.domain().map((w,P)=>({coordinate:o(w)+j,value:s?s[w]:w,index:P,offset:j}))},T8=1e-4,xX=t=>{var a=t.domain();if(!(!a||a.length<=2)){var r=a.length,s=t.range(),n=Math.min(s[0],s[1])-T8,i=Math.max(s[0],s[1])+T8,o=t(a[0]),d=t(a[r-1]);(o<n||o>i||d<n||d>i)&&t.domain([a[0],a[r-1]])}},hX=(t,a)=>{if(!a||a.length!==2||!zt(a[0])||!zt(a[1]))return t;var r=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]),n=[t[0],t[1]];return(!zt(t[0])||t[0]<r)&&(n[0]=r),(!zt(t[1])||t[1]>s)&&(n[1]=s),n[0]>s&&(n[0]=s),n[1]<r&&(n[1]=r),n},fX=t=>{var a=t.length;if(!(a<=0))for(var r=0,s=t[0].length;r<s;++r)for(var n=0,i=0,o=0;o<a;++o){var d=Ei(t[o][r][1])?t[o][r][0]:t[o][r][1];d>=0?(t[o][r][0]=n,t[o][r][1]=n+d,n=t[o][r][1]):(t[o][r][0]=i,t[o][r][1]=i+d,i=t[o][r][1])}},pX=t=>{var a=t.length;if(!(a<=0))for(var r=0,s=t[0].length;r<s;++r)for(var n=0,i=0;i<a;++i){var o=Ei(t[i][r][1])?t[i][r][0]:t[i][r][1];o>=0?(t[i][r][0]=n,t[i][r][1]=n+o,n=t[i][r][1]):(t[i][r][0]=0,t[i][r][1]=0)}},gX={sign:fX,expand:KV,none:Ex,silhouette:XV,wiggle:JV,positive:pX},yX=(t,a,r)=>{var s=gX[r],n=WV().keys(a).value((i,o)=>+sr(i,o,0)).order(wj).offset(s);return n(t)};function bX(t){return t==null?void 0:String(t)}function P8(t){var{axis:a,ticks:r,bandSize:s,entry:n,index:i,dataKey:o}=t;if(a.type==="category"){if(!a.allowDuplicatedCategory&&a.dataKey&&!Cr(n[a.dataKey])){var d=xE(r,"value",n[a.dataKey]);if(d)return d.coordinate+s/2}return r[i]?r[i].coordinate+s/2:null}var u=sr(n,Cr(o)?a.dataKey:o);return Cr(u)?null:a.scale(u)}var O8=t=>{var{axis:a,ticks:r,offset:s,bandSize:n,entry:i,index:o}=t;if(a.type==="category")return r[o]?r[o].coordinate+s:null;var d=sr(i,a.dataKey,a.scale.domain()[o]);return Cr(d)?null:a.scale(d)-n/2+s},vX=t=>{var{numericAxis:a}=t,r=a.scale.domain();if(a.type==="number"){var s=Math.min(r[0],r[1]),n=Math.max(r[0],r[1]);return s<=0&&n>=0?0:n<0?n:s}return r[0]},jX=t=>{var a=t.flat(2).filter(zt);return[Math.min(...a),Math.max(...a)]},NX=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],wX=(t,a,r)=>{if(t!=null)return NX(Object.keys(t).reduce((s,n)=>{var i=t[n],{stackedData:o}=i,d=o.reduce((u,m)=>{var x=bT(m,a,r),f=jX(x);return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(d[0],s[0]),Math.max(d[1],s[1])]},[1/0,-1/0]))},D8=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,L8=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ef=(t,a,r)=>{if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!r||s>0)return s}if(t&&a&&a.length>=2){for(var n=wy(a,x=>x.coordinate),i=1/0,o=1,d=n.length;o<d;o++){var u=n[o],m=n[o-1];i=Math.min((u.coordinate||0)-(m.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function M8(t){var{tooltipEntrySettings:a,dataKey:r,payload:s,value:n,name:i}=t;return cl(cl({},a),{},{dataKey:r,payload:s,value:n,name:i})}function Ux(t,a){if(t)return String(t);if(typeof a=="string")return a}function SX(t,a,r,s,n){if(r==="horizontal"||r==="vertical"){var i=t>=n.left&&t<=n.left+n.width&&a>=n.top&&a<=n.top+n.height;return i?{x:t,y:a}:null}return s?lX({x:t,y:a},s):null}var _X=(t,a,r,s)=>{var n=a.find(m=>m&&m.index===r);if(n){if(t==="horizontal")return{x:n.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:n.coordinate};if(t==="centric"){var i=n.coordinate,{radius:o}=s;return cl(cl(cl({},s),xs(s.cx,s.cy,o,i)),{},{angle:i,radius:o})}var d=n.coordinate,{angle:u}=s;return cl(cl(cl({},s),xs(s.cx,s.cy,d,u)),{},{angle:u,radius:d})}return{x:0,y:0}},AX=(t,a)=>a==="horizontal"?t.x:a==="vertical"?t.y:a==="centric"?t.angle:t.radius,Tc=t=>t.layout.width,Pc=t=>t.layout.height,kX=t=>t.layout.scale,NT=t=>t.layout.margin,Ey=We(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),Ty=We(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),wT="data-recharts-item-index",ST="data-recharts-item-data-key",Zf=60;function R8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Tp(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?R8(Object(r),!0).forEach(function(s){CX(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function CX(t,a,r){return(a=EX(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function EX(t){var a=TX(t,"string");return typeof a=="symbol"?a:a+""}function TX(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var PX=t=>t.brush.height;function OX(t){var a=Ty(t);return a.reduce((r,s)=>{if(s.orientation==="left"&&!s.mirror&&!s.hide){var n=typeof s.width=="number"?s.width:Zf;return r+n}return r},0)}function DX(t){var a=Ty(t);return a.reduce((r,s)=>{if(s.orientation==="right"&&!s.mirror&&!s.hide){var n=typeof s.width=="number"?s.width:Zf;return r+n}return r},0)}function LX(t){var a=Ey(t);return a.reduce((r,s)=>s.orientation==="top"&&!s.mirror&&!s.hide?r+s.height:r,0)}function MX(t){var a=Ey(t);return a.reduce((r,s)=>s.orientation==="bottom"&&!s.mirror&&!s.hide?r+s.height:r,0)}var Ss=We([Tc,Pc,NT,PX,OX,DX,LX,MX,VE,QW],(t,a,r,s,n,i,o,d,u,m)=>{var x={left:(r.left||0)+n,right:(r.right||0)+i},f={top:(r.top||0)+o,bottom:(r.bottom||0)+d},b=Tp(Tp({},f),x),p=b.bottom;b.bottom+=s,b=mX(b,u,m);var v=t-b.left-b.right,j=a-b.top-b.bottom;return Tp(Tp({brushBottom:p},b),{},{width:Math.max(v,0),height:Math.max(j,0)})}),RX=We(Ss,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),WN=We(Tc,Pc,(t,a)=>({x:0,y:0,width:t,height:a})),$X=g.createContext(null),ti=()=>g.useContext($X)!=null,Py=t=>t.brush,Oy=We([Py,Ss,NT],(t,a,r)=>({height:t.height,x:zt(t.x)?t.x:a.left,y:zt(t.y)?t.y:a.top+a.height+a.brushBottom-(r?.bottom||0),width:zt(t.width)?t.width:a.width})),KN=()=>{var t,a=ti(),r=Lt(RX),s=Lt(Oy),n=(t=Lt(Py))===null||t===void 0?void 0:t.padding;return!a||!s||!n?r:{width:s.width-n.left-n.right,height:s.height-n.top-n.bottom,x:n.left,y:n.top}},FX={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},_T=()=>{var t;return(t=Lt(Ss))!==null&&t!==void 0?t:FX},AT=()=>Lt(Tc),kT=()=>Lt(Pc),Ea=t=>t.layout.layoutType,Dy=()=>Lt(Ea),IX={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},CT=Di({name:"legend",initialState:IX,reducers:{setLegendSize(t,a){t.size.width=a.payload.width,t.size.height=a.payload.height},setLegendSettings(t,a){t.settings.align=a.payload.align,t.settings.layout=a.payload.layout,t.settings.verticalAlign=a.payload.verticalAlign,t.settings.itemSorter=a.payload.itemSorter},addLegendPayload(t,a){t.payload.push(a.payload)},removeLegendPayload(t,a){var r=fc(t).payload.indexOf(a.payload);r>-1&&t.payload.splice(r,1)}}}),{setLegendSize:bue,setLegendSettings:vue,addLegendPayload:ET,removeLegendPayload:TT}=CT.actions,BX=CT.reducer;function Dj(){return Dj=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Dj.apply(null,arguments)}function $8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function J1(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?$8(Object(r),!0).forEach(function(s){zX(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function zX(t,a,r){return(a=qX(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function qX(t){var a=UX(t,"string");return typeof a=="symbol"?a:a+""}function UX(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function HX(t){return Array.isArray(t)&&Eo(t[0])&&Eo(t[1])?t.join(" ~ "):t}var YX=t=>{var{separator:a=" : ",contentStyle:r={},itemStyle:s={},labelStyle:n={},payload:i,formatter:o,itemSorter:d,wrapperClassName:u,labelClassName:m,label:x,labelFormatter:f,accessibilityLayer:b=!1}=t,p=()=>{if(i&&i.length){var O={padding:0,margin:0},L=(d?wy(i,d):i).map((_,E)=>{if(_.type==="none")return null;var A=_.formatter||o||HX,{value:z,name:M}=_,D=z,I=M;if(A){var V=A(z,M,_,E,i);if(Array.isArray(V))[D,I]=V;else if(V!=null)D=V;else return null}var H=J1({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},s);return g.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(E),style:H},Eo(I)?g.createElement("span",{className:"recharts-tooltip-item-name"},I):null,Eo(I)?g.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,g.createElement("span",{className:"recharts-tooltip-item-value"},D),g.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return g.createElement("ul",{className:"recharts-tooltip-item-list",style:O},L)}return null},v=J1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),j=J1({margin:0},n),N=!Cr(x),w=N?x:"",P=Ba("recharts-default-tooltip",u),k=Ba("recharts-tooltip-label",m);N&&f&&i!==void 0&&i!==null&&(w=f(x,i));var $=b?{role:"status","aria-live":"assertive"}:{};return g.createElement("div",Dj({className:P,style:v},$),g.createElement("p",{className:k,style:j},g.isValidElement(w)?w:"".concat(w)),p())},Xh="recharts-tooltip-wrapper",GX={visibility:"hidden"};function VX(t){var{coordinate:a,translateX:r,translateY:s}=t;return Ba(Xh,{["".concat(Xh,"-right")]:zt(r)&&a&&zt(a.x)&&r>=a.x,["".concat(Xh,"-left")]:zt(r)&&a&&zt(a.x)&&r<a.x,["".concat(Xh,"-bottom")]:zt(s)&&a&&zt(a.y)&&s>=a.y,["".concat(Xh,"-top")]:zt(s)&&a&&zt(a.y)&&s<a.y})}function F8(t){var{allowEscapeViewBox:a,coordinate:r,key:s,offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:d,viewBox:u,viewBoxDimension:m}=t;if(i&&zt(i[s]))return i[s];var x=r[s]-d-(n>0?n:0),f=r[s]+n;if(a[s])return o[s]?x:f;var b=u[s];if(b==null)return 0;if(o[s]){var p=x,v=b;return p<v?Math.max(f,b):Math.max(x,b)}if(m==null)return 0;var j=f+d,N=b+m;return j>N?Math.max(x,b):Math.max(f,b)}function WX(t){var{translateX:a,translateY:r,useTranslate3d:s}=t;return{transform:s?"translate3d(".concat(a,"px, ").concat(r,"px, 0)"):"translate(".concat(a,"px, ").concat(r,"px)")}}function KX(t){var{allowEscapeViewBox:a,coordinate:r,offsetTopLeft:s,position:n,reverseDirection:i,tooltipBox:o,useTranslate3d:d,viewBox:u}=t,m,x,f;return o.height>0&&o.width>0&&r?(x=F8({allowEscapeViewBox:a,coordinate:r,key:"x",offsetTopLeft:s,position:n,reverseDirection:i,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),f=F8({allowEscapeViewBox:a,coordinate:r,key:"y",offsetTopLeft:s,position:n,reverseDirection:i,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),m=WX({translateX:x,translateY:f,useTranslate3d:d})):m=GX,{cssProperties:m,cssClasses:VX({translateX:x,translateY:f,coordinate:r})}}function I8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Pp(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?I8(Object(r),!0).forEach(function(s){Lj(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Lj(t,a,r){return(a=XX(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function XX(t){var a=JX(t,"string");return typeof a=="symbol"?a:a+""}function JX(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}class ZX extends g.PureComponent{constructor(){super(...arguments),Lj(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Lj(this,"handleKeyDown",a=>{if(a.key==="Escape"){var r,s,n,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==null&&r!==void 0?r:0,y:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&n!==void 0?n:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var a,r;this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:a,allowEscapeViewBox:r,animationDuration:s,animationEasing:n,children:i,coordinate:o,hasPayload:d,isAnimationActive:u,offset:m,position:x,reverseDirection:f,useTranslate3d:b,viewBox:p,wrapperStyle:v,lastBoundingBox:j,innerRef:N,hasPortalFromProps:w}=this.props,{cssClasses:P,cssProperties:k}=KX({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:m,position:x,reverseDirection:f,tooltipBox:{height:j.height,width:j.width},useTranslate3d:b,viewBox:p}),$=w?{}:Pp(Pp({transition:u&&a?"transform ".concat(s,"ms ").concat(n):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&d?"visible":"hidden",position:"absolute",top:0,left:0}),O=Pp(Pp({},$),{},{visibility:!this.state.dismissed&&a&&d?"visible":"hidden"},v);return g.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:P,style:O,ref:N},i)}}var QX=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),mm={isSsr:QX()},PT=()=>Lt(t=>t.rootProps.accessibilityLayer);function Pi(t){return Number.isFinite(t)}function Px(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function Mj(){return Mj=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Mj.apply(null,arguments)}function B8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function z8(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?B8(Object(r),!0).forEach(function(s){eJ(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function eJ(t,a,r){return(a=tJ(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function tJ(t){var a=aJ(t,"string");return typeof a=="symbol"?a:a+""}function aJ(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var q8={curveBasisClosed:$V,curveBasisOpen:FV,curveBasis:RV,curveBumpX:NV,curveBumpY:wV,curveLinearClosed:IV,curveLinear:jy,curveMonotoneX:BV,curveMonotoneY:zV,curveNatural:qV,curveStep:UV,curveStepAfter:YV,curveStepBefore:HV},Op=t=>Pi(t.x)&&Pi(t.y),Jh=t=>t.x,Zh=t=>t.y,rJ=(t,a)=>{if(typeof t=="function")return t;var r="curve".concat(Kf(t));return(r==="curveMonotone"||r==="curveBump")&&a?q8["".concat(r).concat(a==="vertical"?"Y":"X")]:q8[r]||jy},sJ=t=>{var{type:a="linear",points:r=[],baseLine:s,layout:n,connectNulls:i=!1}=t,o=rJ(a,n),d=i?r.filter(Op):r,u;if(Array.isArray(s)){var m=i?s.filter(f=>Op(f)):s,x=d.map((f,b)=>z8(z8({},f),{},{base:m[b]}));return n==="vertical"?u=Sp().y(Zh).x1(Jh).x0(f=>f.base.x):u=Sp().x(Jh).y1(Zh).y0(f=>f.base.y),u.defined(Op).curve(o),u(x)}return n==="vertical"&&zt(s)?u=Sp().y(Zh).x1(Jh).x0(s):zt(s)?u=Sp().x(Jh).y1(Zh).y0(s):u=wE().x(Jh).y(Zh),u.defined(Op).curve(o),u(d)},XN=t=>{var{className:a,points:r,path:s,pathRef:n}=t;if((!r||!r.length)&&!s)return null;var i=r&&r.length?sJ(t):s;return g.createElement("path",Mj({},Ec(t),MN(t),{className:Ba("recharts-curve",a),d:i===null?void 0:i,ref:n}))},nJ=["x","y","top","left","width","height","className"];function Rj(){return Rj=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Rj.apply(null,arguments)}function U8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function iJ(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?U8(Object(r),!0).forEach(function(s){lJ(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function lJ(t,a,r){return(a=oJ(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function oJ(t){var a=cJ(t,"string");return typeof a=="symbol"?a:a+""}function cJ(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function dJ(t,a){if(t==null)return{};var r,s,n=uJ(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uJ(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var mJ=(t,a,r,s,n,i)=>"M".concat(t,",").concat(n,"v").concat(s,"M").concat(i,",").concat(a,"h").concat(r),xJ=t=>{var{x:a=0,y:r=0,top:s=0,left:n=0,width:i=0,height:o=0,className:d}=t,u=dJ(t,nJ),m=iJ({x:a,y:r,top:s,left:n,width:i,height:o},u);return!zt(a)||!zt(r)||!zt(i)||!zt(o)||!zt(s)||!zt(n)?null:g.createElement("path",Rj({},Ar(m,!0),{className:Ba("recharts-cross",d),d:mJ(a,r,i,o,s,n)}))};function hJ(t,a,r,s){var n=s/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?a.x-n:r.left+.5,y:t==="horizontal"?r.top+.5:a.y-n,width:t==="horizontal"?s:r.width-1,height:t==="horizontal"?r.height-1:s}}function H8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function fJ(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?H8(Object(r),!0).forEach(function(s){pJ(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function pJ(t,a,r){return(a=gJ(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function gJ(t){var a=yJ(t,"string");return typeof a=="symbol"?a:a+""}function yJ(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function ai(t,a){var r=fJ({},t),s=a,n=Object.keys(a),i=n.reduce((o,d)=>(o[d]===void 0&&s[d]!==void 0&&(o[d]=s[d]),o),r);return i}function bJ(){}function Y8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function G8(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Y8(Object(r),!0).forEach(function(s){vJ(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function vJ(t,a,r){return(a=jJ(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function jJ(t){var a=NJ(t,"string");return typeof a=="symbol"?a:a+""}function NJ(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var wJ=t=>t.replace(/([A-Z])/g,a=>"-".concat(a.toLowerCase())),OT=(t,a,r)=>t.map(s=>"".concat(wJ(s)," ").concat(a,"ms ").concat(r)).join(","),SJ=(t,a)=>[Object.keys(t),Object.keys(a)].reduce((r,s)=>r.filter(n=>s.includes(n))),Tf=(t,a)=>Object.keys(a).reduce((r,s)=>G8(G8({},r),{},{[s]:t(s,a[s])}),{});function V8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function an(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?V8(Object(r),!0).forEach(function(s){_J(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function _J(t,a,r){return(a=AJ(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function AJ(t){var a=kJ(t,"string");return typeof a=="symbol"?a:a+""}function kJ(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var Pg=(t,a,r)=>t+(a-t)*r,$j=t=>{var{from:a,to:r}=t;return a!==r},DT=(t,a,r)=>{var s=Tf((n,i)=>{if($j(i)){var[o,d]=t(i.from,i.to,i.velocity);return an(an({},i),{},{from:o,velocity:d})}return i},a);return r<1?Tf((n,i)=>$j(i)?an(an({},i),{},{velocity:Pg(i.velocity,s[n].velocity,r),from:Pg(i.from,s[n].from,r)}):i,a):DT(t,s,r-1)};function CJ(t,a,r,s,n,i){var o,d=s.reduce((b,p)=>an(an({},b),{},{[p]:{from:t[p],velocity:0,to:a[p]}}),{}),u=()=>Tf((b,p)=>p.from,d),m=()=>!Object.values(d).filter($j).length,x=null,f=b=>{o||(o=b);var p=b-o,v=p/r.dt;d=DT(r,d,v),n(an(an(an({},t),a),u())),o=b,m()||(x=i.setTimeout(f))};return()=>(x=i.setTimeout(f),()=>{x()})}function EJ(t,a,r,s,n,i,o){var d=null,u=n.reduce((f,b)=>an(an({},f),{},{[b]:[t[b],a[b]]}),{}),m,x=f=>{m||(m=f);var b=(f-m)/s,p=Tf((j,N)=>Pg(...N,r(b)),u);if(i(an(an(an({},t),a),p)),b<1)d=o.setTimeout(x);else{var v=Tf((j,N)=>Pg(...N,r(1)),u);i(an(an(an({},t),a),v))}};return()=>(d=o.setTimeout(x),()=>{d()})}const TJ=(t,a,r,s,n,i)=>{var o=SJ(t,a);return r.isStepper===!0?CJ(t,a,r,o,n,i):EJ(t,a,r,s,o,n,i)};var Og=1e-4,LT=(t,a)=>[0,3*t,3*a-6*t,3*t-3*a+1],MT=(t,a)=>t.map((r,s)=>r*a**s).reduce((r,s)=>r+s),W8=(t,a)=>r=>{var s=LT(t,a);return MT(s,r)},PJ=(t,a)=>r=>{var s=LT(t,a),n=[...s.map((i,o)=>i*o).slice(1),0];return MT(n,r)},K8=function(){for(var a,r,s,n,i=arguments.length,o=new Array(i),d=0;d<i;d++)o[d]=arguments[d];if(o.length===1)switch(o[0]){case"linear":[a,s,r,n]=[0,0,1,1];break;case"ease":[a,s,r,n]=[.25,.1,.25,1];break;case"ease-in":[a,s,r,n]=[.42,0,1,1];break;case"ease-out":[a,s,r,n]=[.42,0,.58,1];break;case"ease-in-out":[a,s,r,n]=[0,0,.58,1];break;default:{var u=o[0].split("(");u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4&&([a,s,r,n]=u[1].split(")")[0].split(",").map(v=>parseFloat(v)))}}else o.length===4&&([a,s,r,n]=o);var m=W8(a,r),x=W8(s,n),f=PJ(a,r),b=v=>v>1?1:v<0?0:v,p=v=>{for(var j=v>1?1:v,N=j,w=0;w<8;++w){var P=m(N)-j,k=f(N);if(Math.abs(P-j)<Og||k<Og)return x(N);N=b(N-P/k)}return x(N)};return p.isStepper=!1,p},OJ=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:s=8,dt:n=17}=a,i=(o,d,u)=>{var m=-(o-d)*r,x=u*s,f=u+(m-x)*n/1e3,b=u*n/1e3+o;return Math.abs(b-d)<Og&&Math.abs(f)<Og?[d,0]:[b,f]};return i.isStepper=!0,i.dt=n,i},DJ=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return K8(t);case"spring":return OJ();default:if(t.split("(")[0]==="cubic-bezier")return K8(t)}return typeof t=="function"?t:null};function LJ(t){var a,r=()=>null,s=!1,n=null,i=o=>{if(!s){if(Array.isArray(o)){if(!o.length)return;var d=o,[u,...m]=d;if(typeof u=="number"){n=t.setTimeout(i.bind(null,m),u);return}i(u),n=t.setTimeout(i.bind(null,m));return}typeof o=="string"&&(a=o,r(a)),typeof o=="object"&&(a=o,r(a)),typeof o=="function"&&o()}};return{stop:()=>{s=!0},start:o=>{s=!1,n&&(n(),n=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>t}}class MJ{setTimeout(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=performance.now(),n=null,i=o=>{o-s>=r?a(o):typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(i))};return n=requestAnimationFrame(i),()=>{cancelAnimationFrame(n)}}}function RJ(){return LJ(new MJ)}var $J=g.createContext(RJ);function FJ(t,a){var r=g.useContext($J);return g.useMemo(()=>a??r(t),[t,a,r])}var IJ={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},X8={t:0},Z1={t:1};function Qf(t){var a=ai(t,IJ),{isActive:r,canBegin:s,duration:n,easing:i,begin:o,onAnimationEnd:d,onAnimationStart:u,children:m}=a,x=FJ(a.animationId,a.animationManager),[f,b]=g.useState(r?X8:Z1),p=g.useRef(null);return g.useEffect(()=>{r||b(Z1)},[r]),g.useEffect(()=>{if(!r||!s)return bJ;var v=TJ(X8,Z1,DJ(i),n,b,x.getTimeoutController()),j=()=>{p.current=v()};return x.start([u,o,j,n,d]),()=>{x.stop(),p.current&&p.current(),d()}},[r,s,n,i,o,u,d,x]),m(f.t)}function e0(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=g.useRef(Af(a)),s=g.useRef(t);return s.current!==t&&(r.current=Af(a),s.current=t),r.current}function J8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Z8(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?J8(Object(r),!0).forEach(function(s){BJ(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function BJ(t,a,r){return(a=zJ(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function zJ(t){var a=qJ(t,"string");return typeof a=="symbol"?a:a+""}function qJ(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function Dg(){return Dg=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Dg.apply(null,arguments)}var Q8=(t,a,r,s,n)=>{var i=Math.min(Math.abs(r)/2,Math.abs(s)/2),o=s>=0?1:-1,d=r>=0?1:-1,u=s>=0&&r>=0||s<0&&r<0?1:0,m;if(i>0&&n instanceof Array){for(var x=[0,0,0,0],f=0,b=4;f<b;f++)x[f]=n[f]>i?i:n[f];m="M".concat(t,",").concat(a+o*x[0]),x[0]>0&&(m+="A ".concat(x[0],",").concat(x[0],",0,0,").concat(u,",").concat(t+d*x[0],",").concat(a)),m+="L ".concat(t+r-d*x[1],",").concat(a),x[1]>0&&(m+="A ".concat(x[1],",").concat(x[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(a+o*x[1])),m+="L ".concat(t+r,",").concat(a+s-o*x[2]),x[2]>0&&(m+="A ".concat(x[2],",").concat(x[2],",0,0,").concat(u,`,
        `).concat(t+r-d*x[2],",").concat(a+s)),m+="L ".concat(t+d*x[3],",").concat(a+s),x[3]>0&&(m+="A ".concat(x[3],",").concat(x[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(a+s-o*x[3])),m+="Z"}else if(i>0&&n===+n&&n>0){var p=Math.min(i,n);m="M ".concat(t,",").concat(a+o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(t+d*p,",").concat(a,`
            L `).concat(t+r-d*p,",").concat(a,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(t+r,",").concat(a+o*p,`
            L `).concat(t+r,",").concat(a+s-o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(t+r-d*p,",").concat(a+s,`
            L `).concat(t+d*p,",").concat(a+s,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(t,",").concat(a+s-o*p," Z")}else m="M ".concat(t,",").concat(a," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return m},UJ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},RT=t=>{var a=ai(t,UJ),r=g.useRef(null),[s,n]=g.useState(-1);g.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var V=r.current.getTotalLength();V&&n(V)}catch{}},[]);var{x:i,y:o,width:d,height:u,radius:m,className:x}=a,{animationEasing:f,animationDuration:b,animationBegin:p,isAnimationActive:v,isUpdateAnimationActive:j}=a,N=g.useRef(d),w=g.useRef(u),P=g.useRef(i),k=g.useRef(o),$=g.useMemo(()=>({x:i,y:o,width:d,height:u,radius:m}),[i,o,d,u,m]),O=e0($,"rectangle-");if(i!==+i||o!==+o||d!==+d||u!==+u||d===0||u===0)return null;var L=Ba("recharts-rectangle",x);if(!j)return g.createElement("path",Dg({},Ar(a,!0),{className:L,d:Q8(i,o,d,u,m)}));var _=N.current,E=w.current,A=P.current,z=k.current,M="0px ".concat(s===-1?1:s,"px"),D="".concat(s,"px 0px"),I=OT(["strokeDasharray"],b,typeof f=="string"?f:void 0);return g.createElement(Qf,{animationId:O,key:O,canBegin:s>0,duration:b,easing:f,isActive:j,begin:p},V=>{var H=Hr(_,d,V),B=Hr(E,u,V),W=Hr(A,i,V),K=Hr(z,o,V);r.current&&(N.current=H,w.current=B,P.current=W,k.current=K);var X;return v?V>0?X={transition:I,strokeDasharray:D}:X={strokeDasharray:M}:X={strokeDasharray:D},g.createElement("path",Dg({},Ar(a,!0),{className:L,d:Q8(W,K,H,B,m),ref:r,style:Z8(Z8({},X),a.style)}))})};function $T(t){var{cx:a,cy:r,radius:s,startAngle:n,endAngle:i}=t,o=xs(a,r,s,n),d=xs(a,r,s,i);return{points:[o,d],cx:a,cy:r,radius:s,startAngle:n,endAngle:i}}function Fj(){return Fj=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Fj.apply(null,arguments)}var HJ=(t,a)=>{var r=Fs(a-t),s=Math.min(Math.abs(a-t),359.999);return r*s},Dp=t=>{var{cx:a,cy:r,radius:s,angle:n,sign:i,isExternal:o,cornerRadius:d,cornerIsExternal:u}=t,m=d*(o?1:-1)+s,x=Math.asin(d/m)/Tg,f=u?n:n+i*x,b=xs(a,r,m,f),p=xs(a,r,s,f),v=u?n-i*x:n,j=xs(a,r,m*Math.cos(x*Tg),v);return{center:b,circleTangency:p,lineTangency:j,theta:x}},FT=t=>{var{cx:a,cy:r,innerRadius:s,outerRadius:n,startAngle:i,endAngle:o}=t,d=HJ(i,o),u=i+d,m=xs(a,r,n,i),x=xs(a,r,n,u),f="M ".concat(m.x,",").concat(m.y,`
    A `).concat(n,",").concat(n,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(i>u),`,
    `).concat(x.x,",").concat(x.y,`
  `);if(s>0){var b=xs(a,r,s,i),p=xs(a,r,s,u);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(i<=u),`,
            `).concat(b.x,",").concat(b.y," Z")}else f+="L ".concat(a,",").concat(r," Z");return f},YJ=t=>{var{cx:a,cy:r,innerRadius:s,outerRadius:n,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:d,startAngle:u,endAngle:m}=t,x=Fs(m-u),{circleTangency:f,lineTangency:b,theta:p}=Dp({cx:a,cy:r,radius:n,angle:u,sign:x,cornerRadius:i,cornerIsExternal:d}),{circleTangency:v,lineTangency:j,theta:N}=Dp({cx:a,cy:r,radius:n,angle:m,sign:-x,cornerRadius:i,cornerIsExternal:d}),w=d?Math.abs(u-m):Math.abs(u-m)-p-N;if(w<0)return o?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):FT({cx:a,cy:r,innerRadius:s,outerRadius:n,startAngle:u,endAngle:m});var P="M ".concat(b.x,",").concat(b.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(x<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(n,",").concat(n,",0,").concat(+(w>180),",").concat(+(x<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(x<0),",").concat(j.x,",").concat(j.y,`
  `);if(s>0){var{circleTangency:k,lineTangency:$,theta:O}=Dp({cx:a,cy:r,radius:s,angle:u,sign:x,isExternal:!0,cornerRadius:i,cornerIsExternal:d}),{circleTangency:L,lineTangency:_,theta:E}=Dp({cx:a,cy:r,radius:s,angle:m,sign:-x,isExternal:!0,cornerRadius:i,cornerIsExternal:d}),A=d?Math.abs(u-m):Math.abs(u-m)-O-E;if(A<0&&i===0)return"".concat(P,"L").concat(a,",").concat(r,"Z");P+="L".concat(_.x,",").concat(_.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(x<0),",").concat(L.x,",").concat(L.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(A>180),",").concat(+(x>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(x<0),",").concat($.x,",").concat($.y,"Z")}else P+="L".concat(a,",").concat(r,"Z");return P},GJ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},IT=t=>{var a=ai(t,GJ),{cx:r,cy:s,innerRadius:n,outerRadius:i,cornerRadius:o,forceCornerRadius:d,cornerIsExternal:u,startAngle:m,endAngle:x,className:f}=a;if(i<n||m===x)return null;var b=Ba("recharts-sector",f),p=i-n,v=gn(o,p,0,!0),j;return v>0&&Math.abs(m-x)<360?j=YJ({cx:r,cy:s,innerRadius:n,outerRadius:i,cornerRadius:Math.min(v,p/2),forceCornerRadius:d,cornerIsExternal:u,startAngle:m,endAngle:x}):j=FT({cx:r,cy:s,innerRadius:n,outerRadius:i,startAngle:m,endAngle:x}),g.createElement("path",Fj({},Ar(a,!0),{className:b,d:j}))};function VJ(t,a,r){var s,n,i,o;if(t==="horizontal")s=a.x,i=s,n=r.top,o=r.top+r.height;else if(t==="vertical")n=a.y,o=n,s=r.left,i=r.left+r.width;else if(a.cx!=null&&a.cy!=null)if(t==="centric"){var{cx:d,cy:u,innerRadius:m,outerRadius:x,angle:f}=a,b=xs(d,u,m,f),p=xs(d,u,x,f);s=b.x,n=b.y,i=p.x,o=p.y}else return $T(a);return[{x:s,y:n},{x:i,y:o}]}var Q1={},e2={},t2={},e7;function WJ(){return e7||(e7=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=YE();function r(s){return a.isSymbol(s)?NaN:Number(s)}t.toNumber=r}(t2)),t2}var t7;function KJ(){return t7||(t7=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=WJ();function r(s){return s?(s=a.toNumber(s),s===1/0||s===-1/0?(s<0?-1:1)*Number.MAX_VALUE:s===s?s:0):s===0?s:0}t.toFinite=r}(e2)),e2}var a7;function XJ(){return a7||(a7=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=GE(),r=KJ();function s(n,i,o){o&&typeof o!="number"&&a.isIterateeCall(n,i,o)&&(i=o=void 0),n=r.toFinite(n),i===void 0?(i=n,n=0):i=r.toFinite(i),o=o===void 0?n<i?1:-1:r.toFinite(o);const d=Math.max(Math.ceil((i-n)/(o||1)),0),u=new Array(d);for(let m=0;m<d;m++)u[m]=n,n+=o;return u}t.range=s}(Q1)),Q1}var a2,r7;function JJ(){return r7||(r7=1,a2=XJ().range),a2}var ZJ=JJ();const BT=Po(ZJ);function Pd(t,a){return t==null||a==null?NaN:t<a?-1:t>a?1:t>=a?0:NaN}function QJ(t,a){return t==null||a==null?NaN:a<t?-1:a>t?1:a>=t?0:NaN}function JN(t){let a,r,s;t.length!==2?(a=Pd,r=(d,u)=>Pd(t(d),u),s=(d,u)=>t(d)-u):(a=t===Pd||t===QJ?t:eZ,r=t,s=t);function n(d,u,m=0,x=d.length){if(m<x){if(a(u,u)!==0)return x;do{const f=m+x>>>1;r(d[f],u)<0?m=f+1:x=f}while(m<x)}return m}function i(d,u,m=0,x=d.length){if(m<x){if(a(u,u)!==0)return x;do{const f=m+x>>>1;r(d[f],u)<=0?m=f+1:x=f}while(m<x)}return m}function o(d,u,m=0,x=d.length){const f=n(d,u,m,x-1);return f>m&&s(d[f-1],u)>-s(d[f],u)?f-1:f}return{left:n,center:o,right:i}}function eZ(){return 0}function zT(t){return t===null?NaN:+t}function*tZ(t,a){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const aZ=JN(Pd),t0=aZ.right;JN(zT).center;class s7 extends Map{constructor(a,r=nZ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),a!=null)for(const[s,n]of a)this.set(s,n)}get(a){return super.get(n7(this,a))}has(a){return super.has(n7(this,a))}set(a,r){return super.set(rZ(this,a),r)}delete(a){return super.delete(sZ(this,a))}}function n7({_intern:t,_key:a},r){const s=a(r);return t.has(s)?t.get(s):r}function rZ({_intern:t,_key:a},r){const s=a(r);return t.has(s)?t.get(s):(t.set(s,r),r)}function sZ({_intern:t,_key:a},r){const s=a(r);return t.has(s)&&(r=t.get(s),t.delete(s)),r}function nZ(t){return t!==null&&typeof t=="object"?t.valueOf():t}function iZ(t=Pd){if(t===Pd)return qT;if(typeof t!="function")throw new TypeError("compare is not a function");return(a,r)=>{const s=t(a,r);return s||s===0?s:(t(r,r)===0)-(t(a,a)===0)}}function qT(t,a){return(t==null||!(t>=t))-(a==null||!(a>=a))||(t<a?-1:t>a?1:0)}const lZ=Math.sqrt(50),oZ=Math.sqrt(10),cZ=Math.sqrt(2);function Lg(t,a,r){const s=(a-t)/Math.max(0,r),n=Math.floor(Math.log10(s)),i=s/Math.pow(10,n),o=i>=lZ?10:i>=oZ?5:i>=cZ?2:1;let d,u,m;return n<0?(m=Math.pow(10,-n)/o,d=Math.round(t*m),u=Math.round(a*m),d/m<t&&++d,u/m>a&&--u,m=-m):(m=Math.pow(10,n)*o,d=Math.round(t/m),u=Math.round(a/m),d*m<t&&++d,u*m>a&&--u),u<d&&.5<=r&&r<2?Lg(t,a,r*2):[d,u,m]}function Ij(t,a,r){if(a=+a,t=+t,r=+r,!(r>0))return[];if(t===a)return[t];const s=a<t,[n,i,o]=s?Lg(a,t,r):Lg(t,a,r);if(!(i>=n))return[];const d=i-n+1,u=new Array(d);if(s)if(o<0)for(let m=0;m<d;++m)u[m]=(i-m)/-o;else for(let m=0;m<d;++m)u[m]=(i-m)*o;else if(o<0)for(let m=0;m<d;++m)u[m]=(n+m)/-o;else for(let m=0;m<d;++m)u[m]=(n+m)*o;return u}function Bj(t,a,r){return a=+a,t=+t,r=+r,Lg(t,a,r)[2]}function zj(t,a,r){a=+a,t=+t,r=+r;const s=a<t,n=s?Bj(a,t,r):Bj(t,a,r);return(s?-1:1)*(n<0?1/-n:n)}function i7(t,a){let r;for(const s of t)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);return r}function l7(t,a){let r;for(const s of t)s!=null&&(r>s||r===void 0&&s>=s)&&(r=s);return r}function UT(t,a,r=0,s=1/0,n){if(a=Math.floor(a),r=Math.floor(Math.max(0,r)),s=Math.floor(Math.min(t.length-1,s)),!(r<=a&&a<=s))return t;for(n=n===void 0?qT:iZ(n);s>r;){if(s-r>600){const u=s-r+1,m=a-r+1,x=Math.log(u),f=.5*Math.exp(2*x/3),b=.5*Math.sqrt(x*f*(u-f)/u)*(m-u/2<0?-1:1),p=Math.max(r,Math.floor(a-m*f/u+b)),v=Math.min(s,Math.floor(a+(u-m)*f/u+b));UT(t,a,p,v,n)}const i=t[a];let o=r,d=s;for(Qh(t,r,a),n(t[s],i)>0&&Qh(t,r,s);o<d;){for(Qh(t,o,d),++o,--d;n(t[o],i)<0;)++o;for(;n(t[d],i)>0;)--d}n(t[r],i)===0?Qh(t,r,d):(++d,Qh(t,d,s)),d<=a&&(r=d+1),a<=d&&(s=d-1)}return t}function Qh(t,a,r){const s=t[a];t[a]=t[r],t[r]=s}function dZ(t,a,r){if(t=Float64Array.from(tZ(t)),!(!(s=t.length)||isNaN(a=+a))){if(a<=0||s<2)return l7(t);if(a>=1)return i7(t);var s,n=(s-1)*a,i=Math.floor(n),o=i7(UT(t,i).subarray(0,i+1)),d=l7(t.subarray(i+1));return o+(d-o)*(n-i)}}function uZ(t,a,r=zT){if(!(!(s=t.length)||isNaN(a=+a))){if(a<=0||s<2)return+r(t[0],0,t);if(a>=1)return+r(t[s-1],s-1,t);var s,n=(s-1)*a,i=Math.floor(n),o=+r(t[i],i,t),d=+r(t[i+1],i+1,t);return o+(d-o)*(n-i)}}function mZ(t,a,r){t=+t,a=+a,r=(n=arguments.length)<2?(a=t,t=0,1):n<3?1:+r;for(var s=-1,n=Math.max(0,Math.ceil((a-t)/r))|0,i=new Array(n);++s<n;)i[s]=t+s*r;return i}function hl(t,a){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(a).domain(t);break}return this}function Oc(t,a){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof a=="function"?this.interpolator(a):this.range(a);break}}return this}const qj=Symbol("implicit");function ZN(){var t=new s7,a=[],r=[],s=qj;function n(i){let o=t.get(i);if(o===void 0){if(s!==qj)return s;t.set(i,o=a.push(i)-1)}return r[o%r.length]}return n.domain=function(i){if(!arguments.length)return a.slice();a=[],t=new s7;for(const o of i)t.has(o)||t.set(o,a.push(o)-1);return n},n.range=function(i){return arguments.length?(r=Array.from(i),n):r.slice()},n.unknown=function(i){return arguments.length?(s=i,n):s},n.copy=function(){return ZN(a,r).unknown(s)},hl.apply(n,arguments),n}function QN(){var t=ZN().unknown(void 0),a=t.domain,r=t.range,s=0,n=1,i,o,d=!1,u=0,m=0,x=.5;delete t.unknown;function f(){var b=a().length,p=n<s,v=p?n:s,j=p?s:n;i=(j-v)/Math.max(1,b-u+m*2),d&&(i=Math.floor(i)),v+=(j-v-i*(b-u))*x,o=i*(1-u),d&&(v=Math.round(v),o=Math.round(o));var N=mZ(b).map(function(w){return v+i*w});return r(p?N.reverse():N)}return t.domain=function(b){return arguments.length?(a(b),f()):a()},t.range=function(b){return arguments.length?([s,n]=b,s=+s,n=+n,f()):[s,n]},t.rangeRound=function(b){return[s,n]=b,s=+s,n=+n,d=!0,f()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(b){return arguments.length?(d=!!b,f()):d},t.padding=function(b){return arguments.length?(u=Math.min(1,m=+b),f()):u},t.paddingInner=function(b){return arguments.length?(u=Math.min(1,b),f()):u},t.paddingOuter=function(b){return arguments.length?(m=+b,f()):m},t.align=function(b){return arguments.length?(x=Math.max(0,Math.min(1,b)),f()):x},t.copy=function(){return QN(a(),[s,n]).round(d).paddingInner(u).paddingOuter(m).align(x)},hl.apply(f(),arguments)}function HT(t){var a=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return HT(a())},t}function xZ(){return HT(QN.apply(null,arguments).paddingInner(1))}function e5(t,a,r){t.prototype=a.prototype=r,r.constructor=t}function YT(t,a){var r=Object.create(t.prototype);for(var s in a)r[s]=a[s];return r}function a0(){}var Pf=.7,Mg=1/Pf,jx="\\s*([+-]?\\d+)\\s*",Of="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ao="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hZ=/^#([0-9a-f]{3,8})$/,fZ=new RegExp(`^rgb\\(${jx},${jx},${jx}\\)$`),pZ=new RegExp(`^rgb\\(${Ao},${Ao},${Ao}\\)$`),gZ=new RegExp(`^rgba\\(${jx},${jx},${jx},${Of}\\)$`),yZ=new RegExp(`^rgba\\(${Ao},${Ao},${Ao},${Of}\\)$`),bZ=new RegExp(`^hsl\\(${Of},${Ao},${Ao}\\)$`),vZ=new RegExp(`^hsla\\(${Of},${Ao},${Ao},${Of}\\)$`),o7={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};e5(a0,Df,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:c7,formatHex:c7,formatHex8:jZ,formatHsl:NZ,formatRgb:d7,toString:d7});function c7(){return this.rgb().formatHex()}function jZ(){return this.rgb().formatHex8()}function NZ(){return GT(this).formatHsl()}function d7(){return this.rgb().formatRgb()}function Df(t){var a,r;return t=(t+"").trim().toLowerCase(),(a=hZ.exec(t))?(r=a[1].length,a=parseInt(a[1],16),r===6?u7(a):r===3?new Jn(a>>8&15|a>>4&240,a>>4&15|a&240,(a&15)<<4|a&15,1):r===8?Lp(a>>24&255,a>>16&255,a>>8&255,(a&255)/255):r===4?Lp(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|a&240,((a&15)<<4|a&15)/255):null):(a=fZ.exec(t))?new Jn(a[1],a[2],a[3],1):(a=pZ.exec(t))?new Jn(a[1]*255/100,a[2]*255/100,a[3]*255/100,1):(a=gZ.exec(t))?Lp(a[1],a[2],a[3],a[4]):(a=yZ.exec(t))?Lp(a[1]*255/100,a[2]*255/100,a[3]*255/100,a[4]):(a=bZ.exec(t))?h7(a[1],a[2]/100,a[3]/100,1):(a=vZ.exec(t))?h7(a[1],a[2]/100,a[3]/100,a[4]):o7.hasOwnProperty(t)?u7(o7[t]):t==="transparent"?new Jn(NaN,NaN,NaN,0):null}function u7(t){return new Jn(t>>16&255,t>>8&255,t&255,1)}function Lp(t,a,r,s){return s<=0&&(t=a=r=NaN),new Jn(t,a,r,s)}function wZ(t){return t instanceof a0||(t=Df(t)),t?(t=t.rgb(),new Jn(t.r,t.g,t.b,t.opacity)):new Jn}function Uj(t,a,r,s){return arguments.length===1?wZ(t):new Jn(t,a,r,s??1)}function Jn(t,a,r,s){this.r=+t,this.g=+a,this.b=+r,this.opacity=+s}e5(Jn,Uj,YT(a0,{brighter(t){return t=t==null?Mg:Math.pow(Mg,t),new Jn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Pf:Math.pow(Pf,t),new Jn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Jn(Vu(this.r),Vu(this.g),Vu(this.b),Rg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:m7,formatHex:m7,formatHex8:SZ,formatRgb:x7,toString:x7}));function m7(){return`#${Fu(this.r)}${Fu(this.g)}${Fu(this.b)}`}function SZ(){return`#${Fu(this.r)}${Fu(this.g)}${Fu(this.b)}${Fu((isNaN(this.opacity)?1:this.opacity)*255)}`}function x7(){const t=Rg(this.opacity);return`${t===1?"rgb(":"rgba("}${Vu(this.r)}, ${Vu(this.g)}, ${Vu(this.b)}${t===1?")":`, ${t})`}`}function Rg(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Vu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Fu(t){return t=Vu(t),(t<16?"0":"")+t.toString(16)}function h7(t,a,r,s){return s<=0?t=a=r=NaN:r<=0||r>=1?t=a=NaN:a<=0&&(t=NaN),new Il(t,a,r,s)}function GT(t){if(t instanceof Il)return new Il(t.h,t.s,t.l,t.opacity);if(t instanceof a0||(t=Df(t)),!t)return new Il;if(t instanceof Il)return t;t=t.rgb();var a=t.r/255,r=t.g/255,s=t.b/255,n=Math.min(a,r,s),i=Math.max(a,r,s),o=NaN,d=i-n,u=(i+n)/2;return d?(a===i?o=(r-s)/d+(r<s)*6:r===i?o=(s-a)/d+2:o=(a-r)/d+4,d/=u<.5?i+n:2-i-n,o*=60):d=u>0&&u<1?0:o,new Il(o,d,u,t.opacity)}function _Z(t,a,r,s){return arguments.length===1?GT(t):new Il(t,a,r,s??1)}function Il(t,a,r,s){this.h=+t,this.s=+a,this.l=+r,this.opacity=+s}e5(Il,_Z,YT(a0,{brighter(t){return t=t==null?Mg:Math.pow(Mg,t),new Il(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Pf:Math.pow(Pf,t),new Il(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,a=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*a,n=2*r-s;return new Jn(r2(t>=240?t-240:t+120,n,s),r2(t,n,s),r2(t<120?t+240:t-120,n,s),this.opacity)},clamp(){return new Il(f7(this.h),Mp(this.s),Mp(this.l),Rg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Rg(this.opacity);return`${t===1?"hsl(":"hsla("}${f7(this.h)}, ${Mp(this.s)*100}%, ${Mp(this.l)*100}%${t===1?")":`, ${t})`}`}}));function f7(t){return t=(t||0)%360,t<0?t+360:t}function Mp(t){return Math.max(0,Math.min(1,t||0))}function r2(t,a,r){return(t<60?a+(r-a)*t/60:t<180?r:t<240?a+(r-a)*(240-t)/60:a)*255}const t5=t=>()=>t;function AZ(t,a){return function(r){return t+r*a}}function kZ(t,a,r){return t=Math.pow(t,r),a=Math.pow(a,r)-t,r=1/r,function(s){return Math.pow(t+s*a,r)}}function CZ(t){return(t=+t)==1?VT:function(a,r){return r-a?kZ(a,r,t):t5(isNaN(a)?r:a)}}function VT(t,a){var r=a-t;return r?AZ(t,r):t5(isNaN(t)?a:t)}const p7=function t(a){var r=CZ(a);function s(n,i){var o=r((n=Uj(n)).r,(i=Uj(i)).r),d=r(n.g,i.g),u=r(n.b,i.b),m=VT(n.opacity,i.opacity);return function(x){return n.r=o(x),n.g=d(x),n.b=u(x),n.opacity=m(x),n+""}}return s.gamma=t,s}(1);function EZ(t,a){a||(a=[]);var r=t?Math.min(a.length,t.length):0,s=a.slice(),n;return function(i){for(n=0;n<r;++n)s[n]=t[n]*(1-i)+a[n]*i;return s}}function TZ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function PZ(t,a){var r=a?a.length:0,s=t?Math.min(r,t.length):0,n=new Array(s),i=new Array(r),o;for(o=0;o<s;++o)n[o]=Hx(t[o],a[o]);for(;o<r;++o)i[o]=a[o];return function(d){for(o=0;o<s;++o)i[o]=n[o](d);return i}}function OZ(t,a){var r=new Date;return t=+t,a=+a,function(s){return r.setTime(t*(1-s)+a*s),r}}function $g(t,a){return t=+t,a=+a,function(r){return t*(1-r)+a*r}}function DZ(t,a){var r={},s={},n;(t===null||typeof t!="object")&&(t={}),(a===null||typeof a!="object")&&(a={});for(n in a)n in t?r[n]=Hx(t[n],a[n]):s[n]=a[n];return function(i){for(n in r)s[n]=r[n](i);return s}}var Hj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s2=new RegExp(Hj.source,"g");function LZ(t){return function(){return t}}function MZ(t){return function(a){return t(a)+""}}function RZ(t,a){var r=Hj.lastIndex=s2.lastIndex=0,s,n,i,o=-1,d=[],u=[];for(t=t+"",a=a+"";(s=Hj.exec(t))&&(n=s2.exec(a));)(i=n.index)>r&&(i=a.slice(r,i),d[o]?d[o]+=i:d[++o]=i),(s=s[0])===(n=n[0])?d[o]?d[o]+=n:d[++o]=n:(d[++o]=null,u.push({i:o,x:$g(s,n)})),r=s2.lastIndex;return r<a.length&&(i=a.slice(r),d[o]?d[o]+=i:d[++o]=i),d.length<2?u[0]?MZ(u[0].x):LZ(a):(a=u.length,function(m){for(var x=0,f;x<a;++x)d[(f=u[x]).i]=f.x(m);return d.join("")})}function Hx(t,a){var r=typeof a,s;return a==null||r==="boolean"?t5(a):(r==="number"?$g:r==="string"?(s=Df(a))?(a=s,p7):RZ:a instanceof Df?p7:a instanceof Date?OZ:TZ(a)?EZ:Array.isArray(a)?PZ:typeof a.valueOf!="function"&&typeof a.toString!="function"||isNaN(a)?DZ:$g)(t,a)}function a5(t,a){return t=+t,a=+a,function(r){return Math.round(t*(1-r)+a*r)}}function $Z(t,a){a===void 0&&(a=t,t=Hx);for(var r=0,s=a.length-1,n=a[0],i=new Array(s<0?0:s);r<s;)i[r]=t(n,n=a[++r]);return function(o){var d=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[d](o-d)}}function FZ(t){return function(){return t}}function Fg(t){return+t}var g7=[0,1];function Dn(t){return t}function Yj(t,a){return(a-=t=+t)?function(r){return(r-t)/a}:FZ(isNaN(a)?NaN:.5)}function IZ(t,a){var r;return t>a&&(r=t,t=a,a=r),function(s){return Math.max(t,Math.min(a,s))}}function BZ(t,a,r){var s=t[0],n=t[1],i=a[0],o=a[1];return n<s?(s=Yj(n,s),i=r(o,i)):(s=Yj(s,n),i=r(i,o)),function(d){return i(s(d))}}function zZ(t,a,r){var s=Math.min(t.length,a.length)-1,n=new Array(s),i=new Array(s),o=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),a=a.slice().reverse());++o<s;)n[o]=Yj(t[o],t[o+1]),i[o]=r(a[o],a[o+1]);return function(d){var u=t0(t,d,1,s)-1;return i[u](n[u](d))}}function r0(t,a){return a.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ly(){var t=g7,a=g7,r=Hx,s,n,i,o=Dn,d,u,m;function x(){var b=Math.min(t.length,a.length);return o!==Dn&&(o=IZ(t[0],t[b-1])),d=b>2?zZ:BZ,u=m=null,f}function f(b){return b==null||isNaN(b=+b)?i:(u||(u=d(t.map(s),a,r)))(s(o(b)))}return f.invert=function(b){return o(n((m||(m=d(a,t.map(s),$g)))(b)))},f.domain=function(b){return arguments.length?(t=Array.from(b,Fg),x()):t.slice()},f.range=function(b){return arguments.length?(a=Array.from(b),x()):a.slice()},f.rangeRound=function(b){return a=Array.from(b),r=a5,x()},f.clamp=function(b){return arguments.length?(o=b?!0:Dn,x()):o!==Dn},f.interpolate=function(b){return arguments.length?(r=b,x()):r},f.unknown=function(b){return arguments.length?(i=b,f):i},function(b,p){return s=b,n=p,x()}}function r5(){return Ly()(Dn,Dn)}function qZ(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ig(t,a){if((r=(t=a?t.toExponential(a-1):t.toExponential()).indexOf("e"))<0)return null;var r,s=t.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+t.slice(r+1)]}function Ox(t){return t=Ig(Math.abs(t)),t?t[1]:NaN}function UZ(t,a){return function(r,s){for(var n=r.length,i=[],o=0,d=t[0],u=0;n>0&&d>0&&(u+d+1>s&&(d=Math.max(1,s-u)),i.push(r.substring(n-=d,n+d)),!((u+=d+1)>s));)d=t[o=(o+1)%t.length];return i.reverse().join(a)}}function HZ(t){return function(a){return a.replace(/[0-9]/g,function(r){return t[+r]})}}var YZ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Lf(t){if(!(a=YZ.exec(t)))throw new Error("invalid format: "+t);var a;return new s5({fill:a[1],align:a[2],sign:a[3],symbol:a[4],zero:a[5],width:a[6],comma:a[7],precision:a[8]&&a[8].slice(1),trim:a[9],type:a[10]})}Lf.prototype=s5.prototype;function s5(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}s5.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function GZ(t){e:for(var a=t.length,r=1,s=-1,n;r<a;++r)switch(t[r]){case".":s=n=r;break;case"0":s===0&&(s=r),n=r;break;default:if(!+t[r])break e;s>0&&(s=0);break}return s>0?t.slice(0,s)+t.slice(n+1):t}var WT;function VZ(t,a){var r=Ig(t,a);if(!r)return t+"";var s=r[0],n=r[1],i=n-(WT=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+Ig(t,Math.max(0,a+i-1))[0]}function y7(t,a){var r=Ig(t,a);if(!r)return t+"";var s=r[0],n=r[1];return n<0?"0."+new Array(-n).join("0")+s:s.length>n+1?s.slice(0,n+1)+"."+s.slice(n+1):s+new Array(n-s.length+2).join("0")}const b7={"%":(t,a)=>(t*100).toFixed(a),b:t=>Math.round(t).toString(2),c:t=>t+"",d:qZ,e:(t,a)=>t.toExponential(a),f:(t,a)=>t.toFixed(a),g:(t,a)=>t.toPrecision(a),o:t=>Math.round(t).toString(8),p:(t,a)=>y7(t*100,a),r:y7,s:VZ,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function v7(t){return t}var j7=Array.prototype.map,N7=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function WZ(t){var a=t.grouping===void 0||t.thousands===void 0?v7:UZ(j7.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",s=t.currency===void 0?"":t.currency[1]+"",n=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?v7:HZ(j7.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",d=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function m(f){f=Lf(f);var b=f.fill,p=f.align,v=f.sign,j=f.symbol,N=f.zero,w=f.width,P=f.comma,k=f.precision,$=f.trim,O=f.type;O==="n"?(P=!0,O="g"):b7[O]||(k===void 0&&(k=12),$=!0,O="g"),(N||b==="0"&&p==="=")&&(N=!0,b="0",p="=");var L=j==="$"?r:j==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",_=j==="$"?s:/[%p]/.test(O)?o:"",E=b7[O],A=/[defgprs%]/.test(O);k=k===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function z(M){var D=L,I=_,V,H,B;if(O==="c")I=E(M)+I,M="";else{M=+M;var W=M<0||1/M<0;if(M=isNaN(M)?u:E(Math.abs(M),k),$&&(M=GZ(M)),W&&+M==0&&v!=="+"&&(W=!1),D=(W?v==="("?v:d:v==="-"||v==="("?"":v)+D,I=(O==="s"?N7[8+WT/3]:"")+I+(W&&v==="("?")":""),A){for(V=-1,H=M.length;++V<H;)if(B=M.charCodeAt(V),48>B||B>57){I=(B===46?n+M.slice(V+1):M.slice(V))+I,M=M.slice(0,V);break}}}P&&!N&&(M=a(M,1/0));var K=D.length+M.length+I.length,X=K<w?new Array(w-K+1).join(b):"";switch(P&&N&&(M=a(X+M,X.length?w-I.length:1/0),X=""),p){case"<":M=D+M+I+X;break;case"=":M=D+X+M+I;break;case"^":M=X.slice(0,K=X.length>>1)+D+M+I+X.slice(K);break;default:M=X+D+M+I;break}return i(M)}return z.toString=function(){return f+""},z}function x(f,b){var p=m((f=Lf(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(Ox(b)/3)))*3,j=Math.pow(10,-v),N=N7[8+v/3];return function(w){return p(j*w)+N}}return{format:m,formatPrefix:x}}var Rp,n5,KT;KZ({thousands:",",grouping:[3],currency:["$",""]});function KZ(t){return Rp=WZ(t),n5=Rp.format,KT=Rp.formatPrefix,Rp}function XZ(t){return Math.max(0,-Ox(Math.abs(t)))}function JZ(t,a){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ox(a)/3)))*3-Ox(Math.abs(t)))}function ZZ(t,a){return t=Math.abs(t),a=Math.abs(a)-t,Math.max(0,Ox(a)-Ox(t))+1}function XT(t,a,r,s){var n=zj(t,a,r),i;switch(s=Lf(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(a));return s.precision==null&&!isNaN(i=JZ(n,o))&&(s.precision=i),KT(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=ZZ(n,Math.max(Math.abs(t),Math.abs(a))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=XZ(n))&&(s.precision=i-(s.type==="%")*2);break}}return n5(s)}function Gd(t){var a=t.domain;return t.ticks=function(r){var s=a();return Ij(s[0],s[s.length-1],r??10)},t.tickFormat=function(r,s){var n=a();return XT(n[0],n[n.length-1],r??10,s)},t.nice=function(r){r==null&&(r=10);var s=a(),n=0,i=s.length-1,o=s[n],d=s[i],u,m,x=10;for(d<o&&(m=o,o=d,d=m,m=n,n=i,i=m);x-- >0;){if(m=Bj(o,d,r),m===u)return s[n]=o,s[i]=d,a(s);if(m>0)o=Math.floor(o/m)*m,d=Math.ceil(d/m)*m;else if(m<0)o=Math.ceil(o*m)/m,d=Math.floor(d*m)/m;else break;u=m}return t},t}function JT(){var t=r5();return t.copy=function(){return r0(t,JT())},hl.apply(t,arguments),Gd(t)}function ZT(t){var a;function r(s){return s==null||isNaN(s=+s)?a:s}return r.invert=r,r.domain=r.range=function(s){return arguments.length?(t=Array.from(s,Fg),r):t.slice()},r.unknown=function(s){return arguments.length?(a=s,r):a},r.copy=function(){return ZT(t).unknown(a)},t=arguments.length?Array.from(t,Fg):[0,1],Gd(r)}function QT(t,a){t=t.slice();var r=0,s=t.length-1,n=t[r],i=t[s],o;return i<n&&(o=r,r=s,s=o,o=n,n=i,i=o),t[r]=a.floor(n),t[s]=a.ceil(i),t}function w7(t){return Math.log(t)}function S7(t){return Math.exp(t)}function QZ(t){return-Math.log(-t)}function eQ(t){return-Math.exp(-t)}function tQ(t){return isFinite(t)?+("1e"+t):t<0?0:t}function aQ(t){return t===10?tQ:t===Math.E?Math.exp:a=>Math.pow(t,a)}function rQ(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),a=>Math.log(a)/t)}function _7(t){return(a,r)=>-t(-a,r)}function i5(t){const a=t(w7,S7),r=a.domain;let s=10,n,i;function o(){return n=rQ(s),i=aQ(s),r()[0]<0?(n=_7(n),i=_7(i),t(QZ,eQ)):t(w7,S7),a}return a.base=function(d){return arguments.length?(s=+d,o()):s},a.domain=function(d){return arguments.length?(r(d),o()):r()},a.ticks=d=>{const u=r();let m=u[0],x=u[u.length-1];const f=x<m;f&&([m,x]=[x,m]);let b=n(m),p=n(x),v,j;const N=d==null?10:+d;let w=[];if(!(s%1)&&p-b<N){if(b=Math.floor(b),p=Math.ceil(p),m>0){for(;b<=p;++b)for(v=1;v<s;++v)if(j=b<0?v/i(-b):v*i(b),!(j<m)){if(j>x)break;w.push(j)}}else for(;b<=p;++b)for(v=s-1;v>=1;--v)if(j=b>0?v/i(-b):v*i(b),!(j<m)){if(j>x)break;w.push(j)}w.length*2<N&&(w=Ij(m,x,N))}else w=Ij(b,p,Math.min(p-b,N)).map(i);return f?w.reverse():w},a.tickFormat=(d,u)=>{if(d==null&&(d=10),u==null&&(u=s===10?"s":","),typeof u!="function"&&(!(s%1)&&(u=Lf(u)).precision==null&&(u.trim=!0),u=n5(u)),d===1/0)return u;const m=Math.max(1,s*d/a.ticks().length);return x=>{let f=x/i(Math.round(n(x)));return f*s<s-.5&&(f*=s),f<=m?u(x):""}},a.nice=()=>r(QT(r(),{floor:d=>i(Math.floor(n(d))),ceil:d=>i(Math.ceil(n(d)))})),a}function eP(){const t=i5(Ly()).domain([1,10]);return t.copy=()=>r0(t,eP()).base(t.base()),hl.apply(t,arguments),t}function A7(t){return function(a){return Math.sign(a)*Math.log1p(Math.abs(a/t))}}function k7(t){return function(a){return Math.sign(a)*Math.expm1(Math.abs(a))*t}}function l5(t){var a=1,r=t(A7(a),k7(a));return r.constant=function(s){return arguments.length?t(A7(a=+s),k7(a)):a},Gd(r)}function tP(){var t=l5(Ly());return t.copy=function(){return r0(t,tP()).constant(t.constant())},hl.apply(t,arguments)}function C7(t){return function(a){return a<0?-Math.pow(-a,t):Math.pow(a,t)}}function sQ(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function nQ(t){return t<0?-t*t:t*t}function o5(t){var a=t(Dn,Dn),r=1;function s(){return r===1?t(Dn,Dn):r===.5?t(sQ,nQ):t(C7(r),C7(1/r))}return a.exponent=function(n){return arguments.length?(r=+n,s()):r},Gd(a)}function c5(){var t=o5(Ly());return t.copy=function(){return r0(t,c5()).exponent(t.exponent())},hl.apply(t,arguments),t}function iQ(){return c5.apply(null,arguments).exponent(.5)}function E7(t){return Math.sign(t)*t*t}function lQ(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function aP(){var t=r5(),a=[0,1],r=!1,s;function n(i){var o=lQ(t(i));return isNaN(o)?s:r?Math.round(o):o}return n.invert=function(i){return t.invert(E7(i))},n.domain=function(i){return arguments.length?(t.domain(i),n):t.domain()},n.range=function(i){return arguments.length?(t.range((a=Array.from(i,Fg)).map(E7)),n):a.slice()},n.rangeRound=function(i){return n.range(i).round(!0)},n.round=function(i){return arguments.length?(r=!!i,n):r},n.clamp=function(i){return arguments.length?(t.clamp(i),n):t.clamp()},n.unknown=function(i){return arguments.length?(s=i,n):s},n.copy=function(){return aP(t.domain(),a).round(r).clamp(t.clamp()).unknown(s)},hl.apply(n,arguments),Gd(n)}function rP(){var t=[],a=[],r=[],s;function n(){var o=0,d=Math.max(1,a.length);for(r=new Array(d-1);++o<d;)r[o-1]=uZ(t,o/d);return i}function i(o){return o==null||isNaN(o=+o)?s:a[t0(r,o)]}return i.invertExtent=function(o){var d=a.indexOf(o);return d<0?[NaN,NaN]:[d>0?r[d-1]:t[0],d<r.length?r[d]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let d of o)d!=null&&!isNaN(d=+d)&&t.push(d);return t.sort(Pd),n()},i.range=function(o){return arguments.length?(a=Array.from(o),n()):a.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return r.slice()},i.copy=function(){return rP().domain(t).range(a).unknown(s)},hl.apply(i,arguments)}function sP(){var t=0,a=1,r=1,s=[.5],n=[0,1],i;function o(u){return u!=null&&u<=u?n[t0(s,u,0,r)]:i}function d(){var u=-1;for(s=new Array(r);++u<r;)s[u]=((u+1)*a-(u-r)*t)/(r+1);return o}return o.domain=function(u){return arguments.length?([t,a]=u,t=+t,a=+a,d()):[t,a]},o.range=function(u){return arguments.length?(r=(n=Array.from(u)).length-1,d()):n.slice()},o.invertExtent=function(u){var m=n.indexOf(u);return m<0?[NaN,NaN]:m<1?[t,s[0]]:m>=r?[s[r-1],a]:[s[m-1],s[m]]},o.unknown=function(u){return arguments.length&&(i=u),o},o.thresholds=function(){return s.slice()},o.copy=function(){return sP().domain([t,a]).range(n).unknown(i)},hl.apply(Gd(o),arguments)}function nP(){var t=[.5],a=[0,1],r,s=1;function n(i){return i!=null&&i<=i?a[t0(t,i,0,s)]:r}return n.domain=function(i){return arguments.length?(t=Array.from(i),s=Math.min(t.length,a.length-1),n):t.slice()},n.range=function(i){return arguments.length?(a=Array.from(i),s=Math.min(t.length,a.length-1),n):a.slice()},n.invertExtent=function(i){var o=a.indexOf(i);return[t[o-1],t[o]]},n.unknown=function(i){return arguments.length?(r=i,n):r},n.copy=function(){return nP().domain(t).range(a).unknown(r)},hl.apply(n,arguments)}const n2=new Date,i2=new Date;function _s(t,a,r,s){function n(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return n.floor=i=>(t(i=new Date(+i)),i),n.ceil=i=>(t(i=new Date(i-1)),a(i,1),t(i),i),n.round=i=>{const o=n(i),d=n.ceil(i);return i-o<d-i?o:d},n.offset=(i,o)=>(a(i=new Date(+i),o==null?1:Math.floor(o)),i),n.range=(i,o,d)=>{const u=[];if(i=n.ceil(i),d=d==null?1:Math.floor(d),!(i<o)||!(d>0))return u;let m;do u.push(m=new Date(+i)),a(i,d),t(i);while(m<i&&i<o);return u},n.filter=i=>_s(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,d)=>{if(o>=o)if(d<0)for(;++d<=0;)for(;a(o,-1),!i(o););else for(;--d>=0;)for(;a(o,1),!i(o););}),r&&(n.count=(i,o)=>(n2.setTime(+i),i2.setTime(+o),t(n2),t(i2),Math.floor(r(n2,i2))),n.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?n.filter(s?o=>s(o)%i===0:o=>n.count(0,o)%i===0):n)),n}const Bg=_s(()=>{},(t,a)=>{t.setTime(+t+a)},(t,a)=>a-t);Bg.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?_s(a=>{a.setTime(Math.floor(a/t)*t)},(a,r)=>{a.setTime(+a+r*t)},(a,r)=>(r-a)/t):Bg);Bg.range;const xc=1e3,dl=xc*60,hc=dl*60,wc=hc*24,d5=wc*7,T7=wc*30,l2=wc*365,Iu=_s(t=>{t.setTime(t-t.getMilliseconds())},(t,a)=>{t.setTime(+t+a*xc)},(t,a)=>(a-t)/xc,t=>t.getUTCSeconds());Iu.range;const u5=_s(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*xc)},(t,a)=>{t.setTime(+t+a*dl)},(t,a)=>(a-t)/dl,t=>t.getMinutes());u5.range;const m5=_s(t=>{t.setUTCSeconds(0,0)},(t,a)=>{t.setTime(+t+a*dl)},(t,a)=>(a-t)/dl,t=>t.getUTCMinutes());m5.range;const x5=_s(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*xc-t.getMinutes()*dl)},(t,a)=>{t.setTime(+t+a*hc)},(t,a)=>(a-t)/hc,t=>t.getHours());x5.range;const h5=_s(t=>{t.setUTCMinutes(0,0,0)},(t,a)=>{t.setTime(+t+a*hc)},(t,a)=>(a-t)/hc,t=>t.getUTCHours());h5.range;const s0=_s(t=>t.setHours(0,0,0,0),(t,a)=>t.setDate(t.getDate()+a),(t,a)=>(a-t-(a.getTimezoneOffset()-t.getTimezoneOffset())*dl)/wc,t=>t.getDate()-1);s0.range;const My=_s(t=>{t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCDate(t.getUTCDate()+a)},(t,a)=>(a-t)/wc,t=>t.getUTCDate()-1);My.range;const iP=_s(t=>{t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCDate(t.getUTCDate()+a)},(t,a)=>(a-t)/wc,t=>Math.floor(t/wc));iP.range;function xm(t){return _s(a=>{a.setDate(a.getDate()-(a.getDay()+7-t)%7),a.setHours(0,0,0,0)},(a,r)=>{a.setDate(a.getDate()+r*7)},(a,r)=>(r-a-(r.getTimezoneOffset()-a.getTimezoneOffset())*dl)/d5)}const Ry=xm(0),zg=xm(1),oQ=xm(2),cQ=xm(3),Dx=xm(4),dQ=xm(5),uQ=xm(6);Ry.range;zg.range;oQ.range;cQ.range;Dx.range;dQ.range;uQ.range;function hm(t){return _s(a=>{a.setUTCDate(a.getUTCDate()-(a.getUTCDay()+7-t)%7),a.setUTCHours(0,0,0,0)},(a,r)=>{a.setUTCDate(a.getUTCDate()+r*7)},(a,r)=>(r-a)/d5)}const $y=hm(0),qg=hm(1),mQ=hm(2),xQ=hm(3),Lx=hm(4),hQ=hm(5),fQ=hm(6);$y.range;qg.range;mQ.range;xQ.range;Lx.range;hQ.range;fQ.range;const f5=_s(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,a)=>{t.setMonth(t.getMonth()+a)},(t,a)=>a.getMonth()-t.getMonth()+(a.getFullYear()-t.getFullYear())*12,t=>t.getMonth());f5.range;const p5=_s(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCMonth(t.getUTCMonth()+a)},(t,a)=>a.getUTCMonth()-t.getUTCMonth()+(a.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());p5.range;const Sc=_s(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,a)=>{t.setFullYear(t.getFullYear()+a)},(t,a)=>a.getFullYear()-t.getFullYear(),t=>t.getFullYear());Sc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_s(a=>{a.setFullYear(Math.floor(a.getFullYear()/t)*t),a.setMonth(0,1),a.setHours(0,0,0,0)},(a,r)=>{a.setFullYear(a.getFullYear()+r*t)});Sc.range;const _c=_s(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCFullYear(t.getUTCFullYear()+a)},(t,a)=>a.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());_c.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_s(a=>{a.setUTCFullYear(Math.floor(a.getUTCFullYear()/t)*t),a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},(a,r)=>{a.setUTCFullYear(a.getUTCFullYear()+r*t)});_c.range;function lP(t,a,r,s,n,i){const o=[[Iu,1,xc],[Iu,5,5*xc],[Iu,15,15*xc],[Iu,30,30*xc],[i,1,dl],[i,5,5*dl],[i,15,15*dl],[i,30,30*dl],[n,1,hc],[n,3,3*hc],[n,6,6*hc],[n,12,12*hc],[s,1,wc],[s,2,2*wc],[r,1,d5],[a,1,T7],[a,3,3*T7],[t,1,l2]];function d(m,x,f){const b=x<m;b&&([m,x]=[x,m]);const p=f&&typeof f.range=="function"?f:u(m,x,f),v=p?p.range(m,+x+1):[];return b?v.reverse():v}function u(m,x,f){const b=Math.abs(x-m)/f,p=JN(([,,N])=>N).right(o,b);if(p===o.length)return t.every(zj(m/l2,x/l2,f));if(p===0)return Bg.every(Math.max(zj(m,x,f),1));const[v,j]=o[b/o[p-1][2]<o[p][2]/b?p-1:p];return v.every(j)}return[d,u]}const[pQ,gQ]=lP(_c,p5,$y,iP,h5,m5),[yQ,bQ]=lP(Sc,f5,Ry,s0,x5,u5);function o2(t){if(0<=t.y&&t.y<100){var a=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return a.setFullYear(t.y),a}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function c2(t){if(0<=t.y&&t.y<100){var a=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return a.setUTCFullYear(t.y),a}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ef(t,a,r){return{y:t,m:a,d:r,H:0,M:0,S:0,L:0}}function vQ(t){var a=t.dateTime,r=t.date,s=t.time,n=t.periods,i=t.days,o=t.shortDays,d=t.months,u=t.shortMonths,m=tf(n),x=af(n),f=tf(i),b=af(i),p=tf(o),v=af(o),j=tf(d),N=af(d),w=tf(u),P=af(u),k={a:W,A:K,b:X,B:Q,c:null,d:R7,e:R7,f:UQ,g:QQ,G:tee,H:BQ,I:zQ,j:qQ,L:oP,m:HQ,M:YQ,p:ye,q:Y,Q:I7,s:B7,S:GQ,u:VQ,U:WQ,V:KQ,w:XQ,W:JQ,x:null,X:null,y:ZQ,Y:eee,Z:aee,"%":F7},$={a:J,A:U,b:ee,B:he,c:null,d:$7,e:$7,f:iee,g:pee,G:yee,H:ree,I:see,j:nee,L:dP,m:lee,M:oee,p:pe,q:se,Q:I7,s:B7,S:cee,u:dee,U:uee,V:mee,w:xee,W:hee,x:null,X:null,y:fee,Y:gee,Z:bee,"%":F7},O={a:z,A:M,b:D,B:I,c:V,d:L7,e:L7,f:RQ,g:D7,G:O7,H:M7,I:M7,j:OQ,L:MQ,m:PQ,M:DQ,p:A,q:TQ,Q:FQ,s:IQ,S:LQ,u:_Q,U:AQ,V:kQ,w:SQ,W:CQ,x:H,X:B,y:D7,Y:O7,Z:EQ,"%":$Q};k.x=L(r,k),k.X=L(s,k),k.c=L(a,k),$.x=L(r,$),$.X=L(s,$),$.c=L(a,$);function L(te,ue){return function(ge){var ce=[],De=-1,ke=0,re=te.length,Ee,Se,Ge;for(ge instanceof Date||(ge=new Date(+ge));++De<re;)te.charCodeAt(De)===37&&(ce.push(te.slice(ke,De)),(Se=P7[Ee=te.charAt(++De)])!=null?Ee=te.charAt(++De):Se=Ee==="e"?" ":"0",(Ge=ue[Ee])&&(Ee=Ge(ge,Se)),ce.push(Ee),ke=De+1);return ce.push(te.slice(ke,De)),ce.join("")}}function _(te,ue){return function(ge){var ce=ef(1900,void 0,1),De=E(ce,te,ge+="",0),ke,re;if(De!=ge.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(ue&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(ke=c2(ef(ce.y,0,1)),re=ke.getUTCDay(),ke=re>4||re===0?qg.ceil(ke):qg(ke),ke=My.offset(ke,(ce.V-1)*7),ce.y=ke.getUTCFullYear(),ce.m=ke.getUTCMonth(),ce.d=ke.getUTCDate()+(ce.w+6)%7):(ke=o2(ef(ce.y,0,1)),re=ke.getDay(),ke=re>4||re===0?zg.ceil(ke):zg(ke),ke=s0.offset(ke,(ce.V-1)*7),ce.y=ke.getFullYear(),ce.m=ke.getMonth(),ce.d=ke.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),re="Z"in ce?c2(ef(ce.y,0,1)).getUTCDay():o2(ef(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(re+5)%7:ce.w+ce.U*7-(re+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,c2(ce)):o2(ce)}}function E(te,ue,ge,ce){for(var De=0,ke=ue.length,re=ge.length,Ee,Se;De<ke;){if(ce>=re)return-1;if(Ee=ue.charCodeAt(De++),Ee===37){if(Ee=ue.charAt(De++),Se=O[Ee in P7?ue.charAt(De++):Ee],!Se||(ce=Se(te,ge,ce))<0)return-1}else if(Ee!=ge.charCodeAt(ce++))return-1}return ce}function A(te,ue,ge){var ce=m.exec(ue.slice(ge));return ce?(te.p=x.get(ce[0].toLowerCase()),ge+ce[0].length):-1}function z(te,ue,ge){var ce=p.exec(ue.slice(ge));return ce?(te.w=v.get(ce[0].toLowerCase()),ge+ce[0].length):-1}function M(te,ue,ge){var ce=f.exec(ue.slice(ge));return ce?(te.w=b.get(ce[0].toLowerCase()),ge+ce[0].length):-1}function D(te,ue,ge){var ce=w.exec(ue.slice(ge));return ce?(te.m=P.get(ce[0].toLowerCase()),ge+ce[0].length):-1}function I(te,ue,ge){var ce=j.exec(ue.slice(ge));return ce?(te.m=N.get(ce[0].toLowerCase()),ge+ce[0].length):-1}function V(te,ue,ge){return E(te,a,ue,ge)}function H(te,ue,ge){return E(te,r,ue,ge)}function B(te,ue,ge){return E(te,s,ue,ge)}function W(te){return o[te.getDay()]}function K(te){return i[te.getDay()]}function X(te){return u[te.getMonth()]}function Q(te){return d[te.getMonth()]}function ye(te){return n[+(te.getHours()>=12)]}function Y(te){return 1+~~(te.getMonth()/3)}function J(te){return o[te.getUTCDay()]}function U(te){return i[te.getUTCDay()]}function ee(te){return u[te.getUTCMonth()]}function he(te){return d[te.getUTCMonth()]}function pe(te){return n[+(te.getUTCHours()>=12)]}function se(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var ue=L(te+="",k);return ue.toString=function(){return te},ue},parse:function(te){var ue=_(te+="",!1);return ue.toString=function(){return te},ue},utcFormat:function(te){var ue=L(te+="",$);return ue.toString=function(){return te},ue},utcParse:function(te){var ue=_(te+="",!0);return ue.toString=function(){return te},ue}}}var P7={"-":"",_:" ",0:"0"},Bs=/^\s*\d+/,jQ=/^%/,NQ=/[\\^$*+?|[\]().{}]/g;function $a(t,a,r){var s=t<0?"-":"",n=(s?-t:t)+"",i=n.length;return s+(i<r?new Array(r-i+1).join(a)+n:n)}function wQ(t){return t.replace(NQ,"\\$&")}function tf(t){return new RegExp("^(?:"+t.map(wQ).join("|")+")","i")}function af(t){return new Map(t.map((a,r)=>[a.toLowerCase(),r]))}function SQ(t,a,r){var s=Bs.exec(a.slice(r,r+1));return s?(t.w=+s[0],r+s[0].length):-1}function _Q(t,a,r){var s=Bs.exec(a.slice(r,r+1));return s?(t.u=+s[0],r+s[0].length):-1}function AQ(t,a,r){var s=Bs.exec(a.slice(r,r+2));return s?(t.U=+s[0],r+s[0].length):-1}function kQ(t,a,r){var s=Bs.exec(a.slice(r,r+2));return s?(t.V=+s[0],r+s[0].length):-1}function CQ(t,a,r){var s=Bs.exec(a.slice(r,r+2));return s?(t.W=+s[0],r+s[0].length):-1}function O7(t,a,r){var s=Bs.exec(a.slice(r,r+4));return s?(t.y=+s[0],r+s[0].length):-1}function D7(t,a,r){var s=Bs.exec(a.slice(r,r+2));return s?(t.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function EQ(t,a,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(a.slice(r,r+6));return s?(t.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function TQ(t,a,r){var s=Bs.exec(a.slice(r,r+1));return s?(t.q=s[0]*3-3,r+s[0].length):-1}function PQ(t,a,r){var s=Bs.exec(a.slice(r,r+2));return s?(t.m=s[0]-1,r+s[0].length):-1}function L7(t,a,r){var s=Bs.exec(a.slice(r,r+2));return s?(t.d=+s[0],r+s[0].length):-1}function OQ(t,a,r){var s=Bs.exec(a.slice(r,r+3));return s?(t.m=0,t.d=+s[0],r+s[0].length):-1}function M7(t,a,r){var s=Bs.exec(a.slice(r,r+2));return s?(t.H=+s[0],r+s[0].length):-1}function DQ(t,a,r){var s=Bs.exec(a.slice(r,r+2));return s?(t.M=+s[0],r+s[0].length):-1}function LQ(t,a,r){var s=Bs.exec(a.slice(r,r+2));return s?(t.S=+s[0],r+s[0].length):-1}function MQ(t,a,r){var s=Bs.exec(a.slice(r,r+3));return s?(t.L=+s[0],r+s[0].length):-1}function RQ(t,a,r){var s=Bs.exec(a.slice(r,r+6));return s?(t.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function $Q(t,a,r){var s=jQ.exec(a.slice(r,r+1));return s?r+s[0].length:-1}function FQ(t,a,r){var s=Bs.exec(a.slice(r));return s?(t.Q=+s[0],r+s[0].length):-1}function IQ(t,a,r){var s=Bs.exec(a.slice(r));return s?(t.s=+s[0],r+s[0].length):-1}function R7(t,a){return $a(t.getDate(),a,2)}function BQ(t,a){return $a(t.getHours(),a,2)}function zQ(t,a){return $a(t.getHours()%12||12,a,2)}function qQ(t,a){return $a(1+s0.count(Sc(t),t),a,3)}function oP(t,a){return $a(t.getMilliseconds(),a,3)}function UQ(t,a){return oP(t,a)+"000"}function HQ(t,a){return $a(t.getMonth()+1,a,2)}function YQ(t,a){return $a(t.getMinutes(),a,2)}function GQ(t,a){return $a(t.getSeconds(),a,2)}function VQ(t){var a=t.getDay();return a===0?7:a}function WQ(t,a){return $a(Ry.count(Sc(t)-1,t),a,2)}function cP(t){var a=t.getDay();return a>=4||a===0?Dx(t):Dx.ceil(t)}function KQ(t,a){return t=cP(t),$a(Dx.count(Sc(t),t)+(Sc(t).getDay()===4),a,2)}function XQ(t){return t.getDay()}function JQ(t,a){return $a(zg.count(Sc(t)-1,t),a,2)}function ZQ(t,a){return $a(t.getFullYear()%100,a,2)}function QQ(t,a){return t=cP(t),$a(t.getFullYear()%100,a,2)}function eee(t,a){return $a(t.getFullYear()%1e4,a,4)}function tee(t,a){var r=t.getDay();return t=r>=4||r===0?Dx(t):Dx.ceil(t),$a(t.getFullYear()%1e4,a,4)}function aee(t){var a=t.getTimezoneOffset();return(a>0?"-":(a*=-1,"+"))+$a(a/60|0,"0",2)+$a(a%60,"0",2)}function $7(t,a){return $a(t.getUTCDate(),a,2)}function ree(t,a){return $a(t.getUTCHours(),a,2)}function see(t,a){return $a(t.getUTCHours()%12||12,a,2)}function nee(t,a){return $a(1+My.count(_c(t),t),a,3)}function dP(t,a){return $a(t.getUTCMilliseconds(),a,3)}function iee(t,a){return dP(t,a)+"000"}function lee(t,a){return $a(t.getUTCMonth()+1,a,2)}function oee(t,a){return $a(t.getUTCMinutes(),a,2)}function cee(t,a){return $a(t.getUTCSeconds(),a,2)}function dee(t){var a=t.getUTCDay();return a===0?7:a}function uee(t,a){return $a($y.count(_c(t)-1,t),a,2)}function uP(t){var a=t.getUTCDay();return a>=4||a===0?Lx(t):Lx.ceil(t)}function mee(t,a){return t=uP(t),$a(Lx.count(_c(t),t)+(_c(t).getUTCDay()===4),a,2)}function xee(t){return t.getUTCDay()}function hee(t,a){return $a(qg.count(_c(t)-1,t),a,2)}function fee(t,a){return $a(t.getUTCFullYear()%100,a,2)}function pee(t,a){return t=uP(t),$a(t.getUTCFullYear()%100,a,2)}function gee(t,a){return $a(t.getUTCFullYear()%1e4,a,4)}function yee(t,a){var r=t.getUTCDay();return t=r>=4||r===0?Lx(t):Lx.ceil(t),$a(t.getUTCFullYear()%1e4,a,4)}function bee(){return"+0000"}function F7(){return"%"}function I7(t){return+t}function B7(t){return Math.floor(+t/1e3)}var sx,mP,xP;vee({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vee(t){return sx=vQ(t),mP=sx.format,sx.parse,xP=sx.utcFormat,sx.utcParse,sx}function jee(t){return new Date(t)}function Nee(t){return t instanceof Date?+t:+new Date(+t)}function g5(t,a,r,s,n,i,o,d,u,m){var x=r5(),f=x.invert,b=x.domain,p=m(".%L"),v=m(":%S"),j=m("%I:%M"),N=m("%I %p"),w=m("%a %d"),P=m("%b %d"),k=m("%B"),$=m("%Y");function O(L){return(u(L)<L?p:d(L)<L?v:o(L)<L?j:i(L)<L?N:s(L)<L?n(L)<L?w:P:r(L)<L?k:$)(L)}return x.invert=function(L){return new Date(f(L))},x.domain=function(L){return arguments.length?b(Array.from(L,Nee)):b().map(jee)},x.ticks=function(L){var _=b();return t(_[0],_[_.length-1],L??10)},x.tickFormat=function(L,_){return _==null?O:m(_)},x.nice=function(L){var _=b();return(!L||typeof L.range!="function")&&(L=a(_[0],_[_.length-1],L??10)),L?b(QT(_,L)):x},x.copy=function(){return r0(x,g5(t,a,r,s,n,i,o,d,u,m))},x}function wee(){return hl.apply(g5(yQ,bQ,Sc,f5,Ry,s0,x5,u5,Iu,mP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function See(){return hl.apply(g5(pQ,gQ,_c,p5,$y,My,h5,m5,Iu,xP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Fy(){var t=0,a=1,r,s,n,i,o=Dn,d=!1,u;function m(f){return f==null||isNaN(f=+f)?u:o(n===0?.5:(f=(i(f)-r)*n,d?Math.max(0,Math.min(1,f)):f))}m.domain=function(f){return arguments.length?([t,a]=f,r=i(t=+t),s=i(a=+a),n=r===s?0:1/(s-r),m):[t,a]},m.clamp=function(f){return arguments.length?(d=!!f,m):d},m.interpolator=function(f){return arguments.length?(o=f,m):o};function x(f){return function(b){var p,v;return arguments.length?([p,v]=b,o=f(p,v),m):[o(0),o(1)]}}return m.range=x(Hx),m.rangeRound=x(a5),m.unknown=function(f){return arguments.length?(u=f,m):u},function(f){return i=f,r=f(t),s=f(a),n=r===s?0:1/(s-r),m}}function Vd(t,a){return a.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function hP(){var t=Gd(Fy()(Dn));return t.copy=function(){return Vd(t,hP())},Oc.apply(t,arguments)}function fP(){var t=i5(Fy()).domain([1,10]);return t.copy=function(){return Vd(t,fP()).base(t.base())},Oc.apply(t,arguments)}function pP(){var t=l5(Fy());return t.copy=function(){return Vd(t,pP()).constant(t.constant())},Oc.apply(t,arguments)}function y5(){var t=o5(Fy());return t.copy=function(){return Vd(t,y5()).exponent(t.exponent())},Oc.apply(t,arguments)}function _ee(){return y5.apply(null,arguments).exponent(.5)}function gP(){var t=[],a=Dn;function r(s){if(s!=null&&!isNaN(s=+s))return a((t0(t,s,1)-1)/(t.length-1))}return r.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let n of s)n!=null&&!isNaN(n=+n)&&t.push(n);return t.sort(Pd),r},r.interpolator=function(s){return arguments.length?(a=s,r):a},r.range=function(){return t.map((s,n)=>a(n/(t.length-1)))},r.quantiles=function(s){return Array.from({length:s+1},(n,i)=>dZ(t,i/s))},r.copy=function(){return gP(a).domain(t)},Oc.apply(r,arguments)}function Iy(){var t=0,a=.5,r=1,s=1,n,i,o,d,u,m=Dn,x,f=!1,b;function p(j){return isNaN(j=+j)?b:(j=.5+((j=+x(j))-i)*(s*j<s*i?d:u),m(f?Math.max(0,Math.min(1,j)):j))}p.domain=function(j){return arguments.length?([t,a,r]=j,n=x(t=+t),i=x(a=+a),o=x(r=+r),d=n===i?0:.5/(i-n),u=i===o?0:.5/(o-i),s=i<n?-1:1,p):[t,a,r]},p.clamp=function(j){return arguments.length?(f=!!j,p):f},p.interpolator=function(j){return arguments.length?(m=j,p):m};function v(j){return function(N){var w,P,k;return arguments.length?([w,P,k]=N,m=$Z(j,[w,P,k]),p):[m(0),m(.5),m(1)]}}return p.range=v(Hx),p.rangeRound=v(a5),p.unknown=function(j){return arguments.length?(b=j,p):b},function(j){return x=j,n=j(t),i=j(a),o=j(r),d=n===i?0:.5/(i-n),u=i===o?0:.5/(o-i),s=i<n?-1:1,p}}function yP(){var t=Gd(Iy()(Dn));return t.copy=function(){return Vd(t,yP())},Oc.apply(t,arguments)}function bP(){var t=i5(Iy()).domain([.1,1,10]);return t.copy=function(){return Vd(t,bP()).base(t.base())},Oc.apply(t,arguments)}function vP(){var t=l5(Iy());return t.copy=function(){return Vd(t,vP()).constant(t.constant())},Oc.apply(t,arguments)}function b5(){var t=o5(Iy());return t.copy=function(){return Vd(t,b5()).exponent(t.exponent())},Oc.apply(t,arguments)}function Aee(){return b5.apply(null,arguments).exponent(.5)}const lf=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:QN,scaleDiverging:yP,scaleDivergingLog:bP,scaleDivergingPow:b5,scaleDivergingSqrt:Aee,scaleDivergingSymlog:vP,scaleIdentity:ZT,scaleImplicit:qj,scaleLinear:JT,scaleLog:eP,scaleOrdinal:ZN,scalePoint:xZ,scalePow:c5,scaleQuantile:rP,scaleQuantize:sP,scaleRadial:aP,scaleSequential:hP,scaleSequentialLog:fP,scaleSequentialPow:y5,scaleSequentialQuantile:gP,scaleSequentialSqrt:_ee,scaleSequentialSymlog:pP,scaleSqrt:iQ,scaleSymlog:tP,scaleThreshold:nP,scaleTime:wee,scaleUtc:See,tickFormat:XT},Symbol.toStringTag,{value:"Module"}));var Wd=t=>t.chartData,v5=We([Wd],t=>{var a=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:a,dataStartIndex:0}}),By=(t,a,r,s)=>s?v5(t):Wd(t);function Mx(t){if(Array.isArray(t)&&t.length===2){var[a,r]=t;if(Pi(a)&&Pi(r))return!0}return!1}function z7(t,a,r){return r?t:[Math.min(t[0],a[0]),Math.max(t[1],a[1])]}function kee(t,a){if(a&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,s]=t,n,i;if(Pi(r))n=r;else if(typeof r=="function")return;if(Pi(s))i=s;else if(typeof s=="function")return;var o=[n,i];if(Mx(o))return o}}function Cee(t,a,r){if(!(!r&&a==null)){if(typeof t=="function"&&a!=null)try{var s=t(a,r);if(Mx(s))return z7(s,a,r)}catch{}if(Array.isArray(t)&&t.length===2){var[n,i]=t,o,d;if(n==="auto")a!=null&&(o=Math.min(...a));else if(zt(n))o=n;else if(typeof n=="function")try{a!=null&&(o=n(a?.[0]))}catch{}else if(typeof n=="string"&&D8.test(n)){var u=D8.exec(n);if(u==null||a==null)o=void 0;else{var m=+u[1];o=a[0]-m}}else o=a?.[0];if(i==="auto")a!=null&&(d=Math.max(...a));else if(zt(i))d=i;else if(typeof i=="function")try{a!=null&&(d=i(a?.[1]))}catch{}else if(typeof i=="string"&&L8.test(i)){var x=L8.exec(i);if(x==null||a==null)d=void 0;else{var f=+x[1];d=a[1]+f}}else d=a?.[1];var b=[o,d];if(Mx(b))return a==null?b:z7(b,a,r)}}}var Yx=1e9,Eee={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},N5,kr=!0,xl="[DecimalError] ",Wu=xl+"Invalid argument: ",j5=xl+"Exponent out of range: ",Gx=Math.floor,Du=Math.pow,Tee=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ai,Rs=1e7,fr=7,jP=9007199254740991,Ug=Gx(jP/fr),_t={};_t.absoluteValue=_t.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};_t.comparedTo=_t.cmp=function(t){var a,r,s,n,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(s=i.d.length,n=t.d.length,a=0,r=s<n?s:n;a<r;++a)if(i.d[a]!==t.d[a])return i.d[a]>t.d[a]^i.s<0?1:-1;return s===n?0:s>n^i.s<0?1:-1};_t.decimalPlaces=_t.dp=function(){var t=this,a=t.d.length-1,r=(a-t.e)*fr;if(a=t.d[a],a)for(;a%10==0;a/=10)r--;return r<0?0:r};_t.dividedBy=_t.div=function(t){return pc(this,new this.constructor(t))};_t.dividedToIntegerBy=_t.idiv=function(t){var a=this,r=a.constructor;return nr(pc(a,new r(t),0,1),r.precision)};_t.equals=_t.eq=function(t){return!this.cmp(t)};_t.exponent=function(){return hs(this)};_t.greaterThan=_t.gt=function(t){return this.cmp(t)>0};_t.greaterThanOrEqualTo=_t.gte=function(t){return this.cmp(t)>=0};_t.isInteger=_t.isint=function(){return this.e>this.d.length-2};_t.isNegative=_t.isneg=function(){return this.s<0};_t.isPositive=_t.ispos=function(){return this.s>0};_t.isZero=function(){return this.s===0};_t.lessThan=_t.lt=function(t){return this.cmp(t)<0};_t.lessThanOrEqualTo=_t.lte=function(t){return this.cmp(t)<1};_t.logarithm=_t.log=function(t){var a,r=this,s=r.constructor,n=s.precision,i=n+5;if(t===void 0)t=new s(10);else if(t=new s(t),t.s<1||t.eq(Ai))throw Error(xl+"NaN");if(r.s<1)throw Error(xl+(r.s?"NaN":"-Infinity"));return r.eq(Ai)?new s(0):(kr=!1,a=pc(Mf(r,i),Mf(t,i),i),kr=!0,nr(a,n))};_t.minus=_t.sub=function(t){var a=this;return t=new a.constructor(t),a.s==t.s?SP(a,t):NP(a,(t.s=-t.s,t))};_t.modulo=_t.mod=function(t){var a,r=this,s=r.constructor,n=s.precision;if(t=new s(t),!t.s)throw Error(xl+"NaN");return r.s?(kr=!1,a=pc(r,t,0,1).times(t),kr=!0,r.minus(a)):nr(new s(r),n)};_t.naturalExponential=_t.exp=function(){return wP(this)};_t.naturalLogarithm=_t.ln=function(){return Mf(this)};_t.negated=_t.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};_t.plus=_t.add=function(t){var a=this;return t=new a.constructor(t),a.s==t.s?NP(a,t):SP(a,(t.s=-t.s,t))};_t.precision=_t.sd=function(t){var a,r,s,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Wu+t);if(a=hs(n)+1,s=n.d.length-1,r=s*fr+1,s=n.d[s],s){for(;s%10==0;s/=10)r--;for(s=n.d[0];s>=10;s/=10)r++}return t&&a>r?a:r};_t.squareRoot=_t.sqrt=function(){var t,a,r,s,n,i,o,d=this,u=d.constructor;if(d.s<1){if(!d.s)return new u(0);throw Error(xl+"NaN")}for(t=hs(d),kr=!1,n=Math.sqrt(+d),n==0||n==1/0?(a=So(d.d),(a.length+t)%2==0&&(a+="0"),n=Math.sqrt(a),t=Gx((t+1)/2)-(t<0||t%2),n==1/0?a="5e"+t:(a=n.toExponential(),a=a.slice(0,a.indexOf("e")+1)+t),s=new u(a)):s=new u(n.toString()),r=u.precision,n=o=r+3;;)if(i=s,s=i.plus(pc(d,i,o+2)).times(.5),So(i.d).slice(0,o)===(a=So(s.d)).slice(0,o)){if(a=a.slice(o-3,o+1),n==o&&a=="4999"){if(nr(i,r+1,0),i.times(i).eq(d)){s=i;break}}else if(a!="9999")break;o+=4}return kr=!0,nr(s,r)};_t.times=_t.mul=function(t){var a,r,s,n,i,o,d,u,m,x=this,f=x.constructor,b=x.d,p=(t=new f(t)).d;if(!x.s||!t.s)return new f(0);for(t.s*=x.s,r=x.e+t.e,u=b.length,m=p.length,u<m&&(i=b,b=p,p=i,o=u,u=m,m=o),i=[],o=u+m,s=o;s--;)i.push(0);for(s=m;--s>=0;){for(a=0,n=u+s;n>s;)d=i[n]+p[s]*b[n-s-1]+a,i[n--]=d%Rs|0,a=d/Rs|0;i[n]=(i[n]+a)%Rs|0}for(;!i[--o];)i.pop();return a?++r:i.shift(),t.d=i,t.e=r,kr?nr(t,f.precision):t};_t.toDecimalPlaces=_t.todp=function(t,a){var r=this,s=r.constructor;return r=new s(r),t===void 0?r:(To(t,0,Yx),a===void 0?a=s.rounding:To(a,0,8),nr(r,t+hs(r)+1,a))};_t.toExponential=function(t,a){var r,s=this,n=s.constructor;return t===void 0?r=lm(s,!0):(To(t,0,Yx),a===void 0?a=n.rounding:To(a,0,8),s=nr(new n(s),t+1,a),r=lm(s,!0,t+1)),r};_t.toFixed=function(t,a){var r,s,n=this,i=n.constructor;return t===void 0?lm(n):(To(t,0,Yx),a===void 0?a=i.rounding:To(a,0,8),s=nr(new i(n),t+hs(n)+1,a),r=lm(s.abs(),!1,t+hs(s)+1),n.isneg()&&!n.isZero()?"-"+r:r)};_t.toInteger=_t.toint=function(){var t=this,a=t.constructor;return nr(new a(t),hs(t)+1,a.rounding)};_t.toNumber=function(){return+this};_t.toPower=_t.pow=function(t){var a,r,s,n,i,o,d=this,u=d.constructor,m=12,x=+(t=new u(t));if(!t.s)return new u(Ai);if(d=new u(d),!d.s){if(t.s<1)throw Error(xl+"Infinity");return d}if(d.eq(Ai))return d;if(s=u.precision,t.eq(Ai))return nr(d,s);if(a=t.e,r=t.d.length-1,o=a>=r,i=d.s,o){if((r=x<0?-x:x)<=jP){for(n=new u(Ai),a=Math.ceil(s/fr+4),kr=!1;r%2&&(n=n.times(d),U7(n.d,a)),r=Gx(r/2),r!==0;)d=d.times(d),U7(d.d,a);return kr=!0,t.s<0?new u(Ai).div(n):nr(n,s)}}else if(i<0)throw Error(xl+"NaN");return i=i<0&&t.d[Math.max(a,r)]&1?-1:1,d.s=1,kr=!1,n=t.times(Mf(d,s+m)),kr=!0,n=wP(n),n.s=i,n};_t.toPrecision=function(t,a){var r,s,n=this,i=n.constructor;return t===void 0?(r=hs(n),s=lm(n,r<=i.toExpNeg||r>=i.toExpPos)):(To(t,1,Yx),a===void 0?a=i.rounding:To(a,0,8),n=nr(new i(n),t,a),r=hs(n),s=lm(n,t<=r||r<=i.toExpNeg,t)),s};_t.toSignificantDigits=_t.tosd=function(t,a){var r=this,s=r.constructor;return t===void 0?(t=s.precision,a=s.rounding):(To(t,1,Yx),a===void 0?a=s.rounding:To(a,0,8)),nr(new s(r),t,a)};_t.toString=_t.valueOf=_t.val=_t.toJSON=_t[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,a=hs(t),r=t.constructor;return lm(t,a<=r.toExpNeg||a>=r.toExpPos)};function NP(t,a){var r,s,n,i,o,d,u,m,x=t.constructor,f=x.precision;if(!t.s||!a.s)return a.s||(a=new x(t)),kr?nr(a,f):a;if(u=t.d,m=a.d,o=t.e,n=a.e,u=u.slice(),i=o-n,i){for(i<0?(s=u,i=-i,d=m.length):(s=m,n=o,d=u.length),o=Math.ceil(f/fr),d=o>d?o+1:d+1,i>d&&(i=d,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(d=u.length,i=m.length,d-i<0&&(i=d,s=m,m=u,u=s),r=0;i;)r=(u[--i]=u[i]+m[i]+r)/Rs|0,u[i]%=Rs;for(r&&(u.unshift(r),++n),d=u.length;u[--d]==0;)u.pop();return a.d=u,a.e=n,kr?nr(a,f):a}function To(t,a,r){if(t!==~~t||t<a||t>r)throw Error(Wu+t)}function So(t){var a,r,s,n=t.length-1,i="",o=t[0];if(n>0){for(i+=o,a=1;a<n;a++)s=t[a]+"",r=fr-s.length,r&&(i+=_d(r)),i+=s;o=t[a],s=o+"",r=fr-s.length,r&&(i+=_d(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var pc=function(){function t(s,n){var i,o=0,d=s.length;for(s=s.slice();d--;)i=s[d]*n+o,s[d]=i%Rs|0,o=i/Rs|0;return o&&s.unshift(o),s}function a(s,n,i,o){var d,u;if(i!=o)u=i>o?1:-1;else for(d=u=0;d<i;d++)if(s[d]!=n[d]){u=s[d]>n[d]?1:-1;break}return u}function r(s,n,i){for(var o=0;i--;)s[i]-=o,o=s[i]<n[i]?1:0,s[i]=o*Rs+s[i]-n[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,n,i,o){var d,u,m,x,f,b,p,v,j,N,w,P,k,$,O,L,_,E,A=s.constructor,z=s.s==n.s?1:-1,M=s.d,D=n.d;if(!s.s)return new A(s);if(!n.s)throw Error(xl+"Division by zero");for(u=s.e-n.e,_=D.length,O=M.length,p=new A(z),v=p.d=[],m=0;D[m]==(M[m]||0);)++m;if(D[m]>(M[m]||0)&&--u,i==null?P=i=A.precision:o?P=i+(hs(s)-hs(n))+1:P=i,P<0)return new A(0);if(P=P/fr+2|0,m=0,_==1)for(x=0,D=D[0],P++;(m<O||x)&&P--;m++)k=x*Rs+(M[m]||0),v[m]=k/D|0,x=k%D|0;else{for(x=Rs/(D[0]+1)|0,x>1&&(D=t(D,x),M=t(M,x),_=D.length,O=M.length),$=_,j=M.slice(0,_),N=j.length;N<_;)j[N++]=0;E=D.slice(),E.unshift(0),L=D[0],D[1]>=Rs/2&&++L;do x=0,d=a(D,j,_,N),d<0?(w=j[0],_!=N&&(w=w*Rs+(j[1]||0)),x=w/L|0,x>1?(x>=Rs&&(x=Rs-1),f=t(D,x),b=f.length,N=j.length,d=a(f,j,b,N),d==1&&(x--,r(f,_<b?E:D,b))):(x==0&&(d=x=1),f=D.slice()),b=f.length,b<N&&f.unshift(0),r(j,f,N),d==-1&&(N=j.length,d=a(D,j,_,N),d<1&&(x++,r(j,_<N?E:D,N))),N=j.length):d===0&&(x++,j=[0]),v[m++]=x,d&&j[0]?j[N++]=M[$]||0:(j=[M[$]],N=1);while(($++<O||j[0]!==void 0)&&P--)}return v[0]||v.shift(),p.e=u,nr(p,o?i+hs(p)+1:i)}}();function wP(t,a){var r,s,n,i,o,d,u=0,m=0,x=t.constructor,f=x.precision;if(hs(t)>16)throw Error(j5+hs(t));if(!t.s)return new x(Ai);for(kr=!1,d=f,o=new x(.03125);t.abs().gte(.1);)t=t.times(o),m+=5;for(s=Math.log(Du(2,m))/Math.LN10*2+5|0,d+=s,r=n=i=new x(Ai),x.precision=d;;){if(n=nr(n.times(t),d),r=r.times(++u),o=i.plus(pc(n,r,d)),So(o.d).slice(0,d)===So(i.d).slice(0,d)){for(;m--;)i=nr(i.times(i),d);return x.precision=f,a==null?(kr=!0,nr(i,f)):i}i=o}}function hs(t){for(var a=t.e*fr,r=t.d[0];r>=10;r/=10)a++;return a}function d2(t,a,r){if(a>t.LN10.sd())throw kr=!0,r&&(t.precision=r),Error(xl+"LN10 precision limit exceeded");return nr(new t(t.LN10),a)}function _d(t){for(var a="";t--;)a+="0";return a}function Mf(t,a){var r,s,n,i,o,d,u,m,x,f=1,b=10,p=t,v=p.d,j=p.constructor,N=j.precision;if(p.s<1)throw Error(xl+(p.s?"NaN":"-Infinity"));if(p.eq(Ai))return new j(0);if(a==null?(kr=!1,m=N):m=a,p.eq(10))return a==null&&(kr=!0),d2(j,m);if(m+=b,j.precision=m,r=So(v),s=r.charAt(0),i=hs(p),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&r.charAt(1)>3;)p=p.times(t),r=So(p.d),s=r.charAt(0),f++;i=hs(p),s>1?(p=new j("0."+r),i++):p=new j(s+"."+r.slice(1))}else return u=d2(j,m+2,N).times(i+""),p=Mf(new j(s+"."+r.slice(1)),m-b).plus(u),j.precision=N,a==null?(kr=!0,nr(p,N)):p;for(d=o=p=pc(p.minus(Ai),p.plus(Ai),m),x=nr(p.times(p),m),n=3;;){if(o=nr(o.times(x),m),u=d.plus(pc(o,new j(n),m)),So(u.d).slice(0,m)===So(d.d).slice(0,m))return d=d.times(2),i!==0&&(d=d.plus(d2(j,m+2,N).times(i+""))),d=pc(d,new j(f),m),j.precision=N,a==null?(kr=!0,nr(d,N)):d;d=u,n+=2}}function q7(t,a){var r,s,n;for((r=a.indexOf("."))>-1&&(a=a.replace(".","")),(s=a.search(/e/i))>0?(r<0&&(r=s),r+=+a.slice(s+1),a=a.substring(0,s)):r<0&&(r=a.length),s=0;a.charCodeAt(s)===48;)++s;for(n=a.length;a.charCodeAt(n-1)===48;)--n;if(a=a.slice(s,n),a){if(n-=s,r=r-s-1,t.e=Gx(r/fr),t.d=[],s=(r+1)%fr,r<0&&(s+=fr),s<n){for(s&&t.d.push(+a.slice(0,s)),n-=fr;s<n;)t.d.push(+a.slice(s,s+=fr));a=a.slice(s),s=fr-a.length}else s-=n;for(;s--;)a+="0";if(t.d.push(+a),kr&&(t.e>Ug||t.e<-Ug))throw Error(j5+r)}else t.s=0,t.e=0,t.d=[0];return t}function nr(t,a,r){var s,n,i,o,d,u,m,x,f=t.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(s=a-o,s<0)s+=fr,n=a,m=f[x=0];else{if(x=Math.ceil((s+1)/fr),i=f.length,x>=i)return t;for(m=i=f[x],o=1;i>=10;i/=10)o++;s%=fr,n=s-fr+o}if(r!==void 0&&(i=Du(10,o-n-1),d=m/i%10|0,u=a<0||f[x+1]!==void 0||m%i,u=r<4?(d||u)&&(r==0||r==(t.s<0?3:2)):d>5||d==5&&(r==4||u||r==6&&(s>0?n>0?m/Du(10,o-n):0:f[x-1])%10&1||r==(t.s<0?8:7))),a<1||!f[0])return u?(i=hs(t),f.length=1,a=a-i-1,f[0]=Du(10,(fr-a%fr)%fr),t.e=Gx(-a/fr)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(s==0?(f.length=x,i=1,x--):(f.length=x+1,i=Du(10,fr-s),f[x]=n>0?(m/Du(10,o-n)%Du(10,n)|0)*i:0),u)for(;;)if(x==0){(f[0]+=i)==Rs&&(f[0]=1,++t.e);break}else{if(f[x]+=i,f[x]!=Rs)break;f[x--]=0,i=1}for(s=f.length;f[--s]===0;)f.pop();if(kr&&(t.e>Ug||t.e<-Ug))throw Error(j5+hs(t));return t}function SP(t,a){var r,s,n,i,o,d,u,m,x,f,b=t.constructor,p=b.precision;if(!t.s||!a.s)return a.s?a.s=-a.s:a=new b(t),kr?nr(a,p):a;if(u=t.d,f=a.d,s=a.e,m=t.e,u=u.slice(),o=m-s,o){for(x=o<0,x?(r=u,o=-o,d=f.length):(r=f,s=m,d=u.length),n=Math.max(Math.ceil(p/fr),d)+2,o>n&&(o=n,r.length=1),r.reverse(),n=o;n--;)r.push(0);r.reverse()}else{for(n=u.length,d=f.length,x=n<d,x&&(d=n),n=0;n<d;n++)if(u[n]!=f[n]){x=u[n]<f[n];break}o=0}for(x&&(r=u,u=f,f=r,a.s=-a.s),d=u.length,n=f.length-d;n>0;--n)u[d++]=0;for(n=f.length;n>o;){if(u[--n]<f[n]){for(i=n;i&&u[--i]===0;)u[i]=Rs-1;--u[i],u[n]+=Rs}u[n]-=f[n]}for(;u[--d]===0;)u.pop();for(;u[0]===0;u.shift())--s;return u[0]?(a.d=u,a.e=s,kr?nr(a,p):a):new b(0)}function lm(t,a,r){var s,n=hs(t),i=So(t.d),o=i.length;return a?(r&&(s=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+_d(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(n<0?"e":"e+")+n):n<0?(i="0."+_d(-n-1)+i,r&&(s=r-o)>0&&(i+=_d(s))):n>=o?(i+=_d(n+1-o),r&&(s=r-n-1)>0&&(i=i+"."+_d(s))):((s=n+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),r&&(s=r-o)>0&&(n+1===o&&(i+="."),i+=_d(s))),t.s<0?"-"+i:i}function U7(t,a){if(t.length>a)return t.length=a,!0}function _P(t){var a,r,s;function n(i){var o=this;if(!(o instanceof n))return new n(i);if(o.constructor=n,i instanceof n){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Wu+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return q7(o,i.toString())}else if(typeof i!="string")throw Error(Wu+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Tee.test(i))q7(o,i);else throw Error(Wu+i)}if(n.prototype=_t,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=_P,n.config=n.set=Pee,t===void 0&&(t={}),t)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],a=0;a<s.length;)t.hasOwnProperty(r=s[a++])||(t[r]=this[r]);return n.config(t),n}function Pee(t){if(!t||typeof t!="object")throw Error(xl+"Object expected");var a,r,s,n=["precision",1,Yx,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(a=0;a<n.length;a+=3)if((s=t[r=n[a]])!==void 0)if(Gx(s)===s&&s>=n[a+1]&&s<=n[a+2])this[r]=s;else throw Error(Wu+r+": "+s);if((s=t[r="LN10"])!==void 0)if(s==Math.LN10)this[r]=new this(s);else throw Error(Wu+r+": "+s);return this}var N5=_P(Eee);Ai=new N5(1);const Wa=N5;var Oee=t=>t,AP={},kP=t=>t===AP,H7=t=>function a(){return arguments.length===0||arguments.length===1&&kP(arguments.length<=0?void 0:arguments[0])?a:t(...arguments)},CP=(t,a)=>t===1?a:H7(function(){for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];var i=s.filter(o=>o!==AP).length;return i>=t?a(...s):CP(t-i,H7(function(){for(var o=arguments.length,d=new Array(o),u=0;u<o;u++)d[u]=arguments[u];var m=s.map(x=>kP(x)?d.shift():x);return a(...m,...d)}))}),zy=t=>CP(t.length,t),Gj=(t,a)=>{for(var r=[],s=t;s<a;++s)r[s-t]=s;return r},Dee=zy((t,a)=>Array.isArray(a)?a.map(t):Object.keys(a).map(r=>a[r]).map(t)),Lee=function(){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];if(!r.length)return Oee;var n=r.reverse(),i=n[0],o=n.slice(1);return function(){return o.reduce((d,u)=>u(d),i(...arguments))}},Vj=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),EP=t=>{var a=null,r=null;return function(){for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return a&&n.every((o,d)=>{var u;return o===((u=a)===null||u===void 0?void 0:u[d])})||(a=n,r=t(...n)),r}};function TP(t){var a;return t===0?a=1:a=Math.floor(new Wa(t).abs().log(10).toNumber())+1,a}function PP(t,a,r){for(var s=new Wa(t),n=0,i=[];s.lt(a)&&n<1e5;)i.push(s.toNumber()),s=s.add(r),n++;return i}zy((t,a,r)=>{var s=+t,n=+a;return s+r*(n-s)});zy((t,a,r)=>{var s=a-+t;return s=s||1/0,(r-t)/s});zy((t,a,r)=>{var s=a-+t;return s=s||1/0,Math.max(0,Math.min(1,(r-t)/s))});var OP=t=>{var[a,r]=t,[s,n]=[a,r];return a>r&&([s,n]=[r,a]),[s,n]},DP=(t,a,r)=>{if(t.lte(0))return new Wa(0);var s=TP(t.toNumber()),n=new Wa(10).pow(s),i=t.div(n),o=s!==1?.05:.1,d=new Wa(Math.ceil(i.div(o).toNumber())).add(r).mul(o),u=d.mul(n);return a?new Wa(u.toNumber()):new Wa(Math.ceil(u.toNumber()))},Mee=(t,a,r)=>{var s=new Wa(1),n=new Wa(t);if(!n.isint()&&r){var i=Math.abs(t);i<1?(s=new Wa(10).pow(TP(t)-1),n=new Wa(Math.floor(n.div(s).toNumber())).mul(s)):i>1&&(n=new Wa(Math.floor(t)))}else t===0?n=new Wa(Math.floor((a-1)/2)):r||(n=new Wa(Math.floor(t)));var o=Math.floor((a-1)/2),d=Lee(Dee(u=>n.add(new Wa(u-o).mul(s)).toNumber()),Gj);return d(0,a)},LP=function(a,r,s,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-a)/(s-1)))return{step:new Wa(0),tickMin:new Wa(0),tickMax:new Wa(0)};var o=DP(new Wa(r).sub(a).div(s-1),n,i),d;a<=0&&r>=0?d=new Wa(0):(d=new Wa(a).add(r).div(2),d=d.sub(new Wa(d).mod(o)));var u=Math.ceil(d.sub(a).div(o).toNumber()),m=Math.ceil(new Wa(r).sub(d).div(o).toNumber()),x=u+m+1;return x>s?LP(a,r,s,n,i+1):(x<s&&(m=r>0?m+(s-x):m,u=r>0?u:u+(s-x)),{step:o,tickMin:d.sub(new Wa(u).mul(o)),tickMax:d.add(new Wa(m).mul(o))})};function Ree(t){var[a,r]=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(s,2),[o,d]=OP([a,r]);if(o===-1/0||d===1/0){var u=d===1/0?[o,...Gj(0,s-1).map(()=>1/0)]:[...Gj(0,s-1).map(()=>-1/0),d];return a>r?Vj(u):u}if(o===d)return Mee(o,s,n);var{step:m,tickMin:x,tickMax:f}=LP(o,d,i,n,0),b=PP(x,f.add(new Wa(.1).mul(m)),m);return a>r?Vj(b):b}function $ee(t,a){var[r,s]=t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=OP([r,s]);if(i===-1/0||o===1/0)return[r,s];if(i===o)return[i];var d=Math.max(a,2),u=DP(new Wa(o).sub(i).div(d-1),n,0),m=[...PP(new Wa(i),new Wa(o),u),o];return n===!1&&(m=m.map(x=>Math.round(x))),r>s?Vj(m):m}var Fee=EP(Ree),Iee=EP($ee),MP=t=>t.rootProps.maxBarSize,Bee=t=>t.rootProps.barGap,RP=t=>t.rootProps.barCategoryGap,zee=t=>t.rootProps.barSize,n0=t=>t.rootProps.stackOffset,w5=t=>t.options.chartName,S5=t=>t.rootProps.syncId,$P=t=>t.rootProps.syncMethod,_5=t=>t.options.eventEmitter,uc={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},wi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},qy=(t,a)=>{if(!(!t||!a))return t!=null&&t.reversed?[a[1],a[0]]:a},qee={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:uc.angleAxisId,includeHidden:!1,name:void 0,reversed:uc.reversed,scale:uc.scale,tick:uc.tick,tickCount:void 0,ticks:void 0,type:uc.type,unit:void 0},Uee={allowDataOverflow:wi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:wi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:wi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:wi.scale,tick:wi.tick,tickCount:wi.tickCount,ticks:void 0,type:wi.type,unit:void 0},Hee={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:uc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:uc.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:uc.scale,tick:uc.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Yee={allowDataOverflow:wi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:wi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:wi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:wi.scale,tick:wi.tick,tickCount:wi.tickCount,ticks:void 0,type:"category",unit:void 0},A5=(t,a)=>t.polarAxis.angleAxis[a]!=null?t.polarAxis.angleAxis[a]:t.layout.layoutType==="radial"?Hee:qee,k5=(t,a)=>t.polarAxis.radiusAxis[a]!=null?t.polarAxis.radiusAxis[a]:t.layout.layoutType==="radial"?Yee:Uee,Uy=t=>t.polarOptions,C5=We([Tc,Pc,Ss],yT),FP=We([Uy,C5],(t,a)=>{if(t!=null)return gn(t.innerRadius,a,0)}),IP=We([Uy,C5],(t,a)=>{if(t!=null)return gn(t.outerRadius,a,a*.8)}),Gee=t=>{if(t==null)return[0,0];var{startAngle:a,endAngle:r}=t;return[a,r]},BP=We([Uy],Gee);We([A5,BP],qy);var zP=We([C5,FP,IP],(t,a,r)=>{if(!(t==null||a==null||r==null))return[a,r]});We([k5,zP],qy);var qP=We([Ea,Uy,FP,IP,Tc,Pc],(t,a,r,s,n,i)=>{if(!(t!=="centric"&&t!=="radial"||a==null||r==null||s==null)){var{cx:o,cy:d,startAngle:u,endAngle:m}=a;return{cx:gn(o,n,n/2),cy:gn(d,i,i/2),innerRadius:r,outerRadius:s,startAngle:u,endAngle:m,clockWise:!1}}}),Tr=(t,a)=>a,i0=(t,a,r)=>r;function E5(t){return t?.id}var As=t=>{var a=Ea(t);return a==="horizontal"?"xAxis":a==="vertical"?"yAxis":a==="centric"?"angleAxis":"radiusAxis"},Vx=t=>t.tooltip.settings.axisId,zs=t=>{var a=As(t),r=Vx(t);return l0(t,a,r)},UP=We([zs],t=>t?.dataKey);function HP(t,a,r){var{chartData:s=[]}=a,{allowDuplicatedCategory:n,dataKey:i}=r,o=new Map;return t.forEach(d=>{var u,m=(u=d.data)!==null&&u!==void 0?u:s;if(!(m==null||m.length===0)){var x=E5(d);m.forEach((f,b)=>{var p=i==null||n?b:String(sr(f,i,null)),v=sr(f,d.dataKey,0),j;o.has(p)?j=o.get(p):j={},Object.assign(j,{[x]:v}),o.set(p,j)})}}),Array.from(o.values())}function Hy(t){return t.stackId!=null&&t.dataKey!=null}function Y7(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Hg(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Y7(Object(r),!0).forEach(function(s){Vee(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y7(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Vee(t,a,r){return(a=Wee(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Wee(t){var a=Kee(t,"string");return typeof a=="symbol"?a:a+""}function Kee(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var Wj=[0,"auto"],ji={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},YP=(t,a)=>t.cartesianAxis.xAxis[a],Kd=(t,a)=>{var r=YP(t,a);return r??ji},Ni={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Wj,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Zf},GP=(t,a)=>t.cartesianAxis.yAxis[a],Xd=(t,a)=>{var r=GP(t,a);return r??Ni},Xee={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},T5=(t,a)=>{var r=t.cartesianAxis.zAxis[a];return r??Xee},ns=(t,a,r)=>{switch(a){case"xAxis":return Kd(t,r);case"yAxis":return Xd(t,r);case"zAxis":return T5(t,r);case"angleAxis":return A5(t,r);case"radiusAxis":return k5(t,r);default:throw new Error("Unexpected axis type: ".concat(a))}},Jee=(t,a,r)=>{switch(a){case"xAxis":return Kd(t,r);case"yAxis":return Xd(t,r);default:throw new Error("Unexpected axis type: ".concat(a))}},l0=(t,a,r)=>{switch(a){case"xAxis":return Kd(t,r);case"yAxis":return Xd(t,r);case"angleAxis":return A5(t,r);case"radiusAxis":return k5(t,r);default:throw new Error("Unexpected axis type: ".concat(a))}},VP=t=>t.graphicalItems.cartesianItems.some(a=>a.type==="bar")||t.graphicalItems.polarItems.some(a=>a.type==="radialBar");function P5(t,a){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===a;case"yAxis":return"yAxisId"in r&&r.yAxisId===a;case"zAxis":return"zAxisId"in r&&r.zAxisId===a;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===a;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===a;default:return!1}}}var Yy=t=>t.graphicalItems.cartesianItems,Zee=We([Tr,i0],P5),O5=(t,a,r)=>t.filter(r).filter(s=>a?.includeHidden===!0?!0:!s.hide),o0=We([Yy,ns,Zee],O5),WP=We([o0],t=>t.filter(a=>a.type==="area"||a.type==="bar").filter(Hy)),KP=t=>t.filter(a=>!("stackId"in a)||a.stackId===void 0),XP=We([o0],KP),D5=t=>t.map(a=>a.data).filter(Boolean).flat(1),Qee=We([o0],D5),L5=(t,a)=>{var{chartData:r=[],dataStartIndex:s,dataEndIndex:n}=a;return t.length>0?t:r.slice(s,n+1)},M5=We([Qee,By],L5),R5=(t,a,r)=>a?.dataKey!=null?t.map(s=>({value:sr(s,a.dataKey)})):r.length>0?r.map(s=>s.dataKey).flatMap(s=>t.map(n=>({value:sr(n,s)}))):t.map(s=>({value:s})),Gy=We([M5,ns,o0],R5);function JP(t,a){switch(t){case"xAxis":return a.direction==="x";case"yAxis":return a.direction==="y";default:return!1}}function fm(t){return t.filter(a=>Eo(a)||a instanceof Date).map(Number).filter(a=>Ei(a)===!1)}function ete(t,a,r){return!r||typeof a!="number"||Ei(a)?[]:r.length?fm(r.flatMap(s=>{var n=sr(t,s.dataKey),i,o;if(Array.isArray(n)?[i,o]=n:i=o=n,!(!Pi(i)||!Pi(o)))return[a-i,a+o]})):[]}var tte=We([WP,By,zs],HP),ZP=(t,a,r)=>{var s={},n=a.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),s);return Object.fromEntries(Object.entries(n).map(i=>{var[o,d]=i,u=d.map(E5);return[o,{stackedData:yX(t,u,r),graphicalItems:d}]}))},Kj=We([tte,WP,n0],ZP),QP=(t,a,r)=>{var{dataStartIndex:s,dataEndIndex:n}=a;if(r!=="zAxis"){var i=wX(t,s,n);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},ate=We([Kj,Wd,Tr],QP),eO=(t,a,r,s,n)=>r.length>0?t.flatMap(i=>r.flatMap(o=>{var d,u,m=(d=s[o.id])===null||d===void 0?void 0:d.filter(f=>JP(n,f)),x=sr(i,(u=a.dataKey)!==null&&u!==void 0?u:o.dataKey);return{value:x,errorDomain:ete(i,x,m)}})).filter(Boolean):a?.dataKey!=null?t.map(i=>({value:sr(i,a.dataKey),errorDomain:[]})):t.map(i=>({value:i,errorDomain:[]})),Vy=t=>t.errorBars,tO=(t,a,r)=>t.flatMap(s=>a[s.id]).filter(Boolean).filter(s=>JP(r,s));We([XP,Vy,Tr],tO);var rte=We([M5,ns,XP,Vy,Tr],eO);function ste(t){var{value:a}=t;if(Eo(a)||a instanceof Date)return a}var G7=t=>{var a=t.flatMap(s=>[s.value,s.errorDomain]).flat(1),r=fm(a);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},nte=(t,a,r)=>{var s=t.map(ste).filter(n=>n!=null);return r&&(a.dataKey==null||a.allowDuplicatedCategory&&mE(s))?BT(0,t.length):a.allowDuplicatedCategory?s:Array.from(new Set(s))},$5=t=>{var a;if(t==null||!("domain"in t))return Wj;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var r=fm(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(a=t?.domain)!==null&&a!==void 0?a:Wj},Yg=function(){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];var n=r.filter(Boolean);if(n.length!==0){var i=n.flat(),o=Math.min(...i),d=Math.max(...i);return[o,d]}},aO=t=>t.referenceElements.dots,Wx=(t,a,r)=>t.filter(s=>s.ifOverflow==="extendDomain").filter(s=>a==="xAxis"?s.xAxisId===r:s.yAxisId===r),ite=We([aO,Tr,i0],Wx),rO=t=>t.referenceElements.areas,lte=We([rO,Tr,i0],Wx),sO=t=>t.referenceElements.lines,ote=We([sO,Tr,i0],Wx),nO=(t,a)=>{var r=fm(t.map(s=>a==="xAxis"?s.x:s.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},cte=We(ite,Tr,nO),iO=(t,a)=>{var r=fm(t.flatMap(s=>[a==="xAxis"?s.x1:s.y1,a==="xAxis"?s.x2:s.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},dte=We([lte,Tr],iO),lO=(t,a)=>{var r=fm(t.map(s=>a==="xAxis"?s.x:s.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},ute=We(ote,Tr,lO),mte=We(cte,ute,dte,(t,a,r)=>Yg(t,r,a)),oO=We([ns],$5),F5=(t,a,r,s,n,i,o)=>{var d=kee(a,t.allowDataOverflow);if(d!=null)return d;var u=i==="vertical"&&o==="xAxis"||i==="horizontal"&&o==="yAxis",m=u?Yg(r,n,G7(s)):Yg(n,G7(s));return Cee(a,m,t.allowDataOverflow)},xte=We([ns,oO,ate,rte,mte,Ea,Tr],F5),hte=[0,1],I5=(t,a,r,s,n,i,o)=>{if(!((t==null||r==null||r.length===0)&&o===void 0)){var{dataKey:d,type:u}=t,m=Yd(a,i);return m&&d==null?BT(0,r.length):u==="category"?nte(s,t,m):n==="expand"?hte:o}},B5=We([ns,Ea,M5,Gy,n0,Tr,xte],I5),cO=(t,a,r,s,n)=>{if(t!=null){var{scale:i,type:o}=t;if(i==="auto")return a==="radial"&&n==="radiusAxis"?"band":a==="radial"&&n==="angleAxis"?"linear":o==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var d="scale".concat(Kf(i));return d in lf?d:"point"}}},Kx=We([ns,Ea,VP,w5,Tr],cO);function fte(t){if(t!=null){if(t in lf)return lf[t]();var a="scale".concat(Kf(t));if(a in lf)return lf[a]()}}function z5(t,a,r,s){if(!(r==null||s==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(s);var n=fte(a);if(n!=null){var i=n.domain(r).range(s);return xX(i),i}}}var q5=(t,a,r)=>{var s=$5(a);if(!(r!=="auto"&&r!=="linear")){if(a!=null&&a.tickCount&&Array.isArray(s)&&(s[0]==="auto"||s[1]==="auto")&&Mx(t))return Fee(t,a.tickCount,a.allowDecimals);if(a!=null&&a.tickCount&&a.type==="number"&&Mx(t))return Iee(t,a.tickCount,a.allowDecimals)}},U5=We([B5,l0,Kx],q5),H5=(t,a,r,s)=>{if(s!=="angleAxis"&&t?.type==="number"&&Mx(a)&&Array.isArray(r)&&r.length>0){var n=a[0],i=r[0],o=a[1],d=r[r.length-1];return[Math.min(n,i),Math.max(o,d)]}return a},pte=We([ns,B5,U5,Tr],H5),gte=We(Gy,ns,(t,a)=>{if(!(!a||a.type!=="number")){var r=1/0,s=Array.from(fm(t.map(d=>d.value))).sort((d,u)=>d-u);if(s.length<2)return 1/0;var n=s[s.length-1]-s[0];if(n===0)return 1/0;for(var i=0;i<s.length-1;i++){var o=s[i+1]-s[i];r=Math.min(r,o)}return r/n}}),dO=We(gte,Ea,RP,Ss,(t,a,r,s)=>s,(t,a,r,s,n)=>{if(!Pi(t))return 0;var i=a==="vertical"?s.height:s.width;if(n==="gap")return t*i/2;if(n==="no-gap"){var o=gn(r,t*i),d=t*i/2;return d-o-(d-o)/i*o}return 0}),yte=(t,a)=>{var r=Kd(t,a);return r==null||typeof r.padding!="string"?0:dO(t,"xAxis",a,r.padding)},bte=(t,a)=>{var r=Xd(t,a);return r==null||typeof r.padding!="string"?0:dO(t,"yAxis",a,r.padding)},vte=We(Kd,yte,(t,a)=>{var r,s;if(t==null)return{left:0,right:0};var{padding:n}=t;return typeof n=="string"?{left:a,right:a}:{left:((r=n.left)!==null&&r!==void 0?r:0)+a,right:((s=n.right)!==null&&s!==void 0?s:0)+a}}),jte=We(Xd,bte,(t,a)=>{var r,s;if(t==null)return{top:0,bottom:0};var{padding:n}=t;return typeof n=="string"?{top:a,bottom:a}:{top:((r=n.top)!==null&&r!==void 0?r:0)+a,bottom:((s=n.bottom)!==null&&s!==void 0?s:0)+a}}),Nte=We([Ss,vte,Oy,Py,(t,a,r)=>r],(t,a,r,s,n)=>{var{padding:i}=s;return n?[i.left,r.width-i.right]:[t.left+a.left,t.left+t.width-a.right]}),wte=We([Ss,Ea,jte,Oy,Py,(t,a,r)=>r],(t,a,r,s,n,i)=>{var{padding:o}=n;return i?[s.height-o.bottom,o.top]:a==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),c0=(t,a,r,s)=>{var n;switch(a){case"xAxis":return Nte(t,r,s);case"yAxis":return wte(t,r,s);case"zAxis":return(n=T5(t,r))===null||n===void 0?void 0:n.range;case"angleAxis":return BP(t);case"radiusAxis":return zP(t,r);default:return}},uO=We([ns,c0],qy),Xx=We([ns,Kx,pte,uO],z5);We([o0,Vy,Tr],tO);function mO(t,a){return t.id<a.id?-1:t.id>a.id?1:0}var Wy=(t,a)=>a,Ky=(t,a,r)=>r,Ste=We(Ey,Wy,Ky,(t,a,r)=>t.filter(s=>s.orientation===a).filter(s=>s.mirror===r).sort(mO)),_te=We(Ty,Wy,Ky,(t,a,r)=>t.filter(s=>s.orientation===a).filter(s=>s.mirror===r).sort(mO)),xO=(t,a)=>({width:t.width,height:a.height}),Ate=(t,a)=>{var r=typeof a.width=="number"?a.width:Zf;return{width:r,height:t.height}},hO=We(Ss,Kd,xO),kte=(t,a,r)=>{switch(a){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},Cte=(t,a,r)=>{switch(a){case"left":return t.left;case"right":return r-t.right;default:return 0}},Ete=We(Pc,Ss,Ste,Wy,Ky,(t,a,r,s,n)=>{var i={},o;return r.forEach(d=>{var u=xO(a,d);o==null&&(o=kte(a,s,t));var m=s==="top"&&!n||s==="bottom"&&n;i[d.id]=o-Number(m)*u.height,o+=(m?-1:1)*u.height}),i}),Tte=We(Tc,Ss,_te,Wy,Ky,(t,a,r,s,n)=>{var i={},o;return r.forEach(d=>{var u=Ate(a,d);o==null&&(o=Cte(a,s,t));var m=s==="left"&&!n||s==="right"&&n;i[d.id]=o-Number(m)*u.width,o+=(m?-1:1)*u.width}),i}),Pte=(t,a)=>{var r=Ss(t),s=Kd(t,a);if(s!=null){var n=Ete(t,s.orientation,s.mirror),i=n[a];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},Ote=(t,a)=>{var r=Ss(t),s=Xd(t,a);if(s!=null){var n=Tte(t,s.orientation,s.mirror),i=n[a];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},fO=We(Ss,Xd,(t,a)=>{var r=typeof a.width=="number"?a.width:Zf;return{width:r,height:t.height}}),V7=(t,a,r)=>{switch(a){case"xAxis":return hO(t,r).width;case"yAxis":return fO(t,r).height;default:return}},pO=(t,a,r,s)=>{if(r!=null){var{allowDuplicatedCategory:n,type:i,dataKey:o}=r,d=Yd(t,s),u=a.map(m=>m.value);if(o&&d&&i==="category"&&n&&mE(u))return u}},Y5=We([Ea,Gy,ns,Tr],pO),gO=(t,a,r,s)=>{if(!(r==null||r.dataKey==null)){var{type:n,scale:i}=r,o=Yd(t,s);if(o&&(n==="number"||i!=="auto"))return a.map(d=>d.value)}},G5=We([Ea,Gy,l0,Tr],gO),W7=We([Ea,Jee,Kx,Xx,Y5,G5,c0,U5,Tr],(t,a,r,s,n,i,o,d,u)=>{if(a==null)return null;var m=Yd(t,u);return{angle:a.angle,interval:a.interval,minTickGap:a.minTickGap,orientation:a.orientation,tick:a.tick,tickCount:a.tickCount,tickFormatter:a.tickFormatter,ticks:a.ticks,type:a.type,unit:a.unit,axisType:u,categoricalDomain:i,duplicateDomain:n,isCategorical:m,niceTicks:d,range:o,realScaleType:r,scale:s}}),Dte=(t,a,r,s,n,i,o,d,u)=>{if(!(a==null||s==null)){var m=Yd(t,u),{type:x,ticks:f,tickCount:b}=a,p=r==="scaleBand"&&typeof s.bandwidth=="function"?s.bandwidth()/2:2,v=x==="category"&&s.bandwidth?s.bandwidth()/p:0;v=u==="angleAxis"&&i!=null&&i.length>=2?Fs(i[0]-i[1])*2*v:v;var j=f||n;if(j){var N=j.map((w,P)=>{var k=o?o.indexOf(w):w;return{index:P,coordinate:s(k)+v,value:w,offset:v}});return N.filter(w=>!Ei(w.coordinate))}return m&&d?d.map((w,P)=>({coordinate:s(w)+v,value:w,index:P,offset:v})):s.ticks?s.ticks(b).map(w=>({coordinate:s(w)+v,value:w,offset:v})):s.domain().map((w,P)=>({coordinate:s(w)+v,value:o?o[w]:w,index:P,offset:v}))}},yO=We([Ea,l0,Kx,Xx,U5,c0,Y5,G5,Tr],Dte),Lte=(t,a,r,s,n,i,o)=>{if(!(a==null||r==null||s==null||s[0]===s[1])){var d=Yd(t,o),{tickCount:u}=a,m=0;return m=o==="angleAxis"&&s?.length>=2?Fs(s[0]-s[1])*2*m:m,d&&i?i.map((x,f)=>({coordinate:r(x)+m,value:x,index:f,offset:m})):r.ticks?r.ticks(u).map(x=>({coordinate:r(x)+m,value:x,offset:m})):r.domain().map((x,f)=>({coordinate:r(x)+m,value:n?n[x]:x,index:f,offset:m}))}},Id=We([Ea,l0,Xx,c0,Y5,G5,Tr],Lte),Bd=We(ns,Xx,(t,a)=>{if(!(t==null||a==null))return Hg(Hg({},t),{},{scale:a})}),Mte=We([ns,Kx,B5,uO],z5);We((t,a,r)=>T5(t,r),Mte,(t,a)=>{if(!(t==null||a==null))return Hg(Hg({},t),{},{scale:a})});var Rte=We([Ea,Ey,Ty],(t,a,r)=>{switch(t){case"horizontal":return a.some(s=>s.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(s=>s.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),bO=t=>t.options.defaultTooltipEventType,vO=t=>t.options.validateTooltipEventTypes;function jO(t,a,r){if(t==null)return a;var s=t?"axis":"item";return r==null?a:r.includes(s)?s:a}function V5(t,a){var r=bO(t),s=vO(t);return jO(a,r,s)}function $te(t){return Lt(a=>V5(a,t))}var NO=(t,a)=>{var r,s=Number(a);if(!(Ei(s)||a==null))return s>=0?t==null||(r=t[s])===null||r===void 0?void 0:r.value:void 0},Fte=t=>t.tooltip.settings,kd={active:!1,index:null,dataKey:void 0,coordinate:void 0},Ite={itemInteraction:{click:kd,hover:kd},axisInteraction:{click:kd,hover:kd},keyboardInteraction:kd,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},wO=Di({name:"tooltip",initialState:Ite,reducers:{addTooltipEntrySettings(t,a){t.tooltipItemPayloads.push(a.payload)},removeTooltipEntrySettings(t,a){var r=fc(t).tooltipItemPayloads.indexOf(a.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(t,a){t.settings=a.payload},setActiveMouseOverItemIndex(t,a){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=a.payload.activeIndex,t.itemInteraction.hover.dataKey=a.payload.activeDataKey,t.itemInteraction.hover.coordinate=a.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,a){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=a.payload.activeIndex,t.itemInteraction.click.dataKey=a.payload.activeDataKey,t.itemInteraction.click.coordinate=a.payload.activeCoordinate},setMouseOverAxisIndex(t,a){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=a.payload.activeIndex,t.axisInteraction.hover.dataKey=a.payload.activeDataKey,t.axisInteraction.hover.coordinate=a.payload.activeCoordinate},setMouseClickAxisIndex(t,a){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=a.payload.activeIndex,t.axisInteraction.click.dataKey=a.payload.activeDataKey,t.axisInteraction.click.coordinate=a.payload.activeCoordinate},setSyncInteraction(t,a){t.syncInteraction=a.payload},setKeyboardInteraction(t,a){t.keyboardInteraction.active=a.payload.active,t.keyboardInteraction.index=a.payload.activeIndex,t.keyboardInteraction.coordinate=a.payload.activeCoordinate,t.keyboardInteraction.dataKey=a.payload.activeDataKey}}}),{addTooltipEntrySettings:Bte,removeTooltipEntrySettings:zte,setTooltipSettingsState:qte,setActiveMouseOverItemIndex:SO,mouseLeaveItem:Ute,mouseLeaveChart:_O,setActiveClickItemIndex:Hte,setMouseOverAxisIndex:AO,setMouseClickAxisIndex:Yte,setSyncInteraction:Xj,setKeyboardInteraction:Jj}=wO.actions,Gte=wO.reducer;function K7(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function $p(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?K7(Object(r),!0).forEach(function(s){Vte(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K7(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Vte(t,a,r){return(a=Wte(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Wte(t){var a=Kte(t,"string");return typeof a=="symbol"?a:a+""}function Kte(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function Xte(t,a,r){return a==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Jte(t){return t.index!=null}var kO=(t,a,r,s)=>{if(a==null)return kd;var n=Xte(t,a,r);if(n==null)return kd;if(n.active)return n;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var i=t.settings.active===!0;if(Jte(n)){if(i)return $p($p({},n),{},{active:!0})}else if(s!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:s};return $p($p({},kd),{},{coordinate:n.coordinate})},W5=(t,a)=>{var r=t?.index;if(r==null)return null;var s=Number(r);if(!Pi(s))return r;var n=0,i=1/0;return a.length>0&&(i=a.length-1),String(Math.max(n,Math.min(s,i)))},CO=(t,a,r,s,n,i,o,d)=>{if(!(i==null||d==null)){var u=o[0],m=u==null?void 0:d(u.positions,i);if(m!=null)return m;var x=n?.[Number(i)];if(x)switch(r){case"horizontal":return{x:x.coordinate,y:(s.top+a)/2};default:return{x:(s.left+t)/2,y:x.coordinate}}}},EO=(t,a,r,s)=>{if(a==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var n;return r==="hover"?n=t.itemInteraction.hover.dataKey:n=t.itemInteraction.click.dataKey,n==null&&s!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===n})},d0=t=>t.options.tooltipPayloadSearcher,Jx=t=>t.tooltip;function X7(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function J7(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?X7(Object(r),!0).forEach(function(s){Zte(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X7(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Zte(t,a,r){return(a=Qte(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Qte(t){var a=eae(t,"string");return typeof a=="symbol"?a:a+""}function eae(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function tae(t,a){return t??a}var TO=(t,a,r,s,n,i,o)=>{if(!(a==null||i==null)){var{chartData:d,computedData:u,dataStartIndex:m,dataEndIndex:x}=r,f=[];return t.reduce((b,p)=>{var v,{dataDefinedOnItem:j,settings:N}=p,w=tae(j,d),P=Array.isArray(w)?bT(w,m,x):w,k=(v=N?.dataKey)!==null&&v!==void 0?v:s,$=N?.nameKey,O;if(s&&Array.isArray(P)&&!Array.isArray(P[0])&&o==="axis"?O=xE(P,s,n):O=i(P,a,u,$),Array.isArray(O))O.forEach(_=>{var E=J7(J7({},N),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});b.push(M8({tooltipEntrySettings:E,dataKey:_.dataKey,payload:_.payload,value:sr(_.payload,_.dataKey),name:_.name}))});else{var L;b.push(M8({tooltipEntrySettings:N,dataKey:k,payload:O,value:sr(O,k),name:(L=sr(O,$))!==null&&L!==void 0?L:N?.name}))}return b},f)}},K5=We([zs,Ea,VP,w5,As],cO),aae=We([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,a)=>[...t,...a]),rae=We([As,Vx],P5),u0=We([aae,zs,rae],O5),sae=We([u0],t=>t.filter(Hy)),nae=We([u0],D5),Zx=We([nae,Wd],L5),iae=We([sae,Wd,zs],HP),X5=We([Zx,zs,u0],R5),lae=We([zs],$5),oae=We([u0],t=>t.filter(Hy)),cae=We([iae,oae,n0],ZP),dae=We([cae,Wd,As],QP),uae=We([u0],KP),mae=We([Zx,zs,uae,Vy,As],eO),xae=We([aO,As,Vx],Wx),hae=We([xae,As],nO),fae=We([rO,As,Vx],Wx),pae=We([fae,As],iO),gae=We([sO,As,Vx],Wx),yae=We([gae,As],lO),bae=We([hae,yae,pae],Yg),vae=We([zs,lae,dae,mae,bae,Ea,As],F5),PO=We([zs,Ea,Zx,X5,n0,As,vae],I5),jae=We([PO,zs,K5],q5),Nae=We([zs,PO,jae,As],H5),OO=t=>{var a=As(t),r=Vx(t),s=!1;return c0(t,a,r,s)},DO=We([zs,OO],qy),LO=We([zs,K5,Nae,DO],z5),wae=We([Ea,X5,zs,As],pO),Sae=We([Ea,X5,zs,As],gO),_ae=(t,a,r,s,n,i,o,d)=>{if(a){var{type:u}=a,m=Yd(t,d);if(s){var x=r==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,f=u==="category"&&s.bandwidth?s.bandwidth()/x:0;return f=d==="angleAxis"&&n!=null&&n?.length>=2?Fs(n[0]-n[1])*2*f:f,m&&o?o.map((b,p)=>({coordinate:s(b)+f,value:b,index:p,offset:f})):s.domain().map((b,p)=>({coordinate:s(b)+f,value:i?i[b]:b,index:p,offset:f}))}}},Dc=We([Ea,zs,K5,LO,OO,wae,Sae,As],_ae),J5=We([bO,vO,Fte],(t,a,r)=>jO(r.shared,t,a)),MO=t=>t.tooltip.settings.trigger,Z5=t=>t.tooltip.settings.defaultIndex,Xy=We([Jx,J5,MO,Z5],kO),zd=We([Xy,Zx],W5),RO=We([Dc,zd],NO),$O=We([Xy],t=>{if(t)return t.dataKey}),FO=We([Jx,J5,MO,Z5],EO),Aae=We([Tc,Pc,Ea,Ss,Dc,Z5,FO,d0],CO),kae=We([Xy,Aae],(t,a)=>t!=null&&t.coordinate?t.coordinate:a),Cae=We([Xy],t=>t.active),Eae=We([FO,zd,Wd,UP,RO,d0,J5],TO),Tae=We([Eae],t=>{if(t!=null){var a=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(a))}});function Z7(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Q7(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Z7(Object(r),!0).forEach(function(s){Pae(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z7(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Pae(t,a,r){return(a=Oae(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Oae(t){var a=Dae(t,"string");return typeof a=="symbol"?a:a+""}function Dae(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var Lae=()=>Lt(zs),Mae=()=>{var t=Lae(),a=Lt(Dc),r=Lt(LO);return Ef(Q7(Q7({},t),{},{scale:r}),a)},Rae=()=>Lt(w5),Q5=(t,a)=>a,IO=(t,a,r)=>r,ew=(t,a,r,s)=>s,$ae=We(Dc,t=>wy(t,a=>a.coordinate)),tw=We([Jx,Q5,IO,ew],kO),BO=We([tw,Zx],W5),Fae=(t,a,r)=>{if(a!=null){var s=Jx(t);return a==="axis"?r==="hover"?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:r==="hover"?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}},zO=We([Jx,Q5,IO,ew],EO),Gg=We([Tc,Pc,Ea,Ss,Dc,ew,zO,d0],CO),Iae=We([tw,Gg],(t,a)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:a}),qO=We(Dc,BO,NO),Bae=We([zO,BO,Wd,UP,qO,d0,Q5],TO),zae=We([tw],t=>({isActive:t.active,activeIndex:t.index})),qae=(t,a,r,s,n,i,o,d)=>{if(!(!t||!a||!s||!n||!i)){var u=SX(t.chartX,t.chartY,a,r,d);if(u){var m=AX(u,a),x=uX(m,o,i,s,n),f=_X(a,i,x,u);return{activeIndex:String(x),activeCoordinate:f}}}};function Zj(){return Zj=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Zj.apply(null,arguments)}function eA(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Fp(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?eA(Object(r),!0).forEach(function(s){Uae(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eA(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Uae(t,a,r){return(a=Hae(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Hae(t){var a=Yae(t,"string");return typeof a=="symbol"?a:a+""}function Yae(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function Gae(t){var{coordinate:a,payload:r,index:s,offset:n,tooltipAxisBandSize:i,layout:o,cursor:d,tooltipEventType:u,chartName:m}=t,x=a,f=r,b=s;if(!d||!x||m!=="ScatterChart"&&u!=="axis")return null;var p,v;if(m==="ScatterChart")p=x,v=xJ;else if(m==="BarChart")p=hJ(o,x,n,i),v=RT;else if(o==="radial"){var{cx:j,cy:N,radius:w,startAngle:P,endAngle:k}=$T(x);p={cx:j,cy:N,startAngle:P,endAngle:k,innerRadius:w,outerRadius:w},v=IT}else p={points:VJ(o,x,n)},v=XN;var $=typeof d=="object"&&"className"in d?d.className:void 0,O=Fp(Fp(Fp(Fp({stroke:"#ccc",pointerEvents:"none"},n),p),Ar(d,!1)),{},{payload:f,payloadIndex:b,className:Ba("recharts-tooltip-cursor",$)});return g.isValidElement(d)?g.cloneElement(d,O):g.createElement(v,O)}function Vae(t){var a=Mae(),r=_T(),s=Dy(),n=Rae();return g.createElement(Gae,Zj({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:r,layout:s,tooltipAxisBandSize:a,chartName:n}))}var UO=g.createContext(null),Wae=()=>g.useContext(UO),u2={exports:{}},tA;function Kae(){return tA||(tA=1,function(t){var a=Object.prototype.hasOwnProperty,r="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1));function n(u,m,x){this.fn=u,this.context=m,this.once=x||!1}function i(u,m,x,f,b){if(typeof x!="function")throw new TypeError("The listener must be a function");var p=new n(x,f||u,b),v=r?r+m:m;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],p]:u._events[v].push(p):(u._events[v]=p,u._eventsCount++),u}function o(u,m){--u._eventsCount===0?u._events=new s:delete u._events[m]}function d(){this._events=new s,this._eventsCount=0}d.prototype.eventNames=function(){var m=[],x,f;if(this._eventsCount===0)return m;for(f in x=this._events)a.call(x,f)&&m.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(x)):m},d.prototype.listeners=function(m){var x=r?r+m:m,f=this._events[x];if(!f)return[];if(f.fn)return[f.fn];for(var b=0,p=f.length,v=new Array(p);b<p;b++)v[b]=f[b].fn;return v},d.prototype.listenerCount=function(m){var x=r?r+m:m,f=this._events[x];return f?f.fn?1:f.length:0},d.prototype.emit=function(m,x,f,b,p,v){var j=r?r+m:m;if(!this._events[j])return!1;var N=this._events[j],w=arguments.length,P,k;if(N.fn){switch(N.once&&this.removeListener(m,N.fn,void 0,!0),w){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,x),!0;case 3:return N.fn.call(N.context,x,f),!0;case 4:return N.fn.call(N.context,x,f,b),!0;case 5:return N.fn.call(N.context,x,f,b,p),!0;case 6:return N.fn.call(N.context,x,f,b,p,v),!0}for(k=1,P=new Array(w-1);k<w;k++)P[k-1]=arguments[k];N.fn.apply(N.context,P)}else{var $=N.length,O;for(k=0;k<$;k++)switch(N[k].once&&this.removeListener(m,N[k].fn,void 0,!0),w){case 1:N[k].fn.call(N[k].context);break;case 2:N[k].fn.call(N[k].context,x);break;case 3:N[k].fn.call(N[k].context,x,f);break;case 4:N[k].fn.call(N[k].context,x,f,b);break;default:if(!P)for(O=1,P=new Array(w-1);O<w;O++)P[O-1]=arguments[O];N[k].fn.apply(N[k].context,P)}}return!0},d.prototype.on=function(m,x,f){return i(this,m,x,f,!1)},d.prototype.once=function(m,x,f){return i(this,m,x,f,!0)},d.prototype.removeListener=function(m,x,f,b){var p=r?r+m:m;if(!this._events[p])return this;if(!x)return o(this,p),this;var v=this._events[p];if(v.fn)v.fn===x&&(!b||v.once)&&(!f||v.context===f)&&o(this,p);else{for(var j=0,N=[],w=v.length;j<w;j++)(v[j].fn!==x||b&&!v[j].once||f&&v[j].context!==f)&&N.push(v[j]);N.length?this._events[p]=N.length===1?N[0]:N:o(this,p)}return this},d.prototype.removeAllListeners=function(m){var x;return m?(x=r?r+m:m,this._events[x]&&o(this,x)):(this._events=new s,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=r,d.EventEmitter=d,t.exports=d}(u2)),u2.exports}var Xae=Kae();const Jae=Po(Xae);var Rf=new Jae,Qj="recharts.syncEvent.tooltip",aA="recharts.syncEvent.brush";function aw(t,a){if(a){var r=Number.parseInt(a,10);if(!Ei(r))return t?.[r]}}var Zae={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},HO=Di({name:"options",initialState:Zae,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Qae=HO.reducer,{createEventEmitter:ere}=HO.actions;function tre(t){return t.tooltip.syncInteraction}var are={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},YO=Di({name:"chartData",initialState:are,reducers:{setChartData(t,a){if(t.chartData=a.payload,a.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}a.payload.length>0&&t.dataEndIndex!==a.payload.length-1&&(t.dataEndIndex=a.payload.length-1)},setComputedData(t,a){t.computedData=a.payload},setDataStartEndIndexes(t,a){var{startIndex:r,endIndex:s}=a.payload;r!=null&&(t.dataStartIndex=r),s!=null&&(t.dataEndIndex=s)}}}),{setChartData:rA,setDataStartEndIndexes:rre,setComputedData:jue}=YO.actions,sre=YO.reducer,nre=["x","y"];function sA(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Eu(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?sA(Object(r),!0).forEach(function(s){ire(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sA(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function ire(t,a,r){return(a=lre(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function lre(t){var a=ore(t,"string");return typeof a=="symbol"?a:a+""}function ore(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function cre(t,a){if(t==null)return{};var r,s,n=dre(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dre(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var GO=()=>{};function ure(){var t=Lt(S5),a=Lt(_5),r=ss(),s=Lt($P),n=Lt(Dc),i=Dy(),o=KN(),d=Lt(u=>u.rootProps.className);g.useEffect(()=>{if(t==null)return GO;var u=(m,x,f)=>{if(a!==f&&t===m){if(s==="index"){var b;if(o&&x!==null&&x!==void 0&&(b=x.payload)!==null&&b!==void 0&&b.coordinate){var p=x.payload.coordinate,{x:v,y:j}=p,N=cre(p,nre),w=Eu(Eu(Eu({},N),typeof v=="number"&&{x:Math.max(o.x,Math.min(v,o.x+o.width))}),typeof j=="number"&&{y:Math.max(o.y,Math.min(j,o.y+o.height))}),P=Eu(Eu({},x),{},{payload:Eu(Eu({},x.payload),{},{coordinate:w})});r(P)}else r(x);return}if(n!=null){var k;if(typeof s=="function"){var $={activeTooltipIndex:x.payload.index==null?void 0:Number(x.payload.index),isTooltipActive:x.payload.active,activeIndex:x.payload.index==null?void 0:Number(x.payload.index),activeLabel:x.payload.label,activeDataKey:x.payload.dataKey,activeCoordinate:x.payload.coordinate},O=s(n,$);k=n[O]}else s==="value"&&(k=n.find(I=>String(I.value)===x.payload.label));var{coordinate:L}=x.payload;if(k==null||x.payload.active===!1||L==null||o==null){r(Xj({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:_,y:E}=L,A=Math.min(_,o.x+o.width),z=Math.min(E,o.y+o.height),M={x:i==="horizontal"?k.coordinate:A,y:i==="horizontal"?z:k.coordinate},D=Xj({active:x.payload.active,coordinate:M,dataKey:x.payload.dataKey,index:String(k.index),label:x.payload.label});r(D)}}};return Rf.on(Qj,u),()=>{Rf.off(Qj,u)}},[d,r,a,t,s,n,i,o])}function mre(){var t=Lt(S5),a=Lt(_5),r=ss();g.useEffect(()=>{if(t==null)return GO;var s=(n,i,o)=>{a!==o&&t===n&&r(rre(i))};return Rf.on(aA,s),()=>{Rf.off(aA,s)}},[r,a,t])}function xre(){var t=ss();g.useEffect(()=>{t(ere())},[t]),ure(),mre()}function hre(t,a,r,s,n,i){var o=Lt(b=>Fae(b,t,a)),d=Lt(_5),u=Lt(S5),m=Lt($P),x=Lt(tre),f=x?.active;g.useEffect(()=>{if(!f&&u!=null&&d!=null){var b=Xj({active:i,coordinate:r,dataKey:o,index:n,label:typeof s=="number"?String(s):s});Rf.emit(Qj,u,b,d)}},[f,r,o,n,s,d,u,m,i])}function nA(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function iA(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?nA(Object(r),!0).forEach(function(s){fre(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nA(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function fre(t,a,r){return(a=pre(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function pre(t){var a=gre(t,"string");return typeof a=="symbol"?a:a+""}function gre(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function yre(t){return t.dataKey}function bre(t,a){return g.isValidElement(t)?g.cloneElement(t,a):typeof t=="function"?g.createElement(t,a):g.createElement(YX,a)}var lA=[],vre={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!mm.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function zl(t){var a=ai(t,vre),{active:r,allowEscapeViewBox:s,animationDuration:n,animationEasing:i,content:o,filterNull:d,isAnimationActive:u,offset:m,payloadUniqBy:x,position:f,reverseDirection:b,useTranslate3d:p,wrapperStyle:v,cursor:j,shared:N,trigger:w,defaultIndex:P,portal:k,axisId:$}=a,O=ss(),L=typeof P=="number"?String(P):P;g.useEffect(()=>{O(qte({shared:N,trigger:w,axisId:$,active:r,defaultIndex:L}))},[O,N,w,$,r,L]);var _=KN(),E=PT(),A=$te(N),{activeIndex:z,isActive:M}=Lt(ee=>zae(ee,A,w,L)),D=Lt(ee=>Bae(ee,A,w,L)),I=Lt(ee=>qO(ee,A,w,L)),V=Lt(ee=>Iae(ee,A,w,L)),H=D,B=Wae(),W=r??M,[K,X]=tK([H,W]),Q=A==="axis"?I:void 0;hre(A,w,V,Q,z,W);var ye=k??B;if(ye==null)return null;var Y=H??lA;W||(Y=lA),d&&Y.length&&(Y=kW(H.filter(ee=>ee.value!=null&&(ee.hide!==!0||a.includeHidden)),x,yre));var J=Y.length>0,U=g.createElement(ZX,{allowEscapeViewBox:s,animationDuration:n,animationEasing:i,isAnimationActive:u,active:W,coordinate:V,hasPayload:J,offset:m,position:f,reverseDirection:b,useTranslate3d:p,viewBox:_,wrapperStyle:v,lastBoundingBox:K,innerRef:X,hasPortalFromProps:!!k},bre(o,iA(iA({},a),{},{payload:Y,label:Q,active:W,coordinate:V,accessibilityLayer:E})));return g.createElement(g.Fragment,null,iM.createPortal(U,ye),W&&g.createElement(Vae,{cursor:j,tooltipEventType:A,coordinate:V,payload:H,index:z}))}var m2={},x2={},h2={},oA;function jre(){return oA||(oA=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r,s,{signal:n,edges:i}={}){let o,d=null;const u=i!=null&&i.includes("leading"),m=i==null||i.includes("trailing"),x=()=>{d!==null&&(r.apply(o,d),o=void 0,d=null)},f=()=>{m&&x(),j()};let b=null;const p=()=>{b!=null&&clearTimeout(b),b=setTimeout(()=>{b=null,f()},s)},v=()=>{b!==null&&(clearTimeout(b),b=null)},j=()=>{v(),o=void 0,d=null},N=()=>{x()},w=function(...P){if(n?.aborted)return;o=this,d=P;const k=b==null;p(),u&&k&&x()};return w.schedule=p,w.cancel=j,w.flush=N,n?.addEventListener("abort",j,{once:!0}),w}t.debounce=a}(h2)),h2}var cA;function Nre(){return cA||(cA=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=jre();function r(s,n=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:d=!0,maxWait:u}=i,m=Array(2);o&&(m[0]="leading"),d&&(m[1]="trailing");let x,f=null;const b=a.debounce(function(...j){x=s.apply(this,j),f=null},n,{edges:m}),p=function(...j){return u!=null&&(f===null&&(f=Date.now()),Date.now()-f>=u)?(x=s.apply(this,j),f=Date.now(),b.cancel(),b.schedule(),x):(b.apply(this,j),x)},v=()=>(b.flush(),x);return p.cancel=b.cancel,p.flush=v,p}t.debounce=r}(x2)),x2}var dA;function wre(){return dA||(dA=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=Nre();function r(s,n=0,i={}){const{leading:o=!0,trailing:d=!0}=i;return a.debounce(s,n,{leading:o,maxWait:n,trailing:d})}t.throttle=r}(m2)),m2}var f2,uA;function Sre(){return uA||(uA=1,f2=wre().throttle),f2}var _re=Sre();const Are=Po(_re);var pf=function(a,r){for(var s=arguments.length,n=new Array(s>2?s-2:0),i=2;i<s;i++)n[i-2]=arguments[i]};function mA(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function p2(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?mA(Object(r),!0).forEach(function(s){kre(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mA(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function kre(t,a,r){return(a=Cre(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Cre(t){var a=Ere(t,"string");return typeof a=="symbol"?a:a+""}function Ere(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var ql=g.forwardRef((t,a)=>{var{aspect:r,initialDimension:s={width:-1,height:-1},width:n="100%",height:i="100%",minWidth:o=0,minHeight:d,maxHeight:u,children:m,debounce:x=0,id:f,className:b,onResize:p,style:v={}}=t,j=g.useRef(null),N=g.useRef();N.current=p,g.useImperativeHandle(a,()=>j.current);var[w,P]=g.useState({containerWidth:s.width,containerHeight:s.height}),k=g.useCallback((O,L)=>{P(_=>{var E=Math.round(O),A=Math.round(L);return _.containerWidth===E&&_.containerHeight===A?_:{containerWidth:E,containerHeight:A}})},[]);g.useEffect(()=>{var O=A=>{var z,{width:M,height:D}=A[0].contentRect;k(M,D),(z=N.current)===null||z===void 0||z.call(N,M,D)};x>0&&(O=Are(O,x,{trailing:!0,leading:!1}));var L=new ResizeObserver(O),{width:_,height:E}=j.current.getBoundingClientRect();return k(_,E),L.observe(j.current),()=>{L.disconnect()}},[k,x]);var $=g.useMemo(()=>{var{containerWidth:O,containerHeight:L}=w;if(O<0||L<0)return null;pf($u(n)||$u(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,n,i),pf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var _=$u(n)?O:n,E=$u(i)?L:i;return r&&r>0&&(_?E=_/r:E&&(_=E*r),u&&E>u&&(E=u)),pf(_>0||E>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,E,n,i,o,d,r),g.Children.map(m,A=>g.cloneElement(A,{width:_,height:E,style:p2({width:_,height:E},A.props.style)}))},[r,m,i,u,d,o,w,n]);return g.createElement("div",{id:f?"".concat(f):void 0,className:Ba("recharts-responsive-container",b),style:p2(p2({},v),{},{width:n,height:i,minWidth:o,minHeight:d,maxHeight:u}),ref:j},g.createElement("div",{style:{width:0,height:0,overflow:"visible"}},$))}),qd=t=>null;qd.displayName="Cell";function Tre(t,a,r){return(a=Pre(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Pre(t){var a=Ore(t,"string");return typeof a=="symbol"?a:a+""}function Ore(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}class Dre{constructor(a){Tre(this,"cache",new Map),this.maxSize=a}get(a){var r=this.cache.get(a);return r!==void 0&&(this.cache.delete(a),this.cache.set(a,r)),r}set(a,r){if(this.cache.has(a))this.cache.delete(a);else if(this.cache.size>=this.maxSize){var s=this.cache.keys().next().value;this.cache.delete(s)}this.cache.set(a,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function xA(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Lre(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?xA(Object(r),!0).forEach(function(s){Mre(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xA(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Mre(t,a,r){return(a=Rre(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Rre(t){var a=$re(t,"string");return typeof a=="symbol"?a:a+""}function $re(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var Fre={cacheSize:2e3,enableCache:!0},VO=Lre({},Fre),hA=new Dre(VO.cacheSize),Ire={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},fA="recharts_measurement_span";function Bre(t,a){var r=a.fontSize||"",s=a.fontFamily||"",n=a.fontWeight||"",i=a.fontStyle||"",o=a.letterSpacing||"",d=a.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(s,"|").concat(n,"|").concat(i,"|").concat(o,"|").concat(d)}var pA=(t,a)=>{try{var r=document.getElementById(fA);r||(r=document.createElement("span"),r.setAttribute("id",fA),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Ire,a),r.textContent="".concat(t);var s=r.getBoundingClientRect();return{width:s.width,height:s.height}}catch{return{width:0,height:0}}},gf=function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a==null||mm.isSsr)return{width:0,height:0};if(!VO.enableCache)return pA(a,r);var s=Bre(a,r),n=hA.get(s);if(n)return n;var i=pA(a,r);return hA.set(s,i),i},gA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,yA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zre=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,qre=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,WO={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Ure=Object.keys(WO),ux="NaN";function Hre(t,a){return t*WO[a]}class Kn{static parse(a){var r,[,s,n]=(r=qre.exec(a))!==null&&r!==void 0?r:[];return new Kn(parseFloat(s),n??"")}constructor(a,r){this.num=a,this.unit=r,this.num=a,this.unit=r,Ei(a)&&(this.unit=""),r!==""&&!zre.test(r)&&(this.num=NaN,this.unit=""),Ure.includes(r)&&(this.num=Hre(a,r),this.unit="px")}add(a){return this.unit!==a.unit?new Kn(NaN,""):new Kn(this.num+a.num,this.unit)}subtract(a){return this.unit!==a.unit?new Kn(NaN,""):new Kn(this.num-a.num,this.unit)}multiply(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new Kn(NaN,""):new Kn(this.num*a.num,this.unit||a.unit)}divide(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new Kn(NaN,""):new Kn(this.num/a.num,this.unit||a.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ei(this.num)}}function KO(t){if(t.includes(ux))return ux;for(var a=t;a.includes("*")||a.includes("/");){var r,[,s,n,i]=(r=gA.exec(a))!==null&&r!==void 0?r:[],o=Kn.parse(s??""),d=Kn.parse(i??""),u=n==="*"?o.multiply(d):o.divide(d);if(u.isNaN())return ux;a=a.replace(gA,u.toString())}for(;a.includes("+")||/.-\d+(?:\.\d+)?/.test(a);){var m,[,x,f,b]=(m=yA.exec(a))!==null&&m!==void 0?m:[],p=Kn.parse(x??""),v=Kn.parse(b??""),j=f==="+"?p.add(v):p.subtract(v);if(j.isNaN())return ux;a=a.replace(yA,j.toString())}return a}var bA=/\(([^()]*)\)/;function Yre(t){for(var a=t,r;(r=bA.exec(a))!=null;){var[,s]=r;a=a.replace(bA,KO(s))}return a}function Gre(t){var a=t.replace(/\s+/g,"");return a=Yre(a),a=KO(a),a}function Vre(t){try{return Gre(t)}catch{return ux}}function g2(t){var a=Vre(t.slice(5,-1));return a===ux?"":a}var Wre=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Kre=["dx","dy","angle","className","breakAll"];function eN(){return eN=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},eN.apply(null,arguments)}function vA(t,a){if(t==null)return{};var r,s,n=Xre(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Xre(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var XO=/[ \f\n\r\t\v\u2028\u2029]+/,JO=t=>{var{children:a,breakAll:r,style:s}=t;try{var n=[];Cr(a)||(r?n=a.toString().split(""):n=a.toString().split(XO));var i=n.map(d=>({word:d,width:gf(d,s).width})),o=r?0:gf("",s).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},Jre=(t,a,r,s,n)=>{var{maxLines:i,children:o,style:d,breakAll:u}=t,m=zt(i),x=o,f=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return M.reduce((D,I)=>{var{word:V,width:H}=I,B=D[D.length-1];if(B&&(s==null||n||B.width+H+r<Number(s)))B.words.push(V),B.width+=H+r;else{var W={words:[V],width:H};D.push(W)}return D},[])},b=f(a),p=z=>z.reduce((M,D)=>M.width>D.width?M:D);if(!m||n)return b;var v=b.length>i||p(b).width>Number(s);if(!v)return b;for(var j="",N=z=>{var M=x.slice(0,z),D=JO({breakAll:u,style:d,children:M+j}).wordsWithComputedWidth,I=f(D),V=I.length>i||p(I).width>Number(s);return[V,I]},w=0,P=x.length-1,k=0,$;w<=P&&k<=x.length-1;){var O=Math.floor((w+P)/2),L=O-1,[_,E]=N(L),[A]=N(O);if(!_&&!A&&(w=O+1),_&&A&&(P=O-1),!_&&A){$=E;break}k++}return $||b},jA=t=>{var a=Cr(t)?[]:t.toString().split(XO);return[{words:a}]},Zre=t=>{var{width:a,scaleToFit:r,children:s,style:n,breakAll:i,maxLines:o}=t;if((a||r)&&!mm.isSsr){var d,u,m=JO({breakAll:i,children:s,style:n});if(m){var{wordsWithComputedWidth:x,spaceWidth:f}=m;d=x,u=f}else return jA(s);return Jre({breakAll:i,children:s,maxLines:o,style:n},d,u,a,r)}return jA(s)},NA="#808080",Jy=g.forwardRef((t,a)=>{var{x:r=0,y:s=0,lineHeight:n="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:d="start",verticalAnchor:u="end",fill:m=NA}=t,x=vA(t,Wre),f=g.useMemo(()=>Zre({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:o,style:x.style,width:x.width}),[x.breakAll,x.children,x.maxLines,o,x.style,x.width]),{dx:b,dy:p,angle:v,className:j,breakAll:N}=x,w=vA(x,Kre);if(!Eo(r)||!Eo(s)||f.length===0)return null;var P=r+(zt(b)?b:0),k=s+(zt(p)?p:0),$;switch(u){case"start":$=g2("calc(".concat(i,")"));break;case"middle":$=g2("calc(".concat((f.length-1)/2," * -").concat(n," + (").concat(i," / 2))"));break;default:$=g2("calc(".concat(f.length-1," * -").concat(n,")"));break}var O=[];if(o){var L=f[0].width,{width:_}=x;O.push("scale(".concat(zt(_)?_/L:1,")"))}return v&&O.push("rotate(".concat(v,", ").concat(P,", ").concat(k,")")),O.length&&(w.transform=O.join(" ")),g.createElement("text",eN({},Ar(w,!0),{ref:a,x:P,y:k,className:Ba("recharts-text",j),textAnchor:d,fill:m.includes("url")?NA:m}),f.map((E,A)=>{var z=E.words.join(N?"":" ");return g.createElement("tspan",{x:P,dy:A===0?$:n,key:"".concat(z,"-").concat(A)},z)}))});Jy.displayName="Text";var Qre=["labelRef"];function ese(t,a){if(t==null)return{};var r,s,n=tse(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tse(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function wA(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function es(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?wA(Object(r),!0).forEach(function(s){ase(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wA(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function ase(t,a,r){return(a=rse(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function rse(t){var a=sse(t,"string");return typeof a=="symbol"?a:a+""}function sse(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function mc(){return mc=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},mc.apply(null,arguments)}var ZO=g.createContext(null),nse=t=>{var{x:a,y:r,width:s,height:n,children:i}=t,o=g.useMemo(()=>({x:a,y:r,width:s,height:n}),[a,r,s,n]);return g.createElement(ZO.Provider,{value:o},i)},QO=()=>{var t=g.useContext(ZO),a=KN();return t||a},ise=g.createContext(null),lse=()=>{var t=g.useContext(ise),a=Lt(qP);return t||a},ose=t=>{var{value:a,formatter:r}=t,s=Cr(t.children)?a:t.children;return typeof r=="function"?r(s):s},rw=t=>t!=null&&typeof t=="function",cse=(t,a)=>{var r=Fs(a-t),s=Math.min(Math.abs(a-t),360);return r*s},dse=(t,a,r,s,n)=>{var{offset:i,className:o}=t,{cx:d,cy:u,innerRadius:m,outerRadius:x,startAngle:f,endAngle:b,clockWise:p}=n,v=(m+x)/2,j=cse(f,b),N=j>=0?1:-1,w,P;switch(a){case"insideStart":w=f+N*i,P=p;break;case"insideEnd":w=b-N*i,P=!p;break;case"end":w=b+N*i,P=p;break;default:throw new Error("Unsupported position ".concat(a))}P=j<=0?P:!P;var k=xs(d,u,v,w),$=xs(d,u,v,w+(P?1:-1)*359),O="M".concat(k.x,",").concat(k.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(P?0:1,`,
    `).concat($.x,",").concat($.y),L=Cr(t.id)?Af("recharts-radial-line-"):t.id;return g.createElement("text",mc({},s,{dominantBaseline:"central",className:Ba("recharts-radial-bar-label",o)}),g.createElement("defs",null,g.createElement("path",{id:L,d:O})),g.createElement("textPath",{xlinkHref:"#".concat(L)},r))},use=(t,a,r)=>{var{cx:s,cy:n,innerRadius:i,outerRadius:o,startAngle:d,endAngle:u}=t,m=(d+u)/2;if(r==="outside"){var{x,y:f}=xs(s,n,o+a,m);return{x,y:f,textAnchor:x>=s?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:s,y:n,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:s,y:n,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:s,y:n,textAnchor:"middle",verticalAnchor:"end"};var b=(i+o)/2,{x:p,y:v}=xs(s,n,b,m);return{x:p,y:v,textAnchor:"middle",verticalAnchor:"middle"}},eD=t=>"cx"in t&&zt(t.cx),mse=(t,a)=>{var{parentViewBox:r,offset:s,position:n}=t,i;r!=null&&!eD(r)&&(i=r);var{x:o,y:d,width:u,height:m}=a,x=m>=0?1:-1,f=x*s,b=x>0?"end":"start",p=x>0?"start":"end",v=u>=0?1:-1,j=v*s,N=v>0?"end":"start",w=v>0?"start":"end";if(n==="top"){var P={x:o+u/2,y:d-x*s,textAnchor:"middle",verticalAnchor:b};return es(es({},P),i?{height:Math.max(d-i.y,0),width:u}:{})}if(n==="bottom"){var k={x:o+u/2,y:d+m+f,textAnchor:"middle",verticalAnchor:p};return es(es({},k),i?{height:Math.max(i.y+i.height-(d+m),0),width:u}:{})}if(n==="left"){var $={x:o-j,y:d+m/2,textAnchor:N,verticalAnchor:"middle"};return es(es({},$),i?{width:Math.max($.x-i.x,0),height:m}:{})}if(n==="right"){var O={x:o+u+j,y:d+m/2,textAnchor:w,verticalAnchor:"middle"};return es(es({},O),i?{width:Math.max(i.x+i.width-O.x,0),height:m}:{})}var L=i?{width:u,height:m}:{};return n==="insideLeft"?es({x:o+j,y:d+m/2,textAnchor:w,verticalAnchor:"middle"},L):n==="insideRight"?es({x:o+u-j,y:d+m/2,textAnchor:N,verticalAnchor:"middle"},L):n==="insideTop"?es({x:o+u/2,y:d+f,textAnchor:"middle",verticalAnchor:p},L):n==="insideBottom"?es({x:o+u/2,y:d+m-f,textAnchor:"middle",verticalAnchor:b},L):n==="insideTopLeft"?es({x:o+j,y:d+f,textAnchor:w,verticalAnchor:p},L):n==="insideTopRight"?es({x:o+u-j,y:d+f,textAnchor:N,verticalAnchor:p},L):n==="insideBottomLeft"?es({x:o+j,y:d+m-f,textAnchor:w,verticalAnchor:b},L):n==="insideBottomRight"?es({x:o+u-j,y:d+m-f,textAnchor:N,verticalAnchor:b},L):n&&typeof n=="object"&&(zt(n.x)||$u(n.x))&&(zt(n.y)||$u(n.y))?es({x:o+gn(n.x,u),y:d+gn(n.y,m),textAnchor:"end",verticalAnchor:"end"},L):es({x:o+u/2,y:d+m/2,textAnchor:"middle",verticalAnchor:"middle"},L)},xse={offset:5};function Ad(t){var a=ai(t,xse),{viewBox:r,position:s,value:n,children:i,content:o,className:d="",textBreakAll:u,labelRef:m}=a,x=lse(),f=QO(),b=s==="center"?f:x??f,p=r||b;if(!p||Cr(n)&&Cr(i)&&!g.isValidElement(o)&&typeof o!="function")return null;var v=es(es({},a),{},{viewBox:p});if(g.isValidElement(o)){var{labelRef:j}=v,N=ese(v,Qre);return g.cloneElement(o,N)}var w;if(typeof o=="function"){if(w=g.createElement(o,v),g.isValidElement(w))return w}else w=ose(a);var P=eD(p),k=Ar(a,!0);if(P&&(s==="insideStart"||s==="insideEnd"||s==="end"))return dse(a,s,w,k,p);var $=P?use(p,a.offset,a.position):mse(a,p);return g.createElement(Jy,mc({ref:m,className:Ba("recharts-label",d)},k,$,{breakAll:u}),w)}Ad.displayName="Label";var hse=(t,a,r)=>{if(!t)return null;var s={viewBox:a,labelRef:r};return t===!0?g.createElement(Ad,mc({key:"label-implicit"},s)):Eo(t)?g.createElement(Ad,mc({key:"label-implicit",value:t},s)):g.isValidElement(t)?t.type===Ad?g.cloneElement(t,es({key:"label-implicit"},s)):g.createElement(Ad,mc({key:"label-implicit",content:t},s)):rw(t)?g.createElement(Ad,mc({key:"label-implicit",content:t},s)):t&&typeof t=="object"?g.createElement(Ad,mc({},t,{key:"label-implicit"},s)):null};function fse(t){var{label:a}=t,r=QO();return hse(a,r)||null}var y2={},b2={},SA;function pse(){return SA||(SA=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return r[r.length-1]}t.last=a}(b2)),b2}var v2={},_A;function gse(){return _A||(_A=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=a}(v2)),v2}var AA;function yse(){return AA||(AA=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=pse(),r=gse(),s=BN();function n(i){if(s.isArrayLike(i))return a.last(r.toArray(i))}t.last=n}(y2)),y2}var j2,kA;function bse(){return kA||(kA=1,j2=yse().last),j2}var vse=bse();const jse=Po(vse);var Nse=["valueAccessor"],wse=["dataKey","clockWise","id","textBreakAll"];function Vg(){return Vg=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Vg.apply(null,arguments)}function CA(t,a){if(t==null)return{};var r,s,n=Sse(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Sse(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var _se=t=>Array.isArray(t.value)?jse(t.value):t.value,tD=g.createContext(void 0),aD=tD.Provider,rD=g.createContext(void 0),Ase=rD.Provider;function kse(){return g.useContext(tD)}function Cse(){return g.useContext(rD)}function tg(t){var{valueAccessor:a=_se}=t,r=CA(t,Nse),{dataKey:s,clockWise:n,id:i,textBreakAll:o}=r,d=CA(r,wse),u=kse(),m=Cse(),x=u||m;return!x||!x.length?null:g.createElement(nn,{className:"recharts-label-list"},x.map((f,b)=>{var p,v=Cr(s)?a(f,b):sr(f&&f.payload,s),j=Cr(i)?{}:{id:"".concat(i,"-").concat(b)};return g.createElement(Ad,Vg({},Ar(f,!0),d,j,{fill:(p=r.fill)!==null&&p!==void 0?p:f.fill,parentViewBox:f.parentViewBox,value:v,textBreakAll:o,viewBox:f.viewBox,key:"label-".concat(b),index:b}))}))}tg.displayName="LabelList";function sw(t){var{label:a}=t;return a?a===!0?g.createElement(tg,{key:"labelList-implicit"}):g.isValidElement(a)||rw(a)?g.createElement(tg,{key:"labelList-implicit",content:a}):typeof a=="object"?g.createElement(tg,Vg({key:"labelList-implicit"},a,{type:String(a.type)})):null:null}function tN(){return tN=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},tN.apply(null,arguments)}var sD=t=>{var{cx:a,cy:r,r:s,className:n}=t,i=Ba("recharts-dot",n);return a===+a&&r===+r&&s===+s?g.createElement("circle",tN({},Ec(t),MN(t),{className:i,cx:a,cy:r,r:s})):null},nD=t=>t.graphicalItems.polarItems,Ese=We([Tr,i0],P5),nw=We([nD,ns,Ese],O5),Tse=We([nw],D5),iw=We([Tse,v5],L5),Pse=We([iw,ns,nw],R5),Ose=We([iw,ns,nw],(t,a,r)=>r.length>0?t.flatMap(s=>r.flatMap(n=>{var i,o=sr(s,(i=a.dataKey)!==null&&i!==void 0?i:n.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):a?.dataKey!=null?t.map(s=>({value:sr(s,a.dataKey),errorDomain:[]})):t.map(s=>({value:s,errorDomain:[]}))),EA=()=>{},Dse=We([ns,oO,EA,Ose,EA,Ea,Tr],F5),iD=We([ns,Ea,iw,Pse,n0,Tr,Dse],I5),Lse=We([iD,ns,Kx],q5);We([ns,iD,Lse,Tr],H5);var Mse={radiusAxis:{},angleAxis:{}},lD=Di({name:"polarAxis",initialState:Mse,reducers:{addRadiusAxis(t,a){t.radiusAxis[a.payload.id]=a.payload},removeRadiusAxis(t,a){delete t.radiusAxis[a.payload.id]},addAngleAxis(t,a){t.angleAxis[a.payload.id]=a.payload},removeAngleAxis(t,a){delete t.angleAxis[a.payload.id]}}}),{addRadiusAxis:Nue,removeRadiusAxis:wue,addAngleAxis:Sue,removeAngleAxis:_ue}=lD.actions,Rse=lD.reducer;function TA(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function PA(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?TA(Object(r),!0).forEach(function(s){$se(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TA(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function $se(t,a,r){return(a=Fse(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Fse(t){var a=Ise(t,"string");return typeof a=="symbol"?a:a+""}function Ise(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var Bse=(t,a)=>a,lw=We([nD,Bse],(t,a)=>t.filter(r=>r.type==="pie").find(r=>r.id===a)),zse=[],ow=(t,a,r)=>r?.length===0?zse:r,oD=We([v5,lw,ow],(t,a,r)=>{var{chartData:s}=t;if(a!=null){var n;if(a?.data!=null&&a.data.length>0?n=a.data:n=s,(!n||!n.length)&&r!=null&&(n=r.map(i=>PA(PA({},a.presentationProps),i.props))),n!=null)return n}}),qse=We([oD,lw,ow],(t,a,r)=>{if(!(t==null||a==null))return t.map((s,n)=>{var i,o=sr(s,a.nameKey,a.name),d;return r!=null&&(i=r[n])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?d=r[n].props.fill:typeof s=="object"&&s!=null&&"fill"in s?d=s.fill:d=a.fill,{value:Ux(o,a.dataKey),color:d,payload:s,type:a.legendType}})}),Use=We([oD,lw,ow,Ss],(t,a,r,s)=>{if(!(a==null||t==null))return Bne({offset:s,pieSettings:a,displayedData:t,cells:r})}),N2={},OA;function Hse(){return OA||(OA=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const n=r[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${n}]`}let s=r;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(r)===s}t.isPlainObject=a}(N2)),N2}var w2,DA;function Yse(){return DA||(DA=1,w2=Hse().isPlainObject),w2}var Gse=Yse();const Vse=Po(Gse);function LA(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function MA(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?LA(Object(r),!0).forEach(function(s){Wse(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LA(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Wse(t,a,r){return(a=Kse(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Kse(t){var a=Xse(t,"string");return typeof a=="symbol"?a:a+""}function Xse(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function Wg(){return Wg=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Wg.apply(null,arguments)}var RA=(t,a,r,s,n)=>{var i=r-s,o;return o="M ".concat(t,",").concat(a),o+="L ".concat(t+r,",").concat(a),o+="L ".concat(t+r-i/2,",").concat(a+n),o+="L ".concat(t+r-i/2-s,",").concat(a+n),o+="L ".concat(t,",").concat(a," Z"),o},Jse={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Zse=t=>{var a=ai(t,Jse),{x:r,y:s,upperWidth:n,lowerWidth:i,height:o,className:d}=a,{animationEasing:u,animationDuration:m,animationBegin:x,isUpdateAnimationActive:f}=a,b=g.useRef(),[p,v]=g.useState(-1),j=g.useRef(n),N=g.useRef(i),w=g.useRef(o),P=g.useRef(r),k=g.useRef(s),$=e0(t,"trapezoid-");if(g.useEffect(()=>{if(b.current&&b.current.getTotalLength)try{var V=b.current.getTotalLength();V&&v(V)}catch{}},[]),r!==+r||s!==+s||n!==+n||i!==+i||o!==+o||n===0&&i===0||o===0)return null;var O=Ba("recharts-trapezoid",d);if(!f)return g.createElement("g",null,g.createElement("path",Wg({},Ar(a,!0),{className:O,d:RA(r,s,n,i,o)})));var L=j.current,_=N.current,E=w.current,A=P.current,z=k.current,M="0px ".concat(p===-1?1:p,"px"),D="".concat(p,"px 0px"),I=OT(["strokeDasharray"],m,u);return g.createElement(Qf,{animationId:$,key:$,canBegin:p>0,duration:m,easing:u,isActive:f,begin:x},V=>{var H=Hr(L,n,V),B=Hr(_,i,V),W=Hr(E,o,V),K=Hr(A,r,V),X=Hr(z,s,V);b.current&&(j.current=H,N.current=B,w.current=W,P.current=K,k.current=X);var Q=V>0?{transition:I,strokeDasharray:D}:{strokeDasharray:M};return g.createElement("path",Wg({},Ar(a,!0),{className:O,d:RA(K,X,H,B,W),ref:b,style:MA(MA({},Q),a.style)}))})},Qse=["option","shapeType","propTransformer","activeClassName","isActive"];function ene(t,a){if(t==null)return{};var r,s,n=tne(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tne(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function $A(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Kg(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?$A(Object(r),!0).forEach(function(s){ane(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$A(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function ane(t,a,r){return(a=rne(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function rne(t){var a=sne(t,"string");return typeof a=="symbol"?a:a+""}function sne(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function nne(t,a){return Kg(Kg({},a),t)}function ine(t,a){return t==="symbols"}function FA(t){var{shapeType:a,elementProps:r}=t;switch(a){case"rectangle":return g.createElement(RT,r);case"trapezoid":return g.createElement(Zse,r);case"sector":return g.createElement(IT,r);case"symbols":if(ine(a))return g.createElement(ME,r);break;default:return null}}function lne(t){return g.isValidElement(t)?t.props:t}function cD(t){var{option:a,shapeType:r,propTransformer:s=nne,activeClassName:n="recharts-active-shape",isActive:i}=t,o=ene(t,Qse),d;if(g.isValidElement(a))d=g.cloneElement(a,Kg(Kg({},o),lne(a)));else if(typeof a=="function")d=a(o);else if(Vse(a)&&typeof a!="boolean"){var u=s(a,o);d=g.createElement(FA,{shapeType:r,elementProps:u})}else{var m=o;d=g.createElement(FA,{shapeType:r,elementProps:m})}return i?g.createElement(nn,{className:n},d):d}var cw=(t,a)=>{var r=ss();return(s,n)=>i=>{t?.(s,n,i),r(SO({activeIndex:String(n),activeDataKey:a,activeCoordinate:s.tooltipPosition}))}},dw=t=>{var a=ss();return(r,s)=>n=>{t?.(r,s,n),a(Ute())}},uw=(t,a)=>{var r=ss();return(s,n)=>i=>{t?.(s,n,i),r(Hte({activeIndex:String(n),activeDataKey:a,activeCoordinate:s.tooltipPosition}))}};function mw(t){var{fn:a,args:r}=t,s=ss(),n=ti();return g.useEffect(()=>{if(!n){var i=a(r);return s(Bte(i)),()=>{s(zte(i))}}},[a,r,s,n]),null}var dD=()=>{};function uD(t){var{legendPayload:a}=t,r=ss(),s=ti();return g.useEffect(()=>s?dD:(r(ET(a)),()=>{r(TT(a))}),[r,s,a]),null}function one(t){var{legendPayload:a}=t,r=ss(),s=Lt(Ea);return g.useEffect(()=>s!=="centric"&&s!=="radial"?dD:(r(ET(a)),()=>{r(TT(a))}),[r,s,a]),null}var S2,cne=()=>{var[t]=g.useState(()=>Af("uid-"));return t},dne=(S2=dk.useId)!==null&&S2!==void 0?S2:cne;function une(t,a){var r=dne();return a||(t?"".concat(t,"-").concat(r):r)}var mne=g.createContext(void 0),xw=t=>{var{id:a,type:r,children:s}=t,n=une("recharts-".concat(r),a);return g.createElement(mne.Provider,{value:n},s(n))},xne={cartesianItems:[],polarItems:[]},mD=Di({name:"graphicalItems",initialState:xne,reducers:{addCartesianGraphicalItem(t,a){t.cartesianItems.push(a.payload)},replaceCartesianGraphicalItem(t,a){var{prev:r,next:s}=a.payload,n=fc(t).cartesianItems.indexOf(r);n>-1&&(t.cartesianItems[n]=s)},removeCartesianGraphicalItem(t,a){var r=fc(t).cartesianItems.indexOf(a.payload);r>-1&&t.cartesianItems.splice(r,1)},addPolarGraphicalItem(t,a){t.polarItems.push(a.payload)},removePolarGraphicalItem(t,a){var r=fc(t).polarItems.indexOf(a.payload);r>-1&&t.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:hne,replaceCartesianGraphicalItem:fne,removeCartesianGraphicalItem:pne,addPolarGraphicalItem:gne,removePolarGraphicalItem:yne}=mD.actions,bne=mD.reducer;function xD(t){var a=ss(),r=g.useRef(null);return g.useEffect(()=>{r.current===null?a(hne(t)):r.current!==t&&a(fne({prev:r.current,next:t})),r.current=t},[a,t]),g.useEffect(()=>()=>{r.current&&(a(pne(r.current)),r.current=null)},[a]),null}function vne(t){var a=ss();return g.useEffect(()=>(a(gne(t)),()=>{a(yne(t))}),[a,t]),null}var jne=["onMouseEnter","onClick","onMouseLeave"],Nne=["id"],wne=["id"];function hw(t,a){if(t==null)return{};var r,s,n=Sne(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Sne(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function IA(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function _r(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?IA(Object(r),!0).forEach(function(s){_ne(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IA(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function _ne(t,a,r){return(a=Ane(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Ane(t){var a=kne(t,"string");return typeof a=="symbol"?a:a+""}function kne(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function Ud(){return Ud=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ud.apply(null,arguments)}function Cne(t){var a=g.useMemo(()=>RN(t.children,qd),[t.children]),r=Lt(s=>qse(s,t.id,a));return r==null?null:g.createElement(one,{legendPayload:r})}function Ene(t){var{dataKey:a,nameKey:r,sectors:s,stroke:n,strokeWidth:i,fill:o,name:d,hide:u,tooltipType:m}=t;return{dataDefinedOnItem:s.map(x=>x.tooltipPayload),positions:s.map(x=>x.tooltipPosition),settings:{stroke:n,strokeWidth:i,fill:o,dataKey:a,nameKey:r,name:Ux(d,a),hide:u,type:m,color:o,unit:""}}}var Tne=(t,a)=>t>a?"start":t<a?"end":"middle",Pne=(t,a,r)=>gn(typeof a=="function"?a(t):a,r,r*.8),One=(t,a,r)=>{var{top:s,left:n,width:i,height:o}=a,d=yT(i,o),u=n+gn(t.cx,i,i/2),m=s+gn(t.cy,o,o/2),x=gn(t.innerRadius,d,0),f=Pne(r,t.outerRadius,d),b=t.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:u,cy:m,innerRadius:x,outerRadius:f,maxRadius:b}},Dne=(t,a)=>{var r=Fs(a-t),s=Math.min(Math.abs(a-t),360);return r*s};function Lne(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var Mne=(t,a)=>{if(g.isValidElement(t))return g.cloneElement(t,a);if(typeof t=="function")return t(a);var r=Ba("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return g.createElement(XN,Ud({},a,{type:"linear",className:r}))},Rne=(t,a,r)=>{if(g.isValidElement(t))return g.cloneElement(t,a);var s=r;if(typeof t=="function"&&(s=t(a),g.isValidElement(s)))return s;var n=Ba("recharts-pie-label-text",Lne(t));return g.createElement(Jy,Ud({},a,{alignmentBaseline:"middle",className:n}),s)};function $ne(t){var{sectors:a,props:r,showLabels:s}=t,{label:n,labelLine:i,dataKey:o}=r;if(!s||!n||!a)return null;var d=Ec(r),u=Ar(n,!1),m=Ar(i,!1),x=typeof n=="object"&&"offsetRadius"in n&&typeof n.offsetRadius=="number"&&n.offsetRadius||20,f=a.map((b,p)=>{var v=(b.startAngle+b.endAngle)/2,j=xs(b.cx,b.cy,b.outerRadius+x,v),N=_r(_r(_r(_r({},d),b),{},{stroke:"none"},u),{},{index:p,textAnchor:Tne(j.x,b.cx)},j),w=_r(_r(_r(_r({},d),b),{},{fill:"none",stroke:b.fill},m),{},{index:p,points:[xs(b.cx,b.cy,b.outerRadius,v),j],key:"line"});return g.createElement(nn,{key:"label-".concat(b.startAngle,"-").concat(b.endAngle,"-").concat(b.midAngle,"-").concat(p)},i&&Mne(i,w),Rne(n,N,sr(b,o)))});return g.createElement(nn,{className:"recharts-pie-labels"},f)}function Fne(t){var{sectors:a,props:r,showLabels:s}=t,{label:n}=r;return typeof n=="object"&&n!=null&&"position"in n?g.createElement(sw,{label:r.label}):g.createElement($ne,{sectors:a,props:r,showLabels:s})}function Ine(t){var{sectors:a,activeShape:r,inactiveShape:s,allOtherPieProps:n}=t,i=Lt(zd),{onMouseEnter:o,onClick:d,onMouseLeave:u}=n,m=hw(n,jne),x=cw(o,n.dataKey),f=dw(u),b=uw(d,n.dataKey);return a==null||a.length===0?null:g.createElement(g.Fragment,null,a.map((p,v)=>{if(p?.startAngle===0&&p?.endAngle===0&&a.length!==1)return null;var j=r&&String(v)===i,N=i?s:null,w=j?r:N,P=_r(_r({},p),{},{stroke:p.stroke,tabIndex:-1,[wT]:v,[ST]:n.dataKey});return g.createElement(nn,Ud({tabIndex:-1,className:"recharts-pie-sector"},by(m,p,v),{onMouseEnter:x(p,v),onMouseLeave:f(p,v),onClick:b(p,v),key:"sector-".concat(p?.startAngle,"-").concat(p?.endAngle,"-").concat(p.midAngle,"-").concat(v)}),g.createElement(cD,Ud({option:w,isActive:j,shapeType:"sector"},P)))}))}function Bne(t){var a,{pieSettings:r,displayedData:s,cells:n,offset:i}=t,{cornerRadius:o,startAngle:d,endAngle:u,dataKey:m,nameKey:x,tooltipType:f}=r,b=Math.abs(r.minAngle),p=Dne(d,u),v=Math.abs(p),j=s.length<=1?0:(a=r.paddingAngle)!==null&&a!==void 0?a:0,N=s.filter(L=>sr(L,m,0)!==0).length,w=(v>=360?N:N-1)*j,P=v-N*b-w,k=s.reduce((L,_)=>{var E=sr(_,m,0);return L+(zt(E)?E:0)},0),$;if(k>0){var O;$=s.map((L,_)=>{var E=sr(L,m,0),A=sr(L,x,_),z=One(r,i,L),M=(zt(E)?E:0)/k,D,I=_r(_r({},L),n&&n[_]&&n[_].props);_?D=O.endAngle+Fs(p)*j*(E!==0?1:0):D=d;var V=D+Fs(p)*((E!==0?b:0)+M*P),H=(D+V)/2,B=(z.innerRadius+z.outerRadius)/2,W=[{name:A,value:E,payload:I,dataKey:m,type:f}],K=xs(z.cx,z.cy,B,H);return O=_r(_r(_r(_r({},r.presentationProps),{},{percent:M,cornerRadius:o,name:A,tooltipPayload:W,midAngle:H,middleRadius:B,tooltipPosition:K},I),z),{},{value:sr(L,m),startAngle:D,endAngle:V,payload:I,paddingAngle:Fs(p)*j}),O})}return $}function zne(t){var{showLabels:a,sectors:r,children:s}=t,n=g.useMemo(()=>!a||!r?[]:r.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[r,a]);return g.createElement(Ase,{value:a?n:void 0},s)}function qne(t){var{props:a,previousSectorsRef:r}=t,{sectors:s,isAnimationActive:n,animationBegin:i,animationDuration:o,animationEasing:d,activeShape:u,inactiveShape:m,onAnimationStart:x,onAnimationEnd:f}=a,b=e0(a,"recharts-pie-"),p=r.current,[v,j]=g.useState(!1),N=g.useCallback(()=>{typeof f=="function"&&f(),j(!1)},[f]),w=g.useCallback(()=>{typeof x=="function"&&x(),j(!0)},[x]);return g.createElement(zne,{showLabels:!v,sectors:s},g.createElement(Qf,{animationId:b,begin:i,duration:o,isActive:n,easing:d,onAnimationStart:w,onAnimationEnd:N,key:b},P=>{var k=[],$=s&&s[0],O=$?.startAngle;return s?.forEach((L,_)=>{var E=p&&p[_],A=_>0?sm(L,"paddingAngle",0):0;if(E){var z=Hr(E.endAngle-E.startAngle,L.endAngle-L.startAngle,P),M=_r(_r({},L),{},{startAngle:O+A,endAngle:O+z+A});k.push(M),O=M.endAngle}else{var{endAngle:D,startAngle:I}=L,V=Hr(0,D-I,P),H=_r(_r({},L),{},{startAngle:O+A,endAngle:O+V+A});k.push(H),O=H.endAngle}}),r.current=k,g.createElement(nn,null,g.createElement(Ine,{sectors:k,activeShape:u,inactiveShape:m,allOtherPieProps:a}))}),g.createElement(Fne,{showLabels:!v,sectors:s,props:a}),a.children)}var Une={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!mm.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function Hne(t){var{id:a}=t,r=hw(t,Nne),{hide:s,className:n,rootTabIndex:i}=t,o=g.useMemo(()=>RN(t.children,qd),[t.children]),d=Lt(x=>Use(x,a,o)),u=g.useRef(null),m=Ba("recharts-pie",n);return s||d==null?(u.current=null,g.createElement(nn,{tabIndex:i,className:m})):g.createElement(g.Fragment,null,g.createElement(mw,{fn:Ene,args:_r(_r({},t),{},{sectors:d})}),g.createElement(nn,{tabIndex:i,className:m},g.createElement(qne,{props:_r(_r({},r),{},{sectors:d}),previousSectorsRef:u})))}function $f(t){var a=ai(t,Une),{id:r}=a,s=hw(a,wne),n=Ec(s);return g.createElement(xw,{id:r,type:"pie"},i=>g.createElement(g.Fragment,null,g.createElement(vne,{type:"pie",id:i,data:s.data,dataKey:s.dataKey,hide:s.hide,angleAxisId:0,radiusAxisId:0,name:s.name,nameKey:s.nameKey,tooltipType:s.tooltipType,legendType:s.legendType,fill:s.fill,cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,paddingAngle:s.paddingAngle,minAngle:s.minAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius,cornerRadius:s.cornerRadius,presentationProps:n}),g.createElement(Cne,Ud({},s,{id:i})),g.createElement(Hne,Ud({},s,{id:i}))))}$f.displayName="Pie";function BA(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function zA(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?BA(Object(r),!0).forEach(function(s){Yne(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BA(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Yne(t,a,r){return(a=Gne(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Gne(t){var a=Vne(t,"string");return typeof a=="symbol"?a:a+""}function Vne(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var Wne={xAxis:{},yAxis:{},zAxis:{}},hD=Di({name:"cartesianAxis",initialState:Wne,reducers:{addXAxis(t,a){t.xAxis[a.payload.id]=a.payload},removeXAxis(t,a){delete t.xAxis[a.payload.id]},addYAxis(t,a){t.yAxis[a.payload.id]=a.payload},removeYAxis(t,a){delete t.yAxis[a.payload.id]},addZAxis(t,a){t.zAxis[a.payload.id]=a.payload},removeZAxis(t,a){delete t.zAxis[a.payload.id]},updateYAxisWidth(t,a){var{id:r,width:s}=a.payload;t.yAxis[r]&&(t.yAxis[r]=zA(zA({},t.yAxis[r]),{},{width:s}))}}}),{addXAxis:Kne,removeXAxis:Xne,addYAxis:Jne,removeYAxis:Zne,addZAxis:Aue,removeZAxis:kue,updateYAxisWidth:Qne}=hD.actions,eie=hD.reducer,tie=We([Ss],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),aie=We([tie,Tc,Pc],(t,a,r)=>{if(!(!t||a==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,a-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),fw=()=>Lt(aie),rie=()=>Lt(Tae);function qA(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function UA(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?qA(Object(r),!0).forEach(function(s){sie(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qA(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function sie(t,a,r){return(a=nie(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function nie(t){var a=iie(t,"string");return typeof a=="symbol"?a:a+""}function iie(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var lie=t=>{var{point:a,childIndex:r,mainColor:s,activeDot:n,dataKey:i}=t;if(n===!1||a.x==null||a.y==null)return null;var o=UA(UA({index:r,dataKey:i,cx:a.x,cy:a.y,r:4,fill:s??"none",strokeWidth:2,stroke:"#fff",payload:a.payload,value:a.value},Ar(n,!1)),MN(n)),d;return g.isValidElement(n)?d=g.cloneElement(n,o):typeof n=="function"?d=n(o):d=g.createElement(sD,o),g.createElement(nn,{className:"recharts-active-dot"},d)};function oie(t){var{points:a,mainColor:r,activeDot:s,itemDataKey:n}=t,i=Lt(zd),o=rie();if(a==null||o==null)return null;var d=a.find(u=>o.includes(u.payload));return Cr(d)?null:lie({point:d,childIndex:Number(i),mainColor:r,dataKey:n,activeDot:s})}var cie="Invariant failed";function die(t,a){throw new Error(cie)}var uie=["x","y"];function aN(){return aN=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},aN.apply(null,arguments)}function HA(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function rf(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?HA(Object(r),!0).forEach(function(s){mie(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HA(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function mie(t,a,r){return(a=xie(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function xie(t){var a=hie(t,"string");return typeof a=="symbol"?a:a+""}function hie(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function fie(t,a){if(t==null)return{};var r,s,n=pie(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pie(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function gie(t,a){var{x:r,y:s}=t,n=fie(t,uie),i="".concat(r),o=parseInt(i,10),d="".concat(s),u=parseInt(d,10),m="".concat(a.height||n.height),x=parseInt(m,10),f="".concat(a.width||n.width),b=parseInt(f,10);return rf(rf(rf(rf(rf({},a),n),o?{x:o}:{}),u?{y:u}:{}),{},{height:x,width:b,name:a.name,radius:a.radius})}function pw(t){return g.createElement(cD,aN({shapeType:"rectangle",propTransformer:gie,activeClassName:"recharts-active-bar"},t))}var yie=function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(s,n)=>{if(zt(a))return a;var i=zt(s)||Cr(s);return i?a(s,n):(i||die(),r)}},bie={},fD=Di({name:"errorBars",initialState:bie,reducers:{addErrorBar:(t,a)=>{var{itemId:r,errorBar:s}=a.payload;t[r]||(t[r]=[]),t[r].push(s)},replaceErrorBar:(t,a)=>{var{itemId:r,prev:s,next:n}=a.payload;t[r]&&(t[r]=t[r].map(i=>i.dataKey===s.dataKey&&i.direction===s.direction?n:i))},removeErrorBar:(t,a)=>{var{itemId:r,errorBar:s}=a.payload;t[r]&&(t[r]=t[r].filter(n=>n.dataKey!==s.dataKey||n.direction!==s.direction))}}}),{addErrorBar:Cue,replaceErrorBar:Eue,removeErrorBar:Tue}=fD.actions,vie=fD.reducer,jie=["children"];function Nie(t,a){if(t==null)return{};var r,s,n=wie(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function wie(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var Sie={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},_ie=g.createContext(Sie);function pD(t){var{children:a}=t,r=Nie(t,jie);return g.createElement(_ie.Provider,{value:r},a)}function gw(t,a){var r,s,n=Lt(m=>Kd(m,t)),i=Lt(m=>Xd(m,a)),o=(r=n?.allowDataOverflow)!==null&&r!==void 0?r:ji.allowDataOverflow,d=(s=i?.allowDataOverflow)!==null&&s!==void 0?s:Ni.allowDataOverflow,u=o||d;return{needClip:u,needClipX:o,needClipY:d}}function gD(t){var{xAxisId:a,yAxisId:r,clipPathId:s}=t,n=fw(),{needClipX:i,needClipY:o,needClip:d}=gw(a,r);if(!d)return null;var{x:u,y:m,width:x,height:f}=n;return g.createElement("clipPath",{id:"clipPath-".concat(s)},g.createElement("rect",{x:i?u:u-x/2,y:o?m:m-f/2,width:i?x:x*2,height:o?f:f*2}))}var Aie=["onMouseEnter","onMouseLeave","onClick"],kie=["value","background","tooltipPosition"],Cie=["id"],Eie=["onMouseEnter","onClick","onMouseLeave"];function Hd(){return Hd=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Hd.apply(null,arguments)}function YA(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Pn(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?YA(Object(r),!0).forEach(function(s){Tie(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YA(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Tie(t,a,r){return(a=Pie(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Pie(t){var a=Oie(t,"string");return typeof a=="symbol"?a:a+""}function Oie(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function Xg(t,a){if(t==null)return{};var r,s,n=Die(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Die(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var Lie=t=>{var{dataKey:a,name:r,fill:s,legendType:n,hide:i}=t;return[{inactive:i,dataKey:a,type:n,color:s,value:Ux(r,a),payload:t}]};function Mie(t){var{dataKey:a,stroke:r,strokeWidth:s,fill:n,name:i,hide:o,unit:d}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:s,fill:n,dataKey:a,nameKey:void 0,name:Ux(i,a),hide:o,type:t.tooltipType,color:t.fill,unit:d}}}function Rie(t){var a=Lt(zd),{data:r,dataKey:s,background:n,allOtherBarProps:i}=t,{onMouseEnter:o,onMouseLeave:d,onClick:u}=i,m=Xg(i,Aie),x=cw(o,s),f=dw(d),b=uw(u,s);if(!n||r==null)return null;var p=Ar(n,!1);return g.createElement(g.Fragment,null,r.map((v,j)=>{var{value:N,background:w,tooltipPosition:P}=v,k=Xg(v,kie);if(!w)return null;var $=x(v,j),O=f(v,j),L=b(v,j),_=Pn(Pn(Pn(Pn(Pn({option:n,isActive:String(j)===a},k),{},{fill:"#eee"},w),p),by(m,v,j)),{},{onMouseEnter:$,onMouseLeave:O,onClick:L,dataKey:s,index:j,className:"recharts-bar-background-rectangle"});return g.createElement(pw,Hd({key:"background-bar-".concat(j)},_))}))}function $ie(t){var{showLabels:a,children:r,rects:s}=t,n=s?.map(i=>{var o={x:i.x,y:i.y,width:i.width,height:i.height};return Pn(Pn({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return g.createElement(aD,{value:a?n:void 0},r)}function Fie(t){var{shape:a,activeBar:r,baseProps:s,entry:n,index:i,dataKey:o}=t,d=Lt(zd),u=Lt($O),m=r&&String(i)===d&&(u==null||o===u),x=m?r:a;return g.createElement(pw,Hd({},s,n,{isActive:m,option:x,index:i,dataKey:o}))}function Iie(t){var{shape:a,baseProps:r,entry:s,index:n,dataKey:i}=t;return g.createElement(pw,Hd({},r,s,{isActive:!1,option:a,index:n,dataKey:i}))}function Bie(t){var{data:a,props:r}=t,s=Ec(r),{id:n}=s,i=Xg(s,Cie),{shape:o,dataKey:d,activeBar:u}=r,{onMouseEnter:m,onClick:x,onMouseLeave:f}=r,b=Xg(r,Eie),p=cw(m,d),v=dw(f),j=uw(x,d);return a?g.createElement(g.Fragment,null,a.map((N,w)=>g.createElement(nn,Hd({className:"recharts-bar-rectangle"},by(b,N,w),{onMouseEnter:p(N,w),onMouseLeave:v(N,w),onClick:j(N,w),key:"rectangle-".concat(N?.x,"-").concat(N?.y,"-").concat(N?.value,"-").concat(w)}),u?g.createElement(Fie,{shape:o,activeBar:u,baseProps:i,entry:N,index:w,dataKey:d}):g.createElement(Iie,{shape:o,baseProps:i,entry:N,index:w,dataKey:d})))):null}function zie(t){var{props:a,previousRectanglesRef:r}=t,{data:s,layout:n,isAnimationActive:i,animationBegin:o,animationDuration:d,animationEasing:u,onAnimationEnd:m,onAnimationStart:x}=a,f=r.current,b=e0(a,"recharts-bar-"),[p,v]=g.useState(!1),j=!p,N=g.useCallback(()=>{typeof m=="function"&&m(),v(!1)},[m]),w=g.useCallback(()=>{typeof x=="function"&&x(),v(!0)},[x]);return g.createElement($ie,{showLabels:j,rects:s},g.createElement(Qf,{animationId:b,begin:o,duration:d,isActive:i,easing:u,onAnimationEnd:N,onAnimationStart:w,key:b},P=>{var k=P===1?s:s?.map(($,O)=>{var L=f&&f[O];if(L)return Pn(Pn({},$),{},{x:Hr(L.x,$.x,P),y:Hr(L.y,$.y,P),width:Hr(L.width,$.width,P),height:Hr(L.height,$.height,P)});if(n==="horizontal"){var _=Hr(0,$.height,P);return Pn(Pn({},$),{},{y:$.y+$.height-_,height:_})}var E=Hr(0,$.width,P);return Pn(Pn({},$),{},{width:E})});return P>0&&(r.current=k??null),k==null?null:g.createElement(nn,null,g.createElement(Bie,{props:a,data:k}))}),g.createElement(sw,{label:a.label}),a.children)}function qie(t){var a=g.useRef(null);return g.createElement(zie,{previousRectanglesRef:a,props:t})}var yD=0,Uie=(t,a)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:sr(t,a)}};class Hie extends g.PureComponent{render(){var{hide:a,data:r,dataKey:s,className:n,xAxisId:i,yAxisId:o,needClip:d,background:u,id:m}=this.props;if(a||r==null)return null;var x=Ba("recharts-bar",n),f=m;return g.createElement(nn,{className:x,id:m},d&&g.createElement("defs",null,g.createElement(gD,{clipPathId:f,xAxisId:i,yAxisId:o})),g.createElement(nn,{className:"recharts-bar-rectangles",clipPath:d?"url(#clipPath-".concat(f,")"):void 0},g.createElement(Rie,{data:r,dataKey:s,background:u,allOtherBarProps:this.props}),g.createElement(qie,this.props)))}}var Yie={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!mm.isSsr,legendType:"rect",minPointSize:yD,xAxisId:0,yAxisId:0};function Gie(t){var{xAxisId:a,yAxisId:r,hide:s,legendType:n,minPointSize:i,activeBar:o,animationBegin:d,animationDuration:u,animationEasing:m,isAnimationActive:x}=t,{needClip:f}=gw(a,r),b=Dy(),p=ti(),v=RN(t.children,qd),j=Lt(P=>ble(P,a,r,p,t.id,v));if(b!=="vertical"&&b!=="horizontal")return null;var N,w=j?.[0];return w==null||w.height==null||w.width==null?N=0:N=b==="vertical"?w.height/2:w.width/2,g.createElement(pD,{xAxisId:a,yAxisId:r,data:j,dataPointFormatter:Uie,errorBarOffset:N},g.createElement(Hie,Hd({},t,{layout:b,needClip:f,data:j,xAxisId:a,yAxisId:r,hide:s,legendType:n,minPointSize:i,activeBar:o,animationBegin:d,animationDuration:u,animationEasing:m,isAnimationActive:x})))}function Vie(t){var{layout:a,barSettings:{dataKey:r,minPointSize:s},pos:n,bandSize:i,xAxis:o,yAxis:d,xAxisTicks:u,yAxisTicks:m,stackedData:x,displayedData:f,offset:b,cells:p,parentViewBox:v}=t,j=a==="horizontal"?d:o,N=x?j.scale.domain():null,w=vX({numericAxis:j});return f.map((P,k)=>{var $,O,L,_,E,A;x?$=hX(x[k],N):($=sr(P,r),Array.isArray($)||($=[w,$]));var z=yie(s,yD)($[1],k);if(a==="horizontal"){var M,[D,I]=[d.scale($[0]),d.scale($[1])];O=O8({axis:o,ticks:u,bandSize:i,offset:n.offset,entry:P,index:k}),L=(M=I??D)!==null&&M!==void 0?M:void 0,_=n.size;var V=D-I;if(E=Ei(V)?0:V,A={x:O,y:b.top,width:_,height:b.height},Math.abs(z)>0&&Math.abs(E)<Math.abs(z)){var H=Fs(E||z)*(Math.abs(z)-Math.abs(E));L-=H,E+=H}}else{var[B,W]=[o.scale($[0]),o.scale($[1])];if(O=B,L=O8({axis:d,ticks:m,bandSize:i,offset:n.offset,entry:P,index:k}),_=W-B,E=n.size,A={x:b.left,y:L,width:b.width,height:E},Math.abs(z)>0&&Math.abs(_)<Math.abs(z)){var K=Fs(_||z)*(Math.abs(z)-Math.abs(_));_+=K}}if(O==null||L==null||_==null||E==null)return null;var X=Pn(Pn({},P),{},{x:O,y:L,width:_,height:E,value:x?$:$[1],payload:P,background:A,tooltipPosition:{x:O+_/2,y:L+E/2},parentViewBox:v},p&&p[k]&&p[k].props);return X}).filter(Boolean)}function Ku(t){var a=ai(t,Yie),r=ti();return g.createElement(xw,{id:a.id,type:"bar"},s=>g.createElement(g.Fragment,null,g.createElement(uD,{legendPayload:Lie(a)}),g.createElement(mw,{fn:Mie,args:a}),g.createElement(xD,{type:"bar",id:s,data:void 0,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:0,dataKey:a.dataKey,stackId:bX(a.stackId),hide:a.hide,barSize:a.barSize,minPointSize:a.minPointSize,maxBarSize:a.maxBarSize,isPanorama:r}),g.createElement(Gie,Hd({},a,{id:s}))))}Ku.displayName="Bar";function GA(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Ip(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?GA(Object(r),!0).forEach(function(s){Wie(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GA(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Wie(t,a,r){return(a=Kie(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Kie(t){var a=Xie(t,"string");return typeof a=="symbol"?a:a+""}function Xie(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var Jie=(t,a)=>a,Zie=(t,a,r)=>r,Qie=(t,a,r,s)=>s,ele=(t,a,r,s,n)=>n,m0=We([Yy,ele],(t,a)=>t.filter(r=>r.type==="bar").find(r=>r.id===a)),tle=We([m0],t=>t?.maxBarSize),ale=(t,a,r,s,n,i)=>i,VA=(t,a,r)=>{var s=r??t;if(!Cr(s))return gn(s,a,0)},rle=We([Ea,Yy,Jie,Zie,Qie],(t,a,r,s,n)=>a.filter(i=>t==="horizontal"?i.xAxisId===r:i.yAxisId===s).filter(i=>i.isPanorama===n).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),sle=(t,a,r,s)=>{var n=Ea(t);return n==="horizontal"?Kj(t,"yAxis",r,s):Kj(t,"xAxis",a,s)},nle=(t,a,r)=>{var s=Ea(t);return s==="horizontal"?V7(t,"xAxis",a):V7(t,"yAxis",r)},ile=(t,a,r)=>{var s={},n=t.filter(Hy),i=t.filter(m=>m.stackId==null),o=n.reduce((m,x)=>(m[x.stackId]||(m[x.stackId]=[]),m[x.stackId].push(x),m),s),d=Object.entries(o).map(m=>{var[x,f]=m,b=f.map(v=>v.dataKey),p=VA(a,r,f[0].barSize);return{stackId:x,dataKeys:b,barSize:p}}),u=i.map(m=>{var x=[m.dataKey].filter(b=>b!=null),f=VA(a,r,m.barSize);return{stackId:void 0,dataKeys:x,barSize:f}});return[...d,...u]},lle=We([rle,zee,nle],ile),ole=(t,a,r,s,n)=>{var i,o,d=m0(t,a,r,s,n);if(d!=null){var u=Ea(t),m=MP(t),{maxBarSize:x}=d,f=Cr(x)?m:x,b,p;return u==="horizontal"?(b=Bd(t,"xAxis",a,s),p=Id(t,"xAxis",a,s)):(b=Bd(t,"yAxis",r,s),p=Id(t,"yAxis",r,s)),(i=(o=Ef(b,p,!0))!==null&&o!==void 0?o:f)!==null&&i!==void 0?i:0}},bD=(t,a,r,s)=>{var n=Ea(t),i,o;return n==="horizontal"?(i=Bd(t,"xAxis",a,s),o=Id(t,"xAxis",a,s)):(i=Bd(t,"yAxis",r,s),o=Id(t,"yAxis",r,s)),Ef(i,o)};function cle(t,a,r,s,n){var i=s.length;if(!(i<1)){var o=gn(t,r,0,!0),d,u=[];if(Pi(s[0].barSize)){var m=!1,x=r/i,f=s.reduce((w,P)=>w+(P.barSize||0),0);f+=(i-1)*o,f>=r&&(f-=(i-1)*o,o=0),f>=r&&x>0&&(m=!0,x*=.9,f=i*x);var b=(r-f)/2>>0,p={offset:b-o,size:0};d=s.reduce((w,P)=>{var k,$={stackId:P.stackId,dataKeys:P.dataKeys,position:{offset:p.offset+p.size+o,size:m?x:(k=P.barSize)!==null&&k!==void 0?k:0}},O=[...w,$];return p=O[O.length-1].position,O},u)}else{var v=gn(a,r,0,!0);r-2*v-(i-1)*o<=0&&(o=0);var j=(r-2*v-(i-1)*o)/i;j>1&&(j>>=0);var N=Pi(n)?Math.min(j,n):j;d=s.reduce((w,P,k)=>[...w,{stackId:P.stackId,dataKeys:P.dataKeys,position:{offset:v+(j+o)*k+(j-N)/2,size:N}}],u)}return d}}var dle=(t,a,r,s,n,i,o)=>{var d=Cr(o)?a:o,u=cle(r,s,n!==i?n:i,t,d);return n!==i&&u!=null&&(u=u.map(m=>Ip(Ip({},m),{},{position:Ip(Ip({},m.position),{},{offset:m.position.offset-n/2})}))),u},ule=We([lle,MP,Bee,RP,ole,bD,tle],dle),mle=(t,a,r,s)=>Bd(t,"xAxis",a,s),xle=(t,a,r,s)=>Bd(t,"yAxis",r,s),hle=(t,a,r,s)=>Id(t,"xAxis",a,s),fle=(t,a,r,s)=>Id(t,"yAxis",r,s),ple=We([ule,m0],(t,a)=>{if(!(t==null||a==null)){var r=t.find(s=>s.stackId===a.stackId&&a.dataKey!=null&&s.dataKeys.includes(a.dataKey));if(r!=null)return r.position}}),gle=(t,a)=>{var r=E5(a);if(!(!t||r==null||a==null)){var{stackId:s}=a;if(s!=null){var n=t[s];if(n){var{stackedData:i}=n;if(i)return i.find(o=>o.key===r)}}}},yle=We([sle,m0],gle),ble=We([Ss,WN,mle,xle,hle,fle,ple,Ea,By,bD,yle,m0,ale],(t,a,r,s,n,i,o,d,u,m,x,f,b)=>{var{chartData:p,dataStartIndex:v,dataEndIndex:j}=u;if(!(f==null||o==null||a==null||d!=="horizontal"&&d!=="vertical"||r==null||s==null||n==null||i==null||m==null)){var{data:N}=f,w;if(N!=null&&N.length>0?w=N:w=p?.slice(v,j+1),w!=null)return Vie({layout:d,barSettings:f,pos:o,parentViewBox:a,bandSize:m,xAxis:r,yAxis:s,xAxisTicks:n,yAxisTicks:i,stackedData:x,displayedData:w,offset:t,cells:b})}}),vD=t=>{var{chartData:a}=t,r=ss(),s=ti();return g.useEffect(()=>s?()=>{}:(r(rA(a)),()=>{r(rA(void 0))}),[a,r,s]),null},WA={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},jD=Di({name:"brush",initialState:WA,reducers:{setBrushSettings(t,a){return a.payload==null?WA:a.payload}}}),{setBrushSettings:Pue}=jD.actions,vle=jD.reducer;function jle(t,a,r){return(a=Nle(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Nle(t){var a=wle(t,"string");return typeof a=="symbol"?a:a+""}function wle(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}class yw{static create(a){return new yw(a)}constructor(a){this.scale=a}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(a){var{bandAware:r,position:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a!==void 0){if(s)switch(s){case"start":return this.scale(a);case"middle":{var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+n}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(a)+i}default:return this.scale(a)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+o}return this.scale(a)}}isInRange(a){var r=this.range(),s=r[0],n=r[r.length-1];return s<=n?a>=s&&a<=n:a>=n&&a<=s}}jle(yw,"EPS",1e-4);function Sle(t){return(t%180+180)%180}var _le=function(a){var{width:r,height:s}=a,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Sle(n),o=i*Math.PI/180,d=Math.atan(s/r),u=o>d&&o<Math.PI-d?s/Math.sin(o):r/Math.cos(o);return Math.abs(u)},Ale={dots:[],areas:[],lines:[]},ND=Di({name:"referenceElements",initialState:Ale,reducers:{addDot:(t,a)=>{t.dots.push(a.payload)},removeDot:(t,a)=>{var r=fc(t).dots.findIndex(s=>s===a.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,a)=>{t.areas.push(a.payload)},removeArea:(t,a)=>{var r=fc(t).areas.findIndex(s=>s===a.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,a)=>{t.lines.push(a.payload)},removeLine:(t,a)=>{var r=fc(t).lines.findIndex(s=>s===a.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:Oue,removeDot:Due,addArea:Lue,removeArea:Mue,addLine:Rue,removeLine:$ue}=ND.actions,kle=ND.reducer,Cle=g.createContext(void 0),Ele=t=>{var{children:a}=t,[r]=g.useState("".concat(Af("recharts"),"-clip")),s=fw();if(s==null)return null;var{x:n,y:i,width:o,height:d}=s;return g.createElement(Cle.Provider,{value:r},g.createElement("defs",null,g.createElement("clipPath",{id:r},g.createElement("rect",{x:n,y:i,height:d,width:o}))),a)};function _2(t,a){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(a,r)||t[r]!==a[r]))return!1;for(var s in a)if({}.hasOwnProperty.call(a,s)&&!{}.hasOwnProperty.call(t,s))return!1;return!0}function wD(t,a,r){if(a<1)return[];if(a===1&&r===void 0)return t;for(var s=[],n=0;n<t.length;n+=a)s.push(t[n]);return s}function Tle(t,a,r){var s={width:t.width+a.width,height:t.height+a.height};return _le(s,r)}function Ple(t,a,r){var s=r==="width",{x:n,y:i,width:o,height:d}=t;return a===1?{start:s?n:i,end:s?n+o:i+d}:{start:s?n+o:i+d,end:s?n:i}}function Jg(t,a,r,s,n){if(t*a<t*s||t*a>t*n)return!1;var i=r();return t*(a-t*i/2-s)>=0&&t*(a+t*i/2-n)<=0}function Ole(t,a){return wD(t,a+1)}function Dle(t,a,r,s,n){for(var i=(s||[]).slice(),{start:o,end:d}=a,u=0,m=1,x=o,f=function(){var v=s?.[u];if(v===void 0)return{v:wD(s,m)};var j=u,N,w=()=>(N===void 0&&(N=r(v,j)),N),P=v.coordinate,k=u===0||Jg(t,P,w,x,d);k||(u=0,x=o,m+=1),k&&(x=P+t*(w()/2+n),u+=m)},b;m<=i.length;)if(b=f(),b)return b.v;return[]}function KA(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function hn(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?KA(Object(r),!0).forEach(function(s){Lle(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KA(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Lle(t,a,r){return(a=Mle(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Mle(t){var a=Rle(t,"string");return typeof a=="symbol"?a:a+""}function Rle(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function $le(t,a,r,s,n){for(var i=(s||[]).slice(),o=i.length,{start:d}=a,{end:u}=a,m=function(b){var p=i[b],v,j=()=>(v===void 0&&(v=r(p,b)),v);if(b===o-1){var N=t*(p.coordinate+t*j()/2-u);i[b]=p=hn(hn({},p),{},{tickCoord:N>0?p.coordinate-N*t:p.coordinate})}else i[b]=p=hn(hn({},p),{},{tickCoord:p.coordinate});var w=Jg(t,p.tickCoord,j,d,u);w&&(u=p.tickCoord-t*(j()/2+n),i[b]=hn(hn({},p),{},{isShow:!0}))},x=o-1;x>=0;x--)m(x);return i}function Fle(t,a,r,s,n,i){var o=(s||[]).slice(),d=o.length,{start:u,end:m}=a;if(i){var x=s[d-1],f=r(x,d-1),b=t*(x.coordinate+t*f/2-m);o[d-1]=x=hn(hn({},x),{},{tickCoord:b>0?x.coordinate-b*t:x.coordinate});var p=Jg(t,x.tickCoord,()=>f,u,m);p&&(m=x.tickCoord-t*(f/2+n),o[d-1]=hn(hn({},x),{},{isShow:!0}))}for(var v=i?d-1:d,j=function(P){var k=o[P],$,O=()=>($===void 0&&($=r(k,P)),$);if(P===0){var L=t*(k.coordinate-t*O()/2-u);o[P]=k=hn(hn({},k),{},{tickCoord:L<0?k.coordinate-L*t:k.coordinate})}else o[P]=k=hn(hn({},k),{},{tickCoord:k.coordinate});var _=Jg(t,k.tickCoord,O,u,m);_&&(u=k.tickCoord+t*(O()/2+n),o[P]=hn(hn({},k),{},{isShow:!0}))},N=0;N<v;N++)j(N);return o}function bw(t,a,r){var{tick:s,ticks:n,viewBox:i,minTickGap:o,orientation:d,interval:u,tickFormatter:m,unit:x,angle:f}=t;if(!n||!n.length||!s)return[];if(zt(u)||mm.isSsr){var b;return(b=Ole(n,zt(u)?u:0))!==null&&b!==void 0?b:[]}var p=[],v=d==="top"||d==="bottom"?"width":"height",j=x&&v==="width"?gf(x,{fontSize:a,letterSpacing:r}):{width:0,height:0},N=(k,$)=>{var O=typeof m=="function"?m(k.value,$):k.value;return v==="width"?Tle(gf(O,{fontSize:a,letterSpacing:r}),j,f):gf(O,{fontSize:a,letterSpacing:r})[v]},w=n.length>=2?Fs(n[1].coordinate-n[0].coordinate):1,P=Ple(i,w,v);return u==="equidistantPreserveStart"?Dle(w,P,N,n,o):(u==="preserveStart"||u==="preserveStartEnd"?p=Fle(w,P,N,n,o,u==="preserveStartEnd"):p=$le(w,P,N,n,o),p.filter(k=>k.isShow))}var Ile=["viewBox"],Ble=["viewBox"];function mx(){return mx=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},mx.apply(null,arguments)}function XA(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function ws(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?XA(Object(r),!0).forEach(function(s){vw(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XA(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function JA(t,a){if(t==null)return{};var r,s,n=zle(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zle(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function vw(t,a,r){return(a=qle(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function qle(t){var a=Ule(t,"string");return typeof a=="symbol"?a:a+""}function Ule(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}class Jd extends g.Component{constructor(a){super(a),this.tickRefs=g.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(a,r){var{viewBox:s}=a,n=JA(a,Ile),i=this.props,{viewBox:o}=i,d=JA(i,Ble);return!_2(s,o)||!_2(n,d)||!_2(r,this.state)}getTickLineCoord(a){var{x:r,y:s,width:n,height:i,orientation:o,tickSize:d,mirror:u,tickMargin:m}=this.props,x,f,b,p,v,j,N=u?-1:1,w=a.tickSize||d,P=zt(a.tickCoord)?a.tickCoord:a.coordinate;switch(o){case"top":x=f=a.coordinate,p=s+ +!u*i,b=p-N*w,j=b-N*m,v=P;break;case"left":b=p=a.coordinate,f=r+ +!u*n,x=f-N*w,v=x-N*m,j=P;break;case"right":b=p=a.coordinate,f=r+ +u*n,x=f+N*w,v=x+N*m,j=P;break;default:x=f=a.coordinate,p=s+ +u*i,b=p+N*w,j=b+N*m,v=P;break}return{line:{x1:x,y1:b,x2:f,y2:p},tick:{x:v,y:j}}}getTickTextAnchor(){var{orientation:a,mirror:r}=this.props;switch(a){case"left":return r?"start":"end";case"right":return r?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:a,mirror:r}=this.props;switch(a){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:a,y:r,width:s,height:n,orientation:i,mirror:o,axisLine:d}=this.props,u=ws(ws(ws({},Ar(this.props,!1)),Ar(d,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var m=+(i==="top"&&!o||i==="bottom"&&o);u=ws(ws({},u),{},{x1:a,y1:r+m*n,x2:a+s,y2:r+m*n})}else{var x=+(i==="left"&&!o||i==="right"&&o);u=ws(ws({},u),{},{x1:a+x*s,y1:r,x2:a+x*s,y2:r+n})}return g.createElement("line",mx({},u,{className:Ba("recharts-cartesian-axis-line",sm(d,"className"))}))}static renderTickItem(a,r,s){var n,i=Ba(r.className,"recharts-cartesian-axis-tick-value");if(g.isValidElement(a))n=g.cloneElement(a,ws(ws({},r),{},{className:i}));else if(typeof a=="function")n=a(ws(ws({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof a!="boolean"&&(o=Ba(o,a.className)),n=g.createElement(Jy,mx({},r,{className:o}),s)}return n}renderTicks(a,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:n,stroke:i,tick:o,tickFormatter:d,unit:u,padding:m,tickTextProps:x}=this.props,f=bw(ws(ws({},this.props),{},{ticks:s}),a,r),b=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),v=Ec(this.props),j=Ar(o,!1),N=ws(ws({},v),{},{fill:"none"},Ar(n,!1)),w=f.map((P,k)=>{var{line:$,tick:O}=this.getTickLineCoord(P),L=ws(ws(ws(ws({textAnchor:b,verticalAnchor:p},v),{},{stroke:"none",fill:i},j),O),{},{index:k,payload:P,visibleTicksCount:f.length,tickFormatter:d,padding:m},x);return g.createElement(nn,mx({className:"recharts-cartesian-axis-tick",key:"tick-".concat(P.value,"-").concat(P.coordinate,"-").concat(P.tickCoord)},by(this.props,P,k)),n&&g.createElement("line",mx({},N,$,{className:Ba("recharts-cartesian-axis-tick-line",sm(n,"className"))})),o&&Jd.renderTickItem(o,L,"".concat(typeof d=="function"?d(P.value,k):P.value).concat(u||"")))});return w.length>0?g.createElement("g",{className:"recharts-cartesian-axis-ticks"},w):null}render(){var{axisLine:a,width:r,height:s,className:n,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||s!=null&&s<=0?null:g.createElement(nn,{className:Ba("recharts-cartesian-axis",n),ref:d=>{if(d){var u=d.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(u);var m=u[0];if(m){var x=window.getComputedStyle(m).fontSize,f=window.getComputedStyle(m).letterSpacing;(x!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(m).fontSize,letterSpacing:window.getComputedStyle(m).letterSpacing})}}}},a&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),g.createElement(nse,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},g.createElement(fse,{label:this.props.label}),this.props.children))}}vw(Jd,"displayName","CartesianAxis");vw(Jd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Hle=["x1","y1","x2","y2","key"],Yle=["offset"],Gle=["xAxisId","yAxisId"],Vle=["xAxisId","yAxisId"];function ZA(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function fn(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?ZA(Object(r),!0).forEach(function(s){Wle(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZA(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Wle(t,a,r){return(a=Kle(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Kle(t){var a=Xle(t,"string");return typeof a=="symbol"?a:a+""}function Xle(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function Bu(){return Bu=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Bu.apply(null,arguments)}function Zg(t,a){if(t==null)return{};var r,s,n=Jle(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jle(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var Zle=t=>{var{fill:a}=t;if(!a||a==="none")return null;var{fillOpacity:r,x:s,y:n,width:i,height:o,ry:d}=t;return g.createElement("rect",{x:s,y:n,ry:d,width:i,height:o,stroke:"none",fill:a,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function SD(t,a){var r;if(g.isValidElement(t))r=g.cloneElement(t,a);else if(typeof t=="function")r=t(a);else{var{x1:s,y1:n,x2:i,y2:o,key:d}=a,u=Zg(a,Hle),m=Ec(u),{offset:x}=m,f=Zg(m,Yle);r=g.createElement("line",Bu({},f,{x1:s,y1:n,x2:i,y2:o,fill:"none",key:d}))}return r}function Qle(t){var{x:a,width:r,horizontal:s=!0,horizontalPoints:n}=t;if(!s||!n||!n.length)return null;var{xAxisId:i,yAxisId:o}=t,d=Zg(t,Gle),u=n.map((m,x)=>{var f=fn(fn({},d),{},{x1:a,y1:m,x2:a+r,y2:m,key:"line-".concat(x),index:x});return SD(s,f)});return g.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function eoe(t){var{y:a,height:r,vertical:s=!0,verticalPoints:n}=t;if(!s||!n||!n.length)return null;var{xAxisId:i,yAxisId:o}=t,d=Zg(t,Vle),u=n.map((m,x)=>{var f=fn(fn({},d),{},{x1:m,y1:a,x2:m,y2:a+r,key:"line-".concat(x),index:x});return SD(s,f)});return g.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function toe(t){var{horizontalFill:a,fillOpacity:r,x:s,y:n,width:i,height:o,horizontalPoints:d,horizontal:u=!0}=t;if(!u||!a||!a.length)return null;var m=d.map(f=>Math.round(f+n-n)).sort((f,b)=>f-b);n!==m[0]&&m.unshift(0);var x=m.map((f,b)=>{var p=!m[b+1],v=p?n+o-f:m[b+1]-f;if(v<=0)return null;var j=b%a.length;return g.createElement("rect",{key:"react-".concat(b),y:f,x:s,height:v,width:i,stroke:"none",fill:a[j],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},x)}function aoe(t){var{vertical:a=!0,verticalFill:r,fillOpacity:s,x:n,y:i,width:o,height:d,verticalPoints:u}=t;if(!a||!r||!r.length)return null;var m=u.map(f=>Math.round(f+n-n)).sort((f,b)=>f-b);n!==m[0]&&m.unshift(0);var x=m.map((f,b)=>{var p=!m[b+1],v=p?n+o-f:m[b+1]-f;if(v<=0)return null;var j=b%r.length;return g.createElement("rect",{key:"react-".concat(b),x:f,y:i,width:v,height:d,stroke:"none",fill:r[j],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},x)}var roe=(t,a)=>{var{xAxis:r,width:s,height:n,offset:i}=t;return vT(bw(fn(fn(fn({},Jd.defaultProps),r),{},{ticks:jT(r),viewBox:{x:0,y:0,width:s,height:n}})),i.left,i.left+i.width,a)},soe=(t,a)=>{var{yAxis:r,width:s,height:n,offset:i}=t;return vT(bw(fn(fn(fn({},Jd.defaultProps),r),{},{ticks:jT(r),viewBox:{x:0,y:0,width:s,height:n}})),i.top,i.top+i.height,a)},noe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Od(t){var a=AT(),r=kT(),s=_T(),n=fn(fn({},ai(t,noe)),{},{x:zt(t.x)?t.x:s.left,y:zt(t.y)?t.y:s.top,width:zt(t.width)?t.width:s.width,height:zt(t.height)?t.height:s.height}),{xAxisId:i,yAxisId:o,x:d,y:u,width:m,height:x,syncWithTicks:f,horizontalValues:b,verticalValues:p}=n,v=ti(),j=Lt(A=>W7(A,"xAxis",i,v)),N=Lt(A=>W7(A,"yAxis",o,v));if(!zt(m)||m<=0||!zt(x)||x<=0||!zt(d)||d!==+d||!zt(u)||u!==+u)return null;var w=n.verticalCoordinatesGenerator||roe,P=n.horizontalCoordinatesGenerator||soe,{horizontalPoints:k,verticalPoints:$}=n;if((!k||!k.length)&&typeof P=="function"){var O=b&&b.length,L=P({yAxis:N?fn(fn({},N),{},{ticks:O?b:N.ticks}):void 0,width:a,height:r,offset:s},O?!0:f);pf(Array.isArray(L),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof L,"]")),Array.isArray(L)&&(k=L)}if((!$||!$.length)&&typeof w=="function"){var _=p&&p.length,E=w({xAxis:j?fn(fn({},j),{},{ticks:_?p:j.ticks}):void 0,width:a,height:r,offset:s},_?!0:f);pf(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof E,"]")),Array.isArray(E)&&($=E)}return g.createElement("g",{className:"recharts-cartesian-grid"},g.createElement(Zle,{fill:n.fill,fillOpacity:n.fillOpacity,x:n.x,y:n.y,width:n.width,height:n.height,ry:n.ry}),g.createElement(toe,Bu({},n,{horizontalPoints:k})),g.createElement(aoe,Bu({},n,{verticalPoints:$})),g.createElement(Qle,Bu({},n,{offset:s,horizontalPoints:k,xAxis:j,yAxis:N})),g.createElement(eoe,Bu({},n,{offset:s,verticalPoints:$,xAxis:j,yAxis:N})))}Od.displayName="CartesianGrid";var _D=(t,a,r,s)=>Bd(t,"xAxis",a,s),AD=(t,a,r,s)=>Id(t,"xAxis",a,s),kD=(t,a,r,s)=>Bd(t,"yAxis",r,s),CD=(t,a,r,s)=>Id(t,"yAxis",r,s),ioe=We([Ea,_D,kD,AD,CD],(t,a,r,s,n)=>Yd(t,"xAxis")?Ef(a,s,!1):Ef(r,n,!1)),loe=(t,a,r,s,n)=>n;function ooe(t){return t.type==="line"}var coe=We([Yy,loe],(t,a)=>t.filter(ooe).find(r=>r.id===a)),doe=We([Ea,_D,kD,AD,CD,coe,ioe,By],(t,a,r,s,n,i,o,d)=>{var{chartData:u,dataStartIndex:m,dataEndIndex:x}=d;if(!(i==null||a==null||r==null||s==null||n==null||s.length===0||n.length===0||o==null)){var{dataKey:f,data:b}=i,p;if(b!=null&&b.length>0?p=b:p=u?.slice(m,x+1),p!=null)return Ooe({layout:t,xAxis:a,yAxis:r,xAxisTicks:s,yAxisTicks:n,dataKey:f,bandSize:o,displayedData:p})}}),uoe=["id"],moe=["type","layout","connectNulls","needClip"],xoe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function QA(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Si(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?QA(Object(r),!0).forEach(function(s){hoe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QA(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function hoe(t,a,r){return(a=foe(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function foe(t){var a=poe(t,"string");return typeof a=="symbol"?a:a+""}function poe(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function jw(t,a){if(t==null)return{};var r,s,n=goe(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function goe(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function om(){return om=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},om.apply(null,arguments)}var yoe=t=>{var{dataKey:a,name:r,stroke:s,legendType:n,hide:i}=t;return[{inactive:i,dataKey:a,type:n,color:s,value:Ux(r,a),payload:t}]};function boe(t){var{dataKey:a,data:r,stroke:s,strokeWidth:n,fill:i,name:o,hide:d,unit:u}=t;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:s,strokeWidth:n,fill:i,dataKey:a,nameKey:void 0,name:Ux(o,a),hide:d,type:t.tooltipType,color:t.stroke,unit:u}}}var ED=(t,a)=>"".concat(a,"px ").concat(t-a,"px");function voe(t,a){for(var r=t.length%2!==0?[...t,0]:t,s=[],n=0;n<a;++n)s=[...s,...r];return s}var joe=(t,a,r)=>{var s=r.reduce((f,b)=>f+b);if(!s)return ED(a,t);for(var n=Math.floor(t/s),i=t%s,o=a-t,d=[],u=0,m=0;u<r.length;m+=r[u],++u)if(m+r[u]>i){d=[...r.slice(0,u),i-m];break}var x=d.length%2===0?[0,o]:[o];return[...voe(r,n),...d,...x].map(f=>"".concat(f,"px")).join(", ")};function Noe(t,a){var r;if(g.isValidElement(t))r=g.cloneElement(t,a);else if(typeof t=="function")r=t(a);else{var s=Ba("recharts-line-dot",typeof t!="boolean"?t.className:"");r=g.createElement(sD,om({},a,{className:s}))}return r}function woe(t,a){return t==null?!1:a?!0:t.length===1}function Soe(t){var{clipPathId:a,points:r,props:s}=t,{dot:n,dataKey:i,needClip:o}=s;if(!woe(r,n))return null;var{id:d}=s,u=jw(s,uoe),m=pE(n),x=Ec(u),f=Ar(n,!0),b=r.map((v,j)=>{var N=Si(Si(Si({key:"dot-".concat(j),r:3},x),f),{},{index:j,cx:v.x,cy:v.y,dataKey:i,value:v.value,payload:v.payload,points:r});return Noe(n,N)}),p={clipPath:o?"url(#clipPath-".concat(m?"":"dots-").concat(a,")"):void 0};return g.createElement(nn,om({className:"recharts-line-dots",key:"dots"},p),b)}function _oe(t){var{showLabels:a,children:r,points:s}=t,n=g.useMemo(()=>s?.map(i=>{var o={x:i.x,y:i.y,width:0,height:0};return Si(Si({},o),{},{value:i.value,payload:i.payload,viewBox:o,parentViewBox:void 0,fill:void 0})}),[s]);return g.createElement(aD,{value:a?n:null},r)}function ek(t){var{clipPathId:a,pathRef:r,points:s,strokeDasharray:n,props:i}=t,{type:o,layout:d,connectNulls:u,needClip:m}=i,x=jw(i,moe),f=Si(Si({},Ar(x,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:m?"url(#clipPath-".concat(a,")"):void 0,points:s,type:o,layout:d,connectNulls:u,strokeDasharray:n??i.strokeDasharray});return g.createElement(g.Fragment,null,s?.length>1&&g.createElement(XN,om({},f,{pathRef:r})),g.createElement(Soe,{points:s,clipPathId:a,props:i}))}function Aoe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function koe(t){var{clipPathId:a,props:r,pathRef:s,previousPointsRef:n,longestAnimatedLengthRef:i}=t,{points:o,strokeDasharray:d,isAnimationActive:u,animationBegin:m,animationDuration:x,animationEasing:f,animateNewValues:b,width:p,height:v,onAnimationEnd:j,onAnimationStart:N}=r,w=n.current,P=e0(r,"recharts-line-"),[k,$]=g.useState(!1),O=!k,L=g.useCallback(()=>{typeof j=="function"&&j(),$(!1)},[j]),_=g.useCallback(()=>{typeof N=="function"&&N(),$(!0)},[N]),E=Aoe(s.current),A=i.current;return g.createElement(_oe,{points:o,showLabels:O},r.children,g.createElement(Qf,{animationId:P,begin:m,duration:x,isActive:u,easing:f,onAnimationEnd:L,onAnimationStart:_,key:P},z=>{var M=Hr(A,E+A,z),D=Math.min(M,E),I;if(u)if(d){var V="".concat(d).split(/[,\s]+/gim).map(W=>parseFloat(W));I=joe(D,E,V)}else I=ED(E,D);else I=d==null?void 0:String(d);if(w){var H=w.length/o.length,B=z===1?o:o.map((W,K)=>{var X=Math.floor(K*H);if(w[X]){var Q=w[X];return Si(Si({},W),{},{x:Hr(Q.x,W.x,z),y:Hr(Q.y,W.y,z)})}return b?Si(Si({},W),{},{x:Hr(p*2,W.x,z),y:Hr(v/2,W.y,z)}):Si(Si({},W),{},{x:W.x,y:W.y})});return n.current=B,g.createElement(ek,{props:r,points:B,clipPathId:a,pathRef:s,strokeDasharray:I})}return z>0&&E>0&&(n.current=o,i.current=D),g.createElement(ek,{props:r,points:o,clipPathId:a,pathRef:s,strokeDasharray:I})}),g.createElement(sw,{label:r.label}))}function Coe(t){var{clipPathId:a,props:r}=t,s=g.useRef(null),n=g.useRef(0),i=g.useRef(null);return g.createElement(koe,{props:r,clipPathId:a,previousPointsRef:s,longestAnimatedLengthRef:n,pathRef:i})}var Eoe=(t,a)=>({x:t.x,y:t.y,value:t.value,errorVal:sr(t.payload,a)});class Toe extends g.Component{render(){var a,{hide:r,dot:s,points:n,className:i,xAxisId:o,yAxisId:d,top:u,left:m,width:x,height:f,id:b,needClip:p}=this.props;if(r)return null;var v=Ba("recharts-line",i),j=b,{r:N=3,strokeWidth:w=2}=(a=Ar(s,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},P=pE(s),k=N*2+w;return g.createElement(g.Fragment,null,g.createElement(nn,{className:v},p&&g.createElement("defs",null,g.createElement(gD,{clipPathId:j,xAxisId:o,yAxisId:d}),!P&&g.createElement("clipPath",{id:"clipPath-dots-".concat(j)},g.createElement("rect",{x:m-k/2,y:u-k/2,width:x+k,height:f+k}))),g.createElement(pD,{xAxisId:o,yAxisId:d,data:n,dataPointFormatter:Eoe,errorBarOffset:0},g.createElement(Coe,{props:this.props,clipPathId:j}))),g.createElement(oie,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var TD={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!mm.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function Poe(t){var a=ai(t,TD),{activeDot:r,animateNewValues:s,animationBegin:n,animationDuration:i,animationEasing:o,connectNulls:d,dot:u,hide:m,isAnimationActive:x,label:f,legendType:b,xAxisId:p,yAxisId:v,id:j}=a,N=jw(a,xoe),{needClip:w}=gw(p,v),P=fw(),k=Dy(),$=ti(),O=Lt(z=>doe(z,p,v,$,j));if(k!=="horizontal"&&k!=="vertical"||O==null||P==null)return null;var{height:L,width:_,x:E,y:A}=P;return g.createElement(Toe,om({},N,{id:j,connectNulls:d,dot:u,activeDot:r,animateNewValues:s,animationBegin:n,animationDuration:i,animationEasing:o,isAnimationActive:x,hide:m,label:f,legendType:b,xAxisId:p,yAxisId:v,points:O,layout:k,height:L,width:_,left:E,top:A,needClip:w}))}function Ooe(t){var{layout:a,xAxis:r,yAxis:s,xAxisTicks:n,yAxisTicks:i,dataKey:o,bandSize:d,displayedData:u}=t;return u.map((m,x)=>{var f=sr(m,o);if(a==="horizontal"){var b=P8({axis:r,ticks:n,bandSize:d,entry:m,index:x}),p=Cr(f)?null:s.scale(f);return{x:b,y:p,value:f,payload:m}}var v=Cr(f)?null:r.scale(f),j=P8({axis:s,ticks:i,bandSize:d,entry:m,index:x});return v==null||j==null?null:{x:v,y:j,value:f,payload:m}}).filter(Boolean)}function Zy(t){var a=ai(t,TD),r=ti();return g.createElement(xw,{id:a.id,type:"line"},s=>g.createElement(g.Fragment,null,g.createElement(uD,{legendPayload:yoe(a)}),g.createElement(mw,{fn:boe,args:a}),g.createElement(xD,{type:"line",id:s,data:a.data,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:0,dataKey:a.dataKey,hide:a.hide,isPanorama:r}),g.createElement(Poe,om({},a,{id:s}))))}Zy.displayName="Line";var Doe=["children"],Loe=["dangerouslySetInnerHTML","ticks"],Moe=["id"];function PD(t,a,r){return(a=Roe(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Roe(t){var a=$oe(t,"string");return typeof a=="symbol"?a:a+""}function $oe(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function rN(){return rN=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},rN.apply(null,arguments)}function sN(t,a){if(t==null)return{};var r,s,n=Foe(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Foe(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function Ioe(t){var a=ss(),r=g.useMemo(()=>{var{children:s}=t,n=sN(t,Doe);return n},[t]);return g.useEffect(()=>(a(Kne(r)),()=>{a(Xne(r))}),[r,a]),t.children}var Boe=t=>{var{xAxisId:a,className:r}=t,s=Lt(WN),n=ti(),i="xAxis",o=Lt(N=>Xx(N,i,a,n)),d=Lt(N=>yO(N,i,a,n)),u=Lt(N=>hO(N,a)),m=Lt(N=>Pte(N,a)),x=Lt(N=>YP(N,a));if(u==null||m==null||x==null)return null;var{dangerouslySetInnerHTML:f,ticks:b}=t,p=sN(t,Loe),{id:v}=x,j=sN(x,Moe);return g.createElement(Jd,rN({},p,j,{scale:o,x:m.x,y:m.y,width:u.width,height:u.height,className:Ba("recharts-".concat(i," ").concat(i),r),viewBox:s,ticks:d}))},zoe=t=>{var a,r,s,n,i;return g.createElement(Ioe,{interval:(a=t.interval)!==null&&a!==void 0?a:"preserveEnd",id:t.xAxisId,scale:t.scale,type:t.type,padding:t.padding,allowDataOverflow:t.allowDataOverflow,domain:t.domain,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,includeHidden:(r=t.includeHidden)!==null&&r!==void 0?r:!1,reversed:t.reversed,ticks:t.ticks,height:t.height,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(s=t.angle)!==null&&s!==void 0?s:0,minTickGap:(n=t.minTickGap)!==null&&n!==void 0?n:5,tick:(i=t.tick)!==null&&i!==void 0?i:!0,tickFormatter:t.tickFormatter},g.createElement(Boe,t))};class gc extends g.Component{render(){return g.createElement(zoe,this.props)}}PD(gc,"displayName","XAxis");PD(gc,"defaultProps",{allowDataOverflow:ji.allowDataOverflow,allowDecimals:ji.allowDecimals,allowDuplicatedCategory:ji.allowDuplicatedCategory,height:ji.height,hide:!1,mirror:ji.mirror,orientation:ji.orientation,padding:ji.padding,reversed:ji.reversed,scale:ji.scale,tickCount:ji.tickCount,type:ji.type,xAxisId:0});var qoe=t=>{var{ticks:a,label:r,labelGapWithTick:s=5,tickSize:n=0,tickMargin:i=0}=t,o=0;if(a){a.forEach(x=>{if(x){var f=x.getBoundingClientRect();f.width>o&&(o=f.width)}});var d=r?r.getBoundingClientRect().width:0,u=n+i,m=o+u+d+(r?s:0);return Math.round(m)}return 0},Uoe=["dangerouslySetInnerHTML","ticks"],Hoe=["id"];function OD(t,a,r){return(a=Yoe(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Yoe(t){var a=Goe(t,"string");return typeof a=="symbol"?a:a+""}function Goe(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function nN(){return nN=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},nN.apply(null,arguments)}function tk(t,a){if(t==null)return{};var r,s,n=Voe(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Voe(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function Woe(t){var a=ss();return g.useEffect(()=>(a(Jne(t)),()=>{a(Zne(t))}),[t,a]),null}var Koe=t=>{var a,{yAxisId:r,className:s,width:n,label:i}=t,o=g.useRef(null),d=g.useRef(null),u=Lt(WN),m=ti(),x=ss(),f="yAxis",b=Lt(L=>Xx(L,f,r,m)),p=Lt(L=>fO(L,r)),v=Lt(L=>Ote(L,r)),j=Lt(L=>yO(L,f,r,m)),N=Lt(L=>GP(L,r));if(g.useLayoutEffect(()=>{var L;if(!(n!=="auto"||!p||rw(i)||g.isValidElement(i)||N==null)){var _=o.current,E=_==null||(L=_.tickRefs)===null||L===void 0?void 0:L.current,{tickSize:A,tickMargin:z}=_.props,M=qoe({ticks:E,label:d.current,labelGapWithTick:5,tickSize:A,tickMargin:z});Math.round(p.width)!==Math.round(M)&&x(Qne({id:r,width:M}))}},[o,o==null||(a=o.current)===null||a===void 0||(a=a.tickRefs)===null||a===void 0?void 0:a.current,p?.width,p,x,i,r,n]),p==null||v==null||N==null)return null;var{dangerouslySetInnerHTML:w,ticks:P}=t,k=tk(t,Uoe),{id:$}=N,O=tk(N,Hoe);return g.createElement(Jd,nN({},k,O,{ref:o,labelRef:d,scale:b,x:v.x,y:v.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:p.width,height:p.height,className:Ba("recharts-".concat(f," ").concat(f),s),viewBox:u,ticks:j}))},Xoe=t=>{var a,r,s,n,i;return g.createElement(g.Fragment,null,g.createElement(Woe,{interval:(a=t.interval)!==null&&a!==void 0?a:"preserveEnd",id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:(r=t.includeHidden)!==null&&r!==void 0?r:!1,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(s=t.angle)!==null&&s!==void 0?s:0,minTickGap:(n=t.minTickGap)!==null&&n!==void 0?n:5,tick:(i=t.tick)!==null&&i!==void 0?i:!0,tickFormatter:t.tickFormatter}),g.createElement(Koe,t))},Joe={allowDataOverflow:Ni.allowDataOverflow,allowDecimals:Ni.allowDecimals,allowDuplicatedCategory:Ni.allowDuplicatedCategory,hide:!1,mirror:Ni.mirror,orientation:Ni.orientation,padding:Ni.padding,reversed:Ni.reversed,scale:Ni.scale,tickCount:Ni.tickCount,type:Ni.type,width:Ni.width,yAxisId:0};class yc extends g.Component{render(){return g.createElement(Xoe,this.props)}}OD(yc,"displayName","YAxis");OD(yc,"defaultProps",Joe);var A2={exports:{}},k2={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ak;function Zoe(){if(ak)return k2;ak=1;var t=Rx();function a(u,m){return u===m&&(u!==0||1/u===1/m)||u!==u&&m!==m}var r=typeof Object.is=="function"?Object.is:a,s=t.useSyncExternalStore,n=t.useRef,i=t.useEffect,o=t.useMemo,d=t.useDebugValue;return k2.useSyncExternalStoreWithSelector=function(u,m,x,f,b){var p=n(null);if(p.current===null){var v={hasValue:!1,value:null};p.current=v}else v=p.current;p=o(function(){function N(O){if(!w){if(w=!0,P=O,O=f(O),b!==void 0&&v.hasValue){var L=v.value;if(b(L,O))return k=L}return k=O}if(L=k,r(P,O))return L;var _=f(O);return b!==void 0&&b(L,_)?(P=O,L):(P=O,k=_)}var w=!1,P,k,$=x===void 0?null:x;return[function(){return N(m())},$===null?void 0:function(){return N($())}]},[m,x,f,b]);var j=s(u,p[0],p[1]);return i(function(){v.hasValue=!0,v.value=j},[j]),d(j),j},k2}var rk;function Qoe(){return rk||(rk=1,A2.exports=Zoe()),A2.exports}Qoe();function ece(t){t()}function tce(){let t=null,a=null;return{clear(){t=null,a=null},notify(){ece(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let s=t;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0;const n=a={callback:r,next:null,prev:a};return n.prev?n.prev.next=n:t=n,function(){!s||t===null||(s=!1,n.next?n.next.prev=n.prev:a=n.prev,n.prev?n.prev.next=n.next:t=n.next)}}}}var sk={notify(){},get:()=>[]};function ace(t,a){let r,s=sk,n=0,i=!1;function o(j){x();const N=s.subscribe(j);let w=!1;return()=>{w||(w=!0,N(),f())}}function d(){s.notify()}function u(){v.onStateChange&&v.onStateChange()}function m(){return i}function x(){n++,r||(r=t.subscribe(u),s=tce())}function f(){n--,r&&n===0&&(r(),r=void 0,s.clear(),s=sk)}function b(){i||(i=!0,x())}function p(){i&&(i=!1,f())}const v={addNestedSub:o,notifyNestedSubs:d,handleChangeWrapper:u,isSubscribed:m,trySubscribe:b,tryUnsubscribe:p,getListeners:()=>s};return v}var rce=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sce=rce(),nce=()=>typeof navigator<"u"&&navigator.product==="ReactNative",ice=nce(),lce=()=>sce||ice?g.useLayoutEffect:g.useEffect,oce=lce(),cce=Symbol.for("react-redux-context"),dce=typeof globalThis<"u"?globalThis:{};function uce(){if(!g.createContext)return{};const t=dce[cce]??=new Map;let a=t.get(g.createContext);return a||(a=g.createContext(null),t.set(g.createContext,a)),a}var mce=uce();function xce(t){const{children:a,context:r,serverState:s,store:n}=t,i=g.useMemo(()=>{const u=ace(n);return{store:n,subscription:u,getServerState:s?()=>s:void 0}},[n,s]),o=g.useMemo(()=>n.getState(),[n]);oce(()=>{const{subscription:u}=i;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==n.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[i,o]);const d=r||mce;return g.createElement(d.Provider,{value:i},a)}var hce=xce,fce=(t,a)=>a,Nw=We([fce,Ea,qP,As,DO,Dc,$ae,Ss],qae),ww=t=>{var a=t.currentTarget.getBoundingClientRect(),r=a.width/t.currentTarget.offsetWidth,s=a.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-a.left)/r),chartY:Math.round((t.clientY-a.top)/s)}},DD=ml("mouseClick"),LD=Jf();LD.startListening({actionCreator:DD,effect:(t,a)=>{var r=t.payload,s=Nw(a.getState(),ww(r));s?.activeIndex!=null&&a.dispatch(Yte({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var iN=ml("mouseMove"),MD=Jf();MD.startListening({actionCreator:iN,effect:(t,a)=>{var r=t.payload,s=a.getState(),n=V5(s,s.tooltip.settings.shared),i=Nw(s,ww(r));n==="axis"&&(i?.activeIndex!=null?a.dispatch(AO({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):a.dispatch(_O()))}});function pce(t,a){return a instanceof HTMLElement?"HTMLElement <".concat(a.tagName,' class="').concat(a.className,'">'):a===window?"global.window":a}var nk={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},RD=Di({name:"rootProps",initialState:nk,reducers:{updateOptions:(t,a)=>{var r;t.accessibilityLayer=a.payload.accessibilityLayer,t.barCategoryGap=a.payload.barCategoryGap,t.barGap=(r=a.payload.barGap)!==null&&r!==void 0?r:nk.barGap,t.barSize=a.payload.barSize,t.maxBarSize=a.payload.maxBarSize,t.stackOffset=a.payload.stackOffset,t.syncId=a.payload.syncId,t.syncMethod=a.payload.syncMethod,t.className=a.payload.className}}}),gce=RD.reducer,{updateOptions:yce}=RD.actions,$D=Di({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,a)=>a.payload}}),{updatePolarOptions:bce}=$D.actions,vce=$D.reducer,FD=ml("keyDown"),ID=ml("focus"),Sw=Jf();Sw.startListening({actionCreator:FD,effect:(t,a)=>{var r=a.getState(),s=r.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:n}=r.tooltip,i=t.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(W5(n,Zx(r))),d=Dc(r);if(i==="Enter"){var u=Gg(r,"axis","hover",String(n.index));a.dispatch(Jj({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:u}));return}var m=Rte(r),x=m==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,b=o+f*x;if(!(d==null||b>=d.length||b<0)){var p=Gg(r,"axis","hover",String(b));a.dispatch(Jj({active:!0,activeIndex:b.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});Sw.startListening({actionCreator:ID,effect:(t,a)=>{var r=a.getState(),s=r.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:n}=r.tooltip;if(!n.active&&n.index==null){var i="0",o=Gg(r,"axis","hover",String(i));a.dispatch(Jj({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var ol=ml("externalEvent"),BD=Jf();BD.startListening({actionCreator:ol,effect:(t,a)=>{if(t.payload.handler!=null){var r=a.getState(),s={activeCoordinate:kae(r),activeDataKey:$O(r),activeIndex:zd(r),activeLabel:RO(r),activeTooltipIndex:zd(r),isTooltipActive:Cae(r)};t.payload.handler(s,t.payload.reactEvent)}}});var jce=We([Jx],t=>t.tooltipItemPayloads),Nce=We([jce,d0,(t,a,r)=>a,(t,a,r)=>r],(t,a,r,s)=>{var n=t.find(d=>d.settings.dataKey===s);if(n!=null){var{positions:i}=n;if(i!=null){var o=a(i,r);return o}}}),zD=ml("touchMove"),qD=Jf();qD.startListening({actionCreator:zD,effect:(t,a)=>{var r=t.payload,s=a.getState(),n=V5(s,s.tooltip.settings.shared);if(n==="axis"){var i=Nw(s,ww({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));i?.activeIndex!=null&&a.dispatch(AO({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(n==="item"){var o,d=r.touches[0],u=document.elementFromPoint(d.clientX,d.clientY);if(!u||!u.getAttribute)return;var m=u.getAttribute(wT),x=(o=u.getAttribute(ST))!==null&&o!==void 0?o:void 0,f=Nce(a.getState(),m,x);a.dispatch(SO({activeDataKey:x,activeIndex:m,activeCoordinate:f}))}}});var wce=KE({brush:vle,cartesianAxis:eie,chartData:sre,errorBars:vie,graphicalItems:bne,layout:ZK,legend:BX,options:Qae,polarAxis:Rse,polarOptions:vce,referenceElements:kle,rootProps:gce,tooltip:Gte}),Sce=function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return wK({reducer:wce,preloadedState:a,middleware:s=>s({serializableCheck:!1}).concat([LD.middleware,MD.middleware,Sw.middleware,BD.middleware,qD.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:pce},name:"recharts-".concat(r)}})};function UD(t){var{preloadedState:a,children:r,reduxStoreName:s}=t,n=ti(),i=g.useRef(null);if(n)return r;i.current==null&&(i.current=Sce(a,s));var o=qN;return g.createElement(hce,{context:o,store:i.current},r)}function HD(t){var{layout:a,width:r,height:s,margin:n}=t,i=ss(),o=ti();return g.useEffect(()=>{o||(i(KK(a)),i(XK({width:r,height:s})),i(WK(n)))},[i,o,a,r,s,n]),null}function YD(t){var a=ss();return g.useEffect(()=>{a(yce(t))},[a,t]),null}var _ce=["children"];function Ace(t,a){if(t==null)return{};var r,s,n=kce(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kce(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function Qg(){return Qg=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Qg.apply(null,arguments)}var Cce={width:"100%",height:"100%"},Ece=g.forwardRef((t,a)=>{var r=AT(),s=kT(),n=PT();if(!Px(r)||!Px(s))return null;var{children:i,otherAttributes:o,title:d,desc:u}=t,m,x;return typeof o.tabIndex=="number"?m=o.tabIndex:m=n?0:void 0,typeof o.role=="string"?x=o.role:x=n?"application":void 0,g.createElement(gE,Qg({},o,{title:d,desc:u,role:x,tabIndex:m,width:r,height:s,style:Cce,ref:a}),i)}),Tce=t=>{var{children:a}=t,r=Lt(Oy);if(!r)return null;var{width:s,height:n,y:i,x:o}=r;return g.createElement(gE,{width:s,height:n,x:o,y:i},a)},ik=g.forwardRef((t,a)=>{var{children:r}=t,s=Ace(t,_ce),n=ti();return n?g.createElement(Tce,null,r):g.createElement(Ece,Qg({ref:a},s),r)});function Pce(){var t=ss(),[a,r]=g.useState(null),s=Lt(kX);return g.useEffect(()=>{if(a!=null){var n=a.getBoundingClientRect(),i=n.width/a.offsetWidth;Pi(i)&&i!==s&&t(JK(i))}},[a,t,s]),r}function lk(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Oce(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?lk(Object(r),!0).forEach(function(s){Dce(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lk(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Dce(t,a,r){return(a=Lce(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Lce(t){var a=Mce(t,"string");return typeof a=="symbol"?a:a+""}function Mce(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var Rce=g.forwardRef((t,a)=>{var{children:r,className:s,height:n,onClick:i,onContextMenu:o,onDoubleClick:d,onMouseDown:u,onMouseEnter:m,onMouseLeave:x,onMouseMove:f,onMouseUp:b,onTouchEnd:p,onTouchMove:v,onTouchStart:j,style:N,width:w}=t,P=ss(),[k,$]=g.useState(null),[O,L]=g.useState(null);xre();var _=Pce(),E=g.useCallback(Y=>{_(Y),typeof a=="function"&&a(Y),$(Y),L(Y)},[_,a,$,L]),A=g.useCallback(Y=>{P(DD(Y)),P(ol({handler:i,reactEvent:Y}))},[P,i]),z=g.useCallback(Y=>{P(iN(Y)),P(ol({handler:m,reactEvent:Y}))},[P,m]),M=g.useCallback(Y=>{P(_O()),P(ol({handler:x,reactEvent:Y}))},[P,x]),D=g.useCallback(Y=>{P(iN(Y)),P(ol({handler:f,reactEvent:Y}))},[P,f]),I=g.useCallback(()=>{P(ID())},[P]),V=g.useCallback(Y=>{P(FD(Y.key))},[P]),H=g.useCallback(Y=>{P(ol({handler:o,reactEvent:Y}))},[P,o]),B=g.useCallback(Y=>{P(ol({handler:d,reactEvent:Y}))},[P,d]),W=g.useCallback(Y=>{P(ol({handler:u,reactEvent:Y}))},[P,u]),K=g.useCallback(Y=>{P(ol({handler:b,reactEvent:Y}))},[P,b]),X=g.useCallback(Y=>{P(ol({handler:j,reactEvent:Y}))},[P,j]),Q=g.useCallback(Y=>{P(zD(Y)),P(ol({handler:v,reactEvent:Y}))},[P,v]),ye=g.useCallback(Y=>{P(ol({handler:p,reactEvent:Y}))},[P,p]);return g.createElement(UO.Provider,{value:k},g.createElement(yV.Provider,{value:O},g.createElement("div",{className:Ba("recharts-wrapper",s),style:Oce({position:"relative",cursor:"default",width:w,height:n},N),onClick:A,onContextMenu:H,onDoubleClick:B,onFocus:I,onKeyDown:V,onMouseDown:W,onMouseEnter:z,onMouseLeave:M,onMouseMove:D,onMouseUp:K,onTouchEnd:ye,onTouchMove:Q,onTouchStart:X,ref:E},r)))}),$ce=["children","className","width","height","style","compact","title","desc"];function Fce(t,a){if(t==null)return{};var r,s,n=Ice(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ice(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var GD=g.forwardRef((t,a)=>{var{children:r,className:s,width:n,height:i,style:o,compact:d,title:u,desc:m}=t,x=Fce(t,$ce),f=Ec(x);return d?g.createElement(ik,{otherAttributes:f,title:u,desc:m},r):g.createElement(Rce,{className:s,style:o,width:n,height:i,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},g.createElement(ik,{otherAttributes:f,title:u,desc:m,ref:a},g.createElement(Ele,null,r)))}),Bce=["width","height"];function lN(){return lN=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},lN.apply(null,arguments)}function zce(t,a){if(t==null)return{};var r,s,n=qce(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qce(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var Uce={top:5,right:5,bottom:5,left:5},Hce={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Uce,reverseStackOrder:!1,syncMethod:"index"},VD=g.forwardRef(function(a,r){var s,n=ai(a.categoricalChartProps,Hce),{width:i,height:o}=n,d=zce(n,Bce);if(!Px(i)||!Px(o))return null;var{chartName:u,defaultTooltipEventType:m,validateTooltipEventTypes:x,tooltipPayloadSearcher:f,categoricalChartProps:b}=a,p={chartName:u,defaultTooltipEventType:m,validateTooltipEventTypes:x,tooltipPayloadSearcher:f,eventEmitter:void 0};return g.createElement(UD,{preloadedState:{options:p},reduxStoreName:(s=b.id)!==null&&s!==void 0?s:u},g.createElement(vD,{chartData:b.data}),g.createElement(HD,{width:i,height:o,layout:n.layout,margin:n.margin}),g.createElement(YD,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),g.createElement(GD,lN({},d,{width:i,height:o,ref:r})))}),Yce=["axis"],_w=g.forwardRef((t,a)=>g.createElement(VD,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Yce,tooltipPayloadSearcher:aw,categoricalChartProps:t,ref:a})),Gce=["axis","item"],ey=g.forwardRef((t,a)=>g.createElement(VD,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Gce,tooltipPayloadSearcher:aw,categoricalChartProps:t,ref:a}));function Vce(t){var a=ss();return g.useEffect(()=>{a(bce(t))},[a,t]),null}var Wce=["width","height","layout"];function oN(){return oN=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},oN.apply(null,arguments)}function Kce(t,a){if(t==null)return{};var r,s,n=Xce(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Xce(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var Jce={top:5,right:5,bottom:5,left:5},Zce={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Jce,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Qce=g.forwardRef(function(a,r){var s,n=ai(a.categoricalChartProps,Zce),{width:i,height:o,layout:d}=n,u=Kce(n,Wce);if(!Px(i)||!Px(o))return null;var{chartName:m,defaultTooltipEventType:x,validateTooltipEventTypes:f,tooltipPayloadSearcher:b}=a,p={chartName:m,defaultTooltipEventType:x,validateTooltipEventTypes:f,tooltipPayloadSearcher:b,eventEmitter:void 0};return g.createElement(UD,{preloadedState:{options:p},reduxStoreName:(s=n.id)!==null&&s!==void 0?s:m},g.createElement(vD,{chartData:n.data}),g.createElement(HD,{width:i,height:o,layout:d,margin:n.margin}),g.createElement(YD,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),g.createElement(Vce,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),g.createElement(GD,oN({width:i,height:o},u,{ref:r})))}),ede=["item"],tde={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},ty=g.forwardRef((t,a)=>{var r=ai(t,tde);return g.createElement(Qce,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:ede,tooltipPayloadSearcher:aw,categoricalChartProps:r,ref:a})});const ade=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState(null),[i,o]=g.useState("breakdown"),[d,u]=g.useState({year:new Date().getFullYear(),month:new Date().getMonth()+1,start_date:"",end_date:"",period:"monthly"}),[m,x]=g.useState(null),[f,b]=g.useState(null),[p,v]=g.useState(null),j=t?{Authorization:`Bearer ${t}`}:{},N=async()=>{try{r(!0);const E=new URLSearchParams;d.start_date&&d.end_date?(E.append("start_date",d.start_date),E.append("end_date",d.end_date)):d.year&&d.month?(E.append("year",d.year),E.append("month",d.month)):d.year&&E.append("year",d.year);const A=await ne.get(`${ie}/analytics/expenses/monthly-breakdown?${E}`,{headers:j});x(A.data.data)}catch(E){n("Failed to fetch expense breakdown"),console.error("Error fetching expense breakdown:",E)}finally{r(!1)}},w=async()=>{try{r(!0);const E=new URLSearchParams;d.start_date&&d.end_date?(E.append("start_date",d.start_date),E.append("end_date",d.end_date)):d.year&&d.term?(E.append("year",d.year),E.append("term",d.term)):d.year&&E.append("year",d.year);const A=await ne.get(`${ie}/analytics/expenses/cost-per-student?${E}`,{headers:j});b(A.data.data)}catch(E){n("Failed to fetch cost per student analysis"),console.error("Error fetching cost per student analysis:",E)}finally{r(!1)}},P=async()=>{try{r(!0);const E=new URLSearchParams;E.append("period",d.period),d.start_date&&d.end_date?(E.append("start_date",d.start_date),E.append("end_date",d.end_date)):d.year&&E.append("year",d.year);const A=await ne.get(`${ie}/analytics/expenses/trends?${E}`,{headers:j});v(A.data.data)}catch(E){n("Failed to fetch expense trends"),console.error("Error fetching expense trends:",E)}finally{r(!1)}},k=(E,A)=>{u(z=>({...z,[E]:A}))},$=()=>{i==="breakdown"?N():i==="cost-per-student"?w():i==="trends"&&P()},O=E=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(E),L=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"],_=({active:E,payload:A,label:z})=>E&&A&&A.length?e.jsxs("div",{className:"bg-white p-3 border border-gray-200 shadow-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:z}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Amount: ",O(A[0].value)]})]}):null;return e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"bg-white border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:Cx,className:"text-gray-600 text-sm"}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Expense Analysis"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 hover:bg-gray-200",children:[e.jsx(R,{icon:bn,className:"mr-1"}),"Export"]}),e.jsxs("button",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 hover:bg-gray-200",children:[e.jsx(R,{icon:Ln,className:"mr-1"}),"Print"]})]})]})}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:$r,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Year:"}),e.jsx("input",{type:"number",value:d.year,onChange:E=>k("year",parseInt(E.target.value)||new Date().getFullYear()),className:"border border-gray-300 px-2 py-1 text-xs w-20 focus:outline-none focus:border-gray-400",placeholder:"2024",min:"2000",max:"2100"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Month:"}),e.jsx("select",{value:d.month,onChange:E=>k("month",E.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400",children:Array.from({length:12},(E,A)=>A+1).map(E=>e.jsx("option",{value:E,children:new Date(0,E-1).toLocaleString("default",{month:"long"})},E))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Period:"}),e.jsxs("select",{value:d.period,onChange:E=>k("period",E.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"})]})]}),e.jsxs("button",{onClick:$,disabled:a,className:"px-4 py-1 text-xs bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:[a?e.jsx(R,{icon:Yr,className:"animate-spin mr-1"}):e.jsx(R,{icon:ua,className:"mr-1"}),"Search"]})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-4",children:[{id:"breakdown",label:"Expense Breakdown",icon:Cx},{id:"cost-per-student",label:"Cost Per Student",icon:za},{id:"trends",label:"Expense Trends",icon:_o}].map(E=>e.jsxs("button",{onClick:()=>o(E.id),className:`py-3 px-1 border-b-2 text-xs font-medium ${i===E.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:E.icon,className:"mr-1"}),E.label]},E.id))})}),e.jsxs("div",{className:"p-4",children:[s&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 text-xs",children:[e.jsx(R,{icon:la,className:"mr-1"}),s]}),i==="breakdown"&&e.jsx("div",{className:"space-y-6",children:m?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Expenses by Category"}),e.jsx(ql,{width:"100%",height:300,children:e.jsxs(ty,{children:[e.jsx($f,{data:m.expenses,cx:"50%",cy:"50%",labelLine:!1,label:({category_name:E,percent:A})=>`${E} ${(A*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"total_amount",children:m.expenses.map((E,A)=>e.jsx(qd,{fill:L[A%L.length]},`cell-${A}`))}),e.jsx(zl,{formatter:E=>O(E)})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Expenses"}),e.jsx("span",{className:"text-lg font-bold text-blue-900",children:O(m.total_expenses)})]}),e.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:["Period: ",m.period]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Top Categories"}),m.expenses.slice(0,5).map((E,A)=>e.jsxs("div",{className:"flex justify-between items-center py-1",children:[e.jsx("span",{className:"text-xs text-gray-700",children:E.category_name}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs font-medium text-gray-900",children:O(E.total_amount)}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",E.percentage,"%)"]})]})]},E.category_name))]})]})]})}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load expense breakdown data'})}),i==="cost-per-student"&&e.jsx("div",{className:"space-y-6",children:f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Expenses"}),e.jsx(R,{icon:Ia,className:"text-blue-600"})]}),e.jsx("div",{className:"text-lg font-bold text-blue-900 mt-1",children:O(f.total_expenses)})]}),e.jsxs("div",{className:"bg-green-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Active Students"}),e.jsx(R,{icon:za,className:"text-green-600"})]}),e.jsx("div",{className:"text-lg font-bold text-green-900 mt-1",children:f.active_students})]}),e.jsxs("div",{className:"bg-purple-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Cost Per Student"}),e.jsx(R,{icon:Ia,className:"text-purple-600"})]}),e.jsx("div",{className:"text-lg font-bold text-purple-900 mt-1",children:O(f.cost_per_student)})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Cost Per Student by Category"}),e.jsx("div",{className:"space-y-2",children:f.expenses_by_category.map((E,A)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[e.jsx("span",{className:"text-xs text-gray-700",children:E.category_name}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-900",children:[O(E.cost_per_student)," per student"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Total: ",O(E.total_amount)]})]})]},E.category_name))})]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load cost per student analysis'})}),i==="trends"&&e.jsx("div",{className:"space-y-6",children:p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:["Expense Trends (",p.period_type,")"]}),e.jsx(ql,{width:"100%",height:300,children:e.jsxs(_w,{data:p.trends,children:[e.jsx(Od,{strokeDasharray:"3 3"}),e.jsx(gc,{dataKey:"period_label",tick:{fontSize:12},height:40}),e.jsx(yc,{tick:{fontSize:12},tickFormatter:E=>`$${E}`}),e.jsx(zl,{content:e.jsx(_,{})}),e.jsx(Zy,{type:"monotone",dataKey:"total_expenses",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2,r:4}})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Trend Data"}),p.trends.map((E,A)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[e.jsx("span",{className:"text-xs text-gray-700",children:E.period_label}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:O(E.total_expenses)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.transaction_count," transactions"]})]})]},A))]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load expense trends'})})]})]})})},rde=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState(null),[i,o]=g.useState("trends"),[d,u]=g.useState({year:new Date().getFullYear(),start_date:"",end_date:"",period:"monthly"}),[m,x]=g.useState(null),[f,b]=g.useState(null),[p,v]=g.useState(null),[j,N]=g.useState(null),w=t?{Authorization:`Bearer ${t}`}:{},P=async()=>{try{r(!0);const M=new URLSearchParams;M.append("period",d.period),d.start_date&&d.end_date?(M.append("start_date",d.start_date),M.append("end_date",d.end_date)):d.year&&M.append("year",d.year);const D=await ne.get(`${ie}/analytics/revenue/trends?${M}`,{headers:w});x(D.data.data)}catch(M){n("Failed to fetch revenue trends"),console.error("Error fetching revenue trends:",M)}finally{r(!1)}},k=async()=>{try{r(!0);const M=new URLSearchParams;d.start_date&&d.end_date?(M.append("start_date",d.start_date),M.append("end_date",d.end_date)):d.year&&M.append("year",d.year);const D=await ne.get(`${ie}/analytics/revenue/fee-collection-trends?${M}`,{headers:w});b(D.data.data)}catch(M){n("Failed to fetch fee collection trends"),console.error("Error fetching fee collection trends:",M)}finally{r(!1)}},$=async()=>{try{r(!0);const M=new URLSearchParams;d.start_date&&d.end_date?(M.append("start_date",d.start_date),M.append("end_date",d.end_date)):d.year&&M.append("year",d.year);const D=await ne.get(`${ie}/analytics/revenue/breakdown?${M}`,{headers:w});v(D.data.data)}catch(M){n("Failed to fetch revenue breakdown"),console.error("Error fetching revenue breakdown:",M)}finally{r(!1)}},O=async()=>{try{r(!0);const M=new URLSearchParams;d.start_date&&d.end_date?(M.append("start_date",d.start_date),M.append("end_date",d.end_date)):d.year&&M.append("year",d.year);const D=await ne.get(`${ie}/analytics/revenue/payment-methods?${M}`,{headers:w});N(D.data.data)}catch(M){n("Failed to fetch payment methods"),console.error("Error fetching payment methods:",M)}finally{r(!1)}},L=(M,D)=>{u(I=>({...I,[M]:D}))},_=()=>{i==="trends"?P():i==="fee-collection"?k():i==="breakdown"?$():i==="payment-methods"&&O()},E=M=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(M),A=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"],z=({active:M,payload:D,label:I})=>M&&D&&D.length?e.jsxs("div",{className:"bg-white p-3 border border-gray-200 shadow-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:I}),D.map((V,H)=>e.jsxs("p",{className:"text-sm text-gray-600",children:[V.dataKey,": ",E(V.value)]},H))]}):null;return e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"bg-white border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:_o,className:"text-gray-600 text-sm"}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Revenue Analysis"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 hover:bg-gray-200",children:[e.jsx(R,{icon:bn,className:"mr-1"}),"Export"]}),e.jsxs("button",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 hover:bg-gray-200",children:[e.jsx(R,{icon:Ln,className:"mr-1"}),"Print"]})]})]})}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:$r,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Year:"}),e.jsx("input",{type:"number",value:d.year,onChange:M=>L("year",parseInt(M.target.value)||new Date().getFullYear()),className:"border border-gray-300 px-2 py-1 text-xs w-20 focus:outline-none focus:border-gray-400",placeholder:"2024",min:"2000",max:"2100"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Period:"}),e.jsxs("select",{value:d.period,onChange:M=>L("period",M.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"})]})]}),e.jsxs("button",{onClick:_,disabled:a,className:"px-4 py-1 text-xs bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:[a?e.jsx(R,{icon:Yr,className:"animate-spin mr-1"}):e.jsx(R,{icon:ua,className:"mr-1"}),"Search"]})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-4",children:[{id:"trends",label:"Revenue Trends",icon:_o},{id:"fee-collection",label:"Fee Collection",icon:Ia},{id:"breakdown",label:"Revenue Breakdown",icon:Cx},{id:"payment-methods",label:"Payment Methods",icon:On}].map(M=>e.jsxs("button",{onClick:()=>o(M.id),className:`py-3 px-1 border-b-2 text-xs font-medium ${i===M.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:M.icon,className:"mr-1"}),M.label]},M.id))})}),e.jsxs("div",{className:"p-4",children:[s&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 text-xs",children:[e.jsx(R,{icon:la,className:"mr-1"}),s]}),i==="trends"&&e.jsx("div",{className:"space-y-6",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:["Revenue Trends (",m.period_type,")"]}),e.jsx(ql,{width:"100%",height:300,children:e.jsxs(_w,{data:m.trends,children:[e.jsx(Od,{strokeDasharray:"3 3"}),e.jsx(gc,{dataKey:"period_label",tick:{fontSize:12},height:40}),e.jsx(yc,{tick:{fontSize:12},tickFormatter:M=>`$${M}`}),e.jsx(zl,{content:e.jsx(z,{})}),e.jsx(Zy,{type:"monotone",dataKey:"total_revenue",stroke:"#10b981",strokeWidth:2,dot:{fill:"#10b981",strokeWidth:2,r:4}})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Trend Data"}),m.trends.map((M,D)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[e.jsx("span",{className:"text-xs text-gray-700",children:M.period_label}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:E(M.total_revenue)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[M.transaction_count," transactions"]})]})]},D))]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load revenue trends'})}),i==="fee-collection"&&e.jsx("div",{className:"space-y-6",children:f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Fee Collection Trends by Type"}),e.jsx(ql,{width:"100%",height:300,children:e.jsxs(ey,{data:f.trends,children:[e.jsx(Od,{strokeDasharray:"3 3"}),e.jsx(gc,{dataKey:"period_label",tick:{fontSize:12},height:40}),e.jsx(yc,{tick:{fontSize:12},tickFormatter:M=>`$${M}`}),e.jsx(zl,{content:e.jsx(z,{})}),e.jsx(Ku,{dataKey:"tuition",stackId:"a",fill:"#3b82f6",name:"Tuition"}),e.jsx(Ku,{dataKey:"boarding",stackId:"a",fill:"#10b981",name:"Boarding"}),e.jsx(Ku,{dataKey:"transport",stackId:"a",fill:"#f59e0b",name:"Transport"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Collection Data"}),f.trends.map((M,D)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[e.jsx("span",{className:"text-xs text-gray-700",children:M.period_label}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-900",children:["Total: ",E(M.total)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["T: ",E(M.tuition)," | B: ",E(M.boarding)," | Tr: ",E(M.transport)]})]})]},D))]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load fee collection trends'})}),i==="breakdown"&&e.jsx("div",{className:"space-y-6",children:p?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Revenue by Source"}),e.jsx(ql,{width:"100%",height:300,children:e.jsxs(ty,{children:[e.jsx($f,{data:p.revenue_sources,cx:"50%",cy:"50%",labelLine:!1,label:({source_name:M,percent:D})=>`${M} ${(D*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"total_amount",children:p.revenue_sources.map((M,D)=>e.jsx(qd,{fill:A[D%A.length]},`cell-${D}`))}),e.jsx(zl,{formatter:M=>E(M)})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Total Revenue"}),e.jsx("span",{className:"text-lg font-bold text-green-900",children:E(p.total_revenue)})]}),e.jsxs("div",{className:"text-xs text-green-700 mt-1",children:["Period: ",p.period]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Revenue Sources"}),p.revenue_sources.map((M,D)=>e.jsxs("div",{className:"flex justify-between items-center py-1",children:[e.jsx("span",{className:"text-xs text-gray-700",children:M.source_name}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs font-medium text-gray-900",children:E(M.total_amount)}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",M.percentage,"%)"]})]})]},M.source_name))]})]})]})}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load revenue breakdown'})}),i==="payment-methods"&&e.jsx("div",{className:"space-y-6",children:j?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Payment Methods Distribution"}),e.jsx(ql,{width:"100%",height:300,children:e.jsxs(ty,{children:[e.jsx($f,{data:j.payment_methods,cx:"50%",cy:"50%",labelLine:!1,label:({payment_method:M,percent:D})=>`${M} ${(D*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"total_amount",children:j.payment_methods.map((M,D)=>e.jsx(qd,{fill:A[D%A.length]},`cell-${D}`))}),e.jsx(zl,{formatter:M=>E(M)})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Collected"}),e.jsx("span",{className:"text-lg font-bold text-blue-900",children:E(j.total_amount)})]}),e.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:["Period: ",j.period]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Payment Methods"}),j.payment_methods.map((M,D)=>e.jsxs("div",{className:"flex justify-between items-center py-1",children:[e.jsx("span",{className:"text-xs text-gray-700 capitalize",children:M.payment_method}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs font-medium text-gray-900",children:E(M.total_amount)}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",M.percentage,"%)"]})]})]},M.payment_method))]})]})]})}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load payment methods analysis'})})]})]})})},sde=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState(null),[i,o]=g.useState("outstanding-balances"),[d,u]=g.useState({year:new Date().getFullYear(),term:"",start_date:"",end_date:""}),[m,x]=g.useState(null),[f,b]=g.useState(null),[p,v]=g.useState(null),[j,N]=g.useState(null),w=t?{Authorization:`Bearer ${t}`}:{},P=async()=>{try{r(!0);const D=new URLSearchParams;d.year&&D.append("year",d.year),d.term&&D.append("term",d.term);const I=await ne.get(`${ie}/analytics/student-financial/outstanding-balances?${D}`,{headers:w});x(I.data.data)}catch(D){n("Failed to fetch outstanding balances"),console.error("Error fetching outstanding balances:",D)}finally{r(!1)}},k=async()=>{try{r(!0);const D=new URLSearchParams;d.start_date&&d.end_date?(D.append("start_date",d.start_date),D.append("end_date",d.end_date)):d.year&&d.term?(D.append("year",d.year),D.append("term",d.term)):d.year&&D.append("year",d.year);const I=await ne.get(`${ie}/analytics/student-financial/payment-completion-rates?${D}`,{headers:w});b(I.data.data)}catch(D){n("Failed to fetch payment completion rates"),console.error("Error fetching payment completion rates:",D)}finally{r(!1)}},$=async()=>{try{r(!0);const D=new URLSearchParams;d.start_date&&d.end_date?(D.append("start_date",d.start_date),D.append("end_date",d.end_date)):d.year&&d.term?(D.append("year",d.year),D.append("term",d.term)):d.year&&D.append("year",d.year);const I=await ne.get(`${ie}/analytics/student-financial/efficiency-metrics?${D}`,{headers:w});v(I.data.data)}catch(D){n("Failed to fetch efficiency metrics"),console.error("Error fetching efficiency metrics:",D)}finally{r(!1)}},O=async()=>{try{r(!0);const D=await ne.get(`${ie}/analytics/student-financial/health-summary`,{headers:w});N(D.data.data)}catch(D){n("Failed to fetch health summary"),console.error("Error fetching health summary:",D)}finally{r(!1)}},L=(D,I)=>{u(V=>({...V,[D]:I}))},_=()=>{i==="outstanding-balances"?P():i==="completion-rates"?k():i==="efficiency"?$():i==="health-summary"&&O()},E=D=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(D),A=({active:D,payload:I,label:V})=>D&&I&&I.length?e.jsxs("div",{className:"bg-white p-3 border border-gray-200 shadow-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:V}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Outstanding: ",E(I[0].value)]})]}):null,z=D=>D>=90?"text-green-600":D>=70?"text-yellow-600":"text-red-600",M=D=>D>=90?Ra:D>=70?_v:Zu;return e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"bg-white border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:za,className:"text-gray-600 text-sm"}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Student Financial Analytics"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 hover:bg-gray-200",children:[e.jsx(R,{icon:bn,className:"mr-1"}),"Export"]}),e.jsxs("button",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 hover:bg-gray-200",children:[e.jsx(R,{icon:Ln,className:"mr-1"}),"Print"]})]})]})}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:$r,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Year:"}),e.jsx("input",{type:"number",value:d.year,onChange:D=>L("year",parseInt(D.target.value)||new Date().getFullYear()),className:"border border-gray-300 px-2 py-1 text-xs w-20 focus:outline-none focus:border-gray-400",placeholder:"2024",min:"2000",max:"2100"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Term:"}),e.jsxs("select",{value:d.term,onChange:D=>L("term",D.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400",children:[e.jsx("option",{value:"",children:"All Terms"}),e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]})]}),e.jsxs("button",{onClick:_,disabled:a,className:"px-4 py-1 text-xs bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:[a?e.jsx(R,{icon:Yr,className:"animate-spin mr-1"}):e.jsx(R,{icon:ua,className:"mr-1"}),"Search"]})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-4",children:[{id:"outstanding-balances",label:"Outstanding Balances",icon:Ia},{id:"completion-rates",label:"Completion Rates",icon:wv},{id:"efficiency",label:"Efficiency Metrics",icon:Co},{id:"health-summary",label:"Health Summary",icon:za}].map(D=>e.jsxs("button",{onClick:()=>o(D.id),className:`py-3 px-1 border-b-2 text-xs font-medium ${i===D.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:D.icon,className:"mr-1"}),D.label]},D.id))})}),e.jsxs("div",{className:"p-4",children:[s&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 text-xs",children:[e.jsx(R,{icon:la,className:"mr-1"}),s]}),i==="outstanding-balances"&&e.jsx("div",{className:"space-y-6",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-red-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-red-900",children:"Total Outstanding"}),e.jsx(R,{icon:Ia,className:"text-red-600"})]}),e.jsx("div",{className:"text-lg font-bold text-red-900 mt-1",children:E(m.total_outstanding_amount)})]}),e.jsxs("div",{className:"bg-orange-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-orange-900",children:"Students with Balances"}),e.jsx(R,{icon:za,className:"text-orange-600"})]}),e.jsx("div",{className:"text-lg font-bold text-orange-900 mt-1",children:m.total_students_with_balances})]}),e.jsxs("div",{className:"bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Average Outstanding"}),e.jsx(R,{icon:Ia,className:"text-blue-600"})]}),e.jsx("div",{className:"text-lg font-bold text-blue-900 mt-1",children:E(m.total_outstanding_amount/Math.max(m.total_students_with_balances,1))})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Outstanding Balances by Class"}),e.jsx(ql,{width:"100%",height:300,children:e.jsxs(ey,{data:m.balances_by_class,children:[e.jsx(Od,{strokeDasharray:"3 3"}),e.jsx(gc,{dataKey:"class_name",tick:{fontSize:12},height:40}),e.jsx(yc,{tick:{fontSize:12},tickFormatter:D=>`$${D}`}),e.jsx(zl,{content:e.jsx(A,{})}),e.jsx(Ku,{dataKey:"total_outstanding",fill:"#ef4444",radius:[2,2,0,0]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Class Details"}),m.balances_by_class.map((D,I)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-900",children:D.class_name}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",D.stream_name,")"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:E(D.total_outstanding)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[D.student_count," students"]})]})]},I))]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load outstanding balances'})}),i==="completion-rates"&&e.jsx("div",{className:"space-y-6",children:f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-green-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Completion Rate"}),e.jsx(R,{icon:wv,className:"text-green-600"})]}),e.jsxs("div",{className:"text-lg font-bold text-green-900 mt-1",children:[f.overall_completion_rate,"%"]})]}),e.jsxs("div",{className:"bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Charged"}),e.jsx(R,{icon:Ia,className:"text-blue-600"})]}),e.jsx("div",{className:"text-lg font-bold text-blue-900 mt-1",children:E(f.total_charged)})]}),e.jsxs("div",{className:"bg-green-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Total Paid"}),e.jsx(R,{icon:Ia,className:"text-green-600"})]}),e.jsx("div",{className:"text-lg font-bold text-green-900 mt-1",children:E(f.total_paid)})]}),e.jsxs("div",{className:"bg-red-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-red-900",children:"Outstanding"}),e.jsx(R,{icon:Ia,className:"text-red-600"})]}),e.jsx("div",{className:"text-lg font-bold text-red-900 mt-1",children:E(f.outstanding_amount)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Completion by Class"}),f.completion_by_class.map((D,I)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-900",children:D.class_name}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",D.stream_name,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-900",children:[D.completion_rate,"% complete"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[D.students_paid_up,"/",D.total_students," students"]})]}),e.jsx(R,{icon:M(parseFloat(D.completion_rate)),className:`text-sm ${z(parseFloat(D.completion_rate))}`})]})]},I))]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load payment completion rates'})}),i==="efficiency"&&e.jsx("div",{className:"space-y-6",children:p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Collection Rate"}),e.jsx(R,{icon:wv,className:"text-blue-600"})]}),e.jsxs("div",{className:"text-lg font-bold text-blue-900 mt-1",children:[p.efficiency_metrics.collection_rate,"%"]})]}),e.jsxs("div",{className:"bg-green-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Success Rate"}),e.jsx(R,{icon:Ra,className:"text-green-600"})]}),e.jsxs("div",{className:"text-lg font-bold text-green-900 mt-1",children:[p.efficiency_metrics.success_rate,"%"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Avg Payment/Student"}),e.jsx(R,{icon:Ia,className:"text-purple-600"})]}),e.jsx("div",{className:"text-lg font-bold text-purple-900 mt-1",children:E(p.efficiency_metrics.average_payment_per_student)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Payment Methods"}),e.jsx("div",{className:"space-y-2",children:Object.entries(p.payment_methods).map(([D,I])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-700 capitalize",children:D.replace("_"," ")}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:I})]},D))})]}),e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Payment Status"}),e.jsx("div",{className:"space-y-2",children:Object.entries(p.payment_status).map(([D,I])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-700 capitalize",children:D}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:I})]},D))})]})]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load efficiency metrics'})}),i==="health-summary"&&e.jsx("div",{className:"space-y-6",children:j?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Students"}),e.jsx(R,{icon:za,className:"text-blue-600"})]}),e.jsx("div",{className:"text-lg font-bold text-blue-900 mt-1",children:j.total_students})]}),e.jsxs("div",{className:"bg-green-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Paid Up"}),e.jsx(R,{icon:Ra,className:"text-green-600"})]}),e.jsx("div",{className:"text-lg font-bold text-green-900 mt-1",children:j.students_paid_up})]}),e.jsxs("div",{className:"bg-red-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-red-900",children:"Total Outstanding"}),e.jsx(R,{icon:Ia,className:"text-red-600"})]}),e.jsx("div",{className:"text-lg font-bold text-red-900 mt-1",children:E(j.total_outstanding)})]}),e.jsxs("div",{className:"bg-purple-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Avg Outstanding"}),e.jsx(R,{icon:Ia,className:"text-purple-600"})]}),e.jsx("div",{className:"text-lg font-bold text-purple-900 mt-1",children:E(j.average_outstanding)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-yellow-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-yellow-900",children:"Small Balance"}),e.jsx(R,{icon:_v,className:"text-yellow-600"})]}),e.jsx("div",{className:"text-lg font-bold text-yellow-900 mt-1",children:j.students_small_balance}),e.jsx("div",{className:"text-xs text-yellow-700",children:"$0 - $100"})]}),e.jsxs("div",{className:"bg-orange-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-orange-900",children:"Medium Balance"}),e.jsx(R,{icon:_v,className:"text-orange-600"})]}),e.jsx("div",{className:"text-lg font-bold text-orange-900 mt-1",children:j.students_medium_balance}),e.jsx("div",{className:"text-xs text-orange-700",children:"$100 - $500"})]}),e.jsxs("div",{className:"bg-red-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-red-900",children:"Large Balance"}),e.jsx(R,{icon:Zu,className:"text-red-600"})]}),e.jsx("div",{className:"text-lg font-bold text-red-900 mt-1",children:j.students_large_balance}),e.jsx("div",{className:"text-xs text-red-700",children:"$500+"})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Recent Activity (Last 30 Days)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-700",children:"Payments Made"}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:j.recent_activity.payments_last_30_days})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-700",children:"Amount Collected"}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:E(j.recent_activity.amount_last_30_days)})]})]})]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load health summary'})})]})]})})},nde=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState(null),[i,o]=g.useState("overview"),[d,u]=g.useState({year:new Date().getFullYear(),term:"",class_id:"",subject_id:""}),[m,x]=g.useState(null),[f,b]=g.useState(null),[p,v]=g.useState(null),[j,N]=g.useState(null),[w,P]=g.useState([]),[k,$]=g.useState([]),O=t?{Authorization:`Bearer ${t}`}:{},L=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316","#84cc16"],_=async()=>{try{r(!0);const H=new URLSearchParams;d.year&&H.append("year",d.year),d.term&&H.append("term",d.term),d.class_id&&H.append("class_id",d.class_id),d.subject_id&&H.append("subject_id",d.subject_id);const B=await ne.get(`${ie}/analytics/student-results/academic-performance?${H}`,{headers:O});x(B.data.data)}catch(H){n("Failed to fetch academic performance overview"),console.error("Error fetching academic performance overview:",H)}finally{r(!1)}},E=async()=>{try{r(!0);const H=new URLSearchParams;d.year&&H.append("year",d.year),d.term&&H.append("term",d.term),d.class_id&&H.append("class_id",d.class_id),d.subject_id&&H.append("subject_id",d.subject_id);const B=await ne.get(`${ie}/analytics/student-results/grade-distribution?${H}`,{headers:O});b(B.data.data)}catch(H){n("Failed to fetch grade distribution"),console.error("Error fetching grade distribution:",H)}finally{r(!1)}},A=async()=>{try{r(!0);const H=new URLSearchParams;d.year&&H.append("year",d.year),d.class_id&&H.append("class_id",d.class_id),d.subject_id&&H.append("subject_id",d.subject_id),H.append("period","monthly");const B=await ne.get(`${ie}/analytics/student-results/performance-trends?${H}`,{headers:O});v(B.data.data)}catch(H){n("Failed to fetch performance trends"),console.error("Error fetching performance trends:",H)}finally{r(!1)}},z=async()=>{try{r(!0);const H=new URLSearchParams;d.year&&H.append("year",d.year),d.term&&H.append("term",d.term),d.class_id&&H.append("class_id",d.class_id),d.subject_id&&H.append("subject_id",d.subject_id);const B=await ne.get(`${ie}/analytics/student-results/top-bottom-performers?${H}`,{headers:O});N(B.data.data)}catch(H){n("Failed to fetch top and bottom performers"),console.error("Error fetching top and bottom performers:",H)}finally{r(!1)}},M=async()=>{try{const[H,B]=await Promise.all([ne.get(`${ie}/classes/gradelevel-classes`,{headers:O}),ne.get(`${ie}/classes/subjects`,{headers:O})]);P(H.data.data||[]),$(B.data.data||[])}catch(H){console.error("Error fetching filter data:",H)}},D=(H,B)=>{u(W=>({...W,[H]:B}))},I=()=>{i==="overview"?_():i==="grade-distribution"?E():i==="trends"?A():i==="performers"&&z()},V=({active:H,payload:B,label:W})=>H&&B&&B.length?e.jsxs("div",{className:"bg-white p-3 border border-gray-200 shadow-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:W}),B.map((K,X)=>e.jsxs("p",{className:"text-sm text-gray-600",children:[K.dataKey,": ",K.value]},X))]}):null;return g.useEffect(()=>{M()},[]),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"bg-white border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:Nf,className:"text-gray-600 text-sm"}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Student Results Analytics"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 hover:bg-gray-200",children:[e.jsx(R,{icon:bn,className:"mr-1"}),"Export"]}),e.jsxs("button",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 hover:bg-gray-200",children:[e.jsx(R,{icon:Ln,className:"mr-1"}),"Print"]})]})]})}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:$r,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Year:"}),e.jsx("input",{type:"number",value:d.year,onChange:H=>D("year",parseInt(H.target.value)||new Date().getFullYear()),className:"border border-gray-300 px-2 py-1 text-xs w-20 focus:outline-none focus:border-gray-400",placeholder:"2024",min:"2000",max:"2100"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Term:"}),e.jsxs("select",{value:d.term,onChange:H=>D("term",H.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400",children:[e.jsx("option",{value:"",children:"All Terms"}),e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Class:"}),e.jsxs("select",{value:d.class_id,onChange:H=>D("class_id",H.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400",children:[e.jsx("option",{value:"",children:"All Classes"}),w.map(H=>e.jsx("option",{value:H.id,children:H.name},H.id))]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Subject:"}),e.jsxs("select",{value:d.subject_id,onChange:H=>D("subject_id",H.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400",children:[e.jsx("option",{value:"",children:"All Subjects"}),k.map(H=>e.jsx("option",{value:H.id,children:H.name},H.id))]})]}),e.jsxs("button",{onClick:I,disabled:a,className:"px-4 py-1 text-xs bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:[a?e.jsx(R,{icon:Yr,className:"animate-spin mr-1"}):e.jsx(R,{icon:ua,className:"mr-1"}),"Search"]})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-4",children:[{id:"overview",label:"Academic Overview",icon:Co},{id:"grade-distribution",label:"Grade Distribution",icon:NB},{id:"trends",label:"Performance Trends",icon:_o},{id:"performers",label:"Top/Bottom Performers",icon:Rd}].map(H=>e.jsxs("button",{onClick:()=>o(H.id),className:`py-3 px-1 border-b-2 text-xs font-medium ${i===H.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:H.icon,className:"mr-1"}),H.label]},H.id))})}),e.jsxs("div",{className:"p-4",children:[s&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 text-xs",children:[e.jsx(R,{icon:la,className:"mr-1"}),s]}),i==="overview"&&e.jsx("div",{className:"space-y-6",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Students"}),e.jsx(R,{icon:Mr,className:"text-blue-600"})]}),e.jsx("div",{className:"text-lg font-bold text-blue-900 mt-1",children:m.overview.total_students})]}),e.jsxs("div",{className:"bg-green-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Average Marks"}),e.jsx(R,{icon:PB,className:"text-green-600"})]}),e.jsxs("div",{className:"text-lg font-bold text-green-900 mt-1",children:[m.overview.average_marks,"%"]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-yellow-900",children:"Highest Marks"}),e.jsx(R,{icon:Rd,className:"text-yellow-600"})]}),e.jsxs("div",{className:"text-lg font-bold text-yellow-900 mt-1",children:[m.overview.highest_marks,"%"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Exam Records"}),e.jsx(R,{icon:Co,className:"text-purple-600"})]}),e.jsx("div",{className:"text-lg font-bold text-purple-900 mt-1",children:m.overview.total_exam_records})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Performance Distribution"}),e.jsx(ql,{width:"100%",height:300,children:e.jsxs(ty,{children:[e.jsx($f,{data:[{name:"Excellent (80%+)",value:parseFloat(m.overview.performance_distribution.excellent)},{name:"Good (60-79%)",value:parseFloat(m.overview.performance_distribution.good)},{name:"Average (40-59%)",value:parseFloat(m.overview.performance_distribution.average)},{name:"Poor (<40%)",value:parseFloat(m.overview.performance_distribution.poor)}],cx:"50%",cy:"50%",labelLine:!1,label:({name:H,percent:B})=>`${H} ${(B*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[0,1,2,3].map((H,B)=>e.jsx(qd,{fill:L[B%L.length]},`cell-${B}`))}),e.jsx(zl,{formatter:H=>`${H}%`})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Performance by Class"}),e.jsx("div",{className:"bg-gray-50 p-4",children:e.jsx(ql,{width:"100%",height:300,children:e.jsxs(ey,{data:m.performance_by_class,children:[e.jsx(Od,{strokeDasharray:"3 3"}),e.jsx(gc,{dataKey:"class_name",tick:{fontSize:12},height:40}),e.jsx(yc,{tick:{fontSize:12},tickFormatter:H=>`${H}%`}),e.jsx(zl,{content:e.jsx(V,{})}),e.jsx(Ku,{dataKey:"average_marks",fill:"#3b82f6",radius:[2,2,0,0]})]})})})]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load academic performance overview'})}),i==="grade-distribution"&&e.jsx("div",{className:"space-y-6",children:f&&f.grade_distribution&&f.grade_distribution.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Grade Distribution"}),e.jsx(ql,{width:"100%",height:300,children:e.jsxs(ey,{data:f.grade_distribution,children:[e.jsx(Od,{strokeDasharray:"3 3"}),e.jsx(gc,{dataKey:"grade",tick:{fontSize:12},height:40}),e.jsx(yc,{tick:{fontSize:12}}),e.jsx(zl,{content:e.jsx(V,{})}),e.jsx(Ku,{dataKey:"count",fill:"#10b981",radius:[2,2,0,0]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Grade Details"}),f.grade_distribution.map((H,B)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[e.jsx("span",{className:"text-xs font-medium text-gray-900",children:H.grade}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-900",children:[H.count," students"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[H.percentage,"%"]})]})]},B))]})]}):f&&f.grade_distribution&&f.grade_distribution.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No grade distribution data found for the selected filters"}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load grade distribution'})}),i==="trends"&&e.jsx("div",{className:"space-y-6",children:p?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Performance Trends"}),e.jsx(ql,{width:"100%",height:300,children:e.jsxs(_w,{data:p.trends,children:[e.jsx(Od,{strokeDasharray:"3 3"}),e.jsx(gc,{dataKey:"period_label",tick:{fontSize:12},height:40}),e.jsx(yc,{tick:{fontSize:12},tickFormatter:H=>`${H}%`}),e.jsx(zl,{content:e.jsx(V,{})}),e.jsx(Zy,{type:"monotone",dataKey:"average_marks",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2,r:4}})]})})]})}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load performance trends'})}),i==="performers"&&e.jsx("div",{className:"space-y-6",children:j?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Top Performers"}),e.jsx("div",{className:"space-y-2",children:j.top_performers.map((H,B)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-900",children:H.full_name}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",H.class_name,")"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-900",children:[H.average_marks,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[H.exam_count," exams"]})]})]},B))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Bottom Performers"}),e.jsx("div",{className:"space-y-2",children:j.bottom_performers.map((H,B)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-900",children:H.full_name}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",H.class_name,")"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-900",children:[H.average_marks,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[H.exam_count," exams"]})]})]},B))})]})]})}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load top and bottom performers'})})]})]})})},ide=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState(""),[i,o]=g.useState(""),[d,u]=g.useState(!1),[m,x]=g.useState(!1),[f,b]=g.useState({totalRequests:0,pendingApproval:0,approved:0,delivered:0,totalValue:0}),[p,v]=g.useState([]),[j,N]=g.useState({search:"",status:"",start_date:"",end_date:"",page:1,limit:10});g.useEffect(()=>{w()},[]);const w=async()=>{r(!0),n("");try{const _=await ne.get(`${ie}/procurement/stats`,{headers:{Authorization:`Bearer ${t}`}});b(_.data.data);const E=await ne.get(`${ie}/procurement/purchase-requests`,{params:{page:1,limit:5,sort:"created_at",order:"desc"},headers:{Authorization:`Bearer ${t}`}});v(E.data.data||[])}catch(_){console.error("Error fetching procurement data:",_),n(_.response?.data?.message||"Failed to fetch procurement data"),x(!0)}finally{r(!1)}},P=async _=>{if(window.confirm("Are you sure you want to delete this purchase request?"))try{await ne.delete(`${ie}/procurement/purchase-requests/${_}`,{headers:{Authorization:`Bearer ${t}`}}),o("Purchase request deleted successfully"),u(!0),w()}catch(E){console.error("Error deleting purchase request:",E),n(E.response?.data?.message||"Failed to delete purchase request"),x(!0)}},k=_=>{switch(_){case"pending":return"text-yellow-600 bg-yellow-100";case"approved":return"text-blue-600 bg-blue-100";case"delivered":return"text-green-600 bg-green-100";case"rejected":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},$=_=>{switch(_){case"pending":return rn;case"approved":return Ra;case"delivered":return Sx;case"rejected":return la;default:return la}},O=_=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(_),L=_=>new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return a?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-500",children:"Loading procurement data..."})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Procurement Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage purchase requests and procurement activities"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs(Zt,{to:"/dashboard/procurement/purchase-requests/new",className:"bg-blue-600 text-white px-4 py-2 hover:bg-blue-700 flex items-center space-x-2 text-sm font-medium transition-colors",children:[e.jsx(R,{icon:Ot}),e.jsx("span",{children:"New Purchase Request"})]})})]})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4 shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Requests"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:f.totalRequests})]}),e.jsx("div",{className:"bg-blue-100 p-2",children:e.jsx(R,{icon:og,className:"text-blue-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Pending Approval"}),e.jsx("p",{className:"text-lg font-semibold text-yellow-600",children:f.pendingApproval})]}),e.jsx("div",{className:"bg-yellow-100 p-2",children:e.jsx(R,{icon:rn,className:"text-yellow-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Approved"}),e.jsx("p",{className:"text-lg font-semibold text-blue-600",children:f.approved})]}),e.jsx("div",{className:"bg-blue-100 p-2",children:e.jsx(R,{icon:Ra,className:"text-blue-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Delivered"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:f.delivered})]}),e.jsx("div",{className:"bg-green-100 p-2",children:e.jsx(R,{icon:Sx,className:"text-green-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Value"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:O(f.totalValue)})]}),e.jsx("div",{className:"bg-green-100 p-2",children:e.jsx(R,{icon:Co,className:"text-green-600 text-sm"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[e.jsx(Zt,{to:"/dashboard/procurement/purchase-requests",className:"bg-white border border-gray-200 p-4 hover:border-blue-300 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 p-2",children:e.jsx(R,{icon:og,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Purchase Requests"}),e.jsx("p",{className:"text-xs text-gray-500",children:"View and manage requests"})]})]})}),e.jsx(Zt,{to:"/dashboard/procurement/suppliers",className:"bg-white border border-gray-200 p-4 hover:border-blue-300 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-green-100 p-2",children:e.jsx(R,{icon:ej,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Suppliers"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage vendor relationships"})]})]})}),e.jsx(Zt,{to:"/dashboard/procurement/purchase-orders",className:"bg-white border border-gray-200 p-4 hover:border-blue-300 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-purple-100 p-2",children:e.jsx(R,{icon:qu,className:"text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Purchase Orders"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Track orders and deliveries"})]})]})}),e.jsx(Zt,{to:"/dashboard/procurement/reports",className:"bg-white border border-gray-200 p-4 hover:border-blue-300 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-orange-100 p-2",children:e.jsx(R,{icon:Co,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Reports"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Analytics and insights"})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 hover:border-red-300 hover:shadow-md transition-all cursor-default",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-red-100 p-2",children:e.jsx(R,{icon:_x,className:"text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Admin"}),e.jsx("p",{className:"text-xs text-gray-500",children:"User management & configuration"}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx(Zt,{to:"/dashboard/settings",className:"block text-xs text-blue-600 hover:text-blue-800 font-medium cursor-pointer",onClick:_=>_.stopPropagation(),children:"User Management"}),e.jsx(Zt,{to:"/dashboard/configurations",className:"block text-xs text-green-600 hover:text-green-800 font-medium cursor-pointer",onClick:_=>_.stopPropagation(),children:"System Configurations"})]})]})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Recent Purchase Requests"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Zt,{to:"/dashboard/procurement/purchase-requests",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View All"}),e.jsx("button",{onClick:()=>window.print(),className:"text-gray-600 hover:text-gray-700 p-1",title:"Print",children:e.jsx(R,{icon:Ln,className:"text-sm"})}),e.jsx("button",{onClick:()=>{},className:"text-gray-600 hover:text-gray-700 p-1",title:"Export",children:e.jsx(R,{icon:bn,className:"text-sm"})})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Request"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requester"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.length>0?p.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.title}),e.jsxs("div",{className:"text-xs text-gray-500",children:["#",_.id]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:_.requester})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:_.department})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:O(_.amount)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 text-xs font-medium ${k(_.status)}`,children:[e.jsx(R,{icon:$(_.status),className:"mr-1"}),_.status.charAt(0).toUpperCase()+_.status.slice(1)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:L(_.created_at)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Zt,{to:`/dashboard/procurement/purchase-requests/${_.id}`,className:"text-blue-600 hover:text-blue-900",title:"View Details",children:e.jsx(R,{icon:Ma})}),e.jsx(Zt,{to:`/dashboard/procurement/purchase-requests/${_.id}/edit`,className:"text-green-600 hover:text-green-900",title:"Edit",children:e.jsx(R,{icon:ha})}),e.jsx("button",{onClick:()=>P(_.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(R,{icon:Yt})})]})})]},_.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No purchase requests found"})})})]})})]})]}),e.jsx(cm,{isOpen:d,onClose:()=>u(!1),title:"Success",message:i}),e.jsx(Cc,{isOpen:m,onClose:()=>x(!1),title:"Error",message:s})]})},lde=()=>{const[t,a]=g.useState(""),[r,s]=g.useState("all"),[n,i]=g.useState("all"),o=[{id:1,title:"Office Supplies",requester:"John Doe",department:"Administration",amount:2500,status:"pending",date:"2025-01-15",priority:"medium",description:"Office supplies including paper, pens, and other stationery items"},{id:2,title:"Computer Equipment",requester:"Jane Smith",department:"IT",amount:15e3,status:"approved",date:"2025-01-14",priority:"high",description:"New computers and peripherals for IT department"},{id:3,title:"Laboratory Materials",requester:"Dr. Johnson",department:"Science",amount:8500,status:"delivered",date:"2025-01-13",priority:"high",description:"Laboratory equipment and chemicals for science department"},{id:4,title:"Library Books",requester:"Mary Wilson",department:"Library",amount:3200,status:"pending",date:"2025-01-12",priority:"low",description:"New books for library collection"},{id:5,title:"Sports Equipment",requester:"Coach Brown",department:"Physical Education",amount:4500,status:"approved",date:"2025-01-11",priority:"medium",description:"Sports equipment for physical education classes"},{id:6,title:"Maintenance Tools",requester:"Mike Davis",department:"Facilities",amount:1800,status:"delivered",date:"2025-01-10",priority:"medium",description:"Tools and equipment for facility maintenance"}],d=["Administration","IT","Science","Library","Physical Education","Facilities"],u=["pending","approved","delivered","rejected"],m=v=>{switch(v){case"pending":return"text-yellow-600 bg-yellow-100";case"approved":return"text-blue-600 bg-blue-100";case"delivered":return"text-green-600 bg-green-100";case"rejected":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},x=v=>{switch(v){case"pending":return rn;case"approved":return Ra;case"delivered":return Sx;case"rejected":return la;default:return la}},f=v=>{switch(v){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},b=v=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(v),p=o.filter(v=>{const j=v.title.toLowerCase().includes(t.toLowerCase())||v.requester.toLowerCase().includes(t.toLowerCase())||v.description.toLowerCase().includes(t.toLowerCase()),N=r==="all"||v.status===r,w=n==="all"||v.department===n;return j&&N&&w});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Purchase Requests"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Manage and track purchase requests"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{className:"bg-gray-600 text-white px-3 py-1.5 hover:bg-gray-700 flex items-center space-x-2 text-xs font-medium",children:[e.jsx(R,{icon:bn}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{className:"bg-gray-600 text-white px-3 py-1.5 hover:bg-gray-700 flex items-center space-x-2 text-xs font-medium",children:[e.jsx(R,{icon:Ln}),e.jsx("span",{children:"Print"})]}),e.jsxs(Zt,{to:"/dashboard/procurement/purchase-requests/new",className:"bg-blue-600 text-white px-4 py-2 hover:bg-blue-700 flex items-center space-x-2 text-sm font-medium rounded-md",children:[e.jsx(R,{icon:Ot}),e.jsx("span",{children:"New Request"})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(R,{icon:aa,className:"text-gray-400 text-xs"})}),e.jsx("input",{type:"text",placeholder:"Search requests...",value:t,onChange:v=>a(v.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:$r,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Status:"}),e.jsxs("select",{value:r,onChange:v=>s(v.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 rounded",children:[e.jsx("option",{value:"all",children:"All Status"}),u.map(v=>e.jsx("option",{value:v,children:v.charAt(0).toUpperCase()+v.slice(1)},v))]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:$r,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Department:"}),e.jsxs("select",{value:n,onChange:v=>i(v.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 rounded",children:[e.jsx("option",{value:"all",children:"All Departments"}),d.map(v=>e.jsx("option",{value:v,children:v},v))]})]})]})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Requests"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.length})]}),e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsx(R,{icon:rn,className:"text-blue-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-lg font-semibold text-yellow-600",children:o.filter(v=>v.status==="pending").length})]}),e.jsx("div",{className:"bg-yellow-100 p-2 rounded",children:e.jsx(R,{icon:rn,className:"text-yellow-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Approved"}),e.jsx("p",{className:"text-lg font-semibold text-blue-600",children:o.filter(v=>v.status==="approved").length})]}),e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsx(R,{icon:Ra,className:"text-blue-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Delivered"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:o.filter(v=>v.status==="delivered").length})]}),e.jsx("div",{className:"bg-green-100 p-2 rounded",children:e.jsx(R,{icon:Sx,className:"text-green-600 text-sm"})})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-base font-semibold text-gray-900",children:["Purchase Requests (",p.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Request"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requester"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(v=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.title}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:v.description})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:v.requester})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:v.department})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:b(v.amount)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f(v.priority)}`,children:v.priority.charAt(0).toUpperCase()+v.priority.slice(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m(v.status)}`,children:[e.jsx(R,{icon:x(v.status),className:"mr-1"}),v.status.charAt(0).toUpperCase()+v.status.slice(1)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:new Date(v.date).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Zt,{to:`/dashboard/procurement/purchase-requests/${v.id}`,className:"text-blue-600 hover:text-blue-900",title:"View Details",children:e.jsx(R,{icon:Ma})}),e.jsx(Zt,{to:`/dashboard/procurement/purchase-requests/${v.id}/edit`,className:"text-green-600 hover:text-green-900",title:"Edit Request",children:e.jsx(R,{icon:ha})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",title:"Delete Request",children:e.jsx(R,{icon:Yt})})]})})]},v.id))})]})}),p.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:aa,className:"text-gray-400 text-4xl mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No requests found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your search criteria or filters."})]})]})]})]})},ode=()=>{const[t,a]=g.useState(""),[r,s]=g.useState("all"),[n,i]=g.useState("all"),o=[{id:1,name:"ABC Office Supplies",contactPerson:"John Smith",email:"john.smith@abcoffice.com",phone:"+1 (555) 123-4567",address:"123 Business St, City, State 12345",website:"www.abcoffice.com",category:"Office Supplies",status:"active",rating:4.5,totalOrders:45,totalSpent:125e3,lastOrder:"2025-01-10"},{id:2,name:"Tech Solutions Inc",contactPerson:"Sarah Johnson",email:"sarah.johnson@techsolutions.com",phone:"+1 (555) 234-5678",address:"456 Tech Ave, City, State 12345",website:"www.techsolutions.com",category:"Technology",status:"active",rating:4.8,totalOrders:32,totalSpent:89e3,lastOrder:"2025-01-12"},{id:3,name:"Lab Equipment Pro",contactPerson:"Dr. Michael Brown",email:"michael.brown@labequipment.com",phone:"+1 (555) 345-6789",address:"789 Science Blvd, City, State 12345",website:"www.labequipment.com",category:"Laboratory",status:"active",rating:4.2,totalOrders:18,totalSpent:67e3,lastOrder:"2025-01-08"},{id:4,name:"Book World Publishers",contactPerson:"Emily Davis",email:"emily.davis@bookworld.com",phone:"+1 (555) 456-7890",address:"321 Library Lane, City, State 12345",website:"www.bookworld.com",category:"Books",status:"inactive",rating:3.9,totalOrders:25,totalSpent:45e3,lastOrder:"2024-12-15"},{id:5,name:"Sports Equipment Co",contactPerson:"Coach Wilson",email:"coach.wilson@sportsequipment.com",phone:"+1 (555) 567-8901",address:"654 Sports Way, City, State 12345",website:"www.sportsequipment.com",category:"Sports",status:"active",rating:4.6,totalOrders:12,totalSpent:28e3,lastOrder:"2025-01-05"},{id:6,name:"Maintenance Tools Ltd",contactPerson:"Robert Garcia",email:"robert.garcia@maintools.com",phone:"+1 (555) 678-9012",address:"987 Tool Street, City, State 12345",website:"www.maintools.com",category:"Tools",status:"active",rating:4.3,totalOrders:28,totalSpent:52e3,lastOrder:"2025-01-09"}],d=["Office Supplies","Technology","Laboratory","Books","Sports","Tools"],u=["active","inactive"],m=v=>{switch(v){case"active":return"text-green-600 bg-green-100";case"inactive":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},x=v=>({"Office Supplies":"text-blue-600 bg-blue-100",Technology:"text-purple-600 bg-purple-100",Laboratory:"text-green-600 bg-green-100",Books:"text-orange-600 bg-orange-100",Sports:"text-red-600 bg-red-100",Tools:"text-gray-600 bg-gray-100"})[v]||"text-gray-600 bg-gray-100",f=v=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(v),b=v=>{const j=[],N=Math.floor(v),w=v%1!==0;for(let k=0;k<N;k++)j.push(e.jsx(R,{icon:fx,className:"text-yellow-400 text-xs"},k));w&&j.push(e.jsx(R,{icon:fx,className:"text-yellow-400 text-xs opacity-50"},"half"));const P=5-Math.ceil(v);for(let k=0;k<P;k++)j.push(e.jsx(R,{icon:fx,className:"text-gray-300 text-xs"},`empty-${k}`));return j},p=o.filter(v=>{const j=v.name.toLowerCase().includes(t.toLowerCase())||v.contactPerson.toLowerCase().includes(t.toLowerCase())||v.email.toLowerCase().includes(t.toLowerCase()),N=r==="all"||v.category===r,w=n==="all"||v.status===n;return j&&N&&w});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Suppliers"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Manage vendor relationships and supplier information"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{className:"bg-gray-600 text-white px-3 py-1.5 hover:bg-gray-700 flex items-center space-x-2 text-xs font-medium",children:[e.jsx(R,{icon:bn}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{className:"bg-gray-600 text-white px-3 py-1.5 hover:bg-gray-700 flex items-center space-x-2 text-xs font-medium",children:[e.jsx(R,{icon:Ln}),e.jsx("span",{children:"Print"})]}),e.jsxs(Zt,{to:"/dashboard/procurement/suppliers/new",className:"bg-blue-600 text-white px-4 py-2 hover:bg-blue-700 flex items-center space-x-2 text-sm font-medium rounded-md",children:[e.jsx(R,{icon:Ot}),e.jsx("span",{children:"Add Supplier"})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(R,{icon:aa,className:"text-gray-400 text-xs"})}),e.jsx("input",{type:"text",placeholder:"Search suppliers...",value:t,onChange:v=>a(v.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:$r,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Category:"}),e.jsxs("select",{value:r,onChange:v=>s(v.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 rounded",children:[e.jsx("option",{value:"all",children:"All Categories"}),d.map(v=>e.jsx("option",{value:v,children:v},v))]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:$r,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Status:"}),e.jsxs("select",{value:n,onChange:v=>i(v.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 rounded",children:[e.jsx("option",{value:"all",children:"All Status"}),u.map(v=>e.jsx("option",{value:v,children:v.charAt(0).toUpperCase()+v.slice(1)},v))]})]})]})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Suppliers"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.length})]}),e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsx(R,{icon:Mn,className:"text-blue-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Active Suppliers"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:o.filter(v=>v.status==="active").length})]}),e.jsx("div",{className:"bg-green-100 p-2 rounded",children:e.jsx(R,{icon:Ra,className:"text-green-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-lg font-semibold text-blue-600",children:o.reduce((v,j)=>v+j.totalOrders,0)})]}),e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsx(R,{icon:og,className:"text-blue-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Spent"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:f(o.reduce((v,j)=>v+j.totalSpent,0))})]}),e.jsx("div",{className:"bg-green-100 p-2 rounded",children:e.jsx(R,{icon:Co,className:"text-green-600 text-sm"})})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(v=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:v.name}),e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x(v.category)}`,children:v.category}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m(v.status)}`,children:v.status.charAt(0).toUpperCase()+v.status.slice(1)})]}),e.jsxs("div",{className:"flex items-center mb-2",children:[b(v.rating),e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",v.rating,")"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Zt,{to:`/dashboard/procurement/suppliers/${v.id}`,className:"text-blue-600 hover:text-blue-900",title:"View Details",children:e.jsx(R,{icon:Ma})}),e.jsx(Zt,{to:`/dashboard/procurement/suppliers/${v.id}/edit`,className:"text-green-600 hover:text-green-900",title:"Edit Supplier",children:e.jsx(R,{icon:ha})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",title:"Delete Supplier",children:e.jsx(R,{icon:Yt})})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(R,{icon:Is,className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{children:v.contactPerson})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(R,{icon:TC,className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{children:v.email})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(R,{icon:NN,className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{children:v.phone})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(R,{icon:jc,className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{className:"truncate",children:v.address})]}),v.website&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(R,{icon:AB,className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{children:v.website})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Total Orders"}),e.jsx("p",{className:"font-medium text-gray-900",children:v.totalOrders})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Total Spent"}),e.jsx("p",{className:"font-medium text-gray-900",children:f(v.totalSpent)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Last Order"}),e.jsx("p",{className:"font-medium text-gray-900",children:new Date(v.lastOrder).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Rating"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[v.rating,"/5"]})]})]})})]},v.id))}),p.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:aa,className:"text-gray-400 text-4xl mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No suppliers found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your search criteria or filters."})]})]})]})},cde=()=>{const[t,a]=g.useState(""),[r,s]=g.useState("all"),[n,i]=g.useState("all"),o=[{id:"PO-2025-001",supplier:"ABC Office Supplies",contactPerson:"John Smith",orderDate:"2025-01-10",expectedDelivery:"2025-01-20",actualDelivery:"2025-01-18",status:"delivered",totalAmount:2500,items:[{name:"Printer Paper",quantity:50,unitPrice:25,total:1250},{name:"Pens",quantity:200,unitPrice:2.5,total:500},{name:"Notebooks",quantity:100,unitPrice:7.5,total:750}],notes:"Delivered 2 days early. All items in good condition."},{id:"PO-2025-002",supplier:"Tech Solutions Inc",contactPerson:"Sarah Johnson",orderDate:"2025-01-12",expectedDelivery:"2025-01-25",actualDelivery:null,status:"in_transit",totalAmount:15e3,items:[{name:"Laptops",quantity:10,unitPrice:1200,total:12e3},{name:"Monitors",quantity:10,unitPrice:300,total:3e3}],notes:"Order confirmed. Items being prepared for shipment."},{id:"PO-2025-003",supplier:"Lab Equipment Pro",contactPerson:"Dr. Michael Brown",orderDate:"2025-01-08",expectedDelivery:"2025-01-15",actualDelivery:"2025-01-15",status:"delivered",totalAmount:8500,items:[{name:"Microscopes",quantity:5,unitPrice:1200,total:6e3},{name:"Test Tubes",quantity:500,unitPrice:5,total:2500}],notes:"Delivered on time. Equipment tested and working properly."},{id:"PO-2025-004",supplier:"Sports Equipment Co",contactPerson:"Coach Wilson",orderDate:"2025-01-05",expectedDelivery:"2025-01-12",actualDelivery:null,status:"pending",totalAmount:4500,items:[{name:"Basketballs",quantity:20,unitPrice:50,total:1e3},{name:"Soccer Balls",quantity:15,unitPrice:40,total:600},{name:"Volleyball Nets",quantity:4,unitPrice:200,total:800},{name:"Tennis Rackets",quantity:30,unitPrice:70,total:2100}],notes:"Order submitted. Awaiting supplier confirmation."},{id:"PO-2025-005",supplier:"Maintenance Tools Ltd",contactPerson:"Robert Garcia",orderDate:"2025-01-09",expectedDelivery:"2025-01-16",actualDelivery:"2025-01-14",status:"delivered",totalAmount:1800,items:[{name:"Power Drills",quantity:3,unitPrice:300,total:900},{name:"Tool Sets",quantity:5,unitPrice:180,total:900}],notes:"Delivered early. All tools in excellent condition."},{id:"PO-2025-006",supplier:"Book World Publishers",contactPerson:"Emily Davis",orderDate:"2025-01-11",expectedDelivery:"2025-01-22",actualDelivery:null,status:"confirmed",totalAmount:3200,items:[{name:"Textbooks",quantity:100,unitPrice:25,total:2500},{name:"Reference Books",quantity:20,unitPrice:35,total:700}],notes:"Order confirmed by supplier. Processing for shipment."}],d=["ABC Office Supplies","Tech Solutions Inc","Lab Equipment Pro","Sports Equipment Co","Maintenance Tools Ltd","Book World Publishers"],u=["pending","confirmed","in_transit","delivered","cancelled"],m=v=>{switch(v){case"pending":return"text-yellow-600 bg-yellow-100";case"confirmed":return"text-blue-600 bg-blue-100";case"in_transit":return"text-purple-600 bg-purple-100";case"delivered":return"text-green-600 bg-green-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},x=v=>{switch(v){case"pending":return rn;case"confirmed":return Ra;case"in_transit":return Sx;case"delivered":return Ra;case"cancelled":return la;default:return la}},f=v=>{switch(v){case"pending":return"Pending";case"confirmed":return"Confirmed";case"in_transit":return"In Transit";case"delivered":return"Delivered";case"cancelled":return"Cancelled";default:return v}},b=v=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(v),p=o.filter(v=>{const j=v.id.toLowerCase().includes(t.toLowerCase())||v.supplier.toLowerCase().includes(t.toLowerCase())||v.contactPerson.toLowerCase().includes(t.toLowerCase()),N=r==="all"||v.status===r,w=n==="all"||v.supplier===n;return j&&N&&w});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Purchase Orders"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Track orders and deliveries"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{className:"bg-gray-600 text-white px-3 py-1.5 hover:bg-gray-700 flex items-center space-x-2 text-xs font-medium",children:[e.jsx(R,{icon:bn}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{className:"bg-gray-600 text-white px-3 py-1.5 hover:bg-gray-700 flex items-center space-x-2 text-xs font-medium",children:[e.jsx(R,{icon:Ln}),e.jsx("span",{children:"Print"})]}),e.jsxs(Zt,{to:"/dashboard/procurement/purchase-orders/new",className:"bg-blue-600 text-white px-4 py-2 hover:bg-blue-700 flex items-center space-x-2 text-sm font-medium rounded-md",children:[e.jsx(R,{icon:Ot}),e.jsx("span",{children:"New Order"})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(R,{icon:aa,className:"text-gray-400 text-xs"})}),e.jsx("input",{type:"text",placeholder:"Search orders...",value:t,onChange:v=>a(v.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:$r,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Status:"}),e.jsxs("select",{value:r,onChange:v=>s(v.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 rounded",children:[e.jsx("option",{value:"all",children:"All Status"}),u.map(v=>e.jsx("option",{value:v,children:f(v)},v))]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{icon:$r,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Supplier:"}),e.jsxs("select",{value:n,onChange:v=>i(v.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 rounded",children:[e.jsx("option",{value:"all",children:"All Suppliers"}),d.map(v=>e.jsx("option",{value:v,children:v},v))]})]})]})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.length})]}),e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsx(R,{icon:qu,className:"text-blue-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-lg font-semibold text-yellow-600",children:o.filter(v=>v.status==="pending").length})]}),e.jsx("div",{className:"bg-yellow-100 p-2 rounded",children:e.jsx(R,{icon:rn,className:"text-yellow-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"In Transit"}),e.jsx("p",{className:"text-lg font-semibold text-purple-600",children:o.filter(v=>v.status==="in_transit").length})]}),e.jsx("div",{className:"bg-purple-100 p-2 rounded",children:e.jsx(R,{icon:Sx,className:"text-purple-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Delivered"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:o.filter(v=>v.status==="delivered").length})]}),e.jsx("div",{className:"bg-green-100 p-2 rounded",children:e.jsx(R,{icon:Ra,className:"text-green-600 text-sm"})})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-base font-semibold text-gray-900",children:["Purchase Orders (",p.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expected Delivery"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(v=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.id})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.supplier}),e.jsx("div",{className:"text-sm text-gray-500",children:v.contactPerson})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:new Date(v.orderDate).toLocaleDateString()})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:new Date(v.expectedDelivery).toLocaleDateString()}),v.actualDelivery&&e.jsxs("div",{className:"text-xs text-green-600",children:["Delivered: ",new Date(v.actualDelivery).toLocaleDateString()]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:b(v.totalAmount)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m(v.status)}`,children:[e.jsx(R,{icon:x(v.status),className:"mr-1"}),f(v.status)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Zt,{to:`/dashboard/procurement/purchase-orders/${v.id}`,className:"text-blue-600 hover:text-blue-900",title:"View Details",children:e.jsx(R,{icon:Ma})}),e.jsx(Zt,{to:`/dashboard/procurement/purchase-orders/${v.id}/edit`,className:"text-green-600 hover:text-green-900",title:"Edit Order",children:e.jsx(R,{icon:ha})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",title:"Cancel Order",children:e.jsx(R,{icon:Yt})})]})})]},v.id))})]})}),p.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:aa,className:"text-gray-400 text-4xl mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your search criteria or filters."})]})]})]})]})},dde=()=>{const{token:t}=ut(),a=ga(),[r,s]=g.useState(!1),[n,i]=g.useState(null),[o,d]=g.useState({total_employees:0,current_month_payroll:0,pending_payslips:0,processed_payslips:0}),[u,m]=g.useState([]),[x,f]=g.useState(!1),[b,p]=g.useState(!1),[v,j]=g.useState(null),[N,w]=g.useState({pay_period:new Date().toISOString().slice(0,7),pay_date:new Date().toISOString().split("T")[0],bank_account_id:"",payment_method:"Bank Transfer",reference:"",notes:""}),P=()=>{const B=new Date,W=B.getFullYear(),K=String(B.getMonth()+1).padStart(2,"0"),X=String(B.getDate()).padStart(2,"0"),Q=String(B.getHours()).padStart(2,"0")+String(B.getMinutes()).padStart(2,"0");return`PAY-${W}${K}${X}-${Q}`},[k,$]=g.useState([]),[O,L]=g.useState([]),[_,E]=g.useState([]),A=t?{Authorization:`Bearer ${t}`}:{};g.useEffect(()=>{z(),M(),D()},[]);const z=async()=>{try{s(!0),i(null);const B=await ne.get(`${ie}/payroll/summary`,{headers:A});B.data.success?(d({total_employees:B.data.data.total_employees,current_month_payroll:B.data.data.current_month_payroll,pending_payslips:B.data.data.pending_payslips,processed_payslips:B.data.data.processed_payslips}),m(B.data.data.recent_payrolls||[]),E(B.data.data.currencies||[])):i("Failed to load payroll data")}catch(B){console.error("Error loading payroll data:",B),i("Failed to load payroll data")}finally{s(!1)}},M=async()=>{try{const B=await ne.get(`${ie}/payroll/bank-accounts`,{headers:A});B.data.success?$(B.data.data):i("Failed to load bank accounts")}catch(B){console.error("Error loading bank accounts:",B),i("Failed to load bank accounts")}},D=async()=>{try{const B=await ne.get(`${ie}/payroll/payslips?limit=5`,{headers:A});B.data.success?L(B.data.data):i("Failed to load payslips")}catch(B){console.error("Error loading payslips:",B),i("Failed to load payslips")}},I=async()=>{try{if(!N.bank_account_id){i("Please select a bank account");return}s(!0),i(null);const B=await ne.post(`${ie}/payroll/runs/run`,N,{headers:A});B.data.success?(f(!1),j(B.data.data),p(!0),z(),D()):i(B.data.message||"Failed to run payroll")}catch(B){console.error("Error running payroll:",B),i("Failed to run payroll")}finally{s(!1)}},V=(B,W="USD")=>{if(!_.find(Q=>Q.code===W))return new Intl.NumberFormat("en-US",{style:"currency",currency:W,minimumFractionDigits:0}).format(B);let X="en-US";return W==="USD"?X="en-US":W==="EUR"?X="en-EU":W==="GBP"?X="en-GB":W==="KES"&&(X="en-KE"),new Intl.NumberFormat(X,{style:"currency",currency:W,minimumFractionDigits:0}).format(B)},H=B=>new Date(B).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-medium text-gray-900",children:"Payroll Management"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Create payslips and process payroll"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>a("/dashboard/payroll/create"),className:"bg-blue-600 text-white px-3 py-1.5 text-xs hover:bg-blue-700 flex items-center space-x-1",children:[e.jsx(R,{icon:Ot,className:"text-xs"}),e.jsx("span",{children:"Create Payslip"})]}),e.jsxs("button",{onClick:()=>{w(B=>({...B,reference:P()})),f(!0)},className:"bg-green-600 text-white px-3 py-1.5 text-xs hover:bg-green-700 flex items-center space-x-1",children:[e.jsx(R,{icon:kx,className:"text-xs"}),e.jsx("span",{children:"Run Payroll"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(R,{icon:za,className:"text-blue-600 text-xs"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total Employees"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.total_employees})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(R,{icon:_i,className:"text-green-600 text-xs"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Current Month"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:V(o.current_month_payroll,"USD")})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(R,{icon:qu,className:"text-yellow-600 text-xs"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Pending Payslips"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.pending_payslips})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(R,{icon:sn,className:"text-green-600 text-xs"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Processed"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.processed_payslips})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{onClick:()=>a("/dashboard/payroll/create"),className:"bg-white border border-gray-200 p-4 hover:bg-gray-50 cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(R,{icon:Ot,className:"text-blue-600 text-sm"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Create Payslip"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enter employee details and salary components"})]})]})}),e.jsx("div",{onClick:()=>{w(B=>({...B,reference:P()})),f(!0)},className:"bg-white border border-gray-200 p-4 hover:bg-gray-50 cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(R,{icon:kx,className:"text-green-600 text-sm"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Run Payroll"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Process payments and update accounts"})]})]})}),e.jsx("div",{onClick:()=>a("/dashboard/payroll/payslips"),className:"bg-white border border-gray-200 p-4 hover:bg-gray-50 cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(R,{icon:qu,className:"text-purple-600 text-sm"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"View Payslips"}),e.jsx("p",{className:"text-xs text-gray-500",children:"View and manage all payslips"})]})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Pending Payslips"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Pay Period"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Gross Pay"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Deductions"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Net Pay"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.filter(B=>B.status==="pending").map(B=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:B.employee_name}),e.jsx("div",{className:"text-xs text-gray-500",children:B.employee_id})]})}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:B.pay_period}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:V(B.total_earnings,B.currency)}),e.jsx("td",{className:"px-4 py-2 text-xs text-red-600",children:V(B.total_deductions,B.currency)}),e.jsx("td",{className:"px-4 py-2 text-xs font-medium text-green-600",children:V(B.net_pay,B.currency)}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800",children:"Pending"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("div",{className:"flex space-x-1",children:e.jsx("button",{onClick:()=>a(`/dashboard/payroll/payslips/${B.id}`),className:"text-blue-600 hover:text-blue-800 text-xs",title:"View Details",children:e.jsx(R,{icon:Ma})})})})]},B.id))})]})})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Run Payroll"}),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt,className:"text-xs"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-3 rounded",children:e.jsxs("p",{className:"text-xs text-yellow-800",children:[e.jsx("strong",{children:"Warning:"})," This will process all pending payslips, create bank transactions, and update accounting entries. This action cannot be undone."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Pay Period"}),e.jsx("input",{type:"month",value:N.pay_period,onChange:B=>w({...N,pay_period:B.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Pay Date"}),e.jsx("input",{type:"date",value:N.pay_date,onChange:B=>w({...N,pay_date:B.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Bank Account *"}),e.jsxs("select",{value:N.bank_account_id,onChange:B=>w({...N,bank_account_id:B.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Bank Account"}),k.map(B=>e.jsxs("option",{value:B.id,children:[B.name," - ",V(B.balance,B.currency)]},B.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Payment Method"}),e.jsxs("select",{value:N.payment_method,onChange:B=>w({...N,payment_method:B.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Cheque",children:"Cheque"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reference (Auto-generated)"}),e.jsx("input",{type:"text",value:N.reference,onChange:B=>w({...N,reference:B.target.value}),placeholder:"Auto-generated reference",className:"w-full border border-gray-300 px-2 py-1.5 text-xs bg-gray-50 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",readOnly:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Reference is automatically generated for tracking"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:N.notes,onChange:B=>w({...N,notes:B.target.value}),rows:"3",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>f(!1),className:"px-3 py-1.5 border border-gray-300 text-gray-700 text-xs hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:I,disabled:r,className:"px-3 py-1.5 bg-green-600 text-white text-xs hover:bg-green-700 disabled:opacity-50",children:r?"Processing...":"Run Payroll"})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-6 w-full max-w-md mx-4 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:e.jsx(R,{icon:sn,className:"text-green-600 text-lg"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Payroll Processed Successfully!"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-2 mb-6",children:[v&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Payroll Run ID:"})," #",v.payroll_run_id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payslips Processed:"})," ",v.payslips_processed]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Amount:"})," ",V(v.total_amount,"USD")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pay Period:"})," ",v.pay_period]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pay Date:"})," ",H(v.pay_date)]})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 p-3 rounded mt-4",children:e.jsxs("p",{className:"text-xs text-green-800",children:[e.jsx("strong",{children:""})," Bank transactions created",e.jsx("br",{}),e.jsx("strong",{children:""})," Accounting entries updated",e.jsx("br",{}),e.jsx("strong",{children:""})," Account balances updated",e.jsx("br",{}),e.jsx("strong",{children:""})," Payslips marked as processed"]})})]}),e.jsx("button",{onClick:()=>p(!1),className:"w-full bg-green-600 text-white px-4 py-2 text-sm font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Continue"})]})})}),n&&e.jsx("div",{className:"bg-red-50 border border-red-200 p-3 text-xs text-red-700",children:n})]})},ok="/assets/logo-CJQNE5oC.png",ude=()=>{const{token:t}=ut(),a=ga(),[r]=wk(),[s,n]=g.useState(!1),[i,o]=g.useState(null),[d,u]=g.useState([]),[m,x]=g.useState(""),[f,b]=g.useState(r.get("period")||""),[p,v]=g.useState("all"),[j,N]=g.useState(!1),[w,P]=g.useState(null),[k,$]=g.useState([]),O=t?{Authorization:`Bearer ${t}`}:{};g.useEffect(()=>{L(),_()},[f,p]);const L=async()=>{try{n(!0),o(null);const V=new URLSearchParams;f&&V.append("pay_period",f);const H=await ne.get(`${ie}/payroll/payslips?${V}`,{headers:O});H.data.success?u(H.data.data):o("Failed to load payslips")}catch{o("Failed to load payslips")}finally{n(!1)}},_=async()=>{try{const V=await ne.get(`${ie}/accounting/currencies`,{headers:O});V.data.success?$(V.data.data):o("Failed to load currencies")}catch(V){console.error("Error loading currencies:",V),o("Failed to load currencies")}},E=d.filter(V=>{const H=V.employee_name?.toLowerCase().includes(m.toLowerCase())||V.employee_id?.toLowerCase().includes(m.toLowerCase()),B=!f||V.pay_period===f,W=p==="all"||V.department_name===p;return H&&B&&W}),A=async V=>{try{n(!0);const H=await ne.get(`${ie}/payroll/payslips/${V.id}`,{headers:O});H.data.success?(P(H.data.data),N(!0)):o("Failed to load payslip details")}catch(H){console.error("Error loading payslip details:",H),o("Failed to load payslip details")}finally{n(!1)}},z=async V=>{try{const H=new $t;H.setFont("helvetica"),H.setFontSize(12);const B=new Image;B.src=ok,H.addImage(B,"PNG",20,15,25,18),H.setFontSize(10),H.setFont("helvetica","bold"),H.text(V.employee_name,20,38),H.setFont("helvetica","normal"),H.text(`Employee ID: ${V.employee_id}`,20,44),H.text(`Department: ${V.department_name||"No Department"}`,20,50),H.text(`Job Title: ${V.job_title||"No Job Title"}`,20,56),H.setFontSize(9),H.setFont("helvetica","bold"),H.text("PAY DATE",140,38),H.setFont("helvetica","normal"),H.setFontSize(8),H.text(I(V.pay_date),140,44),H.setFont("helvetica","bold"),H.setFontSize(9),H.text("PAY PERIOD",140,50),H.setFont("helvetica","normal"),H.setFontSize(8),H.text(V.pay_period,140,56),H.setFont("helvetica","bold"),H.setFontSize(9),H.text("PAYSLIP #",140,62),H.setFont("helvetica","normal"),H.setFontSize(8),H.text(V.id.toString(),140,68);let W=75;H.setFontSize(10),H.setFont("helvetica","bold"),H.setFillColor(75,85,99),H.rect(20,W,170,8,"F"),H.setTextColor(255,255,255),H.text("EARNINGS",25,W+6),H.setTextColor(0,0,0),W+=15,H.setFillColor(229,231,235),H.rect(20,W,170,8,"F"),H.setFont("helvetica","bold"),H.text("DESCRIPTION",25,W+6),H.text("AMOUNT",150,W+6),W+=15,H.setFont("helvetica","normal"),V.earnings&&V.earnings.length>0?(V.earnings.forEach((K,X)=>{H.text(K.label,25,W+6),H.text(D(K.amount,K.currency),150,W+6),W+=10}),H.setFillColor(243,244,246),H.rect(20,W,170,8,"F"),H.setFont("helvetica","bold"),H.text("TOTAL EARNINGS",25,W+6),H.text(D(V.total_earnings,V.currency),150,W+6),H.setFont("helvetica","normal")):H.text("No earnings recorded",25,W+6),W+=15,H.setFontSize(10),H.setFont("helvetica","bold"),H.setFillColor(75,85,99),H.rect(20,W,170,8,"F"),H.setTextColor(255,255,255),H.text("DEDUCTIONS",25,W+6),H.setTextColor(0,0,0),W+=15,H.setFillColor(229,231,235),H.rect(20,W,170,8,"F"),H.setFont("helvetica","bold"),H.text("DESCRIPTION",25,W+6),H.text("AMOUNT",150,W+6),W+=15,H.setFont("helvetica","normal"),V.deductions&&V.deductions.length>0?(V.deductions.forEach((K,X)=>{H.text(K.label,25,W+6),H.text(D(K.amount,K.currency),150,W+6),W+=10}),H.setFillColor(243,244,246),H.rect(20,W,170,8,"F"),H.setFont("helvetica","bold"),H.text("TOTAL DEDUCTIONS",25,W+6),H.text(D(V.total_deductions,V.currency),150,W+6),H.setFont("helvetica","normal")):H.text("No deductions recorded",25,W+6),W+=15,H.setFillColor(55,65,81),H.rect(20,W,170,12,"F"),H.setTextColor(255,255,255),H.setFontSize(12),H.setFont("helvetica","bold"),H.text("NET PAY",25,W+8),H.text(D(V.net_pay,V.currency),150,W+8),H.setTextColor(0,0,0),V.notes&&(W+=20,H.setFillColor(249,250,251),H.rect(20,W,170,15,"F"),H.setFontSize(10),H.setFont("helvetica","bold"),H.text("Notes",25,W+6),H.setFont("helvetica","normal"),H.setFontSize(9),H.text(V.notes,25,W+15)),W+=25,H.setFontSize(8),H.text("If you have any questions about this payslip, please contact your HR department.",105,W,{align:"center"}),H.text(`Generated on: ${new Date().toLocaleString()}`,105,W+10,{align:"center"}),H.save(`payslip-${V.employee_id}-${V.pay_period}.pdf`)}catch(H){console.error("Error generating PDF:",H),o("Failed to generate PDF")}},M=V=>{window.print()},D=(V,H="KES")=>k.find(W=>W.code===H)?new Intl.NumberFormat("en-KE",{style:"currency",currency:H,minimumFractionDigits:0}).format(V):new Intl.NumberFormat("en-KE",{style:"currency",currency:H,minimumFractionDigits:0}).format(V),I=V=>new Date(V).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-medium text-gray-900",children:"Employee Payslips"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"View and manage employee payslips"})]}),e.jsx("button",{onClick:()=>a("/dashboard/payroll"),className:"text-gray-600 hover:text-gray-800 text-xs",children:"Back to Payroll"})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search Employee"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:aa,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",value:m,onChange:V=>x(V.target.value),placeholder:"Name or employee number...",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Pay Period"}),e.jsx("input",{type:"month",value:f,onChange:V=>b(V.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Department"}),e.jsxs("select",{value:p,onChange:V=>v(V.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"all",children:"All Departments"}),e.jsx("option",{value:"Teaching",children:"Teaching Staff"}),e.jsx("option",{value:"Administration",children:"Administration"}),e.jsx("option",{value:"Support",children:"Support Staff"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{className:"bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 flex items-center space-x-1",children:[e.jsx(R,{icon:$r,className:"text-xs"}),e.jsx("span",{children:"Filter"})]})})]})}),e.jsxs("div",{className:"bg-white border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("h2",{className:"text-sm font-medium text-gray-900",children:["Payslips (",E.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:E.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:"No payslips found"}),e.jsx("div",{className:"text-gray-400 text-xs mt-1",children:"Try adjusting your filters or create a new payslip"})]}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Department"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Pay Period"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Gross Pay"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Deductions"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Net Pay"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(V=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:V.employee_name}),e.jsx("div",{className:"text-xs text-gray-500",children:V.employee_id})]})}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:V.department_name||"No Department"}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:V.pay_period}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:D(V.total_earnings,V.currency)}),e.jsx("td",{className:"px-4 py-2 text-xs text-red-600",children:D(V.total_deductions,V.currency)}),e.jsx("td",{className:"px-4 py-2 text-xs font-medium text-green-600",children:D(V.net_pay,V.currency)}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${V.status==="processed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:V.status==="processed"?"Processed":"Pending"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>A(V),className:"text-blue-600 hover:text-blue-800 text-xs",title:"View Payslip",children:e.jsx(R,{icon:Ma})}),e.jsx("button",{onClick:()=>z(V),className:"text-green-600 hover:text-green-800 text-xs",title:"Download PDF",children:e.jsx(R,{icon:bn})}),e.jsx("button",{onClick:()=>M(),className:"text-purple-600 hover:text-purple-800 text-xs",title:"Print Payslip",children:e.jsx(R,{icon:Ln})})]})})]},V.id))})]})})]}),j&&w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white w-full max-w-4xl max-h-[95vh] overflow-y-auto mx-4",style:{scrollbarWidth:"thin",scrollbarColor:"#d1d5db #f3f4f6"},children:[e.jsx("div",{className:"flex justify-end p-4",children:e.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt,className:"text-lg"})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("img",{src:ok,alt:"Company Logo",className:"h-8 mb-2"}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:w.employee_name}),e.jsxs("div",{children:["Employee ID: ",w.employee_id]}),e.jsxs("div",{children:["Department: ",w.department_name||"No Department"]}),e.jsxs("div",{children:["Job Title: ",w.job_title||"No Job Title"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"PAY DATE"}),e.jsx("div",{children:I(w.pay_date)})]}),e.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"PAY PERIOD"}),e.jsx("div",{children:w.pay_period})]}),e.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"PAYSLIP #"}),e.jsx("div",{children:w.id})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-gray-600 text-white font-bold p-2",children:"EARNINGS"}),e.jsxs("div",{className:"border border-gray-300",children:[e.jsxs("div",{className:"bg-gray-200 p-2 grid grid-cols-2 gap-4 font-semibold text-xs",children:[e.jsx("div",{children:"DESCRIPTION"}),e.jsx("div",{className:"text-right",children:"AMOUNT"})]}),w.earnings&&w.earnings.length>0?e.jsxs(e.Fragment,{children:[w.earnings.map((V,H)=>e.jsxs("div",{className:"p-2 border-b border-gray-200 grid grid-cols-2 gap-4 text-xs",children:[e.jsx("div",{children:V.label}),e.jsx("div",{className:"text-right",children:D(V.amount,V.currency)})]},H)),e.jsxs("div",{className:"bg-gray-100 p-2 grid grid-cols-2 gap-4 font-bold text-xs",children:[e.jsx("div",{children:"TOTAL EARNINGS"}),e.jsx("div",{className:"text-right",children:D(w.total_earnings,w.currency)})]})]}):e.jsx("div",{className:"p-2 text-xs text-gray-500",children:"No earnings recorded"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-gray-600 text-white font-bold p-2",children:"DEDUCTIONS"}),e.jsxs("div",{className:"border border-gray-300",children:[e.jsxs("div",{className:"bg-gray-200 p-2 grid grid-cols-2 gap-4 font-semibold text-xs",children:[e.jsx("div",{children:"DESCRIPTION"}),e.jsx("div",{className:"text-right",children:"AMOUNT"})]}),w.deductions&&w.deductions.length>0?e.jsxs(e.Fragment,{children:[w.deductions.map((V,H)=>e.jsxs("div",{className:"p-2 border-b border-gray-200 grid grid-cols-2 gap-4 text-xs",children:[e.jsx("div",{children:V.label}),e.jsx("div",{className:"text-right",children:D(V.amount,V.currency)})]},H)),e.jsxs("div",{className:"bg-gray-100 p-2 grid grid-cols-2 gap-4 font-bold text-xs",children:[e.jsx("div",{children:"TOTAL DEDUCTIONS"}),e.jsx("div",{className:"text-right",children:D(w.total_deductions,w.currency)})]})]}):e.jsx("div",{className:"p-2 text-xs text-gray-500",children:"No deductions recorded"})]})]}),e.jsx("div",{className:"bg-gray-700 text-white font-bold p-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm",children:"NET PAY"}),e.jsx("div",{className:"text-sm",children:D(w.net_pay,w.currency)})]})}),w.notes&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-900 mb-1",children:"Notes"}),e.jsx("p",{className:"text-xs text-gray-600",children:w.notes})]}),e.jsx("div",{className:"mt-6 text-center text-xs text-gray-600",children:e.jsx("p",{children:"If you have any questions about this payslip, please contact your HR department."})}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-4 pt-3 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>z(w),className:"px-3 py-1.5 bg-blue-600 text-white text-xs hover:bg-blue-700 flex items-center space-x-1",children:[e.jsx(R,{icon:bn}),e.jsx("span",{children:"Download Payslip"})]}),e.jsxs("button",{onClick:()=>M(),className:"px-3 py-1.5 bg-gray-600 text-white text-xs hover:bg-gray-700 flex items-center space-x-1",children:[e.jsx(R,{icon:Ln}),e.jsx("span",{children:"Print"})]})]})]})]})}),s&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 text-xs text-blue-700",children:"Loading payslips..."}),i&&e.jsx("div",{className:"bg-red-50 border border-red-200 p-3 text-xs text-red-700",children:i})]})},mde=()=>{const{token:t}=ut(),a=ga(),[r,s]=g.useState(!1),[n,i]=g.useState(null),[o,d]=g.useState(null),[u,m]=g.useState({employee_id:"",pay_period:new Date().toISOString().slice(0,7),pay_date:new Date().toISOString().split("T")[0],currency:"KES",payment_method:"bank",bank_account_id:"",notes:""}),[x,f]=g.useState([{id:1,label:"Basic Salary",amount:"",currency:"KES"}]),[b,p]=g.useState([{id:1,label:"PAYE Tax",amount:"",currency:"KES"}]),[v,j]=g.useState([]),[N,w]=g.useState([]),[P,k]=g.useState(!1),[$,O]=g.useState([]),[L,_]=g.useState({bank_name:"",account_number:"",currency:"KES"}),E=t?{Authorization:`Bearer ${t}`}:{};g.useEffect(()=>{A(),z()},[]),g.useEffect(()=>{u.employee_id?M(u.employee_id):w([])},[u.employee_id]);const A=async()=>{try{const Y=await ne.get(`${ie}/employees`,{headers:E});Y.data.success?j(Y.data.data):j([{id:1,name:"John Doe",employee_id:"EMP001",department:"Teaching",job_title:"Mathematics Teacher"},{id:2,name:"Jane Smith",employee_id:"EMP002",department:"Teaching",job_title:"English Teacher"},{id:3,name:"Mary Johnson",employee_id:"EMP003",department:"Administration",job_title:"Accountant"},{id:4,name:"Peter Wilson",employee_id:"EMP004",department:"Support",job_title:"IT Support"},{id:5,name:"Sarah Brown",employee_id:"EMP005",department:"Teaching",job_title:"Science Teacher"}])}catch(Y){console.error("Error loading employees:",Y),i("Failed to load employees")}},z=async()=>{try{const Y=await ne.get(`${ie}/accounting/currencies`,{headers:E});Y.data.success?O(Y.data.data):i("Failed to load currencies")}catch(Y){console.error("Error loading currencies:",Y),i("Failed to load currencies")}},M=async Y=>{try{if(!Y){w([]),k(!1);return}const J=await ne.get(`${ie}/employees/${Y}/bank-accounts`,{headers:E});J.data.success?(w(J.data.data.bankAccounts),k(J.data.data.bankAccounts.length===0)):(w([]),k(!0))}catch(J){console.error("Error loading employee bank accounts:",J),w([]),k(!0)}},D=async()=>{try{if(!L.bank_name||!L.account_number){i("Bank name and account number are required");return}s(!0),i(null);const Y=await ne.post(`${ie}/employees/${u.employee_id}/bank-accounts`,{bankName:L.bank_name,accountNumber:L.account_number,currency:L.currency,isPrimary:!0},{headers:E});Y.data.success?(await M(u.employee_id),m({...u,bank_account_id:Y.data.data.id}),_({bank_name:"",account_number:"",currency:"KES"}),k(!1),d("Bank account added successfully!"),setTimeout(()=>{d(null)},3e3)):i(Y.data.error||"Failed to add bank account")}catch(Y){console.error("Error adding bank account:",Y),i(Y.response?.data?.error||"Failed to add bank account")}finally{s(!1)}},I=()=>{const Y=Math.max(...x.map(J=>J.id),0)+1;f([...x,{id:Y,label:"",amount:"",currency:"KES"}])},V=Y=>{x.length>1&&f(x.filter(J=>J.id!==Y))},H=(Y,J,U)=>{f(x.map(ee=>ee.id===Y?{...ee,[J]:U}:ee))},B=()=>{const Y=Math.max(...b.map(J=>J.id),0)+1;p([...b,{id:Y,label:"",amount:"",currency:"KES"}])},W=Y=>{b.length>1&&p(b.filter(J=>J.id!==Y))},K=(Y,J,U)=>{p(b.map(ee=>ee.id===Y?{...ee,[J]:U}:ee))},X=async()=>{try{if(!u.employee_id){i("Employee is required");return}if(!u.payment_method){i("Payment method is required");return}if(u.payment_method==="bank"&&!u.bank_account_id){i("Bank account is required for bank transfer");return}const Y=x.filter(ee=>ee.label.trim()&&ee.amount);if(Y.length===0){i("At least one earning item is required");return}s(!0),i(null);const J={...u,earnings:Y,deductions:b.filter(ee=>ee.label.trim()&&ee.amount)},U=await ne.post(`${ie}/payroll/payslips`,J,{headers:E});U.data.success?(d("Payslip created successfully!"),m({employee_id:"",pay_period:new Date().toISOString().slice(0,7),pay_date:new Date().toISOString().split("T")[0],currency:"KES",payment_method:"bank",bank_account_id:"",notes:""}),w([]),k(!1),_({bank_name:"",account_number:"",currency:"KES"}),f([{id:1,label:"Basic Salary",amount:"",currency:"KES"}]),p([{id:1,label:"PAYE Tax",amount:"",currency:"KES"}]),setTimeout(()=>{a("/dashboard/payroll")},2e3)):i(U.data.message||"Failed to create payslip")}catch(Y){console.error("Error creating payslip:",Y),i(Y.response?.data?.message||"Failed to create payslip")}finally{s(!1)}},Q=()=>{const Y=x.filter(U=>U.label.trim()&&U.amount).reduce((U,ee)=>U+(parseFloat(ee.amount)||0),0),J=b.filter(U=>U.label.trim()&&U.amount).reduce((U,ee)=>U+(parseFloat(ee.amount)||0),0);return Y-J},ye=(Y,J)=>$.find(ee=>ee.code===J)?new Intl.NumberFormat("en-KE",{style:"currency",currency:J,minimumFractionDigits:0}).format(Y):Y;return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-medium text-gray-900",children:"Create Payslip"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter employee details and salary components"})]})})}),o&&e.jsx("div",{className:"bg-green-50 border border-green-200 p-3 text-xs text-green-700",children:o}),n&&e.jsx("div",{className:"bg-red-50 border border-red-200 p-3 text-xs text-red-700",children:n}),e.jsx("div",{className:"bg-white border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Basic Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Employee *"}),e.jsxs("select",{value:u.employee_id,onChange:Y=>m({...u,employee_id:Y.target.value}),className:"w-full border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Employee"}),v.map(Y=>e.jsxs("option",{value:Y.id,children:[Y.full_name," - ",Y.employee_id," (",Y.department_name||"No Department",")"]},Y.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Pay Period *"}),e.jsx("input",{type:"month",value:u.pay_period,onChange:Y=>m({...u,pay_period:Y.target.value}),className:"w-full border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Pay Date *"}),e.jsx("input",{type:"date",value:u.pay_date,onChange:Y=>m({...u,pay_date:Y.target.value}),className:"w-full border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Default Currency"}),e.jsx("select",{value:u.currency,onChange:Y=>m({...u,currency:Y.target.value}),className:"w-full border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:$.map(Y=>e.jsxs("option",{value:Y.code,children:[Y.code," - ",Y.name]},Y.code))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Payment Method *"}),e.jsxs("select",{value:u.payment_method,onChange:Y=>{m({...u,payment_method:Y.target.value,bank_account_id:Y.target.value==="cash"?"":u.bank_account_id})},className:"w-full border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"bank",children:"Bank Transfer"}),e.jsx("option",{value:"cash",children:"Cash Payment"})]})]}),u.payment_method==="bank"&&u.employee_id&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Bank Account *"}),N.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("select",{value:u.bank_account_id,onChange:Y=>m({...u,bank_account_id:Y.target.value}),className:"w-full border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Bank Account"}),N.map(Y=>e.jsxs("option",{value:Y.id,children:[Y.bank_name," - ",Y.account_number," (",Y.currency,")"]},Y.id))]}),e.jsxs("button",{onClick:()=>k(!0),className:"text-blue-600 hover:text-blue-800 text-xs flex items-center space-x-1",children:[e.jsx(R,{icon:Ot,className:"text-xs"}),e.jsx("span",{children:"Add New Bank Account"})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"No bank accounts found for this employee. Add a new one:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx("input",{type:"text",value:L.bank_name,onChange:Y=>_({...L,bank_name:Y.target.value}),placeholder:"Bank Name",className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})}),e.jsx("div",{children:e.jsx("input",{type:"text",value:L.account_number,onChange:Y=>_({...L,account_number:Y.target.value}),placeholder:"Account Number",className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("select",{value:L.currency,onChange:Y=>_({...L,currency:Y.target.value}),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:$.map(Y=>e.jsx("option",{value:Y.code,children:Y.code},Y.code))}),e.jsx("button",{onClick:D,disabled:r||!L.bank_name||!L.account_number,className:"px-3 py-1 bg-blue-600 text-white text-xs hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Adding...":"Add Account"})]})]}),P&&N.length>0&&e.jsxs("div",{className:"mt-3 p-3 border border-gray-200 rounded bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-700",children:"Add New Bank Account"}),e.jsx("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-gray-700 text-xs",children:e.jsx(R,{icon:Bt})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx("input",{type:"text",value:L.bank_name,onChange:Y=>_({...L,bank_name:Y.target.value}),placeholder:"Bank Name",className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})}),e.jsx("div",{children:e.jsx("input",{type:"text",value:L.account_number,onChange:Y=>_({...L,account_number:Y.target.value}),placeholder:"Account Number",className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx("select",{value:L.currency,onChange:Y=>_({...L,currency:Y.target.value}),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:$.map(Y=>e.jsx("option",{value:Y.code,children:Y.code},Y.code))}),e.jsx("button",{onClick:D,disabled:r||!L.bank_name||!L.account_number,className:"px-3 py-1 bg-blue-600 text-white text-xs hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Adding...":"Add Account"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Earnings"}),e.jsxs("button",{onClick:I,className:"text-blue-600 hover:text-blue-800 text-xs flex items-center space-x-1",children:[e.jsx(R,{icon:Ot,className:"text-xs"}),e.jsx("span",{children:"Add Earning"})]})]}),e.jsx("div",{className:"space-y-3",children:x.map((Y,J)=>e.jsxs("div",{className:"flex items-center space-x-2 p-3 border border-gray-200 rounded",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:Y.label,onChange:U=>H(Y.id,"label",U.target.value),placeholder:"Earning description",className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})}),e.jsx("div",{className:"w-24",children:e.jsx("select",{value:Y.currency,onChange:U=>H(Y.id,"currency",U.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:$.map(U=>e.jsx("option",{value:U.code,children:U.code},U.code))})}),e.jsx("div",{className:"w-32",children:e.jsx("input",{type:"number",value:Y.amount,onChange:U=>H(Y.id,"amount",U.target.value),placeholder:"0",className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})}),x.length>1&&e.jsx("button",{onClick:()=>V(Y.id),className:"text-red-600 hover:text-red-800 text-xs",children:e.jsx(R,{icon:Yt})})]},Y.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Deductions"}),e.jsxs("button",{onClick:B,className:"text-red-600 hover:text-red-800 text-xs flex items-center space-x-1",children:[e.jsx(R,{icon:Ot,className:"text-xs"}),e.jsx("span",{children:"Add Deduction"})]})]}),e.jsx("div",{className:"space-y-3",children:b.map((Y,J)=>e.jsxs("div",{className:"flex items-center space-x-2 p-3 border border-gray-200 rounded",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:Y.label,onChange:U=>K(Y.id,"label",U.target.value),placeholder:"Deduction description",className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})}),e.jsx("div",{className:"w-24",children:e.jsx("select",{value:Y.currency,onChange:U=>K(Y.id,"currency",U.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:$.map(U=>e.jsx("option",{value:U.code,children:U.code},U.code))})}),e.jsx("div",{className:"w-32",children:e.jsx("input",{type:"number",value:Y.amount,onChange:U=>K(Y.id,"amount",U.target.value),placeholder:"0",className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})}),b.length>1&&e.jsx("button",{onClick:()=>W(Y.id),className:"text-red-600 hover:text-red-800 text-xs",children:e.jsx(R,{icon:Yt})})]},Y.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Summary"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Earnings:"}),e.jsx("span",{className:"font-medium",children:ye(x.filter(Y=>Y.label.trim()&&Y.amount).reduce((Y,J)=>Y+(parseFloat(J.amount)||0),0),u.currency)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Deductions:"}),e.jsx("span",{className:"font-medium text-red-600",children:ye(b.filter(Y=>Y.label.trim()&&Y.amount).reduce((Y,J)=>Y+(parseFloat(J.amount)||0),0),u.currency)})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-3",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Net Pay:"}),e.jsx("span",{className:"font-bold text-green-600 text-lg",children:ye(Q(),u.currency)})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Notes"}),e.jsx("textarea",{value:u.notes,onChange:Y=>m({...u,notes:Y.target.value}),rows:"4",className:"w-full border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter any additional notes or comments..."})]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>a("/dashboard/payroll"),className:"px-4 py-2 border border-gray-300 text-gray-700 text-sm hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{onClick:X,disabled:r,className:"px-4 py-2 bg-gray-600 text-white text-sm hover:bg-gray-700 disabled:opacity-50 flex items-center space-x-2",children:[e.jsx(R,{icon:Er,className:"text-sm"}),e.jsx("span",{children:r?"Creating...":"Create Payslip"})]})]})})]})},xde=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState(null),[i,o]=g.useState(null),[d,u]=g.useState([]),[m,x]=g.useState({page:1,limit:10,total:0,pages:0}),[f,b]=g.useState(""),[p,v]=g.useState(""),[j,N]=g.useState(!1),[w,P]=g.useState(null),[k,$]=g.useState({route_name:"",route_code:"",pickup_point:"",dropoff_point:"",weekly_fee:"",currency:"USD"}),O=t?{Authorization:`Bearer ${t}`}:{};g.useEffect(()=>{L()},[]),g.useEffect(()=>{L()},[m.page,f,p]);const L=async()=>{try{r(!0),n(null);const B=new URLSearchParams({page:m.page,limit:m.limit});f&&B.append("search",f),p!==""&&B.append("is_active",p==="active");const W=await ne.get(`${ie}/transport/routes?${B}`,{headers:O});W.data.success&&(u(W.data.data),x(W.data.pagination))}catch(B){console.error("Error loading routes:",B),n("Failed to load routes")}finally{r(!1)}},_=B=>{const{name:W,value:K}=B.target;$(X=>({...X,[W]:K}))},E=()=>{$({route_name:"",route_code:"",pickup_point:"",dropoff_point:"",weekly_fee:"",currency:"USD"}),P(null)},A=(B=null)=>{B?(P(B),$({route_name:B.route_name,route_code:B.route_code,pickup_point:B.pickup_point,dropoff_point:B.dropoff_point,weekly_fee:B.weekly_fee,currency:B.currency})):E(),N(!0)},z=()=>{N(!1),E()},M=async B=>{B.preventDefault();try{r(!0),n(null),w?(await ne.put(`${ie}/transport/routes/${w.id}`,k,{headers:O}),o("Route updated successfully")):(await ne.post(`${ie}/transport/routes`,k,{headers:O}),o("Route created successfully")),z(),L()}catch(W){console.error("Error saving route:",W),n(W.response?.data?.message||"Failed to save route")}finally{r(!1)}},D=async B=>{if(window.confirm("Are you sure you want to delete this route?"))try{r(!0),n(null),await ne.delete(`${ie}/transport/routes/${B}`,{headers:O}),o("Route deleted successfully"),L()}catch(W){console.error("Error deleting route:",W),n(W.response?.data?.message||"Failed to delete route")}finally{r(!1)}},I=async(B,W)=>{try{r(!0),n(null),await ne.put(`${ie}/transport/routes/${B}`,{is_active:!W},{headers:O}),o(`Route ${W?"deactivated":"activated"} successfully`),L()}catch(K){console.error("Error toggling route status:",K),n(K.response?.data?.message||"Failed to toggle route status")}finally{r(!1)}},V=(B,W="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:W,minimumFractionDigits:2}).format(B),H=B=>e.jsx("span",{className:`px-2 py-1 text-xs font-medium ${B?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:B?"Active":"Inactive"});return a&&d.length===0?e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin h-12 w-12 border-b-2 border-gray-600"})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Manage Transport Routes"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Create and manage transport routes for student pickup and dropoff"})]}),e.jsxs("button",{onClick:()=>A(),className:"bg-gray-900 text-white px-4 py-2 text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(R,{icon:Ot,className:"mr-2"}),"Add Route"]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:aa,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search routes...",value:f,onChange:B=>b(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})}),e.jsxs("select",{value:p,onChange:B=>v(B.target.value),className:"px-4 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pickup/Dropoff"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Weekly Fee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(B=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.route_name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Code: ",B.route_code]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(R,{icon:jc,className:"text-green-500 text-xs"}),e.jsx("span",{children:B.pickup_point})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{icon:jc,className:"text-red-500 text-xs"}),e.jsx("span",{children:B.dropoff_point})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900 font-medium",children:V(B.weekly_fee,B.currency)}),e.jsx("div",{className:"text-xs text-gray-500",children:"per week"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:H(B.is_active)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>A(B),className:"text-blue-600 hover:text-blue-900",children:e.jsx(R,{icon:ha})}),e.jsx("button",{onClick:()=>I(B.id,B.is_active),className:`${B.is_active?"text-yellow-600 hover:text-yellow-900":"text-green-600 hover:text-green-900"}`,children:B.is_active?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>D(B.id),className:"text-red-600 hover:text-red-900",children:e.jsx(R,{icon:Yt})})]})})]},B.id))})]})}),m.pages>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>x(B=>({...B,page:B.page-1})),disabled:m.page===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>x(B=>({...B,page:B.page+1})),disabled:m.page===m.pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(m.page-1)*m.limit+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(m.page*m.limit,m.total)})," ","of ",e.jsx("span",{className:"font-medium",children:m.total})," results"]})}),e.jsx("div",{children:e.jsx("nav",{className:"relative z-0 inline-flex shadow-sm -space-x-px",children:Array.from({length:m.pages},(B,W)=>W+1).map(B=>e.jsx("button",{onClick:()=>x(W=>({...W,page:B})),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${B===m.page?"z-10 bg-gray-50 border-gray-500 text-gray-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:B},B))})})]})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:w?"Edit Route":"Add New Route"}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Route Name"}),e.jsx("input",{type:"text",name:"route_name",value:k.route_name,onChange:_,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Route Code"}),e.jsx("input",{type:"text",name:"route_code",value:k.route_code,onChange:_,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Pickup Point"}),e.jsx("input",{type:"text",name:"pickup_point",value:k.pickup_point,onChange:_,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dropoff Point"}),e.jsx("input",{type:"text",name:"dropoff_point",value:k.dropoff_point,onChange:_,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Weekly Fee"}),e.jsxs("div",{className:"mt-1 relative shadow-sm",children:[e.jsx("input",{type:"number",name:"weekly_fee",value:k.weekly_fee,onChange:_,step:"0.01",min:"0",required:!0,className:"block w-full pr-12 px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 sm:text-sm",children:k.currency})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Currency"}),e.jsxs("select",{name:"currency",value:k.currency,onChange:_,className:"mt-1 block w-full px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"GBP",children:"GBP"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:a,className:"flex-1 bg-gray-900 hover:bg-gray-800 text-white px-4 py-2 disabled:opacity-50",children:a?"Saving...":w?"Update Route":"Create Route"}),e.jsx("button",{type:"button",onClick:z,className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2",children:"Cancel"})]})]})]})})}),i&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 shadow-lg z-50",children:i}),s&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 shadow-lg z-50",children:s})]})})},hde=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState(null),[i,o]=g.useState(null),[d,u]=g.useState([]),[m,x]=g.useState([]),[f,b]=g.useState([]),[p,v]=g.useState({page:1,limit:10,total:0,pages:0}),[j,N]=g.useState(""),[w,P]=g.useState(""),[k,$]=g.useState(""),O=t?{Authorization:`Bearer ${t}`}:{};g.useEffect(()=>{L(),_(),E()},[]),g.useEffect(()=>{E()},[p.page,j,w,k]);const L=async()=>{try{const I=await ne.get(`${ie}/transport/routes?limit=100`,{headers:O});I.data.success&&x(I.data.data)}catch(I){console.error("Error loading routes:",I)}},_=async()=>{try{const I=await ne.get(`${ie}/students?limit=1000`,{headers:O});I.data.success&&b(I.data.data)}catch(I){console.error("Error loading students:",I)}},E=async()=>{try{r(!0),n(null);const I=new URLSearchParams({page:p.page,limit:p.limit});j&&I.append("search",j),w&&I.append("route_id",w),k&&I.append("status",k);const V=await ne.get(`${ie}/transport/registrations?${I}`,{headers:O});V.data.success&&(u(V.data.data),v(V.data.pagination))}catch(I){console.error("Error loading registrations:",I),n("Failed to load registrations")}finally{r(!1)}},A=async I=>{if(window.confirm("Are you sure you want to delete this registration? This action cannot be undone."))try{r(!0),await ne.delete(`${ie}/transport/registrations/${I}`,{headers:O}),o("Registration deleted successfully"),E()}catch(V){console.error("Error deleting registration:",V),n(V.response?.data?.message||"Failed to delete registration")}finally{r(!1)}},z=(I,V="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:V}).format(I),M=I=>new Date(I).toLocaleDateString(),D=I=>e.jsx("span",{className:`px-2 py-1 text-xs font-medium ${I?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I?"Active":"Inactive"});return e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Student Transport Registration"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Register students for transport pickup and dropoff"})]}),e.jsxs(Zt,{to:"/dashboard/transport/registrations/add",className:"bg-gray-900 text-white px-4 py-2 text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(R,{icon:Ot,className:"mr-2"}),"Register Student"]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by student name or registration number...",value:j,onChange:I=>N(I.target.value),className:"w-full px-3 py-2 pl-10 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"}),e.jsx(R,{icon:aa,className:"absolute left-3 top-3 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route"}),e.jsxs("select",{value:w,onChange:I=>P(I.target.value),className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Routes"}),m.filter(I=>I.is_active).map(I=>e.jsx("option",{value:I.id,children:I.route_name},I.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:k,onChange:I=>$(I.target.value),className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{N(""),P(""),$("")},className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 text-xs",children:"Clear Filters"})})]})}),e.jsxs("div",{className:"bg-white border border-gray-200",children:[a?e.jsx("div",{className:"p-8 text-center",children:e.jsx("div",{className:"text-gray-500",children:"Loading registrations..."})}):d.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(R,{icon:Is,className:"text-4xl text-gray-300 mb-4"}),e.jsx("div",{className:"text-gray-500",children:"No registrations found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pickup/Dropoff"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Weekly Fee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(I=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:I.student_name}),e.jsxs("div",{className:"text-gray-500 text-xs",children:["Reg: ",I.student_reg_number]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I.route_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["From: ",I.pickup_point]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["To: ",I.dropoff_point]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M(I.start_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z(I.weekly_fee,I.currency)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D(I.is_active)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>A(I.id),className:"text-red-600 hover:text-red-900",title:"Delete Registration",children:e.jsx(R,{icon:Yt})})})})]},I.id))})]})}),p.pages>1&&e.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>v(I=>({...I,page:I.page-1})),disabled:p.page===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>v(I=>({...I,page:I.page+1})),disabled:p.page===p.pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(p.page-1)*p.limit+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(p.page*p.limit,p.total)})," ","of ",e.jsx("span",{className:"font-medium",children:p.total})," results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>v(I=>({...I,page:I.page-1})),disabled:p.page===1,className:"relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),Array.from({length:p.pages},(I,V)=>V+1).map(I=>e.jsx("button",{onClick:()=>v(V=>({...V,page:I})),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${I===p.page?"z-10 bg-gray-900 border-gray-900 text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:I},I)),e.jsx("button",{onClick:()=>v(I=>({...I,page:I.page+1})),disabled:p.page===p.pages,className:"relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]})})]}),i&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 shadow-lg z-50",children:i}),s&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 shadow-lg z-50",children:s})]})})},fde=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState(null),[i,o]=g.useState(null),[d,u]=g.useState([]),[m,x]=g.useState([]),[f,b]=g.useState({page:1,limit:10,total:0,pages:0}),[p,v]=g.useState(""),[j,N]=g.useState(""),[w,P]=g.useState(""),[k,$]=g.useState(""),[O,L]=g.useState(!1),[_,E]=g.useState(!1),[A,z]=g.useState(null),[M,D]=g.useState({week_start_date:"",week_end_date:""}),[I,V]=g.useState({payment_date:"",amount:"",payment_method:"Cash",notes:""}),H=t?{Authorization:`Bearer ${t}`}:{};g.useEffect(()=>{B(),W()},[]),g.useEffect(()=>{W()},[f.page,p,j,w,k]);const B=async()=>{try{const U=await ne.get(`${ie}/transport/routes?limit=100`,{headers:H});U.data.success&&x(U.data.data)}catch(U){console.error("Error loading routes:",U)}},W=async()=>{try{r(!0),n(null);const U=new URLSearchParams({page:f.page,limit:f.limit});p&&U.append("search",p),j&&U.append("status",j),w&&U.append("route_id",w),k&&U.append("week_start",k);const ee=await ne.get(`${ie}/transport/fees?${U}`,{headers:H});ee.data.success&&(console.log(" Fees received from API:",ee.data.data),ee.data.data.length>0&&(console.log(" First fee structure:",ee.data.data[0]),console.log(" student_reg_number field:",ee.data.data[0].student_reg_number)),u(ee.data.data),b(ee.data.pagination))}catch(U){console.error("Error loading fees:",U),n("Failed to load fees")}finally{r(!1)}},K=async U=>{U.preventDefault();try{r(!0),n(null);const ee=await ne.post(`${ie}/transport/fees/generate`,M,{headers:H});ee.data.success&&(o(`Weekly fees generated successfully! ${ee.data.data.fees_created} fees created, ${ee.data.data.fees_skipped} skipped.`),L(!1),D({week_start_date:"",week_end_date:""}),W())}catch(ee){console.error("Error generating fees:",ee),n(ee.response?.data?.message||"Failed to generate weekly fees")}finally{r(!1)}},X=async U=>{U.preventDefault();try{r(!0),n(null);const ee={...I,transport_fee_id:A.id,student_reg_number:A.student_reg_number||A.student_number,currency:A.currency};console.log(" Payment data being sent:",ee),console.log(" Selected fee:",A),console.log(" Selected fee keys:",Object.keys(A)),console.log(" student_reg_number value:",A.student_reg_number),console.log(" student_number value:",A.student_number),console.log(" Final student_reg_number:",A.student_reg_number||A.student_number);const he=await ne.post(`${ie}/transport/payments`,ee,{headers:H});he.data.success&&(o(`Payment recorded successfully! Reference: ${he.data.data.reference_number}`),E(!1),z(null),V({payment_date:"",amount:"",payment_method:"Cash",notes:""}),W())}catch(ee){console.error("Error recording payment:",ee),n(ee.response?.data?.message||"Failed to record payment")}finally{r(!1)}},Q=U=>{console.log(" Fee data for payment:",U),z(U),V({payment_date:new Date().toISOString().split("T")[0],amount:U.amount.toString(),payment_method:"Cash",notes:""}),E(!0)},ye=(U,ee="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:ee,minimumFractionDigits:2}).format(U),Y=U=>new Date(U).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),J=U=>{switch(U){case"Paid":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(R,{icon:Ra,className:"mr-1"}),"Paid"]});case"Pending":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(R,{icon:la,className:"mr-1"}),"Pending"]});case"Overdue":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(R,{icon:Zu,className:"mr-1"}),"Overdue"]});default:return e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800",children:"Unknown"})}};return a&&d.length===0?e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin h-12 w-12 border-b-2 border-gray-600"})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Weekly Transport Fees"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Manage weekly transport fees and payments"})]}),e.jsxs("button",{onClick:()=>L(!0),className:"bg-gray-900 text-white px-4 py-2 text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(R,{icon:Ot,className:"mr-2"}),"Generate Weekly Fees"]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:aa,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search students or routes...",value:p,onChange:U=>v(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})}),e.jsxs("select",{value:j,onChange:U=>N(U.target.value),className:"px-4 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Paid",children:"Paid"}),e.jsx("option",{value:"Overdue",children:"Overdue"})]}),e.jsxs("select",{value:w,onChange:U=>P(U.target.value),className:"px-4 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Routes"}),m.map(U=>e.jsx("option",{value:U.id,children:U.route_name},U.id))]}),e.jsx("input",{type:"date",placeholder:"Week starting...",value:k,onChange:U=>$(U.target.value),className:"px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Week"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(U=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.student_name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",U.student_number]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.route_name}),e.jsx("div",{className:"text-sm text-gray-500",children:U.route_code})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{icon:ua,className:"text-blue-500 text-xs"}),e.jsxs("span",{children:[Y(U.week_start_date)," - ",Y(U.week_end_date)]})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 font-medium",children:ye(U.amount,U.currency)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:Y(U.due_date)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:J(U.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:U.status!=="Paid"&&e.jsxs("button",{onClick:()=>Q(U),className:"text-blue-600 hover:text-blue-900 flex items-center gap-2",children:[e.jsx(R,{icon:_i}),"Record Payment"]})})]},U.id))})]})}),f.pages>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>b(U=>({...U,page:U.page-1})),disabled:f.page===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>b(U=>({...U,page:U.page+1})),disabled:f.page===f.pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(f.page-1)*f.limit+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(f.page*f.limit,f.total)})," ","of ",e.jsx("span",{className:"font-medium",children:f.total})," results"]})}),e.jsx("div",{children:e.jsx("nav",{className:"relative z-0 inline-flex shadow-sm -space-x-px",children:Array.from({length:f.pages},(U,ee)=>ee+1).map(U=>e.jsx("button",{onClick:()=>b(ee=>({...ee,page:U})),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${U===f.page?"z-10 bg-gray-50 border-gray-500 text-gray-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:U},U))})})]})]})]}),O&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Generate Weekly Fees"}),e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Week Start Date (Monday)"}),e.jsx("input",{type:"date",name:"week_start_date",value:M.week_start_date,onChange:U=>D(ee=>({...ee,week_start_date:U.target.value})),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Week End Date (Sunday)"}),e.jsx("input",{type:"date",name:"week_end_date",value:M.week_end_date,onChange:U=>D(ee=>({...ee,week_end_date:U.target.value})),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:a,className:"flex-1 bg-gray-900 hover:bg-gray-800 text-white px-4 py-2 rounded-md disabled:opacity-50",children:a?"Generating...":"Generate Fees"}),e.jsx("button",{type:"button",onClick:()=>L(!1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2",children:"Cancel"})]})]})]})})}),_&&A&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Record Payment"}),e.jsx("div",{className:"mb-4 p-3 bg-gray-50",children:e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Student:"})," ",A.student_name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Route:"})," ",A.route_name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Week:"})," ",Y(A.week_start_date)," - ",Y(A.week_end_date)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Amount Due:"})," ",ye(A.amount,A.currency)]})]})}),e.jsxs("form",{onSubmit:X,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Date"}),e.jsx("input",{type:"date",name:"payment_date",value:I.payment_date,onChange:U=>V(ee=>({...ee,payment_date:U.target.value})),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),e.jsx("input",{type:"number",name:"amount",value:I.amount,onChange:U=>V(ee=>({...ee,amount:U.target.value})),step:"0.01",min:"0",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Method"}),e.jsxs("select",{name:"payment_method",value:I.payment_method,onChange:U=>V(ee=>({...ee,payment_method:U.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Cheque",children:"Cheque"}),e.jsx("option",{value:"Mobile Money",children:"Mobile Money"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notes (Optional)"}),e.jsx("textarea",{name:"notes",value:I.notes,onChange:U=>V(ee=>({...ee,notes:U.target.value})),rows:"3",className:"mt-1 block w-full px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:a,className:"flex-1 bg-gray-900 hover:bg-gray-800 text-white px-4 py-2 disabled:opacity-50",children:a?"Recording...":"Record Payment"}),e.jsx("button",{type:"button",onClick:()=>E(!1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2",children:"Cancel"})]})]})]})})}),i&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 shadow-lg z-50",children:i}),s&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 shadow-lg z-50",children:s})]})})},pde=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState(null),[i,o]=g.useState([]),[d,u]=g.useState([]),[m,x]=g.useState(""),[f,b]=g.useState(""),p=t?{Authorization:`Bearer ${t}`}:{};g.useEffect(()=>{v();const L=new Date,_=new Date(L),E=L.getDay(),A=L.getDate()-E+(E===0?-6:1);_.setDate(A),x(_.toISOString().split("T")[0])},[]),g.useEffect(()=>{m&&j()},[m,f]);const v=async()=>{try{const L=await ne.get(`${ie}/transport/routes?limit=100`,{headers:p});L.data.success&&u(L.data.data)}catch(L){console.error("Error loading routes:",L)}},j=async()=>{try{r(!0),n(null);const L=new URLSearchParams({week_start_date:m});f&&L.append("route_id",f);const _=await ne.get(`${ie}/transport/schedules/weekly?${L}`,{headers:p});_.data.success&&o(_.data.data)}catch(L){console.error("Error loading weekly schedule:",L),n("Failed to load weekly schedule")}finally{r(!1)}},N=L=>new Date(`2000-01-01T${L}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),w=L=>new Date(L).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"short",day:"numeric"}),P=L=>{switch(L){case"Paid":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(R,{icon:Ra,className:"mr-1"}),"Paid"]});case"Pending":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(R,{icon:la,className:"mr-1"}),"Pending"]});case"Overdue":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(R,{icon:Zu,className:"mr-1"}),"Overdue"]});default:return e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Unknown"})}},k=L=>({Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:0})[L]||0,$=L=>L.sort((_,E)=>{const A=k(_.day_of_week),z=k(E.day_of_week);return A!==z?A-z:_.pickup_time.localeCompare(E.pickup_time)}),O=()=>{const L=$(i),_={};return L.forEach(E=>{_[E.day_of_week]||(_[E.day_of_week]=[]),_[E.day_of_week].push(E)}),_};return a&&i.length===0?e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-600"})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Weekly Transport Schedule"}),e.jsx("p",{className:"text-xs text-gray-600",children:"View transport schedule and student payment status for the week"})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Week Starting"}),e.jsx("input",{type:"date",value:m,onChange:L=>x(L.target.value),className:"px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route (Optional)"}),e.jsxs("select",{value:f,onChange:L=>b(L.target.value),className:"px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Routes"}),d.map(L=>e.jsx("option",{value:L.id,children:L.route_name},L.id))]})]})]})}),i.length===0?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-8 text-center",children:[e.jsx(R,{icon:ua,className:"text-gray-400 text-4xl mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Schedule Found"}),e.jsx("p",{className:"text-sm text-gray-500",children:m?`No transport schedule found for the week starting ${w(m)}`:"Please select a week to view the schedule"})]}):e.jsx("div",{className:"space-y-6",children:Object.entries(O()).map(([L,_])=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:L})}),e.jsx("div",{className:"divide-y divide-gray-200",children:_.map((E,A)=>e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-3 mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{icon:ug,className:"text-blue-500 text-sm"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:E.route_name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",E.route_code,")"]})]})}),e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{icon:rn,className:"text-green-500 text-xs"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Pickup: ",N(E.pickup_time)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{icon:rn,className:"text-red-500 text-xs"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Dropoff: ",N(E.dropoff_time)]})]})]}),E.students&&E.students.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:["Registered Students (",E.students.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:E.students.map((z,M)=>e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(R,{icon:Mr,className:"text-blue-500 text-xs"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:z.student_name})]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["ID: ",z.student_reg_number]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-gray-600",children:["Fee: ",z.weekly_fee," ",z.currency]}),z.payment_status&&e.jsx("div",{className:"ml-2",children:P(z.payment_status)})]})]},M))})]}):e.jsxs("div",{className:"text-sm text-gray-500 italic",children:["No students registered for this route on ",L]})]})})},`${L}-${A}`))})]},L))}),s&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",children:s})]})})},gde=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState(null),[i,o]=g.useState(null),[d,u]=g.useState([]),[m,x]=g.useState([]),[f,b]=g.useState([]),[p,v]=g.useState([]),[j,N]=g.useState(""),[w,P]=g.useState(!1),[k,$]=g.useState(null),[O,L]=g.useState({page:1,limit:10,total:0,pages:0}),[_,E]=g.useState(""),[A,z]=g.useState(""),[M,D]=g.useState(""),[I,V]=g.useState(!1),[H,B]=g.useState(null),[W,K]=g.useState({route_id:"",student_reg_number:"",payment_date:"",amount:"",currency_id:"",payment_method:"",reference:"",notes:""}),X=t?{Authorization:`Bearer ${t}`}:{};g.useEffect(()=>{Q(),he(),ye()},[]),g.useEffect(()=>{he()},[O.page,_,A,M]),g.useEffect(()=>{const Se=Ge=>{Ge.target.closest(".student-search-container")||P(!1)};return document.addEventListener("mousedown",Se),()=>{document.removeEventListener("mousedown",Se)}},[]);const Q=async()=>{try{const Se=await ne.get(`${ie}/transport/routes?limit=100`,{headers:X});Se.data.success&&x(Se.data.data)}catch(Se){console.error("Error loading routes:",Se)}},ye=async()=>{try{const Ge=(await ne.get(`${ie}/accounting/currencies`,{headers:X})).data.data||[];v(Ge);const ve=Ge.find(Me=>Me.base_currency);ve&&!W.currency_id&&K(Me=>({...Me,currency_id:ve.id}))}catch(Se){console.error("Error loading currencies:",Se),n("Failed to load currencies")}},Y=async Se=>{if(!Se.trim()){b([]);return}try{try{const ve=await ne.get(`${ie}/students/${Se}`,{headers:X});if(ve.data.success){b([ve.data.data]);return}}catch{}const Ge=await ne.get(`${ie}/students/search?query=${Se}`,{headers:X});Ge.data.success&&b(Ge.data.data)}catch(Ge){console.error("Error searching students:",Ge),b([])}},J=Se=>{const Ge=Se.target.value;N(Ge),Ge.trim()?(Y(Ge),P(!0)):(b([]),P(!1),$(null),K(ve=>({...ve,student_reg_number:""})))},U=Se=>{$(Se),N(`${Se.Name} ${Se.Surname} (${Se.RegNumber})`),K(Ge=>({...Ge,student_reg_number:Se.RegNumber})),P(!1)},ee=()=>{const Se=Date.now(),Ge=Math.random().toString(36).substr(2,9).toUpperCase(),ve=`TRP-${Se}-${Ge}`;K(Me=>({...Me,reference:ve}))},he=async()=>{try{r(!0),n(null);const Se=new URLSearchParams({page:O.page,limit:O.limit});_&&Se.append("search",_),A&&Se.append("status",A),M&&Se.append("date",M);const Ge=await ne.get(`${ie}/transport/payments?${Se}`,{headers:X});Ge.data.success&&(u(Ge.data.data),L(Ge.data.pagination))}catch(Se){console.error("Error loading payments:",Se),n("Failed to load payments")}finally{r(!1)}},pe=Se=>{const{name:Ge,value:ve}=Se.target;K(Me=>({...Me,[Ge]:ve}))},se=()=>{const Se=p.find(Ge=>Ge.base_currency);K({route_id:"",student_reg_number:"",payment_date:"",amount:"",currency_id:Se?.id||"",payment_method:"",reference:"",notes:""}),N(""),$(null),B(null)},te=(Se=null)=>{Se?(B(Se),K({route_id:Se.route_id||"",student_reg_number:Se.student_reg_number||"",payment_date:Se.payment_date,amount:Se.amount,currency_id:Se.currency_id||"",payment_method:Se.payment_method,reference:Se.reference_number||"",notes:Se.notes||""}),N(Se.student_name||"")):se(),V(!0)},ue=()=>{V(!1),se()},ge=async Se=>{Se.preventDefault();try{if(r(!0),n(null),!W.route_id||!W.student_reg_number){n("Please select both route and student");return}const Ge={route_id:parseInt(W.route_id),student_reg_number:W.student_reg_number,payment_date:W.payment_date,amount:parseFloat(W.amount),currency_id:W.currency_id,payment_method:W.payment_method,reference:W.reference.trim()||null,notes:W.notes.trim()||null};H?(await ne.put(`${ie}/transport/payments/${H.id}`,Ge,{headers:X}),o("Payment updated successfully")):(await ne.post(`${ie}/transport/payments/direct`,Ge,{headers:X}),o("Payment recorded successfully")),ue(),he()}catch(Ge){console.error("Error saving payment:",Ge),n(Ge.response?.data?.message||"Failed to save payment")}finally{r(!1)}},ce=async Se=>{if(window.confirm("Are you sure you want to delete this payment?"))try{r(!0),await ne.delete(`${ie}/transport/payments/${Se}`,{headers:X}),o("Payment deleted successfully"),he()}catch(Ge){console.error("Error deleting payment:",Ge),n(Ge.response?.data?.message||"Failed to delete payment")}finally{r(!1)}},De=(Se,Ge="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:Ge}).format(Se),ke=Se=>new Date(Se).toLocaleDateString(),re=Se=>{const Ge={paid:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",overdue:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium ${Ge[Se]||"bg-gray-100 text-gray-800"}`,children:Se?.charAt(0).toUpperCase()+Se?.slice(1)})},Ee=Se=>({cash:Ia,card:On,bank_transfer:df,mobile_money:On})[Se]||On;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900 mb-2",children:"Transport Payments"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Track and manage transport fee payments"})]}),e.jsx("div",{className:"bg-white p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by student name or reference...",value:_,onChange:Se=>E(Se.target.value),className:"w-full px-3 py-2 pl-10 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"}),e.jsx(R,{icon:aa,className:"absolute left-3 top-3 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:A,onChange:Se=>z(Se.target.value),className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:M,onChange:Se=>D(Se.target.value),className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:()=>te(),className:"w-full bg-gray-900 hover:bg-gray-800 text-white px-4 py-2 flex items-center justify-center",children:[e.jsx(R,{icon:Ot,className:"mr-2"}),"Record Payment"]})})]})}),e.jsxs("div",{className:"bg-white",children:[a?e.jsx("div",{className:"p-8 text-center",children:e.jsx("div",{className:"text-gray-500",children:"Loading payments..."})}):d.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(R,{icon:On,className:"text-4xl text-gray-300 mb-4"}),e.jsx("div",{className:"text-gray-500",children:"No payments found"})]}):e.jsx("div",{className:"overflow-x-auto border border-gray-200/30 rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Date"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(Se=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:Se.student_name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:Se.route_name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:ke(Se.payment_date)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900 text-right",children:De(Se.amount,Se.currency)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:Ee(Se.payment_method),className:"mr-2 text-gray-400"}),Se.payment_method?.replace("_"," ")]})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs",children:re(Se.status)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:Se.reference_number||"N/A"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-500",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>te(Se),className:"text-gray-600 hover:text-gray-900",children:e.jsx(R,{icon:ha})}),e.jsx("button",{onClick:()=>ce(Se.id),className:"text-red-600 hover:text-red-900",children:e.jsx(R,{icon:Yt})})]})})]},Se.id))})]})}),O.pages>1&&e.jsx("div",{className:"bg-white px-4 py-3 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>L(Se=>({...Se,page:Se.page-1})),disabled:O.page===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>L(Se=>({...Se,page:Se.page+1})),disabled:O.page===O.pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(O.page-1)*O.limit+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(O.page*O.limit,O.total)})," ","of ",e.jsx("span",{className:"font-medium",children:O.total})," results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>L(Se=>({...Se,page:Se.page-1})),disabled:O.page===1,className:"relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),Array.from({length:O.pages},(Se,Ge)=>Ge+1).map(Se=>e.jsx("button",{onClick:()=>L(Ge=>({...Ge,page:Se})),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${Se===O.page?"z-10 bg-gray-900 border-gray-900 text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:Se},Se)),e.jsx("button",{onClick:()=>L(Se=>({...Se,page:Se.page+1})),disabled:O.page===O.pages,className:"relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]})})]}),I&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 w-full max-w-2xl bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:H?"Edit Payment":"Record Transport Payment"}),e.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Route"}),e.jsxs("select",{name:"route_id",value:W.route_id,onChange:pe,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Route"}),m.filter(Se=>Se.is_active).map(Se=>e.jsxs("option",{value:Se.id,children:[Se.route_name," - ",Se.weekly_fee," ",Se.currency]},Se.id))]})]}),e.jsxs("div",{className:"student-search-container relative",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Student Registration Number"}),e.jsx("input",{type:"text",value:j,onChange:J,placeholder:"Enter student registration number...",className:"mt-1 block w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0}),w&&f.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:f.map(Se=>e.jsxs("div",{onClick:()=>U(Se),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-xs",children:[e.jsxs("div",{className:"font-medium",children:[Se.Name," ",Se.Surname]}),e.jsxs("div",{className:"text-gray-500",children:["Reg: ",Se.RegNumber]})]},Se.RegNumber))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Payment Date"}),e.jsx("input",{type:"date",name:"payment_date",value:W.payment_date,onChange:pe,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Amount"}),e.jsx("input",{type:"number",name:"amount",value:W.amount,onChange:pe,step:"0.01",min:"0",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Currency"}),e.jsxs("select",{name:"currency_id",value:W.currency_id,onChange:pe,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Currency"}),p.map(Se=>e.jsxs("option",{value:Se.id,children:[Se.code," - ",Se.name]},Se.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Payment Method"}),e.jsxs("select",{name:"payment_method",value:W.payment_method,onChange:pe,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Payment Method"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"card",children:"Card"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"mobile_money",children:"Mobile Money"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Reference"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"reference",value:W.reference,onChange:pe,placeholder:"Payment reference (optional)",className:"flex-1 px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"}),e.jsx("button",{type:"button",onClick:ee,className:"px-3 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 text-xs whitespace-nowrap",children:"Auto Generate"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Notes"}),e.jsx("textarea",{name:"notes",value:W.notes,onChange:pe,rows:3,placeholder:"Additional notes (optional)",className:"mt-1 block w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:a,className:"flex-1 bg-gray-900 hover:bg-gray-800 text-white px-4 py-2 disabled:opacity-50",children:a?"Saving...":H?"Update Payment":"Record Payment"}),e.jsx("button",{type:"button",onClick:ue,className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2",children:"Cancel"})]})]})]})})}),i&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 z-50",children:i}),s&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 z-50",children:s})]})},yde=()=>{const{token:t}=ut(),a=ga(),[r,s]=g.useState(!1),[n,i]=g.useState(null),[o,d]=g.useState(null),[u,m]=g.useState([]),[x,f]=g.useState([]),[b,p]=g.useState(""),[v,j]=g.useState(!1),[N,w]=g.useState(null),[P,k]=g.useState({student_reg_number:"",route_id:"",pickup_point:"",dropoff_point:"",start_date:"",end_date:"",weekly_fee:"",currency:"USD"}),$=t?{Authorization:`Bearer ${t}`}:{};g.useEffect(()=>{O()},[]),g.useEffect(()=>{const M=D=>{D.target.closest(".student-search-container")||j(!1)};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[]);const O=async()=>{try{const M=await ne.get(`${ie}/transport/routes?limit=100`,{headers:$});M.data.success&&m(M.data.data)}catch(M){console.error("Error loading routes:",M)}},L=async M=>{if(!M.trim()){f([]);return}try{try{const I=await ne.get(`${ie}/students/${M}`,{headers:$});if(I.data.success){f([I.data.data]);return}}catch{}const D=await ne.get(`${ie}/students/search?query=${M}`,{headers:$});D.data.success&&f(D.data.data)}catch(D){console.error("Error searching students:",D),f([])}},_=M=>{const D=M.target.value;p(D),D.trim()?(L(D),j(!0)):(f([]),j(!1),w(null),k(I=>({...I,student_reg_number:""})))},E=M=>{w(M),p(`${M.Name} ${M.Surname} (${M.RegNumber})`),k(D=>({...D,student_reg_number:M.RegNumber})),j(!1)},A=M=>{const{name:D,value:I}=M.target;if(k(V=>({...V,[D]:I})),D==="route_id"&&I){const V=u.find(H=>H.id.toString()===I);V&&k(H=>({...H,pickup_point:V.pickup_point||"",dropoff_point:V.dropoff_point||"",weekly_fee:V.weekly_fee||"",currency:V.currency||"USD"}))}},z=async M=>{M.preventDefault();try{s(!0),i(null);const D={...P,weekly_fee:parseFloat(P.weekly_fee),pickup_point:P.pickup_point.trim()||null,dropoff_point:P.dropoff_point.trim()||null,end_date:P.end_date||null};await ne.post(`${ie}/transport/registrations`,D,{headers:$}),d("Student registered for transport successfully"),setTimeout(()=>{a("/dashboard/transport/registrations")},1500)}catch(D){console.error("Error saving registration:",D),i(D.response?.data?.message||"Failed to register student")}finally{s(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Register Student for Transport"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Add a new student transport registration"})]})}),e.jsx("div",{className:"bg-white p-6",children:e.jsxs("form",{onSubmit:z,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"student-search-container relative",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:[e.jsx(R,{icon:Is,className:"mr-2"}),"Student Registration Number"]}),e.jsx("input",{type:"text",value:b,onChange:_,placeholder:"Enter student registration number...",className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0}),v&&x.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:x.map(M=>e.jsxs("div",{onClick:()=>E(M),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-xs",children:[e.jsxs("div",{className:"font-medium",children:[M.Name," ",M.Surname]}),e.jsxs("div",{className:"text-gray-500",children:["Reg: ",M.RegNumber]})]},M.RegNumber))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:[e.jsx(R,{icon:ug,className:"mr-2"}),"Route"]}),e.jsxs("select",{name:"route_id",value:P.route_id,onChange:A,required:!0,className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Route"}),u.filter(M=>M.is_active).map(M=>e.jsxs("option",{value:M.id,children:[M.route_name," - ",M.weekly_fee," ",M.currency]},M.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:[e.jsx(R,{icon:jc,className:"mr-2"}),"Pickup Point"]}),e.jsx("input",{type:"text",name:"pickup_point",value:P.pickup_point,onChange:A,required:!0,className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Pickup location"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:[e.jsx(R,{icon:jc,className:"mr-2"}),"Dropoff Point"]}),e.jsx("input",{type:"text",name:"dropoff_point",value:P.dropoff_point,onChange:A,required:!0,className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Dropoff location"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:[e.jsx(R,{icon:ua,className:"mr-2"}),"Start Date"]}),e.jsx("input",{type:"date",name:"start_date",value:P.start_date,onChange:A,required:!0,className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:[e.jsx(R,{icon:ua,className:"mr-2"}),"End Date (Optional)"]}),e.jsx("input",{type:"date",name:"end_date",value:P.end_date,onChange:A,className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:[e.jsx(R,{icon:Ia,className:"mr-2"}),"Weekly Fee"]}),e.jsx("input",{type:"number",name:"weekly_fee",value:P.weekly_fee,onChange:A,step:"0.01",min:"0",required:!0,className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Currency"}),e.jsxs("select",{name:"currency",value:P.currency,onChange:A,required:!0,className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"ZWL",children:"ZWL"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"GBP",children:"GBP"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"submit",disabled:r,className:"flex-1 bg-gray-900 hover:bg-gray-800 text-white px-6 py-3 disabled:opacity-50 flex items-center justify-center",children:r?"Registering...":"Register Student"}),e.jsx(Zt,{to:"/dashboard/transport/registrations",className:"px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 flex items-center justify-center",children:"Cancel"})]})]})}),o&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 z-50",children:o}),n&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 z-50",children:n})]})},bde=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState(null),[i,o]=g.useState(""),[d,u]=g.useState(""),[m,x]=g.useState(""),[f,b]=g.useState({total_items:0,low_stock_items:0,out_of_stock_items:0,total_categories:0,monthly_issues:0,monthly_payments:0}),[p,v]=g.useState([]),[j,N]=g.useState([]),[w,P]=g.useState([]),[k,$]=g.useState({page:1,limit:10,total:0,pages:0}),[O,L]=g.useState(null),[_,E]=g.useState(!1);g.useEffect(()=>{t&&A()},[t]);const A=async(B=1)=>{try{r(!0),n(null);const[W,K,X,Q]=await Promise.all([ne.get(`${ie}/inventory/summary`,{headers:{Authorization:`Bearer ${t}`}}),ne.get(`${ie}/inventory/items?page=${B}&limit=${k.limit}`,{headers:{Authorization:`Bearer ${t}`}}),ne.get(`${ie}/inventory/issues?limit=10`,{headers:{Authorization:`Bearer ${t}`}}),ne.get(`${ie}/inventory/categories`,{headers:{Authorization:`Bearer ${t}`}})]);console.log(" Summary Response:",W.data),console.log(" Items Response:",K.data),console.log(" Issues Response:",X.data),console.log(" Categories Response:",Q.data),b(W.data.data),v(K.data.data),$(K.data.pagination),N(X.data.data),P(Q.data.data)}catch(W){console.error("Error loading inventory data:",W),n("Failed to load inventory data")}finally{r(!1)}},z=B=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(B),M=B=>{switch(B){case"In Stock":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(R,{icon:Ra,className:"mr-1"}),"In Stock"]});case"Low Stock":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(R,{icon:la,className:"mr-1"}),"Low Stock"]});case"Out of Stock":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(R,{icon:la,className:"mr-1"}),"Out of Stock"]});default:return e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800",children:"Unknown"})}},D=B=>B===0?"Out of Stock":B<=5?"Low Stock":"In Stock",I=p.filter(B=>{const W=B.name.toLowerCase().includes(i.toLowerCase())||B.reference.toLowerCase().includes(i.toLowerCase()),K=!d||B.category_id==d,X=D(B.current_stock);return W&&K&&(!m||X===m)}),V=["In Stock","Low Stock","Out of Stock"],H=B=>{L(B),E(!0)};return a?e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading inventory data..."})]})})})}):s?e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-red-100 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(R,{icon:la,className:"text-red-600 text-xl"})}),e.jsx("p",{className:"text-sm text-red-600 mb-4",children:s}),e.jsx("button",{onClick:A,className:"px-4 py-2 bg-gray-900 text-white text-xs hover:bg-gray-800",children:"Try Again"})]})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-2 md:py-6",children:e.jsxs("div",{className:"w-full px-2 md:px-4 lg:px-8",children:[e.jsx("div",{className:"mb-4 md:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg md:text-xl font-bold text-gray-900",children:"Inventory Management"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Manage uniforms, track stock levels, and issue items to students"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:()=>A(k.page),disabled:a,className:"bg-gray-600 text-white px-3 md:px-4 py-2 text-xs hover:bg-gray-700 flex items-center justify-center disabled:opacity-50 w-full sm:w-auto",children:[e.jsx(R,{icon:aa,className:"mr-2"}),a?"Loading...":"Refresh"]}),e.jsxs(Zt,{to:"/dashboard/inventory/add-item",className:"bg-gray-900 text-white px-3 md:px-4 py-2 text-xs hover:bg-gray-800 flex items-center justify-center w-full sm:w-auto",children:[e.jsx(R,{icon:Ot,className:"mr-2"}),"Add Item"]}),e.jsxs(Zt,{to:"/dashboard/inventory/issue-uniform",className:"bg-blue-600 text-white px-3 md:px-4 py-2 text-xs hover:bg-blue-700 flex items-center justify-center w-full sm:w-auto",children:[e.jsx(R,{icon:Mr,className:"mr-2"}),"Issue Uniform"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 md:gap-4 mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-3 md:p-4 shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Items"}),e.jsx("p",{className:"text-sm md:text-lg font-semibold text-gray-900",children:f.total_items?.toLocaleString()||0})]}),e.jsx("div",{className:"bg-blue-100 p-2",children:e.jsx(R,{icon:zu,className:"text-blue-600 text-xs md:text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-3 md:p-4 shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Low Stock"}),e.jsx("p",{className:"text-sm md:text-lg font-semibold text-yellow-600",children:f.low_stock_items||0})]}),e.jsx("div",{className:"bg-yellow-100 p-2",children:e.jsx(R,{icon:la,className:"text-yellow-600 text-xs md:text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-3 md:p-4 shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Out of Stock"}),e.jsx("p",{className:"text-sm md:text-lg font-semibold text-red-600",children:f.out_of_stock_items||0})]}),e.jsx("div",{className:"bg-red-100 p-2",children:e.jsx(R,{icon:la,className:"text-red-600 text-xs md:text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-3 md:p-4 shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Monthly Issues"}),e.jsx("p",{className:"text-sm md:text-lg font-semibold text-green-600",children:f.monthly_issues||0})]}),e.jsx("div",{className:"bg-green-100 p-2",children:e.jsx(R,{icon:Mr,className:"text-green-600 text-xs md:text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-3 md:p-4 shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Categories"}),e.jsx("p",{className:"text-sm md:text-lg font-semibold text-purple-600",children:f.total_categories||0})]}),e.jsx("div",{className:"bg-purple-100 p-2",children:e.jsx(R,{icon:zu,className:"text-purple-600 text-xs md:text-sm"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4 mb-4 md:mb-6",children:[e.jsx(Zt,{to:"/dashboard/inventory/uniforms",className:"bg-white border border-gray-200 p-3 md:p-4 hover:border-blue-300 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3",children:[e.jsx("div",{className:"bg-blue-100 p-2",children:e.jsx(R,{icon:jf,className:"text-blue-600 text-xs md:text-sm"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs md:text-sm font-medium text-gray-900",children:"Uniforms"}),e.jsx("p",{className:"text-xs text-gray-500",children:"School & sports uniforms"})]})]})}),e.jsx(Zt,{to:"/dashboard/inventory/issue-uniform",className:"bg-white border border-gray-200 p-3 md:p-4 hover:border-green-300 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3",children:[e.jsx("div",{className:"bg-green-100 p-2",children:e.jsx(R,{icon:Mr,className:"text-green-600 text-xs md:text-sm"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs md:text-sm font-medium text-gray-900",children:"Issue Uniform"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Give uniforms to students"})]})]})}),e.jsx(Zt,{to:"/dashboard/inventory/payments",className:"bg-white border border-gray-200 p-3 md:p-4 hover:border-purple-300 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3",children:[e.jsx("div",{className:"bg-purple-100 p-2",children:e.jsx(R,{icon:On,className:"text-purple-600 text-xs md:text-sm"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs md:text-sm font-medium text-gray-900",children:"Payments"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Track uniform payments"})]})]})}),e.jsx(Zt,{to:"/dashboard/inventory/reports",className:"bg-white border border-gray-200 p-3 md:p-4 hover:border-orange-300 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3",children:[e.jsx("div",{className:"bg-orange-100 p-2",children:e.jsx(R,{icon:Co,className:"text-orange-600 text-xs md:text-sm"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs md:text-sm font-medium text-gray-900",children:"Reports"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Analytics & insights"})]})]})})]}),e.jsx("div",{className:"bg-white border border-gray-200 p-3 md:p-4 mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:aa,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",placeholder:"Search items by name or SKU...",value:i,onChange:B=>o(B.target.value),className:"w-full pl-8 md:pl-10 pr-4 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})}),e.jsxs("select",{value:d,onChange:B=>u(B.target.value),className:"px-3 md:px-4 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500 w-full sm:w-auto",children:[e.jsx("option",{value:"",children:"All Categories"}),w.map(B=>e.jsx("option",{value:B.id,children:B.name},B.id))]}),e.jsxs("select",{value:m,onChange:B=>x(B.target.value),className:"px-3 md:px-4 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500 w-full sm:w-auto",children:[e.jsx("option",{value:"",children:"All Status"}),V.map(B=>e.jsx("option",{value:B,children:B},B))]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 overflow-hidden shadow mb-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full divide-y divide-gray-200",style:{minWidth:"400px"},children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),e.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"4",className:"px-2 md:px-4 py-6 md:py-8 text-center text-gray-500",children:[e.jsx(R,{icon:zu,className:"text-xl md:text-2xl mb-2"}),e.jsx("p",{className:"text-xs md:text-sm",children:"No inventory items found"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:p.length===0?"Add your first item to get started":"Try adjusting your search or filter criteria"})]})}):I.map(B=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 whitespace-nowrap",children:e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:B.name})}),e.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 whitespace-nowrap",children:e.jsx("div",{className:"text-xs md:text-sm text-gray-900",children:B.current_stock||0})}),e.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 whitespace-nowrap",children:M(D(B.current_stock))}),e.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 whitespace-nowrap text-center",children:e.jsx("button",{onClick:()=>H(B),className:"text-blue-600 hover:text-blue-900 text-xs p-1 rounded hover:bg-blue-50 transition-colors",title:"View Details",children:e.jsx(R,{icon:Ma,className:"h-3 w-3 md:h-4 md:w-4"})})})]},B.id))})]})})}),k.pages>1&&e.jsx("div",{className:"bg-white border border-gray-200 p-3 md:p-4 mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"text-xs md:text-sm text-gray-700 text-center sm:text-left",children:["Showing ",(k.page-1)*k.limit+1," to ",Math.min(k.page*k.limit,k.total)," of ",k.total," items"]}),e.jsxs("div",{className:"flex items-center justify-center space-x-1 md:space-x-2",children:[e.jsx("button",{onClick:()=>A(k.page-1),disabled:k.page<=1,className:"px-2 md:px-3 py-1 text-xs border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:Math.min(5,k.pages)},(B,W)=>{const K=Math.max(1,k.page-2)+W;return K>k.pages?null:e.jsx("button",{onClick:()=>A(K),className:`px-2 md:px-3 py-1 text-xs border ${K===k.page?"bg-gray-900 text-white border-gray-900":"border-gray-300 hover:bg-gray-50"}`,children:K},K)}),e.jsx("button",{onClick:()=>A(k.page+1),disabled:k.page>=k.pages,className:"px-2 md:px-3 py-1 text-xs border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})}),_&&O&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative mx-auto p-4 md:p-6 border w-full max-w-md shadow-lg bg-white",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm md:text-base font-medium text-gray-900 mb-2",children:"Item Details"}),e.jsx("button",{onClick:()=>E(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("div",{className:"space-y-3 text-xs md:text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:O.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Reference:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:O.reference})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Category:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:O.category_name||"No category"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Description:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:O.description||"No description"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Current Stock:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:O.current_stock||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Unit Price:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:z(O.unit_price||0)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Value:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:z((O.current_stock||0)*(O.unit_price||0))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Location:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:O.location||"No location"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Supplier:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:O.supplier||"No supplier"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:"ml-2",children:M(D(O.current_stock))})]})]}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-end gap-2 sm:gap-3",children:[e.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 text-xs font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 w-full sm:w-auto",children:"Close"}),e.jsx(Zt,{to:`/dashboard/inventory/issue-uniform?item=${O.id}`,className:"px-4 py-2 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 text-center w-full sm:w-auto",children:"Issue Item"})]})]})})]})})},vde=()=>{const t=ga(),{token:a}=ut(),[r,s]=g.useState(!1),[n,i]=g.useState(null),[o,d]=g.useState(null),[u,m]=g.useState({name:"",category:"",reference:"",description:"",unitPrice:"",currentStock:"",location:"",supplier:""}),[x,f]=g.useState([]),[b,p]=g.useState(!1);g.useEffect(()=>{(async()=>{if(a)try{p(!0);const L=await ne.get(`${ie}/inventory/categories`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});L.data.success&&f(L.data.data)}catch(L){console.error(" Error loading categories:",L)}finally{p(!1)}})()},[a]);const v=O=>{const{name:L,value:_}=O.target;m(E=>({...E,[L]:_}))},j=()=>{const O=u.category||"GEN",L=Date.now().toString().slice(-6),_=Math.random().toString(36).substring(2,5).toUpperCase(),E=`${O.substring(0,3).toUpperCase()}-${L}-${_}`;m(A=>({...A,reference:E}))},N=async O=>{O.preventDefault(),console.log(" Form submitted"),console.log(" Token:",a),console.log(" BASE_URL:",ie),console.log(" Form data:",u);try{if(s(!0),i(null),!u.name||!u.category||!u.reference){i("Please fill in all required fields");return}if(parseFloat(u.unitPrice)<0){i("Unit price cannot be negative");return}if(parseInt(u.currentStock)<0){i("Current stock cannot be negative");return}const L={name:u.name.trim(),category_id:parseInt(u.category),reference:u.reference.trim(),description:u.description.trim()||null,unit_price:parseFloat(u.unitPrice),current_stock:parseInt(u.currentStock),location:u.location.trim()||null,supplier:u.supplier.trim()||null};console.log(" Submitting item data:",L);const _=await ne.post(`${ie}/inventory/items`,L,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});console.log(" Item created successfully:",_.data),d("Item added successfully!"),setTimeout(()=>{m({name:"",category:"",reference:"",description:"",unitPrice:"",currentStock:"",location:"",supplier:""}),d(null)},2e3)}catch(L){console.error(" Error adding item:",L),L.response?.data?.message?i(L.response.data.message):L.response?.status===401?i("Authentication failed. Please log in again."):L.response?.status===403?i("You do not have permission to add items."):i("Failed to add item. Please try again.")}finally{s(!1)}},w=O=>O?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(O):"$0.00",P=()=>{const O=parseFloat(u.currentStock)||0,L=parseFloat(u.unitPrice)||0;return O*L},k=()=>{const O=parseInt(u.currentStock)||0;return O===0?"Out of Stock":O<=5?"Low Stock":"In Stock"},$=O=>{switch(O){case"In Stock":return"text-green-600";case"Low Stock":return"text-yellow-600";case"Out of Stock":return"text-red-600";default:return"text-gray-600"}};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Add New Item"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Add uniforms, supplies, and equipment to inventory"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>t("/dashboard/inventory/configurations"),className:"bg-blue-600 text-white px-3 py-2 text-xs hover:bg-blue-700 flex items-center",children:[e.jsx(R,{icon:zu,className:"mr-2"}),"Manage Categories"]})})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 shadow",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Item Details"})}),e.jsxs("form",{onSubmit:N,className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Item Name *"}),e.jsx("input",{type:"text",name:"name",value:u.name,onChange:v,required:!0,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"e.g., Primary School Uniform - Boys"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Category *"}),e.jsxs("select",{name:"category",value:u.category,onChange:v,required:!0,disabled:b,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"",children:b?"Loading categories...":"Select Category"}),x.map(O=>e.jsx("option",{value:O.id,children:O.name},O.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reference *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"reference",value:u.reference,onChange:v,required:!0,className:"flex-1 px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"e.g., UNI-PRI-B-001"}),e.jsx("button",{type:"button",onClick:j,className:"px-3 py-2 bg-gray-100 text-gray-700 text-xs hover:bg-gray-200 border border-gray-300",children:"Auto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:u.description,onChange:v,rows:"2",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Brief description of the item..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price (USD) *"}),e.jsx("input",{type:"number",name:"unitPrice",value:u.unitPrice,onChange:v,required:!0,step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Current Stock *"}),e.jsx("input",{type:"number",name:"currentStock",value:u.currentStock,onChange:v,required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Storage Location"}),e.jsx("input",{type:"text",name:"location",value:u.location,onChange:v,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"e.g., Storage Room A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Supplier"}),e.jsx("input",{type:"text",name:"supplier",value:u.supplier,onChange:v,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"e.g., Uniforms Plus Ltd"})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-200",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-900 mb-3",children:"Item Preview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Value:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:w(P())})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Stock Status:"}),e.jsx("span",{className:`ml-2 font-medium ${$(k())}`,children:k()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Category:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:x.find(O=>O.id===parseInt(u.category))?.name||"Not selected"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Reference:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:u.reference||"Not generated"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>t("/dashboard/inventory"),className:"px-4 py-2 text-xs font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"px-4 py-2 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50 flex items-center",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-b-2 border-white mr-2"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{icon:Er,className:"mr-2"}),"Add Item"]})})]})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:e.jsx("div",{className:"relative mx-auto p-6 border w-96 shadow-lg bg-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Success!"}),e.jsx("p",{className:"text-xs text-gray-600 mb-4",children:o}),e.jsx("button",{onClick:()=>d(null),className:"px-4 py-2 text-xs font-medium text-white bg-green-600 hover:bg-green-700",children:"OK"})]})})}),n&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 shadow-lg z-50 text-sm",children:n})]})})},jde=()=>{const t=ga(),[a]=wk(),{token:r}=ut(),[s,n]=g.useState(!1),[i,o]=g.useState(null),[d,u]=g.useState(null),[m,x]=g.useState(""),[f,b]=g.useState(""),[p,v]=g.useState(""),[j,N]=g.useState(!1),[w,P]=g.useState(!1),[k,$]=g.useState(!1),[O,L]=g.useState(!1),[_,E]=g.useState(null),[A,z]=g.useState(null),[M,D]=g.useState([]),[I,V]=g.useState([]),[H,B]=g.useState([]),[W,K]=g.useState({itemId:"",studentId:"",quantity:1,paymentStatus:"pending",paymentMethod:"cash",amount:"",currency_id:"",reference:"",notes:"",issueDate:new Date().toISOString().split("T")[0]});g.useEffect(()=>{r&&(X(),Q(),ye())},[r]);const X=async()=>{try{$(!0);const Ee=await ne.get(`${ie}/inventory/items?limit=100`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});Ee.data.success&&D(Ee.data.data)}catch(Ee){console.error(" Error loading inventory items:",Ee)}finally{$(!1)}},Q=async()=>{V([])},ye=async()=>{try{const Se=(await ne.get(`${ie}/accounting/currencies`,{headers:{Authorization:`Bearer ${r}`}})).data.data||[];B(Se);const Ge=Se.find(ve=>ve.base_currency);Ge&&K(ve=>({...ve,currency_id:Ge.id}))}catch(Ee){console.error("Error loading currencies:",Ee),o("Failed to load currencies. Please refresh the page.")}},Y=[{value:"cash",label:"Cash"},{value:"card",label:"Credit/Debit Card"},{value:"bank_transfer",label:"Bank Transfer"},{value:"check",label:"Check"},{value:"mobile_money",label:"Mobile Money"}];g.useEffect(()=>{const Ee=a.get("item");if(Ee&&M.length>0){const Se=M.find(Ge=>Ge.id===parseInt(Ee));Se&&(E(Se),K(Ge=>({...Ge,itemId:Se.id.toString(),amount:Se.unit_price.toString()})))}},[a,M]);const J=Ee=>{const{name:Se,value:Ge}=Ee.target;if(K(ve=>({...ve,[Se]:Ge})),Se==="quantity"&&_){const ve=(parseFloat(Ge)*_.unit_price).toFixed(2);K(Me=>({...Me,amount:ve}))}},U=Ee=>{const Se=Ee.target.value;b(Se),N(Se.length>0)},ee=()=>{N(f.length>0)},he=Ee=>{const Se=Ee.target.value;v(Se),P(Se.length>0)},pe=async()=>{if(!p.trim()){V([]),P(!1);return}L(!0);try{console.log(" Searching students with term:",p);try{const Se=await ne.get(`${ie}/students/${p.trim()}`,{headers:{Authorization:`Bearer ${r}`}});if(Se.data.success&&Se.data.data){console.log(" Exact student match found:",Se.data.data),V([Se.data.data]),P(!0),L(!1);return}}catch{console.log(" No exact match found, trying search...")}const Ee=await ne.get(`${ie}/students/search?query=${p}`,{headers:{Authorization:`Bearer ${r}`}});console.log(" Students search response:",Ee.data),V(Ee.data.data||[]),P(!0)}catch(Ee){console.error(" Error searching students:",Ee),V([]),P(!1)}finally{L(!1)}};g.useEffect(()=>{const Ee=Se=>{Se.target.closest(".search-container")||(N(!1),P(!1))};return document.addEventListener("mousedown",Ee),()=>{document.removeEventListener("mousedown",Ee)}},[]);const se=Ee=>{E(Ee),K(Se=>({...Se,itemId:Ee.id.toString(),amount:Ee.unit_price.toString()}))},te=Ee=>{z(Ee),K(Se=>({...Se,studentId:Ee.RegNumber}))},ue=async Ee=>{Ee.preventDefault();try{if(n(!0),o(null),!W.itemId||!W.studentId||!W.quantity){o("Please fill in all required fields");return}if(parseInt(W.quantity)<=0){o("Quantity must be greater than 0");return}if(parseInt(W.quantity)>_.current_stock){o(`Cannot issue more than available stock (${_.current_stock})`);return}const Se={item_id:parseInt(W.itemId),student_reg_number:A.RegNumber,quantity:parseInt(W.quantity),amount:parseFloat(W.amount),currency_id:W.currency_id,payment_status:W.paymentStatus,payment_method:W.paymentMethod,reference:W.reference||null,notes:W.notes||null,issue_date:W.issueDate};console.log(" Submitting issue data:",Se);const Ge=await ne.post(`${ie}/inventory/issues`,Se,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});console.log(" Issue created successfully:",Ge.data),u("Uniform issued successfully!"),setTimeout(()=>{const ve=H.find(Me=>Me.base_currency);K({itemId:"",studentId:"",quantity:1,paymentStatus:"pending",paymentMethod:"cash",amount:"",currency_id:ve?.id||"",reference:"",notes:"",issueDate:new Date().toISOString().split("T")[0]}),E(null),z(null),u(null),t("/dashboard/inventory")},2e3)}catch(Se){console.error(" Error issuing uniform:",Se),Se.response?.data?.message?o(Se.response.data.message):Se.response?.status===401?o("Authentication failed. Please log in again."):Se.response?.status===403?o("You do not have permission to issue uniforms."):o("Failed to issue uniform. Please try again.")}finally{n(!1)}},ge=Ee=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(Ee),ce=Ee=>Ee===0?"Out of Stock":Ee<=5?"Low Stock":"In Stock",De=Ee=>{switch(Ee){case"In Stock":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(R,{icon:Ra,className:"mr-1"}),"In Stock"]});case"Low Stock":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(R,{icon:rn,className:"mr-1"}),"Low Stock"]});case"Out of Stock":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(R,{icon:Bt,className:"mr-1"}),"Out of Stock"]});default:return null}},ke=M.filter(Ee=>{const Se=(Ee.name||"").toLowerCase(),Ge=(Ee.reference||"").toLowerCase(),ve=f.toLowerCase();return Se.includes(ve)||Ge.includes(ve)}),re=I;return e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Issue Uniform to Student"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Select uniform, student, and record payment"})]})})}),e.jsx("div",{className:"w-full",children:e.jsxs("form",{onSubmit:ue,className:"bg-white border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Uniform Issue Details"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"search-container",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Search Uniform *"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(R,{icon:aa,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:k?"Loading items...":"Search uniforms by name or reference...",value:f,onChange:U,disabled:k,className:"w-full pl-10 pr-4 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500 disabled:bg-gray-100"})]}),e.jsx("button",{type:"button",onClick:ee,disabled:k||!f.trim(),className:"px-4 py-2 bg-gray-900 text-white text-xs hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:"Search"})]}),j&&e.jsx("div",{className:"mb-3 max-h-48 overflow-y-auto border border-gray-200 bg-white",children:ke.length>0?ke.map(Ee=>e.jsx("div",{onClick:()=>{se(Ee),N(!1),b("")},className:"p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 p-2",children:e.jsx(R,{icon:jf,className:"text-blue-600 text-xs"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-900",children:Ee.name||"N/A"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Ref: ",Ee.reference||"N/A"]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-600",children:["Stock: ",Ee.current_stock||0]}),De(ce(Ee.current_stock||0))]}),e.jsx("p",{className:"text-xs font-medium text-green-600 mt-1",children:ge(Ee.unit_price||0)})]})]})},Ee.id)):e.jsxs("div",{className:"p-3 text-center text-gray-500 text-xs",children:['No items found matching "',f,'"']})}),_&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 p-2",children:e.jsx(R,{icon:jf,className:"text-blue-600 text-xs"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-900",children:_.name||"N/A"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Ref: ",_.reference||"N/A"]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-600",children:["Stock: ",_.current_stock||0]}),De(ce(_.current_stock||0))]}),e.jsx("p",{className:"text-xs font-medium text-green-600 mt-1",children:ge(_.unit_price||0)})]})]})})]}),e.jsxs("div",{className:"search-container",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Search Student *"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(R,{icon:Mr,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:O?"Loading students...":"Search by name or registration number...",value:p,onChange:he,disabled:O,className:"w-full pl-10 pr-4 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500 disabled:bg-gray-100"})]}),e.jsx("button",{type:"button",onClick:pe,disabled:O||!p.trim(),className:"px-4 py-2 bg-gray-900 text-white text-xs hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:"Search"})]}),w&&e.jsx("div",{className:"mb-3 max-h-48 overflow-y-auto border border-gray-200 bg-white",children:re.length>0?re.map(Ee=>e.jsx("div",{onClick:()=>{te(Ee),P(!1),v("")},className:"p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-green-100 p-2",children:e.jsx(R,{icon:Mr,className:"text-green-600 text-xs"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-900",children:[Ee.Name||""," ",Ee.Surname||""]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",Ee.RegNumber||"N/A"]}),e.jsxs("p",{className:"text-xs text-gray-600",children:[Ee.Class||"No class","  ",Ee.Gender||"N/A"]})]})]})},Ee.RegNumber)):e.jsxs("div",{className:"p-3 text-center text-gray-500 text-xs",children:['No students found matching "',p,'"']})}),A&&e.jsx("div",{className:"bg-green-50 border border-green-200 p-3 mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-green-100 p-2",children:e.jsx(R,{icon:Mr,className:"text-green-600 text-xs"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-900",children:[A.Name||""," ",A.Surname||""]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",A.RegNumber||"N/A"]}),e.jsxs("p",{className:"text-xs text-gray-600",children:[A.Class||"No class","  ",A.Gender||"N/A"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Quantity *"}),e.jsx("input",{type:"number",name:"quantity",value:W.quantity,onChange:J,required:!0,min:"1",max:_?.current_stock||1,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"}),_&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Available: ",_.current_stock]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Issue Date"}),e.jsx("input",{type:"date",name:"issueDate",value:W.issueDate,onChange:J,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-900 mb-4",children:"Payment Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Amount *"}),e.jsx("input",{type:"number",name:"amount",value:W.amount,onChange:J,required:!0,step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Currency *"}),e.jsxs("select",{name:"currency_id",value:W.currency_id,onChange:J,required:!0,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Currency"}),H.map(Ee=>e.jsxs("option",{value:Ee.id,children:[Ee.code," - ",Ee.name]},Ee.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Payment Method"}),e.jsx("select",{name:"paymentMethod",value:W.paymentMethod,onChange:J,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:Y.map(Ee=>e.jsx("option",{value:Ee.value,children:Ee.label},Ee.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Payment Status"}),e.jsxs("select",{name:"paymentStatus",value:W.paymentStatus,onChange:J,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"partial",children:"Partial Payment"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Reference Number"}),e.jsx("input",{type:"text",name:"reference",value:W.reference,onChange:J,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter reference number (optional)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{name:"notes",value:W.notes,onChange:J,rows:"3",className:"w-full px-3 py-2 border border-gray-300 text-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Additional notes about the issue..."})]}),_&&A&&e.jsxs("div",{className:"bg-gray-50 p-4 border border-gray-200",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-900 mb-3",children:"Issue Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Student:"}),e.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:[A.Name||""," ",A.Surname||""," (",A.RegNumber||"N/A",")"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Uniform:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:_.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:ge((parseFloat(W.quantity)||0)*(parseFloat(W.amount)||0))})]})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>t("/dashboard/inventory"),className:"px-4 py-2 text-xs font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s||!_||!A,className:"px-4 py-2 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50 flex items-center",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-b-2 border-white mr-2"}),"Issuing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{icon:Mr,className:"mr-2"}),"Issue Uniform"]})})]})]})}),d&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 shadow-lg z-50 text-xs",children:d}),i&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 shadow-lg z-50 text-xs",children:i})]})})},Nde=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState(null),[i,o]=g.useState(null),[d,u]=g.useState(!1),[m,x]=g.useState(null),[f,b]=g.useState([]),[p,v]=g.useState({name:"",icon:"faBoxes",color:"blue",description:""}),j=D=>({faBoxes:zu,faTshirt:jf,faBook:ko,faFlask:k6,faFutbol:Ax,faPalette:A6,faBroom:E6,faLaptop:C6,faUtensils:T6,faBuilding:Mn})[D]||zu,N=D=>({blue:"bg-blue-100 text-blue-800",green:"bg-green-100 text-green-800",purple:"bg-purple-100 text-purple-800",orange:"bg-orange-100 text-orange-800",pink:"bg-pink-100 text-pink-800",gray:"bg-gray-100 text-gray-800",indigo:"bg-indigo-100 text-indigo-800",red:"bg-red-100 text-red-800"})[D]||"bg-gray-100 text-gray-800",w=async()=>{if(!p.name.trim()){n("Category name is required");return}try{r(!0);const D=await _(p);b(I=>[...I,D.data]),v({name:"",icon:"faBoxes",color:"blue",description:""}),u(!1),o("Category added successfully!"),setTimeout(()=>o(null),3e3)}catch(D){n(D.message)}finally{r(!1)}},P=D=>{x(D),v({...D}),u(!0)},k=async()=>{if(!p.name.trim()){n("Category name is required");return}try{r(!0),await E(m.id,p),b(D=>D.map(I=>I.id===m.id?{...I,...p}:I)),x(null),v({name:"",icon:"faBoxes",color:"blue",description:""}),u(!1),o("Category updated successfully!"),setTimeout(()=>o(null),3e3)}catch(D){n(D.message)}finally{r(!1)}},$=async D=>{if(window.confirm("Are you sure you want to delete this category?"))try{r(!0),await A(D),b(I=>I.filter(V=>V.id!==D)),o("Category deleted successfully!"),setTimeout(()=>o(null),3e3)}catch(I){n(I.message)}finally{r(!1)}},O=()=>{v({name:"",icon:"faBoxes",color:"blue",description:""}),x(null),u(!1),n(null)},L=async()=>{try{r(!0);const D=await ne.get(`${ie}/inventory/categories`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});b(D.data.data)}catch(D){console.error("Error fetching categories:",D),n("Failed to fetch categories")}finally{r(!1)}},_=async D=>{try{return(await ne.post(`${ie}/inventory/categories`,D,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data}catch(I){throw I}},E=async(D,I)=>{try{return(await ne.put(`${ie}/inventory/categories/${D}`,I,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data}catch(V){throw V}},A=async D=>{try{return(await ne.delete(`${ie}/inventory/categories/${D}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data}catch(I){throw I}};g.useEffect(()=>{t&&L()},[t]);const z=[{value:"faBoxes",label:"Boxes",icon:zu},{value:"faTshirt",label:"T-Shirt",icon:jf},{value:"faBook",label:"Book",icon:ko},{value:"faFlask",label:"Flask",icon:k6},{value:"faFutbol",label:"Sports",icon:Ax},{value:"faPalette",label:"Art",icon:A6},{value:"faBroom",label:"Cleaning",icon:E6},{value:"faLaptop",label:"IT",icon:C6},{value:"faUtensils",label:"Kitchen",icon:T6},{value:"faBuilding",label:"Building",icon:Mn}],M=[{value:"blue",label:"Blue",class:"bg-blue-100 text-blue-800"},{value:"green",label:"Green",class:"bg-green-100 text-green-800"},{value:"purple",label:"Purple",class:"bg-purple-100 text-purple-800"},{value:"orange",label:"Orange",class:"bg-orange-100 text-orange-800"},{value:"pink",label:"Pink",class:"bg-pink-100 text-pink-800"},{value:"gray",label:"Gray",class:"bg-gray-100 text-gray-800"},{value:"indigo",label:"Indigo",class:"bg-indigo-100 text-indigo-800"},{value:"red",label:"Red",class:"bg-red-100 text-red-800"}];return e.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Inventory Categories"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Manage item categories and organization"})]}),e.jsxs("button",{onClick:()=>u(!0),className:"bg-gray-900 text-white px-4 py-2 text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(R,{icon:Ot,className:"mr-2"}),"Add Category"]})]})}),e.jsx("div",{className:"bg-white border border-gray-200",children:e.jsx("div",{className:"p-4",children:a?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-b-2 border-gray-900 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading categories..."})]}):f.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-sm text-gray-600",children:"No categories found. Create your first category to get started."})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(D=>e.jsxs("div",{className:"bg-gray-50 border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`p-2 ${N(D.color)}`,children:e.jsx(R,{icon:j(D.icon),className:"text-sm"})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>P(D),className:"text-blue-600 hover:text-blue-900 text-xs",children:e.jsx(R,{icon:ha})}),e.jsx("button",{onClick:()=>$(D.id),className:"text-red-600 hover:text-red-900 text-xs",children:e.jsx(R,{icon:Yt})})]})]}),e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:D.name}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:D.description}),e.jsxs("span",{className:"text-xs text-gray-500",children:[D.item_count||0," items"]})]},D.id))})})}),d&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:m?"Edit Category":"Add New Category"}),e.jsx("button",{onClick:O,className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt})})]}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Category Name *"}),e.jsx("input",{type:"text",value:p.name,onChange:D=>v(I=>({...I,name:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"e.g., Uniforms"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Icon"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:z.map(D=>e.jsx("button",{type:"button",onClick:()=>v(I=>({...I,icon:D.value})),className:`p-2 border text-xs ${p.icon===D.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsx(R,{icon:D.icon,className:"text-sm"})},D.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Color"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:M.map(D=>e.jsx("button",{type:"button",onClick:()=>v(I=>({...I,color:D.value})),className:`p-2 border text-xs ${D.class} ${p.color===D.value?"ring-2 ring-blue-500":"hover:opacity-80"}`,children:D.label},D.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:p.description,onChange:D=>v(I=>({...I,description:D.target.value})),rows:"2",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Brief description of the category..."})]}),s&&e.jsx("div",{className:"text-red-600 text-xs",children:s}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:O,className:"px-4 py-2 text-xs font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:m?k:w,className:"px-4 py-2 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800",children:[m?"Update":"Add"," Category"]})]})]})]})})}),i&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 shadow-lg z-50 text-sm",children:i}),s&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 shadow-lg z-50 text-sm",children:s})]})})},wde=()=>{const{token:t}=ut(),a=ga(),[r,s]=g.useState([]),[n,i]=g.useState(!0),[o,d]=g.useState(null),[u,m]=g.useState(null),[x,f]=g.useState({students:[],employees:[]}),[b,p]=g.useState({current_page:1,total_pages:1,total_items:0,items_per_page:10}),[v,j]=g.useState({type:"",status:"published",target_type:"",priority:"",search:""});g.useEffect(()=>{N(),w()},[v,b.current_page]);const N=async()=>{try{i(!0);const A=new URLSearchParams({page:b.current_page,limit:b.items_per_page,...v}),z=t?{Authorization:`Bearer ${t}`}:{},M=await ne.get(`${ie}/announcements?${A}`,{headers:z});s(M.data.announcements),p(M.data.pagination)}catch(A){console.error("Error loading announcements:",A),d("Failed to load announcements")}finally{i(!1)}},w=async()=>{try{const A=t?{Authorization:`Bearer ${t}`}:{},[z,M]=await Promise.all([ne.get(`${ie}/announcements/targets/student`,{headers:A}),ne.get(`${ie}/announcements/targets/employee`,{headers:A})]);f({students:z.data.options,employees:M.data.options})}catch(A){console.error("Error loading target options:",A)}},P=A=>{const{name:z,value:M}=A.target;j(D=>({...D,[z]:M})),p(D=>({...D,current_page:1}))},k=A=>{a(`/dashboard/announcements/edit/${A.id}`)},$=async A=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{const z=t?{Authorization:`Bearer ${t}`}:{};await ne.delete(`${ie}/announcements/${A}`,{headers:z}),N()}catch(z){console.error("Error deleting announcement:",z),d("Failed to delete announcement")}},O=A=>{switch(A){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-blue-100 text-blue-800 border-blue-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},L=A=>{switch(A){case"published":return e.jsx(R,{icon:Ma,className:"text-green-500"});case"draft":return e.jsx(R,{icon:mf,className:"text-yellow-500"});case"archived":return e.jsx(R,{icon:Bt,className:"text-gray-500"});default:return e.jsx(R,{icon:mf,className:"text-gray-500"})}},_=A=>A?new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",E=A=>{p(z=>({...z,current_page:A}))};return n&&r.length===0?e.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-2 md:py-4",children:e.jsxs("div",{className:"w-full px-2 md:px-4 lg:px-8",children:[e.jsx("div",{className:"mb-4 md:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg md:text-xl font-bold text-gray-900",children:"Announcements"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Manage and publish announcements for students and employees"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>a("/dashboard/announcements/add"),className:"bg-blue-600 text-white px-3 py-2 text-xs md:text-sm hover:bg-blue-700 flex items-center w-full sm:w-auto justify-center",children:[e.jsx(R,{icon:Ot,className:"mr-2"}),"Add Announcement"]})})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 shadow mb-4",children:[e.jsx("div",{className:"px-3 md:px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Filters"})}),e.jsx("div",{className:"p-3 md:p-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:aa,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",name:"search",value:v.search,onChange:P,placeholder:"Search announcements...",className:"w-full pl-8 pr-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{name:"type",value:v.type,onChange:P,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"student",children:"Students"}),e.jsx("option",{value:"employee",children:"Employees"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:v.status,onChange:P,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{name:"priority",value:v.priority,onChange:P,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"urgent",children:"Urgent"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Target"}),e.jsxs("select",{name:"target_type",value:v.target_type,onChange:P,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Targets"}),e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"specific",children:"Specific"})]})]})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 shadow",children:[o&&e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("div",{className:"p-3 bg-red-100 border border-red-200 text-red-700 text-xs",children:o})}),r.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12 px-4",children:[e.jsx(R,{icon:cg,className:"text-gray-300 text-3xl md:text-4xl mb-4"}),e.jsx("h3",{className:"text-sm md:text-base font-medium text-gray-900 mb-2",children:"No announcements found"}),e.jsx("p",{className:"text-gray-500 text-xs md:text-sm mb-4",children:"Create your first announcement to get started"}),e.jsxs("button",{onClick:()=>a("/dashboard/announcements/add"),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-xs md:text-sm font-medium hover:bg-blue-700",children:[e.jsx(R,{icon:Ot,className:"text-xs"}),"Create Announcement"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"divide-y divide-gray-200",children:r.map(A=>e.jsx("div",{className:"p-3 md:p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:A.title}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${O(A.priority)}`,children:A.priority}),L(A.status)]})]}),e.jsx("p",{className:"text-gray-600 text-xs mb-3 line-clamp-2",children:A.content}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{icon:A.announcement_type==="student"?Nf:za,className:"text-xs"}),e.jsx("span",{children:A.announcement_type==="student"?"Students":"Employees"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{icon:Is,className:"text-xs"}),e.jsx("span",{className:"truncate",children:A.target_name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{icon:ua,className:"text-xs"}),e.jsx("span",{className:"hidden sm:inline",children:_(A.created_at)}),e.jsx("span",{className:"sm:hidden",children:new Date(A.created_at).toLocaleDateString()})]}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{children:["By: ",A.created_by_username]})})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:ml-4 flex-shrink-0",children:[e.jsx("button",{onClick:()=>k(A),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit announcement",children:e.jsx(R,{icon:ha,className:"text-xs"})}),e.jsx("button",{onClick:()=>$(A.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete announcement",children:e.jsx(R,{icon:Yt,className:"text-xs"})})]})]})},A.id))}),b.total_pages>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 px-3 md:px-4 py-3 border-t border-gray-200",children:[e.jsxs("div",{className:"text-xs text-gray-700 text-center sm:text-left",children:["Showing ",(b.current_page-1)*b.items_per_page+1," to ",Math.min(b.current_page*b.items_per_page,b.total_items)," of ",b.total_items," results"]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>E(b.current_page-1),disabled:b.current_page===1,className:"px-3 py-1 text-xs border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"px-3 py-1 text-xs text-gray-700",children:["Page ",b.current_page," of ",b.total_pages]}),e.jsx("button",{onClick:()=>E(b.current_page+1),disabled:b.current_page===b.total_pages,className:"px-3 py-1 text-xs border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]})})},Sde=()=>{const t=ga(),{token:a}=ut(),[r,s]=g.useState(!1),[n,i]=g.useState(null),[o,d]=g.useState(null),[u,m]=g.useState({students:[],employees:[]}),[x,f]=g.useState({title:"",content:"",announcement_type:"student",target_type:"all",target_value:"",priority:"medium",status:"draft",start_date:"",end_date:""});g.useEffect(()=>{b()},[]);const b=async()=>{try{const N=a?{Authorization:`Bearer ${a}`}:{},[w,P]=await Promise.all([ne.get(`${ie}/announcements/targets/student`,{headers:N}),ne.get(`${ie}/announcements/targets/employee`,{headers:N})]);console.log(" Students response:",w.data),console.log(" Employees response:",P.data),m({students:w.data.options||[],employees:P.data.options||[]})}catch(N){console.error("Error loading target options:",N)}},p=N=>{const{name:w,value:P}=N.target;f(k=>({...k,[w]:P}))},v=async N=>{N.preventDefault();try{s(!0),i(null),d(null);const w=a?{Authorization:`Bearer ${a}`}:{},P={...x,start_date:x.start_date||null,end_date:x.end_date||null,target_value:x.target_value||null};console.log(" Frontend submitting data:",P),console.log(" Original formData:",x),await ne.post(`${ie}/announcements`,P,{headers:w}),d("Announcement created successfully!"),setTimeout(()=>{f({title:"",content:"",announcement_type:"student",target_type:"all",target_value:"",priority:"medium",status:"draft",start_date:"",end_date:""}),d(null),t("/dashboard/announcements")},2e3)}catch(w){console.error("Error creating announcement:",w),w.response?.data?.message?i(w.response.data.message):w.response?.status===401?i("Authentication failed. Please log in again."):w.response?.status===403?i("You do not have permission to create announcements."):i("Failed to create announcement. Please try again.")}finally{s(!1)}},j=()=>{t("/dashboard/announcements")};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Add New Announcement"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Create announcements for students or employees"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>t("/dashboard/announcements"),className:"bg-gray-600 text-white px-3 py-2 text-xs hover:bg-gray-700 flex items-center",children:[e.jsx(R,{icon:Bt,className:"mr-2"}),"Cancel"]})})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 shadow",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Announcement Details"})}),e.jsxs("form",{onSubmit:v,className:"p-4",children:[o&&e.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-200 text-green-700 text-xs",children:o}),n&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 text-xs",children:n}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Title *"}),e.jsx("input",{type:"text",name:"title",value:x.title,onChange:p,required:!0,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter announcement title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Target Audience *"}),e.jsxs("select",{name:"announcement_type",value:x.announcement_type,onChange:p,required:!0,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"student",children:"Students"}),e.jsx("option",{value:"employee",children:"Employees"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{name:"priority",value:x.priority,onChange:p,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Target Type"}),e.jsxs("select",{name:"target_type",value:x.target_type,onChange:p,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsxs("option",{value:"all",children:["All ",x.announcement_type,"s"]}),e.jsxs("option",{value:"specific",children:["Specific ",x.announcement_type==="student"?"Class":"Department"]})]})]}),x.target_type==="specific"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:x.announcement_type==="student"?"Class":"Department"}),e.jsxs("select",{name:"target_value",value:x.target_value,onChange:p,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsxs("option",{value:"",children:["Select ",x.announcement_type==="student"?"Class":"Department"]}),(x.announcement_type==="student"?u.students:u.employees).length>0?(x.announcement_type==="student"?u.students:u.employees).map(N=>e.jsx("option",{value:N.id,children:N.stream_name?`${N.name} (${N.stream_name})`:N.name},N.id)):e.jsxs("option",{value:"",disabled:!0,children:["No ",x.announcement_type==="student"?"classes":"departments"," available"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",name:"start_date",value:x.start_date,onChange:p,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",name:"end_date",value:x.end_date,onChange:p,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:x.status,onChange:p,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Content *"}),e.jsx("textarea",{name:"content",value:x.content,onChange:p,required:!0,rows:"4",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter announcement content..."})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 text-xs font-medium border border-gray-300",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:r,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-xs font-medium flex items-center",children:[r?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):e.jsx(R,{icon:Er,className:"mr-2"}),r?"Creating...":"Create Announcement"]})]})]})]})]})})},_de=()=>{const t=ga(),{id:a}=ln(),{token:r}=ut(),[s,n]=g.useState(!1),[i,o]=g.useState(!0),[d,u]=g.useState(null),[m,x]=g.useState(null),[f,b]=g.useState({students:[],employees:[]}),[p,v]=g.useState({title:"",content:"",announcement_type:"student",target_type:"all",target_value:"",priority:"medium",status:"draft",start_date:"",end_date:""});g.useEffect(()=>{j(),N()},[a]);const j=async()=>{try{o(!0);const $=r?{Authorization:`Bearer ${r}`}:{},L=(await ne.get(`${ie}/announcements/${a}`,{headers:$})).data;v({title:L.title||"",content:L.content||"",announcement_type:L.announcement_type||"student",target_type:L.target_type||"all",target_value:L.target_value||"",priority:L.priority||"medium",status:L.status||"draft",start_date:L.start_date||"",end_date:L.end_date||""})}catch($){console.error("Error loading announcement:",$),u("Failed to load announcement data")}finally{o(!1)}},N=async()=>{try{const $=r?{Authorization:`Bearer ${r}`}:{},[O,L]=await Promise.all([ne.get(`${ie}/announcements/targets/student`,{headers:$}),ne.get(`${ie}/announcements/targets/employee`,{headers:$})]);console.log(" Students response:",O.data),console.log(" Employees response:",L.data),b({students:O.data.options||[],employees:L.data.options||[]})}catch($){console.error("Error loading target options:",$)}},w=$=>{const{name:O,value:L}=$.target;v(_=>({..._,[O]:L}))},P=async $=>{$.preventDefault();try{n(!0),u(null),x(null);const O=r?{Authorization:`Bearer ${r}`}:{},L={...p,start_date:p.start_date||null,end_date:p.end_date||null,target_value:p.target_value||null};console.log(" Frontend submitting data:",L),console.log(" Original formData:",p),await ne.put(`${ie}/announcements/${a}`,L,{headers:O}),x("Announcement updated successfully!"),setTimeout(()=>{t("/dashboard/announcements")},2e3)}catch(O){console.error("Error updating announcement:",O),u(O.response?.data?.error||"Failed to update announcement")}finally{n(!1)}},k=()=>{t("/dashboard/announcements")};return i?e.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading announcement..."})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Edit Announcement"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Update announcement details"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:k,className:"bg-gray-600 text-white px-3 py-2 text-xs hover:bg-gray-700 flex items-center",children:[e.jsx(R,{icon:Bt,className:"mr-2"}),"Cancel"]})})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 shadow",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Announcement Details"})}),e.jsxs("form",{onSubmit:P,className:"p-4",children:[m&&e.jsxs("div",{className:"mb-4 p-3 bg-green-100 border border-green-200 text-green-700 text-xs",children:[e.jsx(R,{icon:la,className:"mr-2"}),m]}),d&&e.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 text-xs",children:[e.jsx(R,{icon:la,className:"mr-2"}),d]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Title *"}),e.jsx("input",{type:"text",name:"title",value:p.title,onChange:w,required:!0,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter announcement title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Content *"}),e.jsx("textarea",{name:"content",value:p.content,onChange:w,required:!0,rows:6,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter announcement content"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Target Audience *"}),e.jsxs("select",{name:"announcement_type",value:p.announcement_type,onChange:w,required:!0,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"student",children:"Students"}),e.jsx("option",{value:"employee",children:"Employees"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Target Type"}),e.jsxs("select",{name:"target_type",value:p.target_type,onChange:w,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsxs("option",{value:"all",children:["All ",p.announcement_type==="student"?"Students":"Employees"]}),e.jsxs("option",{value:"specific",children:["Specific ",p.announcement_type==="student"?"Class":"Department"]})]})]}),p.target_type==="specific"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:p.announcement_type==="student"?"Class":"Department"}),e.jsxs("select",{name:"target_value",value:p.target_value,onChange:w,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsxs("option",{value:"",children:["Select ",p.announcement_type==="student"?"Class":"Department"]}),(p.announcement_type==="student"?f.students:f.employees).length>0?(p.announcement_type==="student"?f.students:f.employees).map($=>e.jsx("option",{value:$.id,children:$.stream_name?`${$.name} (${$.stream_name})`:$.name},$.id)):e.jsxs("option",{value:"",disabled:!0,children:["No ",p.announcement_type==="student"?"classes":"departments"," available"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{name:"priority",value:p.priority,onChange:w,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:p.status,onChange:w,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",name:"start_date",value:p.start_date,onChange:w,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",name:"end_date",value:p.end_date,onChange:w,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 text-xs font-medium border border-gray-300",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-xs font-medium flex items-center",children:[s?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):e.jsx(R,{icon:Er,className:"mr-2"}),s?"Updating...":"Update Announcement"]})]})]})]})]})})},Ade=()=>{const{token:t}=ut(),[a,r]=g.useState("structures"),[s,n]=g.useState([]),[i,o]=g.useState([]),[d,u]=g.useState(!1),[m,x]=g.useState(!1),[f,b]=g.useState(null),[p,v]=g.useState(!1),[j,N]=g.useState(new Date().getFullYear().toString()),[w,P]=g.useState({fee_name:"",description:"",amount:"",currency_id:"",fee_type:"one_time",academic_year:j});g.useEffect(()=>{k(),$()},[j]),g.useEffect(()=>{P(A=>({...A,academic_year:j}))},[j]);const k=async()=>{try{const z=await(await fetch(`${ie}/additional-fees/structures?academic_year=${j}`,{headers:{Authorization:`Bearer ${t}`}})).json();z.success&&n(z.data)}catch(A){console.error("Error loading fee structures:",A)}},$=async()=>{try{const z=await(await fetch(`${ie}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}})).json();if(z.success){o(z.data);const M=z.data.find(D=>D.code==="USD");M&&P(D=>({...D,currency_id:M.id}))}}catch(A){console.error("Error loading currencies:",A)}},O=A=>{const{name:z,value:M}=A.target;P(D=>({...D,[z]:M}))},L=async A=>{A.preventDefault(),v(!0);try{console.log("Creating fee structure with data:",w);const z=await fetch(`${ie}/additional-fees/structures`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(w)});console.log("Response status:",z.status);const M=await z.json();console.log("Response data:",M),M.success?(alert("Fee structure created successfully"),u(!1),P({fee_name:"",description:"",amount:"",currency_id:"",fee_type:"one_time"}),k()):alert(M.message||"Failed to create fee structure")}catch(z){console.error("Error creating fee structure:",z),alert("Error creating fee structure: "+z.message)}finally{v(!1)}},_=A=>{const z=s.find(M=>M.id===A);z&&(b(z),x(!0))},E=async()=>{if(f){v(!0),x(!1);try{const A={fee_structure_id:f.id,academic_year:j,due_date:""},M=await(await fetch(`${ie}/additional-fees/assignments/bulk-annual`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(A)})).json();M.success?(alert(`"${f.fee_name}" generated for ${M.data.assignments_created} students`),k()):alert(M.message||"Failed to generate fee assignments")}catch(A){console.error("Error generating fee assignments:",A),alert("Error generating fee assignments")}finally{v(!1),b(null)}}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-2 md:py-6",children:e.jsxs("div",{className:"w-full px-2 md:px-4 lg:px-8",children:[e.jsx("div",{className:"mb-4 md:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg md:text-xl font-bold text-gray-900",children:"Additional Fees Management"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Manage textbook, registration, and report book fees"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Academic Year:"}),e.jsx("input",{type:"text",value:j,onChange:A=>N(A.target.value),placeholder:"e.g., 2025",className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded w-20"})]}),e.jsxs("button",{onClick:()=>{k(),$()},className:"bg-gray-600 text-white px-3 py-2 text-xs hover:bg-gray-700 flex items-center w-full sm:w-auto justify-center",children:[e.jsx(R,{icon:zC,className:"mr-1"}),"Refresh"]})]})]})}),e.jsx("div",{className:"mb-4 md:mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-2 md:space-x-8 overflow-x-auto",children:e.jsxs("button",{onClick:()=>r("structures"),className:`py-2 px-1 border-b-2 font-medium text-xs flex items-center space-x-1 whitespace-nowrap ${a==="structures"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:nx,className:"text-xs"}),e.jsx("span",{children:"Fee Structures"})]})})})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:gap-6",children:a==="structures"&&e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"px-3 md:px-4 py-3 border-b border-gray-200 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsx("h3",{className:"text-sm md:text-base font-medium text-gray-900",children:"Fee Structures"}),e.jsxs("button",{className:"bg-gray-900 text-white px-3 py-2 text-xs hover:bg-gray-800 flex items-center w-full sm:w-auto justify-center",onClick:()=>u(!0),children:[e.jsx(R,{icon:Ot,className:"mr-1"}),"Add Fee Structure"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 md:px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fee Name"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Description"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Type"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell",children:"Status"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:A.fee_type==="annual"?ko:Tn,className:"mr-2 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:A.fee_name}),e.jsx("div",{className:"text-gray-500 sm:hidden",children:A.description})]})]})}),e.jsx("td",{className:"px-2 md:px-3 py-2 text-xs text-gray-900 hidden sm:table-cell",children:A.description}),e.jsxs("td",{className:"px-2 md:px-3 py-2 text-xs text-right font-medium text-gray-900",children:["$",(parseFloat(A.amount)||0).toFixed(2)]}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-xs hidden md:table-cell",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${A.fee_type==="annual"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:A.fee_type})}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-xs hidden lg:table-cell",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${A.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:A.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-xs text-center",children:e.jsxs("div",{className:"flex justify-center space-x-1",children:[e.jsx("button",{className:"text-gray-600 hover:text-gray-900 p-1",title:"Edit",children:e.jsx(R,{icon:ha})}),e.jsx("button",{className:"text-red-600 hover:text-red-900 p-1",title:"Delete",children:e.jsx(R,{icon:Yt})}),A.fee_type==="annual"&&e.jsx("button",{className:"text-blue-600 hover:text-blue-900 p-1",onClick:()=>_(A.id),title:"Generate for all students",children:e.jsx(R,{icon:ko})})]})})]},A.id))})]})})]})})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white shadow-xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"px-3 md:px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"text-sm md:text-base font-medium text-gray-900",children:"Create Fee Structure"}),e.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600",onClick:()=>u(!1),children:e.jsx(R,{icon:Bt,className:"text-sm"})})]}),e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"p-3 md:p-4 space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Fee Name"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",name:"fee_name",value:w.fee_name,onChange:O,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",name:"description",value:w.description,onChange:O,rows:"3"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Amount"}),e.jsx("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",name:"amount",value:w.amount,onChange:O,step:"0.01",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Currency"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",name:"currency_id",value:w.currency_id,onChange:O,required:!0,children:[e.jsx("option",{value:"",children:"Select Currency"}),i.map(A=>e.jsxs("option",{value:A.id,children:[A.name," (",A.code,")"]},A.id))]})]}),e.jsxs("div",{className:"sm:col-span-2 lg:col-span-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Fee Type"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",name:"fee_type",value:w.fee_type,onChange:O,children:[e.jsx("option",{value:"one_time",children:"One Time"}),e.jsx("option",{value:"annual",children:"Annual"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Academic Year"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",name:"academic_year",value:w.academic_year||j,onChange:O,placeholder:"e.g., 2025",required:!0})]})]}),e.jsxs("div",{className:"px-3 md:px-4 py-3 border-t border-gray-200 flex flex-col sm:flex-row justify-end gap-2",children:[e.jsx("button",{type:"button",className:"px-3 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 w-full sm:w-auto",onClick:()=>u(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-3 py-2 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50 w-full sm:w-auto",disabled:p,children:p?"Creating...":"Create Structure"})]})]})]})}),m&&f&&e.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white shadow-xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"px-3 md:px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"text-sm md:text-base font-medium text-gray-900",children:"Confirm Bulk Generation"}),e.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600",onClick:()=>{x(!1),b(null)},children:e.jsx(R,{icon:Bt,className:"text-sm"})})]}),e.jsx("div",{className:"p-3 md:p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(R,{icon:la,className:"text-yellow-500 text-xl"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:['Generate "',f.fee_name,'" for All Students']}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Fee Amount:"})," $",(parseFloat(f.amount)||0).toFixed(2)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fee Type:"})," ",f.fee_type]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Academic Year:"}),e.jsx("input",{type:"text",value:j,onChange:A=>N(A.target.value),placeholder:"e.g., 2025",className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded w-20"})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200",children:e.jsxs("p",{className:"text-xs text-yellow-800",children:[e.jsx("strong",{children:"Warning:"})," This will create fee assignments for ",e.jsx("strong",{children:"ALL students"})," in the system. This action cannot be undone."]})})]})]})}),e.jsxs("div",{className:"px-3 md:px-4 py-3 border-t border-gray-200 flex flex-col sm:flex-row justify-end gap-2",children:[e.jsx("button",{type:"button",className:"px-3 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 w-full sm:w-auto",onClick:()=>{x(!1),b(null)},children:"Cancel"}),e.jsx("button",{type:"button",className:"px-3 py-2 text-xs font-medium text-white bg-red-600 hover:bg-red-700 disabled:opacity-50 w-full sm:w-auto",onClick:E,disabled:p,children:p?"Generating...":"Yes, Generate for All Students"})]})]})})]})},kde=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState([]),[i,o]=g.useState(!1),[d,u]=g.useState(null),[m,x]=g.useState(!1),[f,b]=g.useState(null),[p,v]=g.useState(!1),[j,N]=g.useState(!1),[w,P]=g.useState(""),[k,$]=g.useState(""),[O,L]=g.useState({category_name:"",description:"",is_active:!0});g.useEffect(()=>{_()},[]);const _=async()=>{r(!0);try{const I=await ne.get(`${ie}/waivers/categories`,{headers:{Authorization:`Bearer ${t}`}});n(I.data.data||[])}catch(I){console.error("Error fetching categories:",I),$("Failed to fetch waiver categories"),N(!0)}finally{r(!1)}},E=async I=>{if(I.preventDefault(),!O.category_name.trim()){$("Category name is required"),N(!0);return}r(!0);try{d?(await ne.put(`${ie}/waivers/categories/${d.id}`,O,{headers:{Authorization:`Bearer ${t}`}}),P("Waiver category updated successfully")):(await ne.post(`${ie}/waivers/categories`,O,{headers:{Authorization:`Bearer ${t}`}}),P("Waiver category created successfully")),v(!0),o(!1),u(null),L({category_name:"",description:"",is_active:!0}),_()}catch(V){console.error("Error saving category:",V),V.response?.data?.message?$(V.response.data.message):$("Failed to save waiver category"),N(!0)}finally{r(!1)}},A=I=>{u(I),L({category_name:I.category_name,description:I.description||"",is_active:I.is_active}),o(!0)},z=I=>{b(I),x(!0)},M=async()=>{if(f){r(!0);try{await ne.delete(`${ie}/waivers/categories/${f.id}`,{headers:{Authorization:`Bearer ${t}`}}),P("Waiver category deleted successfully"),v(!0),x(!1),b(null),_()}catch(I){console.error("Error deleting category:",I),$("Failed to delete waiver category"),N(!0)}finally{r(!1)}}},D=()=>{o(!1),u(null),L({category_name:"",description:"",is_active:!0})};return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("button",{onClick:()=>o(!0),className:"bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 flex items-center space-x-1",children:[e.jsx(R,{icon:Ot,className:"text-xs"}),e.jsx("span",{children:"Add Category"})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-3",children:a?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"Loading categories..."})}):s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:Uf,className:"text-4xl text-gray-300 mb-4"}),e.jsx("div",{className:"text-gray-500",children:"No waiver categories found"}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:'Click "Add Category" to create your first category'})]}):e.jsx("div",{className:"space-y-3",children:s.map(I=>e.jsx("div",{className:"border border-gray-200 p-3 rounded-lg hover:border-gray-300 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:I.category_name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${I.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.is_active?"Active":"Inactive"})]}),I.description&&e.jsx("p",{className:"text-xs text-gray-600",children:I.description}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Created: ",new Date(I.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>A(I),className:"text-gray-600 hover:text-gray-900 p-1",title:"Edit category",children:e.jsx(R,{icon:ha,className:"text-xs"})}),e.jsx("button",{onClick:()=>z(I),className:"text-red-600 hover:text-red-900 p-1",title:"Delete category",children:e.jsx(R,{icon:Yt,className:"text-xs"})})]})]})},I.id))})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-sm md:text-base font-bold text-gray-900",children:d?"Edit Category":"Add New Category"}),e.jsx("button",{onClick:D,className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt,className:"text-xs"})})]}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:O.category_name,onChange:I=>L(V=>({...V,category_name:I.target.value})),placeholder:"e.g., Staff Child, Scholarship",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:O.description,onChange:I=>L(V=>({...V,description:I.target.value})),placeholder:"Brief description of this waiver category...",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",rows:"3"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:O.is_active,onChange:I=>L(V=>({...V,is_active:I.target.checked})),className:"mr-2"}),e.jsx("label",{htmlFor:"is_active",className:"text-xs text-gray-700",children:"Active (can be used for new waivers)"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx("button",{type:"button",onClick:D,className:"px-3 py-1.5 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"px-3 py-1.5 bg-gray-900 text-white rounded text-xs hover:bg-gray-800 disabled:opacity-50",children:a?"Saving...":d?"Update":"Create"})]})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-sm md:text-base font-bold text-gray-900",children:"Confirm Delete"}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt,className:"text-xs"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Are you sure you want to delete this waiver category?"}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("div",{className:"font-medium text-sm text-gray-900",children:f?.category_name}),f?.description&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:f.description})]}),e.jsx("p",{className:"text-xs text-red-600 mt-2",children:"This action cannot be undone. Existing waivers using this category will not be affected."})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>x(!1),className:"px-3 py-1.5 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:M,disabled:a,className:"px-3 py-1.5 bg-red-600 text-white rounded text-xs hover:bg-red-700 disabled:opacity-50",children:a?"Deleting...":"Delete"})]})]})}),e.jsx(cm,{isOpen:p,onClose:()=>v(!1),message:w}),e.jsx(Cc,{isOpen:j,onClose:()=>N(!1),message:k})]})},ck=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState(""),[i,o]=g.useState(null),[d,u]=g.useState([]),[m,x]=g.useState([]),[f,b]=g.useState([]),[p,v]=g.useState(!1),[j,N]=g.useState(!1),[w,P]=g.useState(!1),[k,$]=g.useState(""),[O,L]=g.useState(""),[_,E]=g.useState({student_reg_number:"",waiver_amount:"",currency_id:"",category_id:"",reason:"",notes:"",term:"",academic_year:""});g.useEffect(()=>{A(),z()},[]);const A=async()=>{try{const B=await ne.get(`${ie}/waivers/categories`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});x(B.data.data||[])}catch(B){console.error("Error fetching categories:",B),L(`Failed to fetch waiver categories: ${B.response?.data?.message||B.message}`),P(!0)}},z=async()=>{try{const W=(await ne.get(`${ie}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data.data||[];b(W);const K=W.find(X=>X.base_currency);K&&E(X=>({...X,currency_id:K.id}))}catch(B){console.error("Error fetching currencies:",B),L("Failed to load currencies. Please refresh the page.")}},M=async()=>{if(s.trim()){r(!0);try{const B=await ne.get(`${ie}/students/search?query=${s}`,{headers:{Authorization:`Bearer ${t}`}});u(B.data.data||[])}catch(B){console.error("Error searching students:",B),u([])}finally{r(!1)}}},D=B=>{o(B),E(W=>({...W,student_reg_number:B.RegNumber})),u([]),n("")},I=async B=>{if(B.preventDefault(),!i){L("Please select a student"),P(!0);return}if(!_.waiver_amount||!_.currency_id||!_.category_id||!_.reason||!_.term||!_.academic_year){L("Please fill in all required fields including currency, term and academic year"),P(!0);return}if(parseFloat(_.waiver_amount)<=0){L("Waiver amount must be greater than 0"),P(!0);return}v(!0)},V=async()=>{r(!0),L("");try{const B={student_reg_number:i.RegNumber,waiver_amount:parseFloat(_.waiver_amount),currency_id:_.currency_id,category_id:_.category_id,reason:_.reason,notes:_.notes,term:_.term,academic_year:_.academic_year};if((await ne.post(`${ie}/waivers/process`,B,{headers:{Authorization:`Bearer ${t}`}})).data.success){$(`Waiver of ${_.waiver_amount} processed successfully for ${i.Name} ${i.Surname}`),N(!0),v(!1);const K=f.find(X=>X.base_currency);E({student_reg_number:"",waiver_amount:"",currency_id:K?.id||"",category_id:"",reason:"",notes:"",term:"",academic_year:""}),o(null)}}catch(B){console.error("Error processing waiver:",B),B.response?.data?.message?L(B.response.data.message):L("Failed to process waiver"),P(!0),v(!1)}finally{r(!1)}},H=()=>{v(!1),L("")};return e.jsxs("div",{className:"bg-white border border-gray-200 p-3",children:[e.jsxs("form",{onSubmit:I,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"Student Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Search Student ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(R,{icon:aa,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",value:s,onChange:B=>n(B.target.value),placeholder:"Enter student name or registration number...",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsx("button",{type:"button",onClick:M,className:"bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 w-full sm:w-auto",children:"Search"})]})]}),d.length>0&&e.jsxs("div",{className:"border border-gray-200 max-h-32 overflow-y-auto",children:[e.jsx("div",{className:"bg-blue-50 p-2 border-b border-gray-200",children:e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"Click on a student below to select:"})}),d.map(B=>e.jsxs("div",{onClick:()=>D(B),className:"p-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"font-medium text-gray-900 text-xs",children:[B.Name," ",B.Surname]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Reg: ",B.RegNumber," | Class: ",B.Class]})]},B.RegNumber))]}),i&&e.jsxs("div",{className:"bg-green-50 border border-green-200 p-3",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(R,{icon:sn,className:"text-green-600 text-xs mr-2"}),e.jsx("span",{className:"text-xs font-medium text-green-800",children:"Student Selected Successfully"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[i.Name," ",i.Surname]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Registration No:"}),e.jsx("span",{className:"ml-1 font-medium",children:i.RegNumber})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"Waiver Details"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Waiver Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:Ia,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"number",step:"0.01",value:_.waiver_amount,onChange:B=>E(W=>({...W,waiver_amount:B.target.value})),placeholder:"0.00",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Currency ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:_.currency_id,onChange:B=>E(W=>({...W,currency_id:B.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Currency"}),f.map(B=>e.jsxs("option",{value:B.id,children:[B.code," - ",B.name]},B.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Waiver Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:Uf,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsxs("select",{value:_.category_id,onChange:B=>E(W=>({...W,category_id:B.target.value})),className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),m.map(B=>e.jsx("option",{value:B.id,children:B.category_name},B.id))]})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:Tn,className:"absolute left-2 top-2 text-gray-400 text-xs"}),e.jsx("textarea",{value:_.reason,onChange:B=>E(W=>({...W,reason:B.target.value})),placeholder:"Explain why this waiver is being granted...",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",rows:"3",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Term ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:ua,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsxs("select",{value:_.term,onChange:B=>E(W=>({...W,term:B.target.value})),className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Academic Year ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:ua,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",value:_.academic_year,onChange:B=>E(W=>({...W,academic_year:B.target.value})),placeholder:"e.g., 2025",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Additional Notes"}),e.jsx("textarea",{value:_.notes,onChange:B=>E(W=>({...W,notes:B.target.value})),placeholder:"Any additional notes or comments...",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",rows:"2"})]})]})]}),e.jsx("div",{className:"flex justify-center sm:justify-end",children:e.jsx("button",{type:"submit",disabled:a,className:"bg-gray-900 text-white px-4 py-2 text-xs hover:bg-gray-800 disabled:opacity-50 w-full sm:w-auto",children:a?"Processing...":"Process Waiver"})})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-sm md:text-base font-bold text-gray-900",children:"Confirm Waiver"}),e.jsx("button",{onClick:H,className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt,className:"text-xs"})})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Student:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[i?.Name," ",i?.Surname]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Registration:"}),e.jsx("span",{className:"font-medium text-gray-900",children:i?.RegNumber})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Waiver Amount:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",_.waiver_amount]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Category:"}),e.jsx("span",{className:"font-medium text-gray-900",children:m.find(B=>B.id==_.category_id)?.category_name})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Reason:"}),e.jsx("span",{className:"font-medium text-gray-900",children:_.reason})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Term:"}),e.jsx("span",{className:"font-medium text-gray-900",children:_.term})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Academic Year:"}),e.jsx("span",{className:"font-medium text-gray-900",children:_.academic_year})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-3 mb-4",children:e.jsxs("p",{className:"text-xs text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," This waiver will credit the student's account and reduce their outstanding balance."]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[e.jsx("button",{onClick:H,className:"px-3 py-1.5 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50 w-full sm:w-auto",children:"Cancel"}),e.jsx("button",{onClick:V,disabled:a,className:"px-3 py-1.5 bg-gray-900 text-white rounded text-xs hover:bg-gray-800 disabled:opacity-50 w-full sm:w-auto",children:a?"Processing...":"Confirm Waiver"})]})]})}),e.jsx(cm,{isOpen:j,onClose:()=>N(!1),message:k}),e.jsx(Cc,{isOpen:w,onClose:()=>P(!1),message:O})]})},Cde=()=>{const{token:t}=ut(),[a,r]=g.useState(!1),[s,n]=g.useState([]),[i,o]=g.useState([]),[d,u]=g.useState({page:1,limit:20,total:0,totalPages:0}),[m,x]=g.useState({search:"",category_id:"",start_date:"",end_date:"",term:"",academic_year:""}),[f,b]=g.useState(!1),[p,v]=g.useState("");g.useEffect(()=>{j(),N()},[]),g.useEffect(()=>{N()},[d.page,m]);const j=async()=>{try{const _=await ne.get(`${ie}/waivers/categories`,{headers:{Authorization:`Bearer ${t}`}});o(_.data.data||[])}catch(_){console.error("Error fetching categories:",_)}},N=async()=>{r(!0);try{const _=new URLSearchParams({page:d.page,limit:d.limit,...m}),E=await ne.get(`${ie}/waivers/all?${_}`,{headers:{Authorization:`Bearer ${t}`}});n(E.data.data.waivers||[]),u(A=>({...A,...E.data.data.pagination}))}catch(_){console.error("Error fetching waivers:",_),v("Failed to fetch waivers"),b(!0)}finally{r(!1)}},w=(_,E)=>{x(A=>({...A,[_]:E})),u(A=>({...A,page:1}))},P=_=>{u(E=>({...E,page:_}))},k=_=>new Date(_).toLocaleDateString(),$=_=>`$${parseFloat(_).toFixed(2)}`,O=_=>{const E=_.match(/Fee Waiver - ([^:]+):/);return E?E[1]:"Unknown"},L=_=>({term:_.term||"N/A",year:_.academic_year||"N/A"});return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white border border-gray-200 p-3 mb-3",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-2",children:"Filters"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:aa,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",value:m.search,onChange:_=>w("search",_.target.value),placeholder:"Student name or reg number...",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:Uf,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsxs("select",{value:m.category_id,onChange:_=>w("category_id",_.target.value),className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Categories"}),i.map(_=>e.jsx("option",{value:_.id,children:_.category_name},_.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:ua,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"date",value:m.start_date,onChange:_=>w("start_date",_.target.value),className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:ua,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"date",value:m.end_date,onChange:_=>w("end_date",_.target.value),className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Term"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:ua,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsxs("select",{value:m.term||"",onChange:_=>w("term",_.target.value),className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Terms"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Academic Year"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{icon:ua,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",value:m.academic_year||"",onChange:_=>w("academic_year",_.target.value),placeholder:"e.g., 2025",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h3",{className:"text-xs font-medium text-gray-900",children:["Waivers (",d.total,")"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Page ",d.page," of ",d.totalPages]})]}),a?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"Loading waivers..."})}):s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{icon:$r,className:"text-4xl text-gray-300 mb-4"}),e.jsx("div",{className:"text-gray-500",children:"No waivers found"}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Try adjusting your filters"})]}):e.jsx("div",{className:"space-y-3",children:s.map(_=>e.jsx("div",{className:"border border-gray-200 p-3 rounded-lg hover:border-gray-300 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("h4",{className:"font-medium text-gray-900 text-sm",children:[_.Name," ",_.Surname]}),e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:$(_.waiver_amount)})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Registration:"}),e.jsx("span",{className:"ml-1 font-medium",children:_.student_reg_number})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Category:"}),e.jsx("span",{className:"ml-1 font-medium",children:O(_.description)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Date:"}),e.jsx("span",{className:"ml-1 font-medium",children:k(_.transaction_date)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Term:"}),e.jsx("span",{className:"ml-1 font-medium",children:L(_).term})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Year:"}),e.jsx("span",{className:"ml-1 font-medium",children:L(_).year})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Processed by:"}),e.jsx("span",{className:"ml-1 font-medium",children:_.created_by||"System"})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-600 text-xs",children:"Reason:"}),e.jsx("p",{className:"text-xs text-gray-800 mt-1",children:_.description})]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{className:"text-gray-600 hover:text-gray-900 p-1",title:"View details",children:e.jsx(R,{icon:Ma,className:"text-xs"})})})]})},_.id))}),d.totalPages>1&&e.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-6",children:[e.jsx("button",{onClick:()=>P(d.page-1),disabled:d.page===1,className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(R,{icon:qf,className:"text-xs"})}),e.jsx("div",{className:"flex space-x-1",children:Array.from({length:Math.min(5,d.totalPages)},(_,E)=>{const A=E+1;return e.jsx("button",{onClick:()=>P(A),className:`px-2 py-1 text-xs border rounded ${d.page===A?"bg-gray-900 text-white border-gray-900":"border-gray-300 hover:bg-gray-50"}`,children:A},A)})}),e.jsx("button",{onClick:()=>P(d.page+1),disabled:d.page===d.totalPages,className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(R,{icon:zf,className:"text-xs"})})]})]}),e.jsx(Cc,{isOpen:f,onClose:()=>b(!1),message:p})]})},Ede=()=>{const[t,a]=g.useState("process"),r=[{id:"process",name:"Process Waiver",icon:Tn},{id:"management",name:"View Waivers",icon:Hp},{id:"categories",name:"Categories",icon:Uf}],s=()=>{switch(t){case"process":return e.jsx(ck,{});case"management":return e.jsx(Cde,{});case"categories":return e.jsx(kde,{});default:return e.jsx(ck,{})}};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-2",children:e.jsxs("div",{className:"w-full px-2 md:px-4",children:[e.jsx("div",{className:"mb-3",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-bold text-gray-900",children:"Waiver Management"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Manage student fee waivers and categories"})]})}),e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex flex-wrap space-x-2 md:space-x-6 overflow-x-auto",children:r.map(n=>e.jsxs("button",{onClick:()=>a(n.id),className:`py-2 px-1 border-b-2 font-medium text-xs flex items-center space-x-1 whitespace-nowrap ${t===n.id?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:n.icon,className:"text-xs"}),e.jsx("span",{className:"hidden sm:inline",children:n.name}),e.jsx("span",{className:"sm:hidden",children:n.name.split(" ")[0]})]},n.id))})})}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.jsx("div",{children:s()})})]})})},Tde=()=>{const{token:t}=ut(),[a,r]=g.useState([]),[s,n]=g.useState(!0),[i,o]=g.useState(""),[d,u]=g.useState(""),[m,x]=g.useState(""),[f,b]=g.useState(!1),[p,v]=g.useState(!1),[j,N]=g.useState(null),w=async()=>{try{if(n(!0),o(""),m&&m.trim()!==""){const M=await ne.get(`${ie}/timetables/templates`,{params:{search:m.trim()},headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});r(M.data.data||[])}else{const M=await ne.get(`${ie}/timetables/templates`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});r(M.data.data||[])}}catch(M){console.error("Error fetching templates:",M),o("Failed to fetch timetable templates")}finally{n(!1)}};g.useEffect(()=>{w()},[m]);const P=M=>{M.preventDefault(),x(d)},k=()=>{u(""),x("")},$=()=>{b(!0)},O=M=>{window.location.href=`/dashboard/timetables/template/${M.id}`},L=M=>{window.location.href=`/dashboard/timetables/template/${M.id}/edit`},_=M=>{N(M),v(!0)},E=async()=>{if(j)try{await ne.put(`${ie}/timetables/templates/${j.id}`,{is_active:!1},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),w(),v(!1),N(null)}catch(M){console.error("Error deleting template:",M),o("Failed to delete template. Please try again.")}},A=()=>{v(!1),N(null)},z=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 max-w-md",children:[e.jsxs("form",{onSubmit:P,className:"flex",children:[e.jsx("input",{type:"text",value:d,onChange:M=>u(M.target.value),placeholder:"Search by template name, year, or term...",className:"flex-1 px-2 py-1 border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs"}),e.jsx("button",{type:"submit",className:"inline-flex items-center justify-center px-2 py-1 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:e.jsx(R,{icon:aa,className:"h-3 w-3"})})]}),m&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[s?"Searching...":`Found ${a.length} results for "${m}"`,e.jsx("button",{onClick:k,className:"ml-2 text-blue-600 hover:text-blue-800 underline text-xs",children:"Clear search"})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("button",{onClick:$,className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[e.jsx(R,{icon:Ot,className:"mr-1 h-3 w-3"}),"Add New Template"]})})]}),i&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-md p-3",children:e.jsx("div",{className:"text-xs text-red-600",children:i})}),e.jsx("div",{className:"mt-8 flex flex-col",children:e.jsx("div",{className:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Template Name"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Academic Year"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Term"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Days"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Entries"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(M=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:Qu,className:"h-4 w-4 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:M.name}),M.description&&e.jsx("div",{className:"text-gray-500 text-xs",children:M.description})]})]})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-500",children:M.academic_year}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-500",children:M.term}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:rn,className:"h-3 w-3 mr-1"}),M.total_days||0]})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:za,className:"h-3 w-3 mr-1"}),M.total_entries||0]})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs",children:M.is_active?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(R,{icon:Ra,className:"h-3 w-3 mr-1"}),"Active"]}):e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[e.jsx(R,{icon:la,className:"h-3 w-3 mr-1"}),"Inactive"]})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-500",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>O(M),className:"text-blue-600 hover:text-blue-900",title:"View Template",children:e.jsx(R,{icon:Ma,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>L(M),className:"text-gray-600 hover:text-gray-900",title:"Edit Template",children:e.jsx(R,{icon:ha,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>_(M),className:"text-red-600 hover:text-red-900",title:"Delete Template",children:e.jsx(R,{icon:Yt,className:"h-3 w-3"})})]})})]},M.id))})]})})})})}),a.length===0&&!s&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(R,{icon:Qu,className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Timetable Templates"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by creating your first timetable template"}),e.jsxs("button",{onClick:$,className:"inline-flex items-center px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-800 transition-colors",children:[e.jsx(R,{icon:Ot,className:"h-4 w-4 mr-2"}),"Create Template"]})]})]});return e.jsxs("div",{className:"",children:[s?e.jsx("div",{className:"text-xs text-gray-500 mb-4",children:"Loading..."}):i?e.jsx("div",{className:"text-xs text-red-600 mb-4",children:i}):z(),f&&e.jsx(Pde,{onClose:()=>b(!1),onSuccess:()=>{b(!1),w()}}),p&&j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Delete Template"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to delete "',j.name,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsx("button",{onClick:A,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})},Pde=({onClose:t,onSuccess:a})=>{const{token:r}=ut(),[s,n]=g.useState({name:"",description:"",academic_year:new Date().getFullYear().toString(),term:"Term 1",days:["Monday","Tuesday","Wednesday","Thursday","Friday"]}),[i,o]=g.useState(!1),[d,u]=g.useState(""),m=async b=>{b.preventDefault(),o(!0),u("");try{const p=await ne.post(`${ie}/timetables/templates`,s,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});p.data.success?a():u(p.data.message||"Failed to create template")}catch(p){console.error("Error creating template:",p),u(p.response?.data?.message||"Failed to create template")}finally{o(!1)}},x=b=>{const{name:p,value:v}=b.target;n(j=>({...j,[p]:v}))},f=b=>{n(p=>({...p,days:p.days.includes(b)?p.days.filter(v=>v!==b):[...p.days,b]}))};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Create Timetable Template"}),d&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:d}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Name *"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:x,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Term 1 2025",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:s.description,onChange:x,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Brief description of this timetable template"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year *"}),e.jsx("input",{type:"text",name:"academic_year",value:s.academic_year,onChange:x,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Term *"}),e.jsxs("select",{name:"term",value:s.term,onChange:x,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"}),e.jsx("option",{value:"Semester 1",children:"Semester 1"}),e.jsx("option",{value:"Semester 2",children:"Semester 2"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Days of Week"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(b=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.days.includes(b),onChange:()=>f(b),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:b})]},b))})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:i?"Creating...":"Create Template"})]})]})]})})},Ode=({templateId:t,entries:a,onEntryUpdate:r,onEntryDelete:s})=>{const{token:n}=ut(),[i,o]=g.useState({}),[d,u]=g.useState(!0),[m,x]=g.useState(!1),[f,b]=g.useState(null),p=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];g.useEffect(()=>{(async()=>{try{u(!0);const $={};for(const O of p){const L=await ne.get(`${ie}/timetables/templates/${t}/periods/${O}`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});L.data.success&&($[O]=L.data.data||[])}o($)}catch($){console.error("Error fetching periods:",$)}finally{u(!1)}})()},[t]);const v=(k,$)=>a.find(O=>O.day_of_week===k&&O.period_id===$),j=k=>(i[k]||[]).sort((O,L)=>O.start_time.localeCompare(L.start_time)),N=(k,$)=>{if($.is_break)return;const O=v(k,$.id);b({day:k,period:$,entry:O}),x(!0)},w=async k=>{try{f.entry?(await fetch(`${ie}/timetables/entries/${f.entry.id}`,{method:"PUT",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(k)})).ok&&r&&r():(await fetch(`${ie}/timetables/templates/${t}/entries`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({...k,day_of_week:f.day,period_id:f.period.id})})).ok&&r&&r(),x(!1),b(null)}catch($){console.error("Error saving entry:",$)}},P=async k=>{if(window.confirm("Are you sure you want to delete this entry?"))try{(await fetch(`${ie}/timetables/entries/${k}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).ok&&s&&s()}catch($){console.error("Error deleting entry:",$)}};return d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading timetable..."})}):e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Time"}),p.map(k=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-48",children:k},k))]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.keys(i).length>0&&j(p[0]).map(k=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 bg-gray-50",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:rn,className:"h-4 w-4 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:k.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[k.start_time," - ",k.end_time]})]})]})}),p.map($=>{const O=i[$]?.find(_=>_.id===k.id),L=v($,k.id);return O?e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:O.is_break?e.jsx("div",{className:"flex items-center justify-center p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-red-800",children:O.name}),e.jsx("div",{className:"text-xs text-red-600",children:O.period_type})]})}):L?e.jsxs("div",{className:"group relative",children:[e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors cursor-pointer",children:[e.jsx("div",{className:"font-medium text-blue-900",children:L.subject_name}),e.jsx("div",{className:"text-xs text-blue-700",children:L.teacher_name}),e.jsx("div",{className:"text-xs text-blue-600",children:L.class_name||L.stream_name})]}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:_=>{_.stopPropagation(),b({day:$,period:O,entry:L}),x(!0)},className:"p-1 bg-white rounded shadow-sm hover:bg-gray-50",title:"Edit Entry",children:e.jsx(R,{icon:ha,className:"h-3 w-3 text-gray-600"})}),e.jsx("button",{onClick:_=>{_.stopPropagation(),P(L.id)},className:"p-1 bg-white rounded shadow-sm hover:bg-red-50",title:"Delete Entry",children:e.jsx(R,{icon:Yt,className:"h-3 w-3 text-red-600"})})]})})]}):e.jsxs("button",{onClick:()=>N($,O),className:"w-full p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors text-gray-500 hover:text-blue-600",children:[e.jsx(R,{icon:Ot,className:"h-4 w-4 mx-auto mb-1"}),e.jsx("div",{className:"text-xs",children:"Add Class"})]})},$):e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400 bg-gray-50",children:"-"},$)})]},k.id))})]})}),m&&f&&e.jsx(Dde,{selectedCell:f,templateId:t,onClose:()=>{x(!1),b(null)},onSave:w})]})},Dde=({selectedCell:t,templateId:a,onClose:r,onSave:s})=>{const{token:n}=ut(),[i,o]=g.useState([]),[d,u]=g.useState(!1),[m,x]=g.useState({subject_class_id:t.entry?.subject_class_id||""});g.useEffect(()=>{(async()=>{try{const v=await fetch(`${ie}/timetables/templates/${a}/available-subject-classes`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(v.ok){const j=await v.json();o(j.data||[])}}catch(v){console.error("Error fetching subject classes:",v)}})()},[a]);const f=async p=>{p.preventDefault(),u(!0),await s(m),u(!1)},b=p=>{const{name:v,value:j}=p.target;x(N=>({...N,[v]:j}))};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:[t.entry?"Edit Entry":"Add Entry"," - ",t.day]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[t.period.name," (",t.period.start_time," - ",t.period.end_time,")"]}),e.jsxs("form",{onSubmit:f,children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject Class *"}),e.jsxs("select",{name:"subject_class_id",value:m.subject_class_id,onChange:b,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select a subject class"}),i.map(p=>e.jsxs("option",{value:p.id,children:[p.subject_name," - ",p.teacher_name," (",p.class_name||p.stream_name,")"]},p.id))]})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:d?"Saving...":t.entry?"Update":"Add"})]})]})]})})},Lde=()=>{const{id:t}=ln(),a=ga(),{token:r}=ut(),[s,n]=g.useState(null),[i,o]=g.useState(!0),[d,u]=g.useState(""),[m,x]=g.useState("overview"),[f,b]=g.useState([]),[p,v]=g.useState([]),[j,N]=g.useState(null),w=async()=>{try{o(!0);const E=await ne.get(`${ie}/timetables/templates/${t}`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});E.data.success?n(E.data.data):u("Failed to fetch template details")}catch(E){console.error("Error fetching template:",E),u("Failed to fetch template details")}finally{o(!1)}},P=async()=>{try{const E=await ne.get(`${ie}/timetables/templates/${t}/entries`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});E.data.success&&b(E.data.data||[])}catch(E){console.error("Error fetching entries:",E)}},k=()=>{P()},$=()=>{P()},O=async()=>{try{const E=await fetch(`${ie}/timetable-generation/templates/${t}/conflicts`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(E.ok){const A=await E.json();v(A.data.conflicts||[])}}catch(E){console.error("Error fetching conflicts:",E)}},L=async()=>{try{const E=await fetch(`${ie}/timetable-generation/templates/${t}/stats`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(E.ok){const A=await E.json();N(A.data)}}catch(E){console.error("Error fetching stats:",E)}},_=async()=>{try{const E=await fetch(`${ie}/timetable-generation/templates/${t}/generate`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({options:{clearExisting:!0,strategy:"balanced"}})});if(E.ok){const A=await E.json();alert(`Timetable generated successfully! ${A.data.generated_entries} entries created.`),P(),O(),L()}else{const A=await E.json();alert(`Failed to generate timetable: ${A.message}`)}}catch(E){console.error("Error generating timetable:",E),alert("Failed to generate timetable")}};return g.useEffect(()=>{w()},[t]),g.useEffect(()=>{s&&(P(),O(),L())},[s]),i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading template..."})}):d?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(AlertCircle,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:d}),e.jsx("button",{onClick:()=>a("/dashboard/timetables"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Timetables"})]})}):s?e.jsxs("div",{className:"",children:[i?e.jsx("div",{className:"text-xs text-gray-500 mb-4",children:"Loading..."}):d?e.jsx("div",{className:"text-xs text-red-600 mb-4",children:d}):s?e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsxs("div",{className:"px-6 pt-2 pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>a("/dashboard/timetables"),className:"mr-4 p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(R,{icon:em,className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl text-gray-900 font-semibold mb-1",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:[s.academic_year," - ",s.term]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:_,className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(R,{icon:kx,className:"mr-1 h-3 w-3"}),"Generate Timetable"]}),e.jsxs("button",{onClick:()=>a(`/dashboard/timetables/template/${t}/edit`),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[e.jsx(R,{icon:ha,className:"mr-1 h-3 w-3"}),"Edit Template"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-8 text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[e.jsx(R,{icon:Qu,className:"mr-2 h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Template:"}),e.jsx("span",{className:"ml-1 text-gray-900",children:s.name})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:rn,className:"mr-2 h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Days:"}),e.jsxs("span",{className:"ml-1 text-gray-900",children:[s.days?.length||0," configured"]})]})]})]})}):null,e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"overview",name:"Overview",icon:Qu},{id:"timetable",name:"Timetable",icon:rn},{id:"conflicts",name:"Conflicts",icon:la},{id:"stats",name:"Statistics",icon:Co}].map(E=>e.jsxs("button",{onClick:()=>x(E.id),className:`py-3 text-sm font-medium border-b-2 transition-colors duration-150 ${m===E.id?"border-gray-700 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(R,{icon:E.icon,className:"mr-2 h-4 w-4"}),E.name]},E.id))})}),m==="overview"&&e.jsx(Mde,{template:s}),m==="timetable"&&e.jsx(Rde,{template:s,entries:f,onEntryUpdate:k,onEntryDelete:$}),m==="conflicts"&&e.jsx($de,{conflicts:p}),m==="stats"&&e.jsx(Fde,{stats:j})]}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Calendar,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Template Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"The requested timetable template could not be found."}),e.jsx("button",{onClick:()=>a("/dashboard/timetables"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Timetables"})]})})},Mde=({template:t})=>e.jsxs("div",{className:"px-6 space-y-4",children:[e.jsxs("div",{className:"bg-white shadow p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Template Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Name"}),e.jsx("p",{className:"text-gray-900 text-xs",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Academic Year"}),e.jsx("p",{className:"text-gray-900 text-xs",children:t.academic_year})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Term"}),e.jsx("p",{className:"text-gray-900 text-xs",children:t.term})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Status"}),e.jsx("p",{className:"text-gray-900 text-xs",children:t.is_active?e.jsx("span",{className:"text-green-600",children:"Active"}):e.jsx("span",{className:"text-gray-600",children:"Inactive"})})]})]}),t.description&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Description"}),e.jsx("p",{className:"text-gray-900 text-xs",children:t.description})]})]}),e.jsxs("div",{className:"bg-white shadow p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Days Configuration"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:t.days?.map(a=>e.jsxs("div",{className:"flex items-center p-2 bg-gray-50",children:[e.jsx(R,{icon:Qu,className:"h-4 w-4 text-blue-600 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 text-xs",children:a.day_of_week}),e.jsxs("p",{className:"text-xs text-gray-600",children:[a.total_periods," periods"]})]})]},a.id))})]})]}),Rde=({template:t,entries:a,onEntryUpdate:r,onEntryDelete:s})=>e.jsx("div",{className:"px-6",children:e.jsx(Ode,{templateId:t.id,entries:a,onEntryUpdate:r,onEntryDelete:s})}),$de=({conflicts:t})=>e.jsx("div",{className:"px-6",children:e.jsxs("div",{className:"bg-white shadow",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Conflicts"})}),e.jsx("div",{className:"p-4",children:t.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(R,{icon:Ra,className:"h-8 w-8 text-green-500 mx-auto mb-3"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"No Conflicts Found"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"Your timetable is conflict-free!"})]}):e.jsx("div",{className:"space-y-3",children:t.map(a=>e.jsx("div",{className:"p-3 bg-red-50 border border-red-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(R,{icon:la,className:"h-4 w-4 text-red-500 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-red-800",children:a.conflict_type}),e.jsx("p",{className:"text-xs text-red-700 mt-1",children:a.description}),e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[a.day_of_week," - ",a.period_name]})]})]})},a.id))})})]})}),Fde=({stats:t})=>t?e.jsxs("div",{className:"px-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white shadow p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:za,className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Entries"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.basic_stats?.total_entries||0})]})]})}),e.jsx("div",{className:"bg-white shadow p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:Qu,className:"h-6 w-6 text-green-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Active Days"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.basic_stats?.active_days||0})]})]})}),e.jsx("div",{className:"bg-white shadow p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:rn,className:"h-6 w-6 text-purple-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Teachers"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.basic_stats?.teachers_involved||0})]})]})}),e.jsx("div",{className:"bg-white shadow p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:la,className:"h-6 w-6 text-red-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Conflicts"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"0"})]})]})})]}),t.teacher_workload&&t.teacher_workload.length>0&&e.jsxs("div",{className:"bg-white shadow p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Teacher Workload"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Periods"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Active Days"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subjects"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.teacher_workload.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-xs font-medium text-gray-900",children:a.teacher_name}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-500",children:a.total_periods}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-500",children:a.active_days}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-500",children:a.subjects_taught})]},a.teacher_name))})]})})]})]}):e.jsx("div",{className:"px-6",children:e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading statistics..."})})}),Ide=()=>{const{id:t}=ln(),a=ga(),{token:r}=ut(),[s,n]=g.useState(null),[i,o]=g.useState(!0),[d,u]=g.useState(!1),[m,x]=g.useState(""),[f,b]=g.useState("Monday"),[p,v]=g.useState(!1),j=async()=>{try{o(!0);const L=await ne.get(`${ie}/timetables/templates/${t}`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});L.data.success?(n(L.data.data),L.data.data.days&&L.data.data.days.length>0&&b(L.data.data.days[0].day_of_week)):x("Failed to fetch template details")}catch(L){console.error("Error fetching template:",L),x("Failed to fetch template details")}finally{o(!1)}},N=async L=>{try{u(!0);const _=await ne.put(`${ie}/timetables/templates/${t}`,L,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});_.data.success?a(`/dashboard/timetables/template/${t}`):x(_.data.message||"Failed to update template")}catch(_){console.error("Error updating template:",_),x(_.response?.data?.message||"Failed to update template")}finally{u(!1)}},w=async L=>{try{const _=await fetch(`${ie}/timetables/templates/${t}/periods/${f}`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(L)});if(_.ok)j(),v(!1);else{const E=await _.json();x(E.message||"Failed to add period")}}catch(_){console.error("Error adding period:",_),x("Failed to add period")}},P=async(L,_)=>{try{const E=await fetch(`${ie}/timetables/periods/${L}`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(_)});if(E.ok)j();else{const A=await E.json();x(A.message||"Failed to update period")}}catch(E){console.error("Error updating period:",E),x("Failed to update period")}},k=async L=>{if(window.confirm("Are you sure you want to delete this period?"))try{const _=await fetch(`${ie}/timetables/periods/${L}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(_.ok)j();else{const E=await _.json();x(E.message||"Failed to delete period")}}catch(_){console.error("Error deleting period:",_),x("Failed to delete period")}};if(g.useEffect(()=>{j()},[t]),i)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading template..."})});if(m)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(AlertCircle,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:m}),e.jsx("button",{onClick:()=>a("/dashboard/timetables"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Timetables"})]})});if(!s)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Calendar,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Template Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"The requested timetable template could not be found."}),e.jsx("button",{onClick:()=>a("/dashboard/timetables"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Timetables"})]})});const O=s.days?.find(L=>L.day_of_week===f)?.periods||[];return e.jsxs("div",{className:"",children:[e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsxs("div",{className:"px-6 pt-2 pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>a(`/dashboard/timetables/template/${t}`),className:"mr-4 p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(R,{icon:em,className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl text-gray-900 font-semibold mb-1",children:"Edit Template"}),e.jsx("div",{className:"text-sm text-gray-500 mb-4",children:s.name})]})]}),e.jsxs("button",{onClick:()=>N({name:s.name,description:s.description,is_active:s.is_active}),disabled:d,className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50",children:[e.jsx(R,{icon:Er,className:"mr-1 h-3 w-3"}),d?"Saving...":"Save Changes"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-8 text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[e.jsx(R,{icon:Qu,className:"mr-2 h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Template:"}),e.jsx("span",{className:"ml-1 text-gray-900",children:s.name})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:rn,className:"mr-2 h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Days:"}),e.jsxs("span",{className:"ml-1 text-gray-900",children:[s.days?.length||0," configured"]})]})]})]})}),m&&e.jsxs("div",{className:"px-6 mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center",children:[e.jsx(R,{icon:la,className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("span",{className:"text-red-700 text-sm",children:m})]}),e.jsxs("div",{className:"px-6 grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white shadow p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Days"}),e.jsx("div",{className:"space-y-1",children:s.days?.map(L=>e.jsx("button",{onClick:()=>b(L.day_of_week),className:`w-full text-left px-2 py-1 transition-colors text-xs ${f===L.day_of_week?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:L.day_of_week}),e.jsxs("span",{className:"text-xs text-gray-500",children:[L.total_periods," periods"]})]})},L.id))})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white shadow",children:[e.jsxs("div",{className:"px-6 py-3 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900",children:[f," Periods"]}),e.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[e.jsx(R,{icon:Ot,className:"mr-1 h-3 w-3"}),"Add Period"]})]}),e.jsx("div",{className:"p-4",children:O.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(R,{icon:rn,className:"h-8 w-8 text-gray-400 mx-auto mb-3"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"No Periods"}),e.jsxs("p",{className:"text-gray-600 text-xs mb-3",children:["Add periods to configure the ",f," schedule"]}),e.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center px-3 py-1 bg-gray-700 text-white hover:bg-gray-800 transition-colors text-xs",children:[e.jsx(R,{icon:Ot,className:"mr-1 h-3 w-3"}),"Add First Period"]})]}):e.jsx("div",{className:"space-y-4",children:O.map(L=>e.jsx(Bde,{period:L,onUpdate:_=>P(L.id,_),onDelete:()=>k(L.id)},L.id))})})]})})]}),p&&e.jsx(zde,{onClose:()=>v(!1),onSave:w,dayOfWeek:f})]})},Bde=({period:t,onUpdate:a,onDelete:r})=>{const[s,n]=g.useState(!1),[i,o]=g.useState({name:t.name,start_time:t.start_time,end_time:t.end_time,period_type:t.period_type,is_break:t.is_break,sort_order:t.sort_order}),d=()=>{a(i),n(!1)},u=()=>{o({name:t.name,start_time:t.start_time,end_time:t.end_time,period_type:t.period_type,is_break:t.is_break,sort_order:t.sort_order}),n(!1)},m=x=>{const{name:f,value:b,type:p,checked:v}=x.target;o(j=>({...j,[f]:p==="checkbox"?v:b}))};return e.jsx("div",{className:"border border-gray-200 p-3",children:s?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:i.name,onChange:m,className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{name:"period_type",value:i.period_type,onChange:m,className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"Teaching",children:"Teaching"}),e.jsx("option",{value:"Break",children:"Break"}),e.jsx("option",{value:"Assembly",children:"Assembly"}),e.jsx("option",{value:"Sports",children:"Sports"}),e.jsx("option",{value:"Chapel",children:"Chapel"}),e.jsx("option",{value:"Lunch",children:"Lunch"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Time"}),e.jsx("input",{type:"time",name:"start_time",value:i.start_time,onChange:m,className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Time"}),e.jsx("input",{type:"time",name:"end_time",value:i.end_time,onChange:m,className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"is_break",checked:i.is_break,onChange:m,className:"mr-2"}),e.jsx("label",{className:"text-xs text-gray-700",children:"Break Period (no classes allowed)"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:u,className:"px-3 py-1 text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors text-xs",children:"Cancel"}),e.jsx("button",{onClick:d,className:"px-3 py-1 bg-gray-700 text-white hover:bg-gray-800 transition-colors text-xs",children:"Save"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-2 h-2 mr-2 ${t.is_break?"bg-red-500":"bg-green-500"}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:[t.start_time," - ",t.end_time," (",t.period_type,")"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>n(!0),className:"p-1 text-gray-600 hover:bg-gray-100 transition-colors",title:"Edit Period",children:e.jsx(R,{icon:ha,className:"h-3 w-3"})}),e.jsx("button",{onClick:r,className:"p-1 text-red-600 hover:bg-red-100 transition-colors",title:"Delete Period",children:e.jsx(R,{icon:Yt,className:"h-3 w-3"})})]})]})})},zde=({onClose:t,onSave:a,dayOfWeek:r})=>{const[s,n]=g.useState({name:"",start_time:"",end_time:"",period_type:"Teaching",is_break:!1,sort_order:0}),[i,o]=g.useState(!1),d=async m=>{m.preventDefault(),o(!0),await a(s),o(!1)},u=m=>{const{name:x,value:f,type:b,checked:p}=m.target;n(v=>({...v,[x]:b==="checkbox"?p:f}))};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Add Period - ",r]}),e.jsx("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors",children:e.jsx(R,{icon:Bt,className:"h-3 w-3"})})]}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:u,className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"e.g., Period 1, Break, Assembly",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Time *"}),e.jsx("input",{type:"time",name:"start_time",value:s.start_time,onChange:u,className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Time *"}),e.jsx("input",{type:"time",name:"end_time",value:s.end_time,onChange:u,className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{name:"period_type",value:s.period_type,onChange:u,className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"Teaching",children:"Teaching"}),e.jsx("option",{value:"Break",children:"Break"}),e.jsx("option",{value:"Assembly",children:"Assembly"}),e.jsx("option",{value:"Sports",children:"Sports"}),e.jsx("option",{value:"Chapel",children:"Chapel"}),e.jsx("option",{value:"Lunch",children:"Lunch"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"is_break",checked:s.is_break,onChange:u,className:"mr-2"}),e.jsx("label",{className:"text-xs text-gray-700",children:"Break Period (no classes allowed)"})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 mt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-3 py-1 text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors text-xs",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:i,className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-gray-500 disabled:opacity-50",children:[e.jsx(R,{icon:Er,className:"mr-1 h-3 w-3"}),i?"Adding...":"Add Period"]})]})]})]})})},qde=()=>e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Timetable System Test"}),e.jsx("p",{className:"text-gray-600",children:"Testing the timetable functionality"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(UB,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Templates"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"0"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(VB,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Periods"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"0"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(GC,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Entries"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"0"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(GB,{className:"h-8 w-8 text-red-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Conflicts"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"0"})]})]})})]}),e.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),e.jsx("span",{className:"text-gray-700",children:"Database tables created"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),e.jsx("span",{className:"text-gray-700",children:"API endpoints configured"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),e.jsx("span",{className:"text-gray-700",children:"Frontend components ready"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-3"}),e.jsx("span",{className:"text-gray-700",children:"Sample data needs to be created"})]})]})]}),e.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Next Steps"}),e.jsxs("ul",{className:"list-disc list-inside text-blue-800 space-y-1",children:[e.jsxs("li",{children:["Run the database migration: ",e.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"node run-timetable-migration.js"})]}),e.jsx("li",{children:"Test the API endpoints"}),e.jsx("li",{children:"Create your first timetable template"}),e.jsx("li",{children:"Configure day-specific periods"}),e.jsx("li",{children:"Generate timetables automatically"})]})]})]}),Ude=({isOpen:t,onClose:a,onSuccess:r,editingFixture:s=null})=>{const{token:n}=ut(),[i,o]=g.useState(!1),[d,u]=g.useState(null),[m,x]=g.useState([]),[f,b]=g.useState([]),[p,v]=g.useState({title:"",description:"",sport_category_id:"",home_team_id:"",away_team_id:"",home_team_name:"",away_team_name:"",venue:"",fixture_date:"",fixture_time:"",weather_conditions:"",referee_name:"",referee_contact:"",is_home_game:!0});g.useEffect(()=>{if(t)if(j(),s)v({title:s.title||"",description:s.description||"",sport_category_id:s.sport_category_id||"",home_team_id:s.home_team_id||"",away_team_id:s.away_team_id||"",home_team_name:s.home_team_name||"",away_team_name:s.away_team_name||"",venue:s.venue||"",fixture_date:s.fixture_date||"",fixture_time:s.fixture_time||"",weather_conditions:s.weather_conditions||"",referee_name:s.referee_name||"",referee_contact:s.referee_contact||"",is_home_game:s.is_home_game!==void 0?s.is_home_game:!0});else{const k=new Date().toISOString().split("T")[0];v($=>({...$,fixture_date:k}))}},[t,s]),g.useEffect(()=>{p.sport_category_id&&N(p.sport_category_id)},[p.sport_category_id]);const j=async()=>{try{const k=await ne.get(`${ie}/sports/categories`,{headers:{Authorization:`Bearer ${n}`}});x(k.data.data||[])}catch(k){console.error("Error fetching categories:",k)}},N=async k=>{try{const $=await ne.get(`${ie}/sports/teams`,{headers:{Authorization:`Bearer ${n}`},params:{sport_category_id:k,limit:100}});b($.data.data||[])}catch($){console.error("Error fetching teams:",$)}},w=k=>{const{name:$,value:O,type:L,checked:_}=k.target;v(E=>({...E,[$]:L==="checkbox"?_:O}))},P=async k=>{k.preventDefault(),o(!0),u(null);try{const $={...p};Object.keys($).forEach(O=>{$[O]===""&&($[O]=null)}),s?await ne.put(`${ie}/sports/fixtures/${s.id}`,$,{headers:{Authorization:`Bearer ${n}`}}):await ne.post(`${ie}/sports/fixtures`,$,{headers:{Authorization:`Bearer ${n}`}}),r(),a()}catch($){console.error("Error saving fixture:",$),u($.response?.data?.message||"Failed to save fixture")}finally{o(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:s?"Edit Fixture":"Create New Fixture"}),e.jsx("button",{onClick:a,className:"p-1.5 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(R,{icon:Bt,className:"h-4 w-4"})})]}),e.jsxs("form",{onSubmit:P,className:"p-4 space-y-4",children:[d&&e.jsx("div",{className:"bg-red-50 border border-red-200 p-3",children:e.jsx("div",{className:"text-sm text-red-700",children:d})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Title *"}),e.jsx("input",{type:"text",name:"title",value:p.title,onChange:w,className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",placeholder:"e.g., Senior Football vs ABC School",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Sport Category *"}),e.jsxs("select",{name:"sport_category_id",value:p.sport_category_id,onChange:w,className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Sport Category"}),m.map(k=>e.jsx("option",{value:k.id,children:k.name},k.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{name:"description",value:p.description,onChange:w,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Additional details about the fixture..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Home Team"}),e.jsxs("select",{name:"home_team_id",value:p.home_team_id,onChange:w,className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",children:[e.jsx("option",{value:"",children:"Select Home Team"}),f.map(k=>e.jsx("option",{value:k.id,children:k.name},k.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Away Team"}),e.jsxs("select",{name:"away_team_id",value:p.away_team_id,onChange:w,className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",children:[e.jsx("option",{value:"",children:"Select Away Team"}),f.map(k=>e.jsx("option",{value:k.id,children:k.name},k.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Home Team Name (External)"}),e.jsx("input",{type:"text",name:"home_team_name",value:p.home_team_name,onChange:w,className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",placeholder:"e.g., ABC School"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Away Team Name (External)"}),e.jsx("input",{type:"text",name:"away_team_name",value:p.away_team_name,onChange:w,className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",placeholder:"e.g., XYZ School"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[e.jsx(R,{icon:ua,className:"h-4 w-4 mr-2"}),"Fixture Date *"]}),e.jsx("input",{type:"date",name:"fixture_date",value:p.fixture_date,onChange:w,className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[e.jsx(R,{icon:ua,className:"h-4 w-4 mr-2"}),"Fixture Time *"]}),e.jsx("input",{type:"time",name:"fixture_time",value:p.fixture_time,onChange:w,className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(R,{icon:jc,className:"h-4 w-4 mr-2"}),"Venue"]}),e.jsx("input",{type:"text",name:"venue",value:p.venue,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., School Football Ground"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Referee Name"}),e.jsx("input",{type:"text",name:"referee_name",value:p.referee_name,onChange:w,className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",placeholder:"e.g., John Smith"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Referee Contact"}),e.jsx("input",{type:"text",name:"referee_contact",value:p.referee_contact,onChange:w,className:"w-full px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",placeholder:"e.g., 1234567890"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weather Conditions"}),e.jsx("input",{type:"text",name:"weather_conditions",value:p.weather_conditions,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Sunny, Rainy, Cloudy"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"is_home_game",checked:p.is_home_game,onChange:w,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:"This is a home game"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:a,className:"px-3 py-1.5 text-gray-700 bg-gray-100 text-sm hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"px-3 py-1.5 bg-gray-700 text-white text-sm hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs("span",{className:"flex items-center",children:[e.jsx(R,{icon:Er,className:"h-4 w-4 mr-2"}),s?"Update Fixture":"Create Fixture"]})})]})]})]})}):null},Hde=({isOpen:t,onClose:a,onSuccess:r,editingTeam:s=null})=>{const{token:n}=ut(),[i,o]=g.useState(!1),[d,u]=g.useState(null),[m,x]=g.useState([]),[f,b]=g.useState({name:"",description:"",sport_category_id:"",coach_name:"",coach_contact:"",is_active:!0});g.useEffect(()=>{t&&(p(),s?b({name:s.name||"",description:s.description||"",sport_category_id:s.sport_category_id||"",coach_name:s.coach_name||"",coach_contact:s.coach_contact||"",is_active:s.is_active!==void 0?s.is_active:!0}):v())},[t,s]);const p=async()=>{try{const w=await ne.get(`${ie}/sports/categories`,{headers:{Authorization:`Bearer ${n}`}});x(w.data.data||[])}catch(w){console.error("Error fetching categories:",w)}},v=()=>{b({name:"",description:"",sport_category_id:"",coach_name:"",coach_contact:"",is_active:!0}),u(null)},j=w=>{const{name:P,value:k,type:$,checked:O}=w.target;b(L=>({...L,[P]:$==="checkbox"?O:k}))},N=async w=>{w.preventDefault();try{o(!0),u(null);const P=s?`${ie}/sports/teams/${s.id}`:`${ie}/sports/teams`;await ne[s?"put":"post"](P,f,{headers:{Authorization:`Bearer ${n}`}}),r(),a(),v()}catch(P){console.error("Error saving team:",P),u(P.response?.data?.message||"Failed to save team")}finally{o(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:s?"Edit Team":"Create New Team"}),e.jsx("button",{onClick:a,className:"p-1.5 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(R,{icon:Bt,className:"h-4 w-4"})})]}),e.jsxs("form",{onSubmit:N,className:"p-4 space-y-4",children:[d&&e.jsx("div",{className:"bg-red-50 border border-red-200 p-3",children:e.jsx("div",{className:"text-sm text-red-700",children:d})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Team Name *"}),e.jsx("input",{type:"text",name:"name",value:f.name,onChange:j,className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",placeholder:"e.g., Senior Football Team",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Sport Category *"}),e.jsxs("select",{name:"sport_category_id",value:f.sport_category_id,onChange:j,className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Sport Category"}),m.map(w=>e.jsx("option",{value:w.id,children:w.name},w.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:f.description,onChange:j,rows:3,className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",placeholder:"Team description..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Coach Name"}),e.jsx("input",{type:"text",name:"coach_name",value:f.coach_name,onChange:j,className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",placeholder:"Coach name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Coach Contact"}),e.jsx("input",{type:"text",name:"coach_contact",value:f.coach_contact,onChange:j,className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",placeholder:"Phone or email"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"is_active",checked:f.is_active,onChange:j,className:"h-4 w-4 text-gray-600 focus:ring-gray-500 border-gray-300"}),e.jsx("label",{className:"ml-2 text-xs font-medium text-gray-700",children:"Team is active"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:a,className:"px-3 py-1.5 text-gray-700 bg-gray-100 text-sm hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"px-3 py-1.5 bg-gray-700 text-white text-sm hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs("span",{className:"flex items-center",children:[e.jsx(R,{icon:Er,className:"h-3 w-3 mr-1"}),s?"Update Team":"Create Team"]})})]})]})]})}):null},Yde=({isOpen:t,onClose:a,onSuccess:r,editingAnnouncement:s=null})=>{const{token:n}=ut(),[i,o]=g.useState(!1),[d,u]=g.useState(null),[m,x]=g.useState([]),[f,b]=g.useState([]),[p,v]=g.useState([]),[j,N]=g.useState({title:"",content:"",announcement_type:"general",sport_category_id:"",team_id:"",fixture_id:"",priority:"medium",status:"published",start_date:"",end_date:"",target_audience:"all"});g.useEffect(()=>{t&&(w(),s?N({title:s.title||"",content:s.content||"",announcement_type:s.announcement_type||"general",sport_category_id:s.sport_category_id||"",team_id:s.team_id||"",fixture_id:s.fixture_id||"",priority:s.priority||"medium",status:s.status||"published",start_date:s.start_date||"",end_date:s.end_date||"",target_audience:s.target_audience||"all"}):P())},[t,s]);const w=async()=>{try{const[O,L,_]=await Promise.all([ne.get(`${ie}/sports/categories`,{headers:{Authorization:`Bearer ${n}`}}),ne.get(`${ie}/sports/teams`,{headers:{Authorization:`Bearer ${n}`}}),ne.get(`${ie}/sports/fixtures`,{headers:{Authorization:`Bearer ${n}`}})]);x(O.data.data||[]),b(L.data.data||[]),v(_.data.data||[])}catch(O){console.error("Error fetching data:",O)}},P=()=>{N({title:"",content:"",announcement_type:"general",sport_category_id:"",team_id:"",fixture_id:"",priority:"medium",status:"published",start_date:"",end_date:"",target_audience:"all"}),u(null)},k=O=>{const{name:L,value:_}=O.target;N(E=>({...E,[L]:_}))},$=async O=>{O.preventDefault();try{o(!0),u(null);const L=s?`${ie}/sports/announcements/${s.id}`:`${ie}/sports/announcements`;await ne[s?"put":"post"](L,j,{headers:{Authorization:`Bearer ${n}`}}),r(),a(),P()}catch(L){console.error("Error saving announcement:",L),u(L.response?.data?.message||"Failed to save announcement")}finally{o(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:s?"Edit Announcement":"Create New Announcement"}),e.jsx("button",{onClick:a,className:"p-1.5 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(R,{icon:Bt,className:"h-4 w-4"})})]}),e.jsxs("form",{onSubmit:$,className:"p-4 space-y-4",children:[d&&e.jsx("div",{className:"bg-red-50 border border-red-200 p-3",children:e.jsx("div",{className:"text-sm text-red-700",children:d})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Title *"}),e.jsx("input",{type:"text",name:"title",value:j.title,onChange:k,className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",placeholder:"Announcement title",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{name:"announcement_type",value:j.announcement_type,onChange:k,className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",required:!0,children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"fixture",children:"Fixture"}),e.jsx("option",{value:"result",children:"Result"}),e.jsx("option",{value:"training",children:"Training"}),e.jsx("option",{value:"meeting",children:"Meeting"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Content *"}),e.jsx("textarea",{name:"content",value:j.content,onChange:k,rows:4,className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",placeholder:"Announcement content...",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Sport Category"}),e.jsxs("select",{name:"sport_category_id",value:j.sport_category_id,onChange:k,className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",children:[e.jsx("option",{value:"",children:"Select Category"}),m.map(O=>e.jsx("option",{value:O.id,children:O.name},O.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Team"}),e.jsxs("select",{name:"team_id",value:j.team_id,onChange:k,className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",children:[e.jsx("option",{value:"",children:"Select Team"}),f.map(O=>e.jsx("option",{value:O.id,children:O.name},O.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Fixture"}),e.jsxs("select",{name:"fixture_id",value:j.fixture_id,onChange:k,className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",children:[e.jsx("option",{value:"",children:"Select Fixture"}),p.map(O=>e.jsx("option",{value:O.id,children:O.title},O.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{name:"priority",value:j.priority,onChange:k,className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:j.status,onChange:k,className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",name:"start_date",value:j.start_date,onChange:k,className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",name:"end_date",value:j.end_date,onChange:k,className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Target Audience"}),e.jsxs("select",{name:"target_audience",value:j.target_audience,onChange:k,className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"students",children:"Students"}),e.jsx("option",{value:"employees",children:"Employees"}),e.jsx("option",{value:"teams",children:"Teams"})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:a,className:"px-3 py-1.5 text-gray-700 bg-gray-100 text-sm hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"px-3 py-1.5 bg-gray-700 text-white text-sm hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs("span",{className:"flex items-center",children:[e.jsx(R,{icon:Er,className:"h-3 w-3 mr-1"}),s?"Update Announcement":"Create Announcement"]})})]})]})]})}):null},Gde=()=>{const{token:t}=ut(),[a,r]=g.useState(new Date),[s,n]=g.useState([]),[i,o]=g.useState(!0),[d,u]=g.useState(null),[m,x]=g.useState(null),[f,b]=g.useState([]),p=_=>({"fa-futbol":Ax,"fa-basketball-ball":DC,"fa-running":IC,"fa-volleyball-ball":PC,"fa-table-tennis":$C,"fa-swimmer":MC,"fa-baseball":OC,"fa-football-ball":FC,"fa-hockey-puck":LC})[_]||Ax,v=_=>({scheduled:"bg-blue-100 text-blue-800 border-blue-200",ongoing:"bg-yellow-100 text-yellow-800 border-yellow-200",completed:"bg-green-100 text-green-800 border-green-200",cancelled:"bg-red-100 text-red-800 border-red-200",postponed:"bg-gray-100 text-gray-800 border-gray-200"})[_]||"bg-gray-100 text-gray-800 border-gray-200";g.useEffect(()=>{j()},[a]);const j=async()=>{try{o(!0),u(null);const _=new Date(a.getFullYear(),a.getMonth(),1),E=new Date(a.getFullYear(),a.getMonth()+1,0),A=await ne.get(`${ie}/sports/fixtures`,{headers:{Authorization:`Bearer ${t}`},params:{date_from:_.toISOString().split("T")[0],date_to:E.toISOString().split("T")[0],limit:100}});n(A.data.data||[])}catch(_){console.error("Error fetching fixtures:",_),u("Failed to load fixtures")}finally{o(!1)}},N=_=>{r(E=>{const A=new Date(E);return _==="prev"?A.setMonth(A.getMonth()-1):A.setMonth(A.getMonth()+1),A})},w=_=>{const E=_.getFullYear(),A=_.getMonth(),z=new Date(E,A,1),D=new Date(E,A+1,0).getDate(),I=z.getDay(),V=[];for(let H=0;H<I;H++)V.push(null);for(let H=1;H<=D;H++)V.push(H);return V},P=_=>{if(!_)return[];const E=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(_).padStart(2,"0")}`;return s.filter(A=>A.fixture_date===E)},k=_=>{_&&(x(_),b(P(_)))},$=_=>{const[E,A]=_.split(":"),z=parseInt(E),M=z>=12?"PM":"AM";return`${z%12||12}:${A} ${M}`},O=w(a),L=["January","February","March","April","May","June","July","August","September","October","November","December"];return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading calendar..."})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Sports Calendar"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>N("prev"),className:"p-1.5 text-gray-600 hover:bg-gray-100 transition-colors",children:e.jsx(R,{icon:qf,className:"h-3 w-3"})}),e.jsxs("h2",{className:"text-sm font-medium text-gray-800",children:[L[a.getMonth()]," ",a.getFullYear()]}),e.jsx("button",{onClick:()=>N("next"),className:"p-1.5 text-gray-600 hover:bg-gray-100 transition-colors",children:e.jsx(R,{icon:zf,className:"h-3 w-3"})})]})]}),d&&e.jsx("div",{className:"bg-red-50 border border-red-200 p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:ua,className:"h-4 w-4 text-red-400 mr-2"}),e.jsx("span",{className:"text-sm text-red-700",children:d})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"lg:col-span-2 bg-white shadow-sm border border-gray-200",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-3",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(_=>e.jsx("div",{className:"text-center text-xs font-medium text-gray-500 py-1",children:_},_))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:O.map((_,E)=>{const A=P(_),z=_===new Date().getDate()&&a.getMonth()===new Date().getMonth()&&a.getFullYear()===new Date().getFullYear(),M=m===_;return e.jsx("div",{onClick:()=>k(_),className:`
                      min-h-[80px] p-1.5 border border-gray-200 cursor-pointer transition-colors
                      ${_?"bg-white hover:bg-gray-50":"bg-gray-50"}
                      ${z?"bg-blue-50 border-blue-300":""}
                      ${M?"bg-blue-100 border-blue-400":""}
                    `,children:_&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`text-xs font-medium mb-1 ${z?"text-blue-600":"text-gray-900"}`,children:_}),e.jsxs("div",{className:"space-y-0.5",children:[A.slice(0,2).map((D,I)=>e.jsxs("div",{className:`text-xs p-1 border ${v(D.status)}`,children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(R,{icon:p(D.sport_category_icon),className:"h-2 w-2"}),e.jsx("span",{className:"truncate text-xs",children:D.title})]}),e.jsx("div",{className:"text-xs opacity-75",children:$(D.fixture_time)})]},I)),A.length>2&&e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",A.length-2," more"]})]})]})},E)})})]})}),e.jsx("div",{className:"bg-white shadow-sm border border-gray-200",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800 mb-3",children:m?`${L[a.getMonth()]} ${m}`:"Select a date"}),f.length===0?e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(R,{icon:ua,className:"h-8 w-8 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-sm",children:m?"No fixtures on this date":"No date selected"})]}):e.jsx("div",{className:"space-y-3",children:f.map(_=>e.jsxs("div",{className:"p-3 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(R,{icon:p(_.sport_category_icon),className:"h-4 w-4 text-gray-600"}),e.jsx("h4",{className:"text-sm font-medium text-gray-800",children:_.title})]}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(R,{icon:Rd,className:"h-3 w-3"}),e.jsxs("span",{children:[_.home_team_name," vs ",_.away_team_name]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(R,{icon:ua,className:"h-3 w-3"}),e.jsx("span",{children:$(_.fixture_time)})]}),_.venue&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(R,{icon:jc,className:"h-3 w-3"}),e.jsx("span",{children:_.venue})]}),e.jsx("div",{className:"flex items-center space-x-1",children:e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${v(_.status)}`,children:_.status})})]}),_.result_home_score!==null&&e.jsxs("div",{className:"mt-2 p-2 bg-white border",children:[e.jsx("div",{className:"text-xs font-medium text-gray-700 mb-1",children:"Result"}),e.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[_.result_home_score," - ",_.result_away_score]}),_.result_notes&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:_.result_notes})]})]},_.id))})]})})]})]})},Vde=()=>{const{token:t}=ut(),a=ga(),[r,s]=g.useState("fixtures"),[n,i]=g.useState(!1),[o,d]=g.useState(!0),[u,m]=g.useState(null),[x,f]=g.useState([]),[b,p]=g.useState([]),[v,j]=g.useState([]),[N,w]=g.useState([]),[P,k]=g.useState({current_page:1,total_pages:1,total_items:0,items_per_page:10}),[$,O]=g.useState({search:"",sport_category_id:"",status:"",team_id:"",announcement_type:"",priority:""}),[L,_]=g.useState(!1),[E,A]=g.useState(!1),[z,M]=g.useState(null),D=se=>({"fa-futbol":Ax,"fa-basketball-ball":DC,"fa-running":IC,"fa-volleyball-ball":PC,"fa-table-tennis":$C,"fa-swimmer":MC,"fa-baseball":OC,"fa-football-ball":FC,"fa-hockey-puck":LC})[se]||Ax;g.useEffect(()=>{I()},[r,P.current_page,$]);const I=async()=>{try{d(!0),m(null);const se={page:P.current_page,limit:P.items_per_page,...$};let te;switch(r){case"fixtures":te=await ne.get(`${ie}/sports/fixtures`,{headers:{Authorization:`Bearer ${t}`},params:se}),f(te.data.data||[]),k(te.data.pagination||P);break;case"teams":te=await ne.get(`${ie}/sports/teams`,{headers:{Authorization:`Bearer ${t}`},params:se}),p(te.data.data||[]),k(te.data.pagination||P);break;case"announcements":te=await ne.get(`${ie}/sports/announcements`,{headers:{Authorization:`Bearer ${t}`},params:se}),w(te.data.data||[]),k(te.data.pagination||P);break;default:break}}catch(se){console.error("Error fetching data:",se),m("Failed to fetch data")}finally{d(!1)}};g.useEffect(()=>{(async()=>{try{const te=await ne.get(`${ie}/sports/categories`,{headers:{Authorization:`Bearer ${t}`}});j(te.data.data||[])}catch(te){console.error("Error fetching categories:",te)}})()},[]);const V=(se,te)=>{O(ue=>({...ue,[se]:te})),k(ue=>({...ue,current_page:1}))},H=()=>{k(se=>({...se,current_page:1})),I()},B=se=>{k(te=>({...te,current_page:se}))},W=()=>{M(null),_(!0)},K=()=>{I()},X=se=>{M(se),A(!0)},Q=async(se,te)=>{if(window.confirm("Are you sure you want to delete this item?"))try{let ue;switch(te){case"fixture":ue=`${ie}/sports/fixtures/${se}`;break;case"team":ue=`${ie}/sports/teams/${se}`;break;case"announcement":ue=`${ie}/sports/announcements/${se}`;break;default:return}await ne.delete(ue,{headers:{Authorization:`Bearer ${t}`}}),I()}catch(ue){console.error("Error deleting item:",ue),m("Failed to delete item")}},ye=se=>({scheduled:"bg-blue-100 text-blue-800",ongoing:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",postponed:"bg-gray-100 text-gray-800"})[se]||"bg-gray-100 text-gray-800",Y=se=>({urgent:"bg-red-100 text-red-800",high:"bg-orange-100 text-orange-800",medium:"bg-blue-100 text-blue-800",low:"bg-gray-100 text-gray-800"})[se]||"bg-gray-100 text-gray-800",J=()=>e.jsx("div",{className:"space-y-3",children:x.map(se=>e.jsx("div",{className:"bg-white shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(R,{icon:D(se.sport_category_icon),className:"h-4 w-4 text-gray-600"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:se.title}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${ye(se.status)}`,children:se.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(R,{icon:ua,className:"h-3 w-3"}),e.jsx("span",{children:new Date(se.fixture_date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(R,{icon:za,className:"h-3 w-3"}),e.jsxs("span",{children:[se.home_team_name," vs ",se.away_team_name]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(R,{icon:Rd,className:"h-3 w-3"}),e.jsx("span",{children:se.venue})]})]}),se.result_home_score!==null&&e.jsxs("div",{className:"mt-2 p-2 bg-gray-50",children:[e.jsx("div",{className:"text-xs font-medium text-gray-700",children:"Result"}),e.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[se.result_home_score," - ",se.result_away_score]}),se.result_notes&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:se.result_notes})]})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>X(se),className:"p-1.5 text-gray-600 hover:bg-gray-100 transition-colors",title:"Edit Fixture",children:e.jsx(R,{icon:ha,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>Q(se.id,"fixture"),className:"p-1.5 text-red-600 hover:bg-red-50 transition-colors",title:"Delete Fixture",children:e.jsx(R,{icon:Yt,className:"h-3 w-3"})})]})]})},se.id))}),U=()=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(se=>e.jsxs("div",{className:"bg-white shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(R,{icon:D(se.sport_category_icon),className:"h-4 w-4 text-gray-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:se.name}),e.jsx("p",{className:"text-xs text-gray-600",children:se.sport_category_name})]})]}),se.description&&e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:se.description}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[se.coach_name&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(R,{icon:za,className:"h-3 w-3"}),e.jsxs("span",{children:["Coach: ",se.coach_name]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(R,{icon:za,className:"h-3 w-3"}),e.jsxs("span",{children:[se.participant_count," members"]})]})]}),e.jsxs("div",{className:"flex space-x-1 mt-3",children:[e.jsx("button",{onClick:()=>a(`/dashboard/sports/teams/${se.id}`),className:"flex-1 px-2 py-1 text-gray-600 hover:bg-gray-50 transition-colors text-xs font-medium",children:"View Details"}),e.jsx("button",{onClick:()=>X(se),className:"p-1.5 text-gray-600 hover:bg-gray-100 transition-colors",title:"Edit Team",children:e.jsx(R,{icon:ha,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>Q(se.id,"team"),className:"p-1.5 text-red-600 hover:bg-red-50 transition-colors",title:"Delete Team",children:e.jsx(R,{icon:Yt,className:"h-3 w-3"})})]})]},se.id))}),ee=()=>e.jsx("div",{className:"space-y-3",children:N.map(se=>e.jsx("div",{className:"bg-white shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(R,{icon:cg,className:"h-4 w-4 text-gray-600"}),e.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:se.title}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${Y(se.priority)}`,children:se.priority}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${ye(se.status)}`,children:se.status})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:se.content}),e.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-500",children:[e.jsxs("span",{children:["Type: ",se.announcement_type]}),se.sport_category_name&&e.jsxs("span",{children:["Sport: ",se.sport_category_name]}),se.team_name&&e.jsxs("span",{children:["Team: ",se.team_name]}),e.jsxs("span",{children:["Created: ",new Date(se.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>X(se),className:"p-1.5 text-gray-600 hover:bg-gray-100 transition-colors",title:"Edit Announcement",children:e.jsx(R,{icon:ha,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>Q(se.id,"announcement"),className:"p-1.5 text-red-600 hover:bg-red-50 transition-colors",title:"Delete Announcement",children:e.jsx(R,{icon:Yt,className:"h-3 w-3"})})]})]})},se.id))}),he=()=>e.jsx("div",{className:"bg-white shadow-sm border border-gray-200 p-4 mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:$.search,onChange:se=>V("search",se.target.value),className:"w-full pl-8 pr-3 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",placeholder:"Search..."}),e.jsx(R,{icon:aa,className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"})]})]}),r==="fixtures"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Sport Category"}),e.jsxs("select",{value:$.sport_category_id,onChange:se=>V("sport_category_id",se.target.value),className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",children:[e.jsx("option",{value:"",children:"All Categories"}),v.map(se=>e.jsx("option",{value:se.id,children:se.name},se.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:$.status,onChange:se=>V("status",se.target.value),className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"ongoing",children:"Ongoing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"postponed",children:"Postponed"})]})]})]}),r==="announcements"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:$.announcement_type,onChange:se=>V("announcement_type",se.target.value),className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"fixture",children:"Fixture"}),e.jsx("option",{value:"result",children:"Result"}),e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"training",children:"Training"}),e.jsx("option",{value:"meeting",children:"Meeting"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{value:$.priority,onChange:se=>V("priority",se.target.value),className:"w-full px-2 py-1.5 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 text-sm",children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"urgent",children:"Urgent"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:H,className:"w-full px-3 py-1.5 bg-gray-700 text-white text-sm hover:bg-gray-800 transition-colors",children:[e.jsx(R,{icon:aa,className:"h-3 w-3 mr-1"}),"Search"]})})]})}),pe=()=>P.total_pages<=1?null:e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:["Showing ",(P.current_page-1)*P.items_per_page+1," to"," ",Math.min(P.current_page*P.items_per_page,P.total_items)," of"," ",P.total_items," results"]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>B(P.current_page-1),disabled:!P.has_previous_page,className:"px-2 py-1 border border-gray-300 text-xs hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:P.total_pages},(se,te)=>te+1).map(se=>e.jsx("button",{onClick:()=>B(se),className:`px-2 py-1 border text-xs ${se===P.current_page?"bg-gray-700 text-white border-gray-700":"border-gray-300 hover:bg-gray-50"}`,children:se},se)),e.jsx("button",{onClick:()=>B(P.current_page+1),disabled:!P.has_next_page,className:"px-2 py-1 border border-gray-300 text-xs hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]});return o?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading sports data..."})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Sports Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage sports fixtures, teams, and announcements"})]}),e.jsxs("button",{onClick:W,className:"px-3 py-1.5 bg-gray-700 text-white text-sm hover:bg-gray-800 transition-colors",children:[e.jsx(R,{icon:Ot,className:"h-3 w-3 mr-1"}),"Add ",r==="fixtures"?"Fixture":r==="teams"?"Team":"Announcement"]})]}),e.jsx("div",{className:"border-b border-gray-300",children:e.jsxs("nav",{className:"-mb-px flex space-x-6",children:[[{id:"fixtures",label:"Fixtures",icon:ua},{id:"teams",label:"Teams",icon:za},{id:"announcements",label:"Announcements",icon:cg}].map(se=>e.jsxs("button",{onClick:()=>s(se.id),className:`py-1.5 px-1 border-b-2 font-medium text-xs ${r===se.id?"border-gray-600 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-400"}`,children:[e.jsx(R,{icon:se.icon,className:"h-3 w-3 mr-1"}),se.label]},se.id)),e.jsxs("button",{onClick:()=>i(!n),className:`py-1.5 px-1 border-b-2 font-medium text-xs ${n?"border-gray-600 text-gray-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-400"}`,children:[e.jsx(R,{icon:ua,className:"h-3 w-3 mr-1"}),"Calendar"]})]})}),he(),u&&e.jsx("div",{className:"bg-red-50 border border-red-200 p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{icon:la,className:"h-4 w-4 text-red-400 mr-2"}),e.jsx("span",{className:"text-sm text-red-700",children:u})]})}),e.jsx("div",{children:n?e.jsx(Gde,{}):e.jsxs(e.Fragment,{children:[r==="fixtures"&&J(),r==="teams"&&U(),r==="announcements"&&ee()]})}),pe(),r==="fixtures"&&e.jsx(Ude,{isOpen:L,onClose:()=>_(!1),onSuccess:K,editingFixture:z}),r==="teams"&&e.jsx(Hde,{isOpen:L,onClose:()=>_(!1),onSuccess:K,editingTeam:z}),r==="announcements"&&e.jsx(Yde,{isOpen:L,onClose:()=>_(!1),onSuccess:K,editingAnnouncement:z})]})},Wde=()=>{const[t,a]=g.useState([]),[r,s]=g.useState([]),[n,i]=g.useState([]),[o,d]=g.useState(!0),[u,m]=g.useState(""),[x,f]=g.useState(""),[b,p]=g.useState("Active"),[v,j]=g.useState(!1);g.useEffect(()=>{N()},[x,b]);const N=async()=>{try{d(!0);const _=localStorage.getItem("token"),[E,A,z]=await Promise.all([ne.get("http://localhost:5000/api/assets",{headers:{Authorization:`Bearer ${_}`},params:{asset_type_id:x||void 0,status:b||void 0}}),ne.get("http://localhost:5000/api/assets/types",{headers:{Authorization:`Bearer ${_}`}}),ne.get("http://localhost:5000/api/assets/summary/totals",{headers:{Authorization:`Bearer ${_}`}})]);a(E.data.data||[]),s(A.data.data||[]),i(z.data.data||[]),m("")}catch(_){console.error("Error fetching data:",_),m(_.response?.data?.error||"Failed to fetch data")}finally{d(!1)}},w=_=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(_||0),P=_=>_?new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",k=_=>({Active:"bg-green-100 text-green-800",Disposed:"bg-gray-100 text-gray-800",Lost:"bg-red-100 text-red-800",Damaged:"bg-orange-100 text-orange-800","Under Repair":"bg-yellow-100 text-yellow-800"})[_]||"bg-gray-100 text-gray-800",$=n.reduce((_,E)=>_+parseFloat(E.total_cost||0),0),O=n.reduce((_,E)=>_+parseFloat(E.total_paid||0),0),L=n.reduce((_,E)=>_+parseFloat(E.total_outstanding||0),0);return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-bold text-gray-900",children:"Fixed Assets"}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Manage school property, vehicles, and equipment"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zt,{to:"/dashboard/assets/configurations",className:"bg-blue-600 text-white px-3 py-1.5 text-xs hover:bg-blue-700 flex items-center gap-1.5 rounded",children:"Configurations"}),e.jsxs("button",{onClick:()=>j(!0),className:"bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 flex items-center gap-1.5 rounded",children:[e.jsx("span",{className:"text-sm",children:"+"}),"Add Asset"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-white p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Total Assets Value"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 mt-0.5",children:w($)})]}),e.jsxs("div",{className:"bg-white p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Total Paid"}),e.jsx("p",{className:"text-lg font-bold text-green-600 mt-0.5",children:w(O)})]}),e.jsxs("div",{className:"bg-white p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Outstanding Balance"}),e.jsx("p",{className:"text-lg font-bold text-orange-600 mt-0.5",children:w(L)})]}),e.jsxs("div",{className:"bg-white p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Total Assets"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 mt-0.5",children:t.length})]})]}),e.jsxs("div",{className:"bg-white p-3 border border-gray-200 mb-3",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-2",children:"Assets by Type"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:n.map((_,E)=>e.jsxs("div",{className:"border border-gray-200 p-2 hover:border-gray-400 cursor-pointer transition",onClick:()=>{const A=r.find(z=>z.name===_.asset_type);f(A?A.id:"")},children:[e.jsx("p",{className:"text-xs text-gray-600",children:_.asset_type}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:_.count||0}),e.jsx("p",{className:"text-xs text-gray-500",children:w(_.total_cost)})]},E))})]}),e.jsx("div",{className:"bg-white p-3 border border-gray-200 mb-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Asset Type"}),e.jsxs("select",{value:x,onChange:_=>f(_.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",children:[e.jsx("option",{value:"",children:"All Types"}),r.map(_=>e.jsx("option",{value:_.id,children:_.name},_.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:b,onChange:_=>p(_.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Disposed",children:"Disposed"}),e.jsx("option",{value:"Lost",children:"Lost"}),e.jsx("option",{value:"Damaged",children:"Damaged"}),e.jsx("option",{value:"Under Repair",children:"Under Repair"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{f(""),p("Active")},className:"bg-gray-200 text-gray-700 px-3 py-1.5 hover:bg-gray-300 text-xs",children:"Clear Filters"})})]})}),o?e.jsx("div",{className:"bg-white p-6 border border-gray-200 text-center",children:e.jsx("p",{className:"text-gray-600 text-xs",children:"Loading assets..."})}):u?e.jsx("div",{className:"bg-red-50 p-3 border border-red-200",children:e.jsx("p",{className:"text-red-800 text-xs",children:u})}):t.length===0?e.jsx("div",{className:"bg-white p-6 border border-gray-200 text-center",children:e.jsx("p",{className:"text-gray-600 text-xs",children:"No assets found"})}):e.jsx("div",{className:"bg-white border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Asset Code"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Asset Name"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Purchase Date"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Cost"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Paid"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Outstanding"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 text-xs font-medium text-gray-900",children:_.asset_code}),e.jsxs("td",{className:"px-3 py-2 text-xs text-gray-900",children:[e.jsx("div",{className:"font-medium",children:_.asset_name}),_.registration_number&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Reg: ",_.registration_number]})]}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-600",children:_.asset_type_name}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-600",children:P(_.purchase_date)}),e.jsx("td",{className:"px-3 py-2 text-xs font-medium text-gray-900",children:w(_.total_cost)}),e.jsx("td",{className:"px-3 py-2 text-xs text-green-600",children:w(_.amount_paid)}),e.jsx("td",{className:"px-3 py-2 text-xs text-orange-600",children:w(_.outstanding_balance)}),e.jsx("td",{className:"px-3 py-2 text-xs",children:e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${k(_.status)}`,children:_.status})}),e.jsx("td",{className:"px-3 py-2 text-xs",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>window.location.href=`/dashboard/assets/${_.id}`,className:"text-blue-600 hover:text-blue-800 text-xs font-medium",children:"View"}),_.outstanding_balance>0&&e.jsx("button",{onClick:()=>window.location.href=`/dashboard/assets/${_.id}`,className:"text-green-600 hover:text-green-800 text-xs font-medium",children:"Pay"})]})})]},_.id))})]})})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 max-w-md w-full",children:[e.jsx("h2",{className:"text-sm font-bold mb-3",children:"Add New Asset"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"This will redirect to the Add Asset page..."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{j(!1),window.location.href="/dashboard/assets/add"},className:"flex-1 bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800",children:"Continue"}),e.jsx("button",{onClick:()=>j(!1),className:"flex-1 bg-gray-200 text-gray-700 px-3 py-1.5 text-xs hover:bg-gray-300",children:"Cancel"})]})]})})]})},Kde=()=>{const t=ga(),[a,r]=g.useState([]),[s,n]=g.useState(null),[i,o]=g.useState(!1),[d,u]=g.useState(""),[m,x]=g.useState(""),[f,b]=g.useState({asset_type_id:"",asset_name:"",description:"",purchase_date:"",total_cost:"",supplier_name:"",registration_number:"",location:"",serial_number:"",status:"Active",condition:"",custom_fields:{},enable_depreciation:!1,depreciation_method:"Straight Line",useful_life_years:"",salvage_value:"0",is_opening_balance:!1,opening_balance_date:"",amount_paid:"0",payment_method:"Bank Transfer"}),[p,v]=g.useState([]),j=()=>{v([...p,{name:"",value:""}])},N=(_,E,A)=>{const z=[...p];z[_][E]=A,v(z);const M={};z.forEach(D=>{D.name&&D.value&&(M[D.name]=D.value)}),b(D=>({...D,custom_fields:{...D.custom_fields,...M}}))},w=_=>{const E=p.filter((z,M)=>M!==_);v(E);const A={};E.forEach(z=>{z.name&&z.value&&(A[z.name]=z.value)}),b(z=>({...z,custom_fields:A}))};g.useEffect(()=>{P()},[]),g.useEffect(()=>{if(f.asset_type_id){const _=a.find(E=>E.id===parseInt(f.asset_type_id));n(_)}else n(null)},[f.asset_type_id,a]);const P=async()=>{try{const _=localStorage.getItem("token"),E=await ne.get("http://localhost:5000/api/assets/types",{headers:{Authorization:`Bearer ${_}`}});r(E.data.data||[])}catch(_){console.error("Error fetching asset types:",_),u("Failed to fetch asset types")}},k=_=>{const{name:E,value:A,type:z,checked:M}=_.target;b(D=>({...D,[E]:z==="checkbox"?M:A}))},$=(_,E)=>{b(A=>({...A,custom_fields:{...A.custom_fields,[_]:E}}))},O=async _=>{_.preventDefault(),o(!0),u(""),x("");try{const E=localStorage.getItem("token"),A={...f,total_cost:parseFloat(f.total_cost),amount_paid:parseFloat(f.amount_paid||0),useful_life_years:f.enable_depreciation?parseInt(f.useful_life_years):null,salvage_value:f.enable_depreciation?parseFloat(f.salvage_value||0):0},z=await ne.post("http://localhost:5000/api/assets",A,{headers:{Authorization:`Bearer ${E}`}});x("Asset created successfully!"),setTimeout(()=>{t("/dashboard/assets")},1500)}catch(E){console.error("Error creating asset:",E),u(E.response?.data?.error||"Failed to create asset")}finally{o(!1)}},L=_=>{const E=f.custom_fields[_.field_name]||"";switch(_.field_type){case"text":return e.jsx("input",{type:"text",value:E,onChange:z=>$(_.field_name,z.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",required:_.is_required});case"number":return e.jsx("input",{type:"number",step:"0.01",value:E,onChange:z=>$(_.field_name,z.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",required:_.is_required});case"date":return e.jsx("input",{type:"date",value:E,onChange:z=>$(_.field_name,z.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",required:_.is_required});case"textarea":return e.jsx("textarea",{value:E,onChange:z=>$(_.field_name,z.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",rows:"3",required:_.is_required});case"select":const A=_.field_options?JSON.parse(_.field_options):[];return e.jsxs("select",{value:E,onChange:z=>$(_.field_name,z.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",required:_.is_required,children:[e.jsx("option",{value:"",children:"Select..."}),A.map((z,M)=>e.jsx("option",{value:z,children:z},M))]});case"checkbox":return e.jsx("input",{type:"checkbox",checked:E===!0||E==="true",onChange:z=>$(_.field_name,z.target.checked),className:"h-3 w-3"});default:return null}};return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h1",{className:"text-base font-bold text-gray-900",children:"Add New Fixed Asset"}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Record a new asset purchase or add historical asset"})]}),d&&e.jsx("div",{className:"mb-3 p-2 bg-red-100 border border-red-400 text-red-700 text-xs",children:d}),m&&e.jsx("div",{className:"mb-3 p-2 bg-green-100 border border-green-400 text-green-700 text-xs",children:m}),e.jsxs("form",{onSubmit:O,className:"bg-white border border-gray-200 p-3 space-y-3",children:[e.jsxs("div",{className:"border-b pb-3",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-3",children:"Asset Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Asset Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"asset_type_id",value:f.asset_type_id,onChange:k,required:!0,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",children:[e.jsx("option",{value:"",children:"Select Asset Type"}),a.map(_=>e.jsx("option",{value:_.id,children:_.name},_.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Asset Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"asset_name",value:f.asset_name,onChange:k,required:!0,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"e.g., Toyota Hilux ABC-1234"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:f.description,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",rows:"2",placeholder:"Additional details about the asset..."})]})]})]}),e.jsxs("div",{className:"border-b pb-3",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-3",children:"Purchase Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Purchase Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"purchase_date",value:f.purchase_date,onChange:k,required:!0,className:"w-full border border-gray-300 px-2 py-1.5 text-xs"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Total Cost (USD) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",name:"total_cost",value:f.total_cost,onChange:k,required:!0,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"0.00"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",name:"supplier_name",value:f.supplier_name,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"Name of supplier/vendor"})]})]})]}),e.jsxs("div",{className:"border-b pb-3",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-3",children:"Asset Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s?.requires_registration&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Registration Number"}),e.jsx("input",{type:"text",name:"registration_number",value:f.registration_number,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"e.g., ABC-1234"})]}),s?.requires_serial_number&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",name:"serial_number",value:f.serial_number,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"e.g., SN123456789"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:f.location,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"Where is this asset located?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:f.status||"Active",onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Disposed",children:"Disposed"}),e.jsx("option",{value:"Lost",children:"Lost"}),e.jsx("option",{value:"Damaged",children:"Damaged"}),e.jsx("option",{value:"Under Repair",children:"Under Repair"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Condition"}),e.jsxs("select",{name:"condition",value:f.condition||"",onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",children:[e.jsx("option",{value:"",children:"Select Condition"}),e.jsx("option",{value:"Excellent",children:"Excellent"}),e.jsx("option",{value:"Good",children:"Good"}),e.jsx("option",{value:"Fair",children:"Fair"}),e.jsx("option",{value:"Poor",children:"Poor"})]})]})]})]}),e.jsxs("div",{className:"border-b pb-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900",children:"Custom Details"}),e.jsx("button",{type:"button",onClick:j,className:"bg-blue-600 text-white px-3 py-1 text-xs hover:bg-blue-700",children:"+ Add Custom Field"})]}),p.length===0?e.jsx("p",{className:"text-xs text-gray-500 italic",children:'Click "Add Custom Field" to add your own details like Color, Receipt Number, etc.'}):e.jsx("div",{className:"space-y-2",children:p.map((_,E)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[e.jsx("div",{className:"col-span-5",children:e.jsx("input",{type:"text",value:_.name,onChange:A=>N(E,"name",A.target.value),placeholder:"Field name (e.g., Color)",className:"w-full border border-gray-300 px-2 py-1.5 text-xs"})}),e.jsx("div",{className:"col-span-6",children:e.jsx("input",{type:"text",value:_.value,onChange:A=>N(E,"value",A.target.value),placeholder:"Value (e.g., Red)",className:"w-full border border-gray-300 px-2 py-1.5 text-xs"})}),e.jsx("div",{className:"col-span-1",children:e.jsx("button",{type:"button",onClick:()=>w(E),className:"text-red-600 hover:text-red-800 text-xs font-medium",title:"Remove field",children:""})})]},E))})]}),s&&s.custom_fields&&s.custom_fields.length>0&&e.jsxs("div",{className:"border-b pb-3",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-3",children:"Additional Information"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.custom_fields.map(_=>e.jsxs("div",{className:_.field_type==="textarea"?"md:col-span-2":"",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[_.field_label,_.is_required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),L(_)]},_.id))})]}),e.jsxs("div",{className:"border-b pb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("input",{type:"checkbox",name:"is_opening_balance",checked:f.is_opening_balance,onChange:k,className:"h-3 w-3"}),e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"This is a historical asset (opening balance)"})]}),f.is_opening_balance&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 bg-blue-50 p-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Opening Balance Date"}),e.jsx("input",{type:"date",name:"opening_balance_date",value:f.opening_balance_date,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Amount Already Paid (USD)"}),e.jsx("input",{type:"number",step:"0.01",name:"amount_paid",value:f.amount_paid,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"0.00"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Outstanding: $",(parseFloat(f.total_cost)-parseFloat(f.amount_paid||0)).toFixed(2)]})]})]})]}),e.jsxs("div",{className:"border-b pb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("input",{type:"checkbox",name:"enable_depreciation",checked:f.enable_depreciation,onChange:k,className:"h-3 w-3"}),e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Enable depreciation tracking (optional)"})]}),f.enable_depreciation&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 bg-gray-50 p-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Depreciation Method"}),e.jsxs("select",{name:"depreciation_method",value:f.depreciation_method,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",children:[e.jsx("option",{value:"Straight Line",children:"Straight Line"}),e.jsx("option",{value:"Declining Balance",children:"Declining Balance"}),e.jsx("option",{value:"Units of Production",children:"Units of Production"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Useful Life (years)"}),e.jsx("input",{type:"number",name:"useful_life_years",value:f.useful_life_years,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"e.g., 5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Salvage Value (USD)"}),e.jsx("input",{type:"number",step:"0.01",name:"salvage_value",value:f.salvage_value,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"0.00"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:i,className:"flex-1 bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 disabled:opacity-50",children:i?"Creating Asset...":"Create Asset"}),e.jsx("button",{type:"button",onClick:()=>window.location.href="/dashboard/assets",className:"flex-1 bg-gray-200 text-gray-700 px-3 py-1.5 text-xs hover:bg-gray-300",children:"Cancel"})]})]})]})},C2="http://localhost:5000/api",Xde=()=>{const{id:t}=ln(),a=ga(),[r,s]=g.useState(null),[n,i]=g.useState(!0),[o,d]=g.useState(""),[u,m]=g.useState("details"),[x,f]=g.useState(!1),[b,p]=g.useState({payment_date:new Date().toISOString().split("T")[0],amount:"",payment_method:"Bank Transfer",payment_account_code:"1000",reference_number:"",description:""}),[v,j]=g.useState(!1),[N,w]=g.useState(!1),[P,k]=g.useState(!1),[$,O]=g.useState({asset_name:"",description:"",location:"",registration_number:"",serial_number:"",supplier_name:""});g.useEffect(()=>{L()},[t]);const L=async()=>{try{i(!0);const I=(await ne.get(`${C2}/assets/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.data;s(I),O({asset_name:I.asset_name||"",description:I.description||"",location:I.location||"",registration_number:I.registration_number||"",serial_number:I.serial_number||"",supplier_name:I.supplier_name||""})}catch(D){d(D.response?.data?.message||"Failed to load asset details")}finally{i(!1)}},_=async D=>{D.preventDefault();try{j(!0),d(""),await ne.post(`${C2}/assets/${t}/payments`,b,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),f(!1),p({payment_date:new Date().toISOString().split("T")[0],amount:"",payment_method:"Bank Transfer",payment_account_code:"1000",reference_number:"",description:""}),L()}catch(I){const V=I.response?.data?.error||I.response?.data?.message||"Failed to process payment";d(V)}finally{j(!1)}},E=async D=>{D.preventDefault();try{k(!0),await ne.put(`${C2}/assets/${t}`,$,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),w(!1),L()}catch(I){alert(I.response?.data?.message||"Failed to update asset")}finally{k(!1)}},A=D=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(D||0),z=D=>D?new Date(D).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",M=D=>({Active:"bg-green-100 text-green-800",Disposed:"bg-red-100 text-red-800",Lost:"bg-red-100 text-red-800",Damaged:"bg-orange-100 text-orange-800","Under Repair":"bg-yellow-100 text-yellow-800"})[D]||"bg-gray-100 text-gray-800";return n?e.jsx("div",{className:"p-2",children:e.jsx("div",{className:"bg-white p-6 border border-gray-200 text-center",children:e.jsx("p",{className:"text-xs text-gray-600",children:"Loading asset details..."})})}):o?e.jsx("div",{className:"p-2",children:e.jsx("div",{className:"bg-red-50 p-3 border border-red-200",children:e.jsx("p",{className:"text-xs text-red-800",children:o})})}):r?e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-base font-bold text-gray-900",children:r.asset_name}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${M(r.status)}`,children:r.status})]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:[r.asset_type_name,"  ",r.asset_code]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>w(!0),className:"bg-blue-600 text-white px-3 py-1.5 text-xs hover:bg-blue-700",children:"Edit Details"}),r.outstanding_balance>0&&e.jsx("button",{onClick:()=>{d(""),f(!0)},className:"bg-green-600 text-white px-3 py-1.5 text-xs hover:bg-green-700",children:"Make Payment"}),e.jsx("button",{onClick:()=>a("/dashboard/assets"),className:"bg-gray-200 text-gray-700 px-3 py-1.5 text-xs hover:bg-gray-300",children:"Back to Assets"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-white p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Total Cost"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 mt-0.5",children:A(r.total_cost)})]}),e.jsxs("div",{className:"bg-white p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Amount Paid"}),e.jsx("p",{className:"text-lg font-bold text-green-600 mt-0.5",children:A(r.amount_paid)})]}),e.jsxs("div",{className:"bg-white p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Outstanding Balance"}),e.jsx("p",{className:"text-lg font-bold text-orange-600 mt-0.5",children:A(r.outstanding_balance)})]}),e.jsxs("div",{className:"bg-white p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Payment Progress"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900 mt-0.5",children:[(r.amount_paid/r.total_cost*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex gap-2 mb-3 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>m("details"),className:`px-3 py-1.5 text-xs font-medium ${u==="details"?"border-b-2 border-gray-900 text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:"Asset Details"}),e.jsx("button",{onClick:()=>m("financial"),className:`px-3 py-1.5 text-xs font-medium ${u==="financial"?"border-b-2 border-gray-900 text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:"Financial Information"}),e.jsx("button",{onClick:()=>m("payments"),className:`px-3 py-1.5 text-xs font-medium ${u==="payments"?"border-b-2 border-gray-900 text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:"Payment History"}),e.jsx("button",{onClick:()=>m("depreciation"),className:`px-3 py-1.5 text-xs font-medium ${u==="depreciation"?"border-b-2 border-gray-900 text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:"Depreciation"})]}),u==="details"&&e.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Asset Code"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.asset_code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Asset Type"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.asset_type_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Asset Name"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.asset_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Purchase Date"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:z(r.purchase_date)})]}),r.registration_number&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Registration Number"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.registration_number})]}),r.serial_number&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Serial Number"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.serial_number})]}),r.location&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Location"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.location})]}),r.supplier_name&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Supplier"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.supplier_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Status"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Condition"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.condition||"N/A"})]})]}),r.description&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Description"}),e.jsx("p",{className:"text-xs text-gray-900 mt-1",children:r.description})]}),r.custom_fields&&Object.keys(r.custom_fields).length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-3",children:"Additional Information"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(r.custom_fields).map(([D,I])=>e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:D.replace(/_/g," ")}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:I||"N/A"})]},D))})]})]}),u==="financial"&&e.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-3",children:"Financial Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Total Cost"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:A(r.total_cost)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Currency"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.currency_code||"USD"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Amount Paid"}),e.jsx("p",{className:"text-xs font-medium text-green-600",children:A(r.amount_paid)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Outstanding Balance"}),e.jsx("p",{className:"text-xs font-medium text-orange-600",children:A(r.outstanding_balance)})]}),r.is_opening_balance&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Opening Balance Entry"}),e.jsx("p",{className:"text-xs font-medium text-blue-600",children:"Yes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Opening Balance Date"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:z(r.opening_balance_date)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"COA Account"}),e.jsxs("p",{className:"text-xs font-medium text-gray-900",children:[r.coa_account_code," - ",r.coa_account_name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Journal Entry ID"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.journal_entry_id||"N/A"})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-2 block",children:"Payment Progress"}),e.jsxs("div",{className:"w-full bg-gray-200 h-6 relative",children:[e.jsx("div",{className:"bg-green-600 h-6 transition-all duration-300",style:{width:`${r.amount_paid/r.total_cost*100}%`}}),e.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-medium text-gray-900",children:[(r.amount_paid/r.total_cost*100).toFixed(1),"% Paid"]})]})]})]}),u==="payments"&&e.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-3",children:"Payment History"}),r.payments&&r.payments.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Method"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Reference"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.payments.map((D,I)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 text-xs text-gray-900",children:z(D.payment_date)}),e.jsx("td",{className:"px-3 py-2 text-xs font-medium text-green-600",children:A(D.amount)}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-600",children:D.payment_method}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-600",children:D.reference_number}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-600",children:D.description||"-"})]},I))})]})}):e.jsx("p",{className:"text-xs text-gray-600 text-center py-4",children:"No payments recorded yet"})]}),u==="depreciation"&&e.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-3",children:"Depreciation Information"}),r.depreciation_method?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Depreciation Method"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.depreciation_method})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Useful Life"}),e.jsxs("p",{className:"text-xs font-medium text-gray-900",children:[r.useful_life_years," years"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Salvage Value"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:A(r.salvage_value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Depreciable Amount"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:A(r.total_cost-(r.salvage_value||0))})]}),r.depreciation_method==="Straight Line"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Annual Depreciation"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:A((r.total_cost-(r.salvage_value||0))/r.useful_life_years)})]})]}):e.jsx("p",{className:"text-xs text-gray-600",children:"Depreciation tracking is not enabled for this asset"})]}),x&&e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[o&&e.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-red-100 border border-red-400 text-red-700 px-4 py-3 text-xs max-w-md w-full z-50",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:o}),e.jsx("button",{type:"button",onClick:()=>d(""),className:"text-red-700 hover:text-red-900 font-bold ml-4",children:""})]})}),e.jsxs("div",{className:"bg-white p-4 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-sm font-bold mb-3",children:"Make Payment"}),e.jsxs("form",{onSubmit:_,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Payment Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:b.payment_date,onChange:D=>p({...b,payment_date:D.target.value}),required:!0,className:"w-full border border-gray-300 px-2 py-1.5 text-xs"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:b.amount,onChange:D=>p({...b,amount:D.target.value}),required:!0,max:r.outstanding_balance,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"0.00"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Outstanding: ",A(r.outstanding_balance)]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Payment From ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:b.payment_account_code,onChange:D=>{const I=D.target.value;p({...b,payment_account_code:I,payment_method:I==="1000"?"Cash":"Bank Transfer"})},required:!0,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",children:[e.jsx("option",{value:"1000",children:"Cash"}),e.jsx("option",{value:"1010",children:"Bank Account"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reference Number"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:b.reference_number,onChange:D=>p({...b,reference_number:D.target.value}),className:"flex-1 border border-gray-300 px-2 py-1.5 text-xs",placeholder:"Optional"}),e.jsx("button",{type:"button",onClick:()=>{const D=`PAY-${r.asset_code}-${Date.now()}`;p({...b,reference_number:D})},className:"bg-gray-200 text-gray-700 px-3 py-1.5 text-xs hover:bg-gray-300 whitespace-nowrap",children:"Auto Generate"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:b.description,onChange:D=>p({...b,description:D.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",rows:"2",placeholder:"Payment notes..."})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{type:"submit",disabled:v,className:"flex-1 bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 disabled:opacity-50",children:v?"Processing...":"Submit Payment"}),e.jsx("button",{type:"button",onClick:()=>f(!1),className:"flex-1 bg-gray-200 text-gray-700 px-3 py-1.5 text-xs hover:bg-gray-300",children:"Cancel"})]})]})]})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-sm font-bold mb-3",children:"Edit Asset Details"}),e.jsxs("form",{onSubmit:E,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Asset Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:$.asset_name,onChange:D=>O({...$,asset_name:D.target.value}),required:!0,className:"w-full border border-gray-300 px-2 py-1.5 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:$.location,onChange:D=>O({...$,location:D.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"Where is this asset located?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Registration Number"}),e.jsx("input",{type:"text",value:$.registration_number,onChange:D=>O({...$,registration_number:D.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"e.g., ABC-1234"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",value:$.serial_number,onChange:D=>O({...$,serial_number:D.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"e.g., SN123456789"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",value:$.supplier_name,onChange:D=>O({...$,supplier_name:D.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"Name of supplier/vendor"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:$.description,onChange:D=>O({...$,description:D.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",rows:"3",placeholder:"Additional details about the asset..."})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{type:"submit",disabled:P,className:"flex-1 bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 disabled:opacity-50",children:P?"Updating...":"Update Asset"}),e.jsx("button",{type:"button",onClick:()=>w(!1),className:"flex-1 bg-gray-200 text-gray-700 px-3 py-1.5 text-xs hover:bg-gray-300",children:"Cancel"})]})]})]})})]}):null},Jde=()=>{const[t,a]=g.useState([]),[r,s]=g.useState([]),[n,i]=g.useState(!0),[o,d]=g.useState(""),[u,m]=g.useState(""),[x,f]=g.useState(!1),[b,p]=g.useState(null),[v,j]=g.useState({name:"",description:"",chart_of_account_id:"",depreciation_account_id:"",expense_account_id:"",requires_registration:!1,requires_serial_number:!1,icon:"faBox"});g.useEffect(()=>{N(),w()},[]);const N=async()=>{try{i(!0);const A=localStorage.getItem("token"),z=await ne.get("http://localhost:5000/api/assets/types",{headers:{Authorization:`Bearer ${A}`}});a(z.data.data||[]),d("")}catch(A){console.error("Error fetching asset types:",A),d("Failed to fetch asset types")}finally{i(!1)}},w=async()=>{try{const A=localStorage.getItem("token"),z=await ne.get("http://localhost:5000/api/accounting/chart-of-accounts",{headers:{Authorization:`Bearer ${A}`}});s(z.data.data||[])}catch(A){console.error("Error fetching chart of accounts:",A)}},P=A=>{const{name:z,value:M,type:D,checked:I}=A.target;j(V=>({...V,[z]:D==="checkbox"?I:M}))},k=()=>{p(null),j({name:"",description:"",chart_of_account_id:"",depreciation_account_id:"",expense_account_id:"",requires_registration:!1,requires_serial_number:!1,icon:"faBox"}),f(!0),d(""),m("")},$=A=>{p(A),j({name:A.name||"",description:A.description||"",chart_of_account_id:A.chart_of_account_id||"",depreciation_account_id:A.depreciation_account_id||"",expense_account_id:A.expense_account_id||"",requires_registration:A.requires_registration||!1,requires_serial_number:A.requires_serial_number||!1,icon:A.icon||"faBox"}),f(!0),d(""),m("")},O=async A=>{A.preventDefault(),i(!0),d(""),m("");try{const z=localStorage.getItem("token"),M=b?`http://localhost:5000/api/assets/types/${b.id}`:"http://localhost:5000/api/assets/types";await ne[b?"put":"post"](M,v,{headers:{Authorization:`Bearer ${z}`}}),m(b?"Asset type updated successfully":"Asset type created successfully"),f(!1),N(),setTimeout(()=>m(""),3e3)}catch(z){console.error("Error saving asset type:",z),d(z.response?.data?.error||"Failed to save asset type")}finally{i(!1)}},L=async A=>{if(window.confirm("Are you sure you want to delete this asset type? This action cannot be undone."))try{i(!0);const z=localStorage.getItem("token");await ne.delete(`http://localhost:5000/api/assets/types/${A}`,{headers:{Authorization:`Bearer ${z}`}}),m("Asset type deleted successfully"),N(),setTimeout(()=>m(""),3e3)}catch(z){console.error("Error deleting asset type:",z),d(z.response?.data?.error||"Failed to delete asset type")}finally{i(!1)}},_=()=>r.filter(A=>A.type==="Asset"&&A.is_active),E=()=>r.filter(A=>A.type==="Expense"&&A.is_active);return n&&t.length===0?e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Loading asset types..."})})}):e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Zt,{to:"/dashboard/assets",className:"text-gray-600 hover:text-gray-900",children:e.jsx(R,{icon:em})}),e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Fixed Assets Configuration"})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Manage asset types and their settings"})]}),e.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white text-xs rounded hover:bg-blue-700",children:[e.jsx(R,{icon:Ot}),"Add Asset Type"]})]}),o&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 text-xs rounded",children:o}),u&&e.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 text-xs rounded",children:u}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"Chart of Account"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"Requires Registration"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"Requires Serial #"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:'No asset types found. Click "Add Asset Type" to create one.'})}):t.map(A=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{icon:CB,className:"text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-900",children:A.name})]})}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:A.description||"-"}),e.jsxs("td",{className:"px-4 py-2 text-gray-600",children:[A.account_code," - ",A.account_name]}),e.jsx("td",{className:"px-4 py-2",children:A.requires_registration?e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-800 rounded text-xs",children:"Yes"}):e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-800 rounded text-xs",children:"No"})}),e.jsx("td",{className:"px-4 py-2",children:A.requires_serial_number?e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-800 rounded text-xs",children:"Yes"}):e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-800 rounded text-xs",children:"No"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>$(A),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:e.jsx(R,{icon:ha})}),e.jsx("button",{onClick:()=>L(A.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:e.jsx(R,{icon:Yt})})]})})]},A.id))})]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:b?"Edit Asset Type":"Add New Asset Type"}),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(R,{icon:Bt})})]}),e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:v.name,onChange:P,required:!0,className:"w-full border border-gray-300 px-3 py-2 text-xs rounded",placeholder:"e.g., Vehicles, Equipment"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Icon"}),e.jsx("input",{type:"text",name:"icon",value:v.icon,onChange:P,className:"w-full border border-gray-300 px-3 py-2 text-xs rounded",placeholder:"faBox"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:v.description,onChange:P,rows:"2",className:"w-full border border-gray-300 px-3 py-2 text-xs rounded",placeholder:"Brief description of this asset type"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Chart of Account ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"chart_of_account_id",value:v.chart_of_account_id,onChange:P,required:!0,className:"w-full border border-gray-300 px-3 py-2 text-xs rounded",children:[e.jsx("option",{value:"",children:"Select Account"}),_().map(A=>e.jsxs("option",{value:A.id,children:[A.code," - ",A.name]},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Depreciation Account"}),e.jsxs("select",{name:"depreciation_account_id",value:v.depreciation_account_id,onChange:P,className:"w-full border border-gray-300 px-3 py-2 text-xs rounded",children:[e.jsx("option",{value:"",children:"Select Account (Optional)"}),E().map(A=>e.jsxs("option",{value:A.id,children:[A.code," - ",A.name]},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Expense Account"}),e.jsxs("select",{name:"expense_account_id",value:v.expense_account_id,onChange:P,className:"w-full border border-gray-300 px-3 py-2 text-xs rounded",children:[e.jsx("option",{value:"",children:"Select Account (Optional)"}),E().map(A=>e.jsxs("option",{value:A.id,children:[A.code," - ",A.name]},A.id))]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"requires_registration",checked:v.requires_registration,onChange:P,className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Requires Registration Number"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"requires_serial_number",checked:v.requires_serial_number,onChange:P,className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Requires Serial Number"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 text-xs border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:n?"Saving...":b?"Update":"Create"})]})]})]})})]})};function Zde(){return e.jsx(hR,{children:e.jsx(lR,{children:e.jsx(Qde,{})})})}function Qde(){const{isAuthenticated:t,isLoading:a}=ut();return a?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"text-gray-500",children:"Loading..."})}):e.jsxs(ZM,{children:[e.jsx(ht,{path:"/",element:t?e.jsx(uv,{to:"/dashboard",replace:!0}):e.jsx(xz,{})}),e.jsxs(ht,{path:"/dashboard",element:t?e.jsx(uz,{}):e.jsx(uv,{to:"/",replace:!0}),children:[e.jsx(ht,{index:!0,element:e.jsx(hz,{})}),e.jsx(ht,{path:"students",element:e.jsx(Gq,{})}),e.jsx(ht,{path:"students/add",element:e.jsx(Vq,{})}),e.jsx(ht,{path:"students/edit/:id",element:e.jsx(Wq,{})}),e.jsx(ht,{path:"students/view/:id",element:e.jsx(Kq,{})}),e.jsx(ht,{path:"employees",element:e.jsx(rU,{})}),e.jsx(ht,{path:"employees/add",element:e.jsx(sU,{})}),e.jsx(ht,{path:"employees/edit/:id",element:e.jsx(iU,{})}),e.jsx(ht,{path:"employees/view/:id",element:e.jsx(nU,{})}),e.jsx(ht,{path:"classes",element:e.jsx(uU,{})}),e.jsx(ht,{path:"classes/gradelevel-classes/add",element:e.jsx(mU,{})}),e.jsx(ht,{path:"classes/gradelevel-classes/edit/:id",element:e.jsx(xU,{})}),e.jsx(ht,{path:"classes/gradelevel-classes/view/:id",element:e.jsx(pU,{})}),e.jsx(ht,{path:"classes/subject-classes/view/:id",element:e.jsx(bU,{})}),e.jsx(ht,{path:"classes/class-term-year",element:e.jsx(BG,{})}),e.jsx(ht,{path:"classes/configurations",element:e.jsx(zG,{})}),e.jsx(ht,{path:"classes/close-to-term",element:e.jsx(gU,{})}),e.jsx(ht,{path:"configurations",element:e.jsx(dU,{})}),e.jsx(ht,{path:"settings",element:e.jsx(aU,{})}),e.jsx(ht,{path:"accounting/chart-of-accounts",element:e.jsx(NU,{})}),e.jsx(ht,{path:"accounting/chart-of-accounts/view/:id",element:e.jsx(wU,{})}),e.jsx(ht,{path:"accounting/cash-bank",element:e.jsx(SU,{})}),e.jsx(ht,{path:"accounting/general-ledger",element:e.jsx(VG,{})}),e.jsx(ht,{path:"accounting/trial-balance",element:e.jsx(_U,{})}),e.jsx(ht,{path:"accounting/bank-reconciliation",element:e.jsx(WG,{})}),e.jsx(ht,{path:"accounting/periods",element:e.jsx(XG,{})}),e.jsx(ht,{path:"accounting/period-closing",element:e.jsx(KG,{})}),e.jsx(ht,{path:"expenses/suppliers",element:e.jsx(AU,{})}),e.jsx(ht,{path:"expenses/expenses",element:e.jsx(kU,{})}),e.jsx(ht,{path:"expenses/expenses/add",element:e.jsx(CU,{})}),e.jsx(ht,{path:"expenses/expenses/edit/:id",element:e.jsx(EU,{})}),e.jsx(ht,{path:"expenses/accounts-payable",element:e.jsx(TU,{})}),e.jsx(ht,{path:"results",element:e.jsx(PU,{})}),e.jsx(ht,{path:"results/grading",element:e.jsx(OU,{})}),e.jsx(ht,{path:"results/entry/:classId",element:e.jsx(DU,{})}),e.jsx(ht,{path:"results/view/:classId",element:e.jsx(LU,{})}),e.jsx(ht,{path:"results/student/:classId/:studentId",element:e.jsx(MU,{})}),e.jsx(ht,{path:"results/coursework",element:e.jsx(RU,{})}),e.jsx(ht,{path:"boarding",element:e.jsx($U,{})}),e.jsx(ht,{path:"boarding/hostel/:id",element:e.jsx(FU,{})}),e.jsx(ht,{path:"enrollments",element:e.jsx(zU,{})}),e.jsx(ht,{path:"fees-payment",element:e.jsx(LG,{})}),e.jsx(ht,{path:"all-payments",element:e.jsx(FG,{})}),e.jsx(ht,{path:"invoice-structures",element:e.jsx(IG,{})}),e.jsx(ht,{path:"students/statement",element:e.jsx(qG,{})}),e.jsx(ht,{path:"students/balances",element:e.jsx(UG,{})}),e.jsx(ht,{path:"students/manual-balance-update",element:e.jsx(Xq,{})}),e.jsx(ht,{path:"fees/unified-payment",element:e.jsx(HG,{})}),e.jsx(ht,{path:"financial-records",element:e.jsx(GG,{})}),e.jsx(ht,{path:"waivers",element:e.jsx(Ede,{})}),e.jsx(ht,{path:"assets",element:e.jsx(Wde,{})}),e.jsx(ht,{path:"assets/add",element:e.jsx(Kde,{})}),e.jsx(ht,{path:"assets/configurations",element:e.jsx(Jde,{})}),e.jsx(ht,{path:"assets/:id",element:e.jsx(Xde,{})}),e.jsx(ht,{path:"reports/income-statement",element:e.jsx(JG,{})}),e.jsx(ht,{path:"reports/balance-sheet",element:e.jsx(ZG,{})}),e.jsx(ht,{path:"reports/cash-flow",element:e.jsx(QG,{})}),e.jsx(ht,{path:"analytics/expense-analysis",element:e.jsx(ade,{})}),e.jsx(ht,{path:"analytics/revenue-analysis",element:e.jsx(rde,{})}),e.jsx(ht,{path:"analytics/student-financial-analytics",element:e.jsx(sde,{})}),e.jsx(ht,{path:"analytics/student-results-analytics",element:e.jsx(nde,{})}),e.jsx(ht,{path:"procurement",element:e.jsx(ide,{})}),e.jsx(ht,{path:"procurement/purchase-requests",element:e.jsx(lde,{})}),e.jsx(ht,{path:"procurement/suppliers",element:e.jsx(ode,{})}),e.jsx(ht,{path:"procurement/purchase-orders",element:e.jsx(cde,{})}),e.jsx(ht,{path:"payroll",element:e.jsx(dde,{})}),e.jsx(ht,{path:"payroll/create",element:e.jsx(mde,{})}),e.jsx(ht,{path:"payroll/payslips",element:e.jsx(ude,{})}),e.jsx(ht,{path:"transport",element:e.jsx(uv,{to:"/dashboard/transport/routes",replace:!0})}),e.jsx(ht,{path:"transport/routes",element:e.jsx(xde,{})}),e.jsx(ht,{path:"transport/registrations",element:e.jsx(hde,{})}),e.jsx(ht,{path:"transport/registrations/add",element:e.jsx(yde,{})}),e.jsx(ht,{path:"transport/fees",element:e.jsx(fde,{})}),e.jsx(ht,{path:"transport/schedule",element:e.jsx(pde,{})}),e.jsx(ht,{path:"transport/payments",element:e.jsx(gde,{})}),e.jsx(ht,{path:"inventory",element:e.jsx(bde,{})}),e.jsx(ht,{path:"inventory/add-item",element:e.jsx(vde,{})}),e.jsx(ht,{path:"inventory/issue-uniform",element:e.jsx(jde,{})}),e.jsx(ht,{path:"inventory/configurations",element:e.jsx(Nde,{})}),e.jsx(ht,{path:"announcements",element:e.jsx(wde,{})}),e.jsx(ht,{path:"announcements/add",element:e.jsx(Sde,{})}),e.jsx(ht,{path:"announcements/edit/:id",element:e.jsx(_de,{})}),e.jsx(ht,{path:"billing/additional-fees",element:e.jsx(Ade,{})}),e.jsx(ht,{path:"timetables",element:e.jsx(Tde,{})}),e.jsx(ht,{path:"timetables/template/:id",element:e.jsx(Lde,{})}),e.jsx(ht,{path:"timetables/template/:id/edit",element:e.jsx(Ide,{})}),e.jsx(ht,{path:"timetables/test",element:e.jsx(qde,{})}),e.jsx(ht,{path:"sports",element:e.jsx(Vde,{})})]}),e.jsx(ht,{path:"*",element:e.jsx(fz,{})})]})}nM.createRoot(document.getElementById("root")).render(e.jsx(g.StrictMode,{children:e.jsx(Zde,{})}));export{Ka as _,eue as c,Po as g};
