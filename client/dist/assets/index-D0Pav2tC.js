function OM(t,a){for(var r=0;r<a.length;r++){const s=a[r];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in t)){const i=Object.getOwnPropertyDescriptor(s,n);i&&Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var jme=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yv={exports:{}},Jx={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V4;function LM(){if(V4)return Jx;V4=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(s,n,i){var o=null;if(i!==void 0&&(o=""+i),n.key!==void 0&&(o=""+n.key),"key"in n){i={};for(var c in n)c!=="key"&&(i[c]=n[c])}else i=n;return n=i.ref,{$$typeof:t,type:s,key:o,ref:n!==void 0?n:null,props:i}}return Jx.Fragment=a,Jx.jsx=r,Jx.jsxs=r,Jx}var K4;function MM(){return K4||(K4=1,yv.exports=LM()),yv.exports}var e=MM(),bv={exports:{}},Ta={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X4;function RM(){if(X4)return Ta;X4=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function y(te){return te===null||typeof te!="object"?null:(te=p&&te[p]||te["@@iterator"],typeof te=="function"?te:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,N={};function w(te,oe,q){this.props=te,this.context=oe,this.refs=N,this.updater=q||g}w.prototype.isReactComponent={},w.prototype.setState=function(te,oe){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,oe,"setState")},w.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function j(){}j.prototype=w.prototype;function T(te,oe,q){this.props=te,this.context=oe,this.refs=N,this.updater=q||g}var k=T.prototype=new j;k.constructor=T,v(k,w.prototype),k.isPureReactComponent=!0;var R=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function A(te,oe,q,G,z,Z){return q=Z.ref,{$$typeof:t,type:te,key:oe,ref:q!==void 0?q:null,props:Z}}function M(te,oe){return A(te.type,oe,void 0,void 0,void 0,te.props)}function _(te){return typeof te=="object"&&te!==null&&te.$$typeof===t}function B(te){var oe={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(q){return oe[q]})}var D=/\/+/g;function C(te,oe){return typeof te=="object"&&te!==null&&te.key!=null?B(""+te.key):oe.toString(36)}function L(){}function H(te){switch(te.status){case"fulfilled":return te.value;case"rejected":throw te.reason;default:switch(typeof te.status=="string"?te.then(L,L):(te.status="pending",te.then(function(oe){te.status==="pending"&&(te.status="fulfilled",te.value=oe)},function(oe){te.status==="pending"&&(te.status="rejected",te.reason=oe)})),te.status){case"fulfilled":return te.value;case"rejected":throw te.reason}}throw te}function V(te,oe,q,G,z){var Z=typeof te;(Z==="undefined"||Z==="boolean")&&(te=null);var Q=!1;if(te===null)Q=!0;else switch(Z){case"bigint":case"string":case"number":Q=!0;break;case"object":switch(te.$$typeof){case t:case a:Q=!0;break;case h:return Q=te._init,V(Q(te._payload),oe,q,G,z)}}if(Q)return z=z(te),Q=G===""?"."+C(te,0):G,R(z)?(q="",Q!=null&&(q=Q.replace(D,"$&/")+"/"),V(z,oe,q,"",function(ne){return ne})):z!=null&&(_(z)&&(z=M(z,q+(z.key==null||te&&te.key===z.key?"":(""+z.key).replace(D,"$&/")+"/")+Q)),oe.push(z)),1;Q=0;var fe=G===""?".":G+":";if(R(te))for(var he=0;he<te.length;he++)G=te[he],Z=fe+C(G,he),Q+=V(G,oe,q,Z,z);else if(he=y(te),typeof he=="function")for(te=he.call(te),he=0;!(G=te.next()).done;)G=G.value,Z=fe+C(G,he++),Q+=V(G,oe,q,Z,z);else if(Z==="object"){if(typeof te.then=="function")return V(H(te),oe,q,G,z);throw oe=String(te),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return Q}function Y(te,oe,q){if(te==null)return te;var G=[],z=0;return V(te,G,"","",function(Z){return oe.call(q,Z,z++)}),G}function J(te){if(te._status===-1){var oe=te._result;oe=oe(),oe.then(function(q){(te._status===0||te._status===-1)&&(te._status=1,te._result=q)},function(q){(te._status===0||te._status===-1)&&(te._status=2,te._result=q)}),te._status===-1&&(te._status=0,te._result=oe)}if(te._status===1)return te._result.default;throw te._result}var W=typeof reportError=="function"?reportError:function(te){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof te=="object"&&te!==null&&typeof te.message=="string"?String(te.message):String(te),error:te});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",te);return}console.error(te)};function X(){}return Ta.Children={map:Y,forEach:function(te,oe,q){Y(te,function(){oe.apply(this,arguments)},q)},count:function(te){var oe=0;return Y(te,function(){oe++}),oe},toArray:function(te){return Y(te,function(oe){return oe})||[]},only:function(te){if(!_(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},Ta.Component=w,Ta.Fragment=r,Ta.Profiler=n,Ta.PureComponent=T,Ta.StrictMode=s,Ta.Suspense=u,Ta.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Ta.__COMPILER_RUNTIME={__proto__:null,c:function(te){return P.H.useMemoCache(te)}},Ta.cache=function(te){return function(){return te.apply(null,arguments)}},Ta.cloneElement=function(te,oe,q){if(te==null)throw Error("The argument must be a React element, but you passed "+te+".");var G=v({},te.props),z=te.key,Z=void 0;if(oe!=null)for(Q in oe.ref!==void 0&&(Z=void 0),oe.key!==void 0&&(z=""+oe.key),oe)!$.call(oe,Q)||Q==="key"||Q==="__self"||Q==="__source"||Q==="ref"&&oe.ref===void 0||(G[Q]=oe[Q]);var Q=arguments.length-2;if(Q===1)G.children=q;else if(1<Q){for(var fe=Array(Q),he=0;he<Q;he++)fe[he]=arguments[he+2];G.children=fe}return A(te.type,z,void 0,void 0,Z,G)},Ta.createContext=function(te){return te={$$typeof:o,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null},te.Provider=te,te.Consumer={$$typeof:i,_context:te},te},Ta.createElement=function(te,oe,q){var G,z={},Z=null;if(oe!=null)for(G in oe.key!==void 0&&(Z=""+oe.key),oe)$.call(oe,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(z[G]=oe[G]);var Q=arguments.length-2;if(Q===1)z.children=q;else if(1<Q){for(var fe=Array(Q),he=0;he<Q;he++)fe[he]=arguments[he+2];z.children=fe}if(te&&te.defaultProps)for(G in Q=te.defaultProps,Q)z[G]===void 0&&(z[G]=Q[G]);return A(te,Z,void 0,void 0,null,z)},Ta.createRef=function(){return{current:null}},Ta.forwardRef=function(te){return{$$typeof:c,render:te}},Ta.isValidElement=_,Ta.lazy=function(te){return{$$typeof:h,_payload:{_status:-1,_result:te},_init:J}},Ta.memo=function(te,oe){return{$$typeof:m,type:te,compare:oe===void 0?null:oe}},Ta.startTransition=function(te){var oe=P.T,q={};P.T=q;try{var G=te(),z=P.S;z!==null&&z(q,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(X,W)}catch(Z){W(Z)}finally{P.T=oe}},Ta.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Ta.use=function(te){return P.H.use(te)},Ta.useActionState=function(te,oe,q){return P.H.useActionState(te,oe,q)},Ta.useCallback=function(te,oe){return P.H.useCallback(te,oe)},Ta.useContext=function(te){return P.H.useContext(te)},Ta.useDebugValue=function(){},Ta.useDeferredValue=function(te,oe){return P.H.useDeferredValue(te,oe)},Ta.useEffect=function(te,oe,q){var G=P.H;if(typeof q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return G.useEffect(te,oe)},Ta.useId=function(){return P.H.useId()},Ta.useImperativeHandle=function(te,oe,q){return P.H.useImperativeHandle(te,oe,q)},Ta.useInsertionEffect=function(te,oe){return P.H.useInsertionEffect(te,oe)},Ta.useLayoutEffect=function(te,oe){return P.H.useLayoutEffect(te,oe)},Ta.useMemo=function(te,oe){return P.H.useMemo(te,oe)},Ta.useOptimistic=function(te,oe){return P.H.useOptimistic(te,oe)},Ta.useReducer=function(te,oe,q){return P.H.useReducer(te,oe,q)},Ta.useRef=function(te){return P.H.useRef(te)},Ta.useState=function(te){return P.H.useState(te)},Ta.useSyncExternalStore=function(te,oe,q){return P.H.useSyncExternalStore(te,oe,q)},Ta.useTransition=function(){return P.H.useTransition()},Ta.version="19.1.1",Ta}var J4;function qh(){return J4||(J4=1,bv.exports=RM()),bv.exports}var x=qh();const am=oc(x),z7=OM({__proto__:null,default:am},[x]);var vv={exports:{}},Zx={},jv={exports:{}},Nv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z4;function IM(){return Z4||(Z4=1,function(t){function a(Y,J){var W=Y.length;Y.push(J);e:for(;0<W;){var X=W-1>>>1,te=Y[X];if(0<n(te,J))Y[X]=J,Y[W]=te,W=X;else break e}}function r(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var J=Y[0],W=Y.pop();if(W!==J){Y[0]=W;e:for(var X=0,te=Y.length,oe=te>>>1;X<oe;){var q=2*(X+1)-1,G=Y[q],z=q+1,Z=Y[z];if(0>n(G,W))z<te&&0>n(Z,G)?(Y[X]=Z,Y[z]=W,X=z):(Y[X]=G,Y[q]=W,X=q);else if(z<te&&0>n(Z,W))Y[X]=Z,Y[z]=W,X=z;else break e}}return J}function n(Y,J){var W=Y.sortIndex-J.sortIndex;return W!==0?W:Y.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],m=[],h=1,p=null,y=3,g=!1,v=!1,N=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function R(Y){for(var J=r(m);J!==null;){if(J.callback===null)s(m);else if(J.startTime<=Y)s(m),J.sortIndex=J.expirationTime,a(u,J);else break;J=r(m)}}function P(Y){if(N=!1,R(Y),!v)if(r(u)!==null)v=!0,$||($=!0,C());else{var J=r(m);J!==null&&V(P,J.startTime-Y)}}var $=!1,A=-1,M=5,_=-1;function B(){return w?!0:!(t.unstable_now()-_<M)}function D(){if(w=!1,$){var Y=t.unstable_now();_=Y;var J=!0;try{e:{v=!1,N&&(N=!1,T(A),A=-1),g=!0;var W=y;try{t:{for(R(Y),p=r(u);p!==null&&!(p.expirationTime>Y&&B());){var X=p.callback;if(typeof X=="function"){p.callback=null,y=p.priorityLevel;var te=X(p.expirationTime<=Y);if(Y=t.unstable_now(),typeof te=="function"){p.callback=te,R(Y),J=!0;break t}p===r(u)&&s(u),R(Y)}else s(u);p=r(u)}if(p!==null)J=!0;else{var oe=r(m);oe!==null&&V(P,oe.startTime-Y),J=!1}}break e}finally{p=null,y=W,g=!1}J=void 0}}finally{J?C():$=!1}}}var C;if(typeof k=="function")C=function(){k(D)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,H=L.port2;L.port1.onmessage=D,C=function(){H.postMessage(null)}}else C=function(){j(D,0)};function V(Y,J){A=j(function(){Y(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(Y){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var W=y;y=J;try{return Y()}finally{y=W}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(Y,J){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var W=y;y=Y;try{return J()}finally{y=W}},t.unstable_scheduleCallback=function(Y,J,W){var X=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?X+W:X):W=X,Y){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=W+te,Y={id:h++,callback:J,priorityLevel:Y,startTime:W,expirationTime:te,sortIndex:-1},W>X?(Y.sortIndex=W,a(m,Y),r(u)===null&&Y===r(m)&&(N?(T(A),A=-1):N=!0,V(P,W-X))):(Y.sortIndex=te,a(u,Y),v||g||(v=!0,$||($=!0,C()))),Y},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(Y){var J=y;return function(){var W=y;y=J;try{return Y.apply(this,arguments)}finally{y=W}}}}(Nv)),Nv}var Q4;function zM(){return Q4||(Q4=1,jv.exports=IM()),jv.exports}var wv={exports:{}},Rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e6;function $M(){if(e6)return Rn;e6=1;var t=qh();function a(u){var m="https://react.dev/errors/"+u;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)m+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(a(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},n=Symbol.for("react.portal");function i(u,m,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:p==null?null:""+p,children:u,containerInfo:m,implementation:h}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,m){if(u==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Rn.createPortal=function(u,m){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(a(299));return i(u,m,null,h)},Rn.flushSync=function(u){var m=o.T,h=s.p;try{if(o.T=null,s.p=2,u)return u()}finally{o.T=m,s.p=h,s.d.f()}},Rn.preconnect=function(u,m){typeof u=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(u,m))},Rn.prefetchDNS=function(u){typeof u=="string"&&s.d.D(u)},Rn.preinit=function(u,m){if(typeof u=="string"&&m&&typeof m.as=="string"){var h=m.as,p=c(h,m.crossOrigin),y=typeof m.integrity=="string"?m.integrity:void 0,g=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;h==="style"?s.d.S(u,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:g}):h==="script"&&s.d.X(u,{crossOrigin:p,integrity:y,fetchPriority:g,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Rn.preinitModule=function(u,m){if(typeof u=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var h=c(m.as,m.crossOrigin);s.d.M(u,{crossOrigin:h,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(u)},Rn.preload=function(u,m){if(typeof u=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var h=m.as,p=c(h,m.crossOrigin);s.d.L(u,h,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Rn.preloadModule=function(u,m){if(typeof u=="string")if(m){var h=c(m.as,m.crossOrigin);s.d.m(u,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:h,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(u)},Rn.requestFormReset=function(u){s.d.r(u)},Rn.unstable_batchedUpdates=function(u,m){return u(m)},Rn.useFormState=function(u,m,h){return o.H.useFormState(u,m,h)},Rn.useFormStatus=function(){return o.H.useHostTransitionStatus()},Rn.version="19.1.1",Rn}var t6;function $7(){if(t6)return wv.exports;t6=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),wv.exports=$M(),wv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a6;function BM(){if(a6)return Zx;a6=1;var t=zM(),a=qh(),r=$7();function s(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var d=l,f=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(f=d.return),l=d.return;while(l)}return d.tag===3?f:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(i(l)!==l)throw Error(s(188))}function u(l){var d=l.alternate;if(!d){if(d=i(l),d===null)throw Error(s(188));return d!==l?null:l}for(var f=l,b=d;;){var E=f.return;if(E===null)break;var F=E.alternate;if(F===null){if(b=E.return,b!==null){f=b;continue}break}if(E.child===F.child){for(F=E.child;F;){if(F===f)return c(E),l;if(F===b)return c(E),d;F=F.sibling}throw Error(s(188))}if(f.return!==b.return)f=E,b=F;else{for(var le=!1,be=E.child;be;){if(be===f){le=!0,f=E,b=F;break}if(be===b){le=!0,b=E,f=F;break}be=be.sibling}if(!le){for(be=F.child;be;){if(be===f){le=!0,f=F,b=E;break}if(be===b){le=!0,b=F,f=E;break}be=be.sibling}if(!le)throw Error(s(189))}}if(f.alternate!==b)throw Error(s(190))}if(f.tag!==3)throw Error(s(188));return f.stateNode.current===f?l:d}function m(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=m(l),d!==null)return d;l=l.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),k=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function C(l){return l===null||typeof l!="object"?null:(l=D&&l[D]||l["@@iterator"],typeof l=="function"?l:null)}var L=Symbol.for("react.client.reference");function H(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===L?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case w:return"Profiler";case N:return"StrictMode";case P:return"Suspense";case $:return"SuspenseList";case _:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case g:return"Portal";case k:return(l.displayName||"Context")+".Provider";case T:return(l._context.displayName||"Context")+".Consumer";case R:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case A:return d=l.displayName||null,d!==null?d:H(l.type)||"Memo";case M:d=l._payload,l=l._init;try{return H(l(d))}catch{}}return null}var V=Array.isArray,Y=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},X=[],te=-1;function oe(l){return{current:l}}function q(l){0>te||(l.current=X[te],X[te]=null,te--)}function G(l,d){te++,X[te]=l.current,l.current=d}var z=oe(null),Z=oe(null),Q=oe(null),fe=oe(null);function he(l,d){switch(G(Q,d),G(Z,l),G(z,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?N4(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=N4(d),l=w4(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}q(z),G(z,l)}function ne(){q(z),q(Z),q(Q)}function me(l){l.memoizedState!==null&&G(fe,l);var d=z.current,f=w4(d,l.type);d!==f&&(G(Z,l),G(z,f))}function pe(l){Z.current===l&&(q(z),q(Z)),fe.current===l&&(q(fe),Yx._currentValue=W)}var ie=Object.prototype.hasOwnProperty,ke=t.unstable_scheduleCallback,Ae=t.unstable_cancelCallback,ae=t.unstable_shouldYield,Ne=t.unstable_requestPaint,ce=t.unstable_now,De=t.unstable_getCurrentPriorityLevel,ye=t.unstable_ImmediatePriority,Ee=t.unstable_UserBlockingPriority,Ke=t.unstable_NormalPriority,Re=t.unstable_LowPriority,Le=t.unstable_IdlePriority,Oe=t.log,$e=t.unstable_setDisableYieldValue,ct=null,Nt=null;function jt(l){if(typeof Oe=="function"&&$e(l),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(ct,l)}catch{}}var xt=Math.clz32?Math.clz32:dt,we=Math.log,Ie=Math.LN2;function dt(l){return l>>>=0,l===0?32:31-(we(l)/Ie|0)|0}var ut=256,Te=4194304;function Ve(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function qe(l,d,f){var b=l.pendingLanes;if(b===0)return 0;var E=0,F=l.suspendedLanes,le=l.pingedLanes;l=l.warmLanes;var be=b&134217727;return be!==0?(b=be&~F,b!==0?E=Ve(b):(le&=be,le!==0?E=Ve(le):f||(f=be&~l,f!==0&&(E=Ve(f))))):(be=b&~F,be!==0?E=Ve(be):le!==0?E=Ve(le):f||(f=b&~l,f!==0&&(E=Ve(f)))),E===0?0:d!==0&&d!==E&&(d&F)===0&&(F=E&-E,f=d&-d,F>=f||F===32&&(f&4194048)!==0)?d:E}function Xe(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function We(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ge(){var l=ut;return ut<<=1,(ut&4194048)===0&&(ut=256),l}function lt(){var l=Te;return Te<<=1,(Te&62914560)===0&&(Te=4194304),l}function Dt(l){for(var d=[],f=0;31>f;f++)d.push(l);return d}function It(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Bt(l,d,f,b,E,F){var le=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var be=l.entanglements,Me=l.expirationTimes,rt=l.hiddenUpdates;for(f=le&~f;0<f;){var bt=31-xt(f),St=1<<bt;be[bt]=0,Me[bt]=-1;var st=rt[bt];if(st!==null)for(rt[bt]=null,bt=0;bt<st.length;bt++){var ot=st[bt];ot!==null&&(ot.lane&=-536870913)}f&=~St}b!==0&&ze(l,b,0),F!==0&&E===0&&l.tag!==0&&(l.suspendedLanes|=F&~(le&~d))}function ze(l,d,f){l.pendingLanes|=d,l.suspendedLanes&=~d;var b=31-xt(d);l.entangledLanes|=d,l.entanglements[b]=l.entanglements[b]|1073741824|f&4194090}function Mt(l,d){var f=l.entangledLanes|=d;for(l=l.entanglements;f;){var b=31-xt(f),E=1<<b;E&d|l[b]&d&&(l[b]|=d),f&=~E}}function oa(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function ca(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Ka(){var l=J.p;return l!==0?l:(l=window.event,l===void 0?32:q4(l.type))}function Yt(l,d){var f=J.p;try{return J.p=l,d()}finally{J.p=f}}var er=Math.random().toString(36).slice(2),Ye="__reactFiber$"+er,Et="__reactProps$"+er,na="__reactContainer$"+er,zt="__reactEvents$"+er,it="__reactListeners$"+er,Tt="__reactHandles$"+er,qt="__reactResources$"+er,aa="__reactMarker$"+er;function Ar(l){delete l[Ye],delete l[Et],delete l[zt],delete l[it],delete l[Tt]}function dr(l){var d=l[Ye];if(d)return d;for(var f=l.parentNode;f;){if(d=f[na]||f[Ye]){if(f=d.alternate,d.child!==null||f!==null&&f.child!==null)for(l=k4(l);l!==null;){if(f=l[Ye])return f;l=k4(l)}return d}l=f,f=l.parentNode}return null}function Er(l){if(l=l[Ye]||l[na]){var d=l.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return l}return null}function ls(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(s(33))}function gr(l){var d=l[qt];return d||(d=l[qt]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Ra(l){l[aa]=!0}var Ps=new Set,Xn={};function Us(l,d){Ds(l,d),Ds(l+"Capture",d)}function Ds(l,d){for(Xn[l]=d,l=0;l<d.length;l++)Ps.add(d[l])}var Jn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xl={},Pn={};function Jl(l){return ie.call(Pn,l)?!0:ie.call(Xl,l)?!1:Jn.test(l)?Pn[l]=!0:(Xl[l]=!0,!1)}function Dn(l,d,f){if(Jl(d))if(f===null)l.removeAttribute(d);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var b=d.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+f)}}function Os(l,d,f){if(f===null)l.removeAttribute(d);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+f)}}function os(l,d,f,b){if(b===null)l.removeAttribute(f);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(d,f,""+b)}}var tn,pi;function Ws(l){if(tn===void 0)try{throw Error()}catch(f){var d=f.stack.trim().match(/\n( *(at )?)/);tn=d&&d[1]||"",pi=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tn+l+pi}var $i=!1;function Zn(l,d){if(!l||$i)return"";$i=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(d){var St=function(){throw Error()};if(Object.defineProperty(St.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(St,[])}catch(ot){var st=ot}Reflect.construct(l,[],St)}else{try{St.call()}catch(ot){st=ot}l.call(St.prototype)}}else{try{throw Error()}catch(ot){st=ot}(St=l())&&typeof St.catch=="function"&&St.catch(function(){})}}catch(ot){if(ot&&st&&typeof ot.stack=="string")return[ot.stack,st.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var F=b.DetermineComponentFrameRoot(),le=F[0],be=F[1];if(le&&be){var Me=le.split(`
`),rt=be.split(`
`);for(E=b=0;b<Me.length&&!Me[b].includes("DetermineComponentFrameRoot");)b++;for(;E<rt.length&&!rt[E].includes("DetermineComponentFrameRoot");)E++;if(b===Me.length||E===rt.length)for(b=Me.length-1,E=rt.length-1;1<=b&&0<=E&&Me[b]!==rt[E];)E--;for(;1<=b&&0<=E;b--,E--)if(Me[b]!==rt[E]){if(b!==1||E!==1)do if(b--,E--,0>E||Me[b]!==rt[E]){var bt=`
`+Me[b].replace(" at new "," at ");return l.displayName&&bt.includes("<anonymous>")&&(bt=bt.replace("<anonymous>",l.displayName)),bt}while(1<=b&&0<=E);break}}}finally{$i=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?Ws(f):""}function cl(l){switch(l.tag){case 26:case 27:case 5:return Ws(l.type);case 16:return Ws("Lazy");case 13:return Ws("Suspense");case 19:return Ws("SuspenseList");case 0:case 15:return Zn(l.type,!1);case 11:return Zn(l.type.render,!1);case 1:return Zn(l.type,!0);case 31:return Ws("Activity");default:return""}}function Bi(l){try{var d="";do d+=cl(l),l=l.return;while(l);return d}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function $a(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function gi(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function On(l){var d=gi(l)?"checked":"value",f=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),b=""+l[d];if(!l.hasOwnProperty(d)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var E=f.get,F=f.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return E.call(this)},set:function(le){b=""+le,F.call(this,le)}}),Object.defineProperty(l,d,{enumerable:f.enumerable}),{getValue:function(){return b},setValue:function(le){b=""+le},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Lr(l){l._valueTracker||(l._valueTracker=On(l))}function Ln(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var f=d.getValue(),b="";return l&&(b=gi(l)?l.checked?"true":"false":l.value),l=b,l!==f?(d.setValue(l),!0):!1}function Ls(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Ot=/[\n"\\]/g;function $t(l){return l.replace(Ot,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function ft(l,d,f,b,E,F,le,be){l.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?l.type=le:l.removeAttribute("type"),d!=null?le==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+$a(d)):l.value!==""+$a(d)&&(l.value=""+$a(d)):le!=="submit"&&le!=="reset"||l.removeAttribute("value"),d!=null?dl(l,le,$a(d)):f!=null?dl(l,le,$a(f)):b!=null&&l.removeAttribute("value"),E==null&&F!=null&&(l.defaultChecked=!!F),E!=null&&(l.checked=E&&typeof E!="function"&&typeof E!="symbol"),be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"?l.name=""+$a(be):l.removeAttribute("name")}function Ca(l,d,f,b,E,F,le,be){if(F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(l.type=F),d!=null||f!=null){if(!(F!=="submit"&&F!=="reset"||d!=null))return;f=f!=null?""+$a(f):"",d=d!=null?""+$a(d):f,be||d===l.value||(l.value=d),l.defaultValue=d}b=b??E,b=typeof b!="function"&&typeof b!="symbol"&&!!b,l.checked=be?l.checked:!!b,l.defaultChecked=!!b,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(l.name=le)}function dl(l,d,f){d==="number"&&Ls(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function ul(l,d,f,b){if(l=l.options,d){d={};for(var E=0;E<f.length;E++)d["$"+f[E]]=!0;for(f=0;f<l.length;f++)E=d.hasOwnProperty("$"+l[f].value),l[f].selected!==E&&(l[f].selected=E),E&&b&&(l[f].defaultSelected=!0)}else{for(f=""+$a(f),d=null,E=0;E<l.length;E++){if(l[E].value===f){l[E].selected=!0,b&&(l[E].defaultSelected=!0);return}d!==null||l[E].disabled||(d=l[E])}d!==null&&(d.selected=!0)}}function xn(l,d,f){if(d!=null&&(d=""+$a(d),d!==l.value&&(l.value=d),f==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=f!=null?""+$a(f):""}function mc(l,d,f,b){if(d==null){if(b!=null){if(f!=null)throw Error(s(92));if(V(b)){if(1<b.length)throw Error(s(93));b=b[0]}f=b}f==null&&(f=""),d=f}f=$a(d),l.defaultValue=f,b=l.textContent,b===f&&b!==""&&b!==null&&(l.value=b)}function Qn(l,d){if(d){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=d;return}}l.textContent=d}var ml=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fi(l,d,f){var b=d.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?b?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":b?l.setProperty(d,f):typeof f!="number"||f===0||ml.has(d)?d==="float"?l.cssFloat=f:l[d]=(""+f).trim():l[d]=f+"px"}function Zl(l,d,f){if(d!=null&&typeof d!="object")throw Error(s(62));if(l=l.style,f!=null){for(var b in f)!f.hasOwnProperty(b)||d!=null&&d.hasOwnProperty(b)||(b.indexOf("--")===0?l.setProperty(b,""):b==="float"?l.cssFloat="":l[b]="");for(var E in d)b=d[E],d.hasOwnProperty(E)&&f[E]!==b&&Fi(l,E,b)}else for(var F in d)d.hasOwnProperty(F)&&Fi(l,F,d[F])}function Do(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fn(l){return hc.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var yi=null;function Tr(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Mn=null,bi=null;function ma(l){var d=Er(l);if(d&&(l=d.stateNode)){var f=l[Et]||null;e:switch(l=d.stateNode,d.type){case"input":if(ft(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),d=f.name,f.type==="radio"&&d!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+$t(""+d)+'"][type="radio"]'),d=0;d<f.length;d++){var b=f[d];if(b!==l&&b.form===l.form){var E=b[Et]||null;if(!E)throw Error(s(90));ft(b,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(d=0;d<f.length;d++)b=f[d],b.form===l.form&&Ln(b)}break e;case"textarea":xn(l,f.value,f.defaultValue);break e;case"select":d=f.value,d!=null&&ul(l,!!f.multiple,d,!1)}}}var Oo=!1;function xc(l,d,f){if(Oo)return l(d,f);Oo=!0;try{var b=l(d);return b}finally{if(Oo=!1,(Mn!==null||bi!==null)&&(Jp(),Mn&&(d=Mn,l=bi,bi=Mn=null,ma(d),l)))for(d=0;d<l.length;d++)ma(l[d])}}function Ql(l,d){var f=l.stateNode;if(f===null)return null;var b=f[Et]||null;if(b===null)return null;f=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(s(231,d,typeof f));return f}var ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ti=!1;if(ei)try{var pn={};Object.defineProperty(pn,"passive",{get:function(){ti=!0}}),window.addEventListener("test",pn,pn),window.removeEventListener("test",pn,pn)}catch{ti=!1}var vi=null,fc=null,qi=null;function Lo(){if(qi)return qi;var l,d=fc,f=d.length,b,E="value"in vi?vi.value:vi.textContent,F=E.length;for(l=0;l<f&&d[l]===E[l];l++);var le=f-l;for(b=1;b<=le&&d[f-b]===E[F-b];b++);return qi=E.slice(l,1<b?1-b:void 0)}function Pe(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Ct(){return!0}function wa(){return!1}function Ya(l){function d(f,b,E,F,le){this._reactName=f,this._targetInst=E,this.type=b,this.nativeEvent=F,this.target=le,this.currentTarget=null;for(var be in l)l.hasOwnProperty(be)&&(f=l[be],this[be]=f?f(F):F[be]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?Ct:wa,this.isPropagationStopped=wa,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ct)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ct)},persist:function(){},isPersistent:Ct}),d}var ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hl=Ya(ai),ri=h({},ai,{view:0,detail:0}),pc=Ya(ri),gc,Mo,eo,xl=h({},ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ga,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==eo&&(eo&&l.type==="mousemove"?(gc=l.screenX-eo.screenX,Mo=l.screenY-eo.screenY):Mo=gc=0,eo=l),gc)},movementY:function(l){return"movementY"in l?l.movementY:Mo}}),ud=Ya(xl),ju=h({},xl,{dataTransfer:0}),si=Ya(ju),fl=h({},ri,{relatedTarget:0}),U=Ya(fl),ue=h({},ai,{animationName:0,elapsedTime:0,pseudoElement:0}),Ce=Ya(ue),Be=h({},ai,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Ze=Ya(Be),yt=h({},ai,{data:0}),_t=Ya(yt),Kt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ra={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sa(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=pa[l])?!!d[l]:!1}function Ga(){return Sa}var Mr=h({},ri,{key:function(l){if(l.key){var d=Kt[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Pe(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?ra[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ga,charCode:function(l){return l.type==="keypress"?Pe(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Pe(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),cs=Ya(Mr),ir=h({},xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ds=Ya(ir),us=h({},ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ga}),Hs=Ya(us),to=h({},ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ro=Ya(to),ix=h({},xl,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Pm=Ya(ix),yc=h({},ai,{newState:0,oldState:0}),Ui=Ya(yc),Nu=[9,13,27,32],Io=ei&&"CompositionEvent"in window,ji=null;ei&&"documentMode"in document&&(ji=document.documentMode);var Ms=ei&&"TextEvent"in window&&!ji,pl=ei&&(!Io||ji&&8<ji&&11>=ji),gl=" ",bc=!1;function md(l,d){switch(l){case"keyup":return Nu.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function an(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var ao=!1;function hd(l,d){switch(l){case"compositionend":return an(d);case"keypress":return d.which!==32?null:(bc=!0,gl);case"textInput":return l=d.data,l===gl&&bc?null:l;default:return null}}function Dm(l,d){if(ao)return l==="compositionend"||!Io&&md(l,d)?(l=Lo(),qi=fc=vi=null,ao=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return pl&&d.locale!=="ko"?null:d.data;default:return null}}var gs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ni(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!gs[l.type]:d==="textarea"}function xd(l,d,f,b){Mn?bi?bi.push(b):bi=[b]:Mn=b,d=r0(d,"onChange"),0<d.length&&(f=new hl("onChange","change",null,f,b),l.push({event:f,listeners:d}))}var ro=null,Ni=null;function fd(l){g4(l,0)}function Ys(l){var d=ls(l);if(Ln(d))return l}function gn(l,d){if(l==="change")return d}var zo=!1;if(ei){var wi;if(ei){var yl="oninput"in document;if(!yl){var pd=document.createElement("div");pd.setAttribute("oninput","return;"),yl=typeof pd.oninput=="function"}wi=yl}else wi=!1;zo=wi&&(!document.documentMode||9<document.documentMode)}function so(){ro&&(ro.detachEvent("onpropertychange",qr),Ni=ro=null)}function qr(l){if(l.propertyName==="value"&&Ys(Ni)){var d=[];xd(d,Ni,l,Tr(l)),xc(fd,d)}}function lx(l,d,f){l==="focusin"?(so(),ro=d,Ni=f,ro.attachEvent("onpropertychange",qr)):l==="focusout"&&so()}function bl(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Ys(Ni)}function vl(l,d){if(l==="click")return Ys(d)}function gd(l,d){if(l==="input"||l==="change")return Ys(d)}function wu(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Rs=typeof Object.is=="function"?Object.is:wu;function jl(l,d){if(Rs(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var f=Object.keys(l),b=Object.keys(d);if(f.length!==b.length)return!1;for(b=0;b<f.length;b++){var E=f[b];if(!ie.call(d,E)||!Rs(l[E],d[E]))return!1}return!0}function $o(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Bo(l,d){var f=$o(l);l=0;for(var b;f;){if(f.nodeType===3){if(b=l+f.textContent.length,l<=d&&b>=d)return{node:f,offset:d-l};l=b}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=$o(f)}}function Nl(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?Nl(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function yd(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=Ls(l.document);d instanceof l.HTMLIFrameElement;){try{var f=typeof d.contentWindow.location.href=="string"}catch{f=!1}if(f)l=d.contentWindow;else break;d=Ls(l.document)}return d}function yn(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var wl=ei&&"documentMode"in document&&11>=document.documentMode,tr=null,lr=null,Nr=null,Rr=!1;function Sl(l,d,f){var b=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Rr||tr==null||tr!==Ls(b)||(b=tr,"selectionStart"in b&&yn(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Nr&&jl(Nr,b)||(Nr=b,b=r0(lr,"onSelect"),0<b.length&&(d=new hl("onSelect","select",null,d,f),l.push({event:d,listeners:b}),d.target=tr)))}function Si(l,d){var f={};return f[l.toLowerCase()]=d.toLowerCase(),f["Webkit"+l]="webkit"+d,f["Moz"+l]="moz"+d,f}var bn={animationend:Si("Animation","AnimationEnd"),animationiteration:Si("Animation","AnimationIteration"),animationstart:Si("Animation","AnimationStart"),transitionrun:Si("Transition","TransitionRun"),transitionstart:Si("Transition","TransitionStart"),transitioncancel:Si("Transition","TransitionCancel"),transitionend:Si("Transition","TransitionEnd")},vc={},ox={};ei&&(ox=document.createElement("div").style,"AnimationEvent"in window||(delete bn.animationend.animation,delete bn.animationiteration.animation,delete bn.animationstart.animation),"TransitionEvent"in window||delete bn.transitionend.transition);function Fo(l){if(vc[l])return vc[l];if(!bn[l])return l;var d=bn[l],f;for(f in d)if(d.hasOwnProperty(f)&&f in ox)return vc[l]=d[f];return l}var cx=Fo("animationend"),dx=Fo("animationiteration"),ux=Fo("animationstart"),yp=Fo("transitionrun"),bp=Fo("transitionstart"),vp=Fo("transitioncancel"),mx=Fo("transitionend"),hx=new Map,Om="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Om.push("scrollEnd");function _i(l,d){hx.set(l,d),Us(d,[l])}var bd=new WeakMap;function ii(l,d){if(typeof l=="object"&&l!==null){var f=bd.get(l);return f!==void 0?f:(d={value:l,source:d,stack:Bi(d)},bd.set(l,d),d)}return{value:l,source:d,stack:Bi(d)}}var li=[],jc=0,Lm=0;function Su(){for(var l=jc,d=Lm=jc=0;d<l;){var f=li[d];li[d++]=null;var b=li[d];li[d++]=null;var E=li[d];li[d++]=null;var F=li[d];if(li[d++]=null,b!==null&&E!==null){var le=b.pending;le===null?E.next=E:(E.next=le.next,le.next=E),b.pending=E}F!==0&&Rm(f,E,F)}}function _u(l,d,f,b){li[jc++]=l,li[jc++]=d,li[jc++]=f,li[jc++]=b,Lm|=b,l.lanes|=b,l=l.alternate,l!==null&&(l.lanes|=b)}function Mm(l,d,f,b){return _u(l,d,f,b),wc(l)}function Nc(l,d){return _u(l,null,null,d),wc(l)}function Rm(l,d,f){l.lanes|=f;var b=l.alternate;b!==null&&(b.lanes|=f);for(var E=!1,F=l.return;F!==null;)F.childLanes|=f,b=F.alternate,b!==null&&(b.childLanes|=f),F.tag===22&&(l=F.stateNode,l===null||l._visibility&1||(E=!0)),l=F,F=F.return;return l.tag===3?(F=l.stateNode,E&&d!==null&&(E=31-xt(f),l=F.hiddenUpdates,b=l[E],b===null?l[E]=[d]:b.push(d),d.lane=f|536870912),F):null}function wc(l){if(50<zx)throw zx=0,qb=null,Error(s(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var Is={};function Ci(l,d,f,b){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(l,d,f,b){return new Ci(l,d,f,b)}function vd(l){return l=l.prototype,!(!l||!l.isReactComponent)}function _l(l,d){var f=l.alternate;return f===null?(f=rn(l.tag,d,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=d,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,d=l.dependencies,f.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function Cu(l,d){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,d=f.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Sc(l,d,f,b,E,F){var le=0;if(b=l,typeof l=="function")vd(l)&&(le=1);else if(typeof l=="string")le=vM(l,f,z.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case _:return l=rn(31,f,d,E),l.elementType=_,l.lanes=F,l;case v:return no(f.children,E,F,d);case N:le=8,E|=24;break;case w:return l=rn(12,f,d,E|2),l.elementType=w,l.lanes=F,l;case P:return l=rn(13,f,d,E),l.elementType=P,l.lanes=F,l;case $:return l=rn(19,f,d,E),l.elementType=$,l.lanes=F,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case j:case k:le=10;break e;case T:le=9;break e;case R:le=11;break e;case A:le=14;break e;case M:le=16,b=null;break e}le=29,f=Error(s(130,l===null?"null":typeof l,"")),b=null}return d=rn(le,f,d,E),d.elementType=l,d.type=b,d.lanes=F,d}function no(l,d,f,b){return l=rn(7,l,b,d),l.lanes=f,l}function Im(l,d,f){return l=rn(6,l,null,d),l.lanes=f,l}function ku(l,d,f){return d=rn(4,l.children!==null?l.children:[],l.key,d),d.lanes=f,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var qo=[],io=0,jd=null,zm=0,ki=[],oi=0,_c=null,lo=1,oo="";function Cc(l,d){qo[io++]=zm,qo[io++]=jd,jd=l,zm=d}function jp(l,d,f){ki[oi++]=lo,ki[oi++]=oo,ki[oi++]=_c,_c=l;var b=lo;l=oo;var E=32-xt(b)-1;b&=~(1<<E),f+=1;var F=32-xt(d)+E;if(30<F){var le=E-E%5;F=(b&(1<<le)-1).toString(32),b>>=le,E-=le,lo=1<<32-xt(d)+E|f<<E|b,oo=F+l}else lo=1<<F|f<<E|b,oo=l}function Au(l){l.return!==null&&(Cc(l,1),jp(l,1,0))}function Eu(l){for(;l===jd;)jd=qo[--io],qo[io]=null,zm=qo[--io],qo[io]=null;for(;l===_c;)_c=ki[--oi],ki[oi]=null,oo=ki[--oi],ki[oi]=null,lo=ki[--oi],ki[oi]=null}var ys=null,Ur=null,ar=!1,Uo=null,Cl=!1,xx=Error(s(519));function kc(l){var d=Error(s(418,""));throw Nd(ii(d,l)),xx}function Np(l){var d=l.stateNode,f=l.type,b=l.memoizedProps;switch(d[Ye]=l,d[Et]=b,f){case"dialog":Fa("cancel",d),Fa("close",d);break;case"iframe":case"object":case"embed":Fa("load",d);break;case"video":case"audio":for(f=0;f<Bx.length;f++)Fa(Bx[f],d);break;case"source":Fa("error",d);break;case"img":case"image":case"link":Fa("error",d),Fa("load",d);break;case"details":Fa("toggle",d);break;case"input":Fa("invalid",d),Ca(d,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0),Lr(d);break;case"select":Fa("invalid",d);break;case"textarea":Fa("invalid",d),mc(d,b.value,b.defaultValue,b.children),Lr(d)}f=b.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||d.textContent===""+f||b.suppressHydrationWarning===!0||j4(d.textContent,f)?(b.popover!=null&&(Fa("beforetoggle",d),Fa("toggle",d)),b.onScroll!=null&&Fa("scroll",d),b.onScrollEnd!=null&&Fa("scrollend",d),b.onClick!=null&&(d.onclick=s0),d=!0):d=!1,d||kc(l)}function co(l){for(ys=l.return;ys;)switch(ys.tag){case 5:case 13:Cl=!1;return;case 27:case 3:Cl=!0;return;default:ys=ys.return}}function vn(l){if(l!==ys)return!1;if(!ar)return co(l),ar=!0,!1;var d=l.tag,f;if((f=d!==3&&d!==27)&&((f=d===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||sv(l.type,l.memoizedProps)),f=!f),f&&Ur&&kc(l),co(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8)if(f=l.data,f==="/$"){if(d===0){Ur=yo(l.nextSibling);break e}d--}else f!=="$"&&f!=="$!"&&f!=="$?"||d++;l=l.nextSibling}Ur=null}}else d===27?(d=Ur,zd(l.type)?(l=ov,ov=null,Ur=l):Ur=d):Ur=ys?yo(l.stateNode.nextSibling):null;return!0}function ci(){Ur=ys=null,ar=!1}function wp(){var l=Uo;return l!==null&&(Ei===null?Ei=l:Ei.push.apply(Ei,l),Uo=null),l}function Nd(l){Uo===null?Uo=[l]:Uo.push(l)}var kl=oe(null),zs=null,uo=null;function Wo(l,d,f){G(kl,d._currentValue),d._currentValue=f}function Al(l){l._currentValue=kl.current,q(kl)}function $m(l,d,f){for(;l!==null;){var b=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),l===f)break;l=l.return}}function Bm(l,d,f,b){var E=l.child;for(E!==null&&(E.return=l);E!==null;){var F=E.dependencies;if(F!==null){var le=E.child;F=F.firstContext;e:for(;F!==null;){var be=F;F=E;for(var Me=0;Me<d.length;Me++)if(be.context===d[Me]){F.lanes|=f,be=F.alternate,be!==null&&(be.lanes|=f),$m(F.return,f,l),b||(le=null);break e}F=be.next}}else if(E.tag===18){if(le=E.return,le===null)throw Error(s(341));le.lanes|=f,F=le.alternate,F!==null&&(F.lanes|=f),$m(le,f,l),le=null}else le=E.child;if(le!==null)le.return=E;else for(le=E;le!==null;){if(le===l){le=null;break}if(E=le.sibling,E!==null){E.return=le.return,le=E;break}le=le.return}E=le}}function wd(l,d,f,b){l=null;for(var E=d,F=!1;E!==null;){if(!F){if((E.flags&524288)!==0)F=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var le=E.alternate;if(le===null)throw Error(s(387));if(le=le.memoizedProps,le!==null){var be=E.type;Rs(E.pendingProps.value,le.value)||(l!==null?l.push(be):l=[be])}}else if(E===fe.current){if(le=E.alternate,le===null)throw Error(s(387));le.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(l!==null?l.push(Yx):l=[Yx])}E=E.return}l!==null&&Bm(d,l,f,b),d.flags|=262144}function Fm(l){for(l=l.firstContext;l!==null;){if(!Rs(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function El(l){zs=l,uo=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function bs(l){return qm(zs,l)}function Ho(l,d){return zs===null&&El(l),qm(l,d)}function qm(l,d){var f=d._currentValue;if(d={context:d,memoizedValue:f,next:null},uo===null){if(l===null)throw Error(s(308));uo=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else uo=uo.next=d;return f}var hb=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(f,b){l.push(b)}};this.abort=function(){d.aborted=!0,l.forEach(function(f){return f()})}},Sp=t.unstable_scheduleCallback,xb=t.unstable_NormalPriority,vs={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fx(){return{controller:new hb,data:new Map,refCount:0}}function Tu(l){l.refCount--,l.refCount===0&&Sp(xb,function(){l.controller.abort()})}var Pu=null,px=0,Ac=0,mo=null;function fb(l,d){if(Pu===null){var f=Pu=[];px=0,Ac=Kb(),mo={status:"pending",value:void 0,then:function(b){f.push(b)}}}return px++,d.then(_p,_p),d}function _p(){if(--px===0&&Pu!==null){mo!==null&&(mo.status="fulfilled");var l=Pu;Pu=null,Ac=0,mo=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function Cp(l,d){var f=[],b={status:"pending",value:null,reason:null,then:function(E){f.push(E)}};return l.then(function(){b.status="fulfilled",b.value=d;for(var E=0;E<f.length;E++)(0,f[E])(d)},function(E){for(b.status="rejected",b.reason=E,E=0;E<f.length;E++)(0,f[E])(void 0)}),b}var S=Y.S;Y.S=function(l,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&fb(l,d),S!==null&&S(l,d)};var O=oe(null);function K(){var l=O.current;return l!==null?l:Pr.pooledCache}function ee(l,d){d===null?G(O,O.current):G(O,d.pool)}function de(){var l=K();return l===null?null:{parent:vs._currentValue,pool:l}}var xe=Error(s(460)),ge=Error(s(474)),ve=Error(s(542)),je={then:function(){}};function _e(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Fe(){}function at(l,d,f){switch(f=l[f],f===void 0?l.push(d):f!==d&&(d.then(Fe,Fe),d=f),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,Qe(l),l;default:if(typeof d.status=="string")d.then(Fe,Fe);else{if(l=Pr,l!==null&&100<l.shellSuspendCounter)throw Error(s(482));l=d,l.status="pending",l.then(function(b){if(d.status==="pending"){var E=d;E.status="fulfilled",E.value=b}},function(b){if(d.status==="pending"){var E=d;E.status="rejected",E.reason=b}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,Qe(l),l}throw Se=d,xe}}var Se=null;function He(){if(Se===null)throw Error(s(459));var l=Se;return Se=null,l}function Qe(l){if(l===xe||l===ve)throw Error(s(483))}var ht=!1;function tt(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gt(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function pt(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function kt(l,d,f){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(mr&2)!==0){var E=b.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),b.pending=d,d=wc(l),Rm(l,null,f),d}return _u(l,b,d,f),wc(l)}function wt(l,d,f){if(d=d.updateQueue,d!==null&&(d=d.shared,(f&4194048)!==0)){var b=d.lanes;b&=l.pendingLanes,f|=b,d.lanes=f,Mt(l,f)}}function ea(l,d){var f=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,f===b)){var E=null,F=null;if(f=f.firstBaseUpdate,f!==null){do{var le={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};F===null?E=F=le:F=F.next=le,f=f.next}while(f!==null);F===null?E=F=d:F=F.next=d}else E=F=d;f={baseState:b.baseState,firstBaseUpdate:E,lastBaseUpdate:F,shared:b.shared,callbacks:b.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=d}var Ft=!1;function ba(){if(Ft){var l=mo;if(l!==null)throw l}}function Ut(l,d,f,b){Ft=!1;var E=l.updateQueue;ht=!1;var F=E.firstBaseUpdate,le=E.lastBaseUpdate,be=E.shared.pending;if(be!==null){E.shared.pending=null;var Me=be,rt=Me.next;Me.next=null,le===null?F=rt:le.next=rt,le=Me;var bt=l.alternate;bt!==null&&(bt=bt.updateQueue,be=bt.lastBaseUpdate,be!==le&&(be===null?bt.firstBaseUpdate=rt:be.next=rt,bt.lastBaseUpdate=Me))}if(F!==null){var St=E.baseState;le=0,bt=rt=Me=null,be=F;do{var st=be.lane&-536870913,ot=st!==be.lane;if(ot?(Ja&st)===st:(b&st)===st){st!==0&&st===Ac&&(Ft=!0),bt!==null&&(bt=bt.next={lane:0,tag:be.tag,payload:be.payload,callback:null,next:null});e:{var ya=l,xa=be;st=d;var vr=f;switch(xa.tag){case 1:if(ya=xa.payload,typeof ya=="function"){St=ya.call(vr,St,st);break e}St=ya;break e;case 3:ya.flags=ya.flags&-65537|128;case 0:if(ya=xa.payload,st=typeof ya=="function"?ya.call(vr,St,st):ya,st==null)break e;St=h({},St,st);break e;case 2:ht=!0}}st=be.callback,st!==null&&(l.flags|=64,ot&&(l.flags|=8192),ot=E.callbacks,ot===null?E.callbacks=[st]:ot.push(st))}else ot={lane:st,tag:be.tag,payload:be.payload,callback:be.callback,next:null},bt===null?(rt=bt=ot,Me=St):bt=bt.next=ot,le|=st;if(be=be.next,be===null){if(be=E.shared.pending,be===null)break;ot=be,be=ot.next,ot.next=null,E.lastBaseUpdate=ot,E.shared.pending=null}}while(!0);bt===null&&(Me=St),E.baseState=Me,E.firstBaseUpdate=rt,E.lastBaseUpdate=bt,F===null&&(E.shared.lanes=0),Ld|=le,l.lanes=le,l.memoizedState=St}}function Ia(l,d){if(typeof l!="function")throw Error(s(191,l));l.call(d)}function ms(l,d){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)Ia(f[l],d)}var ga=oe(null),Gt=oe(0);function Rt(l,d){l=Rc,G(Gt,l),G(ga,d),Rc=l|d.baseLanes}function Ir(){G(Gt,Rc),G(ga,ga.current)}function va(){Rc=Gt.current,q(ga),q(Gt)}var ka=0,Xt=null,Na=null,Wa=null,wr=!1,Zr=!1,Qr=!1,Wr=0,Oa=0,Ha=null,Hr=0;function ha(){throw Error(s(321))}function js(l,d){if(d===null)return!1;for(var f=0;f<d.length&&f<l.length;f++)if(!Rs(l[f],d[f]))return!1;return!0}function di(l,d,f,b,E,F){return ka=F,Xt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Y.H=l===null||l.memoizedState===null?tw:aw,Qr=!1,F=f(b,E),Qr=!1,Zr&&(F=jn(d,f,b,E)),Yr(l),F}function Yr(l){Y.H=zp;var d=Na!==null&&Na.next!==null;if(ka=0,Wa=Na=Xt=null,wr=!1,Oa=0,Ha=null,d)throw Error(s(300));l===null||nn||(l=l.dependencies,l!==null&&Fm(l)&&(nn=!0))}function jn(l,d,f,b){Xt=l;var E=0;do{if(Zr&&(Ha=null),Oa=0,Zr=!1,25<=E)throw Error(s(301));if(E+=1,Wa=Na=null,l.updateQueue!=null){var F=l.updateQueue;F.lastEffect=null,F.events=null,F.stores=null,F.memoCache!=null&&(F.memoCache.index=0)}Y.H=PL,F=d(f,b)}while(Zr);return F}function ur(){var l=Y.H,d=l.useState()[0];return d=typeof d.then=="function"?Vs(d):d,l=l.useState()[0],(Na!==null?Na.memoizedState:null)!==l&&(Xt.flags|=1024),d}function es(){var l=Wr!==0;return Wr=0,l}function Nn(l,d,f){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~f}function Gs(l){if(wr){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}wr=!1}ka=0,Wa=Na=Xt=null,Zr=!1,Oa=Wr=0,Ha=null}function yr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wa===null?Xt.memoizedState=Wa=l:Wa=Wa.next=l,Wa}function Xa(){if(Na===null){var l=Xt.alternate;l=l!==null?l.memoizedState:null}else l=Na.next;var d=Wa===null?Xt.memoizedState:Wa.next;if(d!==null)Wa=d,Na=l;else{if(l===null)throw Xt.alternate===null?Error(s(467)):Error(s(310));Na=l,l={memoizedState:Na.memoizedState,baseState:Na.baseState,baseQueue:Na.baseQueue,queue:Na.queue,next:null},Wa===null?Xt.memoizedState=Wa=l:Wa=Wa.next=l}return Wa}function sn(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vs(l){var d=Oa;return Oa+=1,Ha===null&&(Ha=[]),l=at(Ha,l,d),d=Xt,(Wa===null?d.memoizedState:Wa.next)===null&&(d=d.alternate,Y.H=d===null||d.memoizedState===null?tw:aw),l}function nr(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Vs(l);if(l.$$typeof===k)return bs(l)}throw Error(s(438,String(l)))}function wn(l){var d=null,f=Xt.updateQueue;if(f!==null&&(d=f.memoCache),d==null){var b=Xt.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(d={data:b.data.map(function(E){return E.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),f===null&&(f=sn(),Xt.updateQueue=f),f.memoCache=d,f=d.data[d.index],f===void 0)for(f=d.data[d.index]=Array(l),b=0;b<l;b++)f[b]=B;return d.index++,f}function Ns(l,d){return typeof d=="function"?d(l):d}function Tl(l){var d=Xa();return Wi(d,Na,l)}function Wi(l,d,f){var b=l.queue;if(b===null)throw Error(s(311));b.lastRenderedReducer=f;var E=l.baseQueue,F=b.pending;if(F!==null){if(E!==null){var le=E.next;E.next=F.next,F.next=le}d.baseQueue=E=F,b.pending=null}if(F=l.baseState,E===null)l.memoizedState=F;else{d=E.next;var be=le=null,Me=null,rt=d,bt=!1;do{var St=rt.lane&-536870913;if(St!==rt.lane?(Ja&St)===St:(ka&St)===St){var st=rt.revertLane;if(st===0)Me!==null&&(Me=Me.next={lane:0,revertLane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),St===Ac&&(bt=!0);else if((ka&st)===st){rt=rt.next,st===Ac&&(bt=!0);continue}else St={lane:0,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Me===null?(be=Me=St,le=F):Me=Me.next=St,Xt.lanes|=st,Ld|=st;St=rt.action,Qr&&f(F,St),F=rt.hasEagerState?rt.eagerState:f(F,St)}else st={lane:St,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Me===null?(be=Me=st,le=F):Me=Me.next=st,Xt.lanes|=St,Ld|=St;rt=rt.next}while(rt!==null&&rt!==d);if(Me===null?le=F:Me.next=be,!Rs(F,l.memoizedState)&&(nn=!0,bt&&(f=mo,f!==null)))throw f;l.memoizedState=F,l.baseState=le,l.baseQueue=Me,b.lastRenderedState=F}return E===null&&(b.lanes=0),[l.memoizedState,b.dispatch]}function ws(l){var d=Xa(),f=d.queue;if(f===null)throw Error(s(311));f.lastRenderedReducer=l;var b=f.dispatch,E=f.pending,F=d.memoizedState;if(E!==null){f.pending=null;var le=E=E.next;do F=l(F,le.action),le=le.next;while(le!==E);Rs(F,d.memoizedState)||(nn=!0),d.memoizedState=F,d.baseQueue===null&&(d.baseState=F),f.lastRenderedState=F}return[F,b]}function Du(l,d,f){var b=Xt,E=Xa(),F=ar;if(F){if(f===void 0)throw Error(s(407));f=f()}else f=d();var le=!Rs((Na||E).memoizedState,f);le&&(E.memoizedState=f,nn=!0),E=E.queue;var be=Sd.bind(null,b,E,l);if(kd(2048,8,be,[l]),E.getSnapshot!==d||le||Wa!==null&&Wa.memoizedState.tag&1){if(b.flags|=2048,xo(9,Ru(),Ou.bind(null,b,E,f,d),null),Pr===null)throw Error(s(349));F||(ka&124)!==0||Um(b,d,f)}return f}function Um(l,d,f){l.flags|=16384,l={getSnapshot:d,value:f},d=Xt.updateQueue,d===null?(d=sn(),Xt.updateQueue=d,d.stores=[l]):(f=d.stores,f===null?d.stores=[l]:f.push(l))}function Ou(l,d,f,b){d.value=f,d.getSnapshot=b,kp(d)&&Ap(l)}function Sd(l,d,f){return f(function(){kp(d)&&Ap(l)})}function kp(l){var d=l.getSnapshot;l=l.value;try{var f=d();return!Rs(l,f)}catch{return!0}}function Ap(l){var d=Nc(l,2);d!==null&&Xi(d,l,2)}function Lu(l){var d=yr();if(typeof l=="function"){var f=l;if(l=f(),Qr){jt(!0);try{f()}finally{jt(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:l},d}function ho(l,d,f,b){return l.baseState=f,Wi(l,Na,typeof b=="function"?b:Ns)}function pb(l,d,f,b,E){if(Ip(l))throw Error(s(485));if(l=d.action,l!==null){var F={payload:E,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){F.listeners.push(le)}};Y.T!==null?f(!0):F.isTransition=!1,b(F),f=d.pending,f===null?(F.next=d.pending=F,Ep(d,F)):(F.next=f.next,d.pending=f.next=F)}}function Ep(l,d){var f=d.action,b=d.payload,E=l.state;if(d.isTransition){var F=Y.T,le={};Y.T=le;try{var be=f(E,b),Me=Y.S;Me!==null&&Me(le,be),Tp(l,d,be)}catch(rt){_d(l,d,rt)}finally{Y.T=F}}else try{F=f(E,b),Tp(l,d,F)}catch(rt){_d(l,d,rt)}}function Tp(l,d,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(b){gx(l,d,b)},function(b){return _d(l,d,b)}):gx(l,d,f)}function gx(l,d,f){d.status="fulfilled",d.value=f,yx(d),l.state=f,d=l.pending,d!==null&&(f=d.next,f===d?l.pending=null:(f=f.next,d.next=f,Ep(l,f)))}function _d(l,d,f){var b=l.pending;if(l.pending=null,b!==null){b=b.next;do d.status="rejected",d.reason=f,yx(d),d=d.next;while(d!==b)}l.action=null}function yx(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function bx(l,d){return d}function Mu(l,d){if(ar){var f=Pr.formState;if(f!==null){e:{var b=Xt;if(ar){if(Ur){t:{for(var E=Ur,F=Cl;E.nodeType!==8;){if(!F){E=null;break t}if(E=yo(E.nextSibling),E===null){E=null;break t}}F=E.data,E=F==="F!"||F==="F"?E:null}if(E){Ur=yo(E.nextSibling),b=E.data==="F!";break e}}kc(b)}b=!1}b&&(d=f[0])}}return f=yr(),f.memoizedState=f.baseState=d,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bx,lastRenderedState:d},f.queue=b,f=Z3.bind(null,Xt,b),b.dispatch=f,b=Lu(!1),F=gb.bind(null,Xt,!1,b.queue),b=yr(),E={state:d,dispatch:null,action:l,pending:null},b.queue=E,f=pb.bind(null,Xt,E,F,f),E.dispatch=f,b.memoizedState=l,[d,f,!1]}function Wm(l){var d=Xa();return Cd(d,Na,l)}function Cd(l,d,f){if(d=Wi(l,d,bx)[0],l=Tl(Ns)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var b=Vs(d)}catch(le){throw le===xe?ve:le}else b=d;d=Xa();var E=d.queue,F=E.dispatch;return f!==d.memoizedState&&(Xt.flags|=2048,xo(9,Ru(),Pp.bind(null,E,f),null)),[b,F,l]}function Pp(l,d){l.action=d}function Dp(l){var d=Xa(),f=Na;if(f!==null)return Cd(d,f,l);Xa(),d=d.memoizedState,f=Xa();var b=f.queue.dispatch;return f.memoizedState=l,[d,b,!1]}function xo(l,d,f,b){return l={tag:l,create:f,deps:b,inst:d,next:null},d=Xt.updateQueue,d===null&&(d=sn(),Xt.updateQueue=d),f=d.lastEffect,f===null?d.lastEffect=l.next=l:(b=f.next,f.next=l,l.next=b,d.lastEffect=l),l}function Ru(){return{destroy:void 0,resource:void 0}}function Hm(){return Xa().memoizedState}function Hi(l,d,f,b){var E=yr();b=b===void 0?null:b,Xt.flags|=l,E.memoizedState=xo(1|d,Ru(),f,b)}function kd(l,d,f,b){var E=Xa();b=b===void 0?null:b;var F=E.memoizedState.inst;Na!==null&&b!==null&&js(b,Na.memoizedState.deps)?E.memoizedState=xo(d,F,f,b):(Xt.flags|=l,E.memoizedState=xo(1|d,F,f,b))}function vx(l,d){Hi(8390656,8,l,d)}function Op(l,d){kd(2048,8,l,d)}function jx(l,d){return kd(4,2,l,d)}function Ec(l,d){return kd(4,4,l,d)}function Lp(l,d){if(typeof d=="function"){l=l();var f=d(l);return function(){typeof f=="function"?f():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function Nx(l,d,f){f=f!=null?f.concat([l]):null,kd(4,4,Lp.bind(null,d,l),f)}function wx(){}function Sx(l,d){var f=Xa();d=d===void 0?null:d;var b=f.memoizedState;return d!==null&&js(d,b[1])?b[0]:(f.memoizedState=[l,d],l)}function Mp(l,d){var f=Xa();d=d===void 0?null:d;var b=f.memoizedState;if(d!==null&&js(d,b[1]))return b[0];if(b=l(),Qr){jt(!0);try{l()}finally{jt(!1)}}return f.memoizedState=[b,d],b}function Tc(l,d,f){return f===void 0||(ka&1073741824)!==0?l.memoizedState=d:(l.memoizedState=f,l=Vw(),Xt.lanes|=l,Ld|=l,f)}function Ym(l,d,f,b){return Rs(f,d)?f:ga.current!==null?(l=Tc(l,f,b),Rs(l,d)||(nn=!0),l):(ka&42)===0?(nn=!0,l.memoizedState=f):(l=Vw(),Xt.lanes|=l,Ld|=l,d)}function Iu(l,d,f,b,E){var F=J.p;J.p=F!==0&&8>F?F:8;var le=Y.T,be={};Y.T=be,gb(l,!1,d,f);try{var Me=E(),rt=Y.S;if(rt!==null&&rt(be,Me),Me!==null&&typeof Me=="object"&&typeof Me.then=="function"){var bt=Cp(Me,b);Ax(l,d,bt,Ki(l))}else Ax(l,d,b,Ki(l))}catch(St){Ax(l,d,{then:function(){},status:"rejected",reason:St},Ki())}finally{J.p=F,Y.T=le}}function fo(){}function Pl(l,d,f,b){if(l.tag!==5)throw Error(s(476));var E=po(l).queue;Iu(l,E,d,W,f===null?fo:function(){return zu(l),f(b)})}function po(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:W},next:null};var f={};return d.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:f},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function zu(l){var d=po(l).next.queue;Ax(l,d,{},Ki())}function $u(){return bs(Yx)}function _x(){return Xa().memoizedState}function Rp(){return Xa().memoizedState}function Cx(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var f=Ki();l=pt(f);var b=kt(d,l,f);b!==null&&(Xi(b,d,f),wt(b,d,f)),d={cache:fx()},l.payload=d;return}d=d.return}}function kx(l,d,f){var b=Ki();f={lane:b,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},Ip(l)?Q3(d,f):(f=Mm(l,d,f,b),f!==null&&(Xi(f,l,b),ew(f,d,b)))}function Z3(l,d,f){var b=Ki();Ax(l,d,f,b)}function Ax(l,d,f,b){var E={lane:b,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(Ip(l))Q3(d,E);else{var F=l.alternate;if(l.lanes===0&&(F===null||F.lanes===0)&&(F=d.lastRenderedReducer,F!==null))try{var le=d.lastRenderedState,be=F(le,f);if(E.hasEagerState=!0,E.eagerState=be,Rs(be,le))return _u(l,d,E,0),Pr===null&&Su(),!1}catch{}finally{}if(f=Mm(l,d,E,b),f!==null)return Xi(f,l,b),ew(f,d,b),!0}return!1}function gb(l,d,f,b){if(b={lane:2,revertLane:Kb(),action:b,hasEagerState:!1,eagerState:null,next:null},Ip(l)){if(d)throw Error(s(479))}else d=Mm(l,f,b,2),d!==null&&Xi(d,l,2)}function Ip(l){var d=l.alternate;return l===Xt||d!==null&&d===Xt}function Q3(l,d){Zr=wr=!0;var f=l.pending;f===null?d.next=d:(d.next=f.next,f.next=d),l.pending=d}function ew(l,d,f){if((f&4194048)!==0){var b=d.lanes;b&=l.pendingLanes,f|=b,d.lanes=f,Mt(l,f)}}var zp={readContext:bs,use:nr,useCallback:ha,useContext:ha,useEffect:ha,useImperativeHandle:ha,useLayoutEffect:ha,useInsertionEffect:ha,useMemo:ha,useReducer:ha,useRef:ha,useState:ha,useDebugValue:ha,useDeferredValue:ha,useTransition:ha,useSyncExternalStore:ha,useId:ha,useHostTransitionStatus:ha,useFormState:ha,useActionState:ha,useOptimistic:ha,useMemoCache:ha,useCacheRefresh:ha},tw={readContext:bs,use:nr,useCallback:function(l,d){return yr().memoizedState=[l,d===void 0?null:d],l},useContext:bs,useEffect:vx,useImperativeHandle:function(l,d,f){f=f!=null?f.concat([l]):null,Hi(4194308,4,Lp.bind(null,d,l),f)},useLayoutEffect:function(l,d){return Hi(4194308,4,l,d)},useInsertionEffect:function(l,d){Hi(4,2,l,d)},useMemo:function(l,d){var f=yr();d=d===void 0?null:d;var b=l();if(Qr){jt(!0);try{l()}finally{jt(!1)}}return f.memoizedState=[b,d],b},useReducer:function(l,d,f){var b=yr();if(f!==void 0){var E=f(d);if(Qr){jt(!0);try{f(d)}finally{jt(!1)}}}else E=d;return b.memoizedState=b.baseState=E,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:E},b.queue=l,l=l.dispatch=kx.bind(null,Xt,l),[b.memoizedState,l]},useRef:function(l){var d=yr();return l={current:l},d.memoizedState=l},useState:function(l){l=Lu(l);var d=l.queue,f=Z3.bind(null,Xt,d);return d.dispatch=f,[l.memoizedState,f]},useDebugValue:wx,useDeferredValue:function(l,d){var f=yr();return Tc(f,l,d)},useTransition:function(){var l=Lu(!1);return l=Iu.bind(null,Xt,l.queue,!0,!1),yr().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,f){var b=Xt,E=yr();if(ar){if(f===void 0)throw Error(s(407));f=f()}else{if(f=d(),Pr===null)throw Error(s(349));(Ja&124)!==0||Um(b,d,f)}E.memoizedState=f;var F={value:f,getSnapshot:d};return E.queue=F,vx(Sd.bind(null,b,F,l),[l]),b.flags|=2048,xo(9,Ru(),Ou.bind(null,b,F,f,d),null),f},useId:function(){var l=yr(),d=Pr.identifierPrefix;if(ar){var f=oo,b=lo;f=(b&~(1<<32-xt(b)-1)).toString(32)+f,d=""+d+"R"+f,f=Wr++,0<f&&(d+="H"+f.toString(32)),d+=""}else f=Hr++,d=""+d+"r"+f.toString(32)+"";return l.memoizedState=d},useHostTransitionStatus:$u,useFormState:Mu,useActionState:Mu,useOptimistic:function(l){var d=yr();d.memoizedState=d.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=f,d=gb.bind(null,Xt,!0,f),f.dispatch=d,[l,d]},useMemoCache:wn,useCacheRefresh:function(){return yr().memoizedState=Cx.bind(null,Xt)}},aw={readContext:bs,use:nr,useCallback:Sx,useContext:bs,useEffect:Op,useImperativeHandle:Nx,useInsertionEffect:jx,useLayoutEffect:Ec,useMemo:Mp,useReducer:Tl,useRef:Hm,useState:function(){return Tl(Ns)},useDebugValue:wx,useDeferredValue:function(l,d){var f=Xa();return Ym(f,Na.memoizedState,l,d)},useTransition:function(){var l=Tl(Ns)[0],d=Xa().memoizedState;return[typeof l=="boolean"?l:Vs(l),d]},useSyncExternalStore:Du,useId:_x,useHostTransitionStatus:$u,useFormState:Wm,useActionState:Wm,useOptimistic:function(l,d){var f=Xa();return ho(f,Na,l,d)},useMemoCache:wn,useCacheRefresh:Rp},PL={readContext:bs,use:nr,useCallback:Sx,useContext:bs,useEffect:Op,useImperativeHandle:Nx,useInsertionEffect:jx,useLayoutEffect:Ec,useMemo:Mp,useReducer:ws,useRef:Hm,useState:function(){return ws(Ns)},useDebugValue:wx,useDeferredValue:function(l,d){var f=Xa();return Na===null?Tc(f,l,d):Ym(f,Na.memoizedState,l,d)},useTransition:function(){var l=ws(Ns)[0],d=Xa().memoizedState;return[typeof l=="boolean"?l:Vs(l),d]},useSyncExternalStore:Du,useId:_x,useHostTransitionStatus:$u,useFormState:Dp,useActionState:Dp,useOptimistic:function(l,d){var f=Xa();return Na!==null?ho(f,Na,l,d):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:wn,useCacheRefresh:Rp},Gm=null,Ex=0;function $p(l){var d=Ex;return Ex+=1,Gm===null&&(Gm=[]),at(Gm,l,d)}function Tx(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function Bp(l,d){throw d.$$typeof===p?Error(s(525)):(l=Object.prototype.toString.call(d),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function rw(l){var d=l._init;return d(l._payload)}function sw(l){function d(Je,Ue){if(l){var et=Je.deletions;et===null?(Je.deletions=[Ue],Je.flags|=16):et.push(Ue)}}function f(Je,Ue){if(!l)return null;for(;Ue!==null;)d(Je,Ue),Ue=Ue.sibling;return null}function b(Je){for(var Ue=new Map;Je!==null;)Je.key!==null?Ue.set(Je.key,Je):Ue.set(Je.index,Je),Je=Je.sibling;return Ue}function E(Je,Ue){return Je=_l(Je,Ue),Je.index=0,Je.sibling=null,Je}function F(Je,Ue,et){return Je.index=et,l?(et=Je.alternate,et!==null?(et=et.index,et<Ue?(Je.flags|=67108866,Ue):et):(Je.flags|=67108866,Ue)):(Je.flags|=1048576,Ue)}function le(Je){return l&&Je.alternate===null&&(Je.flags|=67108866),Je}function be(Je,Ue,et,vt){return Ue===null||Ue.tag!==6?(Ue=Im(et,Je.mode,vt),Ue.return=Je,Ue):(Ue=E(Ue,et),Ue.return=Je,Ue)}function Me(Je,Ue,et,vt){var Jt=et.type;return Jt===v?bt(Je,Ue,et.props.children,vt,et.key):Ue!==null&&(Ue.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===M&&rw(Jt)===Ue.type)?(Ue=E(Ue,et.props),Tx(Ue,et),Ue.return=Je,Ue):(Ue=Sc(et.type,et.key,et.props,null,Je.mode,vt),Tx(Ue,et),Ue.return=Je,Ue)}function rt(Je,Ue,et,vt){return Ue===null||Ue.tag!==4||Ue.stateNode.containerInfo!==et.containerInfo||Ue.stateNode.implementation!==et.implementation?(Ue=ku(et,Je.mode,vt),Ue.return=Je,Ue):(Ue=E(Ue,et.children||[]),Ue.return=Je,Ue)}function bt(Je,Ue,et,vt,Jt){return Ue===null||Ue.tag!==7?(Ue=no(et,Je.mode,vt,Jt),Ue.return=Je,Ue):(Ue=E(Ue,et),Ue.return=Je,Ue)}function St(Je,Ue,et){if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint")return Ue=Im(""+Ue,Je.mode,et),Ue.return=Je,Ue;if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case y:return et=Sc(Ue.type,Ue.key,Ue.props,null,Je.mode,et),Tx(et,Ue),et.return=Je,et;case g:return Ue=ku(Ue,Je.mode,et),Ue.return=Je,Ue;case M:var vt=Ue._init;return Ue=vt(Ue._payload),St(Je,Ue,et)}if(V(Ue)||C(Ue))return Ue=no(Ue,Je.mode,et,null),Ue.return=Je,Ue;if(typeof Ue.then=="function")return St(Je,$p(Ue),et);if(Ue.$$typeof===k)return St(Je,Ho(Je,Ue),et);Bp(Je,Ue)}return null}function st(Je,Ue,et,vt){var Jt=Ue!==null?Ue.key:null;if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return Jt!==null?null:be(Je,Ue,""+et,vt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case y:return et.key===Jt?Me(Je,Ue,et,vt):null;case g:return et.key===Jt?rt(Je,Ue,et,vt):null;case M:return Jt=et._init,et=Jt(et._payload),st(Je,Ue,et,vt)}if(V(et)||C(et))return Jt!==null?null:bt(Je,Ue,et,vt,null);if(typeof et.then=="function")return st(Je,Ue,$p(et),vt);if(et.$$typeof===k)return st(Je,Ue,Ho(Je,et),vt);Bp(Je,et)}return null}function ot(Je,Ue,et,vt,Jt){if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return Je=Je.get(et)||null,be(Ue,Je,""+vt,Jt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case y:return Je=Je.get(vt.key===null?et:vt.key)||null,Me(Ue,Je,vt,Jt);case g:return Je=Je.get(vt.key===null?et:vt.key)||null,rt(Ue,Je,vt,Jt);case M:var za=vt._init;return vt=za(vt._payload),ot(Je,Ue,et,vt,Jt)}if(V(vt)||C(vt))return Je=Je.get(et)||null,bt(Ue,Je,vt,Jt,null);if(typeof vt.then=="function")return ot(Je,Ue,et,$p(vt),Jt);if(vt.$$typeof===k)return ot(Je,Ue,et,Ho(Ue,vt),Jt);Bp(Ue,vt)}return null}function ya(Je,Ue,et,vt){for(var Jt=null,za=null,la=Ue,fa=Ue=0,on=null;la!==null&&fa<et.length;fa++){la.index>fa?(on=la,la=null):on=la.sibling;var rr=st(Je,la,et[fa],vt);if(rr===null){la===null&&(la=on);break}l&&la&&rr.alternate===null&&d(Je,la),Ue=F(rr,Ue,fa),za===null?Jt=rr:za.sibling=rr,za=rr,la=on}if(fa===et.length)return f(Je,la),ar&&Cc(Je,fa),Jt;if(la===null){for(;fa<et.length;fa++)la=St(Je,et[fa],vt),la!==null&&(Ue=F(la,Ue,fa),za===null?Jt=la:za.sibling=la,za=la);return ar&&Cc(Je,fa),Jt}for(la=b(la);fa<et.length;fa++)on=ot(la,Je,fa,et[fa],vt),on!==null&&(l&&on.alternate!==null&&la.delete(on.key===null?fa:on.key),Ue=F(on,Ue,fa),za===null?Jt=on:za.sibling=on,za=on);return l&&la.forEach(function(Ud){return d(Je,Ud)}),ar&&Cc(Je,fa),Jt}function xa(Je,Ue,et,vt){if(et==null)throw Error(s(151));for(var Jt=null,za=null,la=Ue,fa=Ue=0,on=null,rr=et.next();la!==null&&!rr.done;fa++,rr=et.next()){la.index>fa?(on=la,la=null):on=la.sibling;var Ud=st(Je,la,rr.value,vt);if(Ud===null){la===null&&(la=on);break}l&&la&&Ud.alternate===null&&d(Je,la),Ue=F(Ud,Ue,fa),za===null?Jt=Ud:za.sibling=Ud,za=Ud,la=on}if(rr.done)return f(Je,la),ar&&Cc(Je,fa),Jt;if(la===null){for(;!rr.done;fa++,rr=et.next())rr=St(Je,rr.value,vt),rr!==null&&(Ue=F(rr,Ue,fa),za===null?Jt=rr:za.sibling=rr,za=rr);return ar&&Cc(Je,fa),Jt}for(la=b(la);!rr.done;fa++,rr=et.next())rr=ot(la,Je,fa,rr.value,vt),rr!==null&&(l&&rr.alternate!==null&&la.delete(rr.key===null?fa:rr.key),Ue=F(rr,Ue,fa),za===null?Jt=rr:za.sibling=rr,za=rr);return l&&la.forEach(function(DM){return d(Je,DM)}),ar&&Cc(Je,fa),Jt}function vr(Je,Ue,et,vt){if(typeof et=="object"&&et!==null&&et.type===v&&et.key===null&&(et=et.props.children),typeof et=="object"&&et!==null){switch(et.$$typeof){case y:e:{for(var Jt=et.key;Ue!==null;){if(Ue.key===Jt){if(Jt=et.type,Jt===v){if(Ue.tag===7){f(Je,Ue.sibling),vt=E(Ue,et.props.children),vt.return=Je,Je=vt;break e}}else if(Ue.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===M&&rw(Jt)===Ue.type){f(Je,Ue.sibling),vt=E(Ue,et.props),Tx(vt,et),vt.return=Je,Je=vt;break e}f(Je,Ue);break}else d(Je,Ue);Ue=Ue.sibling}et.type===v?(vt=no(et.props.children,Je.mode,vt,et.key),vt.return=Je,Je=vt):(vt=Sc(et.type,et.key,et.props,null,Je.mode,vt),Tx(vt,et),vt.return=Je,Je=vt)}return le(Je);case g:e:{for(Jt=et.key;Ue!==null;){if(Ue.key===Jt)if(Ue.tag===4&&Ue.stateNode.containerInfo===et.containerInfo&&Ue.stateNode.implementation===et.implementation){f(Je,Ue.sibling),vt=E(Ue,et.children||[]),vt.return=Je,Je=vt;break e}else{f(Je,Ue);break}else d(Je,Ue);Ue=Ue.sibling}vt=ku(et,Je.mode,vt),vt.return=Je,Je=vt}return le(Je);case M:return Jt=et._init,et=Jt(et._payload),vr(Je,Ue,et,vt)}if(V(et))return ya(Je,Ue,et,vt);if(C(et)){if(Jt=C(et),typeof Jt!="function")throw Error(s(150));return et=Jt.call(et),xa(Je,Ue,et,vt)}if(typeof et.then=="function")return vr(Je,Ue,$p(et),vt);if(et.$$typeof===k)return vr(Je,Ue,Ho(Je,et),vt);Bp(Je,et)}return typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint"?(et=""+et,Ue!==null&&Ue.tag===6?(f(Je,Ue.sibling),vt=E(Ue,et),vt.return=Je,Je=vt):(f(Je,Ue),vt=Im(et,Je.mode,vt),vt.return=Je,Je=vt),le(Je)):f(Je,Ue)}return function(Je,Ue,et,vt){try{Ex=0;var Jt=vr(Je,Ue,et,vt);return Gm=null,Jt}catch(la){if(la===xe||la===ve)throw la;var za=rn(29,la,null,Je.mode);return za.lanes=vt,za.return=Je,za}finally{}}}var Vm=sw(!0),nw=sw(!1),Dl=oe(null),Yo=null;function Ad(l){var d=l.alternate;G(Ks,Ks.current&1),G(Dl,l),Yo===null&&(d===null||ga.current!==null||d.memoizedState!==null)&&(Yo=l)}function iw(l){if(l.tag===22){if(G(Ks,Ks.current),G(Dl,l),Yo===null){var d=l.alternate;d!==null&&d.memoizedState!==null&&(Yo=l)}}else Ed()}function Ed(){G(Ks,Ks.current),G(Dl,Dl.current)}function Pc(l){q(Dl),Yo===l&&(Yo=null),q(Ks)}var Ks=oe(0);function Fp(l){for(var d=l;d!==null;){if(d.tag===13){var f=d.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||lv(f)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function yb(l,d,f,b){d=l.memoizedState,f=f(b,d),f=f==null?d:h({},d,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var bb={enqueueSetState:function(l,d,f){l=l._reactInternals;var b=Ki(),E=pt(b);E.payload=d,f!=null&&(E.callback=f),d=kt(l,E,b),d!==null&&(Xi(d,l,b),wt(d,l,b))},enqueueReplaceState:function(l,d,f){l=l._reactInternals;var b=Ki(),E=pt(b);E.tag=1,E.payload=d,f!=null&&(E.callback=f),d=kt(l,E,b),d!==null&&(Xi(d,l,b),wt(d,l,b))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var f=Ki(),b=pt(f);b.tag=2,d!=null&&(b.callback=d),d=kt(l,b,f),d!==null&&(Xi(d,l,f),wt(d,l,f))}};function lw(l,d,f,b,E,F,le){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,F,le):d.prototype&&d.prototype.isPureReactComponent?!jl(f,b)||!jl(E,F):!0}function ow(l,d,f,b){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(f,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(f,b),d.state!==l&&bb.enqueueReplaceState(d,d.state,null)}function Bu(l,d){var f=d;if("ref"in d){f={};for(var b in d)b!=="ref"&&(f[b]=d[b])}if(l=l.defaultProps){f===d&&(f=h({},f));for(var E in l)f[E]===void 0&&(f[E]=l[E])}return f}var qp=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function cw(l){qp(l)}function dw(l){console.error(l)}function uw(l){qp(l)}function Up(l,d){try{var f=l.onUncaughtError;f(d.value,{componentStack:d.stack})}catch(b){setTimeout(function(){throw b})}}function mw(l,d,f){try{var b=l.onCaughtError;b(f.value,{componentStack:f.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function vb(l,d,f){return f=pt(f),f.tag=3,f.payload={element:null},f.callback=function(){Up(l,d)},f}function hw(l){return l=pt(l),l.tag=3,l}function xw(l,d,f,b){var E=f.type.getDerivedStateFromError;if(typeof E=="function"){var F=b.value;l.payload=function(){return E(F)},l.callback=function(){mw(d,f,b)}}var le=f.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(l.callback=function(){mw(d,f,b),typeof E!="function"&&(Md===null?Md=new Set([this]):Md.add(this));var be=b.stack;this.componentDidCatch(b.value,{componentStack:be!==null?be:""})})}function DL(l,d,f,b,E){if(f.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(d=f.alternate,d!==null&&wd(d,f,E,!0),f=Dl.current,f!==null){switch(f.tag){case 13:return Yo===null?Wb():f.alternate===null&&hs===0&&(hs=3),f.flags&=-257,f.flags|=65536,f.lanes=E,b===je?f.flags|=16384:(d=f.updateQueue,d===null?f.updateQueue=new Set([b]):d.add(b),Yb(l,b,E)),!1;case 22:return f.flags|=65536,b===je?f.flags|=16384:(d=f.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([b])},f.updateQueue=d):(f=d.retryQueue,f===null?d.retryQueue=new Set([b]):f.add(b)),Yb(l,b,E)),!1}throw Error(s(435,f.tag))}return Yb(l,b,E),Wb(),!1}if(ar)return d=Dl.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=E,b!==xx&&(l=Error(s(422),{cause:b}),Nd(ii(l,f)))):(b!==xx&&(d=Error(s(423),{cause:b}),Nd(ii(d,f))),l=l.current.alternate,l.flags|=65536,E&=-E,l.lanes|=E,b=ii(b,f),E=vb(l.stateNode,b,E),ea(l,E),hs!==4&&(hs=2)),!1;var F=Error(s(520),{cause:b});if(F=ii(F,f),Ix===null?Ix=[F]:Ix.push(F),hs!==4&&(hs=2),d===null)return!0;b=ii(b,f),f=d;do{switch(f.tag){case 3:return f.flags|=65536,l=E&-E,f.lanes|=l,l=vb(f.stateNode,b,l),ea(f,l),!1;case 1:if(d=f.type,F=f.stateNode,(f.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Md===null||!Md.has(F))))return f.flags|=65536,E&=-E,f.lanes|=E,E=hw(E),xw(E,l,f,b),ea(f,E),!1}f=f.return}while(f!==null);return!1}var fw=Error(s(461)),nn=!1;function Sn(l,d,f,b){d.child=l===null?nw(d,null,f,b):Vm(d,l.child,f,b)}function pw(l,d,f,b,E){f=f.render;var F=d.ref;if("ref"in b){var le={};for(var be in b)be!=="ref"&&(le[be]=b[be])}else le=b;return El(d),b=di(l,d,f,le,F,E),be=es(),l!==null&&!nn?(Nn(l,d,E),Dc(l,d,E)):(ar&&be&&Au(d),d.flags|=1,Sn(l,d,b,E),d.child)}function gw(l,d,f,b,E){if(l===null){var F=f.type;return typeof F=="function"&&!vd(F)&&F.defaultProps===void 0&&f.compare===null?(d.tag=15,d.type=F,yw(l,d,F,b,E)):(l=Sc(f.type,null,b,d,d.mode,E),l.ref=d.ref,l.return=d,d.child=l)}if(F=l.child,!Ab(l,E)){var le=F.memoizedProps;if(f=f.compare,f=f!==null?f:jl,f(le,b)&&l.ref===d.ref)return Dc(l,d,E)}return d.flags|=1,l=_l(F,b),l.ref=d.ref,l.return=d,d.child=l}function yw(l,d,f,b,E){if(l!==null){var F=l.memoizedProps;if(jl(F,b)&&l.ref===d.ref)if(nn=!1,d.pendingProps=b=F,Ab(l,E))(l.flags&131072)!==0&&(nn=!0);else return d.lanes=l.lanes,Dc(l,d,E)}return jb(l,d,f,b,E)}function bw(l,d,f){var b=d.pendingProps,E=b.children,F=l!==null?l.memoizedState:null;if(b.mode==="hidden"){if((d.flags&128)!==0){if(b=F!==null?F.baseLanes|f:f,l!==null){for(E=d.child=l.child,F=0;E!==null;)F=F|E.lanes|E.childLanes,E=E.sibling;d.childLanes=F&~b}else d.childLanes=0,d.child=null;return vw(l,d,b,f)}if((f&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&ee(d,F!==null?F.cachePool:null),F!==null?Rt(d,F):Ir(),iw(d);else return d.lanes=d.childLanes=536870912,vw(l,d,F!==null?F.baseLanes|f:f,f)}else F!==null?(ee(d,F.cachePool),Rt(d,F),Ed(),d.memoizedState=null):(l!==null&&ee(d,null),Ir(),Ed());return Sn(l,d,E,f),d.child}function vw(l,d,f,b){var E=K();return E=E===null?null:{parent:vs._currentValue,pool:E},d.memoizedState={baseLanes:f,cachePool:E},l!==null&&ee(d,null),Ir(),iw(d),l!==null&&wd(l,d,b,!0),null}function Wp(l,d){var f=d.ref;if(f===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(s(284));(l===null||l.ref!==f)&&(d.flags|=4194816)}}function jb(l,d,f,b,E){return El(d),f=di(l,d,f,b,void 0,E),b=es(),l!==null&&!nn?(Nn(l,d,E),Dc(l,d,E)):(ar&&b&&Au(d),d.flags|=1,Sn(l,d,f,E),d.child)}function jw(l,d,f,b,E,F){return El(d),d.updateQueue=null,f=jn(d,b,f,E),Yr(l),b=es(),l!==null&&!nn?(Nn(l,d,F),Dc(l,d,F)):(ar&&b&&Au(d),d.flags|=1,Sn(l,d,f,F),d.child)}function Nw(l,d,f,b,E){if(El(d),d.stateNode===null){var F=Is,le=f.contextType;typeof le=="object"&&le!==null&&(F=bs(le)),F=new f(b,F),d.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,F.updater=bb,d.stateNode=F,F._reactInternals=d,F=d.stateNode,F.props=b,F.state=d.memoizedState,F.refs={},tt(d),le=f.contextType,F.context=typeof le=="object"&&le!==null?bs(le):Is,F.state=d.memoizedState,le=f.getDerivedStateFromProps,typeof le=="function"&&(yb(d,f,le,b),F.state=d.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(le=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),le!==F.state&&bb.enqueueReplaceState(F,F.state,null),Ut(d,b,F,E),ba(),F.state=d.memoizedState),typeof F.componentDidMount=="function"&&(d.flags|=4194308),b=!0}else if(l===null){F=d.stateNode;var be=d.memoizedProps,Me=Bu(f,be);F.props=Me;var rt=F.context,bt=f.contextType;le=Is,typeof bt=="object"&&bt!==null&&(le=bs(bt));var St=f.getDerivedStateFromProps;bt=typeof St=="function"||typeof F.getSnapshotBeforeUpdate=="function",be=d.pendingProps!==be,bt||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(be||rt!==le)&&ow(d,F,b,le),ht=!1;var st=d.memoizedState;F.state=st,Ut(d,b,F,E),ba(),rt=d.memoizedState,be||st!==rt||ht?(typeof St=="function"&&(yb(d,f,St,b),rt=d.memoizedState),(Me=ht||lw(d,f,Me,b,st,rt,le))?(bt||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(d.flags|=4194308)):(typeof F.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=rt),F.props=b,F.state=rt,F.context=le,b=Me):(typeof F.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{F=d.stateNode,gt(l,d),le=d.memoizedProps,bt=Bu(f,le),F.props=bt,St=d.pendingProps,st=F.context,rt=f.contextType,Me=Is,typeof rt=="object"&&rt!==null&&(Me=bs(rt)),be=f.getDerivedStateFromProps,(rt=typeof be=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(le!==St||st!==Me)&&ow(d,F,b,Me),ht=!1,st=d.memoizedState,F.state=st,Ut(d,b,F,E),ba();var ot=d.memoizedState;le!==St||st!==ot||ht||l!==null&&l.dependencies!==null&&Fm(l.dependencies)?(typeof be=="function"&&(yb(d,f,be,b),ot=d.memoizedState),(bt=ht||lw(d,f,bt,b,st,ot,Me)||l!==null&&l.dependencies!==null&&Fm(l.dependencies))?(rt||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(b,ot,Me),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(b,ot,Me)),typeof F.componentDidUpdate=="function"&&(d.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof F.componentDidUpdate!="function"||le===l.memoizedProps&&st===l.memoizedState||(d.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||le===l.memoizedProps&&st===l.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=ot),F.props=b,F.state=ot,F.context=Me,b=bt):(typeof F.componentDidUpdate!="function"||le===l.memoizedProps&&st===l.memoizedState||(d.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||le===l.memoizedProps&&st===l.memoizedState||(d.flags|=1024),b=!1)}return F=b,Wp(l,d),b=(d.flags&128)!==0,F||b?(F=d.stateNode,f=b&&typeof f.getDerivedStateFromError!="function"?null:F.render(),d.flags|=1,l!==null&&b?(d.child=Vm(d,l.child,null,E),d.child=Vm(d,null,f,E)):Sn(l,d,f,E),d.memoizedState=F.state,l=d.child):l=Dc(l,d,E),l}function ww(l,d,f,b){return ci(),d.flags|=256,Sn(l,d,f,b),d.child}var Nb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wb(l){return{baseLanes:l,cachePool:de()}}function Sb(l,d,f){return l=l!==null?l.childLanes&~f:0,d&&(l|=Ol),l}function Sw(l,d,f){var b=d.pendingProps,E=!1,F=(d.flags&128)!==0,le;if((le=F)||(le=l!==null&&l.memoizedState===null?!1:(Ks.current&2)!==0),le&&(E=!0,d.flags&=-129),le=(d.flags&32)!==0,d.flags&=-33,l===null){if(ar){if(E?Ad(d):Ed(),ar){var be=Ur,Me;if(Me=be){e:{for(Me=be,be=Cl;Me.nodeType!==8;){if(!be){be=null;break e}if(Me=yo(Me.nextSibling),Me===null){be=null;break e}}be=Me}be!==null?(d.memoizedState={dehydrated:be,treeContext:_c!==null?{id:lo,overflow:oo}:null,retryLane:536870912,hydrationErrors:null},Me=rn(18,null,null,0),Me.stateNode=be,Me.return=d,d.child=Me,ys=d,Ur=null,Me=!0):Me=!1}Me||kc(d)}if(be=d.memoizedState,be!==null&&(be=be.dehydrated,be!==null))return lv(be)?d.lanes=32:d.lanes=536870912,null;Pc(d)}return be=b.children,b=b.fallback,E?(Ed(),E=d.mode,be=Hp({mode:"hidden",children:be},E),b=no(b,E,f,null),be.return=d,b.return=d,be.sibling=b,d.child=be,E=d.child,E.memoizedState=wb(f),E.childLanes=Sb(l,le,f),d.memoizedState=Nb,b):(Ad(d),_b(d,be))}if(Me=l.memoizedState,Me!==null&&(be=Me.dehydrated,be!==null)){if(F)d.flags&256?(Ad(d),d.flags&=-257,d=Cb(l,d,f)):d.memoizedState!==null?(Ed(),d.child=l.child,d.flags|=128,d=null):(Ed(),E=b.fallback,be=d.mode,b=Hp({mode:"visible",children:b.children},be),E=no(E,be,f,null),E.flags|=2,b.return=d,E.return=d,b.sibling=E,d.child=b,Vm(d,l.child,null,f),b=d.child,b.memoizedState=wb(f),b.childLanes=Sb(l,le,f),d.memoizedState=Nb,d=E);else if(Ad(d),lv(be)){if(le=be.nextSibling&&be.nextSibling.dataset,le)var rt=le.dgst;le=rt,b=Error(s(419)),b.stack="",b.digest=le,Nd({value:b,source:null,stack:null}),d=Cb(l,d,f)}else if(nn||wd(l,d,f,!1),le=(f&l.childLanes)!==0,nn||le){if(le=Pr,le!==null&&(b=f&-f,b=(b&42)!==0?1:oa(b),b=(b&(le.suspendedLanes|f))!==0?0:b,b!==0&&b!==Me.retryLane))throw Me.retryLane=b,Nc(l,b),Xi(le,l,b),fw;be.data==="$?"||Wb(),d=Cb(l,d,f)}else be.data==="$?"?(d.flags|=192,d.child=l.child,d=null):(l=Me.treeContext,Ur=yo(be.nextSibling),ys=d,ar=!0,Uo=null,Cl=!1,l!==null&&(ki[oi++]=lo,ki[oi++]=oo,ki[oi++]=_c,lo=l.id,oo=l.overflow,_c=d),d=_b(d,b.children),d.flags|=4096);return d}return E?(Ed(),E=b.fallback,be=d.mode,Me=l.child,rt=Me.sibling,b=_l(Me,{mode:"hidden",children:b.children}),b.subtreeFlags=Me.subtreeFlags&65011712,rt!==null?E=_l(rt,E):(E=no(E,be,f,null),E.flags|=2),E.return=d,b.return=d,b.sibling=E,d.child=b,b=E,E=d.child,be=l.child.memoizedState,be===null?be=wb(f):(Me=be.cachePool,Me!==null?(rt=vs._currentValue,Me=Me.parent!==rt?{parent:rt,pool:rt}:Me):Me=de(),be={baseLanes:be.baseLanes|f,cachePool:Me}),E.memoizedState=be,E.childLanes=Sb(l,le,f),d.memoizedState=Nb,b):(Ad(d),f=l.child,l=f.sibling,f=_l(f,{mode:"visible",children:b.children}),f.return=d,f.sibling=null,l!==null&&(le=d.deletions,le===null?(d.deletions=[l],d.flags|=16):le.push(l)),d.child=f,d.memoizedState=null,f)}function _b(l,d){return d=Hp({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function Hp(l,d){return l=rn(22,l,null,d),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function Cb(l,d,f){return Vm(d,l.child,null,f),l=_b(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function _w(l,d,f){l.lanes|=d;var b=l.alternate;b!==null&&(b.lanes|=d),$m(l.return,d,f)}function kb(l,d,f,b,E){var F=l.memoizedState;F===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:f,tailMode:E}:(F.isBackwards=d,F.rendering=null,F.renderingStartTime=0,F.last=b,F.tail=f,F.tailMode=E)}function Cw(l,d,f){var b=d.pendingProps,E=b.revealOrder,F=b.tail;if(Sn(l,d,b.children,f),b=Ks.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&_w(l,f,d);else if(l.tag===19)_w(l,f,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}b&=1}switch(G(Ks,b),E){case"forwards":for(f=d.child,E=null;f!==null;)l=f.alternate,l!==null&&Fp(l)===null&&(E=f),f=f.sibling;f=E,f===null?(E=d.child,d.child=null):(E=f.sibling,f.sibling=null),kb(d,!1,E,f,F);break;case"backwards":for(f=null,E=d.child,d.child=null;E!==null;){if(l=E.alternate,l!==null&&Fp(l)===null){d.child=E;break}l=E.sibling,E.sibling=f,f=E,E=l}kb(d,!0,f,null,F);break;case"together":kb(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Dc(l,d,f){if(l!==null&&(d.dependencies=l.dependencies),Ld|=d.lanes,(f&d.childLanes)===0)if(l!==null){if(wd(l,d,f,!1),(f&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(s(153));if(d.child!==null){for(l=d.child,f=_l(l,l.pendingProps),d.child=f,f.return=d;l.sibling!==null;)l=l.sibling,f=f.sibling=_l(l,l.pendingProps),f.return=d;f.sibling=null}return d.child}function Ab(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Fm(l)))}function OL(l,d,f){switch(d.tag){case 3:he(d,d.stateNode.containerInfo),Wo(d,vs,l.memoizedState.cache),ci();break;case 27:case 5:me(d);break;case 4:he(d,d.stateNode.containerInfo);break;case 10:Wo(d,d.type,d.memoizedProps.value);break;case 13:var b=d.memoizedState;if(b!==null)return b.dehydrated!==null?(Ad(d),d.flags|=128,null):(f&d.child.childLanes)!==0?Sw(l,d,f):(Ad(d),l=Dc(l,d,f),l!==null?l.sibling:null);Ad(d);break;case 19:var E=(l.flags&128)!==0;if(b=(f&d.childLanes)!==0,b||(wd(l,d,f,!1),b=(f&d.childLanes)!==0),E){if(b)return Cw(l,d,f);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),G(Ks,Ks.current),b)break;return null;case 22:case 23:return d.lanes=0,bw(l,d,f);case 24:Wo(d,vs,l.memoizedState.cache)}return Dc(l,d,f)}function kw(l,d,f){if(l!==null)if(l.memoizedProps!==d.pendingProps)nn=!0;else{if(!Ab(l,f)&&(d.flags&128)===0)return nn=!1,OL(l,d,f);nn=(l.flags&131072)!==0}else nn=!1,ar&&(d.flags&1048576)!==0&&jp(d,zm,d.index);switch(d.lanes=0,d.tag){case 16:e:{l=d.pendingProps;var b=d.elementType,E=b._init;if(b=E(b._payload),d.type=b,typeof b=="function")vd(b)?(l=Bu(b,l),d.tag=1,d=Nw(null,d,b,l,f)):(d.tag=0,d=jb(null,d,b,l,f));else{if(b!=null){if(E=b.$$typeof,E===R){d.tag=11,d=pw(null,d,b,l,f);break e}else if(E===A){d.tag=14,d=gw(null,d,b,l,f);break e}}throw d=H(b)||b,Error(s(306,d,""))}}return d;case 0:return jb(l,d,d.type,d.pendingProps,f);case 1:return b=d.type,E=Bu(b,d.pendingProps),Nw(l,d,b,E,f);case 3:e:{if(he(d,d.stateNode.containerInfo),l===null)throw Error(s(387));b=d.pendingProps;var F=d.memoizedState;E=F.element,gt(l,d),Ut(d,b,null,f);var le=d.memoizedState;if(b=le.cache,Wo(d,vs,b),b!==F.cache&&Bm(d,[vs],f,!0),ba(),b=le.element,F.isDehydrated)if(F={element:b,isDehydrated:!1,cache:le.cache},d.updateQueue.baseState=F,d.memoizedState=F,d.flags&256){d=ww(l,d,b,f);break e}else if(b!==E){E=ii(Error(s(424)),d),Nd(E),d=ww(l,d,b,f);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Ur=yo(l.firstChild),ys=d,ar=!0,Uo=null,Cl=!0,f=nw(d,null,b,f),d.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(ci(),b===E){d=Dc(l,d,f);break e}Sn(l,d,b,f)}d=d.child}return d;case 26:return Wp(l,d),l===null?(f=P4(d.type,null,d.pendingProps,null))?d.memoizedState=f:ar||(f=d.type,l=d.pendingProps,b=n0(Q.current).createElement(f),b[Ye]=d,b[Et]=l,Cn(b,f,l),Ra(b),d.stateNode=b):d.memoizedState=P4(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return me(d),l===null&&ar&&(b=d.stateNode=A4(d.type,d.pendingProps,Q.current),ys=d,Cl=!0,E=Ur,zd(d.type)?(ov=E,Ur=yo(b.firstChild)):Ur=E),Sn(l,d,d.pendingProps.children,f),Wp(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&ar&&((E=b=Ur)&&(b=lM(b,d.type,d.pendingProps,Cl),b!==null?(d.stateNode=b,ys=d,Ur=yo(b.firstChild),Cl=!1,E=!0):E=!1),E||kc(d)),me(d),E=d.type,F=d.pendingProps,le=l!==null?l.memoizedProps:null,b=F.children,sv(E,F)?b=null:le!==null&&sv(E,le)&&(d.flags|=32),d.memoizedState!==null&&(E=di(l,d,ur,null,null,f),Yx._currentValue=E),Wp(l,d),Sn(l,d,b,f),d.child;case 6:return l===null&&ar&&((l=f=Ur)&&(f=oM(f,d.pendingProps,Cl),f!==null?(d.stateNode=f,ys=d,Ur=null,l=!0):l=!1),l||kc(d)),null;case 13:return Sw(l,d,f);case 4:return he(d,d.stateNode.containerInfo),b=d.pendingProps,l===null?d.child=Vm(d,null,b,f):Sn(l,d,b,f),d.child;case 11:return pw(l,d,d.type,d.pendingProps,f);case 7:return Sn(l,d,d.pendingProps,f),d.child;case 8:return Sn(l,d,d.pendingProps.children,f),d.child;case 12:return Sn(l,d,d.pendingProps.children,f),d.child;case 10:return b=d.pendingProps,Wo(d,d.type,b.value),Sn(l,d,b.children,f),d.child;case 9:return E=d.type._context,b=d.pendingProps.children,El(d),E=bs(E),b=b(E),d.flags|=1,Sn(l,d,b,f),d.child;case 14:return gw(l,d,d.type,d.pendingProps,f);case 15:return yw(l,d,d.type,d.pendingProps,f);case 19:return Cw(l,d,f);case 31:return b=d.pendingProps,f=d.mode,b={mode:b.mode,children:b.children},l===null?(f=Hp(b,f),f.ref=d.ref,d.child=f,f.return=d,d=f):(f=_l(l.child,b),f.ref=d.ref,d.child=f,f.return=d,d=f),d;case 22:return bw(l,d,f);case 24:return El(d),b=bs(vs),l===null?(E=K(),E===null&&(E=Pr,F=fx(),E.pooledCache=F,F.refCount++,F!==null&&(E.pooledCacheLanes|=f),E=F),d.memoizedState={parent:b,cache:E},tt(d),Wo(d,vs,E)):((l.lanes&f)!==0&&(gt(l,d),Ut(d,null,null,f),ba()),E=l.memoizedState,F=d.memoizedState,E.parent!==b?(E={parent:b,cache:b},d.memoizedState=E,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=E),Wo(d,vs,b)):(b=F.cache,Wo(d,vs,b),b!==E.cache&&Bm(d,[vs],f,!0))),Sn(l,d,d.pendingProps.children,f),d.child;case 29:throw d.pendingProps}throw Error(s(156,d.tag))}function Oc(l){l.flags|=4}function Aw(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!R4(d)){if(d=Dl.current,d!==null&&((Ja&4194048)===Ja?Yo!==null:(Ja&62914560)!==Ja&&(Ja&536870912)===0||d!==Yo))throw Se=je,ge;l.flags|=8192}}function Yp(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?lt():536870912,l.lanes|=d,Zm|=d)}function Px(l,d){if(!ar)switch(l.tailMode){case"hidden":d=l.tail;for(var f=null;d!==null;)d.alternate!==null&&(f=d),d=d.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var b=null;f!==null;)f.alternate!==null&&(b=f),f=f.sibling;b===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function ts(l){var d=l.alternate!==null&&l.alternate.child===l.child,f=0,b=0;if(d)for(var E=l.child;E!==null;)f|=E.lanes|E.childLanes,b|=E.subtreeFlags&65011712,b|=E.flags&65011712,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)f|=E.lanes|E.childLanes,b|=E.subtreeFlags,b|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=b,l.childLanes=f,d}function LL(l,d,f){var b=d.pendingProps;switch(Eu(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ts(d),null;case 1:return ts(d),null;case 3:return f=d.stateNode,b=null,l!==null&&(b=l.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),Al(vs),ne(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(vn(d)?Oc(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,wp())),ts(d),null;case 26:return f=d.memoizedState,l===null?(Oc(d),f!==null?(ts(d),Aw(d,f)):(ts(d),d.flags&=-16777217)):f?f!==l.memoizedState?(Oc(d),ts(d),Aw(d,f)):(ts(d),d.flags&=-16777217):(l.memoizedProps!==b&&Oc(d),ts(d),d.flags&=-16777217),null;case 27:pe(d),f=Q.current;var E=d.type;if(l!==null&&d.stateNode!=null)l.memoizedProps!==b&&Oc(d);else{if(!b){if(d.stateNode===null)throw Error(s(166));return ts(d),null}l=z.current,vn(d)?Np(d):(l=A4(E,b,f),d.stateNode=l,Oc(d))}return ts(d),null;case 5:if(pe(d),f=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==b&&Oc(d);else{if(!b){if(d.stateNode===null)throw Error(s(166));return ts(d),null}if(l=z.current,vn(d))Np(d);else{switch(E=n0(Q.current),l){case 1:l=E.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:l=E.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":l=E.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":l=E.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":l=E.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof b.is=="string"?E.createElement("select",{is:b.is}):E.createElement("select"),b.multiple?l.multiple=!0:b.size&&(l.size=b.size);break;default:l=typeof b.is=="string"?E.createElement(f,{is:b.is}):E.createElement(f)}}l[Ye]=d,l[Et]=b;e:for(E=d.child;E!==null;){if(E.tag===5||E.tag===6)l.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===d)break e;for(;E.sibling===null;){if(E.return===null||E.return===d)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}d.stateNode=l;e:switch(Cn(l,f,b),f){case"button":case"input":case"select":case"textarea":l=!!b.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Oc(d)}}return ts(d),d.flags&=-16777217,null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==b&&Oc(d);else{if(typeof b!="string"&&d.stateNode===null)throw Error(s(166));if(l=Q.current,vn(d)){if(l=d.stateNode,f=d.memoizedProps,b=null,E=ys,E!==null)switch(E.tag){case 27:case 5:b=E.memoizedProps}l[Ye]=d,l=!!(l.nodeValue===f||b!==null&&b.suppressHydrationWarning===!0||j4(l.nodeValue,f)),l||kc(d)}else l=n0(l).createTextNode(b),l[Ye]=d,d.stateNode=l}return ts(d),null;case 13:if(b=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(E=vn(d),b!==null&&b.dehydrated!==null){if(l===null){if(!E)throw Error(s(318));if(E=d.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(s(317));E[Ye]=d}else ci(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;ts(d),E=!1}else E=wp(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=E),E=!0;if(!E)return d.flags&256?(Pc(d),d):(Pc(d),null)}if(Pc(d),(d.flags&128)!==0)return d.lanes=f,d;if(f=b!==null,l=l!==null&&l.memoizedState!==null,f){b=d.child,E=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(E=b.alternate.memoizedState.cachePool.pool);var F=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(F=b.memoizedState.cachePool.pool),F!==E&&(b.flags|=2048)}return f!==l&&f&&(d.child.flags|=8192),Yp(d,d.updateQueue),ts(d),null;case 4:return ne(),l===null&&Qb(d.stateNode.containerInfo),ts(d),null;case 10:return Al(d.type),ts(d),null;case 19:if(q(Ks),E=d.memoizedState,E===null)return ts(d),null;if(b=(d.flags&128)!==0,F=E.rendering,F===null)if(b)Px(E,!1);else{if(hs!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(F=Fp(l),F!==null){for(d.flags|=128,Px(E,!1),l=F.updateQueue,d.updateQueue=l,Yp(d,l),d.subtreeFlags=0,l=f,f=d.child;f!==null;)Cu(f,l),f=f.sibling;return G(Ks,Ks.current&1|2),d.child}l=l.sibling}E.tail!==null&&ce()>Kp&&(d.flags|=128,b=!0,Px(E,!1),d.lanes=4194304)}else{if(!b)if(l=Fp(F),l!==null){if(d.flags|=128,b=!0,l=l.updateQueue,d.updateQueue=l,Yp(d,l),Px(E,!0),E.tail===null&&E.tailMode==="hidden"&&!F.alternate&&!ar)return ts(d),null}else 2*ce()-E.renderingStartTime>Kp&&f!==536870912&&(d.flags|=128,b=!0,Px(E,!1),d.lanes=4194304);E.isBackwards?(F.sibling=d.child,d.child=F):(l=E.last,l!==null?l.sibling=F:d.child=F,E.last=F)}return E.tail!==null?(d=E.tail,E.rendering=d,E.tail=d.sibling,E.renderingStartTime=ce(),d.sibling=null,l=Ks.current,G(Ks,b?l&1|2:l&1),d):(ts(d),null);case 22:case 23:return Pc(d),va(),b=d.memoizedState!==null,l!==null?l.memoizedState!==null!==b&&(d.flags|=8192):b&&(d.flags|=8192),b?(f&536870912)!==0&&(d.flags&128)===0&&(ts(d),d.subtreeFlags&6&&(d.flags|=8192)):ts(d),f=d.updateQueue,f!==null&&Yp(d,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==f&&(d.flags|=2048),l!==null&&q(O),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),d.memoizedState.cache!==f&&(d.flags|=2048),Al(vs),ts(d),null;case 25:return null;case 30:return null}throw Error(s(156,d.tag))}function ML(l,d){switch(Eu(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Al(vs),ne(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return pe(d),null;case 13:if(Pc(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(s(340));ci()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return q(Ks),null;case 4:return ne(),null;case 10:return Al(d.type),null;case 22:case 23:return Pc(d),va(),l!==null&&q(O),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return Al(vs),null;case 25:return null;default:return null}}function Ew(l,d){switch(Eu(d),d.tag){case 3:Al(vs),ne();break;case 26:case 27:case 5:pe(d);break;case 4:ne();break;case 13:Pc(d);break;case 19:q(Ks);break;case 10:Al(d.type);break;case 22:case 23:Pc(d),va(),l!==null&&q(O);break;case 24:Al(vs)}}function Dx(l,d){try{var f=d.updateQueue,b=f!==null?f.lastEffect:null;if(b!==null){var E=b.next;f=E;do{if((f.tag&l)===l){b=void 0;var F=f.create,le=f.inst;b=F(),le.destroy=b}f=f.next}while(f!==E)}}catch(be){Sr(d,d.return,be)}}function Td(l,d,f){try{var b=d.updateQueue,E=b!==null?b.lastEffect:null;if(E!==null){var F=E.next;b=F;do{if((b.tag&l)===l){var le=b.inst,be=le.destroy;if(be!==void 0){le.destroy=void 0,E=d;var Me=f,rt=be;try{rt()}catch(bt){Sr(E,Me,bt)}}}b=b.next}while(b!==F)}}catch(bt){Sr(d,d.return,bt)}}function Tw(l){var d=l.updateQueue;if(d!==null){var f=l.stateNode;try{ms(d,f)}catch(b){Sr(l,l.return,b)}}}function Pw(l,d,f){f.props=Bu(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(b){Sr(l,d,b)}}function Ox(l,d){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var b=l.stateNode;break;case 30:b=l.stateNode;break;default:b=l.stateNode}typeof f=="function"?l.refCleanup=f(b):f.current=b}}catch(E){Sr(l,d,E)}}function Go(l,d){var f=l.ref,b=l.refCleanup;if(f!==null)if(typeof b=="function")try{b()}catch(E){Sr(l,d,E)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(E){Sr(l,d,E)}else f.current=null}function Dw(l){var d=l.type,f=l.memoizedProps,b=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":f.autoFocus&&b.focus();break e;case"img":f.src?b.src=f.src:f.srcSet&&(b.srcset=f.srcSet)}}catch(E){Sr(l,l.return,E)}}function Eb(l,d,f){try{var b=l.stateNode;aM(b,l.type,f,d),b[Et]=d}catch(E){Sr(l,l.return,E)}}function Ow(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&zd(l.type)||l.tag===4}function Tb(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Ow(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&zd(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Pb(l,d,f){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,d):(d=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,d.appendChild(l),f=f._reactRootContainer,f!=null||d.onclick!==null||(d.onclick=s0));else if(b!==4&&(b===27&&zd(l.type)&&(f=l.stateNode,d=null),l=l.child,l!==null))for(Pb(l,d,f),l=l.sibling;l!==null;)Pb(l,d,f),l=l.sibling}function Gp(l,d,f){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?f.insertBefore(l,d):f.appendChild(l);else if(b!==4&&(b===27&&zd(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(Gp(l,d,f),l=l.sibling;l!==null;)Gp(l,d,f),l=l.sibling}function Lw(l){var d=l.stateNode,f=l.memoizedProps;try{for(var b=l.type,E=d.attributes;E.length;)d.removeAttributeNode(E[0]);Cn(d,b,f),d[Ye]=l,d[Et]=f}catch(F){Sr(l,l.return,F)}}var Lc=!1,Ss=!1,Db=!1,Mw=typeof WeakSet=="function"?WeakSet:Set,ln=null;function RL(l,d){if(l=l.containerInfo,av=u0,l=yd(l),yn(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var b=f.getSelection&&f.getSelection();if(b&&b.rangeCount!==0){f=b.anchorNode;var E=b.anchorOffset,F=b.focusNode;b=b.focusOffset;try{f.nodeType,F.nodeType}catch{f=null;break e}var le=0,be=-1,Me=-1,rt=0,bt=0,St=l,st=null;t:for(;;){for(var ot;St!==f||E!==0&&St.nodeType!==3||(be=le+E),St!==F||b!==0&&St.nodeType!==3||(Me=le+b),St.nodeType===3&&(le+=St.nodeValue.length),(ot=St.firstChild)!==null;)st=St,St=ot;for(;;){if(St===l)break t;if(st===f&&++rt===E&&(be=le),st===F&&++bt===b&&(Me=le),(ot=St.nextSibling)!==null)break;St=st,st=St.parentNode}St=ot}f=be===-1||Me===-1?null:{start:be,end:Me}}else f=null}f=f||{start:0,end:0}}else f=null;for(rv={focusedElem:l,selectionRange:f},u0=!1,ln=d;ln!==null;)if(d=ln,l=d.child,(d.subtreeFlags&1024)!==0&&l!==null)l.return=d,ln=l;else for(;ln!==null;){switch(d=ln,F=d.alternate,l=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&F!==null){l=void 0,f=d,E=F.memoizedProps,F=F.memoizedState,b=f.stateNode;try{var ya=Bu(f.type,E,f.elementType===f.type);l=b.getSnapshotBeforeUpdate(ya,F),b.__reactInternalSnapshotBeforeUpdate=l}catch(xa){Sr(f,f.return,xa)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,f=l.nodeType,f===9)iv(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":iv(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(s(163))}if(l=d.sibling,l!==null){l.return=d.return,ln=l;break}ln=d.return}}function Rw(l,d,f){var b=f.flags;switch(f.tag){case 0:case 11:case 15:Pd(l,f),b&4&&Dx(5,f);break;case 1:if(Pd(l,f),b&4)if(l=f.stateNode,d===null)try{l.componentDidMount()}catch(le){Sr(f,f.return,le)}else{var E=Bu(f.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(E,d,l.__reactInternalSnapshotBeforeUpdate)}catch(le){Sr(f,f.return,le)}}b&64&&Tw(f),b&512&&Ox(f,f.return);break;case 3:if(Pd(l,f),b&64&&(l=f.updateQueue,l!==null)){if(d=null,f.child!==null)switch(f.child.tag){case 27:case 5:d=f.child.stateNode;break;case 1:d=f.child.stateNode}try{ms(l,d)}catch(le){Sr(f,f.return,le)}}break;case 27:d===null&&b&4&&Lw(f);case 26:case 5:Pd(l,f),d===null&&b&4&&Dw(f),b&512&&Ox(f,f.return);break;case 12:Pd(l,f);break;case 13:Pd(l,f),b&4&&$w(l,f),b&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=HL.bind(null,f),cM(l,f))));break;case 22:if(b=f.memoizedState!==null||Lc,!b){d=d!==null&&d.memoizedState!==null||Ss,E=Lc;var F=Ss;Lc=b,(Ss=d)&&!F?Dd(l,f,(f.subtreeFlags&8772)!==0):Pd(l,f),Lc=E,Ss=F}break;case 30:break;default:Pd(l,f)}}function Iw(l){var d=l.alternate;d!==null&&(l.alternate=null,Iw(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Ar(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Gr=null,Ai=!1;function Mc(l,d,f){for(f=f.child;f!==null;)zw(l,d,f),f=f.sibling}function zw(l,d,f){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(ct,f)}catch{}switch(f.tag){case 26:Ss||Go(f,d),Mc(l,d,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Ss||Go(f,d);var b=Gr,E=Ai;zd(f.type)&&(Gr=f.stateNode,Ai=!1),Mc(l,d,f),qx(f.stateNode),Gr=b,Ai=E;break;case 5:Ss||Go(f,d);case 6:if(b=Gr,E=Ai,Gr=null,Mc(l,d,f),Gr=b,Ai=E,Gr!==null)if(Ai)try{(Gr.nodeType===9?Gr.body:Gr.nodeName==="HTML"?Gr.ownerDocument.body:Gr).removeChild(f.stateNode)}catch(F){Sr(f,d,F)}else try{Gr.removeChild(f.stateNode)}catch(F){Sr(f,d,F)}break;case 18:Gr!==null&&(Ai?(l=Gr,C4(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),Xx(l)):C4(Gr,f.stateNode));break;case 4:b=Gr,E=Ai,Gr=f.stateNode.containerInfo,Ai=!0,Mc(l,d,f),Gr=b,Ai=E;break;case 0:case 11:case 14:case 15:Ss||Td(2,f,d),Ss||Td(4,f,d),Mc(l,d,f);break;case 1:Ss||(Go(f,d),b=f.stateNode,typeof b.componentWillUnmount=="function"&&Pw(f,d,b)),Mc(l,d,f);break;case 21:Mc(l,d,f);break;case 22:Ss=(b=Ss)||f.memoizedState!==null,Mc(l,d,f),Ss=b;break;default:Mc(l,d,f)}}function $w(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Xx(l)}catch(f){Sr(d,d.return,f)}}function IL(l){switch(l.tag){case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new Mw),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new Mw),d;default:throw Error(s(435,l.tag))}}function Ob(l,d){var f=IL(l);d.forEach(function(b){var E=YL.bind(null,l,b);f.has(b)||(f.add(b),b.then(E,E))})}function Yi(l,d){var f=d.deletions;if(f!==null)for(var b=0;b<f.length;b++){var E=f[b],F=l,le=d,be=le;e:for(;be!==null;){switch(be.tag){case 27:if(zd(be.type)){Gr=be.stateNode,Ai=!1;break e}break;case 5:Gr=be.stateNode,Ai=!1;break e;case 3:case 4:Gr=be.stateNode.containerInfo,Ai=!0;break e}be=be.return}if(Gr===null)throw Error(s(160));zw(F,le,E),Gr=null,Ai=!1,F=E.alternate,F!==null&&(F.return=null),E.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)Bw(d,l),d=d.sibling}var go=null;function Bw(l,d){var f=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Yi(d,l),Gi(l),b&4&&(Td(3,l,l.return),Dx(3,l),Td(5,l,l.return));break;case 1:Yi(d,l),Gi(l),b&512&&(Ss||f===null||Go(f,f.return)),b&64&&Lc&&(l=l.updateQueue,l!==null&&(b=l.callbacks,b!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?b:f.concat(b))));break;case 26:var E=go;if(Yi(d,l),Gi(l),b&512&&(Ss||f===null||Go(f,f.return)),b&4){var F=f!==null?f.memoizedState:null;if(b=l.memoizedState,f===null)if(b===null)if(l.stateNode===null){e:{b=l.type,f=l.memoizedProps,E=E.ownerDocument||E;t:switch(b){case"title":F=E.getElementsByTagName("title")[0],(!F||F[aa]||F[Ye]||F.namespaceURI==="http://www.w3.org/2000/svg"||F.hasAttribute("itemprop"))&&(F=E.createElement(b),E.head.insertBefore(F,E.querySelector("head > title"))),Cn(F,b,f),F[Ye]=l,Ra(F),b=F;break e;case"link":var le=L4("link","href",E).get(b+(f.href||""));if(le){for(var be=0;be<le.length;be++)if(F=le[be],F.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&F.getAttribute("rel")===(f.rel==null?null:f.rel)&&F.getAttribute("title")===(f.title==null?null:f.title)&&F.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){le.splice(be,1);break t}}F=E.createElement(b),Cn(F,b,f),E.head.appendChild(F);break;case"meta":if(le=L4("meta","content",E).get(b+(f.content||""))){for(be=0;be<le.length;be++)if(F=le[be],F.getAttribute("content")===(f.content==null?null:""+f.content)&&F.getAttribute("name")===(f.name==null?null:f.name)&&F.getAttribute("property")===(f.property==null?null:f.property)&&F.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&F.getAttribute("charset")===(f.charSet==null?null:f.charSet)){le.splice(be,1);break t}}F=E.createElement(b),Cn(F,b,f),E.head.appendChild(F);break;default:throw Error(s(468,b))}F[Ye]=l,Ra(F),b=F}l.stateNode=b}else M4(E,l.type,l.stateNode);else l.stateNode=O4(E,b,l.memoizedProps);else F!==b?(F===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):F.count--,b===null?M4(E,l.type,l.stateNode):O4(E,b,l.memoizedProps)):b===null&&l.stateNode!==null&&Eb(l,l.memoizedProps,f.memoizedProps)}break;case 27:Yi(d,l),Gi(l),b&512&&(Ss||f===null||Go(f,f.return)),f!==null&&b&4&&Eb(l,l.memoizedProps,f.memoizedProps);break;case 5:if(Yi(d,l),Gi(l),b&512&&(Ss||f===null||Go(f,f.return)),l.flags&32){E=l.stateNode;try{Qn(E,"")}catch(ot){Sr(l,l.return,ot)}}b&4&&l.stateNode!=null&&(E=l.memoizedProps,Eb(l,E,f!==null?f.memoizedProps:E)),b&1024&&(Db=!0);break;case 6:if(Yi(d,l),Gi(l),b&4){if(l.stateNode===null)throw Error(s(162));b=l.memoizedProps,f=l.stateNode;try{f.nodeValue=b}catch(ot){Sr(l,l.return,ot)}}break;case 3:if(o0=null,E=go,go=i0(d.containerInfo),Yi(d,l),go=E,Gi(l),b&4&&f!==null&&f.memoizedState.isDehydrated)try{Xx(d.containerInfo)}catch(ot){Sr(l,l.return,ot)}Db&&(Db=!1,Fw(l));break;case 4:b=go,go=i0(l.stateNode.containerInfo),Yi(d,l),Gi(l),go=b;break;case 12:Yi(d,l),Gi(l);break;case 13:Yi(d,l),Gi(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&($b=ce()),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,Ob(l,b)));break;case 22:E=l.memoizedState!==null;var Me=f!==null&&f.memoizedState!==null,rt=Lc,bt=Ss;if(Lc=rt||E,Ss=bt||Me,Yi(d,l),Ss=bt,Lc=rt,Gi(l),b&8192)e:for(d=l.stateNode,d._visibility=E?d._visibility&-2:d._visibility|1,E&&(f===null||Me||Lc||Ss||Fu(l)),f=null,d=l;;){if(d.tag===5||d.tag===26){if(f===null){Me=f=d;try{if(F=Me.stateNode,E)le=F.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{be=Me.stateNode;var St=Me.memoizedProps.style,st=St!=null&&St.hasOwnProperty("display")?St.display:null;be.style.display=st==null||typeof st=="boolean"?"":(""+st).trim()}}catch(ot){Sr(Me,Me.return,ot)}}}else if(d.tag===6){if(f===null){Me=d;try{Me.stateNode.nodeValue=E?"":Me.memoizedProps}catch(ot){Sr(Me,Me.return,ot)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}b&4&&(b=l.updateQueue,b!==null&&(f=b.retryQueue,f!==null&&(b.retryQueue=null,Ob(l,f))));break;case 19:Yi(d,l),Gi(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,Ob(l,b)));break;case 30:break;case 21:break;default:Yi(d,l),Gi(l)}}function Gi(l){var d=l.flags;if(d&2){try{for(var f,b=l.return;b!==null;){if(Ow(b)){f=b;break}b=b.return}if(f==null)throw Error(s(160));switch(f.tag){case 27:var E=f.stateNode,F=Tb(l);Gp(l,F,E);break;case 5:var le=f.stateNode;f.flags&32&&(Qn(le,""),f.flags&=-33);var be=Tb(l);Gp(l,be,le);break;case 3:case 4:var Me=f.stateNode.containerInfo,rt=Tb(l);Pb(l,rt,Me);break;default:throw Error(s(161))}}catch(bt){Sr(l,l.return,bt)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function Fw(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;Fw(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Pd(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)Rw(l,d.alternate,d),d=d.sibling}function Fu(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:Td(4,d,d.return),Fu(d);break;case 1:Go(d,d.return);var f=d.stateNode;typeof f.componentWillUnmount=="function"&&Pw(d,d.return,f),Fu(d);break;case 27:qx(d.stateNode);case 26:case 5:Go(d,d.return),Fu(d);break;case 22:d.memoizedState===null&&Fu(d);break;case 30:Fu(d);break;default:Fu(d)}l=l.sibling}}function Dd(l,d,f){for(f=f&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var b=d.alternate,E=l,F=d,le=F.flags;switch(F.tag){case 0:case 11:case 15:Dd(E,F,f),Dx(4,F);break;case 1:if(Dd(E,F,f),b=F,E=b.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(rt){Sr(b,b.return,rt)}if(b=F,E=b.updateQueue,E!==null){var be=b.stateNode;try{var Me=E.shared.hiddenCallbacks;if(Me!==null)for(E.shared.hiddenCallbacks=null,E=0;E<Me.length;E++)Ia(Me[E],be)}catch(rt){Sr(b,b.return,rt)}}f&&le&64&&Tw(F),Ox(F,F.return);break;case 27:Lw(F);case 26:case 5:Dd(E,F,f),f&&b===null&&le&4&&Dw(F),Ox(F,F.return);break;case 12:Dd(E,F,f);break;case 13:Dd(E,F,f),f&&le&4&&$w(E,F);break;case 22:F.memoizedState===null&&Dd(E,F,f),Ox(F,F.return);break;case 30:break;default:Dd(E,F,f)}d=d.sibling}}function Lb(l,d){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&Tu(f))}function Mb(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Tu(l))}function Vo(l,d,f,b){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)qw(l,d,f,b),d=d.sibling}function qw(l,d,f,b){var E=d.flags;switch(d.tag){case 0:case 11:case 15:Vo(l,d,f,b),E&2048&&Dx(9,d);break;case 1:Vo(l,d,f,b);break;case 3:Vo(l,d,f,b),E&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Tu(l)));break;case 12:if(E&2048){Vo(l,d,f,b),l=d.stateNode;try{var F=d.memoizedProps,le=F.id,be=F.onPostCommit;typeof be=="function"&&be(le,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Me){Sr(d,d.return,Me)}}else Vo(l,d,f,b);break;case 13:Vo(l,d,f,b);break;case 23:break;case 22:F=d.stateNode,le=d.alternate,d.memoizedState!==null?F._visibility&2?Vo(l,d,f,b):Lx(l,d):F._visibility&2?Vo(l,d,f,b):(F._visibility|=2,Km(l,d,f,b,(d.subtreeFlags&10256)!==0)),E&2048&&Lb(le,d);break;case 24:Vo(l,d,f,b),E&2048&&Mb(d.alternate,d);break;default:Vo(l,d,f,b)}}function Km(l,d,f,b,E){for(E=E&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var F=l,le=d,be=f,Me=b,rt=le.flags;switch(le.tag){case 0:case 11:case 15:Km(F,le,be,Me,E),Dx(8,le);break;case 23:break;case 22:var bt=le.stateNode;le.memoizedState!==null?bt._visibility&2?Km(F,le,be,Me,E):Lx(F,le):(bt._visibility|=2,Km(F,le,be,Me,E)),E&&rt&2048&&Lb(le.alternate,le);break;case 24:Km(F,le,be,Me,E),E&&rt&2048&&Mb(le.alternate,le);break;default:Km(F,le,be,Me,E)}d=d.sibling}}function Lx(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var f=l,b=d,E=b.flags;switch(b.tag){case 22:Lx(f,b),E&2048&&Lb(b.alternate,b);break;case 24:Lx(f,b),E&2048&&Mb(b.alternate,b);break;default:Lx(f,b)}d=d.sibling}}var Mx=8192;function Xm(l){if(l.subtreeFlags&Mx)for(l=l.child;l!==null;)Uw(l),l=l.sibling}function Uw(l){switch(l.tag){case 26:Xm(l),l.flags&Mx&&l.memoizedState!==null&&NM(go,l.memoizedState,l.memoizedProps);break;case 5:Xm(l);break;case 3:case 4:var d=go;go=i0(l.stateNode.containerInfo),Xm(l),go=d;break;case 22:l.memoizedState===null&&(d=l.alternate,d!==null&&d.memoizedState!==null?(d=Mx,Mx=16777216,Xm(l),Mx=d):Xm(l));break;default:Xm(l)}}function Ww(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Rx(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var f=0;f<d.length;f++){var b=d[f];ln=b,Yw(b,l)}Ww(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Hw(l),l=l.sibling}function Hw(l){switch(l.tag){case 0:case 11:case 15:Rx(l),l.flags&2048&&Td(9,l,l.return);break;case 3:Rx(l);break;case 12:Rx(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,Vp(l)):Rx(l);break;default:Rx(l)}}function Vp(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var f=0;f<d.length;f++){var b=d[f];ln=b,Yw(b,l)}Ww(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:Td(8,d,d.return),Vp(d);break;case 22:f=d.stateNode,f._visibility&2&&(f._visibility&=-3,Vp(d));break;default:Vp(d)}l=l.sibling}}function Yw(l,d){for(;ln!==null;){var f=ln;switch(f.tag){case 0:case 11:case 15:Td(8,f,d);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var b=f.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:Tu(f.memoizedState.cache)}if(b=f.child,b!==null)b.return=f,ln=b;else e:for(f=l;ln!==null;){b=ln;var E=b.sibling,F=b.return;if(Iw(b),b===f){ln=null;break e}if(E!==null){E.return=F,ln=E;break e}ln=F}}}var zL={getCacheForType:function(l){var d=bs(vs),f=d.data.get(l);return f===void 0&&(f=l(),d.data.set(l,f)),f}},$L=typeof WeakMap=="function"?WeakMap:Map,mr=0,Pr=null,Ba=null,Ja=0,hr=0,Vi=null,Od=!1,Jm=!1,Rb=!1,Rc=0,hs=0,Ld=0,qu=0,Ib=0,Ol=0,Zm=0,Ix=null,Ei=null,zb=!1,$b=0,Kp=1/0,Xp=null,Md=null,_n=0,Rd=null,Qm=null,eh=0,Bb=0,Fb=null,Gw=null,zx=0,qb=null;function Ki(){if((mr&2)!==0&&Ja!==0)return Ja&-Ja;if(Y.T!==null){var l=Ac;return l!==0?l:Kb()}return Ka()}function Vw(){Ol===0&&(Ol=(Ja&536870912)===0||ar?Ge():536870912);var l=Dl.current;return l!==null&&(l.flags|=32),Ol}function Xi(l,d,f){(l===Pr&&(hr===2||hr===9)||l.cancelPendingCommit!==null)&&(th(l,0),Id(l,Ja,Ol,!1)),It(l,f),((mr&2)===0||l!==Pr)&&(l===Pr&&((mr&2)===0&&(qu|=f),hs===4&&Id(l,Ja,Ol,!1)),Ko(l))}function Kw(l,d,f){if((mr&6)!==0)throw Error(s(327));var b=!f&&(d&124)===0&&(d&l.expiredLanes)===0||Xe(l,d),E=b?qL(l,d):Hb(l,d,!0),F=b;do{if(E===0){Jm&&!b&&Id(l,d,0,!1);break}else{if(f=l.current.alternate,F&&!BL(f)){E=Hb(l,d,!1),F=!1;continue}if(E===2){if(F=d,l.errorRecoveryDisabledLanes&F)var le=0;else le=l.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){d=le;e:{var be=l;E=Ix;var Me=be.current.memoizedState.isDehydrated;if(Me&&(th(be,le).flags|=256),le=Hb(be,le,!1),le!==2){if(Rb&&!Me){be.errorRecoveryDisabledLanes|=F,qu|=F,E=4;break e}F=Ei,Ei=E,F!==null&&(Ei===null?Ei=F:Ei.push.apply(Ei,F))}E=le}if(F=!1,E!==2)continue}}if(E===1){th(l,0),Id(l,d,0,!0);break}e:{switch(b=l,F=E,F){case 0:case 1:throw Error(s(345));case 4:if((d&4194048)!==d)break;case 6:Id(b,d,Ol,!Od);break e;case 2:Ei=null;break;case 3:case 5:break;default:throw Error(s(329))}if((d&62914560)===d&&(E=$b+300-ce(),10<E)){if(Id(b,d,Ol,!Od),qe(b,0,!0)!==0)break e;b.timeoutHandle=S4(Xw.bind(null,b,f,Ei,Xp,zb,d,Ol,qu,Zm,Od,F,2,-0,0),E);break e}Xw(b,f,Ei,Xp,zb,d,Ol,qu,Zm,Od,F,0,-0,0)}}break}while(!0);Ko(l)}function Xw(l,d,f,b,E,F,le,be,Me,rt,bt,St,st,ot){if(l.timeoutHandle=-1,St=d.subtreeFlags,(St&8192||(St&16785408)===16785408)&&(Hx={stylesheets:null,count:0,unsuspend:jM},Uw(d),St=wM(),St!==null)){l.cancelPendingCommit=St(r4.bind(null,l,d,F,f,b,E,le,be,Me,bt,1,st,ot)),Id(l,F,le,!rt);return}r4(l,d,F,f,b,E,le,be,Me)}function BL(l){for(var d=l;;){var f=d.tag;if((f===0||f===11||f===15)&&d.flags&16384&&(f=d.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var b=0;b<f.length;b++){var E=f[b],F=E.getSnapshot;E=E.value;try{if(!Rs(F(),E))return!1}catch{return!1}}if(f=d.child,d.subtreeFlags&16384&&f!==null)f.return=d,d=f;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Id(l,d,f,b){d&=~Ib,d&=~qu,l.suspendedLanes|=d,l.pingedLanes&=~d,b&&(l.warmLanes|=d),b=l.expirationTimes;for(var E=d;0<E;){var F=31-xt(E),le=1<<F;b[F]=-1,E&=~le}f!==0&&ze(l,f,d)}function Jp(){return(mr&6)===0?($x(0),!1):!0}function Ub(){if(Ba!==null){if(hr===0)var l=Ba.return;else l=Ba,uo=zs=null,Gs(l),Gm=null,Ex=0,l=Ba;for(;l!==null;)Ew(l.alternate,l),l=l.return;Ba=null}}function th(l,d){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,sM(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),Ub(),Pr=l,Ba=f=_l(l.current,null),Ja=d,hr=0,Vi=null,Od=!1,Jm=Xe(l,d),Rb=!1,Zm=Ol=Ib=qu=Ld=hs=0,Ei=Ix=null,zb=!1,(d&8)!==0&&(d|=d&32);var b=l.entangledLanes;if(b!==0)for(l=l.entanglements,b&=d;0<b;){var E=31-xt(b),F=1<<E;d|=l[E],b&=~F}return Rc=d,Su(),f}function Jw(l,d){Xt=null,Y.H=zp,d===xe||d===ve?(d=He(),hr=3):d===ge?(d=He(),hr=4):hr=d===fw?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Vi=d,Ba===null&&(hs=1,Up(l,ii(d,l.current)))}function Zw(){var l=Y.H;return Y.H=zp,l===null?zp:l}function Qw(){var l=Y.A;return Y.A=zL,l}function Wb(){hs=4,Od||(Ja&4194048)!==Ja&&Dl.current!==null||(Jm=!0),(Ld&134217727)===0&&(qu&134217727)===0||Pr===null||Id(Pr,Ja,Ol,!1)}function Hb(l,d,f){var b=mr;mr|=2;var E=Zw(),F=Qw();(Pr!==l||Ja!==d)&&(Xp=null,th(l,d)),d=!1;var le=hs;e:do try{if(hr!==0&&Ba!==null){var be=Ba,Me=Vi;switch(hr){case 8:Ub(),le=6;break e;case 3:case 2:case 9:case 6:Dl.current===null&&(d=!0);var rt=hr;if(hr=0,Vi=null,ah(l,be,Me,rt),f&&Jm){le=0;break e}break;default:rt=hr,hr=0,Vi=null,ah(l,be,Me,rt)}}FL(),le=hs;break}catch(bt){Jw(l,bt)}while(!0);return d&&l.shellSuspendCounter++,uo=zs=null,mr=b,Y.H=E,Y.A=F,Ba===null&&(Pr=null,Ja=0,Su()),le}function FL(){for(;Ba!==null;)e4(Ba)}function qL(l,d){var f=mr;mr|=2;var b=Zw(),E=Qw();Pr!==l||Ja!==d?(Xp=null,Kp=ce()+500,th(l,d)):Jm=Xe(l,d);e:do try{if(hr!==0&&Ba!==null){d=Ba;var F=Vi;t:switch(hr){case 1:hr=0,Vi=null,ah(l,d,F,1);break;case 2:case 9:if(_e(F)){hr=0,Vi=null,t4(d);break}d=function(){hr!==2&&hr!==9||Pr!==l||(hr=7),Ko(l)},F.then(d,d);break e;case 3:hr=7;break e;case 4:hr=5;break e;case 7:_e(F)?(hr=0,Vi=null,t4(d)):(hr=0,Vi=null,ah(l,d,F,7));break;case 5:var le=null;switch(Ba.tag){case 26:le=Ba.memoizedState;case 5:case 27:var be=Ba;if(!le||R4(le)){hr=0,Vi=null;var Me=be.sibling;if(Me!==null)Ba=Me;else{var rt=be.return;rt!==null?(Ba=rt,Zp(rt)):Ba=null}break t}}hr=0,Vi=null,ah(l,d,F,5);break;case 6:hr=0,Vi=null,ah(l,d,F,6);break;case 8:Ub(),hs=6;break e;default:throw Error(s(462))}}UL();break}catch(bt){Jw(l,bt)}while(!0);return uo=zs=null,Y.H=b,Y.A=E,mr=f,Ba!==null?0:(Pr=null,Ja=0,Su(),hs)}function UL(){for(;Ba!==null&&!ae();)e4(Ba)}function e4(l){var d=kw(l.alternate,l,Rc);l.memoizedProps=l.pendingProps,d===null?Zp(l):Ba=d}function t4(l){var d=l,f=d.alternate;switch(d.tag){case 15:case 0:d=jw(f,d,d.pendingProps,d.type,void 0,Ja);break;case 11:d=jw(f,d,d.pendingProps,d.type.render,d.ref,Ja);break;case 5:Gs(d);default:Ew(f,d),d=Ba=Cu(d,Rc),d=kw(f,d,Rc)}l.memoizedProps=l.pendingProps,d===null?Zp(l):Ba=d}function ah(l,d,f,b){uo=zs=null,Gs(d),Gm=null,Ex=0;var E=d.return;try{if(DL(l,E,d,f,Ja)){hs=1,Up(l,ii(f,l.current)),Ba=null;return}}catch(F){if(E!==null)throw Ba=E,F;hs=1,Up(l,ii(f,l.current)),Ba=null;return}d.flags&32768?(ar||b===1?l=!0:Jm||(Ja&536870912)!==0?l=!1:(Od=l=!0,(b===2||b===9||b===3||b===6)&&(b=Dl.current,b!==null&&b.tag===13&&(b.flags|=16384))),a4(d,l)):Zp(d)}function Zp(l){var d=l;do{if((d.flags&32768)!==0){a4(d,Od);return}l=d.return;var f=LL(d.alternate,d,Rc);if(f!==null){Ba=f;return}if(d=d.sibling,d!==null){Ba=d;return}Ba=d=l}while(d!==null);hs===0&&(hs=5)}function a4(l,d){do{var f=ML(l.alternate,l);if(f!==null){f.flags&=32767,Ba=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!d&&(l=l.sibling,l!==null)){Ba=l;return}Ba=l=f}while(l!==null);hs=6,Ba=null}function r4(l,d,f,b,E,F,le,be,Me){l.cancelPendingCommit=null;do Qp();while(_n!==0);if((mr&6)!==0)throw Error(s(327));if(d!==null){if(d===l.current)throw Error(s(177));if(F=d.lanes|d.childLanes,F|=Lm,Bt(l,f,F,le,be,Me),l===Pr&&(Ba=Pr=null,Ja=0),Qm=d,Rd=l,eh=f,Bb=F,Fb=E,Gw=b,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,GL(Ke,function(){return o4(),null})):(l.callbackNode=null,l.callbackPriority=0),b=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||b){b=Y.T,Y.T=null,E=J.p,J.p=2,le=mr,mr|=4;try{RL(l,d,f)}finally{mr=le,J.p=E,Y.T=b}}_n=1,s4(),n4(),i4()}}function s4(){if(_n===1){_n=0;var l=Rd,d=Qm,f=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||f){f=Y.T,Y.T=null;var b=J.p;J.p=2;var E=mr;mr|=4;try{Bw(d,l);var F=rv,le=yd(l.containerInfo),be=F.focusedElem,Me=F.selectionRange;if(le!==be&&be&&be.ownerDocument&&Nl(be.ownerDocument.documentElement,be)){if(Me!==null&&yn(be)){var rt=Me.start,bt=Me.end;if(bt===void 0&&(bt=rt),"selectionStart"in be)be.selectionStart=rt,be.selectionEnd=Math.min(bt,be.value.length);else{var St=be.ownerDocument||document,st=St&&St.defaultView||window;if(st.getSelection){var ot=st.getSelection(),ya=be.textContent.length,xa=Math.min(Me.start,ya),vr=Me.end===void 0?xa:Math.min(Me.end,ya);!ot.extend&&xa>vr&&(le=vr,vr=xa,xa=le);var Je=Bo(be,xa),Ue=Bo(be,vr);if(Je&&Ue&&(ot.rangeCount!==1||ot.anchorNode!==Je.node||ot.anchorOffset!==Je.offset||ot.focusNode!==Ue.node||ot.focusOffset!==Ue.offset)){var et=St.createRange();et.setStart(Je.node,Je.offset),ot.removeAllRanges(),xa>vr?(ot.addRange(et),ot.extend(Ue.node,Ue.offset)):(et.setEnd(Ue.node,Ue.offset),ot.addRange(et))}}}}for(St=[],ot=be;ot=ot.parentNode;)ot.nodeType===1&&St.push({element:ot,left:ot.scrollLeft,top:ot.scrollTop});for(typeof be.focus=="function"&&be.focus(),be=0;be<St.length;be++){var vt=St[be];vt.element.scrollLeft=vt.left,vt.element.scrollTop=vt.top}}u0=!!av,rv=av=null}finally{mr=E,J.p=b,Y.T=f}}l.current=d,_n=2}}function n4(){if(_n===2){_n=0;var l=Rd,d=Qm,f=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||f){f=Y.T,Y.T=null;var b=J.p;J.p=2;var E=mr;mr|=4;try{Rw(l,d.alternate,d)}finally{mr=E,J.p=b,Y.T=f}}_n=3}}function i4(){if(_n===4||_n===3){_n=0,Ne();var l=Rd,d=Qm,f=eh,b=Gw;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?_n=5:(_n=0,Qm=Rd=null,l4(l,l.pendingLanes));var E=l.pendingLanes;if(E===0&&(Md=null),ca(f),d=d.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(ct,d,void 0,(d.current.flags&128)===128)}catch{}if(b!==null){d=Y.T,E=J.p,J.p=2,Y.T=null;try{for(var F=l.onRecoverableError,le=0;le<b.length;le++){var be=b[le];F(be.value,{componentStack:be.stack})}}finally{Y.T=d,J.p=E}}(eh&3)!==0&&Qp(),Ko(l),E=l.pendingLanes,(f&4194090)!==0&&(E&42)!==0?l===qb?zx++:(zx=0,qb=l):zx=0,$x(0)}}function l4(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,Tu(d)))}function Qp(l){return s4(),n4(),i4(),o4()}function o4(){if(_n!==5)return!1;var l=Rd,d=Bb;Bb=0;var f=ca(eh),b=Y.T,E=J.p;try{J.p=32>f?32:f,Y.T=null,f=Fb,Fb=null;var F=Rd,le=eh;if(_n=0,Qm=Rd=null,eh=0,(mr&6)!==0)throw Error(s(331));var be=mr;if(mr|=4,Hw(F.current),qw(F,F.current,le,f),mr=be,$x(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(ct,F)}catch{}return!0}finally{J.p=E,Y.T=b,l4(l,d)}}function c4(l,d,f){d=ii(f,d),d=vb(l.stateNode,d,2),l=kt(l,d,2),l!==null&&(It(l,2),Ko(l))}function Sr(l,d,f){if(l.tag===3)c4(l,l,f);else for(;d!==null;){if(d.tag===3){c4(d,l,f);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Md===null||!Md.has(b))){l=ii(f,l),f=hw(2),b=kt(d,f,2),b!==null&&(xw(f,b,d,l),It(b,2),Ko(b));break}}d=d.return}}function Yb(l,d,f){var b=l.pingCache;if(b===null){b=l.pingCache=new $L;var E=new Set;b.set(d,E)}else E=b.get(d),E===void 0&&(E=new Set,b.set(d,E));E.has(f)||(Rb=!0,E.add(f),l=WL.bind(null,l,d,f),d.then(l,l))}function WL(l,d,f){var b=l.pingCache;b!==null&&b.delete(d),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,Pr===l&&(Ja&f)===f&&(hs===4||hs===3&&(Ja&62914560)===Ja&&300>ce()-$b?(mr&2)===0&&th(l,0):Ib|=f,Zm===Ja&&(Zm=0)),Ko(l)}function d4(l,d){d===0&&(d=lt()),l=Nc(l,d),l!==null&&(It(l,d),Ko(l))}function HL(l){var d=l.memoizedState,f=0;d!==null&&(f=d.retryLane),d4(l,f)}function YL(l,d){var f=0;switch(l.tag){case 13:var b=l.stateNode,E=l.memoizedState;E!==null&&(f=E.retryLane);break;case 19:b=l.stateNode;break;case 22:b=l.stateNode._retryCache;break;default:throw Error(s(314))}b!==null&&b.delete(d),d4(l,f)}function GL(l,d){return ke(l,d)}var e0=null,rh=null,Gb=!1,t0=!1,Vb=!1,Uu=0;function Ko(l){l!==rh&&l.next===null&&(rh===null?e0=rh=l:rh=rh.next=l),t0=!0,Gb||(Gb=!0,KL())}function $x(l,d){if(!Vb&&t0){Vb=!0;do for(var f=!1,b=e0;b!==null;){if(l!==0){var E=b.pendingLanes;if(E===0)var F=0;else{var le=b.suspendedLanes,be=b.pingedLanes;F=(1<<31-xt(42|l)+1)-1,F&=E&~(le&~be),F=F&201326741?F&201326741|1:F?F|2:0}F!==0&&(f=!0,x4(b,F))}else F=Ja,F=qe(b,b===Pr?F:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(F&3)===0||Xe(b,F)||(f=!0,x4(b,F));b=b.next}while(f);Vb=!1}}function VL(){u4()}function u4(){t0=Gb=!1;var l=0;Uu!==0&&(rM()&&(l=Uu),Uu=0);for(var d=ce(),f=null,b=e0;b!==null;){var E=b.next,F=m4(b,d);F===0?(b.next=null,f===null?e0=E:f.next=E,E===null&&(rh=f)):(f=b,(l!==0||(F&3)!==0)&&(t0=!0)),b=E}$x(l)}function m4(l,d){for(var f=l.suspendedLanes,b=l.pingedLanes,E=l.expirationTimes,F=l.pendingLanes&-62914561;0<F;){var le=31-xt(F),be=1<<le,Me=E[le];Me===-1?((be&f)===0||(be&b)!==0)&&(E[le]=We(be,d)):Me<=d&&(l.expiredLanes|=be),F&=~be}if(d=Pr,f=Ja,f=qe(l,l===d?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b=l.callbackNode,f===0||l===d&&(hr===2||hr===9)||l.cancelPendingCommit!==null)return b!==null&&b!==null&&Ae(b),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||Xe(l,f)){if(d=f&-f,d===l.callbackPriority)return d;switch(b!==null&&Ae(b),ca(f)){case 2:case 8:f=Ee;break;case 32:f=Ke;break;case 268435456:f=Le;break;default:f=Ke}return b=h4.bind(null,l),f=ke(f,b),l.callbackPriority=d,l.callbackNode=f,d}return b!==null&&b!==null&&Ae(b),l.callbackPriority=2,l.callbackNode=null,2}function h4(l,d){if(_n!==0&&_n!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(Qp()&&l.callbackNode!==f)return null;var b=Ja;return b=qe(l,l===Pr?b:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b===0?null:(Kw(l,b,d),m4(l,ce()),l.callbackNode!=null&&l.callbackNode===f?h4.bind(null,l):null)}function x4(l,d){if(Qp())return null;Kw(l,d,!0)}function KL(){nM(function(){(mr&6)!==0?ke(ye,VL):u4()})}function Kb(){return Uu===0&&(Uu=Ge()),Uu}function f4(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:fn(""+l)}function p4(l,d){var f=d.ownerDocument.createElement("input");return f.name=d.name,f.value=d.value,l.id&&f.setAttribute("form",l.id),d.parentNode.insertBefore(f,d),l=new FormData(l),f.parentNode.removeChild(f),l}function XL(l,d,f,b,E){if(d==="submit"&&f&&f.stateNode===E){var F=f4((E[Et]||null).action),le=b.submitter;le&&(d=(d=le[Et]||null)?f4(d.formAction):le.getAttribute("formAction"),d!==null&&(F=d,le=null));var be=new hl("action","action",null,b,E);l.push({event:be,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(Uu!==0){var Me=le?p4(E,le):new FormData(E);Pl(f,{pending:!0,data:Me,method:E.method,action:F},null,Me)}}else typeof F=="function"&&(be.preventDefault(),Me=le?p4(E,le):new FormData(E),Pl(f,{pending:!0,data:Me,method:E.method,action:F},F,Me))},currentTarget:E}]})}}for(var Xb=0;Xb<Om.length;Xb++){var Jb=Om[Xb],JL=Jb.toLowerCase(),ZL=Jb[0].toUpperCase()+Jb.slice(1);_i(JL,"on"+ZL)}_i(cx,"onAnimationEnd"),_i(dx,"onAnimationIteration"),_i(ux,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(yp,"onTransitionRun"),_i(bp,"onTransitionStart"),_i(vp,"onTransitionCancel"),_i(mx,"onTransitionEnd"),Ds("onMouseEnter",["mouseout","mouseover"]),Ds("onMouseLeave",["mouseout","mouseover"]),Ds("onPointerEnter",["pointerout","pointerover"]),Ds("onPointerLeave",["pointerout","pointerover"]),Us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Us("onBeforeInput",["compositionend","keypress","textInput","paste"]),Us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bx="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bx));function g4(l,d){d=(d&4)!==0;for(var f=0;f<l.length;f++){var b=l[f],E=b.event;b=b.listeners;e:{var F=void 0;if(d)for(var le=b.length-1;0<=le;le--){var be=b[le],Me=be.instance,rt=be.currentTarget;if(be=be.listener,Me!==F&&E.isPropagationStopped())break e;F=be,E.currentTarget=rt;try{F(E)}catch(bt){qp(bt)}E.currentTarget=null,F=Me}else for(le=0;le<b.length;le++){if(be=b[le],Me=be.instance,rt=be.currentTarget,be=be.listener,Me!==F&&E.isPropagationStopped())break e;F=be,E.currentTarget=rt;try{F(E)}catch(bt){qp(bt)}E.currentTarget=null,F=Me}}}}function Fa(l,d){var f=d[zt];f===void 0&&(f=d[zt]=new Set);var b=l+"__bubble";f.has(b)||(y4(d,l,2,!1),f.add(b))}function Zb(l,d,f){var b=0;d&&(b|=4),y4(f,l,b,d)}var a0="_reactListening"+Math.random().toString(36).slice(2);function Qb(l){if(!l[a0]){l[a0]=!0,Ps.forEach(function(f){f!=="selectionchange"&&(QL.has(f)||Zb(f,!1,l),Zb(f,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[a0]||(d[a0]=!0,Zb("selectionchange",!1,d))}}function y4(l,d,f,b){switch(q4(d)){case 2:var E=CM;break;case 8:E=kM;break;default:E=hv}f=E.bind(null,d,f,l),E=void 0,!ti||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),b?E!==void 0?l.addEventListener(d,f,{capture:!0,passive:E}):l.addEventListener(d,f,!0):E!==void 0?l.addEventListener(d,f,{passive:E}):l.addEventListener(d,f,!1)}function ev(l,d,f,b,E){var F=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var le=b.tag;if(le===3||le===4){var be=b.stateNode.containerInfo;if(be===E)break;if(le===4)for(le=b.return;le!==null;){var Me=le.tag;if((Me===3||Me===4)&&le.stateNode.containerInfo===E)return;le=le.return}for(;be!==null;){if(le=dr(be),le===null)return;if(Me=le.tag,Me===5||Me===6||Me===26||Me===27){b=F=le;continue e}be=be.parentNode}}b=b.return}xc(function(){var rt=F,bt=Tr(f),St=[];e:{var st=hx.get(l);if(st!==void 0){var ot=hl,ya=l;switch(l){case"keypress":if(Pe(f)===0)break e;case"keydown":case"keyup":ot=cs;break;case"focusin":ya="focus",ot=U;break;case"focusout":ya="blur",ot=U;break;case"beforeblur":case"afterblur":ot=U;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=ud;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=si;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=Hs;break;case cx:case dx:case ux:ot=Ce;break;case mx:ot=Ro;break;case"scroll":case"scrollend":ot=pc;break;case"wheel":ot=Pm;break;case"copy":case"cut":case"paste":ot=Ze;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=ds;break;case"toggle":case"beforetoggle":ot=Ui}var xa=(d&4)!==0,vr=!xa&&(l==="scroll"||l==="scrollend"),Je=xa?st!==null?st+"Capture":null:st;xa=[];for(var Ue=rt,et;Ue!==null;){var vt=Ue;if(et=vt.stateNode,vt=vt.tag,vt!==5&&vt!==26&&vt!==27||et===null||Je===null||(vt=Ql(Ue,Je),vt!=null&&xa.push(Fx(Ue,vt,et))),vr)break;Ue=Ue.return}0<xa.length&&(st=new ot(st,ya,null,f,bt),St.push({event:st,listeners:xa}))}}if((d&7)===0){e:{if(st=l==="mouseover"||l==="pointerover",ot=l==="mouseout"||l==="pointerout",st&&f!==yi&&(ya=f.relatedTarget||f.fromElement)&&(dr(ya)||ya[na]))break e;if((ot||st)&&(st=bt.window===bt?bt:(st=bt.ownerDocument)?st.defaultView||st.parentWindow:window,ot?(ya=f.relatedTarget||f.toElement,ot=rt,ya=ya?dr(ya):null,ya!==null&&(vr=i(ya),xa=ya.tag,ya!==vr||xa!==5&&xa!==27&&xa!==6)&&(ya=null)):(ot=null,ya=rt),ot!==ya)){if(xa=ud,vt="onMouseLeave",Je="onMouseEnter",Ue="mouse",(l==="pointerout"||l==="pointerover")&&(xa=ds,vt="onPointerLeave",Je="onPointerEnter",Ue="pointer"),vr=ot==null?st:ls(ot),et=ya==null?st:ls(ya),st=new xa(vt,Ue+"leave",ot,f,bt),st.target=vr,st.relatedTarget=et,vt=null,dr(bt)===rt&&(xa=new xa(Je,Ue+"enter",ya,f,bt),xa.target=et,xa.relatedTarget=vr,vt=xa),vr=vt,ot&&ya)t:{for(xa=ot,Je=ya,Ue=0,et=xa;et;et=sh(et))Ue++;for(et=0,vt=Je;vt;vt=sh(vt))et++;for(;0<Ue-et;)xa=sh(xa),Ue--;for(;0<et-Ue;)Je=sh(Je),et--;for(;Ue--;){if(xa===Je||Je!==null&&xa===Je.alternate)break t;xa=sh(xa),Je=sh(Je)}xa=null}else xa=null;ot!==null&&b4(St,st,ot,xa,!1),ya!==null&&vr!==null&&b4(St,vr,ya,xa,!0)}}e:{if(st=rt?ls(rt):window,ot=st.nodeName&&st.nodeName.toLowerCase(),ot==="select"||ot==="input"&&st.type==="file")var Jt=gn;else if(ni(st))if(zo)Jt=gd;else{Jt=bl;var za=lx}else ot=st.nodeName,!ot||ot.toLowerCase()!=="input"||st.type!=="checkbox"&&st.type!=="radio"?rt&&Do(rt.elementType)&&(Jt=gn):Jt=vl;if(Jt&&(Jt=Jt(l,rt))){xd(St,Jt,f,bt);break e}za&&za(l,st,rt),l==="focusout"&&rt&&st.type==="number"&&rt.memoizedProps.value!=null&&dl(st,"number",st.value)}switch(za=rt?ls(rt):window,l){case"focusin":(ni(za)||za.contentEditable==="true")&&(tr=za,lr=rt,Nr=null);break;case"focusout":Nr=lr=tr=null;break;case"mousedown":Rr=!0;break;case"contextmenu":case"mouseup":case"dragend":Rr=!1,Sl(St,f,bt);break;case"selectionchange":if(wl)break;case"keydown":case"keyup":Sl(St,f,bt)}var la;if(Io)e:{switch(l){case"compositionstart":var fa="onCompositionStart";break e;case"compositionend":fa="onCompositionEnd";break e;case"compositionupdate":fa="onCompositionUpdate";break e}fa=void 0}else ao?md(l,f)&&(fa="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(fa="onCompositionStart");fa&&(pl&&f.locale!=="ko"&&(ao||fa!=="onCompositionStart"?fa==="onCompositionEnd"&&ao&&(la=Lo()):(vi=bt,fc="value"in vi?vi.value:vi.textContent,ao=!0)),za=r0(rt,fa),0<za.length&&(fa=new _t(fa,l,null,f,bt),St.push({event:fa,listeners:za}),la?fa.data=la:(la=an(f),la!==null&&(fa.data=la)))),(la=Ms?hd(l,f):Dm(l,f))&&(fa=r0(rt,"onBeforeInput"),0<fa.length&&(za=new _t("onBeforeInput","beforeinput",null,f,bt),St.push({event:za,listeners:fa}),za.data=la)),XL(St,l,rt,f,bt)}g4(St,d)})}function Fx(l,d,f){return{instance:l,listener:d,currentTarget:f}}function r0(l,d){for(var f=d+"Capture",b=[];l!==null;){var E=l,F=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||F===null||(E=Ql(l,f),E!=null&&b.unshift(Fx(l,E,F)),E=Ql(l,d),E!=null&&b.push(Fx(l,E,F))),l.tag===3)return b;l=l.return}return[]}function sh(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function b4(l,d,f,b,E){for(var F=d._reactName,le=[];f!==null&&f!==b;){var be=f,Me=be.alternate,rt=be.stateNode;if(be=be.tag,Me!==null&&Me===b)break;be!==5&&be!==26&&be!==27||rt===null||(Me=rt,E?(rt=Ql(f,F),rt!=null&&le.unshift(Fx(f,rt,Me))):E||(rt=Ql(f,F),rt!=null&&le.push(Fx(f,rt,Me)))),f=f.return}le.length!==0&&l.push({event:d,listeners:le})}var eM=/\r\n?/g,tM=/\u0000|\uFFFD/g;function v4(l){return(typeof l=="string"?l:""+l).replace(eM,`
`).replace(tM,"")}function j4(l,d){return d=v4(d),v4(l)===d}function s0(){}function br(l,d,f,b,E,F){switch(f){case"children":typeof b=="string"?d==="body"||d==="textarea"&&b===""||Qn(l,b):(typeof b=="number"||typeof b=="bigint")&&d!=="body"&&Qn(l,""+b);break;case"className":Os(l,"class",b);break;case"tabIndex":Os(l,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Os(l,f,b);break;case"style":Zl(l,b,F);break;case"data":if(d!=="object"){Os(l,"data",b);break}case"src":case"href":if(b===""&&(d!=="a"||f!=="href")){l.removeAttribute(f);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(f);break}b=fn(""+b),l.setAttribute(f,b);break;case"action":case"formAction":if(typeof b=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof F=="function"&&(f==="formAction"?(d!=="input"&&br(l,d,"name",E.name,E,null),br(l,d,"formEncType",E.formEncType,E,null),br(l,d,"formMethod",E.formMethod,E,null),br(l,d,"formTarget",E.formTarget,E,null)):(br(l,d,"encType",E.encType,E,null),br(l,d,"method",E.method,E,null),br(l,d,"target",E.target,E,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(f);break}b=fn(""+b),l.setAttribute(f,b);break;case"onClick":b!=null&&(l.onclick=s0);break;case"onScroll":b!=null&&Fa("scroll",l);break;case"onScrollEnd":b!=null&&Fa("scrollend",l);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(s(61));if(f=b.__html,f!=null){if(E.children!=null)throw Error(s(60));l.innerHTML=f}}break;case"multiple":l.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":l.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){l.removeAttribute("xlink:href");break}f=fn(""+b),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(f,""+b):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":b===!0?l.setAttribute(f,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(f,b):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?l.setAttribute(f,b):l.removeAttribute(f);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?l.removeAttribute(f):l.setAttribute(f,b);break;case"popover":Fa("beforetoggle",l),Fa("toggle",l),Dn(l,"popover",b);break;case"xlinkActuate":os(l,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":os(l,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":os(l,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":os(l,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":os(l,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":os(l,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":os(l,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":os(l,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":os(l,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":Dn(l,"is",b);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=vu.get(f)||f,Dn(l,f,b))}}function tv(l,d,f,b,E,F){switch(f){case"style":Zl(l,b,F);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(s(61));if(f=b.__html,f!=null){if(E.children!=null)throw Error(s(60));l.innerHTML=f}}break;case"children":typeof b=="string"?Qn(l,b):(typeof b=="number"||typeof b=="bigint")&&Qn(l,""+b);break;case"onScroll":b!=null&&Fa("scroll",l);break;case"onScrollEnd":b!=null&&Fa("scrollend",l);break;case"onClick":b!=null&&(l.onclick=s0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xn.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(E=f.endsWith("Capture"),d=f.slice(2,E?f.length-7:void 0),F=l[Et]||null,F=F!=null?F[f]:null,typeof F=="function"&&l.removeEventListener(d,F,E),typeof b=="function")){typeof F!="function"&&F!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(d,b,E);break e}f in l?l[f]=b:b===!0?l.setAttribute(f,""):Dn(l,f,b)}}}function Cn(l,d,f){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fa("error",l),Fa("load",l);var b=!1,E=!1,F;for(F in f)if(f.hasOwnProperty(F)){var le=f[F];if(le!=null)switch(F){case"src":b=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,d));default:br(l,d,F,le,f,null)}}E&&br(l,d,"srcSet",f.srcSet,f,null),b&&br(l,d,"src",f.src,f,null);return;case"input":Fa("invalid",l);var be=F=le=E=null,Me=null,rt=null;for(b in f)if(f.hasOwnProperty(b)){var bt=f[b];if(bt!=null)switch(b){case"name":E=bt;break;case"type":le=bt;break;case"checked":Me=bt;break;case"defaultChecked":rt=bt;break;case"value":F=bt;break;case"defaultValue":be=bt;break;case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(s(137,d));break;default:br(l,d,b,bt,f,null)}}Ca(l,F,be,Me,rt,le,E,!1),Lr(l);return;case"select":Fa("invalid",l),b=le=F=null;for(E in f)if(f.hasOwnProperty(E)&&(be=f[E],be!=null))switch(E){case"value":F=be;break;case"defaultValue":le=be;break;case"multiple":b=be;default:br(l,d,E,be,f,null)}d=F,f=le,l.multiple=!!b,d!=null?ul(l,!!b,d,!1):f!=null&&ul(l,!!b,f,!0);return;case"textarea":Fa("invalid",l),F=E=b=null;for(le in f)if(f.hasOwnProperty(le)&&(be=f[le],be!=null))switch(le){case"value":b=be;break;case"defaultValue":E=be;break;case"children":F=be;break;case"dangerouslySetInnerHTML":if(be!=null)throw Error(s(91));break;default:br(l,d,le,be,f,null)}mc(l,b,E,F),Lr(l);return;case"option":for(Me in f)if(f.hasOwnProperty(Me)&&(b=f[Me],b!=null))switch(Me){case"selected":l.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:br(l,d,Me,b,f,null)}return;case"dialog":Fa("beforetoggle",l),Fa("toggle",l),Fa("cancel",l),Fa("close",l);break;case"iframe":case"object":Fa("load",l);break;case"video":case"audio":for(b=0;b<Bx.length;b++)Fa(Bx[b],l);break;case"image":Fa("error",l),Fa("load",l);break;case"details":Fa("toggle",l);break;case"embed":case"source":case"link":Fa("error",l),Fa("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rt in f)if(f.hasOwnProperty(rt)&&(b=f[rt],b!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,d));default:br(l,d,rt,b,f,null)}return;default:if(Do(d)){for(bt in f)f.hasOwnProperty(bt)&&(b=f[bt],b!==void 0&&tv(l,d,bt,b,f,void 0));return}}for(be in f)f.hasOwnProperty(be)&&(b=f[be],b!=null&&br(l,d,be,b,f,null))}function aM(l,d,f,b){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,F=null,le=null,be=null,Me=null,rt=null,bt=null;for(ot in f){var St=f[ot];if(f.hasOwnProperty(ot)&&St!=null)switch(ot){case"checked":break;case"value":break;case"defaultValue":Me=St;default:b.hasOwnProperty(ot)||br(l,d,ot,null,b,St)}}for(var st in b){var ot=b[st];if(St=f[st],b.hasOwnProperty(st)&&(ot!=null||St!=null))switch(st){case"type":F=ot;break;case"name":E=ot;break;case"checked":rt=ot;break;case"defaultChecked":bt=ot;break;case"value":le=ot;break;case"defaultValue":be=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(s(137,d));break;default:ot!==St&&br(l,d,st,ot,b,St)}}ft(l,le,be,Me,rt,bt,F,E);return;case"select":ot=le=be=st=null;for(F in f)if(Me=f[F],f.hasOwnProperty(F)&&Me!=null)switch(F){case"value":break;case"multiple":ot=Me;default:b.hasOwnProperty(F)||br(l,d,F,null,b,Me)}for(E in b)if(F=b[E],Me=f[E],b.hasOwnProperty(E)&&(F!=null||Me!=null))switch(E){case"value":st=F;break;case"defaultValue":be=F;break;case"multiple":le=F;default:F!==Me&&br(l,d,E,F,b,Me)}d=be,f=le,b=ot,st!=null?ul(l,!!f,st,!1):!!b!=!!f&&(d!=null?ul(l,!!f,d,!0):ul(l,!!f,f?[]:"",!1));return;case"textarea":ot=st=null;for(be in f)if(E=f[be],f.hasOwnProperty(be)&&E!=null&&!b.hasOwnProperty(be))switch(be){case"value":break;case"children":break;default:br(l,d,be,null,b,E)}for(le in b)if(E=b[le],F=f[le],b.hasOwnProperty(le)&&(E!=null||F!=null))switch(le){case"value":st=E;break;case"defaultValue":ot=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:E!==F&&br(l,d,le,E,b,F)}xn(l,st,ot);return;case"option":for(var ya in f)if(st=f[ya],f.hasOwnProperty(ya)&&st!=null&&!b.hasOwnProperty(ya))switch(ya){case"selected":l.selected=!1;break;default:br(l,d,ya,null,b,st)}for(Me in b)if(st=b[Me],ot=f[Me],b.hasOwnProperty(Me)&&st!==ot&&(st!=null||ot!=null))switch(Me){case"selected":l.selected=st&&typeof st!="function"&&typeof st!="symbol";break;default:br(l,d,Me,st,b,ot)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xa in f)st=f[xa],f.hasOwnProperty(xa)&&st!=null&&!b.hasOwnProperty(xa)&&br(l,d,xa,null,b,st);for(rt in b)if(st=b[rt],ot=f[rt],b.hasOwnProperty(rt)&&st!==ot&&(st!=null||ot!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(s(137,d));break;default:br(l,d,rt,st,b,ot)}return;default:if(Do(d)){for(var vr in f)st=f[vr],f.hasOwnProperty(vr)&&st!==void 0&&!b.hasOwnProperty(vr)&&tv(l,d,vr,void 0,b,st);for(bt in b)st=b[bt],ot=f[bt],!b.hasOwnProperty(bt)||st===ot||st===void 0&&ot===void 0||tv(l,d,bt,st,b,ot);return}}for(var Je in f)st=f[Je],f.hasOwnProperty(Je)&&st!=null&&!b.hasOwnProperty(Je)&&br(l,d,Je,null,b,st);for(St in b)st=b[St],ot=f[St],!b.hasOwnProperty(St)||st===ot||st==null&&ot==null||br(l,d,St,st,b,ot)}var av=null,rv=null;function n0(l){return l.nodeType===9?l:l.ownerDocument}function N4(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w4(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function sv(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var nv=null;function rM(){var l=window.event;return l&&l.type==="popstate"?l===nv?!1:(nv=l,!0):(nv=null,!1)}var S4=typeof setTimeout=="function"?setTimeout:void 0,sM=typeof clearTimeout=="function"?clearTimeout:void 0,_4=typeof Promise=="function"?Promise:void 0,nM=typeof queueMicrotask=="function"?queueMicrotask:typeof _4<"u"?function(l){return _4.resolve(null).then(l).catch(iM)}:S4;function iM(l){setTimeout(function(){throw l})}function zd(l){return l==="head"}function C4(l,d){var f=d,b=0,E=0;do{var F=f.nextSibling;if(l.removeChild(f),F&&F.nodeType===8)if(f=F.data,f==="/$"){if(0<b&&8>b){f=b;var le=l.ownerDocument;if(f&1&&qx(le.documentElement),f&2&&qx(le.body),f&4)for(f=le.head,qx(f),le=f.firstChild;le;){var be=le.nextSibling,Me=le.nodeName;le[aa]||Me==="SCRIPT"||Me==="STYLE"||Me==="LINK"&&le.rel.toLowerCase()==="stylesheet"||f.removeChild(le),le=be}}if(E===0){l.removeChild(F),Xx(d);return}E--}else f==="$"||f==="$?"||f==="$!"?E++:b=f.charCodeAt(0)-48;else b=0;f=F}while(f);Xx(d)}function iv(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var f=d;switch(d=d.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":iv(f),Ar(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function lM(l,d,f,b){for(;l.nodeType===1;){var E=f;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!b&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(b){if(!l[aa])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(F=l.getAttribute("rel"),F==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(F!==E.rel||l.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||l.getAttribute("title")!==(E.title==null?null:E.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(F=l.getAttribute("src"),(F!==(E.src==null?null:E.src)||l.getAttribute("type")!==(E.type==null?null:E.type)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&F&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var F=E.name==null?null:""+E.name;if(E.type==="hidden"&&l.getAttribute("name")===F)return l}else return l;if(l=yo(l.nextSibling),l===null)break}return null}function oM(l,d,f){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=yo(l.nextSibling),l===null))return null;return l}function lv(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function cM(l,d){var f=l.ownerDocument;if(l.data!=="$?"||f.readyState==="complete")d();else{var b=function(){d(),f.removeEventListener("DOMContentLoaded",b)};f.addEventListener("DOMContentLoaded",b),l._reactRetry=b}}function yo(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return l}var ov=null;function k4(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"){if(d===0)return l;d--}else f==="/$"&&d++}l=l.previousSibling}return null}function A4(l,d,f){switch(d=n0(f),l){case"html":if(l=d.documentElement,!l)throw Error(s(452));return l;case"head":if(l=d.head,!l)throw Error(s(453));return l;case"body":if(l=d.body,!l)throw Error(s(454));return l;default:throw Error(s(451))}}function qx(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Ar(l)}var Ll=new Map,E4=new Set;function i0(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Ic=J.d;J.d={f:dM,r:uM,D:mM,C:hM,L:xM,m:fM,X:gM,S:pM,M:yM};function dM(){var l=Ic.f(),d=Jp();return l||d}function uM(l){var d=Er(l);d!==null&&d.tag===5&&d.type==="form"?zu(d):Ic.r(l)}var nh=typeof document>"u"?null:document;function T4(l,d,f){var b=nh;if(b&&typeof d=="string"&&d){var E=$t(d);E='link[rel="'+l+'"][href="'+E+'"]',typeof f=="string"&&(E+='[crossorigin="'+f+'"]'),E4.has(E)||(E4.add(E),l={rel:l,crossOrigin:f,href:d},b.querySelector(E)===null&&(d=b.createElement("link"),Cn(d,"link",l),Ra(d),b.head.appendChild(d)))}}function mM(l){Ic.D(l),T4("dns-prefetch",l,null)}function hM(l,d){Ic.C(l,d),T4("preconnect",l,d)}function xM(l,d,f){Ic.L(l,d,f);var b=nh;if(b&&l&&d){var E='link[rel="preload"][as="'+$t(d)+'"]';d==="image"&&f&&f.imageSrcSet?(E+='[imagesrcset="'+$t(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(E+='[imagesizes="'+$t(f.imageSizes)+'"]')):E+='[href="'+$t(l)+'"]';var F=E;switch(d){case"style":F=ih(l);break;case"script":F=lh(l)}Ll.has(F)||(l=h({rel:"preload",href:d==="image"&&f&&f.imageSrcSet?void 0:l,as:d},f),Ll.set(F,l),b.querySelector(E)!==null||d==="style"&&b.querySelector(Ux(F))||d==="script"&&b.querySelector(Wx(F))||(d=b.createElement("link"),Cn(d,"link",l),Ra(d),b.head.appendChild(d)))}}function fM(l,d){Ic.m(l,d);var f=nh;if(f&&l){var b=d&&typeof d.as=="string"?d.as:"script",E='link[rel="modulepreload"][as="'+$t(b)+'"][href="'+$t(l)+'"]',F=E;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":F=lh(l)}if(!Ll.has(F)&&(l=h({rel:"modulepreload",href:l},d),Ll.set(F,l),f.querySelector(E)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Wx(F)))return}b=f.createElement("link"),Cn(b,"link",l),Ra(b),f.head.appendChild(b)}}}function pM(l,d,f){Ic.S(l,d,f);var b=nh;if(b&&l){var E=gr(b).hoistableStyles,F=ih(l);d=d||"default";var le=E.get(F);if(!le){var be={loading:0,preload:null};if(le=b.querySelector(Ux(F)))be.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":d},f),(f=Ll.get(F))&&cv(l,f);var Me=le=b.createElement("link");Ra(Me),Cn(Me,"link",l),Me._p=new Promise(function(rt,bt){Me.onload=rt,Me.onerror=bt}),Me.addEventListener("load",function(){be.loading|=1}),Me.addEventListener("error",function(){be.loading|=2}),be.loading|=4,l0(le,d,b)}le={type:"stylesheet",instance:le,count:1,state:be},E.set(F,le)}}}function gM(l,d){Ic.X(l,d);var f=nh;if(f&&l){var b=gr(f).hoistableScripts,E=lh(l),F=b.get(E);F||(F=f.querySelector(Wx(E)),F||(l=h({src:l,async:!0},d),(d=Ll.get(E))&&dv(l,d),F=f.createElement("script"),Ra(F),Cn(F,"link",l),f.head.appendChild(F)),F={type:"script",instance:F,count:1,state:null},b.set(E,F))}}function yM(l,d){Ic.M(l,d);var f=nh;if(f&&l){var b=gr(f).hoistableScripts,E=lh(l),F=b.get(E);F||(F=f.querySelector(Wx(E)),F||(l=h({src:l,async:!0,type:"module"},d),(d=Ll.get(E))&&dv(l,d),F=f.createElement("script"),Ra(F),Cn(F,"link",l),f.head.appendChild(F)),F={type:"script",instance:F,count:1,state:null},b.set(E,F))}}function P4(l,d,f,b){var E=(E=Q.current)?i0(E):null;if(!E)throw Error(s(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(d=ih(f.href),f=gr(E).hoistableStyles,b=f.get(d),b||(b={type:"style",instance:null,count:0,state:null},f.set(d,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=ih(f.href);var F=gr(E).hoistableStyles,le=F.get(l);if(le||(E=E.ownerDocument||E,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},F.set(l,le),(F=E.querySelector(Ux(l)))&&!F._p&&(le.instance=F,le.state.loading=5),Ll.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Ll.set(l,f),F||bM(E,l,f,le.state))),d&&b===null)throw Error(s(528,""));return le}if(d&&b!==null)throw Error(s(529,""));return null;case"script":return d=f.async,f=f.src,typeof f=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=lh(f),f=gr(E).hoistableScripts,b=f.get(d),b||(b={type:"script",instance:null,count:0,state:null},f.set(d,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,l))}}function ih(l){return'href="'+$t(l)+'"'}function Ux(l){return'link[rel="stylesheet"]['+l+"]"}function D4(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function bM(l,d,f,b){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?b.loading=1:(d=l.createElement("link"),b.preload=d,d.addEventListener("load",function(){return b.loading|=1}),d.addEventListener("error",function(){return b.loading|=2}),Cn(d,"link",f),Ra(d),l.head.appendChild(d))}function lh(l){return'[src="'+$t(l)+'"]'}function Wx(l){return"script[async]"+l}function O4(l,d,f){if(d.count++,d.instance===null)switch(d.type){case"style":var b=l.querySelector('style[data-href~="'+$t(f.href)+'"]');if(b)return d.instance=b,Ra(b),b;var E=h({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return b=(l.ownerDocument||l).createElement("style"),Ra(b),Cn(b,"style",E),l0(b,f.precedence,l),d.instance=b;case"stylesheet":E=ih(f.href);var F=l.querySelector(Ux(E));if(F)return d.state.loading|=4,d.instance=F,Ra(F),F;b=D4(f),(E=Ll.get(E))&&cv(b,E),F=(l.ownerDocument||l).createElement("link"),Ra(F);var le=F;return le._p=new Promise(function(be,Me){le.onload=be,le.onerror=Me}),Cn(F,"link",b),d.state.loading|=4,l0(F,f.precedence,l),d.instance=F;case"script":return F=lh(f.src),(E=l.querySelector(Wx(F)))?(d.instance=E,Ra(E),E):(b=f,(E=Ll.get(F))&&(b=h({},f),dv(b,E)),l=l.ownerDocument||l,E=l.createElement("script"),Ra(E),Cn(E,"link",b),l.head.appendChild(E),d.instance=E);case"void":return null;default:throw Error(s(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(b=d.instance,d.state.loading|=4,l0(b,f.precedence,l));return d.instance}function l0(l,d,f){for(var b=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=b.length?b[b.length-1]:null,F=E,le=0;le<b.length;le++){var be=b[le];if(be.dataset.precedence===d)F=be;else if(F!==E)break}F?F.parentNode.insertBefore(l,F.nextSibling):(d=f.nodeType===9?f.head:f,d.insertBefore(l,d.firstChild))}function cv(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function dv(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var o0=null;function L4(l,d,f){if(o0===null){var b=new Map,E=o0=new Map;E.set(f,b)}else E=o0,b=E.get(f),b||(b=new Map,E.set(f,b));if(b.has(l))return b;for(b.set(l,null),f=f.getElementsByTagName(l),E=0;E<f.length;E++){var F=f[E];if(!(F[aa]||F[Ye]||l==="link"&&F.getAttribute("rel")==="stylesheet")&&F.namespaceURI!=="http://www.w3.org/2000/svg"){var le=F.getAttribute(d)||"";le=l+le;var be=b.get(le);be?be.push(F):b.set(le,[F])}}return b}function M4(l,d,f){l=l.ownerDocument||l,l.head.insertBefore(f,d==="title"?l.querySelector("head > title"):null)}function vM(l,d,f){if(f===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function R4(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Hx=null;function jM(){}function NM(l,d,f){if(Hx===null)throw Error(s(475));var b=Hx;if(d.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var E=ih(f.href),F=l.querySelector(Ux(E));if(F){l=F._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(b.count++,b=c0.bind(b),l.then(b,b)),d.state.loading|=4,d.instance=F,Ra(F);return}F=l.ownerDocument||l,f=D4(f),(E=Ll.get(E))&&cv(f,E),F=F.createElement("link"),Ra(F);var le=F;le._p=new Promise(function(be,Me){le.onload=be,le.onerror=Me}),Cn(F,"link",f),d.instance=F}b.stylesheets===null&&(b.stylesheets=new Map),b.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(b.count++,d=c0.bind(b),l.addEventListener("load",d),l.addEventListener("error",d))}}function wM(){if(Hx===null)throw Error(s(475));var l=Hx;return l.stylesheets&&l.count===0&&uv(l,l.stylesheets),0<l.count?function(d){var f=setTimeout(function(){if(l.stylesheets&&uv(l,l.stylesheets),l.unsuspend){var b=l.unsuspend;l.unsuspend=null,b()}},6e4);return l.unsuspend=d,function(){l.unsuspend=null,clearTimeout(f)}}:null}function c0(){if(this.count--,this.count===0){if(this.stylesheets)uv(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var d0=null;function uv(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,d0=new Map,d.forEach(SM,l),d0=null,c0.call(l))}function SM(l,d){if(!(d.state.loading&4)){var f=d0.get(l);if(f)var b=f.get(null);else{f=new Map,d0.set(l,f);for(var E=l.querySelectorAll("link[data-precedence],style[data-precedence]"),F=0;F<E.length;F++){var le=E[F];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(f.set(le.dataset.precedence,le),b=le)}b&&f.set(null,b)}E=d.instance,le=E.getAttribute("data-precedence"),F=f.get(le)||b,F===b&&f.set(null,E),f.set(le,E),this.count++,b=c0.bind(this),E.addEventListener("load",b),E.addEventListener("error",b),F?F.parentNode.insertBefore(E,F.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(E,l.firstChild)),d.state.loading|=4}}var Yx={$$typeof:k,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function _M(l,d,f,b,E,F,le,be){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dt(0),this.hiddenUpdates=Dt(null),this.identifierPrefix=b,this.onUncaughtError=E,this.onCaughtError=F,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function I4(l,d,f,b,E,F,le,be,Me,rt,bt,St){return l=new _M(l,d,f,le,be,Me,rt,St),d=1,F===!0&&(d|=24),F=rn(3,null,null,d),l.current=F,F.stateNode=l,d=fx(),d.refCount++,l.pooledCache=d,d.refCount++,F.memoizedState={element:b,isDehydrated:f,cache:d},tt(F),l}function z4(l){return l?(l=Is,l):Is}function $4(l,d,f,b,E,F){E=z4(E),b.context===null?b.context=E:b.pendingContext=E,b=pt(d),b.payload={element:f},F=F===void 0?null:F,F!==null&&(b.callback=F),f=kt(l,b,d),f!==null&&(Xi(f,l,d),wt(f,l,d))}function B4(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<d?f:d}}function mv(l,d){B4(l,d),(l=l.alternate)&&B4(l,d)}function F4(l){if(l.tag===13){var d=Nc(l,67108864);d!==null&&Xi(d,l,67108864),mv(l,67108864)}}var u0=!0;function CM(l,d,f,b){var E=Y.T;Y.T=null;var F=J.p;try{J.p=2,hv(l,d,f,b)}finally{J.p=F,Y.T=E}}function kM(l,d,f,b){var E=Y.T;Y.T=null;var F=J.p;try{J.p=8,hv(l,d,f,b)}finally{J.p=F,Y.T=E}}function hv(l,d,f,b){if(u0){var E=xv(b);if(E===null)ev(l,d,b,m0,f),U4(l,b);else if(EM(E,l,d,f,b))b.stopPropagation();else if(U4(l,b),d&4&&-1<AM.indexOf(l)){for(;E!==null;){var F=Er(E);if(F!==null)switch(F.tag){case 3:if(F=F.stateNode,F.current.memoizedState.isDehydrated){var le=Ve(F.pendingLanes);if(le!==0){var be=F;for(be.pendingLanes|=2,be.entangledLanes|=2;le;){var Me=1<<31-xt(le);be.entanglements[1]|=Me,le&=~Me}Ko(F),(mr&6)===0&&(Kp=ce()+500,$x(0))}}break;case 13:be=Nc(F,2),be!==null&&Xi(be,F,2),Jp(),mv(F,2)}if(F=xv(b),F===null&&ev(l,d,b,m0,f),F===E)break;E=F}E!==null&&b.stopPropagation()}else ev(l,d,b,null,f)}}function xv(l){return l=Tr(l),fv(l)}var m0=null;function fv(l){if(m0=null,l=dr(l),l!==null){var d=i(l);if(d===null)l=null;else{var f=d.tag;if(f===13){if(l=o(d),l!==null)return l;l=null}else if(f===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return m0=l,null}function q4(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(De()){case ye:return 2;case Ee:return 8;case Ke:case Re:return 32;case Le:return 268435456;default:return 32}default:return 32}}var pv=!1,$d=null,Bd=null,Fd=null,Gx=new Map,Vx=new Map,qd=[],AM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U4(l,d){switch(l){case"focusin":case"focusout":$d=null;break;case"dragenter":case"dragleave":Bd=null;break;case"mouseover":case"mouseout":Fd=null;break;case"pointerover":case"pointerout":Gx.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vx.delete(d.pointerId)}}function Kx(l,d,f,b,E,F){return l===null||l.nativeEvent!==F?(l={blockedOn:d,domEventName:f,eventSystemFlags:b,nativeEvent:F,targetContainers:[E]},d!==null&&(d=Er(d),d!==null&&F4(d)),l):(l.eventSystemFlags|=b,d=l.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),l)}function EM(l,d,f,b,E){switch(d){case"focusin":return $d=Kx($d,l,d,f,b,E),!0;case"dragenter":return Bd=Kx(Bd,l,d,f,b,E),!0;case"mouseover":return Fd=Kx(Fd,l,d,f,b,E),!0;case"pointerover":var F=E.pointerId;return Gx.set(F,Kx(Gx.get(F)||null,l,d,f,b,E)),!0;case"gotpointercapture":return F=E.pointerId,Vx.set(F,Kx(Vx.get(F)||null,l,d,f,b,E)),!0}return!1}function W4(l){var d=dr(l.target);if(d!==null){var f=i(d);if(f!==null){if(d=f.tag,d===13){if(d=o(f),d!==null){l.blockedOn=d,Yt(l.priority,function(){if(f.tag===13){var b=Ki();b=oa(b);var E=Nc(f,b);E!==null&&Xi(E,f,b),mv(f,b)}});return}}else if(d===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function h0(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var f=xv(l.nativeEvent);if(f===null){f=l.nativeEvent;var b=new f.constructor(f.type,f);yi=b,f.target.dispatchEvent(b),yi=null}else return d=Er(f),d!==null&&F4(d),l.blockedOn=f,!1;d.shift()}return!0}function H4(l,d,f){h0(l)&&f.delete(d)}function TM(){pv=!1,$d!==null&&h0($d)&&($d=null),Bd!==null&&h0(Bd)&&(Bd=null),Fd!==null&&h0(Fd)&&(Fd=null),Gx.forEach(H4),Vx.forEach(H4)}function x0(l,d){l.blockedOn===d&&(l.blockedOn=null,pv||(pv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,TM)))}var f0=null;function Y4(l){f0!==l&&(f0=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){f0===l&&(f0=null);for(var d=0;d<l.length;d+=3){var f=l[d],b=l[d+1],E=l[d+2];if(typeof b!="function"){if(fv(b||f)===null)continue;break}var F=Er(f);F!==null&&(l.splice(d,3),d-=3,Pl(F,{pending:!0,data:E,method:f.method,action:b},b,E))}}))}function Xx(l){function d(Me){return x0(Me,l)}$d!==null&&x0($d,l),Bd!==null&&x0(Bd,l),Fd!==null&&x0(Fd,l),Gx.forEach(d),Vx.forEach(d);for(var f=0;f<qd.length;f++){var b=qd[f];b.blockedOn===l&&(b.blockedOn=null)}for(;0<qd.length&&(f=qd[0],f.blockedOn===null);)W4(f),f.blockedOn===null&&qd.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(b=0;b<f.length;b+=3){var E=f[b],F=f[b+1],le=E[Et]||null;if(typeof F=="function")le||Y4(f);else if(le){var be=null;if(F&&F.hasAttribute("formAction")){if(E=F,le=F[Et]||null)be=le.formAction;else if(fv(E)!==null)continue}else be=le.action;typeof be=="function"?f[b+1]=be:(f.splice(b,3),b-=3),Y4(f)}}}function gv(l){this._internalRoot=l}p0.prototype.render=gv.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(s(409));var f=d.current,b=Ki();$4(f,b,l,d,null,null)},p0.prototype.unmount=gv.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;$4(l.current,2,null,l,null,null),Jp(),d[na]=null}};function p0(l){this._internalRoot=l}p0.prototype.unstable_scheduleHydration=function(l){if(l){var d=Ka();l={blockedOn:null,target:l,priority:d};for(var f=0;f<qd.length&&d!==0&&d<qd[f].priority;f++);qd.splice(f,0,l),f===0&&W4(l)}};var G4=a.version;if(G4!=="19.1.1")throw Error(s(527,G4,"19.1.1"));J.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return l=u(d),l=l!==null?m(l):null,l=l===null?null:l.stateNode,l};var PM={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var g0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!g0.isDisabled&&g0.supportsFiber)try{ct=g0.inject(PM),Nt=g0}catch{}}return Zx.createRoot=function(l,d){if(!n(l))throw Error(s(299));var f=!1,b="",E=cw,F=dw,le=uw,be=null;return d!=null&&(d.unstable_strictMode===!0&&(f=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(E=d.onUncaughtError),d.onCaughtError!==void 0&&(F=d.onCaughtError),d.onRecoverableError!==void 0&&(le=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(be=d.unstable_transitionCallbacks)),d=I4(l,1,!1,null,null,f,b,E,F,le,be,null),l[na]=d.current,Qb(l),new gv(d)},Zx.hydrateRoot=function(l,d,f){if(!n(l))throw Error(s(299));var b=!1,E="",F=cw,le=dw,be=uw,Me=null,rt=null;return f!=null&&(f.unstable_strictMode===!0&&(b=!0),f.identifierPrefix!==void 0&&(E=f.identifierPrefix),f.onUncaughtError!==void 0&&(F=f.onUncaughtError),f.onCaughtError!==void 0&&(le=f.onCaughtError),f.onRecoverableError!==void 0&&(be=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(Me=f.unstable_transitionCallbacks),f.formState!==void 0&&(rt=f.formState)),d=I4(l,1,!0,d,f??null,b,E,F,le,be,Me,rt),d.context=z4(null),f=d.current,b=Ki(),b=oa(b),E=pt(b),E.callback=null,kt(f,E,b),f=b,d.current.lanes=f,It(d,f),Ko(d),l[na]=d.current,Qb(l),new p0(d)},Zx.version="19.1.1",Zx}var r6;function FM(){if(r6)return vv.exports;r6=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),vv.exports=BM(),vv.exports}var qM=FM(),B7=$7();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sf(){return Sf=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Sf.apply(this,arguments)}var Xd;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Xd||(Xd={}));const s6="popstate";function UM(t){t===void 0&&(t={});function a(s,n){let{pathname:i,search:o,hash:c}=s.location;return U2("",{pathname:i,search:o,hash:c},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(s,n){return typeof n=="string"?n:lg(n)}return HM(a,r,null,t)}function rs(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function F7(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function WM(){return Math.random().toString(36).substr(2,8)}function n6(t,a){return{usr:t.state,key:t.key,idx:a}}function U2(t,a,r,s){return r===void 0&&(r=null),Sf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof a=="string"?Uh(a):a,{state:r,key:a&&a.key||s||WM()})}function lg(t){let{pathname:a="/",search:r="",hash:s=""}=t;return r&&r!=="?"&&(a+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(a+=s.charAt(0)==="#"?s:"#"+s),a}function Uh(t){let a={};if(t){let r=t.indexOf("#");r>=0&&(a.hash=t.substr(r),t=t.substr(0,r));let s=t.indexOf("?");s>=0&&(a.search=t.substr(s),t=t.substr(0,s)),t&&(a.pathname=t)}return a}function HM(t,a,r,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:i=!1}=s,o=n.history,c=Xd.Pop,u=null,m=h();m==null&&(m=0,o.replaceState(Sf({},o.state,{idx:m}),""));function h(){return(o.state||{idx:null}).idx}function p(){c=Xd.Pop;let w=h(),j=w==null?null:w-m;m=w,u&&u({action:c,location:N.location,delta:j})}function y(w,j){c=Xd.Push;let T=U2(N.location,w,j);m=h()+1;let k=n6(T,m),R=N.createHref(T);try{o.pushState(k,"",R)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;n.location.assign(R)}i&&u&&u({action:c,location:N.location,delta:1})}function g(w,j){c=Xd.Replace;let T=U2(N.location,w,j);m=h();let k=n6(T,m),R=N.createHref(T);o.replaceState(k,"",R),i&&u&&u({action:c,location:N.location,delta:0})}function v(w){let j=n.location.origin!=="null"?n.location.origin:n.location.href,T=typeof w=="string"?w:lg(w);return T=T.replace(/ $/,"%20"),rs(j,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,j)}let N={get action(){return c},get location(){return t(n,o)},listen(w){if(u)throw new Error("A history only accepts one active listener");return n.addEventListener(s6,p),u=w,()=>{n.removeEventListener(s6,p),u=null}},createHref(w){return a(n,w)},createURL:v,encodeLocation(w){let j=v(w);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:y,replace:g,go(w){return o.go(w)}};return N}var i6;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(i6||(i6={}));function YM(t,a,r){return r===void 0&&(r="/"),GM(t,a,r)}function GM(t,a,r,s){let n=typeof a=="string"?Uh(a):a,i=Eh(n.pathname||"/",r);if(i==null)return null;let o=q7(t);VM(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let m=nR(i);c=rR(o[u],m)}return c}function q7(t,a,r,s){a===void 0&&(a=[]),r===void 0&&(r=[]),s===void 0&&(s="");let n=(i,o,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(rs(u.relativePath.startsWith(s),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(s.length));let m=eu([s,u.relativePath]),h=r.concat(u);i.children&&i.children.length>0&&(rs(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),q7(i.children,a,h,m)),!(i.path==null&&!i.index)&&a.push({path:m,score:tR(m,i.index),routesMeta:h})};return t.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))n(i,o);else for(let u of U7(i.path))n(i,o,u)}),a}function U7(t){let a=t.split("/");if(a.length===0)return[];let[r,...s]=a,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return n?[i,""]:[i];let o=U7(s.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),n&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function VM(t){t.sort((a,r)=>a.score!==r.score?r.score-a.score:aR(a.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const KM=/^:[\w-]+$/,XM=3,JM=2,ZM=1,QM=10,eR=-2,l6=t=>t==="*";function tR(t,a){let r=t.split("/"),s=r.length;return r.some(l6)&&(s+=eR),a&&(s+=JM),r.filter(n=>!l6(n)).reduce((n,i)=>n+(KM.test(i)?XM:i===""?ZM:QM),s)}function aR(t,a){return t.length===a.length&&t.slice(0,-1).every((s,n)=>s===a[n])?t[t.length-1]-a[a.length-1]:0}function rR(t,a,r){let{routesMeta:s}=t,n={},i="/",o=[];for(let c=0;c<s.length;++c){let u=s[c],m=c===s.length-1,h=i==="/"?a:a.slice(i.length)||"/",p=W2({path:u.relativePath,caseSensitive:u.caseSensitive,end:m},h),y=u.route;if(!p)return null;Object.assign(n,p.params),o.push({params:n,pathname:eu([i,p.pathname]),pathnameBase:cR(eu([i,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(i=eu([i,p.pathnameBase]))}return o}function W2(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=sR(t.path,t.caseSensitive,t.end),n=a.match(r);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),c=n.slice(1);return{params:s.reduce((m,h,p)=>{let{paramName:y,isOptional:g}=h;if(y==="*"){let N=c[p]||"";o=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const v=c[p];return g&&!v?m[y]=void 0:m[y]=(v||"").replace(/%2F/g,"/"),m},{}),pathname:i,pathnameBase:o,pattern:t}}function sR(t,a,r){a===void 0&&(a=!1),r===void 0&&(r=!0),F7(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(s.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,a?void 0:"i"),s]}function nR(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return F7(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+a+").")),t}}function Eh(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let r=a.endsWith("/")?a.length-1:a.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}function iR(t,a){a===void 0&&(a="/");let{pathname:r,search:s="",hash:n=""}=typeof t=="string"?Uh(t):t;return{pathname:r?r.startsWith("/")?r:lR(r,a):a,search:dR(s),hash:uR(n)}}function lR(t,a){let r=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function Sv(t,a,r,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+a+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oR(t){return t.filter((a,r)=>r===0||a.route.path&&a.route.path.length>0)}function _N(t,a){let r=oR(t);return a?r.map((s,n)=>n===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function CN(t,a,r,s){s===void 0&&(s=!1);let n;typeof t=="string"?n=Uh(t):(n=Sf({},t),rs(!n.pathname||!n.pathname.includes("?"),Sv("?","pathname","search",n)),rs(!n.pathname||!n.pathname.includes("#"),Sv("#","pathname","hash",n)),rs(!n.search||!n.search.includes("#"),Sv("#","search","hash",n)));let i=t===""||n.pathname==="",o=i?"/":n.pathname,c;if(o==null)c=r;else{let p=a.length-1;if(!s&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),p-=1;n.pathname=y.join("/")}c=p>=0?a[p]:"/"}let u=iR(n,c),m=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(m||h)&&(u.pathname+="/"),u}const eu=t=>t.join("/").replace(/\/\/+/g,"/"),cR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,uR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const W7=["post","put","patch","delete"];new Set(W7);const hR=["get",...W7];new Set(hR);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _f(){return _f=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},_f.apply(this,arguments)}const iy=x.createContext(null),H7=x.createContext(null),sd=x.createContext(null),ly=x.createContext(null),cc=x.createContext({outlet:null,matches:[],isDataRoute:!1}),Y7=x.createContext(null);function xR(t,a){let{relative:r}=a===void 0?{}:a;Wh()||rs(!1);let{basename:s,navigator:n}=x.useContext(sd),{hash:i,pathname:o,search:c}=oy(t,{relative:r}),u=o;return s!=="/"&&(u=o==="/"?s:eu([s,o])),n.createHref({pathname:u,search:c,hash:i})}function Wh(){return x.useContext(ly)!=null}function Co(){return Wh()||rs(!1),x.useContext(ly).location}function G7(t){x.useContext(sd).static||x.useLayoutEffect(t)}function Da(){let{isDataRoute:t}=x.useContext(cc);return t?ER():fR()}function fR(){Wh()||rs(!1);let t=x.useContext(iy),{basename:a,future:r,navigator:s}=x.useContext(sd),{matches:n}=x.useContext(cc),{pathname:i}=Co(),o=JSON.stringify(_N(n,r.v7_relativeSplatPath)),c=x.useRef(!1);return G7(()=>{c.current=!0}),x.useCallback(function(m,h){if(h===void 0&&(h={}),!c.current)return;if(typeof m=="number"){s.go(m);return}let p=CN(m,JSON.parse(o),i,h.relative==="path");t==null&&a!=="/"&&(p.pathname=p.pathname==="/"?a:eu([a,p.pathname])),(h.replace?s.replace:s.push)(p,h.state,h)},[a,s,o,i,t])}const pR=x.createContext(null);function gR(t){let a=x.useContext(cc).outlet;return a&&x.createElement(pR.Provider,{value:t},a)}function Tn(){let{matches:t}=x.useContext(cc),a=t[t.length-1];return a?a.params:{}}function oy(t,a){let{relative:r}=a===void 0?{}:a,{future:s}=x.useContext(sd),{matches:n}=x.useContext(cc),{pathname:i}=Co(),o=JSON.stringify(_N(n,s.v7_relativeSplatPath));return x.useMemo(()=>CN(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function yR(t,a){return bR(t,a)}function bR(t,a,r,s){Wh()||rs(!1);let{navigator:n}=x.useContext(sd),{matches:i}=x.useContext(cc),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let m=Co(),h;if(a){var p;let w=typeof a=="string"?Uh(a):a;u==="/"||(p=w.pathname)!=null&&p.startsWith(u)||rs(!1),h=w}else h=m;let y=h.pathname||"/",g=y;if(u!=="/"){let w=u.replace(/^\//,"").split("/");g="/"+y.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=YM(t,{pathname:g}),N=SR(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:eu([u,n.encodeLocation?n.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:eu([u,n.encodeLocation?n.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,s);return a&&N?x.createElement(ly.Provider,{value:{location:_f({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Xd.Pop}},N):N}function vR(){let t=AR(),a=mR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},a),r?x.createElement("pre",{style:n},r):null,null)}const jR=x.createElement(vR,null);class NR extends x.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,r){return r.location!==a.location||r.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:r.error,location:r.location,revalidation:a.revalidation||r.revalidation}}componentDidCatch(a,r){console.error("React Router caught the following error during render",a,r)}render(){return this.state.error!==void 0?x.createElement(cc.Provider,{value:this.props.routeContext},x.createElement(Y7.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wR(t){let{routeContext:a,match:r,children:s}=t,n=x.useContext(iy);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),x.createElement(cc.Provider,{value:a},s)}function SR(t,a,r,s){var n;if(a===void 0&&(a=[]),r===void 0&&(r=null),s===void 0&&(s=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&a.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,c=(n=r)==null?void 0:n.errors;if(c!=null){let h=o.findIndex(p=>p.route.id&&c?.[p.route.id]!==void 0);h>=0||rs(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,m=-1;if(r&&s&&s.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(m=h),p.route.id){let{loaderData:y,errors:g}=r,v=p.route.loader&&y[p.route.id]===void 0&&(!g||g[p.route.id]===void 0);if(p.route.lazy||v){u=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((h,p,y)=>{let g,v=!1,N=null,w=null;r&&(g=c&&p.route.id?c[p.route.id]:void 0,N=p.route.errorElement||jR,u&&(m<0&&y===0?(TR("route-fallback"),v=!0,w=null):m===y&&(v=!0,w=p.route.hydrateFallbackElement||null)));let j=a.concat(o.slice(0,y+1)),T=()=>{let k;return g?k=N:v?k=w:p.route.Component?k=x.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=h,x.createElement(wR,{match:p,routeContext:{outlet:h,matches:j,isDataRoute:r!=null},children:k})};return r&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?x.createElement(NR,{location:r.location,revalidation:r.revalidation,component:N,error:g,children:T(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):T()},null)}var V7=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(V7||{}),K7=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(K7||{});function _R(t){let a=x.useContext(iy);return a||rs(!1),a}function CR(t){let a=x.useContext(H7);return a||rs(!1),a}function kR(t){let a=x.useContext(cc);return a||rs(!1),a}function X7(t){let a=kR(),r=a.matches[a.matches.length-1];return r.route.id||rs(!1),r.route.id}function AR(){var t;let a=x.useContext(Y7),r=CR(),s=X7();return a!==void 0?a:(t=r.errors)==null?void 0:t[s]}function ER(){let{router:t}=_R(V7.UseNavigateStable),a=X7(K7.UseNavigateStable),r=x.useRef(!1);return G7(()=>{r.current=!0}),x.useCallback(function(n,i){i===void 0&&(i={}),r.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,_f({fromRouteId:a},i)))},[t,a])}const o6={};function TR(t,a,r){o6[t]||(o6[t]=!0)}function PR(t,a){t?.v7_startTransition,t?.v7_relativeSplatPath}function _v(t){let{to:a,replace:r,state:s,relative:n}=t;Wh()||rs(!1);let{future:i,static:o}=x.useContext(sd),{matches:c}=x.useContext(cc),{pathname:u}=Co(),m=Da(),h=CN(a,_N(c,i.v7_relativeSplatPath),u,n==="path"),p=JSON.stringify(h);return x.useEffect(()=>m(JSON.parse(p),{replace:r,state:s,relative:n}),[m,p,n,r,s]),null}function DR(t){return gR(t.context)}function Pt(t){rs(!1)}function OR(t){let{basename:a="/",children:r=null,location:s,navigationType:n=Xd.Pop,navigator:i,static:o=!1,future:c}=t;Wh()&&rs(!1);let u=a.replace(/^\/*/,"/"),m=x.useMemo(()=>({basename:u,navigator:i,static:o,future:_f({v7_relativeSplatPath:!1},c)}),[u,c,i,o]);typeof s=="string"&&(s=Uh(s));let{pathname:h="/",search:p="",hash:y="",state:g=null,key:v="default"}=s,N=x.useMemo(()=>{let w=Eh(h,u);return w==null?null:{location:{pathname:w,search:p,hash:y,state:g,key:v},navigationType:n}},[u,h,p,y,g,v,n]);return N==null?null:x.createElement(sd.Provider,{value:m},x.createElement(ly.Provider,{children:r,value:N}))}function LR(t){let{children:a,location:r}=t;return yR(H2(a),r)}new Promise(()=>{});function H2(t,a){a===void 0&&(a=[]);let r=[];return x.Children.forEach(t,(s,n)=>{if(!x.isValidElement(s))return;let i=[...a,n];if(s.type===x.Fragment){r.push.apply(r,H2(s.props.children,i));return}s.type!==Pt&&rs(!1),!s.props.index||!s.props.children||rs(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=H2(s.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function og(){return og=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},og.apply(this,arguments)}function J7(t,a){if(t==null)return{};var r={},s=Object.keys(t),n,i;for(i=0;i<s.length;i++)n=s[i],!(a.indexOf(n)>=0)&&(r[n]=t[n]);return r}function MR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function RR(t,a){return t.button===0&&(!a||a==="_self")&&!MR(t)}function Y2(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,r)=>{let s=t[r];return a.concat(Array.isArray(s)?s.map(n=>[r,n]):[[r,s]])},[]))}function IR(t,a){let r=Y2(t);return a&&a.forEach((s,n)=>{r.has(n)||a.getAll(n).forEach(i=>{r.append(n,i)})}),r}const zR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$R=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],BR="6";try{window.__reactRouterVersion=BR}catch{}const FR=x.createContext({isTransitioning:!1}),qR="startTransition",c6=z7[qR];function UR(t){let{basename:a,children:r,future:s,window:n}=t,i=x.useRef();i.current==null&&(i.current=UM({window:n,v5Compat:!0}));let o=i.current,[c,u]=x.useState({action:o.action,location:o.location}),{v7_startTransition:m}=s||{},h=x.useCallback(p=>{m&&c6?c6(()=>u(p)):u(p)},[u,m]);return x.useLayoutEffect(()=>o.listen(h),[o,h]),x.useEffect(()=>PR(s),[s]),x.createElement(OR,{basename:a,children:r,location:c.location,navigationType:c.action,navigator:o,future:s})}const WR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ss=x.forwardRef(function(a,r){let{onClick:s,relative:n,reloadDocument:i,replace:o,state:c,target:u,to:m,preventScrollReset:h,viewTransition:p}=a,y=J7(a,zR),{basename:g}=x.useContext(sd),v,N=!1;if(typeof m=="string"&&HR.test(m)&&(v=m,WR))try{let k=new URL(window.location.href),R=m.startsWith("//")?new URL(k.protocol+m):new URL(m),P=Eh(R.pathname,g);R.origin===k.origin&&P!=null?m=P+R.search+R.hash:N=!0}catch{}let w=xR(m,{relative:n}),j=VR(m,{replace:o,state:c,target:u,preventScrollReset:h,relative:n,viewTransition:p});function T(k){s&&s(k),k.defaultPrevented||j(k)}return x.createElement("a",og({},y,{href:v||w,onClick:N||i?s:T,ref:r,target:u}))}),YR=x.forwardRef(function(a,r){let{"aria-current":s="page",caseSensitive:n=!1,className:i="",end:o=!1,style:c,to:u,viewTransition:m,children:h}=a,p=J7(a,$R),y=oy(u,{relative:p.relative}),g=Co(),v=x.useContext(H7),{navigator:N,basename:w}=x.useContext(sd),j=v!=null&&KR(y)&&m===!0,T=N.encodeLocation?N.encodeLocation(y).pathname:y.pathname,k=g.pathname,R=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(k=k.toLowerCase(),R=R?R.toLowerCase():null,T=T.toLowerCase()),R&&w&&(R=Eh(R,w)||R);const P=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let $=k===T||!o&&k.startsWith(T)&&k.charAt(P)==="/",A=R!=null&&(R===T||!o&&R.startsWith(T)&&R.charAt(T.length)==="/"),M={isActive:$,isPending:A,isTransitioning:j},_=$?s:void 0,B;typeof i=="function"?B=i(M):B=[i,$?"active":null,A?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let D=typeof c=="function"?c(M):c;return x.createElement(ss,og({},p,{"aria-current":_,className:B,ref:r,style:D,to:u,viewTransition:m}),typeof h=="function"?h(M):h)});var G2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(G2||(G2={}));var d6;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(d6||(d6={}));function GR(t){let a=x.useContext(iy);return a||rs(!1),a}function VR(t,a){let{target:r,replace:s,state:n,preventScrollReset:i,relative:o,viewTransition:c}=a===void 0?{}:a,u=Da(),m=Co(),h=oy(t,{relative:o});return x.useCallback(p=>{if(RR(p,r)){p.preventDefault();let y=s!==void 0?s:lg(m)===lg(h);u(t,{replace:y,state:n,preventScrollReset:i,relative:o,viewTransition:c})}},[m,u,h,s,n,r,t,i,o,c])}function Z7(t){let a=x.useRef(Y2(t)),r=x.useRef(!1),s=Co(),n=x.useMemo(()=>IR(s.search,r.current?null:a.current),[s.search]),i=Da(),o=x.useCallback((c,u)=>{const m=Y2(typeof c=="function"?c(n):c);r.current=!0,i("?"+m,u)},[i,n]);return[n,o]}function KR(t,a){a===void 0&&(a={});let r=x.useContext(FR);r==null&&rs(!1);let{basename:s}=GR(G2.useViewTransitionState),n=oy(t,{relative:a.relative});if(!r.isTransitioning)return!1;let i=Eh(r.currentLocation.pathname,s)||r.currentLocation.pathname,o=Eh(r.nextLocation.pathname,s)||r.nextLocation.pathname;return W2(n.pathname,o)!=null||W2(n.pathname,i)!=null}const se="https://secondary.server.brooklynprivatecollege.co.zw/api",Q7=x.createContext(),At=()=>{const t=x.useContext(Q7);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},XR=({children:t})=>{const[a,r]=x.useState(null),[s,n]=x.useState(localStorage.getItem("token")),[i,o]=x.useState(!0),[c,u]=x.useState(!1);x.useEffect(()=>{(async()=>{const g=localStorage.getItem("token"),v=localStorage.getItem("user");if(g&&v)try{if((await fetch(`${se}/auth/profile`,{method:"GET",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}})).ok){const w=JSON.parse(v);r(w),n(g),u(!0)}else localStorage.removeItem("token"),localStorage.removeItem("user"),n(null),r(null),u(!1)}catch(N){console.error("Token validation error:",N),localStorage.removeItem("token"),localStorage.removeItem("user"),n(null),r(null),u(!1)}o(!1)})()},[]);const p={user:a,token:s,isLoading:i,isAuthenticated:c,login:async(y,g)=>{o(!0);try{const v=await fetch(`${se}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:y,password:g})}),N=v.headers.get("content-type");let w;if(N&&N.includes("application/json"))w=await v.json(),console.log(" Backend response:",w);else{const j=await v.text();throw console.log(" Non-JSON response:",j),v.status===429?new Error("Too many login attempts. Please wait a moment and try again."):new Error(`Server error: ${j}`)}if(v.ok){const{token:j,user:T}=w;return console.log(" Login successful, user:",T),r(T),n(j),u(!0),localStorage.setItem("token",j),localStorage.setItem("user",JSON.stringify(T)),o(!1),{success:!0,user:T}}else throw new Error(w.error||"Username or password is wrong")}catch(v){throw console.error(" Login error:",v),o(!1),v}},logout:()=>{r(null),n(null),u(!1),localStorage.removeItem("token"),localStorage.removeItem("user")}};return e.jsx(Q7.Provider,{value:p,children:t})};/*!
 * Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */function V2(t,a){(a==null||a>t.length)&&(a=t.length);for(var r=0,s=Array(a);r<a;r++)s[r]=t[r];return s}function JR(t){if(Array.isArray(t))return t}function ZR(t){if(Array.isArray(t))return V2(t)}function QR(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function eI(t,a){for(var r=0;r<a.length;r++){var s=a[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,eA(s.key),s)}}function tI(t,a,r){return a&&eI(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function H0(t,a){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=kN(t))||a){r&&(t=r);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var u=r.next();return o=u.done,u},e:function(u){c=!0,i=u},f:function(){try{o||r.return==null||r.return()}finally{if(c)throw i}}}}function Va(t,a,r){return(a=eA(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function aI(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rI(t,a){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,n,i,o,c=[],u=!0,m=!1;try{if(i=(r=r.call(t)).next,a===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(s=i.call(r)).done)&&(c.push(s.value),c.length!==a);u=!0);}catch(h){m=!0,n=h}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(m)throw n}}return c}}function sI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nI(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u6(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Lt(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?u6(Object(r),!0).forEach(function(s){Va(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u6(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function cy(t,a){return JR(t)||rI(t,a)||kN(t,a)||sI()}function So(t){return ZR(t)||aI(t)||kN(t)||nI()}function iI(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function eA(t){var a=iI(t,"string");return typeof a=="symbol"?a:a+""}function cg(t){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},cg(t)}function kN(t,a){if(t){if(typeof t=="string")return V2(t,a);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V2(t,a):void 0}}var m6=function(){},AN={},tA={},aA=null,rA={mark:m6,measure:m6};try{typeof window<"u"&&(AN=window),typeof document<"u"&&(tA=document),typeof MutationObserver<"u"&&(aA=MutationObserver),typeof performance<"u"&&(rA=performance)}catch{}var lI=AN.navigator||{},h6=lI.userAgent,x6=h6===void 0?"":h6,ru=AN,Br=tA,f6=aA,y0=rA;ru.document;var nd=!!Br.documentElement&&!!Br.head&&typeof Br.addEventListener=="function"&&typeof Br.createElement=="function",sA=~x6.indexOf("MSIE")||~x6.indexOf("Trident/"),Cv,oI=/fa(k|kd|s|r|l|t|d|dr|dl|dt|b|slr|slpr|wsb|tl|ns|nds|es|jr|jfr|jdr|cr|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,cI=/Font ?Awesome ?([567 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit|Notdog Duo|Notdog|Chisel|Etch|Thumbprint|Jelly Fill|Jelly Duo|Jelly|Slab Press|Slab|Whiteboard)?.*/i,nA={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"},slab:{"fa-regular":"regular",faslr:"regular"},"slab-press":{"fa-regular":"regular",faslpr:"regular"},thumbprint:{"fa-light":"light",fatl:"light"},whiteboard:{"fa-semibold":"semibold",fawsb:"semibold"},notdog:{"fa-solid":"solid",fans:"solid"},"notdog-duo":{"fa-solid":"solid",fands:"solid"},etch:{"fa-solid":"solid",faes:"solid"},jelly:{"fa-regular":"regular",fajr:"regular"},"jelly-fill":{"fa-regular":"regular",fajfr:"regular"},"jelly-duo":{"fa-regular":"regular",fajdr:"regular"},chisel:{"fa-regular":"regular",facr:"regular"}},dI={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},iA=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-thumbprint","fa-whiteboard","fa-notdog","fa-notdog-duo","fa-chisel","fa-etch","fa-jelly","fa-jelly-fill","fa-jelly-duo","fa-slab","fa-slab-press"],Gn="classic",Uf="duotone",lA="sharp",oA="sharp-duotone",cA="chisel",dA="etch",uA="jelly",mA="jelly-duo",hA="jelly-fill",xA="notdog",fA="notdog-duo",pA="slab",gA="slab-press",yA="thumbprint",bA="whiteboard",uI="Classic",mI="Duotone",hI="Sharp",xI="Sharp Duotone",fI="Chisel",pI="Etch",gI="Jelly",yI="Jelly Duo",bI="Jelly Fill",vI="Notdog",jI="Notdog Duo",NI="Slab",wI="Slab Press",SI="Thumbprint",_I="Whiteboard",vA=[Gn,Uf,lA,oA,cA,dA,uA,mA,hA,xA,fA,pA,gA,yA,bA];Cv={},Va(Va(Va(Va(Va(Va(Va(Va(Va(Va(Cv,Gn,uI),Uf,mI),lA,hI),oA,xI),cA,fI),dA,pI),uA,gI),mA,yI),hA,bI),xA,vI),Va(Va(Va(Va(Va(Cv,fA,jI),pA,NI),gA,wI),yA,SI),bA,_I);var CI={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"},slab:{400:"faslr"},"slab-press":{400:"faslpr"},whiteboard:{600:"fawsb"},thumbprint:{300:"fatl"},notdog:{900:"fans"},"notdog-duo":{900:"fands"},etch:{900:"faes"},chisel:{400:"facr"},jelly:{400:"fajr"},"jelly-fill":{400:"fajfr"},"jelly-duo":{400:"fajdr"}},kI={"Font Awesome 7 Free":{900:"fas",400:"far"},"Font Awesome 7 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 7 Brands":{400:"fab",normal:"fab"},"Font Awesome 7 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 7 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 7 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"},"Font Awesome 7 Jelly":{400:"fajr",normal:"fajr"},"Font Awesome 7 Jelly Fill":{400:"fajfr",normal:"fajfr"},"Font Awesome 7 Jelly Duo":{400:"fajdr",normal:"fajdr"},"Font Awesome 7 Slab":{400:"faslr",normal:"faslr"},"Font Awesome 7 Slab Press":{400:"faslpr",normal:"faslpr"},"Font Awesome 7 Thumbprint":{300:"fatl",normal:"fatl"},"Font Awesome 7 Notdog":{900:"fans",normal:"fans"},"Font Awesome 7 Notdog Duo":{900:"fands",normal:"fands"},"Font Awesome 7 Etch":{900:"faes",normal:"faes"},"Font Awesome 7 Chisel":{400:"facr",normal:"facr"},"Font Awesome 7 Whiteboard":{600:"fawsb",normal:"fawsb"}},AI=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["chisel",{defaultShortPrefixId:"facr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["etch",{defaultShortPrefixId:"faes",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["jelly",{defaultShortPrefixId:"fajr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["jelly-duo",{defaultShortPrefixId:"fajdr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["jelly-fill",{defaultShortPrefixId:"fajfr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["notdog",{defaultShortPrefixId:"fans",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["notdog-duo",{defaultShortPrefixId:"fands",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["slab",{defaultShortPrefixId:"faslr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["slab-press",{defaultShortPrefixId:"faslpr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["thumbprint",{defaultShortPrefixId:"fatl",defaultStyleId:"light",styleIds:["light"],futureStyleIds:[],defaultFontWeight:300}],["whiteboard",{defaultShortPrefixId:"fawsb",defaultStyleId:"semibold",styleIds:["semibold"],futureStyleIds:[],defaultFontWeight:600}]]),EI={chisel:{regular:"facr"},classic:{brands:"fab",light:"fal",regular:"far",solid:"fas",thin:"fat"},duotone:{light:"fadl",regular:"fadr",solid:"fad",thin:"fadt"},etch:{solid:"faes"},jelly:{regular:"fajr"},"jelly-duo":{regular:"fajdr"},"jelly-fill":{regular:"fajfr"},notdog:{solid:"fans"},"notdog-duo":{solid:"fands"},sharp:{light:"fasl",regular:"fasr",solid:"fass",thin:"fast"},"sharp-duotone":{light:"fasdl",regular:"fasdr",solid:"fasds",thin:"fasdt"},slab:{regular:"faslr"},"slab-press":{regular:"faslpr"},thumbprint:{light:"fatl"},whiteboard:{semibold:"fawsb"}},jA=["fak","fa-kit","fakd","fa-kit-duotone"],p6={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},TI=["kit"],PI="kit",DI="kit-duotone",OI="Kit",LI="Kit Duotone";Va(Va({},PI,OI),DI,LI);var MI={kit:{"fa-kit":"fak"}},RI={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},II={kit:{fak:"fa-kit"}},g6={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},kv,b0={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},zI=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-thumbprint","fa-whiteboard","fa-notdog","fa-notdog-duo","fa-chisel","fa-etch","fa-jelly","fa-jelly-fill","fa-jelly-duo","fa-slab","fa-slab-press"],$I="classic",BI="duotone",FI="sharp",qI="sharp-duotone",UI="chisel",WI="etch",HI="jelly",YI="jelly-duo",GI="jelly-fill",VI="notdog",KI="notdog-duo",XI="slab",JI="slab-press",ZI="thumbprint",QI="whiteboard",ez="Classic",tz="Duotone",az="Sharp",rz="Sharp Duotone",sz="Chisel",nz="Etch",iz="Jelly",lz="Jelly Duo",oz="Jelly Fill",cz="Notdog",dz="Notdog Duo",uz="Slab",mz="Slab Press",hz="Thumbprint",xz="Whiteboard";kv={},Va(Va(Va(Va(Va(Va(Va(Va(Va(Va(kv,$I,ez),BI,tz),FI,az),qI,rz),UI,sz),WI,nz),HI,iz),YI,lz),GI,oz),VI,cz),Va(Va(Va(Va(Va(kv,KI,dz),XI,uz),JI,mz),ZI,hz),QI,xz);var fz="kit",pz="kit-duotone",gz="Kit",yz="Kit Duotone";Va(Va({},fz,gz),pz,yz);var bz={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"},slab:{"fa-regular":"faslr"},"slab-press":{"fa-regular":"faslpr"},whiteboard:{"fa-semibold":"fawsb"},thumbprint:{"fa-light":"fatl"},notdog:{"fa-solid":"fans"},"notdog-duo":{"fa-solid":"fands"},etch:{"fa-solid":"faes"},jelly:{"fa-regular":"fajr"},"jelly-fill":{"fa-regular":"fajfr"},"jelly-duo":{"fa-regular":"fajdr"},chisel:{"fa-regular":"facr"}},vz={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"],slab:["faslr"],"slab-press":["faslpr"],whiteboard:["fawsb"],thumbprint:["fatl"],notdog:["fans"],"notdog-duo":["fands"],etch:["faes"],jelly:["fajr"],"jelly-fill":["fajfr"],"jelly-duo":["fajdr"],chisel:["facr"]},K2={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"},slab:{faslr:"fa-regular"},"slab-press":{faslpr:"fa-regular"},whiteboard:{fawsb:"fa-semibold"},thumbprint:{fatl:"fa-light"},notdog:{fans:"fa-solid"},"notdog-duo":{fands:"fa-solid"},etch:{faes:"fa-solid"},jelly:{fajr:"fa-regular"},"jelly-fill":{fajfr:"fa-regular"},"jelly-duo":{fajdr:"fa-regular"},chisel:{facr:"fa-regular"}},jz=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands","fa-semibold"],NA=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt","faslr","faslpr","fawsb","fatl","fans","fands","faes","fajr","fajfr","fajdr","facr"].concat(zI,jz),Nz=["solid","regular","light","thin","duotone","brands","semibold"],wA=[1,2,3,4,5,6,7,8,9,10],wz=wA.concat([11,12,13,14,15,16,17,18,19,20]),Sz=["aw","fw","pull-left","pull-right"],_z=[].concat(So(Object.keys(vz)),Nz,Sz,["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","inverse","layers","layers-bottom-left","layers-bottom-right","layers-counter","layers-text","layers-top-left","layers-top-right","li","pull-end","pull-start","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","width-auto","width-fixed",b0.GROUP,b0.SWAP_OPACITY,b0.PRIMARY,b0.SECONDARY]).concat(wA.map(function(t){return"".concat(t,"x")})).concat(wz.map(function(t){return"w-".concat(t)})),Cz={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}},Kc="___FONT_AWESOME___",X2=16,SA="fa",_A="svg-inline--fa",um="data-fa-i2svg",J2="data-fa-pseudo-element",kz="data-fa-pseudo-element-pending",EN="data-prefix",TN="data-icon",y6="fontawesome-i2svg",Az="async",Ez=["HTML","HEAD","STYLE","SCRIPT"],CA=["::before","::after",":before",":after"],kA=function(){try{return!0}catch{return!1}}();function Wf(t){return new Proxy(t,{get:function(r,s){return s in r?r[s]:r[Gn]}})}var AA=Lt({},nA);AA[Gn]=Lt(Lt(Lt(Lt({},{"fa-duotone":"duotone"}),nA[Gn]),p6.kit),p6["kit-duotone"]);var Tz=Wf(AA),Z2=Lt({},EI);Z2[Gn]=Lt(Lt(Lt(Lt({},{duotone:"fad"}),Z2[Gn]),g6.kit),g6["kit-duotone"]);var b6=Wf(Z2),Q2=Lt({},K2);Q2[Gn]=Lt(Lt({},Q2[Gn]),II.kit);var EA=Wf(Q2),ej=Lt({},bz);ej[Gn]=Lt(Lt({},ej[Gn]),MI.kit);Wf(ej);var Pz=oI,TA="fa-layers-text",Dz=cI,Oz=Lt({},CI);Wf(Oz);var Lz=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Av=dI,Mz=[].concat(So(TI),So(_z)),xf=ru.FontAwesomeConfig||{};function Rz(t){var a=Br.querySelector("script["+t+"]");if(a)return a.getAttribute(t)}function Iz(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(Br&&typeof Br.querySelector=="function"){var zz=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-search-pseudo-elements","searchPseudoElements"],["data-search-pseudo-elements-warnings","searchPseudoElementsWarnings"],["data-search-pseudo-elements-full-scan","searchPseudoElementsFullScan"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];zz.forEach(function(t){var a=cy(t,2),r=a[0],s=a[1],n=Iz(Rz(r));n!=null&&(xf[s]=n)})}var PA={styleDefault:"solid",familyDefault:Gn,cssPrefix:SA,replacementClass:_A,autoReplaceSvg:!0,autoAddCss:!0,searchPseudoElements:!1,searchPseudoElementsWarnings:!0,searchPseudoElementsFullScan:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};xf.familyPrefix&&(xf.cssPrefix=xf.familyPrefix);var Th=Lt(Lt({},PA),xf);Th.autoReplaceSvg||(Th.observeMutations=!1);var da={};Object.keys(PA).forEach(function(t){Object.defineProperty(da,t,{enumerable:!0,set:function(r){Th[t]=r,ff.forEach(function(s){return s(da)})},get:function(){return Th[t]}})});Object.defineProperty(da,"familyPrefix",{enumerable:!0,set:function(a){Th.cssPrefix=a,ff.forEach(function(r){return r(da)})},get:function(){return Th.cssPrefix}});ru.FontAwesomeConfig=da;var ff=[];function $z(t){return ff.push(t),function(){ff.splice(ff.indexOf(t),1)}}var oh=X2,ec={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Bz(t){if(!(!t||!nd)){var a=Br.createElement("style");a.setAttribute("type","text/css"),a.innerHTML=t;for(var r=Br.head.childNodes,s=null,n=r.length-1;n>-1;n--){var i=r[n],o=(i.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(s=i)}return Br.head.insertBefore(a,s),t}}var Fz="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function v6(){for(var t=12,a="";t-- >0;)a+=Fz[Math.random()*62|0];return a}function Hh(t){for(var a=[],r=(t||[]).length>>>0;r--;)a[r]=t[r];return a}function PN(t){return t.classList?Hh(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(a){return a})}function DA(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function qz(t){return Object.keys(t||{}).reduce(function(a,r){return a+"".concat(r,'="').concat(DA(t[r]),'" ')},"").trim()}function dy(t){return Object.keys(t||{}).reduce(function(a,r){return a+"".concat(r,": ").concat(t[r].trim(),";")},"")}function DN(t){return t.size!==ec.size||t.x!==ec.x||t.y!==ec.y||t.rotate!==ec.rotate||t.flipX||t.flipY}function Uz(t){var a=t.transform,r=t.containerWidth,s=t.iconWidth,n={transform:"translate(".concat(r/2," 256)")},i="translate(".concat(a.x*32,", ").concat(a.y*32,") "),o="scale(".concat(a.size/16*(a.flipX?-1:1),", ").concat(a.size/16*(a.flipY?-1:1),") "),c="rotate(".concat(a.rotate," 0 0)"),u={transform:"".concat(i," ").concat(o," ").concat(c)},m={transform:"translate(".concat(s/2*-1," -256)")};return{outer:n,inner:u,path:m}}function Wz(t){var a=t.transform,r=t.width,s=r===void 0?X2:r,n=t.height,i=n===void 0?X2:n,o="";return sA?o+="translate(".concat(a.x/oh-s/2,"em, ").concat(a.y/oh-i/2,"em) "):o+="translate(calc(-50% + ".concat(a.x/oh,"em), calc(-50% + ").concat(a.y/oh,"em)) "),o+="scale(".concat(a.size/oh*(a.flipX?-1:1),", ").concat(a.size/oh*(a.flipY?-1:1),") "),o+="rotate(".concat(a.rotate,"deg) "),o}var Hz=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 7 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 7 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 7 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 7 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 7 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 7 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-slab-regular: normal 400 1em/1 "Font Awesome 7 Slab";
  --fa-font-slab-press-regular: normal 400 1em/1 "Font Awesome 7 Slab Press";
  --fa-font-whiteboard-semibold: normal 600 1em/1 "Font Awesome 7 Whiteboard";
  --fa-font-thumbprint-light: normal 300 1em/1 "Font Awesome 7 Thumbprint";
  --fa-font-notdog-solid: normal 900 1em/1 "Font Awesome 7 Notdog";
  --fa-font-notdog-duo-solid: normal 900 1em/1 "Font Awesome 7 Notdog Duo";
  --fa-font-etch-solid: normal 900 1em/1 "Font Awesome 7 Etch";
  --fa-font-jelly-regular: normal 400 1em/1 "Font Awesome 7 Jelly";
  --fa-font-jelly-fill-regular: normal 400 1em/1 "Font Awesome 7 Jelly Fill";
  --fa-font-jelly-duo-regular: normal 400 1em/1 "Font Awesome 7 Jelly Duo";
  --fa-font-chisel-regular: normal 400 1em/1 "Font Awesome 7 Chisel";
}

.svg-inline--fa {
  box-sizing: content-box;
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
  width: var(--fa-width, 1.25em);
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285714em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left,
.svg-inline--fa .fa-pull-start {
  float: inline-start;
  margin-inline-end: var(--fa-pull-margin, 0.3em);
}
.svg-inline--fa.fa-pull-right,
.svg-inline--fa .fa-pull-end {
  float: inline-end;
  margin-inline-start: var(--fa-pull-margin, 0.3em);
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  inset-inline-start: calc(-1 * var(--fa-li-width, 2em));
  inset-block-start: 0.25em; /* syncing vertical alignment with Web Font rendering */
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: var(--fa-width, 1.25em);
}
.fa-layers .svg-inline--fa {
  inset: 0;
  margin: auto;
  position: absolute;
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: calc(10 / 16 * 1em); /* converts a 10px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 10 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 10 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-xs {
  font-size: calc(12 / 16 * 1em); /* converts a 12px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 12 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 12 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-sm {
  font-size: calc(14 / 16 * 1em); /* converts a 14px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 14 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 14 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-lg {
  font-size: calc(20 / 16 * 1em); /* converts a 20px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 20 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 20 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-xl {
  font-size: calc(24 / 16 * 1em); /* converts a 24px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 24 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 24 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-2xl {
  font-size: calc(32 / 16 * 1em); /* converts a 32px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 32 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 32 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-width-auto {
  --fa-width: auto;
}

.fa-fw,
.fa-width-fixed {
  --fa-width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-inline-start: var(--fa-li-margin, 2.5em);
  padding-inline-start: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  inset-inline-start: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

/* Heads Up: Bordered Icons will not be supported in the future!
  - This feature will be deprecated in the next major release of Font Awesome (v8)!
  - You may continue to use it in this version *v7), but it will not be supported in Font Awesome v8.
*/
/* Notes:
* --@{v.$css-prefix}-border-width = 1/16 by default (to render as ~1px based on a 16px default font-size)
* --@{v.$css-prefix}-border-padding =
  ** 3/16 for vertical padding (to give ~2px of vertical whitespace around an icon considering it's vertical alignment)
  ** 4/16 for horizontal padding (to give ~4px of horizontal whitespace around an icon)
*/
.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.0625em);
  box-sizing: var(--fa-border-box-sizing, content-box);
  padding: var(--fa-border-padding, 0.1875em 0.25em);
}

.fa-pull-left,
.fa-pull-start {
  float: inline-start;
  margin-inline-end: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right,
.fa-pull-end {
  float: inline-end;
  margin-inline-start: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
  .fa-bounce,
  .fa-fade,
  .fa-beat-fade,
  .fa-flip,
  .fa-pulse,
  .fa-shake,
  .fa-spin,
  .fa-spin-pulse {
    animation: none !important;
    transition: none !important;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.svg-inline--fa.fa-inverse {
  fill: var(--fa-inverse, #fff);
}

.fa-stack {
  display: inline-block;
  height: 2em;
  line-height: 2em;
  position: relative;
  vertical-align: middle;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}`;function OA(){var t=SA,a=_A,r=da.cssPrefix,s=da.replacementClass,n=Hz;if(r!==t||s!==a){var i=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),c=new RegExp("\\.".concat(a),"g");n=n.replace(i,".".concat(r,"-")).replace(o,"--".concat(r,"-")).replace(c,".".concat(s))}return n}var j6=!1;function Ev(){da.autoAddCss&&!j6&&(Bz(OA()),j6=!0)}var Yz={mixout:function(){return{dom:{css:OA,insertCss:Ev}}},hooks:function(){return{beforeDOMElementCreation:function(){Ev()},beforeI2svg:function(){Ev()}}}},Xc=ru||{};Xc[Kc]||(Xc[Kc]={});Xc[Kc].styles||(Xc[Kc].styles={});Xc[Kc].hooks||(Xc[Kc].hooks={});Xc[Kc].shims||(Xc[Kc].shims=[]);var No=Xc[Kc],LA=[],MA=function(){Br.removeEventListener("DOMContentLoaded",MA),dg=1,LA.map(function(a){return a()})},dg=!1;nd&&(dg=(Br.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Br.readyState),dg||Br.addEventListener("DOMContentLoaded",MA));function Gz(t){nd&&(dg?setTimeout(t,0):LA.push(t))}function Hf(t){var a=t.tag,r=t.attributes,s=r===void 0?{}:r,n=t.children,i=n===void 0?[]:n;return typeof t=="string"?DA(t):"<".concat(a," ").concat(qz(s),">").concat(i.map(Hf).join(""),"</").concat(a,">")}function N6(t,a,r){if(t&&t[a]&&t[a][r])return{prefix:a,iconName:r,icon:t[a][r]}}var Tv=function(a,r,s,n){var i=Object.keys(a),o=i.length,c=r,u,m,h;for(s===void 0?(u=1,h=a[i[0]]):(u=0,h=s);u<o;u++)m=i[u],h=c(h,a[m],m,a);return h};function RA(t){return So(t).length!==1?null:t.codePointAt(0).toString(16)}function w6(t){return Object.keys(t).reduce(function(a,r){var s=t[r],n=!!s.icon;return n?a[s.iconName]=s.icon:a[r]=s,a},{})}function IA(t,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.skipHooks,n=s===void 0?!1:s,i=w6(a);typeof No.hooks.addPack=="function"&&!n?No.hooks.addPack(t,w6(a)):No.styles[t]=Lt(Lt({},No.styles[t]||{}),i),t==="fas"&&IA("fa",a)}var Cf=No.styles,Vz=No.shims,zA=Object.keys(EA),Kz=zA.reduce(function(t,a){return t[a]=Object.keys(EA[a]),t},{}),ON=null,$A={},BA={},FA={},qA={},UA={};function Xz(t){return~Mz.indexOf(t)}function Jz(t,a){var r=a.split("-"),s=r[0],n=r.slice(1).join("-");return s===t&&n!==""&&!Xz(n)?n:null}var WA=function(){var a=function(i){return Tv(Cf,function(o,c,u){return o[u]=Tv(c,i,{}),o},{})};$A=a(function(n,i,o){if(i[3]&&(n[i[3]]=o),i[2]){var c=i[2].filter(function(u){return typeof u=="number"});c.forEach(function(u){n[u.toString(16)]=o})}return n}),BA=a(function(n,i,o){if(n[o]=o,i[2]){var c=i[2].filter(function(u){return typeof u=="string"});c.forEach(function(u){n[u]=o})}return n}),UA=a(function(n,i,o){var c=i[2];return n[o]=o,c.forEach(function(u){n[u]=o}),n});var r="far"in Cf||da.autoFetchSvg,s=Tv(Vz,function(n,i){var o=i[0],c=i[1],u=i[2];return c==="far"&&!r&&(c="fas"),typeof o=="string"&&(n.names[o]={prefix:c,iconName:u}),typeof o=="number"&&(n.unicodes[o.toString(16)]={prefix:c,iconName:u}),n},{names:{},unicodes:{}});FA=s.names,qA=s.unicodes,ON=uy(da.styleDefault,{family:da.familyDefault})};$z(function(t){ON=uy(t.styleDefault,{family:da.familyDefault})});WA();function LN(t,a){return($A[t]||{})[a]}function Zz(t,a){return(BA[t]||{})[a]}function Xu(t,a){return(UA[t]||{})[a]}function HA(t){return FA[t]||{prefix:null,iconName:null}}function Qz(t){var a=qA[t],r=LN("fas",t);return a||(r?{prefix:"fas",iconName:r}:null)||{prefix:null,iconName:null}}function su(){return ON}var YA=function(){return{prefix:null,iconName:null,rest:[]}};function e$(t){var a=Gn,r=zA.reduce(function(s,n){return s[n]="".concat(da.cssPrefix,"-").concat(n),s},{});return vA.forEach(function(s){(t.includes(r[s])||t.some(function(n){return Kz[s].includes(n)}))&&(a=s)}),a}function uy(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=a.family,s=r===void 0?Gn:r,n=Tz[s][t];if(s===Uf&&!t)return"fad";var i=b6[s][t]||b6[s][n],o=t in No.styles?t:null,c=i||o||null;return c}function t$(t){var a=[],r=null;return t.forEach(function(s){var n=Jz(da.cssPrefix,s);n?r=n:s&&a.push(s)}),{iconName:r,rest:a}}function S6(t){return t.sort().filter(function(a,r,s){return s.indexOf(a)===r})}var _6=NA.concat(jA);function my(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=a.skipLookups,s=r===void 0?!1:r,n=null,i=S6(t.filter(function(g){return _6.includes(g)})),o=S6(t.filter(function(g){return!_6.includes(g)})),c=i.filter(function(g){return n=g,!iA.includes(g)}),u=cy(c,1),m=u[0],h=m===void 0?null:m,p=e$(i),y=Lt(Lt({},t$(o)),{},{prefix:uy(h,{family:p})});return Lt(Lt(Lt({},y),n$({values:t,family:p,styles:Cf,config:da,canonical:y,givenPrefix:n})),a$(s,n,y))}function a$(t,a,r){var s=r.prefix,n=r.iconName;if(t||!s||!n)return{prefix:s,iconName:n};var i=a==="fa"?HA(n):{},o=Xu(s,n);return n=i.iconName||o||n,s=i.prefix||s,s==="far"&&!Cf.far&&Cf.fas&&!da.autoFetchSvg&&(s="fas"),{prefix:s,iconName:n}}var r$=vA.filter(function(t){return t!==Gn||t!==Uf}),s$=Object.keys(K2).filter(function(t){return t!==Gn}).map(function(t){return Object.keys(K2[t])}).flat();function n$(t){var a=t.values,r=t.family,s=t.canonical,n=t.givenPrefix,i=n===void 0?"":n,o=t.styles,c=o===void 0?{}:o,u=t.config,m=u===void 0?{}:u,h=r===Uf,p=a.includes("fa-duotone")||a.includes("fad"),y=m.familyDefault==="duotone",g=s.prefix==="fad"||s.prefix==="fa-duotone";if(!h&&(p||y||g)&&(s.prefix="fad"),(a.includes("fa-brands")||a.includes("fab"))&&(s.prefix="fab"),!s.prefix&&r$.includes(r)){var v=Object.keys(c).find(function(w){return s$.includes(w)});if(v||m.autoFetchSvg){var N=AI.get(r).defaultShortPrefixId;s.prefix=N,s.iconName=Xu(s.prefix,s.iconName)||s.iconName}}return(s.prefix==="fa"||i==="fa")&&(s.prefix=su()||"fas"),s}var i$=function(){function t(){QR(this,t),this.definitions={}}return tI(t,[{key:"add",value:function(){for(var r=this,s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];var o=n.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(c){r.definitions[c]=Lt(Lt({},r.definitions[c]||{}),o[c]),IA(c,o[c]),WA()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(r,s){var n=s.prefix&&s.iconName&&s.icon?{0:s}:s;return Object.keys(n).map(function(i){var o=n[i],c=o.prefix,u=o.iconName,m=o.icon,h=m[2];r[c]||(r[c]={}),h.length>0&&h.forEach(function(p){typeof p=="string"&&(r[c][p]=m)}),r[c][u]=m}),r}}])}(),C6=[],fh={},bh={},l$=Object.keys(bh);function o$(t,a){var r=a.mixoutsTo;return C6=t,fh={},Object.keys(bh).forEach(function(s){l$.indexOf(s)===-1&&delete bh[s]}),C6.forEach(function(s){var n=s.mixout?s.mixout():{};if(Object.keys(n).forEach(function(o){typeof n[o]=="function"&&(r[o]=n[o]),cg(n[o])==="object"&&Object.keys(n[o]).forEach(function(c){r[o]||(r[o]={}),r[o][c]=n[o][c]})}),s.hooks){var i=s.hooks();Object.keys(i).forEach(function(o){fh[o]||(fh[o]=[]),fh[o].push(i[o])})}s.provides&&s.provides(bh)}),r}function tj(t,a){for(var r=arguments.length,s=new Array(r>2?r-2:0),n=2;n<r;n++)s[n-2]=arguments[n];var i=fh[t]||[];return i.forEach(function(o){a=o.apply(null,[a].concat(s))}),a}function mm(t){for(var a=arguments.length,r=new Array(a>1?a-1:0),s=1;s<a;s++)r[s-1]=arguments[s];var n=fh[t]||[];n.forEach(function(i){i.apply(null,r)})}function nu(){var t=arguments[0],a=Array.prototype.slice.call(arguments,1);return bh[t]?bh[t].apply(null,a):void 0}function aj(t){t.prefix==="fa"&&(t.prefix="fas");var a=t.iconName,r=t.prefix||su();if(a)return a=Xu(r,a)||a,N6(GA.definitions,r,a)||N6(No.styles,r,a)}var GA=new i$,c$=function(){da.autoReplaceSvg=!1,da.observeMutations=!1,mm("noAuto")},d$={i2svg:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return nd?(mm("beforeI2svg",a),nu("pseudoElements2svg",a),nu("i2svg",a)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=a.autoReplaceSvgRoot;da.autoReplaceSvg===!1&&(da.autoReplaceSvg=!0),da.observeMutations=!0,Gz(function(){m$({autoReplaceSvgRoot:r}),mm("watch",a)})}},u$={icon:function(a){if(a===null)return null;if(cg(a)==="object"&&a.prefix&&a.iconName)return{prefix:a.prefix,iconName:Xu(a.prefix,a.iconName)||a.iconName};if(Array.isArray(a)&&a.length===2){var r=a[1].indexOf("fa-")===0?a[1].slice(3):a[1],s=uy(a[0]);return{prefix:s,iconName:Xu(s,r)||r}}if(typeof a=="string"&&(a.indexOf("".concat(da.cssPrefix,"-"))>-1||a.match(Pz))){var n=my(a.split(" "),{skipLookups:!0});return{prefix:n.prefix||su(),iconName:Xu(n.prefix,n.iconName)||n.iconName}}if(typeof a=="string"){var i=su();return{prefix:i,iconName:Xu(i,a)||a}}}},ll={noAuto:c$,config:da,dom:d$,parse:u$,library:GA,findIconDefinition:aj,toHtml:Hf},m$=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=a.autoReplaceSvgRoot,s=r===void 0?Br:r;(Object.keys(No.styles).length>0||da.autoFetchSvg)&&nd&&da.autoReplaceSvg&&ll.dom.i2svg({node:s})};function hy(t,a){return Object.defineProperty(t,"abstract",{get:a}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(s){return Hf(s)})}}),Object.defineProperty(t,"node",{get:function(){if(nd){var s=Br.createElement("div");return s.innerHTML=t.html,s.children}}}),t}function h$(t){var a=t.children,r=t.main,s=t.mask,n=t.attributes,i=t.styles,o=t.transform;if(DN(o)&&r.found&&!s.found){var c=r.width,u=r.height,m={x:c/u/2,y:.5};n.style=dy(Lt(Lt({},i),{},{"transform-origin":"".concat(m.x+o.x/16,"em ").concat(m.y+o.y/16,"em")}))}return[{tag:"svg",attributes:n,children:a}]}function x$(t){var a=t.prefix,r=t.iconName,s=t.children,n=t.attributes,i=t.symbol,o=i===!0?"".concat(a,"-").concat(da.cssPrefix,"-").concat(r):i;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Lt(Lt({},n),{},{id:o}),children:s}]}]}function f$(t){var a=["aria-label","aria-labelledby","title","role"];return a.some(function(r){return r in t})}function MN(t){var a=t.icons,r=a.main,s=a.mask,n=t.prefix,i=t.iconName,o=t.transform,c=t.symbol,u=t.maskId,m=t.extra,h=t.watchable,p=h===void 0?!1:h,y=s.found?s:r,g=y.width,v=y.height,N=[da.replacementClass,i?"".concat(da.cssPrefix,"-").concat(i):""].filter(function(P){return m.classes.indexOf(P)===-1}).filter(function(P){return P!==""||!!P}).concat(m.classes).join(" "),w={children:[],attributes:Lt(Lt({},m.attributes),{},{"data-prefix":n,"data-icon":i,class:N,role:m.attributes.role||"img",viewBox:"0 0 ".concat(g," ").concat(v)})};!f$(m.attributes)&&!m.attributes["aria-hidden"]&&(w.attributes["aria-hidden"]="true"),p&&(w.attributes[um]="");var j=Lt(Lt({},w),{},{prefix:n,iconName:i,main:r,mask:s,maskId:u,transform:o,symbol:c,styles:Lt({},m.styles)}),T=s.found&&r.found?nu("generateAbstractMask",j)||{children:[],attributes:{}}:nu("generateAbstractIcon",j)||{children:[],attributes:{}},k=T.children,R=T.attributes;return j.children=k,j.attributes=R,c?x$(j):h$(j)}function k6(t){var a=t.content,r=t.width,s=t.height,n=t.transform,i=t.extra,o=t.watchable,c=o===void 0?!1:o,u=Lt(Lt({},i.attributes),{},{class:i.classes.join(" ")});c&&(u[um]="");var m=Lt({},i.styles);DN(n)&&(m.transform=Wz({transform:n,width:r,height:s}),m["-webkit-transform"]=m.transform);var h=dy(m);h.length>0&&(u.style=h);var p=[];return p.push({tag:"span",attributes:u,children:[a]}),p}function p$(t){var a=t.content,r=t.extra,s=Lt(Lt({},r.attributes),{},{class:r.classes.join(" ")}),n=dy(r.styles);n.length>0&&(s.style=n);var i=[];return i.push({tag:"span",attributes:s,children:[a]}),i}var Pv=No.styles;function rj(t){var a=t[0],r=t[1],s=t.slice(4),n=cy(s,1),i=n[0],o=null;return Array.isArray(i)?o={tag:"g",attributes:{class:"".concat(da.cssPrefix,"-").concat(Av.GROUP)},children:[{tag:"path",attributes:{class:"".concat(da.cssPrefix,"-").concat(Av.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(da.cssPrefix,"-").concat(Av.PRIMARY),fill:"currentColor",d:i[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:a,height:r,icon:o}}var g$={found:!1,width:512,height:512};function y$(t,a){!kA&&!da.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(a,'" is missing.'))}function sj(t,a){var r=a;return a==="fa"&&da.styleDefault!==null&&(a=su()),new Promise(function(s,n){if(r==="fa"){var i=HA(t)||{};t=i.iconName||t,a=i.prefix||a}if(t&&a&&Pv[a]&&Pv[a][t]){var o=Pv[a][t];return s(rj(o))}y$(t,a),s(Lt(Lt({},g$),{},{icon:da.showMissingIcons&&t?nu("missingIconAbstract")||{}:{}}))})}var A6=function(){},nj=da.measurePerformance&&y0&&y0.mark&&y0.measure?y0:{mark:A6,measure:A6},uf='FA "7.0.0"',b$=function(a){return nj.mark("".concat(uf," ").concat(a," begins")),function(){return VA(a)}},VA=function(a){nj.mark("".concat(uf," ").concat(a," ends")),nj.measure("".concat(uf," ").concat(a),"".concat(uf," ").concat(a," begins"),"".concat(uf," ").concat(a," ends"))},RN={begin:b$,end:VA},Y0=function(){};function E6(t){var a=t.getAttribute?t.getAttribute(um):null;return typeof a=="string"}function v$(t){var a=t.getAttribute?t.getAttribute(EN):null,r=t.getAttribute?t.getAttribute(TN):null;return a&&r}function j$(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(da.replacementClass)}function N$(){if(da.autoReplaceSvg===!0)return G0.replace;var t=G0[da.autoReplaceSvg];return t||G0.replace}function w$(t){return Br.createElementNS("http://www.w3.org/2000/svg",t)}function S$(t){return Br.createElement(t)}function KA(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=a.ceFn,s=r===void 0?t.tag==="svg"?w$:S$:r;if(typeof t=="string")return Br.createTextNode(t);var n=s(t.tag);Object.keys(t.attributes||[]).forEach(function(o){n.setAttribute(o,t.attributes[o])});var i=t.children||[];return i.forEach(function(o){n.appendChild(KA(o,{ceFn:s}))}),n}function _$(t){var a=" ".concat(t.outerHTML," ");return a="".concat(a,"Font Awesome fontawesome.com "),a}var G0={replace:function(a){var r=a[0];if(r.parentNode)if(a[1].forEach(function(n){r.parentNode.insertBefore(KA(n),r)}),r.getAttribute(um)===null&&da.keepOriginalSource){var s=Br.createComment(_$(r));r.parentNode.replaceChild(s,r)}else r.remove()},nest:function(a){var r=a[0],s=a[1];if(~PN(r).indexOf(da.replacementClass))return G0.replace(a);var n=new RegExp("".concat(da.cssPrefix,"-.*"));if(delete s[0].attributes.id,s[0].attributes.class){var i=s[0].attributes.class.split(" ").reduce(function(c,u){return u===da.replacementClass||u.match(n)?c.toSvg.push(u):c.toNode.push(u),c},{toNode:[],toSvg:[]});s[0].attributes.class=i.toSvg.join(" "),i.toNode.length===0?r.removeAttribute("class"):r.setAttribute("class",i.toNode.join(" "))}var o=s.map(function(c){return Hf(c)}).join(`
`);r.setAttribute(um,""),r.innerHTML=o}};function T6(t){t()}function XA(t,a){var r=typeof a=="function"?a:Y0;if(t.length===0)r();else{var s=T6;da.mutateApproach===Az&&(s=ru.requestAnimationFrame||T6),s(function(){var n=N$(),i=RN.begin("mutate");t.map(n),i(),r()})}}var IN=!1;function JA(){IN=!0}function ij(){IN=!1}var ug=null;function P6(t){if(f6&&da.observeMutations){var a=t.treeCallback,r=a===void 0?Y0:a,s=t.nodeCallback,n=s===void 0?Y0:s,i=t.pseudoElementsCallback,o=i===void 0?Y0:i,c=t.observeMutationsRoot,u=c===void 0?Br:c;ug=new f6(function(m){if(!IN){var h=su();Hh(m).forEach(function(p){if(p.type==="childList"&&p.addedNodes.length>0&&!E6(p.addedNodes[0])&&(da.searchPseudoElements&&o(p.target),r(p.target)),p.type==="attributes"&&p.target.parentNode&&da.searchPseudoElements&&o([p.target],!0),p.type==="attributes"&&E6(p.target)&&~Lz.indexOf(p.attributeName))if(p.attributeName==="class"&&v$(p.target)){var y=my(PN(p.target)),g=y.prefix,v=y.iconName;p.target.setAttribute(EN,g||h),v&&p.target.setAttribute(TN,v)}else j$(p.target)&&n(p.target)})}}),nd&&ug.observe(u,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function C$(){ug&&ug.disconnect()}function k$(t){var a=t.getAttribute("style"),r=[];return a&&(r=a.split(";").reduce(function(s,n){var i=n.split(":"),o=i[0],c=i.slice(1);return o&&c.length>0&&(s[o]=c.join(":").trim()),s},{})),r}function A$(t){var a=t.getAttribute("data-prefix"),r=t.getAttribute("data-icon"),s=t.innerText!==void 0?t.innerText.trim():"",n=my(PN(t));return n.prefix||(n.prefix=su()),a&&r&&(n.prefix=a,n.iconName=r),n.iconName&&n.prefix||(n.prefix&&s.length>0&&(n.iconName=Zz(n.prefix,t.innerText)||LN(n.prefix,RA(t.innerText))),!n.iconName&&da.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(n.iconName=t.firstChild.data)),n}function E$(t){var a=Hh(t.attributes).reduce(function(r,s){return r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r},{});return a}function T$(){return{iconName:null,prefix:null,transform:ec,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function D6(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},r=A$(t),s=r.iconName,n=r.prefix,i=r.rest,o=E$(t),c=tj("parseNodeAttributes",{},t),u=a.styleParser?k$(t):[];return Lt({iconName:s,prefix:n,transform:ec,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:u,attributes:o}},c)}var P$=No.styles;function ZA(t){var a=da.autoReplaceSvg==="nest"?D6(t,{styleParser:!1}):D6(t);return~a.extra.classes.indexOf(TA)?nu("generateLayersText",t,a):nu("generateSvgReplacementMutation",t,a)}function D$(){return[].concat(So(jA),So(NA))}function O6(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!nd)return Promise.resolve();var r=Br.documentElement.classList,s=function(p){return r.add("".concat(y6,"-").concat(p))},n=function(p){return r.remove("".concat(y6,"-").concat(p))},i=da.autoFetchSvg?D$():iA.concat(Object.keys(P$));i.includes("fa")||i.push("fa");var o=[".".concat(TA,":not([").concat(um,"])")].concat(i.map(function(h){return".".concat(h,":not([").concat(um,"])")})).join(", ");if(o.length===0)return Promise.resolve();var c=[];try{c=Hh(t.querySelectorAll(o))}catch{}if(c.length>0)s("pending"),n("complete");else return Promise.resolve();var u=RN.begin("onTree"),m=c.reduce(function(h,p){try{var y=ZA(p);y&&h.push(y)}catch(g){kA||g.name==="MissingIcon"&&console.error(g)}return h},[]);return new Promise(function(h,p){Promise.all(m).then(function(y){XA(y,function(){s("active"),s("complete"),n("pending"),typeof a=="function"&&a(),u(),h()})}).catch(function(y){u(),p(y)})})}function O$(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;ZA(t).then(function(r){r&&XA([r],a)})}function L$(t){return function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=(a||{}).icon?a:aj(a||{}),n=r.mask;return n&&(n=(n||{}).icon?n:aj(n||{})),t(s,Lt(Lt({},r),{},{mask:n}))}}var M$=function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.transform,n=s===void 0?ec:s,i=r.symbol,o=i===void 0?!1:i,c=r.mask,u=c===void 0?null:c,m=r.maskId,h=m===void 0?null:m,p=r.classes,y=p===void 0?[]:p,g=r.attributes,v=g===void 0?{}:g,N=r.styles,w=N===void 0?{}:N;if(a){var j=a.prefix,T=a.iconName,k=a.icon;return hy(Lt({type:"icon"},a),function(){return mm("beforeDOMElementCreation",{iconDefinition:a,params:r}),MN({icons:{main:rj(k),mask:u?rj(u.icon):{found:!1,width:null,height:null,icon:{}}},prefix:j,iconName:T,transform:Lt(Lt({},ec),n),symbol:o,maskId:h,extra:{attributes:v,styles:w,classes:y}})})}},R$={mixout:function(){return{icon:L$(M$)}},hooks:function(){return{mutationObserverCallbacks:function(r){return r.treeCallback=O6,r.nodeCallback=O$,r}}},provides:function(a){a.i2svg=function(r){var s=r.node,n=s===void 0?Br:s,i=r.callback,o=i===void 0?function(){}:i;return O6(n,o)},a.generateSvgReplacementMutation=function(r,s){var n=s.iconName,i=s.prefix,o=s.transform,c=s.symbol,u=s.mask,m=s.maskId,h=s.extra;return new Promise(function(p,y){Promise.all([sj(n,i),u.iconName?sj(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(g){var v=cy(g,2),N=v[0],w=v[1];p([r,MN({icons:{main:N,mask:w},prefix:i,iconName:n,transform:o,symbol:c,maskId:m,extra:h,watchable:!0})])}).catch(y)})},a.generateAbstractIcon=function(r){var s=r.children,n=r.attributes,i=r.main,o=r.transform,c=r.styles,u=dy(c);u.length>0&&(n.style=u);var m;return DN(o)&&(m=nu("generateAbstractTransformGrouping",{main:i,transform:o,containerWidth:i.width,iconWidth:i.width})),s.push(m||i.icon),{children:s,attributes:n}}}},I$={mixout:function(){return{layer:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=s.classes,i=n===void 0?[]:n;return hy({type:"layer"},function(){mm("beforeDOMElementCreation",{assembler:r,params:s});var o=[];return r(function(c){Array.isArray(c)?c.map(function(u){o=o.concat(u.abstract)}):o=o.concat(c.abstract)}),[{tag:"span",attributes:{class:["".concat(da.cssPrefix,"-layers")].concat(So(i)).join(" ")},children:o}]})}}}},z$={mixout:function(){return{counter:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s.title;var n=s.classes,i=n===void 0?[]:n,o=s.attributes,c=o===void 0?{}:o,u=s.styles,m=u===void 0?{}:u;return hy({type:"counter",content:r},function(){return mm("beforeDOMElementCreation",{content:r,params:s}),p$({content:r.toString(),extra:{attributes:c,styles:m,classes:["".concat(da.cssPrefix,"-layers-counter")].concat(So(i))}})})}}}},$$={mixout:function(){return{text:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=s.transform,i=n===void 0?ec:n,o=s.classes,c=o===void 0?[]:o,u=s.attributes,m=u===void 0?{}:u,h=s.styles,p=h===void 0?{}:h;return hy({type:"text",content:r},function(){return mm("beforeDOMElementCreation",{content:r,params:s}),k6({content:r,transform:Lt(Lt({},ec),i),extra:{attributes:m,styles:p,classes:["".concat(da.cssPrefix,"-layers-text")].concat(So(c))}})})}}},provides:function(a){a.generateLayersText=function(r,s){var n=s.transform,i=s.extra,o=null,c=null;if(sA){var u=parseInt(getComputedStyle(r).fontSize,10),m=r.getBoundingClientRect();o=m.width/u,c=m.height/u}return Promise.resolve([r,k6({content:r.innerHTML,width:o,height:c,transform:n,extra:i,watchable:!0})])}}},QA=new RegExp('"',"ug"),L6=[1105920,1112319],M6=Lt(Lt(Lt(Lt({},{FontAwesome:{normal:"fas",400:"fas"}}),kI),Cz),RI),lj=Object.keys(M6).reduce(function(t,a){return t[a.toLowerCase()]=M6[a],t},{}),B$=Object.keys(lj).reduce(function(t,a){var r=lj[a];return t[a]=r[900]||So(Object.entries(r))[0][1],t},{});function F$(t){var a=t.replace(QA,"");return RA(So(a)[0]||"")}function q$(t){var a=t.getPropertyValue("font-feature-settings").includes("ss01"),r=t.getPropertyValue("content"),s=r.replace(QA,""),n=s.codePointAt(0),i=n>=L6[0]&&n<=L6[1],o=s.length===2?s[0]===s[1]:!1;return i||o||a}function U$(t,a){var r=t.replace(/^['"]|['"]$/g,"").toLowerCase(),s=parseInt(a),n=isNaN(s)?"normal":s;return(lj[r]||{})[n]||B$[r]}function R6(t,a){var r="".concat(kz).concat(a.replace(":","-"));return new Promise(function(s,n){if(t.getAttribute(r)!==null)return s();var i=Hh(t.children),o=i.filter(function($){return $.getAttribute(J2)===a})[0],c=ru.getComputedStyle(t,a),u=c.getPropertyValue("font-family"),m=u.match(Dz),h=c.getPropertyValue("font-weight"),p=c.getPropertyValue("content");if(o&&!m)return t.removeChild(o),s();if(m&&p!=="none"&&p!==""){var y=c.getPropertyValue("content"),g=U$(u,h),v=F$(y),N=m[0].startsWith("FontAwesome"),w=q$(c),j=LN(g,v),T=j;if(N){var k=Qz(v);k.iconName&&k.prefix&&(j=k.iconName,g=k.prefix)}if(j&&!w&&(!o||o.getAttribute(EN)!==g||o.getAttribute(TN)!==T)){t.setAttribute(r,T),o&&t.removeChild(o);var R=T$(),P=R.extra;P.attributes[J2]=a,sj(j,g).then(function($){var A=MN(Lt(Lt({},R),{},{icons:{main:$,mask:YA()},prefix:g,iconName:T,extra:P,watchable:!0})),M=Br.createElementNS("http://www.w3.org/2000/svg","svg");a==="::before"?t.insertBefore(M,t.firstChild):t.appendChild(M),M.outerHTML=A.map(function(_){return Hf(_)}).join(`
`),t.removeAttribute(r),s()}).catch(n)}else s()}else s()})}function W$(t){return Promise.all([R6(t,"::before"),R6(t,"::after")])}function H$(t){return t.parentNode!==document.head&&!~Ez.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(J2)&&(!t.parentNode||t.parentNode.tagName!=="svg")}var Y$=function(a){return!!a&&CA.some(function(r){return a.includes(r)})},G$=function(a){if(!a)return[];for(var r=new Set,s=[a],n=[/(?=\s:)/,new RegExp("(?<=\\)\\)?[^,]*,)")],i=function(){var g=c[o];s=s.flatMap(function(v){return v.split(g).map(function(N){return N.replace(/,\s*$/,"").trim()})})},o=0,c=n;o<c.length;o++)i();s=s.flatMap(function(y){return y.includes("(")?y:y.split(",").map(function(g){return g.trim()})});var u=H0(s),m;try{for(u.s();!(m=u.n()).done;){var h=m.value;if(Y$(h)){var p=CA.reduce(function(y,g){return y.replace(g,"")},h);p!==""&&p!=="*"&&r.add(p)}}}catch(y){u.e(y)}finally{u.f()}return r};function I6(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(nd){var r;if(a)r=t;else if(da.searchPseudoElementsFullScan)r=t.querySelectorAll("*");else{var s=new Set,n=H0(document.styleSheets),i;try{for(n.s();!(i=n.n()).done;){var o=i.value;try{var c=H0(o.cssRules),u;try{for(c.s();!(u=c.n()).done;){var m=u.value,h=G$(m.selectorText),p=H0(h),y;try{for(p.s();!(y=p.n()).done;){var g=y.value;s.add(g)}}catch(N){p.e(N)}finally{p.f()}}}catch(N){c.e(N)}finally{c.f()}}catch(N){da.searchPseudoElementsWarnings&&console.warn("Font Awesome: cannot parse stylesheet: ".concat(o.href," (").concat(N.message,`)
If it declares any Font Awesome CSS pseudo-elements, they will not be rendered as SVG icons. Add crossorigin="anonymous" to the <link>, enable searchPseudoElementsFullScan for slower but more thorough DOM parsing, or suppress this warning by setting searchPseudoElementsWarnings to false.`))}}}catch(N){n.e(N)}finally{n.f()}if(!s.size)return;var v=Array.from(s).join(", ");try{r=t.querySelectorAll(v)}catch{}}return new Promise(function(N,w){var j=Hh(r).filter(H$).map(W$),T=RN.begin("searchPseudoElements");JA(),Promise.all(j).then(function(){T(),ij(),N()}).catch(function(){T(),ij(),w()})})}}var V$={hooks:function(){return{mutationObserverCallbacks:function(r){return r.pseudoElementsCallback=I6,r}}},provides:function(a){a.pseudoElements2svg=function(r){var s=r.node,n=s===void 0?Br:s;da.searchPseudoElements&&I6(n)}}},z6=!1,K$={mixout:function(){return{dom:{unwatch:function(){JA(),z6=!0}}}},hooks:function(){return{bootstrap:function(){P6(tj("mutationObserverCallbacks",{}))},noAuto:function(){C$()},watch:function(r){var s=r.observeMutationsRoot;z6?ij():P6(tj("mutationObserverCallbacks",{observeMutationsRoot:s}))}}}},$6=function(a){var r={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return a.toLowerCase().split(" ").reduce(function(s,n){var i=n.toLowerCase().split("-"),o=i[0],c=i.slice(1).join("-");if(o&&c==="h")return s.flipX=!0,s;if(o&&c==="v")return s.flipY=!0,s;if(c=parseFloat(c),isNaN(c))return s;switch(o){case"grow":s.size=s.size+c;break;case"shrink":s.size=s.size-c;break;case"left":s.x=s.x-c;break;case"right":s.x=s.x+c;break;case"up":s.y=s.y-c;break;case"down":s.y=s.y+c;break;case"rotate":s.rotate=s.rotate+c;break}return s},r)},X$={mixout:function(){return{parse:{transform:function(r){return $6(r)}}}},hooks:function(){return{parseNodeAttributes:function(r,s){var n=s.getAttribute("data-fa-transform");return n&&(r.transform=$6(n)),r}}},provides:function(a){a.generateAbstractTransformGrouping=function(r){var s=r.main,n=r.transform,i=r.containerWidth,o=r.iconWidth,c={transform:"translate(".concat(i/2," 256)")},u="translate(".concat(n.x*32,", ").concat(n.y*32,") "),m="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),h="rotate(".concat(n.rotate," 0 0)"),p={transform:"".concat(u," ").concat(m," ").concat(h)},y={transform:"translate(".concat(o/2*-1," -256)")},g={outer:c,inner:p,path:y};return{tag:"g",attributes:Lt({},g.outer),children:[{tag:"g",attributes:Lt({},g.inner),children:[{tag:s.icon.tag,children:s.icon.children,attributes:Lt(Lt({},s.icon.attributes),g.path)}]}]}}}},Dv={x:0,y:0,width:"100%",height:"100%"};function B6(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||a)&&(t.attributes.fill="black"),t}function J$(t){return t.tag==="g"?t.children:[t]}var Z$={hooks:function(){return{parseNodeAttributes:function(r,s){var n=s.getAttribute("data-fa-mask"),i=n?my(n.split(" ").map(function(o){return o.trim()})):YA();return i.prefix||(i.prefix=su()),r.mask=i,r.maskId=s.getAttribute("data-fa-mask-id"),r}}},provides:function(a){a.generateAbstractMask=function(r){var s=r.children,n=r.attributes,i=r.main,o=r.mask,c=r.maskId,u=r.transform,m=i.width,h=i.icon,p=o.width,y=o.icon,g=Uz({transform:u,containerWidth:p,iconWidth:m}),v={tag:"rect",attributes:Lt(Lt({},Dv),{},{fill:"white"})},N=h.children?{children:h.children.map(B6)}:{},w={tag:"g",attributes:Lt({},g.inner),children:[B6(Lt({tag:h.tag,attributes:Lt(Lt({},h.attributes),g.path)},N))]},j={tag:"g",attributes:Lt({},g.outer),children:[w]},T="mask-".concat(c||v6()),k="clip-".concat(c||v6()),R={tag:"mask",attributes:Lt(Lt({},Dv),{},{id:T,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[v,j]},P={tag:"defs",children:[{tag:"clipPath",attributes:{id:k},children:J$(y)},R]};return s.push(P,{tag:"rect",attributes:Lt({fill:"currentColor","clip-path":"url(#".concat(k,")"),mask:"url(#".concat(T,")")},Dv)}),{children:s,attributes:n}}}},Q$={provides:function(a){var r=!1;ru.matchMedia&&(r=ru.matchMedia("(prefers-reduced-motion: reduce)").matches),a.missingIconAbstract=function(){var s=[],n={fill:"currentColor"},i={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};s.push({tag:"path",attributes:Lt(Lt({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=Lt(Lt({},i),{},{attributeName:"opacity"}),c={tag:"circle",attributes:Lt(Lt({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return r||c.children.push({tag:"animate",attributes:Lt(Lt({},i),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Lt(Lt({},o),{},{values:"1;0;1;1;0;1;"})}),s.push(c),s.push({tag:"path",attributes:Lt(Lt({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:r?[]:[{tag:"animate",attributes:Lt(Lt({},o),{},{values:"1;0;0;0;0;1;"})}]}),r||s.push({tag:"path",attributes:Lt(Lt({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Lt(Lt({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:s}}}},eB={hooks:function(){return{parseNodeAttributes:function(r,s){var n=s.getAttribute("data-fa-symbol"),i=n===null?!1:n===""?!0:n;return r.symbol=i,r}}}},tB=[Yz,R$,I$,z$,$$,V$,K$,X$,Z$,Q$,eB];o$(tB,{mixoutsTo:ll});ll.noAuto;ll.config;ll.library;ll.dom;var oj=ll.parse;ll.findIconDefinition;ll.toHtml;var aB=ll.icon;ll.layer;ll.text;ll.counter;var Ov={exports:{}},Lv,F6;function rB(){if(F6)return Lv;F6=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Lv=t,Lv}var Mv,q6;function sB(){if(q6)return Mv;q6=1;var t=rB();function a(){}function r(){}return r.resetWarningCache=a,Mv=function(){function s(o,c,u,m,h,p){if(p!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}s.isRequired=s;function n(){return s}var i={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:n,element:s,elementType:s,instanceOf:n,node:s,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:r,resetWarningCache:a};return i.PropTypes=i,i},Mv}var U6;function nB(){return U6||(U6=1,Ov.exports=sB()()),Ov.exports}var iB=nB();const La=oc(iB);var lB={};function cj(t,a){(a==null||a>t.length)&&(a=t.length);for(var r=0,s=Array(a);r<a;r++)s[r]=t[r];return s}function oB(t){if(Array.isArray(t))return t}function cB(t){if(Array.isArray(t))return cj(t)}function Yd(t,a,r){return(a=gB(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function dB(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uB(t,a){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,n,i,o,c=[],u=!0,m=!1;try{if(i=(r=r.call(t)).next,a!==0)for(;!(u=(s=i.call(r)).done)&&(c.push(s.value),c.length!==a);u=!0);}catch(h){m=!0,n=h}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(m)throw n}}return c}}function mB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W6(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Qo(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?W6(Object(r),!0).forEach(function(s){Yd(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W6(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function xB(t,a){if(t==null)return{};var r,s,n=fB(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fB(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function H6(t,a){return oB(t)||uB(t,a)||eE(t,a)||mB()}function dj(t){return cB(t)||dB(t)||eE(t)||hB()}function pB(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function gB(t){var a=pB(t,"string");return typeof a=="symbol"?a:a+""}function mg(t){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},mg(t)}function eE(t,a){if(t){if(typeof t=="string")return cj(t,a);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cj(t,a):void 0}}var yB="7.0.0-alpha1",uj;try{var bB=require("@fortawesome/fontawesome-svg-core/package.json");uj=bB.version}catch{uj=lB.FA_VERSION||"7.0.0-alpha8"}function vB(t){var a=t.beat,r=t.fade,s=t.beatFade,n=t.bounce,i=t.shake,o=t.flash,c=t.spin,u=t.spinPulse,m=t.spinReverse,h=t.pulse,p=t.fixedWidth,y=t.inverse,g=t.border,v=t.listItem,N=t.flip,w=t.size,j=t.rotation,T=t.pull,k=t.swapOpacity,R=t.rotateBy,P=t.widthAuto,$=jB(uj,yB),A=Yd(Yd(Yd(Yd(Yd(Yd({"fa-beat":a,"fa-fade":r,"fa-beat-fade":s,"fa-bounce":n,"fa-shake":i,"fa-flash":o,"fa-spin":c,"fa-spin-reverse":m,"fa-spin-pulse":u,"fa-pulse":h,"fa-fw":p,"fa-inverse":y,"fa-border":g,"fa-li":v,"fa-flip":N===!0,"fa-flip-horizontal":N==="horizontal"||N==="both","fa-flip-vertical":N==="vertical"||N==="both"},"fa-".concat(w),typeof w<"u"&&w!==null),"fa-rotate-".concat(j),typeof j<"u"&&j!==null&&j!==0),"fa-pull-".concat(T),typeof T<"u"&&T!==null),"fa-swap-opacity",k),"fa-rotate-by",$&&R),"fa-width-auto",$&&P);return Object.keys(A).map(function(M){return A[M]?M:null}).filter(function(M){return M})}function jB(t,a){for(var r=t.split("-"),s=H6(r,2),n=s[0],i=s[1],o=a.split("-"),c=H6(o,2),u=c[0],m=c[1],h=n.split("."),p=u.split("."),y=0;y<Math.max(h.length,p.length);y++){var g=h[y]||"0",v=p[y]||"0",N=parseInt(g,10),w=parseInt(v,10);if(N!==w)return N>w}for(var j=0;j<Math.max(h.length,p.length);j++){var T=h[j]||"0",k=p[j]||"0";if(T!==k&&T.length!==k.length)return T.length<k.length}return!(i&&!m)}function NB(t){return t=t-0,t===t}function tE(t){return NB(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(a,r){return r?r.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var wB=["style"];function SB(t){return t.charAt(0).toUpperCase()+t.slice(1)}function _B(t){return t.split(";").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,r){var s=r.indexOf(":"),n=tE(r.slice(0,s)),i=r.slice(s+1).trim();return n.startsWith("webkit")?a[SB(n)]=i:a[n]=i,a},{})}function aE(t,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof a=="string")return a;var s=(a.children||[]).map(function(u){return aE(t,u)}),n=Object.keys(a.attributes||{}).reduce(function(u,m){var h=a.attributes[m];switch(m){case"class":u.attrs.className=h,delete a.attributes.class;break;case"style":u.attrs.style=_B(h);break;default:m.indexOf("aria-")===0||m.indexOf("data-")===0?u.attrs[m.toLowerCase()]=h:u.attrs[tE(m)]=h}return u},{attrs:{}}),i=r.style,o=i===void 0?{}:i,c=xB(r,wB);return n.attrs.style=Qo(Qo({},n.attrs.style),o),t.apply(void 0,[a.tag,Qo(Qo({},n.attrs),c)].concat(dj(s)))}var rE=!1;try{rE=!0}catch{}function CB(){if(!rE&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function Y6(t){if(t&&mg(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(oj.icon)return oj.icon(t);if(t===null)return null;if(t&&mg(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function Rv(t,a){return Array.isArray(a)&&a.length>0||!Array.isArray(a)&&a?Yd({},t,a):{}}var G6={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,rotateBy:!1,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1,widthAuto:!1},I=am.forwardRef(function(t,a){var r=Qo(Qo({},G6),t),s=r.icon,n=r.mask,i=r.symbol,o=r.className,c=r.title,u=r.titleId,m=r.maskId,h=Y6(s),p=Rv("classes",[].concat(dj(vB(r)),dj((o||"").split(" ")))),y=Rv("transform",typeof r.transform=="string"?oj.transform(r.transform):r.transform),g=Rv("mask",Y6(n)),v=aB(h,Qo(Qo(Qo(Qo({},p),y),g),{},{symbol:i,title:c,titleId:u,maskId:m}));if(!v)return CB("Could not find icon",h),null;var N=v.abstract,w={ref:a};return Object.keys(r).forEach(function(j){G6.hasOwnProperty(j)||(w[j]=r[j])}),kB(N[0],w)});I.displayName="FontAwesomeIcon";I.propTypes={beat:La.bool,border:La.bool,beatFade:La.bool,bounce:La.bool,className:La.string,fade:La.bool,flash:La.bool,mask:La.oneOfType([La.object,La.array,La.string]),maskId:La.string,fixedWidth:La.bool,inverse:La.bool,flip:La.oneOf([!0,!1,"horizontal","vertical","both"]),icon:La.oneOfType([La.object,La.array,La.string]),listItem:La.bool,pull:La.oneOf(["right","left"]),pulse:La.bool,rotation:La.oneOf([0,90,180,270]),rotateBy:La.bool,shake:La.bool,size:La.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:La.bool,spinPulse:La.bool,spinReverse:La.bool,symbol:La.oneOfType([La.bool,La.string]),title:La.string,titleId:La.string,transform:La.oneOfType([La.string,La.object]),swapOpacity:La.bool,widthAuto:La.bool};var kB=aE.bind(null,am.createElement);/*!
 * Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */var Za={prefix:"fas",iconName:"dollar-sign",icon:[320,512,[128178,61781,"dollar","usd"],"24","M136 24c0-13.3 10.7-24 24-24s24 10.7 24 24l0 40 56 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-114.9 0c-24.9 0-45.1 20.2-45.1 45.1 0 22.5 16.5 41.5 38.7 44.7l91.6 13.1c53.8 7.7 93.7 53.7 93.7 108 0 60.3-48.9 109.1-109.1 109.1l-10.9 0 0 40c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-40-72 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l130.9 0c24.9 0 45.1-20.2 45.1-45.1 0-22.5-16.5-41.5-38.7-44.7l-91.6-13.1C55.9 273.5 16 227.4 16 173.1 16 112.9 64.9 64 125.1 64l10.9 0 0-40z"]},AB={prefix:"fas",iconName:"gears",icon:[640,512,["cogs"],"f085","M415.9 210.5c12.2-3.3 25 2.5 30.5 13.8L465 261.9c10.3 1.4 20.4 4.2 29.9 8.1l35-23.3c10.5-7 24.4-5.6 33.3 3.3l19.2 19.2c8.9 8.9 10.3 22.9 3.3 33.3l-23.3 34.9c1.9 4.7 3.6 9.6 5 14.7 1.4 5.1 2.3 10.1 3 15.2l37.7 18.6c11.3 5.6 17.1 18.4 13.8 30.5l-7 26.2c-3.3 12.1-14.6 20.3-27.2 19.5l-42-2.7c-6.3 8.1-13.6 15.6-21.9 22l2.7 41.9c.8 12.6-7.4 24-19.5 27.2l-26.2 7c-12.2 3.3-24.9-2.5-30.5-13.8l-18.6-37.6c-10.3-1.4-20.4-4.2-29.9-8.1l-35 23.3c-10.5 7-24.4 5.6-33.3-3.3l-19.2-19.2c-8.9-8.9-10.3-22.8-3.3-33.3l23.3-35c-1.9-4.7-3.6-9.6-5-14.7s-2.3-10.2-3-15.2l-37.7-18.6c-11.3-5.6-17-18.4-13.8-30.5l7-26.2c3.3-12.1 14.6-20.3 27.2-19.5l41.9 2.7c6.3-8.1 13.6-15.6 21.9-22l-2.7-41.8c-.8-12.6 7.4-24 19.5-27.2l26.2-7zM448.4 340a44 44 0 1 0 .1 88 44 44 0 1 0 -.1-88zM224.9-45.5l26.2 7c12.1 3.3 20.3 14.7 19.5 27.2l-2.7 41.8c8.3 6.4 15.6 13.8 21.9 22l42-2.7c12.5-.8 23.9 7.4 27.2 19.5l7 26.2c3.2 12.1-2.5 24.9-13.8 30.5l-37.7 18.6c-.7 5.1-1.7 10.2-3 15.2s-3.1 10-5 14.7l23.3 35c7 10.5 5.6 24.4-3.3 33.3L307.3 262c-8.9 8.9-22.8 10.3-33.3 3.3L239 242c-9.5 3.9-19.6 6.7-29.9 8.1l-18.6 37.6c-5.6 11.3-18.4 17-30.5 13.8l-26.2-7c-12.2-3.3-20.3-14.7-19.5-27.2l2.7-41.9c-8.3-6.4-15.6-13.8-21.9-22l-42 2.7c-12.5 .8-23.9-7.4-27.2-19.5l-7-26.2c-3.2-12.1 2.5-24.9 13.8-30.5l37.7-18.6c.7-5.1 1.7-10.1 3-15.2 1.4-5.1 3-10 5-14.7L55.1 46.5c-7-10.5-5.6-24.4 3.3-33.3L77.6-6c8.9-8.9 22.8-10.3 33.3-3.3l35 23.3c9.5-3.9 19.6-6.7 29.9-8.1l18.6-37.6c5.6-11.3 18.3-17 30.5-13.8zM192.4 84a44 44 0 1 0 0 88 44 44 0 1 0 0-88z"]},EB=AB,sE={prefix:"fas",iconName:"calculator",icon:[384,512,[128425],"f1ec","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L64 0zM96 64l192 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L96 160c-17.7 0-32-14.3-32-32l0-32c0-17.7 14.3-32 32-32zm16 168a24 24 0 1 1 -48 0 24 24 0 1 1 48 0zm80 24a24 24 0 1 1 0-48 24 24 0 1 1 0 48zm128-24a24 24 0 1 1 -48 0 24 24 0 1 1 48 0zM88 352a24 24 0 1 1 0-48 24 24 0 1 1 0 48zm128-24a24 24 0 1 1 -48 0 24 24 0 1 1 48 0zm80 24a24 24 0 1 1 0-48 24 24 0 1 1 0 48zM64 424c0-13.3 10.7-24 24-24l112 0c13.3 0 24 10.7 24 24s-10.7 24-24 24L88 448c-13.3 0-24-10.7-24-24zm232-24c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24z"]},V0={prefix:"fas",iconName:"minus",icon:[448,512,[8211,8722,10134,"subtract"],"f068","M0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32z"]},TB={prefix:"fas",iconName:"scale-balanced",icon:[640,512,[9878,"balance-scale"],"f24e","M384 32l128 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L398.4 96c-5.2 25.8-22.9 47.1-46.4 57.3l0 294.7 160 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-384 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l160 0 0-294.7c-23.5-10.3-41.2-31.6-46.4-57.3L128 96c-17.7 0-32-14.3-32-32s14.3-32 32-32l128 0c14.6-19.4 37.8-32 64-32s49.4 12.6 64 32zm55.6 288L584.4 320 512 195.8 439.6 320zM512 416c-62.9 0-115.2-34-126-78.9-2.6-11 1-22.3 6.7-32.1l95.2-163.2c5-8.6 14.2-13.8 24.1-13.8s19.1 5.3 24.1 13.8l95.2 163.2c5.7 9.8 9.3 21.1 6.7 32.1-10.8 44.8-63.1 78.9-126 78.9zM126.8 195.8L54.4 320 199.3 320 126.8 195.8zM.9 337.1c-2.6-11 1-22.3 6.7-32.1l95.2-163.2c5-8.6 14.2-13.8 24.1-13.8s19.1 5.3 24.1 13.8l95.2 163.2c5.7 9.8 9.3 21.1 6.7 32.1-10.8 44.8-63.1 78.9-126 78.9S11.7 382 .9 337.1z"]},al=TB,zN={prefix:"fas",iconName:"medal",icon:[448,512,[127941],"f5a2","M224.3 128L139.7-12.9c-6.5-10.8-20.1-14.7-31.3-9.1L21.8 21.3C9.9 27.2 5.1 41.6 11 53.5L80.6 192.6c-30.1 33.9-48.3 78.5-48.3 127.4 0 106 86 192 192 192s192-86 192-192c0-48.9-18.3-93.5-48.3-127.4L437.6 53.5c5.9-11.9 1.1-26.3-10.7-32.2L340.2-22.1c-11.2-5.6-24.9-1.6-31.3 9.1L224.3 128zm30.8 142.5c1.4 2.8 4 4.7 7 5.1l50.1 7.3c7.7 1.1 10.7 10.5 5.2 16l-36.3 35.4c-2.2 2.2-3.2 5.2-2.7 8.3l8.6 49.9c1.3 7.6-6.7 13.5-13.6 9.9l-44.8-23.6c-2.7-1.4-6-1.4-8.7 0l-44.8 23.6c-6.9 3.6-14.9-2.2-13.6-9.9l8.6-49.9c.5-3-.5-6.1-2.7-8.3l-36.3-35.4c-5.6-5.4-2.5-14.8 5.2-16l50.1-7.3c3-.4 5.7-2.4 7-5.1l22.4-45.4c3.4-7 13.3-7 16.8 0l22.4 45.4z"]},Es={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M32 64C19.1 64 7.4 71.8 2.4 83.8S.2 109.5 9.4 118.6L192 301.3 192 416c0 8.5 3.4 16.6 9.4 22.6l64 64c9.2 9.2 22.9 11.9 34.9 6.9S320 492.9 320 480l0-178.7 182.6-182.6c9.2-9.2 11.9-22.9 6.9-34.9S492.9 64 480 64L32 64z"]},nE={prefix:"fas",iconName:"envelope",icon:[512,512,[128386,9993,61443],"f0e0","M48 64c-26.5 0-48 21.5-48 48 0 15.1 7.1 29.3 19.2 38.4l208 156c17.1 12.8 40.5 12.8 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48L48 64zM0 196L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-188-198.4 148.8c-34.1 25.6-81.1 25.6-115.2 0L0 196z"]},hg={prefix:"fas",iconName:"truck",icon:[576,512,[128666,9951],"f0d1","M0 96C0 60.7 28.7 32 64 32l288 0c35.3 0 64 28.7 64 64l0 32 50.7 0c17 0 33.3 6.7 45.3 18.7L557.3 192c12 12 18.7 28.3 18.7 45.3L576 384c0 35.3-28.7 64-64 64l-3.3 0c-10.4 36.9-44.4 64-84.7 64s-74.2-27.1-84.7-64l-102.6 0c-10.4 36.9-44.4 64-84.7 64s-74.2-27.1-84.7-64L64 448c-35.3 0-64-28.7-64-64L0 96zM512 288l0-50.7-45.3-45.3-50.7 0 0 96 96 0zM192 424a40 40 0 1 0 -80 0 40 40 0 1 0 80 0zm232 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},PB={prefix:"fas",iconName:"chalkboard-user",icon:[640,512,["chalkboard-teacher"],"f51c","M128 96c0-35.3 28.7-64 64-64l352 0c35.3 0 64 28.7 64 64l0 240-96 0 0-16c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 16-129.1 0c10.9-18.8 17.1-40.7 17.1-64 0-70.7-57.3-128-128-128-5.4 0-10.8 .3-16 1l0-49zM333 448c-5.1-24.2-16.3-46.1-32.1-64L608 384c0 35.3-28.7 64-64 64l-211 0zM64 272a80 80 0 1 1 160 0 80 80 0 1 1 -160 0zM0 480c0-53 43-96 96-96l96 0c53 0 96 43 96 96 0 17.7-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32z"]},DB=PB,OB={prefix:"fas",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32l0 3.2C119 50 64 114.6 64 192l0 21.7c0 48.1-16.4 94.8-46.4 132.4L7.8 358.3C2.7 364.6 0 372.4 0 380.5 0 400.1 15.9 416 35.5 416l376.9 0c19.6 0 35.5-15.9 35.5-35.5 0-8.1-2.7-15.9-7.8-22.2l-9.8-12.2C400.4 308.5 384 261.8 384 213.7l0-21.7c0-77.4-55-142-128-156.8l0-3.2c0-17.7-14.3-32-32-32zM162 464c7.1 27.6 32.2 48 62 48s54.9-20.4 62-48l-124 0z"]},Jc={prefix:"fas",iconName:"trophy",icon:[512,512,[127942],"f091","M144.3 0l224 0c26.5 0 48.1 21.8 47.1 48.2-.2 5.3-.4 10.6-.7 15.8l49.6 0c26.1 0 49.1 21.6 47.1 49.8-7.5 103.7-60.5 160.7-118 190.5-15.8 8.2-31.9 14.3-47.2 18.8-20.2 28.6-41.2 43.7-57.9 51.8l0 73.1 64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0 0-73.1c-16-7.7-35.9-22-55.3-48.3-18.4-4.8-38.4-12.1-57.9-23.1-54.1-30.3-102.9-87.4-109.9-189.9-1.9-28.1 21-49.7 47.1-49.7l49.6 0c-.3-5.2-.5-10.4-.7-15.8-1-26.5 20.6-48.2 47.1-48.2zM101.5 112l-52.4 0c6.2 84.7 45.1 127.1 85.2 149.6-14.4-37.3-26.3-86-32.8-149.6zM380 256.8c40.5-23.8 77.1-66.1 83.3-144.8L411 112c-6.2 60.9-17.4 108.2-31 144.8z"]},LB={prefix:"fas",iconName:"calendar-days",icon:[448,512,["calendar-alt"],"f073","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 32 0c35.3 0 64 28.7 64 64l0 288c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 128C0 92.7 28.7 64 64 64l32 0 0-32c0-17.7 14.3-32 32-32zM64 240l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm128 0l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zM64 368l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zm112 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16z"]},Pa=LB,iE={prefix:"fas",iconName:"warehouse",icon:[576,512,[],"f494","M0 142.1L0 480c0 17.7 14.3 32 32 32s32-14.3 32-32l0-240c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32l0 240c0 17.7 14.3 32 32 32s32-14.3 32-32l0-337.9c0-27.5-17.6-52-43.8-60.7L303.2 5.1c-9.9-3.3-20.5-3.3-30.4 0L43.8 81.4C17.6 90.1 0 114.6 0 142.1zM464 256l-352 0 0 64 352 0 0-64zM112 416l352 0 0-64-352 0 0 64zm352 32l-352 0 0 64 352 0 0-64z"]},rm={prefix:"fas",iconName:"user-tie",icon:[448,512,[],"f508","M224 248a120 120 0 1 1 0-240 120 120 0 1 1 0 240zm-30.5 56l61 0c9.7 0 17.5 7.8 17.5 17.5 0 4.2-1.5 8.2-4.2 11.4l-27.4 32 31 115.1 .6 0 34.6-138.5c2.2-8.7 11.1-14 19.5-10.8 61.9 23.6 105.9 83.6 105.9 153.8 0 15.1-12.3 27.4-27.4 27.4L43.4 512c-15.1 0-27.4-12.3-27.4-27.4 0-70.2 44-130.2 105.9-153.8 8.4-3.2 17.3 2.1 19.5 10.8l34.6 138.5 .6 0 31-115.1-27.4-32c-2.7-3.2-4.2-7.2-4.2-11.4 0-9.7 7.8-17.5 17.5-17.5z"]},MB={prefix:"fas",iconName:"ellipsis",icon:[448,512,["ellipsis-h"],"f141","M0 256a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm168 0a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm224-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112z"]},RB=MB,IB={prefix:"fas",iconName:"percent",icon:[448,512,[62101,62785,"percentage"],"25","M192 128a96 96 0 1 0 -192 0 96 96 0 1 0 192 0zM448 384a96 96 0 1 0 -192 0 96 96 0 1 0 192 0zM438.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-384 384c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l384-384z"]},Iv=IB,zB={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376C296.3 401.1 253.9 416 208 416 93.1 416 0 322.9 0 208S93.1 0 208 0 416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},ua=zB,$B={prefix:"fas",iconName:"boxes-stacked",icon:[512,512,[62625,"boxes","boxes-alt"],"f468","M224 0l0 64c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-64 32 0c35.3 0 64 28.7 64 64l0 128c0 5.5-.7 10.9-2 16l-252 0c-1.3-5.1-2-10.5-2-16l0-128c0-35.3 28.7-64 64-64l32 0zm96 512c-11.2 0-21.8-2.9-31-8 9.5-16.5 15-35.6 15-56l0-128c0-20.4-5.5-39.5-15-56 9.2-5.1 19.7-8 31-8l32 0 0 64c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-64 32 0c35.3 0 64 28.7 64 64l0 128c0 35.3-28.7 64-64 64l-128 0zM0 320c0-35.3 28.7-64 64-64l32 0 0 64c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-64 32 0c35.3 0 64 28.7 64 64l0 128c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 320z"]},zv=$B,V6={prefix:"fas",iconName:"ban",icon:[512,512,[128683,"cancel"],"f05e","M367.2 412.5L99.5 144.8c-22.4 31.4-35.5 69.8-35.5 111.2 0 106 86 192 192 192 41.5 0 79.9-13.1 111.2-35.5zm45.3-45.3c22.4-31.4 35.5-69.8 35.5-111.2 0-106-86-192-192-192-41.5 0-79.9 13.1-111.2 35.5L412.5 367.2zM0 256a256 256 0 1 1 512 0 256 256 0 1 1 -512 0z"]},BB={prefix:"fas",iconName:"floppy-disk",icon:[448,512,[128190,128426,"save"],"f0c7","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-242.7c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32L64 32zm32 96c0-17.7 14.3-32 32-32l160 0c17.7 0 32 14.3 32 32l0 64c0 17.7-14.3 32-32 32l-160 0c-17.7 0-32-14.3-32-32l0-64zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"]},ns=BB,K6={prefix:"fas",iconName:"palette",icon:[512,512,[127912],"f53f","M512 256c0 .9 0 1.8 0 2.7-.4 36.5-33.6 61.3-70.1 61.3L344 320c-26.5 0-48 21.5-48 48 0 3.4 .4 6.7 1 9.9 2.1 10.2 6.5 20 10.8 29.9 6.1 13.8 12.1 27.5 12.1 42 0 31.8-21.6 60.7-53.4 62-3.5 .1-7 .2-10.6 .2-141.4 0-256-114.6-256-256S114.6 0 256 0 512 114.6 512 256zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm0-96a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM288 96a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 96a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},FB={prefix:"fas",iconName:"unlock",icon:[384,512,[128275],"f09c","M128 96c0-35.3 28.7-64 64-64 31.7 0 58 23 63.1 53.3 2.9 17.4 19.4 29.2 36.9 26.3s29.2-19.4 26.3-36.9C308.1 14.1 255.5-32 192-32 121.3-32 64 25.3 64 96l0 64c-35.3 0-64 28.7-64 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-224c0-35.3-28.7-64-64-64l-192 0 0-64z"]},qB={prefix:"fas",iconName:"key",icon:[512,512,[128273],"f084","M336 352c97.2 0 176-78.8 176-176S433.2 0 336 0 160 78.8 160 176c0 18.7 2.9 36.8 8.3 53.7L7 391c-4.5 4.5-7 10.6-7 17l0 80c0 13.3 10.7 24 24 24l80 0c13.3 0 24-10.7 24-24l0-40 40 0c13.3 0 24-10.7 24-24l0-40 40 0c6.4 0 12.5-2.5 17-7l33.3-33.3c16.9 5.4 35 8.3 53.7 8.3zM376 96a40 40 0 1 1 0 80 40 40 0 1 1 0-80z"]},qa={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6-46.8 43.5-78.1 95.4-93 131.1-3.3 7.9-3.3 16.7 0 24.6 14.9 35.7 46.2 87.7 93 131.1 47.1 43.7 111.8 80.6 192.6 80.6s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1 3.3-7.9 3.3-16.7 0-24.6-14.9-35.7-46.2-87.7-93-131.1-47.1-43.7-111.8-80.6-192.6-80.6zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64-11.5 0-22.3-3-31.7-8.4-1 10.9-.1 22.1 2.9 33.2 13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-12.2-45.7-55.5-74.8-101.1-70.8 5.3 9.3 8.4 20.1 8.4 31.7z"]},sa={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M136.7 5.9L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-8.7-26.1C306.9-7.2 294.7-16 280.9-16L167.1-16c-13.8 0-26 8.8-30.4 21.9zM416 144L32 144 53.1 467.1C54.7 492.4 75.7 512 101 512L347 512c25.3 0 46.3-19.6 47.9-44.9L416 144z"]},pf={prefix:"fas",iconName:"receipt",icon:[384,512,[129534],"f543","M14 2.2C22.5-1.7 32.5-.3 39.6 5.8L80 40.4 120.4 5.8c9-7.7 22.3-7.7 31.2 0L192 40.4 232.4 5.8c9-7.7 22.2-7.7 31.2 0L304 40.4 344.4 5.8c7.1-6.1 17.1-7.5 25.6-3.6S384 14.6 384 24l0 464c0 9.4-5.5 17.9-14 21.8s-18.5 2.5-25.6-3.6l-40.4-34.6-40.4 34.6c-9 7.7-22.2 7.7-31.2 0l-40.4-34.6-40.4 34.6c-9 7.7-22.3 7.7-31.2 0L80 471.6 39.6 506.2c-7.1 6.1-17.1 7.5-25.6 3.6S0 497.4 0 488L0 24C0 14.6 5.5 6.1 14 2.2zM104 136c-13.3 0-24 10.7-24 24s10.7 24 24 24l176 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-176 0zM80 352c0 13.3 10.7 24 24 24l176 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-176 0c-13.3 0-24 10.7-24 24zm24-120c-13.3 0-24 10.7-24 24s10.7 24 24 24l176 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-176 0z"]},UB={prefix:"fas",iconName:"table-columns",icon:[448,512,["columns"],"f0db","M0 96C0 60.7 28.7 32 64 32l320 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zm64 64l0 256 128 0 0-256-128 0zm320 0l-128 0 0 256 128 0 0-256z"]},WB=UB,HB={prefix:"fas",iconName:"right-to-bracket",icon:[512,512,["sign-in-alt"],"f2f6","M345 273c9.4-9.4 9.4-24.6 0-33.9L201 95c-6.9-6.9-17.2-8.9-26.2-5.2S160 102.3 160 112l0 80-112 0c-26.5 0-48 21.5-48 48l0 32c0 26.5 21.5 48 48 48l112 0 0 80c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2L345 273zm7 143c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0c53 0 96-43 96-96l0-256c0-53-43-96-96-96l-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0c17.7 0 32 14.3 32 32l0 256c0 17.7-14.3 32-32 32l-64 0z"]},YB=HB,GB={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L368 46.1 465.9 144 490.3 119.6c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L432 177.9 334.1 80 172.4 241.7zM96 64C43 64 0 107 0 160L0 416c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-96c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7-14.3 32-32 32L96 448c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 64z"]},Aa=GB,Wn={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512 256 256 0 1 1 0-512zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},Zc={prefix:"fas",iconName:"book",icon:[448,512,[128212],"f02d","M384 512L96 512c-53 0-96-43-96-96L0 96C0 43 43 0 96 0L400 0c26.5 0 48 21.5 48 48l0 288c0 20.9-13.4 38.7-32 45.3l0 66.7c17.7 0 32 14.3 32 32s-14.3 32-32 32l-32 0zM96 384c-17.7 0-32 14.3-32 32s14.3 32 32 32l256 0 0-64-256 0zm32-232c0 13.3 10.7 24 24 24l176 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-176 0c-13.3 0-24 10.7-24 24zm24 72c-13.3 0-24 10.7-24 24s10.7 24 24 24l176 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-176 0z"]},iu={prefix:"fas",iconName:"folder-open",icon:[576,512,[128194,128449,61717],"f07c","M56 225.6L32.4 296.2 32.4 96c0-35.3 28.7-64 64-64l138.7 0c13.8 0 27.3 4.5 38.4 12.8l38.4 28.8c5.5 4.2 12.3 6.4 19.2 6.4l117.3 0c35.3 0 64 28.7 64 64l0 16-365.4 0c-41.3 0-78 26.4-91.1 65.6zM477.8 448L99 448c-32.8 0-55.9-32.1-45.5-63.2l48-144C108 221.2 126.4 208 147 208l378.8 0c32.8 0 55.9 32.1 45.5 63.2l-48 144c-6.5 19.6-24.9 32.8-45.5 32.8z"]},xy={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M311.1 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L243.2 256 73.9 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},X6={prefix:"fas",iconName:"flask",icon:[448,512,[],"f0c3","M288 0L128 0C110.3 0 96 14.3 96 32s14.3 32 32 32L128 215.5 7.5 426.3C2.6 435 0 444.7 0 454.7 0 486.4 25.6 512 57.3 512l333.4 0c31.6 0 57.3-25.6 57.3-57.3 0-10-2.6-19.8-7.5-28.4L320 215.5 320 64c17.7 0 32-14.3 32-32S337.7 0 320 0L288 0zM192 215.5l0-151.5 64 0 0 151.5c0 11.1 2.9 22.1 8.4 31.8l41.6 72.7-164 0 41.6-72.7c5.5-9.7 8.4-20.6 8.4-31.8z"]},Mi={prefix:"fas",iconName:"print",icon:[512,512,[128424,128438,9113],"f02f","M64 64C64 28.7 92.7 0 128 0L341.5 0c17 0 33.3 6.7 45.3 18.7l42.5 42.5c12 12 18.7 28.3 18.7 45.3l0 37.5-384 0 0-80zM0 256c0-35.3 28.7-64 64-64l384 0c35.3 0 64 28.7 64 64l0 96c0 17.7-14.3 32-32 32l-32 0 0 64c0 35.3-28.7 64-64 64l-256 0c-35.3 0-64-28.7-64-64l0-64-32 0c-17.7 0-32-14.3-32-32l0-96zM128 416l0 32 256 0 0-96-256 0 0 64zM456 272a24 24 0 1 0 -48 0 24 24 0 1 0 48 0z"]},VB={prefix:"fas",iconName:"volleyball",icon:[512,512,[127952,"volleyball-ball"],"f45f","M512 258.9c-23.4 8-47.8 13.1-72.6 15.1 5.9-98.6-30.7-191.1-94.9-258.3 97.8 36 167.5 130 167.5 240.3 0 1 0 1.9 0 2.9zm-5.9 52c-5.2 23.7-13.6 46.2-24.9 66.9-94.7 52.2-214 50-308.4-13.6 21.7-31.3 49.8-58.9 83.8-80.5 79.5 41.6 168.5 49.1 249.5 27.1zM279.7 241.6c-3.7-89.7-41.7-170.5-101.3-229.7 22.3-7.1 46-11.2 70.5-11.9 92.5 55.9 150.3 160.3 142.4 273.8-38-3.2-75.9-13.7-111.6-32.3zM130.5 32.8C149.1 49.1 165.8 67.7 179.9 88.2 91.5 132.3 29.7 210.3 3.7 299.5 1.3 285.3 0 270.8 0 256 0 160.2 52.6 76.7 130.5 32.8zm73.4 97c16.3 34.5 26.1 72.6 27.9 112.8-75.8 48-126.8 121.3-148.3 202.5-17.6-16.1-33-34.6-45.5-55 2.1-108.1 63.7-210.4 165.9-260.3zM256 512c-47.7 0-92.3-13-130.5-35.7 4.8-24.3 12.6-48 23.2-70.4 82.4 54.4 180.8 68.9 271 47-44.4 37-101.5 59.2-163.7 59.2z"]},KB=VB,Cr={prefix:"fas",iconName:"users",icon:[640,512,[],"f0c0","M320 16a104 104 0 1 1 0 208 104 104 0 1 1 0-208zM96 88a72 72 0 1 1 0 144 72 72 0 1 1 0-144zM0 416c0-70.7 57.3-128 128-128 12.8 0 25.2 1.9 36.9 5.4-32.9 36.8-52.9 85.4-52.9 138.6l0 16c0 11.4 2.4 22.2 6.7 32L32 480c-17.7 0-32-14.3-32-32l0-32zm521.3 64c4.3-9.8 6.7-20.6 6.7-32l0-16c0-53.2-20-101.8-52.9-138.6 11.7-3.5 24.1-5.4 36.9-5.4 70.7 0 128 57.3 128 128l0 32c0 17.7-14.3 32-32 32l-86.7 0zM472 160a72 72 0 1 1 144 0 72 72 0 1 1 -144 0zM160 432c0-88.4 71.6-160 160-160s160 71.6 160 160l0 16c0 17.7-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32l0-16z"]},XB={prefix:"fas",iconName:"venus-mars",icon:[640,512,[9892],"f228","M480-64c-17.7 0-32 14.3-32 32S462.3 0 480 0L530.7 0 474 56.7c-26.3-15.7-57.1-24.7-90-24.7-35.4 0-68.4 10.5-96 28.5-27.6-18-60.6-28.5-96-28.5-97.2 0-176 78.8-176 176 0 86.3 62.1 158.1 144 173.1l0 34.9-32 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l32 0 0 32c0 17.7 14.3 32 32 32s32-14.3 32-32l0-32 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-32 0 0-34.9c23.3-4.3 44.9-13.1 64-25.6 27.6 18 60.6 28.5 96 28.5 97.2 0 176-78.8 176-176 0-41.1-14.1-79-37.8-109L576 45.3 576 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-128c0-17.7-14.3-32-32-32L480-64zM336 309.2c20.2-28.6 32-63.5 32-101.2s-11.8-72.6-32-101.2c14.6-6.9 30.8-10.8 48-10.8 61.9 0 112 50.1 112 112S445.9 320 384 320c-17.2 0-33.5-3.9-48-10.8zM288 150.3c10.2 16.9 16 36.6 16 57.7s-5.8 40.9-16 57.7c-10.2-16.9-16-36.6-16-57.7s5.8-40.9 16-57.7zm-48-43.5c-20.2 28.6-32 63.5-32 101.2s11.8 72.6 32 101.2c-14.5 6.9-30.8 10.8-48 10.8-61.9 0-112-50.1-112-112S130.1 96 192 96c17.2 0 33.5 3.9 48 10.8z"]},kf={prefix:"fas",iconName:"user-shield",icon:[576,512,[],"f505","M224 248a120 120 0 1 0 0-240 120 120 0 1 0 0 240zm-29.7 56C95.8 304 16 383.8 16 482.3 16 498.7 29.3 512 45.7 512l251.5 0C261 469.4 240 414.5 240 356.4l0-31.1c0-7.3 1-14.5 2.9-21.3l-48.6 0zm251 184.5l-13.3 6.3 0-188.1 96 32 0 19.6c0 55.8-32.2 106.5-82.7 130.3zM421.9 259.5l-112 37.3c-13.1 4.4-21.9 16.6-21.9 30.4l0 31.1c0 74.4 43 142.1 110.2 173.7l18.5 8.7c4.8 2.2 10 3.4 15.2 3.4s10.5-1.2 15.2-3.4l18.5-8.7C533 500.3 576 432.6 576 358.2l0-31.1c0-13.8-8.8-26-21.9-30.4l-112-37.3c-6.6-2.2-13.7-2.2-20.2 0z"]},J6={prefix:"fas",iconName:"laptop",icon:[640,512,[128187],"f109","M128 32C92.7 32 64 60.7 64 96l0 240 64 0 0-240 384 0 0 240 64 0 0-240c0-35.3-28.7-64-64-64L128 32zM19.2 384C8.6 384 0 392.6 0 403.2 0 445.6 34.4 480 76.8 480l486.4 0c42.4 0 76.8-34.4 76.8-76.8 0-10.6-8.6-19.2-19.2-19.2L19.2 384z"]},vh={prefix:"fas",iconName:"school",icon:[576,512,[127979],"f549","M0 192c0-35.3 28.7-64 64-64l64 0 127.9-115.1c18.3-16.4 46-16.4 64.2 0L448 128 512 128c35.3 0 64 28.7 64 64l0 256c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 192zM224 376l0 88 128 0 0-88c0-22.1-17.9-40-40-40l-48 0c-22.1 0-40 17.9-40 40zm-112 8c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0zm16-144l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16zM496 384c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0zm16-144l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16zM288 256a64 64 0 1 0 0-128 64 64 0 1 0 0 128z"]},Z6={prefix:"fas",iconName:"broom",icon:[576,512,[129529],"f51a","M566.6 54.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192-34.7-34.7c-4.2-4.2-10-6.6-16-6.6-12.5 0-22.6 10.1-22.6 22.6l0 29.1 108.3 108.3 29.1 0c12.5 0 22.6-10.1 22.6-22.6 0-6-2.4-11.8-6.6-16l-34.7-34.7 192-192zM341.1 353.4L222.6 234.9c-42.7-3.7-85.2 11.7-115.8 42.3l-8 8c-22.3 22.3-34.8 52.5-34.8 84 0 6.8 7.1 11.2 13.2 8.2l51.1-25.5c5-2.5 9.5 4.1 5.4 7.9L7.3 473.4C2.7 477.6 0 483.6 0 489.9 0 502.1 9.9 512 22.1 512l173.3 0c38.8 0 75.9-15.4 103.4-42.8 30.6-30.6 45.9-73.1 42.3-115.8z"]},Q6={prefix:"fas",iconName:"utensils",icon:[512,512,[127860,61685,"cutlery"],"f2e7","M63.9 14.4C63.1 6.2 56.2 0 48 0s-15.1 6.2-16 14.3L17.9 149.7c-1.3 6-1.9 12.1-1.9 18.2 0 45.9 35.1 83.6 80 87.7L96 480c0 17.7 14.3 32 32 32s32-14.3 32-32l0-224.4c44.9-4.1 80-41.8 80-87.7 0-6.1-.6-12.2-1.9-18.2L223.9 14.3C223.1 6.2 216.2 0 208 0s-15.1 6.2-15.9 14.4L178.5 149.9c-.6 5.7-5.4 10.1-11.1 10.1-5.8 0-10.6-4.4-11.2-10.2L143.9 14.6C143.2 6.3 136.3 0 128 0s-15.2 6.3-15.9 14.6L99.8 149.8c-.5 5.8-5.4 10.2-11.2 10.2-5.8 0-10.6-4.4-11.1-10.1L63.9 14.4zM448 0C432 0 320 32 320 176l0 112c0 35.3 28.7 64 64 64l32 0 0 128c0 17.7 14.3 32 32 32s32-14.3 32-32l0-448c0-17.7-14.3-32-32-32z"]},JB={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zM167 167c9.4-9.4 24.6-9.4 33.9 0l55 55 55-55c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-55 55 55 55c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-55-55-55 55c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l55-55-55-55c-9.4-9.4-9.4-24.6 0-33.9z"]},hm=JB,lE={prefix:"fas",iconName:"clipboard-list",icon:[384,512,[],"f46d","M311.4 32l8.6 0c35.3 0 64 28.7 64 64l0 352c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32l8.6 0C83.6 12.9 104.3 0 128 0L256 0c23.7 0 44.4 12.9 55.4 32zM248 112c13.3 0 24-10.7 24-24s-10.7-24-24-24L136 64c-13.3 0-24 10.7-24 24s10.7 24 24 24l112 0zM128 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm32 0c0 13.3 10.7 24 24 24l112 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-112 0c-13.3 0-24 10.7-24 24zm0 128c0 13.3 10.7 24 24 24l112 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-112 0c-13.3 0-24 10.7-24 24zM96 416a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},ZB={prefix:"fas",iconName:"baseball",icon:[512,512,[129358,9918,"baseball-ball"],"f433","M232.4 1.1c-122.2 11.4-219.5 108.7-230.9 230.9 16.2-.1 32-1.8 47.2-5 13-2.7 25.7 5.5 28.4 18.5s-5.5 25.7-18.5 28.4c-18.4 3.9-37.6 6-57.1 6.1 11.4 122.2 108.7 219.5 230.9 230.9 .1-19.5 2.2-38.7 6.1-57.1 2.7-13 15.5-21.3 28.4-18.5s21.3 15.5 18.5 28.4c-3.2 15.2-4.9 31-5 47.2 122.2-11.4 219.5-108.7 230.9-230.9-16.2 .1-32 1.8-47.2 5-13 2.7-25.7-5.5-28.4-18.5s5.5-25.7 18.5-28.4c18.4-3.9 37.6-6 57.1-6.1-11.4-122.2-108.7-219.5-230.9-230.9-.1 19.5-2.2 38.7-6.1 57.1-2.7 13-15.5 21.3-28.4 18.5s-21.3-15.5-18.5-28.4c3.2-15.2 4.9-31 5-47.2zm2.8 151.4c-21.4 32.9-49.5 60.9-82.3 82.3-11.1 7.2-26 4.1-33.2-7s-4.1-26 7-33.2c27.2-17.7 50.5-41 68.3-68.3 7.2-11.1 22.1-14.3 33.2-7s14.3 22.1 7 33.2zM393.1 284.2c7.2 11.1 4.1 26-7 33.2-27.2 17.7-50.5 41-68.3 68.3-7.2 11.1-22.1 14.3-33.2 7s-14.3-22.1-7-33.2c21.4-32.9 49.5-60.9 82.3-82.3 11.1-7.2 26-4.1 33.2 7z"]},QB={prefix:"fas",iconName:"basketball",icon:[512,512,[127936,"basketball-ball"],"f434","M92.7 58.8l78.4 78.4c18.2-25 28.9-55.9 28.9-89.2 0-14.1-1.9-27.7-5.5-40.6-38 9.4-72.6 27.2-101.8 51.4zM58.8 92.7c-24.2 29.2-42 63.8-51.4 101.8 12.9 3.6 26.5 5.5 40.6 5.5 33.3 0 64.1-10.7 89.2-28.9L58.8 92.7zM256 0c-4.6 0-9.2 .1-13.7 .4 3.7 15.3 5.7 31.2 5.7 47.6 0 46.6-15.9 89.4-42.6 123.4L256 222.1 419.3 58.8C374.9 22.1 318.1 0 256 0zM48 248c-16.4 0-32.4-2-47.6-5.7-.2 4.5-.4 9.1-.4 13.7 0 62.1 22.1 118.9 58.8 163.3L222.1 256 171.4 205.4C137.4 232.1 94.6 248 48 248zm463.6 21.7c.2-4.5 .4-9.1 .4-13.7 0-62.1-22.1-118.9-58.8-163.3L289.9 256 340.6 306.6c34-26.7 76.9-42.6 123.4-42.6 16.4 0 32.4 2 47.6 5.7zm-7.1 47.8c-12.9-3.6-26.5-5.5-40.6-5.5-33.3 0-64.1 10.7-89.2 28.9l78.4 78.4c24.2-29.2 42-63.8 51.4-101.8zM340.9 374.8c-18.2 25-28.9 55.9-28.9 89.2 0 14.1 1.9 27.7 5.5 40.6 38-9.4 72.6-27.2 101.8-51.4l-78.4-78.4zm-34.3-34.3L256 289.9 92.7 453.2c44.3 36.7 101.2 58.8 163.3 58.8 4.6 0 9.2-.1 13.7-.4-3.7-15.3-5.7-31.2-5.7-47.6 0-46.6 15.9-89.4 42.6-123.4z"]},eF=QB,tF={prefix:"fas",iconName:"hockey-puck",icon:[512,512,[],"f453","M256 256C114.6 256 0 213 0 160s114.6-96 256-96 256 43 256 96-114.6 96-256 96zM0 352L0 242.7c16.9 12.3 37 22.2 58.1 30.1 53 19.9 123 31.2 197.9 31.2s144.9-11.3 197.9-31.2c21.2-7.9 41.2-17.8 58.1-30.1L512 352c0 53-114.6 96-256 96S0 405 0 352z"]},Bl={prefix:"fas",iconName:"money-bill-wave",icon:[512,512,[],"f53a","M0 419.6L0 109.5c0-23.2 24.1-38.6 46.3-32 87.7 26.2 149.7 5.5 212.1-15.3 64.5-21.5 129.4-43.1 223.3-13.1 18.5 5.9 30.3 23.8 30.3 43.3l0 310.1c0 23.2-24.1 38.6-46.2 32-87.7-26.2-149.8-5.5-212.1 15.3-64.5 21.5-129.4 43.1-223.3 13.1-18.5-5.9-30.3-23.8-30.3-43.3zM336 256c0-53-35.8-96-80-96s-80 43-80 96 35.8 96 80 96 80-43 80-96zM120 413.6c4.4 0 7.9-3.8 7.2-8.1-4.6-27.8-27-49.5-55.2-53-4.4-.5-8 3.1-8 7.5l0 39.9c0 3.6 2.4 6.8 6 7.7 17.9 4.2 34.3 6.1 50 6.1zm318.5-51.1c5 .8 9.5-3 9.5-8l0-42.6c0-4.4-3.6-8.1-8-7.5-25.2 3.1-45.9 20.9-53.2 44.6-1.4 4.7 2.3 9.1 7.2 9.2 14.2 .4 29 1.7 44.4 4.3zM448 152l0-39.9c0-3.6-2.5-6.8-6-7.7-17.9-4.2-34.3-6.1-50-6.1-4.4 0-7.9 3.8-7.2 8.1 4.6 27.8 27 49.5 55.2 53 4.4 .5 8-3.1 8-7.5zM125.2 162.9c1.4-4.7-2.3-9.1-7.2-9.2-14.2-.4-29-1.7-44.4-4.3-5-.8-9.5 3-9.5 8L64 200c0 4.4 3.6 8.1 8 7.5 25.2-3.1 45.9-20.9 53.2-44.6z"]},xg={prefix:"fas",iconName:"futbol",icon:[512,512,[9917,"futbol-ball","soccer-ball"],"f1e3","M417.3 360.1l-71.6-4.8c-5.2-.3-10.3 1.1-14.5 4.2s-7.2 7.4-8.4 12.5l-17.6 69.6C289.5 445.8 273 448 256 448s-33.5-2.2-49.2-6.4L189.2 372c-1.3-5-4.3-9.4-8.4-12.5s-9.3-4.5-14.5-4.2l-71.6 4.8c-17.6-27.2-28.5-59.2-30.4-93.6L125 228.3c4.4-2.8 7.6-7 9.2-11.9s1.4-10.2-.5-15l-26.7-66.6C128 109.2 155.3 89 186.7 76.9l55.2 46c4 3.3 9 5.1 14.1 5.1s10.2-1.8 14.1-5.1l55.2-46c31.3 12.1 58.7 32.3 79.6 57.9l-26.7 66.6c-1.9 4.8-2.1 10.1-.5 15s4.9 9.1 9.2 11.9l60.7 38.2c-1.9 34.4-12.8 66.4-30.4 93.6zM256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm14.1-325.7c-8.4-6.1-19.8-6.1-28.2 0L194 221c-8.4 6.1-11.9 16.9-8.7 26.8l18.3 56.3c3.2 9.9 12.4 16.6 22.8 16.6l59.2 0c10.4 0 19.6-6.7 22.8-16.6l18.3-56.3c3.2-9.9-.3-20.7-8.7-26.8l-47.9-34.8z"]},aF={prefix:"fas",iconName:"circle-exclamation",icon:[512,512,["exclamation-circle"],"f06a","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm0-376c13.3 0 24 10.7 24 24l0 112c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-112c0-13.3 10.7-24 24-24zM229.3 352a26.7 26.7 0 1 1 53.3 0 26.7 26.7 0 1 1 -53.3 0z"]},K0=aF,Qc={prefix:"fas",iconName:"chart-line",icon:[512,512,["line-chart"],"f201","M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7 262.6 153.4c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l73.4-73.4 57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"]},Ri={prefix:"fas",iconName:"building",icon:[384,512,[127970,61687],"f1ad","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L64 0zM176 352l32 0c17.7 0 32 14.3 32 32l0 80-96 0 0-80c0-17.7 14.3-32 32-32zM96 112c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM240 96l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM96 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm144-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16z"]},rF={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M195.1 9.5C198.1-5.3 211.2-16 226.4-16l59.8 0c15.2 0 28.3 10.7 31.3 25.5L332 79.5c14.1 6 27.3 13.7 39.3 22.8l67.8-22.5c14.4-4.8 30.2 1.2 37.8 14.4l29.9 51.8c7.6 13.2 4.9 29.8-6.5 39.9L447 233.3c.9 7.4 1.3 15 1.3 22.7s-.5 15.3-1.3 22.7l53.4 47.5c11.4 10.1 14 26.8 6.5 39.9l-29.9 51.8c-7.6 13.1-23.4 19.2-37.8 14.4l-67.8-22.5c-12.1 9.1-25.3 16.7-39.3 22.8l-14.4 69.9c-3.1 14.9-16.2 25.5-31.3 25.5l-59.8 0c-15.2 0-28.3-10.7-31.3-25.5l-14.4-69.9c-14.1-6-27.2-13.7-39.3-22.8L73.5 432.3c-14.4 4.8-30.2-1.2-37.8-14.4L5.8 366.1c-7.6-13.2-4.9-29.8 6.5-39.9l53.4-47.5c-.9-7.4-1.3-15-1.3-22.7s.5-15.3 1.3-22.7L12.3 185.8c-11.4-10.1-14-26.8-6.5-39.9L35.7 94.1c7.6-13.2 23.4-19.2 37.8-14.4l67.8 22.5c12.1-9.1 25.3-16.7 39.3-22.8L195.1 9.5zM256.3 336a80 80 0 1 0 -.6-160 80 80 0 1 0 .6 160z"]},Ph=rF,sF={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M505 273c9.4-9.4 9.4-24.6 0-33.9L361 95c-6.9-6.9-17.2-8.9-26.2-5.2S320 102.3 320 112l0 80-112 0c-26.5 0-48 21.5-48 48l0 32c0 26.5 21.5 48 48 48l112 0 0 80c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2L505 273zM160 96c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 32C43 32 0 75 0 128L0 384c0 53 43 96 96 96l64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l64 0z"]},oE=sF,gf={prefix:"fas",iconName:"arrow-up",icon:[384,512,[8593],"f062","M214.6 17.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 117.3 160 488c0 17.7 14.3 32 32 32s32-14.3 32-32l0-370.7 105.4 105.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"]},nF={prefix:"fas",iconName:"shirt",icon:[640,512,[128085,"t-shirt","tshirt"],"f553","M320.2 112c44.2 0 80-35.8 80-80l53.5 0c17 0 33.3 6.7 45.3 18.7L617.6 169.4c12.5 12.5 12.5 32.8 0 45.3l-50.7 50.7c-12.5 12.5-32.8 12.5-45.3 0l-41.4-41.4 0 224c0 35.3-28.7 64-64 64l-192 0c-35.3 0-64-28.7-64-64l0-224-41.4 41.4c-12.5 12.5-32.8 12.5-45.3 0L22.9 214.6c-12.5-12.5-12.5-32.8 0-45.3L141.5 50.7c12-12 28.3-18.7 45.3-18.7l53.5 0c0 44.2 35.8 80 80 80z"]},Af=nF,Dh={prefix:"fas",iconName:"play",icon:[448,512,[9654],"f04b","M91.2 36.9c-12.4-6.8-27.4-6.5-39.6 .7S32 57.9 32 72l0 368c0 14.1 7.5 27.2 19.6 34.4s27.2 7.5 39.6 .7l336-184c12.8-7 20.8-20.5 20.8-35.1s-8-28.1-20.8-35.1l-336-184z"]},xm={prefix:"fas",iconName:"calendar",icon:[448,512,[128197,128198],"f133","M128 0C110.3 0 96 14.3 96 32l0 32-32 0C28.7 64 0 92.7 0 128l0 48 448 0 0-48c0-35.3-28.7-64-64-64l-32 0 0-32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 32-128 0 0-32c0-17.7-14.3-32-32-32zM0 224L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-192-448 0z"]},Hn={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M434.8 70.1c14.3 10.4 17.5 30.4 7.1 44.7l-256 352c-5.5 7.6-14 12.3-23.4 13.1s-18.5-2.7-25.1-9.3l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l101.5 101.5 234-321.7c10.4-14.3 30.4-17.5 44.7-7.1z"]},Oh={prefix:"fas",iconName:"chart-bar",icon:[512,512,["bar-chart"],"f080","M32 32c17.7 0 32 14.3 32 32l0 336c0 8.8 7.2 16 16 16l400 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L80 480c-44.2 0-80-35.8-80-80L0 64C0 46.3 14.3 32 32 32zm96 64c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32zm32 80l128 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 112l256 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},iF={prefix:"fas",iconName:"house",icon:[512,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M277.8 8.6c-12.3-11.4-31.3-11.4-43.5 0l-224 208c-9.6 9-12.8 22.9-8 35.1S18.8 272 32 272l16 0 0 176c0 35.3 28.7 64 64 64l288 0c35.3 0 64-28.7 64-64l0-176 16 0c13.2 0 25-8.1 29.8-20.3s1.6-26.2-8-35.1l-224-208zM240 320l32 0c26.5 0 48 21.5 48 48l0 96-128 0 0-96c0-26.5 21.5-48 48-48z"]},lF=iF,fs={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M208 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm0 416a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM48 208a48 48 0 1 1 0 96 48 48 0 1 1 0-96zm368 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM75 369.1A48 48 0 1 1 142.9 437 48 48 0 1 1 75 369.1zM75 75A48 48 0 1 1 142.9 142.9 48 48 0 1 1 75 75zM437 369.1A48 48 0 1 1 369.1 437 48 48 0 1 1 437 369.1z"]},Js={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144,62470,"user-alt","user-large"],"f007","M224 248a120 120 0 1 0 0-240 120 120 0 1 0 0 240zm-29.7 56C95.8 304 16 383.8 16 482.3 16 498.7 29.3 512 45.7 512l356.6 0c16.4 0 29.7-13.3 29.7-29.7 0-98.5-79.8-178.3-178.3-178.3l-59.4 0z"]},oF={prefix:"fas",iconName:"arrow-right",icon:[512,512,[8594],"f061","M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-105.4 105.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"]},cF={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M55.1 73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L147.2 256 9.9 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192.5 301.3 329.9 438.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.8 256 375.1 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192.5 210.7 55.1 73.4z"]},Wt=cF,dF={prefix:"fas",iconName:"file-lines",icon:[384,512,[128441,128462,61686,"file-alt","file-text"],"f15c","M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM120 256c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"]},Wl=dF,uF={prefix:"fas",iconName:"file-invoice",icon:[384,512,[],"f570","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-277.5c0-17-6.7-33.3-18.7-45.3L258.7 18.7C246.7 6.7 230.5 0 213.5 0L64 0zM325.5 176L232 176c-13.3 0-24-10.7-24-24L208 58.5 325.5 176zM64 384l0-64c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32l0 64c0 17.7-14.3 32-32 32L96 416c-17.7 0-32-14.3-32-32zM88 64l48 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-48 0c-13.3 0-24-10.7-24-24S74.7 64 88 64zm0 96l48 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-48 0c-13.3 0-24-10.7-24-24s10.7-24 24-24z"]},mF={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm84.4-299.3l-80 128c-4.2 6.7-11.4 10.9-19.3 11.3s-15.5-3.2-20.2-9.6l-48-64c-8-10.6-5.8-25.6 4.8-33.6s25.6-5.8 33.6 4.8l27 36 61.4-98.3c7-11.2 21.8-14.7 33.1-7.6s14.7 21.8 7.6 33.1z"]},cr=mF,$N={prefix:"fas",iconName:"phone",icon:[512,512,[128222,128379],"f095","M160.2 25C152.3 6.1 131.7-3.9 112.1 1.4l-5.5 1.5c-64.6 17.6-119.8 80.2-103.7 156.4 37.1 175 174.8 312.7 349.8 349.8 76.3 16.2 138.8-39.1 156.4-103.7l1.5-5.5c5.4-19.7-4.7-40.3-23.5-48.1l-97.3-40.5c-16.5-6.9-35.6-2.1-47 11.8l-38.6 47.2C233.9 335.4 177.3 277 144.8 205.3L189 169.3c13.9-11.3 18.6-30.4 11.8-47L160.2 25z"]},mj={prefix:"fas",iconName:"id-card",icon:[576,512,[62147,"drivers-license"],"f2c2","M0 96C0 60.7 28.7 32 64 32l448 0c35.3 0 64 28.7 64 64L0 96zm0 48l576 0 0 272c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 144zM247.3 416c20.2 0 35.3-19.4 22.4-35-14.7-17.7-36.9-29-61.7-29l-64 0c-24.8 0-47 11.3-61.7 29-12.9 15.6 2.2 35 22.4 35l142.5 0zM176 312a56 56 0 1 0 0-112 56 56 0 1 0 0 112zM360 208c-13.3 0-24 10.7-24 24s10.7 24 24 24l112 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-112 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l112 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-112 0z"]},fy={prefix:"fas",iconName:"list",icon:[512,512,["list-squares"],"f03a","M40 48C26.7 48 16 58.7 16 72l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24L40 48zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM16 232l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0z"]},hF={prefix:"fas",iconName:"clock-rotate-left",icon:[576,512,["history"],"f1da","M288 64c106 0 192 86 192 192S394 448 288 448c-65.2 0-122.9-32.5-157.6-82.3-10.1-14.5-30.1-18-44.6-7.9s-18 30.1-7.9 44.6C124.1 468.6 201 512 288 512 429.4 512 544 397.4 544 256S429.4 0 288 0C202.3 0 126.5 42.1 80 106.7L80 80c0-17.7-14.3-32-32-32S16 62.3 16 80l0 112c0 17.7 14.3 32 32 32l24.6 0c.5 0 1 0 1.5 0l86 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-38.3 0C154.9 102.6 217 64 288 64zm24 88c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 104c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65 0-94.1z"]},xF=hF,fF={prefix:"fas",iconName:"person-swimming",icon:[640,512,[127946,"swimmer"],"f5c4","M552 152a56 56 0 1 0 -112 0 56 56 0 1 0 112 0zM293.4 198.2l-88.6 73.9c1.1 0 2.2-.1 3.3-.1 33.1-.2 66.3 10.2 94.4 31.4 22.1 16.6 29.1 16.6 51.2 0 27.5-20.7 59.9-31.2 92.4-31.4 4.8 0 9.7 .2 14.5 .6-8.3-30-24.3-57.7-46.8-80.2-18.4-18.4-40.6-32.7-65-41.8l-68.6-25.7c-27.4-10.3-58-7.5-83.1 7.6l-53.5 32.1c-15.2 9.1-20.1 28.7-11 43.9s28.7 20.1 43.9 11L230 187.3c8.4-5 18.6-5.9 27.7-2.5l35.7 13.4zm110 181.9c21.3-16.1 49.9-16.1 71.2 0 19 14.4 41.9 28.2 67.2 33.3 26.5 5.4 54.3 .8 80.7-19.1 10.6-8 12.7-23 4.7-33.6s-23-12.7-33.6-4.7c-14.9 11.2-28.6 13.1-42.3 10.3-14.9-3-30.9-11.9-47.8-24.6-38.4-29-90.5-29-129 0-24 18.1-40.7 26.3-54.5 26.3s-30.5-8.2-54.5-26.3c-38.4-29-90.5-29-129 0-21.6 16.3-41.3 25.8-58.9 25.7-9.6-.1-19.9-3-31.2-11.5-10.6-8-25.6-5.9-33.6 4.7S7 386.3 17.6 394.3c19.1 14.4 39.4 21 59.8 21.1 33.9 .2 64.3-17.4 88.1-35.3 21.3-16.1 49.9-16.1 71.2 0 24.2 18.3 52.3 35.9 83.4 35.9s59.1-17.7 83.4-35.9z"]},pF=fF,py={prefix:"fas",iconName:"chart-pie",icon:[576,512,["pie-chart"],"f200","M512.4 240l-176 0c-17.7 0-32-14.3-32-32l0-176c0-17.7 14.4-32.2 31.9-29.9 107 14.2 191.8 99 206 206 2.3 17.5-12.2 31.9-29.9 31.9zM222.6 37.2c18.1-3.8 33.8 11 33.8 29.5l0 197.3c0 5.6 2 11 5.5 15.3L394 438.7c11.7 14.1 9.2 35.4-6.9 44.1-34.1 18.6-73.2 29.2-114.7 29.2-132.5 0-240-107.5-240-240 0-115.5 81.5-211.9 190.2-234.8zM477.8 288l64 0c18.5 0 33.3 15.7 29.5 33.8-10.2 48.4-35 91.4-69.6 124.2-12.3 11.7-31.6 9.2-42.4-3.9L374.9 340.4c-17.3-20.9-2.4-52.4 24.6-52.4l78.2 0z"]},gF=py,ql={prefix:"fas",iconName:"credit-card",icon:[512,512,[128179,62083,"credit-card-alt"],"f09d","M0 128l0 32 512 0 0-32c0-35.3-28.7-64-64-64L64 64C28.7 64 0 92.7 0 128zm0 80L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-176-512 0zM64 360c0-13.3 10.7-24 24-24l48 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-48 0c-13.3 0-24-10.7-24-24zm144 0c0-13.3 10.7-24 24-24l64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-64 0c-13.3 0-24-10.7-24-24z"]},BN={prefix:"fas",iconName:"file-invoice-dollar",icon:[384,512,[],"f571","M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM64 88c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24s-10.7-24-24-24L88 64C74.7 64 64 74.7 64 88zm0 96c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zm112 76l0 4c-28.8 .3-52 23.7-52 52.5 0 25.7 18.5 47.6 43.9 51.8l41.7 7c6 1 10.4 6.2 10.4 12.3 0 6.9-5.6 12.5-12.5 12.5L152 400c-11 0-20 9-20 20s9 20 20 20l24 0 0 4c0 11 9 20 20 20s20-9 20-20l0-4.7c25-4.1 44-25.7 44-51.8 0-25.7-18.5-47.6-43.9-51.8l-41.7-7c-6-1-10.4-6.2-10.4-12.3 0-6.9 5.6-12.5 12.5-12.5l47.5 0c11 0 20-9 20-20s-9-20-20-20l-8 0 0-4c0-11-9-20-20-20s-20 9-20 20z"]},FN={prefix:"fas",iconName:"bullhorn",icon:[512,512,[128226,128363],"f0a1","M461.2 18.9C472.7 24 480 35.4 480 48l0 416c0 12.6-7.3 24-18.8 29.1s-24.8 3.2-34.3-5.1l-46.6-40.7c-43.6-38.1-98.7-60.3-156.4-63l0 95.7c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32l0-96C57.3 384 0 326.7 0 256S57.3 128 128 128l84.5 0c61.8-.2 121.4-22.7 167.9-63.3l46.6-40.7c9.4-8.3 22.9-10.2 34.3-5.1zM224 320l0 .2c70.3 2.7 137.8 28.5 192 73.4l0-275.3c-54.2 44.9-121.7 70.7-192 73.4L224 320z"]},gy={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},jh={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M309.5-18.9c-4.1-8-12.4-13.1-21.4-13.1s-17.3 5.1-21.4 13.1L193.1 125.3 33.2 150.7c-8.9 1.4-16.3 7.7-19.1 16.3s-.5 18 5.8 24.4l114.4 114.5-25.2 159.9c-1.4 8.9 2.3 17.9 9.6 23.2s16.9 6.1 25 2L288.1 417.6 432.4 491c8 4.1 17.7 3.3 25-2s11-14.2 9.6-23.2L441.7 305.9 556.1 191.4c6.4-6.4 8.6-15.8 5.8-24.4s-10.1-14.9-19.1-16.3L383 125.3 309.5-18.9z"]},$v={prefix:"fas",iconName:"flag",icon:[448,512,[127988,61725],"f024","M64 32C64 14.3 49.7 0 32 0S0 14.3 0 32L0 480c0 17.7 14.3 32 32 32s32-14.3 32-32l0-121.6 62.7-18.8c41.9-12.6 87.1-8.7 126.2 10.9 42.7 21.4 92.5 24 137.2 7.2l37.1-13.9c12.5-4.7 20.8-16.6 20.8-30l0-247.7c0-23-24.2-38-44.8-27.7l-11.8 5.9c-44.9 22.5-97.8 22.5-142.8 0-36.4-18.2-78.3-21.8-117.2-10.1L64 54.4 64 32z"]},yF={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 0c14.7 0 28.2 8.1 35.2 21l216 400c6.7 12.4 6.4 27.4-.8 39.5S486.1 480 472 480L40 480c-14.1 0-27.1-7.4-34.4-19.5s-7.5-27.1-.8-39.5l216-400c7-12.9 20.5-21 35.2-21zm0 168c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm26.7 216a26.7 26.7 0 1 0 -53.3 0 26.7 26.7 0 1 0 53.3 0z"]},Ma=yF,qN={prefix:"fas",iconName:"graduation-cap",icon:[576,512,[127891,"mortar-board"],"f19d","M48 195.8l209.2 86.1c9.8 4 20.2 6.1 30.8 6.1s21-2.1 30.8-6.1l242.4-99.8c9-3.7 14.8-12.4 14.8-22.1s-5.8-18.4-14.8-22.1L318.8 38.1C309 34.1 298.6 32 288 32s-21 2.1-30.8 6.1L14.8 137.9C5.8 141.6 0 150.3 0 160L0 456c0 13.3 10.7 24 24 24s24-10.7 24-24l0-260.2zm48 71.7L96 384c0 53 86 96 192 96s192-43 192-96l0-116.6-142.9 58.9c-15.6 6.4-32.2 9.7-49.1 9.7s-33.5-3.3-49.1-9.7L96 267.4z"]},UN={prefix:"fas",iconName:"lock",icon:[384,512,[128274],"f023","M128 96l0 64 128 0 0-64c0-35.3-28.7-64-64-64s-64 28.7-64 64zM64 160l0-64C64 25.3 121.3-32 192-32S320 25.3 320 96l0 64c35.3 0 64 28.7 64 64l0 224c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 224c0-35.3 28.7-64 64-64z"]},fi={prefix:"fas",iconName:"download",icon:[448,512,[],"f019","M256 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 210.7-41.4-41.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 242.7 256 32zM64 320c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-46.9 0-56.6 56.6c-31.2 31.2-81.9 31.2-113.1 0L110.9 320 64 320zm304 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},WN={prefix:"fas",iconName:"award",icon:[448,512,[],"f559","M245.9-25.9c-13.4-8.2-30.3-8.2-43.7 0-24.4 14.9-39.5 18.9-68.1 18.3-15.7-.4-30.3 8.1-37.9 21.9-13.7 25.1-24.8 36.2-49.9 49.9-13.8 7.5-22.2 22.2-21.9 37.9 .7 28.6-3.4 43.7-18.3 68.1-8.2 13.4-8.2 30.3 0 43.7 14.9 24.4 18.9 39.5 18.3 68.1-.4 15.7 8.1 30.3 21.9 37.9 22.1 12.1 33.3 22.1 45.1 41.5L42.7 458.5c-5.9 11.9-1.1 26.3 10.7 32.2l86 43c11.5 5.7 25.5 1.4 31.7-9.8l52.8-95.1 52.8 95.1c6.2 11.2 20.2 15.6 31.7 9.8l86-43c11.9-5.9 16.7-20.3 10.7-32.2l-48.6-97.2c11.7-19.4 23-29.4 45.1-41.5 13.8-7.5 22.2-22.2 21.9-37.9-.7-28.6 3.4-43.7 18.3-68.1 8.2-13.4 8.2-30.3 0-43.7-14.9-24.4-18.9-39.5-18.3-68.1 .4-15.7-8.1-30.3-21.9-37.9-25.1-13.7-36.2-24.8-49.9-49.9-7.5-13.8-22.2-22.2-37.9-21.9-28.6 .7-43.7-3.4-68.1-18.3zM224 96a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"]},bF={prefix:"fas",iconName:"table-tennis-paddle-ball",icon:[512,512,[127955,"ping-pong-paddle-ball","table-tennis"],"f45d","M97 127l67.4-67.4c38.2-38.2 90-59.6 144-59.6 112.5 0 203.7 91.2 203.7 203.6 0 46.4-15.8 91.1-44.5 127-23.6-16.8-52.4-26.7-83.5-26.7-31.1 0-59.9 9.9-83.4 26.6L97 127zM240 448c0 9.7 1 19.1 2.8 28.2-19.8-5.2-38-15.5-52.7-30.2-12.2-12.2-31.9-12.2-44.1 0L96.6 495.4c-10.6 10.6-25 16.6-40 16.6-31.2 0-56.6-25.3-56.6-56.6 0-15 6-29.4 16.6-40l49.4-49.4c12.2-12.2 12.2-31.9 0-44.1-21.7-21.7-33.9-51.2-33.9-81.9 0-29.4 11.1-57.6 31.1-79L266.6 364.6C249.9 388.1 240 416.9 240 448zm144-96a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"]},vF=bF,jF={prefix:"fas",iconName:"football",icon:[512,512,[127944,"football-ball"],"f44e","M261.1 22.6c-89 18-150.5 63.4-190 123.9-23.3 35.6-38.1 75.3-46.7 115.5L251.9 489.4c89-18 150.5-63.4 190.1-123.9 23.3-35.6 38.1-75.3 46.7-115.5L261.1 22.6zm236 168.1c3.2-42.3 .7-83.3-4.8-118.7-4.4-27.8-26.8-48-53.1-51.6-43-5.9-82.2-7.5-117.8-5.4L497.1 190.6zM191.7 497.1L15.9 321.4c-3.2 42.3-.7 83.3 4.8 118.7 4.4 27.8 26.8 48 53.1 51.6 43 5.9 82.2 7.5 117.8 5.4zM271.5 143c9.4-9.4 24.6-9.4 33.9 0l64 64c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9zm-64 64c9.4-9.4 24.6-9.4 33.9 0l64 64c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9zm-64 64c9.4-9.4 24.6-9.4 33.9 0l64 64c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9z"]},NF=jF,wF={prefix:"fas",iconName:"globe",icon:[512,512,[127760],"f0ac","M351.9 280l-190.9 0c2.9 64.5 17.2 123.9 37.5 167.4 11.4 24.5 23.7 41.8 35.1 52.4 11.2 10.5 18.9 12.2 22.9 12.2s11.7-1.7 22.9-12.2c11.4-10.6 23.7-28 35.1-52.4 20.3-43.5 34.6-102.9 37.5-167.4zM160.9 232l190.9 0C349 167.5 334.7 108.1 314.4 64.6 303 40.2 290.7 22.8 279.3 12.2 268.1 1.7 260.4 0 256.4 0s-11.7 1.7-22.9 12.2c-11.4 10.6-23.7 28-35.1 52.4-20.3 43.5-34.6 102.9-37.5 167.4zm-48 0C116.4 146.4 138.5 66.9 170.8 14.7 78.7 47.3 10.9 131.2 1.5 232l111.4 0zM1.5 280c9.4 100.8 77.2 184.7 169.3 217.3-32.3-52.2-54.4-131.7-57.9-217.3L1.5 280zm398.4 0c-3.5 85.6-25.6 165.1-57.9 217.3 92.1-32.7 159.9-116.5 169.3-217.3l-111.4 0zm111.4-48C501.9 131.2 434.1 47.3 342 14.7 374.3 66.9 396.4 146.4 399.9 232l111.4 0z"]},fm={prefix:"fas",iconName:"arrow-left",icon:[512,512,[8592],"f060","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 288 480 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-370.7 0 105.4-105.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"]},yy={prefix:"fas",iconName:"bed",icon:[576,512,[128716],"f236","M32 32c17.7 0 32 14.3 32 32l0 224 224 0 0-128c0-17.7 14.3-32 32-32l160 0c53 0 96 43 96 96l0 224c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-64-448 0 0 64c0 17.7-14.3 32-32 32S0 465.7 0 448L0 64C0 46.3 14.3 32 32 32zm80 160a64 64 0 1 1 128 0 64 64 0 1 1 -128 0z"]},SF={prefix:"fas",iconName:"person-running",icon:[448,512,[127939,"running"],"f70c","M256.5-32a56 56 0 1 1 0 112 56 56 0 1 1 0-112zM123.6 176c-3.3 0-6.2 2-7.4 5L94.2 235.9c-6.6 16.4-25.2 24.4-41.6 17.8s-24.4-25.2-17.8-41.6l21.9-54.9C67.7 129.9 94.1 112 123.6 112l97.3 0c28.5 0 54.8 15.1 69.1 39.7l32.8 56.3 61.6 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-61.6 0c-22.8 0-43.8-12.1-55.3-31.8l-10-17.1-20.7 70.4 75.4 22.6c27.7 8.3 41.8 39 30.1 65.5L285.7 509c-7.2 16.2-26.1 23.4-42.2 16.2s-23.4-26.1-16.2-42.2l49.2-110.8-95.9-28.8c-32.7-9.8-52-43.7-43.7-76.8l22.7-90.6-35.9 0zm-8 181c13.3 14.9 30.7 26.3 51.2 32.4l4.7 1.4-6.9 19.3c-5.8 16.3-16 30.8-29.3 41.8L52.9 519.8c-13.6 11.2-33.8 9.3-45-4.3s-9.3-33.8 4.3-45l82.4-67.9c4.5-3.7 7.8-8.5 9.8-13.9L115.6 357z"]},_F=SF,Ht={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 160-160 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l160 0 0 160c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160 160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-160 0 0-160z"]},cE={prefix:"fas",iconName:"box",icon:[448,512,[128230],"f466","M369.4 128l-34.3-48-222.1 0-34.3 48 290.7 0zM0 148.5c0-13.3 4.2-26.3 11.9-37.2L60.9 42.8C72.9 26 92.3 16 112.9 16l222.1 0c20.7 0 40.1 10 52.1 26.8l48.9 68.5c7.8 10.9 11.9 23.9 11.9 37.2L448 416c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 148.5z"]},as={prefix:"fas",iconName:"user-graduate",icon:[448,512,[],"f501","M241.3-13c-11.4-2.3-23.1-2.3-34.5 0L19.3 24.5C8.1 26.7 0 36.6 0 48 0 58.3 6.5 67.3 16 70.6L16 144 .3 222.6c-.2 .9-.3 1.9-.3 2.9 0 8 6.5 14.6 14.6 14.6l34.9 0c8 0 14.6-6.5 14.6-14.6 0-1-.1-1.9-.3-2.9L48 144 48 77.3 96 86.9 96 144c0 70.7 57.3 128 128 128s128-57.3 128-128l0-57.1 76.7-15.3C439.9 69.3 448 59.4 448 48s-8.1-21.3-19.3-23.5L241.3-13zM224 224c-44.2 0-80-35.8-80-80l160 0c0 44.2-35.8 80-80 80zM120.1 320.1C58.7 348.3 16 410.3 16 482.3 16 498.7 29.3 512 45.7 512l154.3 0 0-146-57.4-43c-6.5-4.9-15.2-6.2-22.6-2.8zM248 512l154.3 0c16.4 0 29.7-13.3 29.7-29.7 0-72-42.7-134-104.1-162.1-7.4-3.4-16.1-2.1-22.6 2.8l-57.4 43 0 146z"]},yf={prefix:"fas",iconName:"eye-slash",icon:[576,512,[],"f070","M41-24.9c-9.4-9.4-24.6-9.4-33.9 0S-2.3-.3 7 9.1l528 528c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-96.4-96.4c2.7-2.4 5.4-4.8 8-7.2 46.8-43.5 78.1-95.4 93-131.1 3.3-7.9 3.3-16.7 0-24.6-14.9-35.7-46.2-87.7-93-131.1-47.1-43.7-111.8-80.6-192.6-80.6-56.8 0-105.6 18.2-146 44.2L41-24.9zM204.5 138.7c23.5-16.8 52.4-26.7 83.5-26.7 79.5 0 144 64.5 144 144 0 31.1-9.9 59.9-26.7 83.5l-34.7-34.7c12.7-21.4 17-47.7 10.1-73.7-13.7-51.2-66.4-81.6-117.6-67.9-8.6 2.3-16.7 5.7-24 10l-34.7-34.7zM325.3 395.1c-11.9 3.2-24.4 4.9-37.3 4.9-79.5 0-144-64.5-144-144 0-12.9 1.7-25.4 4.9-37.3L69.4 139.2c-32.6 36.8-55 75.8-66.9 104.5-3.3 7.9-3.3 16.7 0 24.6 14.9 35.7 46.2 87.7 93 131.1 47.1 43.7 111.8 80.6 192.6 80.6 37.3 0 71.2-7.9 101.5-20.6l-64.2-64.2z"]},by={prefix:"fas",iconName:"tag",icon:[512,512,[127991],"f02b","M32.5 96l0 149.5c0 17 6.7 33.3 18.7 45.3l192 192c25 25 65.5 25 90.5 0L483.2 333.3c25-25 25-65.5 0-90.5l-192-192C279.2 38.7 263 32 246 32L96.5 32c-35.3 0-64 28.7-64 64zm112 16a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},CF={prefix:"fas",iconName:"file-contract",icon:[384,512,[],"f56c","M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM88 64C74.7 64 64 74.7 64 88s10.7 24 24 24l48 0c13.3 0 24-10.7 24-24s-10.7-24-24-24L88 64zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l48 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-48 0zm70.3 160c-11.3 0-21.9 5.1-28.9 13.9L69.3 409c-8.3 10.3-6.6 25.5 3.7 33.7s25.5 6.6 33.7-3.8l47.1-58.8 15.2 50.7c3 10.2 12.4 17.1 23 17.1l104 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-86.1 0-16.1-53.6c-4.7-15.7-19.1-26.4-35.5-26.4z"]},kF={prefix:"fas",iconName:"building-columns",icon:[512,512,["bank","institution","museum","university"],"f19c","M271.9 20.2c-9.8-5.6-21.9-5.6-31.8 0l-224 128c-12.6 7.2-18.8 22-15.1 36S17.5 208 32 208l32 0 0 208 0 0-51.2 38.4C4.7 460.4 0 469.9 0 480 0 497.7 14.3 512 32 512l448 0c17.7 0 32-14.3 32-32 0-10.1-4.7-19.6-12.8-25.6l-51.2-38.4 0-208 32 0c14.5 0 27.2-9.8 30.9-23.8s-2.5-28.8-15.1-36l-224-128zM400 208l0 208-64 0 0-208 64 0zm-112 0l0 208-64 0 0-208 64 0zm-112 0l0 208-64 0 0-208 64 0zM256 96a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},Jd=kF,bf={prefix:"fas",iconName:"arrow-down",icon:[384,512,[8595],"f063","M169.4 502.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 402.7 224 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 370.7-105.4-105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},AF={prefix:"fas",iconName:"location-dot",icon:[384,512,["map-marker-alt"],"f3c5","M0 188.6C0 84.4 86 0 192 0S384 84.4 384 188.6c0 119.3-120.2 262.3-170.4 316.8-11.8 12.8-31.5 12.8-43.3 0-50.2-54.5-170.4-197.5-170.4-316.8zM192 256a64 64 0 1 0 0-128 64 64 0 1 0 0 128z"]},lu=AF,EF={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]},HN={prefix:"fas",iconName:"route",icon:[512,512,[],"f4d7","M512 96c0 50.2-59.1 125.1-84.6 155-3.8 4.4-9.4 6.1-14.5 5L320 256c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c53 0 96 43 96 96s-43 96-96 96l-276.4 0c8.7-9.9 19.3-22.6 30-36.8 6.3-8.4 12.8-17.6 19-27.2L416 448c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0c-53 0-96-43-96-96s43-96 96-96l39.8 0c-21-31.5-39.8-67.7-39.8-96 0-53 43-96 96-96s96 43 96 96zM117.1 489.1c-3.8 4.3-7.2 8.1-10.1 11.3l-1.8 2-.2-.2c-6 4.6-14.6 4-20-1.8-25.2-27.4-85-97.9-85-148.4 0-53 43-96 96-96s96 43 96 96c0 30-21.1 67-43.5 97.9-10.7 14.7-21.7 28-30.8 38.5l-.6 .7zM128 352a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM416 128a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},dE={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M65.9 228.5c13.3-93 93.4-164.5 190.1-164.5 53 0 101 21.5 135.8 56.2 .2 .2 .4 .4 .6 .6l7.6 7.2-47.9 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 53.4-11.3-10.7C390.5 28.6 326.5 0 256 0 127 0 20.3 95.4 2.6 219.5 .1 237 12.2 253.2 29.7 255.7s33.7-9.7 36.2-27.1zm443.5 64c2.5-17.5-9.7-33.7-27.1-36.2s-33.7 9.7-36.2 27.1c-13.3 93-93.4 164.5-190.1 164.5-53 0-101-21.5-135.8-56.2-.2-.2-.4-.4-.6-.6l-7.6-7.2 47.9 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 320c-8.5 0-16.7 3.4-22.7 9.5S-.1 343.7 0 352.3l1 127c.1 17.7 14.6 31.9 32.3 31.7S65.2 496.4 65 478.7l-.4-51.5 10.7 10.1c46.3 46.1 110.2 74.7 180.7 74.7 129 0 235.7-95.4 253.4-219.5z"]},uE=dE,mE=dE,TF={prefix:"fas",iconName:"book-open",icon:[512,512,[128214,128366],"f518","M256 141.3l0 309.3 .5-.2C311.1 427.7 369.7 416 428.8 416l19.2 0 0-320-19.2 0c-42.2 0-84.1 8.4-123.1 24.6-16.8 7-33.4 13.9-49.7 20.7zM230.9 61.5L256 72 281.1 61.5C327.9 42 378.1 32 428.8 32L464 32c26.5 0 48 21.5 48 48l0 352c0 26.5-21.5 48-48 48l-35.2 0c-50.7 0-100.9 10-147.7 29.5l-12.8 5.3c-7.9 3.3-16.7 3.3-24.6 0l-12.8-5.3C184.1 490 133.9 480 83.2 480L48 480c-26.5 0-48-21.5-48-48L0 80C0 53.5 21.5 32 48 32l35.2 0c50.7 0 100.9 10 147.7 29.5z"]},PF={prefix:"fas",iconName:"money-bill",icon:[512,512,[],"f0d6","M64 64C28.7 64 0 92.7 0 128L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L64 64zm192 96a96 96 0 1 1 0 192 96 96 0 1 1 0-192zm192 24c0 4.4-3.6 8.1-8 7.5-29-3.6-51.9-26.6-55.5-55.5-.5-4.4 3.1-8 7.5-8l48 0c4.4 0 8 3.6 8 8l0 48zM64 328c0-4.4 3.6-8.1 8-7.5 29 3.6 51.9 26.6 55.5 55.5 .5 4.4-3.1 8-7.5 8l-48 0c-4.4 0-8-3.6-8-8l0-48zm8-136.5c-4.4 .5-8-3.1-8-7.5l0-48c0-4.4 3.6-8 8-8l48 0c4.4 0 8.1 3.6 7.5 8-3.6 29-26.6 51.9-55.5 55.5zm368 129c4.4-.5 8 3.1 8 7.5l0 48c0 4.4-3.6 8-8 8l-48 0c-4.4 0-8.1-3.6-7.5-8 3.6-29 26.6-51.9 55.5-55.5z"]},DF={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zM224 160a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm-8 64l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24z"]},hE=DF,OF={prefix:"fas",iconName:"hand-holding-dollar",icon:[576,512,["hand-holding-usd"],"f4c0","M288-16c-13.3 0-24 10.7-24 24l0 12-1.8 0c-36.6 0-66.2 29.7-66.2 66.2 0 33.4 24.9 61.6 58 65.7l61 7.6c5.1 .6 9 5 9 10.2 0 5.7-4.6 10.2-10.2 10.2L240 180c-15.5 0-28 12.5-28 28s12.5 28 28 28l24 0 0 12c0 13.3 10.7 24 24 24s24-10.7 24-24l0-12 1.8 0c36.6 0 66.2-29.7 66.2-66.2 0-33.4-24.9-61.6-58-65.7l-61-7.6c-5.1-.6-9-5-9-10.2 0-5.7 4.6-10.2 10.2-10.2L328 76c15.5 0 28-12.5 28-28s-12.5-28-28-28l-16 0 0-12c0-13.3-10.7-24-24-24zM109.3 341.5L66.7 384 32 384c-17.7 0-32 14.3-32 32l0 64c0 17.7 14.3 32 32 32l320.5 0c29 0 57.3-9.3 80.7-26.5l126.6-93.3c17.8-13.1 21.6-38.1 8.5-55.9s-38.1-21.6-55.9-8.5L392.6 416 280 416c-13.3 0-24-10.7-24-24s10.7-24 24-24l72 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-152.2 0c-33.9 0-66.5 13.5-90.5 37.5z"]},LF=OF,MF={prefix:"fas",iconName:"cart-shopping",icon:[640,512,[128722,"shopping-cart"],"f07a","M24-16C10.7-16 0-5.3 0 8S10.7 32 24 32l45.3 0c3.9 0 7.2 2.8 7.9 6.6l52.1 286.3c6.2 34.2 36 59.1 70.8 59.1L456 384c13.3 0 24-10.7 24-24s-10.7-24-24-24l-255.9 0c-11.6 0-21.5-8.3-23.6-19.7l-5.1-28.3 303.6 0c30.8 0 57.2-21.9 62.9-52.2L568.9 69.9C572.6 50.2 557.5 32 537.4 32l-412.7 0-.4-2c-4.8-26.6-28-46-55.1-46L24-16zM208 512a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm224 0a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"]},RF=MF;const eS="/assets/logo-fHKfHidm.png",IF=({open:t,setOpen:a})=>{const r=Co(),n=[{name:"Dashboard",href:"/dashboard",icon:lF},{name:"Students",href:"/dashboard/students",icon:as},{name:"Employees",href:"/dashboard/employees",icon:Cr},{name:"Classes",href:"/dashboard/classes",icon:vh},{name:"Timetables",href:"/dashboard/timetables",icon:Pa},{name:"Results",href:"/dashboard/results",icon:Oh},{name:"Boarding",href:"/dashboard/boarding",icon:yy},{name:"Transport",href:"/dashboard/transport/routes",icon:HN},{name:"Sports",href:"/dashboard/sports",icon:Jc},{name:"Student Billing",href:"/dashboard/billing",icon:ql},{name:"Accounting",href:"/dashboard/accounting/chart-of-accounts",icon:Bl},{name:"Payroll",href:"/dashboard/payroll",icon:sE},{name:"Inventory",href:"/dashboard/inventory",icon:Wl},{name:"Analytics",href:"/dashboard/analytics/expense-analysis",icon:py},{name:"Admin",href:"/dashboard/settings",icon:Ph}],i=o=>{const c=r.pathname.trim();let u=!1;return o.name==="Dashboard"?u=c==="/dashboard"||c==="/dashboard/":c==="/dashboard"||c==="/dashboard/"||(u=c===o.href||c.startsWith(o.href+"/")),e.jsxs(YR,{to:o.href,end:o.name==="Dashboard",className:()=>`nav-item ${u?"active":""}`,onClick:()=>a(!1),children:[e.jsx(I,{icon:o.icon,className:"nav-icon"}),e.jsx("span",{className:"nav-text",children:o.name})]},o.name)};return e.jsxs(e.Fragment,{children:[t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"sidebar-mobile-backdrop lg:hidden",onClick:()=>a(!1)}),e.jsxs("aside",{className:"sidebar-mobile lg:hidden",children:[e.jsxs("div",{className:"sidebar-header",style:{justifyContent:"space-between"},children:[e.jsx("img",{src:eS,alt:"Logo",className:"sidebar-logo"}),e.jsx("button",{onClick:()=>a(!1),className:"text-gray-600 hover:text-gray-900 p-1",children:e.jsx("span",{className:"text-xl font-bold",children:""})})]}),e.jsx("nav",{className:"sidebar-nav",children:n.map(i)})]})]}),e.jsxs("aside",{className:"sidebar hidden lg:block",children:[e.jsx("div",{className:"sidebar-header",children:e.jsx("img",{src:eS,alt:"Logo",className:"sidebar-logo"})}),e.jsx("nav",{className:"sidebar-nav",children:n.map(i)})]})]})},xE=x.createContext(),fE=()=>{const t=x.useContext(xE);return t||{activeTab:"fixtures",setActiveTab:()=>{}}},zF=({children:t})=>{const[a,r]=x.useState("fixtures"),[s,n]=x.useState(!1),i=o=>{o==="calendar"?(n(!0),r("fixtures")):(n(!1),r(o))};return e.jsx(xE.Provider,{value:{activeTab:a,setActiveTab:i,showCalendar:s,setShowCalendar:n},children:t})},pE=x.createContext(),$F=()=>{const t=x.useContext(pE);return t||{activeTab:"chart-of-accounts",setActiveTab:()=>{}}},BF=({children:t})=>{const[a,r]=x.useState("chart-of-accounts"),s=n=>{r(n)};return e.jsx(pE.Provider,{value:{activeTab:a,setActiveTab:s},children:t})},FF="/assets/brooklyne-BRYKbNjV.png",qF=({onMenuClick:t})=>{const{user:a,logout:r}=At(),s=Da(),n=Co(),[i,o]=x.useState(!1),c=x.useRef(null),u=fE(),{activeTab:m,setActiveTab:h,showCalendar:p}=u,y=$F(),{activeTab:g,setActiveTab:v}=y,N=n.pathname.startsWith("/dashboard/sports"),w=n.pathname.startsWith("/dashboard/accounting")||n.pathname.startsWith("/dashboard/expenses")||n.pathname.startsWith("/dashboard/procurement")||n.pathname.startsWith("/dashboard/assets")||n.pathname.startsWith("/dashboard/reports");x.useEffect(()=>{w&&v&&(n.pathname.startsWith("/dashboard/accounting")?v("chart-of-accounts"):n.pathname.startsWith("/dashboard/expenses")?v("expenses"):n.pathname.startsWith("/dashboard/procurement")?v("procurement"):n.pathname.startsWith("/dashboard/assets")?v("fixed-assets"):n.pathname.startsWith("/dashboard/reports")&&v("financial-reports"))},[n.pathname,w,v]);const T=n.pathname.startsWith("/dashboard/accounting")?"chart-of-accounts":n.pathname.startsWith("/dashboard/expenses")?"expenses":n.pathname.startsWith("/dashboard/procurement")?"procurement":n.pathname.startsWith("/dashboard/assets")?"fixed-assets":n.pathname.startsWith("/dashboard/reports")?"financial-reports":g,k=p?"calendar":m;x.useEffect(()=>{const A=M=>{c.current&&!c.current.contains(M.target)&&o(!1)};return i&&document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[i]);const R=()=>{r(),s("/"),o(!1)},P=()=>{if(!a||!a.username)return"U";const A=a.username.split(" ");return A.length>=2?(A[0][0]+A[1][0]).toUpperCase():a.username.substring(0,2).toUpperCase()},$=()=>!a||!a.roles?"User":a.roles.includes("admin")?"Administrator":a.roles[0]||"User";return e.jsx("nav",{className:"top-nav-bar",children:e.jsxs("div",{className:"top-nav-content",children:[e.jsxs("div",{className:"top-nav-left flex items-center gap-4",children:[e.jsxs("button",{type:"button",className:"lg:hidden -m-2.5 p-2.5 text-gray-700",onClick:t,children:[e.jsx("span",{className:"sr-only",children:"Open sidebar"}),e.jsx(I,{icon:EF,className:"h-6 w-6","aria-hidden":"true"})]}),e.jsx("img",{src:FF,alt:"Logo",className:"top-nav-logo"}),e.jsx("span",{className:"hidden md:inline",style:{fontSize:"1rem",fontWeight:"bold",color:"var(--text-primary)",marginLeft:"4px",whiteSpace:"nowrap"},children:"Brooklyn Private School"})]}),N&&e.jsx("div",{className:"top-nav-center",style:{position:"absolute",left:"50%",transform:"translateX(-50%)",display:"flex",alignItems:"center",gap:"0"},children:[{id:"fixtures",label:"Fixtures",icon:Pa},{id:"teams",label:"Teams",icon:Cr},{id:"announcements",label:"Announcements",icon:FN},{id:"calendar",label:"Calendar",icon:Pa}].map(A=>e.jsxs("button",{onClick:()=>h&&h(A.id),className:`top-nav-menu-item ${k===A.id?"active":""}`,style:{padding:"12px 20px",fontSize:"0.8rem",fontWeight:600,color:k===A.id?"#2563eb":"var(--text-secondary)",borderBottom:k===A.id?"2px solid #2563eb":"2px solid transparent",transition:"all 0.2s",whiteSpace:"nowrap",textDecoration:"none",cursor:"pointer",background:"transparent",borderTop:"none",borderLeft:"none",borderRight:"none",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:M=>{k!==A.id&&(M.currentTarget.style.color="var(--text-primary)",M.currentTarget.style.background="rgba(0, 0, 0, 0.02)")},onMouseLeave:M=>{k!==A.id&&(M.currentTarget.style.color="var(--text-secondary)",M.currentTarget.style.background="transparent")},children:[e.jsx(I,{icon:A.icon,style:{fontSize:"0.75rem"}}),A.label]},A.id))}),w&&e.jsx("div",{className:"top-nav-center",style:{position:"absolute",left:"50%",transform:"translateX(-50%)",display:"flex",alignItems:"center",gap:"0"},children:[{id:"chart-of-accounts",label:"Chart of Accounts",icon:Bl,path:"/dashboard/accounting/chart-of-accounts"},{id:"expenses",label:"Expenses",icon:RF,path:"/dashboard/expenses/expenses"},{id:"procurement",label:"Procurement",icon:fy,path:"/dashboard/procurement"},{id:"fixed-assets",label:"Fixed Assets",icon:iE,path:"/dashboard/assets"},{id:"financial-reports",label:"Financial Reports",icon:Qc,path:"/dashboard/reports/income-statement"}].map(A=>e.jsxs("button",{onClick:()=>{v&&v(A.id),s(A.path)},className:`top-nav-menu-item ${T===A.id?"active":""}`,style:{padding:"12px 20px",fontSize:"0.8rem",fontWeight:600,color:T===A.id?"#2563eb":"var(--text-secondary)",borderBottom:T===A.id?"2px solid #2563eb":"2px solid transparent",transition:"all 0.2s",whiteSpace:"nowrap",textDecoration:"none",cursor:"pointer",background:"transparent",borderTop:"none",borderLeft:"none",borderRight:"none",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:M=>{T!==A.id&&(M.currentTarget.style.color="var(--text-primary)",M.currentTarget.style.background="rgba(0, 0, 0, 0.02)")},onMouseLeave:M=>{T!==A.id&&(M.currentTarget.style.color="var(--text-secondary)",M.currentTarget.style.background="transparent")},children:[e.jsx(I,{icon:A.icon,style:{fontSize:"0.75rem"}}),A.label]},A.id))}),!N&&!w&&e.jsx("div",{className:"top-nav-center"}),e.jsxs("div",{className:"top-nav-right",children:[e.jsxs("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-400 hover:text-gray-500 transition-colors",children:[e.jsx("span",{className:"sr-only",children:"View notifications"}),e.jsx(I,{icon:OB,className:"h-5 w-5","aria-hidden":"true"})]}),e.jsxs("div",{className:"top-nav-user-info",ref:c,children:[e.jsxs("div",{className:"top-nav-user-details",children:[e.jsx("p",{className:"top-nav-username",children:a?.username||"User"}),e.jsx("p",{className:"top-nav-user-role",children:$()})]}),e.jsx("div",{className:"top-nav-avatar",onClick:()=>o(!i),children:P()}),i&&e.jsxs("div",{className:"avatar-dropdown",children:[e.jsxs("button",{className:"dropdown-item",onClick:()=>{s("/dashboard/settings"),o(!1)},children:[e.jsx(I,{icon:Js,className:"dropdown-icon"}),e.jsx("span",{children:"Profile"})]}),e.jsxs("button",{className:"dropdown-item",onClick:()=>{s("/dashboard/settings"),o(!1)},children:[e.jsx(I,{icon:Ph,className:"dropdown-icon"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{className:"dropdown-item logout",onClick:R,children:[e.jsx(I,{icon:oE,className:"dropdown-icon"}),e.jsx("span",{children:"Logout"})]})]})]})]})]})})},UF=()=>{const[t,a]=x.useState(!1);return e.jsx(zF,{children:e.jsx(BF,{children:e.jsxs("div",{className:"dashboard-container",children:[e.jsx(IF,{open:t,setOpen:a}),e.jsxs("main",{className:"main-content",children:[e.jsx(qF,{onMenuClick:()=>a(!0)}),e.jsx("div",{className:"main-content-scrollable",children:e.jsx(DR,{})})]})]})})})},hj="/assets/logo-fHKfHidm.png",WF="/assets/background-D0qtTWoM.jpeg",HF=()=>{const[t,a]=x.useState(""),[r,s]=x.useState(""),[n,i]=x.useState(""),[o,c]=x.useState(!1),u=Da(),{login:m,isAuthenticated:h}=At();x.useEffect(()=>{h&&u("/dashboard",{replace:!0})},[h,u]);const p=async y=>{y.preventDefault(),i(""),c(!0);try{(await m(t,r))?.success?u("/dashboard",{replace:!0}):i("Invalid username or password")}catch(g){i(g.message||"Invalid username or password"),console.error("Login error:",g)}finally{c(!1)}};return e.jsxs("div",{className:"login-container",children:[e.jsxs("div",{className:"login-left",children:[e.jsx("div",{className:"login-welcome-container",children:e.jsx("h2",{className:"login-welcome-text",children:"Welcome to Brooklyn Private School"})}),e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("div",{className:"login-logo-container",children:e.jsx("img",{src:hj,alt:"Logo",className:"login-logo"})}),e.jsx("h1",{className:"login-title",children:"Login Now"})]}),e.jsxs("form",{className:"login-form",onSubmit:p,children:[n&&e.jsx("div",{className:"login-error-message",children:n}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"username",className:"form-label",children:["Username ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",id:"username",className:"login-input",value:t,onChange:y=>{a(y.target.value),i("")},required:!0,disabled:o})]}),e.jsxs("div",{className:"form-field",children:[e.jsxs("label",{htmlFor:"password",className:"form-label",children:["Password ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"password",id:"password",className:"login-input",value:r,onChange:y=>{s(y.target.value),i("")},required:!0,disabled:o})]}),e.jsx("div",{className:"forgot-password-container",children:e.jsx("a",{href:"#",className:"forgot-password-link",children:"Forgot Password?"})}),e.jsx("button",{type:"submit",className:"login-submit-btn",disabled:o,style:{opacity:o?.6:1,cursor:o?"not-allowed":"pointer"},children:o?"Logging in...":"Submit"}),e.jsxs("div",{className:"register-link-container",children:[e.jsx("span",{className:"register-text",children:"Don't have an account? "}),e.jsx("a",{href:"#",className:"register-link",children:"Register for User Account"})]})]})]}),e.jsx("div",{className:"login-footer",children:e.jsxs("p",{className:"login-copyright",children:[" All rights reserved by ",e.jsxs("span",{className:"xedra-text",children:[e.jsx("span",{className:"xedra-x",children:"X"}),e.jsx("span",{className:"xedra-edra",children:"edra"})]})," Systems 2025"]})})]}),e.jsx("div",{className:"login-right",style:{backgroundImage:`url(${WF})`},children:e.jsx("div",{className:"login-right-pattern"})})]})};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gE=(...t)=>t.filter((a,r,s)=>!!a&&a.trim()!==""&&s.indexOf(a)===r).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=x.forwardRef(({color:t="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:n="",children:i,iconNode:o,...c},u)=>x.createElement("svg",{ref:u,...GF,width:a,height:a,stroke:t,strokeWidth:s?Number(r)*24/Number(a):r,className:gE("lucide",n),...c},[...o.map(([m,h])=>x.createElement(m,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=(t,a)=>{const r=x.forwardRef(({className:s,...n},i)=>x.createElement(VF,{ref:i,iconNode:a,className:gE(`lucide-${YF(t)}`,s),...n}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=Vl("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=Vl("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=Vl("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=Vl("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=Vl("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eq=Vl("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=Vl("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tq=Vl("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aq=Vl("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=Vl("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rq=Vl("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=Vl("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function yE(t,a){return function(){return t.apply(a,arguments)}}const{toString:sq}=Object.prototype,{getPrototypeOf:YN}=Object,{iterator:vy,toStringTag:bE}=Symbol,jy=(t=>a=>{const r=sq.call(a);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ko=t=>(t=t.toLowerCase(),a=>jy(a)===t),Ny=t=>a=>typeof a===t,{isArray:Yh}=Array,Ef=Ny("undefined");function Yf(t){return t!==null&&!Ef(t)&&t.constructor!==null&&!Ef(t.constructor)&&Oi(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const vE=ko("ArrayBuffer");function nq(t){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(t):a=t&&t.buffer&&vE(t.buffer),a}const iq=Ny("string"),Oi=Ny("function"),jE=Ny("number"),Gf=t=>t!==null&&typeof t=="object",lq=t=>t===!0||t===!1,X0=t=>{if(jy(t)!=="object")return!1;const a=YN(t);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(bE in t)&&!(vy in t)},oq=t=>{if(!Gf(t)||Yf(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},cq=ko("Date"),dq=ko("File"),uq=ko("Blob"),mq=ko("FileList"),hq=t=>Gf(t)&&Oi(t.pipe),xq=t=>{let a;return t&&(typeof FormData=="function"&&t instanceof FormData||Oi(t.append)&&((a=jy(t))==="formdata"||a==="object"&&Oi(t.toString)&&t.toString()==="[object FormData]"))},fq=ko("URLSearchParams"),[pq,gq,yq,bq]=["ReadableStream","Request","Response","Headers"].map(ko),vq=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Vf(t,a,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let s,n;if(typeof t!="object"&&(t=[t]),Yh(t))for(s=0,n=t.length;s<n;s++)a.call(null,t[s],s,t);else{if(Yf(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let c;for(s=0;s<o;s++)c=i[s],a.call(null,t[c],c,t)}}function NE(t,a){if(Yf(t))return null;a=a.toLowerCase();const r=Object.keys(t);let s=r.length,n;for(;s-- >0;)if(n=r[s],a===n.toLowerCase())return n;return null}const Ju=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,wE=t=>!Ef(t)&&t!==Ju;function fj(){const{caseless:t}=wE(this)&&this||{},a={},r=(s,n)=>{const i=t&&NE(a,n)||n;X0(a[i])&&X0(s)?a[i]=fj(a[i],s):X0(s)?a[i]=fj({},s):Yh(s)?a[i]=s.slice():a[i]=s};for(let s=0,n=arguments.length;s<n;s++)arguments[s]&&Vf(arguments[s],r);return a}const jq=(t,a,r,{allOwnKeys:s}={})=>(Vf(a,(n,i)=>{r&&Oi(n)?t[i]=yE(n,r):t[i]=n},{allOwnKeys:s}),t),Nq=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),wq=(t,a,r,s)=>{t.prototype=Object.create(a.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:a.prototype}),r&&Object.assign(t.prototype,r)},Sq=(t,a,r,s)=>{let n,i,o;const c={};if(a=a||{},t==null)return a;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)o=n[i],(!s||s(o,t,a))&&!c[o]&&(a[o]=t[o],c[o]=!0);t=r!==!1&&YN(t)}while(t&&(!r||r(t,a))&&t!==Object.prototype);return a},_q=(t,a,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=a.length;const s=t.indexOf(a,r);return s!==-1&&s===r},Cq=t=>{if(!t)return null;if(Yh(t))return t;let a=t.length;if(!jE(a))return null;const r=new Array(a);for(;a-- >0;)r[a]=t[a];return r},kq=(t=>a=>t&&a instanceof t)(typeof Uint8Array<"u"&&YN(Uint8Array)),Aq=(t,a)=>{const s=(t&&t[vy]).call(t);let n;for(;(n=s.next())&&!n.done;){const i=n.value;a.call(t,i[0],i[1])}},Eq=(t,a)=>{let r;const s=[];for(;(r=t.exec(a))!==null;)s.push(r);return s},Tq=ko("HTMLFormElement"),Pq=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,n){return s.toUpperCase()+n}),rS=(({hasOwnProperty:t})=>(a,r)=>t.call(a,r))(Object.prototype),Dq=ko("RegExp"),SE=(t,a)=>{const r=Object.getOwnPropertyDescriptors(t),s={};Vf(r,(n,i)=>{let o;(o=a(n,i,t))!==!1&&(s[i]=o||n)}),Object.defineProperties(t,s)},Oq=t=>{SE(t,(a,r)=>{if(Oi(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=t[r];if(Oi(s)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Lq=(t,a)=>{const r={},s=n=>{n.forEach(i=>{r[i]=!0})};return Yh(t)?s(t):s(String(t).split(a)),r},Mq=()=>{},Rq=(t,a)=>t!=null&&Number.isFinite(t=+t)?t:a;function Iq(t){return!!(t&&Oi(t.append)&&t[bE]==="FormData"&&t[vy])}const zq=t=>{const a=new Array(10),r=(s,n)=>{if(Gf(s)){if(a.indexOf(s)>=0)return;if(Yf(s))return s;if(!("toJSON"in s)){a[n]=s;const i=Yh(s)?[]:{};return Vf(s,(o,c)=>{const u=r(o,n+1);!Ef(u)&&(i[c]=u)}),a[n]=void 0,i}}return s};return r(t,0)},$q=ko("AsyncFunction"),Bq=t=>t&&(Gf(t)||Oi(t))&&Oi(t.then)&&Oi(t.catch),_E=((t,a)=>t?setImmediate:a?((r,s)=>(Ju.addEventListener("message",({source:n,data:i})=>{n===Ju&&i===r&&s.length&&s.shift()()},!1),n=>{s.push(n),Ju.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Oi(Ju.postMessage)),Fq=typeof queueMicrotask<"u"?queueMicrotask.bind(Ju):typeof process<"u"&&process.nextTick||_E,qq=t=>t!=null&&Oi(t[vy]),mt={isArray:Yh,isArrayBuffer:vE,isBuffer:Yf,isFormData:xq,isArrayBufferView:nq,isString:iq,isNumber:jE,isBoolean:lq,isObject:Gf,isPlainObject:X0,isEmptyObject:oq,isReadableStream:pq,isRequest:gq,isResponse:yq,isHeaders:bq,isUndefined:Ef,isDate:cq,isFile:dq,isBlob:uq,isRegExp:Dq,isFunction:Oi,isStream:hq,isURLSearchParams:fq,isTypedArray:kq,isFileList:mq,forEach:Vf,merge:fj,extend:jq,trim:vq,stripBOM:Nq,inherits:wq,toFlatObject:Sq,kindOf:jy,kindOfTest:ko,endsWith:_q,toArray:Cq,forEachEntry:Aq,matchAll:Eq,isHTMLForm:Tq,hasOwnProperty:rS,hasOwnProp:rS,reduceDescriptors:SE,freezeMethods:Oq,toObjectSet:Lq,toCamelCase:Pq,noop:Mq,toFiniteNumber:Rq,findKey:NE,global:Ju,isContextDefined:wE,isSpecCompliantForm:Iq,toJSONObject:zq,isAsyncFn:$q,isThenable:Bq,setImmediate:_E,asap:Fq,isIterable:qq};function Ea(t,a,r,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",a&&(this.code=a),r&&(this.config=r),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}mt.inherits(Ea,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:mt.toJSONObject(this.config),code:this.code,status:this.status}}});const CE=Ea.prototype,kE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{kE[t]={value:t}});Object.defineProperties(Ea,kE);Object.defineProperty(CE,"isAxiosError",{value:!0});Ea.from=(t,a,r,s,n,i)=>{const o=Object.create(CE);return mt.toFlatObject(t,o,function(u){return u!==Error.prototype},c=>c!=="isAxiosError"),Ea.call(o,t.message,a,r,s,n),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const Uq=null;function pj(t){return mt.isPlainObject(t)||mt.isArray(t)}function AE(t){return mt.endsWith(t,"[]")?t.slice(0,-2):t}function sS(t,a,r){return t?t.concat(a).map(function(n,i){return n=AE(n),!r&&i?"["+n+"]":n}).join(r?".":""):a}function Wq(t){return mt.isArray(t)&&!t.some(pj)}const Hq=mt.toFlatObject(mt,{},null,function(a){return/^is[A-Z]/.test(a)});function wy(t,a,r){if(!mt.isObject(t))throw new TypeError("target must be an object");a=a||new FormData,r=mt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,w){return!mt.isUndefined(w[N])});const s=r.metaTokens,n=r.visitor||h,i=r.dots,o=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&mt.isSpecCompliantForm(a);if(!mt.isFunction(n))throw new TypeError("visitor must be a function");function m(v){if(v===null)return"";if(mt.isDate(v))return v.toISOString();if(mt.isBoolean(v))return v.toString();if(!u&&mt.isBlob(v))throw new Ea("Blob is not supported. Use a Buffer instead.");return mt.isArrayBuffer(v)||mt.isTypedArray(v)?u&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function h(v,N,w){let j=v;if(v&&!w&&typeof v=="object"){if(mt.endsWith(N,"{}"))N=s?N:N.slice(0,-2),v=JSON.stringify(v);else if(mt.isArray(v)&&Wq(v)||(mt.isFileList(v)||mt.endsWith(N,"[]"))&&(j=mt.toArray(v)))return N=AE(N),j.forEach(function(k,R){!(mt.isUndefined(k)||k===null)&&a.append(o===!0?sS([N],R,i):o===null?N:N+"[]",m(k))}),!1}return pj(v)?!0:(a.append(sS(w,N,i),m(v)),!1)}const p=[],y=Object.assign(Hq,{defaultVisitor:h,convertValue:m,isVisitable:pj});function g(v,N){if(!mt.isUndefined(v)){if(p.indexOf(v)!==-1)throw Error("Circular reference detected in "+N.join("."));p.push(v),mt.forEach(v,function(j,T){(!(mt.isUndefined(j)||j===null)&&n.call(a,j,mt.isString(T)?T.trim():T,N,y))===!0&&g(j,N?N.concat(T):[T])}),p.pop()}}if(!mt.isObject(t))throw new TypeError("data must be an object");return g(t),a}function nS(t){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return a[s]})}function GN(t,a){this._pairs=[],t&&wy(t,this,a)}const EE=GN.prototype;EE.append=function(a,r){this._pairs.push([a,r])};EE.toString=function(a){const r=a?function(s){return a.call(this,s,nS)}:nS;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function Yq(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function TE(t,a,r){if(!a)return t;const s=r&&r.encode||Yq;mt.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let i;if(n?i=n(a,r):i=mt.isURLSearchParams(a)?a.toString():new GN(a,r).toString(s),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class iS{constructor(){this.handlers=[]}use(a,r,s){return this.handlers.push({fulfilled:a,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){mt.forEach(this.handlers,function(s){s!==null&&a(s)})}}const PE={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Gq=typeof URLSearchParams<"u"?URLSearchParams:GN,Vq=typeof FormData<"u"?FormData:null,Kq=typeof Blob<"u"?Blob:null,Xq={isBrowser:!0,classes:{URLSearchParams:Gq,FormData:Vq,Blob:Kq},protocols:["http","https","file","blob","url","data"]},VN=typeof window<"u"&&typeof document<"u",gj=typeof navigator=="object"&&navigator||void 0,Jq=VN&&(!gj||["ReactNative","NativeScript","NS"].indexOf(gj.product)<0),Zq=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Qq=VN&&window.location.href||"http://localhost",eU=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:VN,hasStandardBrowserEnv:Jq,hasStandardBrowserWebWorkerEnv:Zq,navigator:gj,origin:Qq},Symbol.toStringTag,{value:"Module"})),Un={...eU,...Xq};function tU(t,a){return wy(t,new Un.classes.URLSearchParams,{visitor:function(r,s,n,i){return Un.isNode&&mt.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...a})}function aU(t){return mt.matchAll(/\w+|\[(\w*)]/g,t).map(a=>a[0]==="[]"?"":a[1]||a[0])}function rU(t){const a={},r=Object.keys(t);let s;const n=r.length;let i;for(s=0;s<n;s++)i=r[s],a[i]=t[i];return a}function DE(t){function a(r,s,n,i){let o=r[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=i>=r.length;return o=!o&&mt.isArray(n)?n.length:o,u?(mt.hasOwnProp(n,o)?n[o]=[n[o],s]:n[o]=s,!c):((!n[o]||!mt.isObject(n[o]))&&(n[o]=[]),a(r,s,n[o],i)&&mt.isArray(n[o])&&(n[o]=rU(n[o])),!c)}if(mt.isFormData(t)&&mt.isFunction(t.entries)){const r={};return mt.forEachEntry(t,(s,n)=>{a(aU(s),n,r,0)}),r}return null}function sU(t,a,r){if(mt.isString(t))try{return(a||JSON.parse)(t),mt.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(t)}const Kf={transitional:PE,adapter:["xhr","http","fetch"],transformRequest:[function(a,r){const s=r.getContentType()||"",n=s.indexOf("application/json")>-1,i=mt.isObject(a);if(i&&mt.isHTMLForm(a)&&(a=new FormData(a)),mt.isFormData(a))return n?JSON.stringify(DE(a)):a;if(mt.isArrayBuffer(a)||mt.isBuffer(a)||mt.isStream(a)||mt.isFile(a)||mt.isBlob(a)||mt.isReadableStream(a))return a;if(mt.isArrayBufferView(a))return a.buffer;if(mt.isURLSearchParams(a))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let c;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return tU(a,this.formSerializer).toString();if((c=mt.isFileList(a))||s.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return wy(c?{"files[]":a}:a,u&&new u,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),sU(a)):a}],transformResponse:[function(a){const r=this.transitional||Kf.transitional,s=r&&r.forcedJSONParsing,n=this.responseType==="json";if(mt.isResponse(a)||mt.isReadableStream(a))return a;if(a&&mt.isString(a)&&(s&&!this.responseType||n)){const o=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(a)}catch(c){if(o)throw c.name==="SyntaxError"?Ea.from(c,Ea.ERR_BAD_RESPONSE,this,null,this.response):c}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Un.classes.FormData,Blob:Un.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};mt.forEach(["delete","get","head","post","put","patch"],t=>{Kf.headers[t]={}});const nU=mt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),iU=t=>{const a={};let r,s,n;return t&&t.split(`
`).forEach(function(o){n=o.indexOf(":"),r=o.substring(0,n).trim().toLowerCase(),s=o.substring(n+1).trim(),!(!r||a[r]&&nU[r])&&(r==="set-cookie"?a[r]?a[r].push(s):a[r]=[s]:a[r]=a[r]?a[r]+", "+s:s)}),a},lS=Symbol("internals");function Qx(t){return t&&String(t).trim().toLowerCase()}function J0(t){return t===!1||t==null?t:mt.isArray(t)?t.map(J0):String(t)}function lU(t){const a=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(t);)a[s[1]]=s[2];return a}const oU=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Bv(t,a,r,s,n){if(mt.isFunction(s))return s.call(this,a,r);if(n&&(a=r),!!mt.isString(a)){if(mt.isString(s))return a.indexOf(s)!==-1;if(mt.isRegExp(s))return s.test(a)}}function cU(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,r,s)=>r.toUpperCase()+s)}function dU(t,a){const r=mt.toCamelCase(" "+a);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+r,{value:function(n,i,o){return this[s].call(this,a,n,i,o)},configurable:!0})})}let Li=class{constructor(a){a&&this.set(a)}set(a,r,s){const n=this;function i(c,u,m){const h=Qx(u);if(!h)throw new Error("header name must be a non-empty string");const p=mt.findKey(n,h);(!p||n[p]===void 0||m===!0||m===void 0&&n[p]!==!1)&&(n[p||u]=J0(c))}const o=(c,u)=>mt.forEach(c,(m,h)=>i(m,h,u));if(mt.isPlainObject(a)||a instanceof this.constructor)o(a,r);else if(mt.isString(a)&&(a=a.trim())&&!oU(a))o(iU(a),r);else if(mt.isObject(a)&&mt.isIterable(a)){let c={},u,m;for(const h of a){if(!mt.isArray(h))throw TypeError("Object iterator must return a key-value pair");c[m=h[0]]=(u=c[m])?mt.isArray(u)?[...u,h[1]]:[u,h[1]]:h[1]}o(c,r)}else a!=null&&i(r,a,s);return this}get(a,r){if(a=Qx(a),a){const s=mt.findKey(this,a);if(s){const n=this[s];if(!r)return n;if(r===!0)return lU(n);if(mt.isFunction(r))return r.call(this,n,s);if(mt.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,r){if(a=Qx(a),a){const s=mt.findKey(this,a);return!!(s&&this[s]!==void 0&&(!r||Bv(this,this[s],s,r)))}return!1}delete(a,r){const s=this;let n=!1;function i(o){if(o=Qx(o),o){const c=mt.findKey(s,o);c&&(!r||Bv(s,s[c],c,r))&&(delete s[c],n=!0)}}return mt.isArray(a)?a.forEach(i):i(a),n}clear(a){const r=Object.keys(this);let s=r.length,n=!1;for(;s--;){const i=r[s];(!a||Bv(this,this[i],i,a,!0))&&(delete this[i],n=!0)}return n}normalize(a){const r=this,s={};return mt.forEach(this,(n,i)=>{const o=mt.findKey(s,i);if(o){r[o]=J0(n),delete r[i];return}const c=a?cU(i):String(i).trim();c!==i&&delete r[i],r[c]=J0(n),s[c]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const r=Object.create(null);return mt.forEach(this,(s,n)=>{s!=null&&s!==!1&&(r[n]=a&&mt.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,r])=>a+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...r){const s=new this(a);return r.forEach(n=>s.set(n)),s}static accessor(a){const s=(this[lS]=this[lS]={accessors:{}}).accessors,n=this.prototype;function i(o){const c=Qx(o);s[c]||(dU(n,o),s[c]=!0)}return mt.isArray(a)?a.forEach(i):i(a),this}};Li.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);mt.reduceDescriptors(Li.prototype,({value:t},a)=>{let r=a[0].toUpperCase()+a.slice(1);return{get:()=>t,set(s){this[r]=s}}});mt.freezeMethods(Li);function Fv(t,a){const r=this||Kf,s=a||r,n=Li.from(s.headers);let i=s.data;return mt.forEach(t,function(c){i=c.call(r,i,n.normalize(),a?a.status:void 0)}),n.normalize(),i}function OE(t){return!!(t&&t.__CANCEL__)}function Gh(t,a,r){Ea.call(this,t??"canceled",Ea.ERR_CANCELED,a,r),this.name="CanceledError"}mt.inherits(Gh,Ea,{__CANCEL__:!0});function LE(t,a,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?t(r):a(new Ea("Request failed with status code "+r.status,[Ea.ERR_BAD_REQUEST,Ea.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function uU(t){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return a&&a[1]||""}function mU(t,a){t=t||10;const r=new Array(t),s=new Array(t);let n=0,i=0,o;return a=a!==void 0?a:1e3,function(u){const m=Date.now(),h=s[i];o||(o=m),r[n]=u,s[n]=m;let p=i,y=0;for(;p!==n;)y+=r[p++],p=p%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),m-o<a)return;const g=h&&m-h;return g?Math.round(y*1e3/g):void 0}}function hU(t,a){let r=0,s=1e3/a,n,i;const o=(m,h=Date.now())=>{r=h,n=null,i&&(clearTimeout(i),i=null),t(...m)};return[(...m)=>{const h=Date.now(),p=h-r;p>=s?o(m,h):(n=m,i||(i=setTimeout(()=>{i=null,o(n)},s-p)))},()=>n&&o(n)]}const fg=(t,a,r=3)=>{let s=0;const n=mU(50,250);return hU(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,u=o-s,m=n(u),h=o<=c;s=o;const p={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:m||void 0,estimated:m&&c&&h?(c-o)/m:void 0,event:i,lengthComputable:c!=null,[a?"download":"upload"]:!0};t(p)},r)},oS=(t,a)=>{const r=t!=null;return[s=>a[0]({lengthComputable:r,total:t,loaded:s}),a[1]]},cS=t=>(...a)=>mt.asap(()=>t(...a)),xU=Un.hasStandardBrowserEnv?((t,a)=>r=>(r=new URL(r,Un.origin),t.protocol===r.protocol&&t.host===r.host&&(a||t.port===r.port)))(new URL(Un.origin),Un.navigator&&/(msie|trident)/i.test(Un.navigator.userAgent)):()=>!0,fU=Un.hasStandardBrowserEnv?{write(t,a,r,s,n,i){const o=[t+"="+encodeURIComponent(a)];mt.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),mt.isString(s)&&o.push("path="+s),mt.isString(n)&&o.push("domain="+n),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const a=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function pU(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function gU(t,a){return a?t.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):t}function ME(t,a,r){let s=!pU(a);return t&&(s||r==!1)?gU(t,a):a}const dS=t=>t instanceof Li?{...t}:t;function pm(t,a){a=a||{};const r={};function s(m,h,p,y){return mt.isPlainObject(m)&&mt.isPlainObject(h)?mt.merge.call({caseless:y},m,h):mt.isPlainObject(h)?mt.merge({},h):mt.isArray(h)?h.slice():h}function n(m,h,p,y){if(mt.isUndefined(h)){if(!mt.isUndefined(m))return s(void 0,m,p,y)}else return s(m,h,p,y)}function i(m,h){if(!mt.isUndefined(h))return s(void 0,h)}function o(m,h){if(mt.isUndefined(h)){if(!mt.isUndefined(m))return s(void 0,m)}else return s(void 0,h)}function c(m,h,p){if(p in a)return s(m,h);if(p in t)return s(void 0,m)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(m,h,p)=>n(dS(m),dS(h),p,!0)};return mt.forEach(Object.keys({...t,...a}),function(h){const p=u[h]||n,y=p(t[h],a[h],h);mt.isUndefined(y)&&p!==c||(r[h]=y)}),r}const RE=t=>{const a=pm({},t);let{data:r,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:c}=a;a.headers=o=Li.from(o),a.url=TE(ME(a.baseURL,a.url,a.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let u;if(mt.isFormData(r)){if(Un.hasStandardBrowserEnv||Un.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[m,...h]=u?u.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([m||"multipart/form-data",...h].join("; "))}}if(Un.hasStandardBrowserEnv&&(s&&mt.isFunction(s)&&(s=s(a)),s||s!==!1&&xU(a.url))){const m=n&&i&&fU.read(i);m&&o.set(n,m)}return a},yU=typeof XMLHttpRequest<"u",bU=yU&&function(t){return new Promise(function(r,s){const n=RE(t);let i=n.data;const o=Li.from(n.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:m}=n,h,p,y,g,v;function N(){g&&g(),v&&v(),n.cancelToken&&n.cancelToken.unsubscribe(h),n.signal&&n.signal.removeEventListener("abort",h)}let w=new XMLHttpRequest;w.open(n.method.toUpperCase(),n.url,!0),w.timeout=n.timeout;function j(){if(!w)return;const k=Li.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),P={data:!c||c==="text"||c==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:k,config:t,request:w};LE(function(A){r(A),N()},function(A){s(A),N()},P),w=null}"onloadend"in w?w.onloadend=j:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(j)},w.onabort=function(){w&&(s(new Ea("Request aborted",Ea.ECONNABORTED,t,w)),w=null)},w.onerror=function(){s(new Ea("Network Error",Ea.ERR_NETWORK,t,w)),w=null},w.ontimeout=function(){let R=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const P=n.transitional||PE;n.timeoutErrorMessage&&(R=n.timeoutErrorMessage),s(new Ea(R,P.clarifyTimeoutError?Ea.ETIMEDOUT:Ea.ECONNABORTED,t,w)),w=null},i===void 0&&o.setContentType(null),"setRequestHeader"in w&&mt.forEach(o.toJSON(),function(R,P){w.setRequestHeader(P,R)}),mt.isUndefined(n.withCredentials)||(w.withCredentials=!!n.withCredentials),c&&c!=="json"&&(w.responseType=n.responseType),m&&([y,v]=fg(m,!0),w.addEventListener("progress",y)),u&&w.upload&&([p,g]=fg(u),w.upload.addEventListener("progress",p),w.upload.addEventListener("loadend",g)),(n.cancelToken||n.signal)&&(h=k=>{w&&(s(!k||k.type?new Gh(null,t,w):k),w.abort(),w=null)},n.cancelToken&&n.cancelToken.subscribe(h),n.signal&&(n.signal.aborted?h():n.signal.addEventListener("abort",h)));const T=uU(n.url);if(T&&Un.protocols.indexOf(T)===-1){s(new Ea("Unsupported protocol "+T+":",Ea.ERR_BAD_REQUEST,t));return}w.send(i||null)})},vU=(t,a)=>{const{length:r}=t=t?t.filter(Boolean):[];if(a||r){let s=new AbortController,n;const i=function(m){if(!n){n=!0,c();const h=m instanceof Error?m:this.reason;s.abort(h instanceof Ea?h:new Gh(h instanceof Error?h.message:h))}};let o=a&&setTimeout(()=>{o=null,i(new Ea(`timeout ${a} of ms exceeded`,Ea.ETIMEDOUT))},a);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(m=>{m.unsubscribe?m.unsubscribe(i):m.removeEventListener("abort",i)}),t=null)};t.forEach(m=>m.addEventListener("abort",i));const{signal:u}=s;return u.unsubscribe=()=>mt.asap(c),u}},jU=function*(t,a){let r=t.byteLength;if(r<a){yield t;return}let s=0,n;for(;s<r;)n=s+a,yield t.slice(s,n),s=n},NU=async function*(t,a){for await(const r of wU(t))yield*jU(r,a)},wU=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const a=t.getReader();try{for(;;){const{done:r,value:s}=await a.read();if(r)break;yield s}}finally{await a.cancel()}},uS=(t,a,r,s)=>{const n=NU(t,a);let i=0,o,c=u=>{o||(o=!0,s&&s(u))};return new ReadableStream({async pull(u){try{const{done:m,value:h}=await n.next();if(m){c(),u.close();return}let p=h.byteLength;if(r){let y=i+=p;r(y)}u.enqueue(new Uint8Array(h))}catch(m){throw c(m),m}},cancel(u){return c(u),n.return()}},{highWaterMark:2})},Sy=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",IE=Sy&&typeof ReadableStream=="function",SU=Sy&&(typeof TextEncoder=="function"?(t=>a=>t.encode(a))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),zE=(t,...a)=>{try{return!!t(...a)}catch{return!1}},_U=IE&&zE(()=>{let t=!1;const a=new Request(Un.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!a}),mS=64*1024,yj=IE&&zE(()=>mt.isReadableStream(new Response("").body)),pg={stream:yj&&(t=>t.body)};Sy&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(a=>{!pg[a]&&(pg[a]=mt.isFunction(t[a])?r=>r[a]():(r,s)=>{throw new Ea(`Response type '${a}' is not supported`,Ea.ERR_NOT_SUPPORT,s)})})})(new Response);const CU=async t=>{if(t==null)return 0;if(mt.isBlob(t))return t.size;if(mt.isSpecCompliantForm(t))return(await new Request(Un.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(mt.isArrayBufferView(t)||mt.isArrayBuffer(t))return t.byteLength;if(mt.isURLSearchParams(t)&&(t=t+""),mt.isString(t))return(await SU(t)).byteLength},kU=async(t,a)=>{const r=mt.toFiniteNumber(t.getContentLength());return r??CU(a)},AU=Sy&&(async t=>{let{url:a,method:r,data:s,signal:n,cancelToken:i,timeout:o,onDownloadProgress:c,onUploadProgress:u,responseType:m,headers:h,withCredentials:p="same-origin",fetchOptions:y}=RE(t);m=m?(m+"").toLowerCase():"text";let g=vU([n,i&&i.toAbortSignal()],o),v;const N=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let w;try{if(u&&_U&&r!=="get"&&r!=="head"&&(w=await kU(h,s))!==0){let P=new Request(a,{method:"POST",body:s,duplex:"half"}),$;if(mt.isFormData(s)&&($=P.headers.get("content-type"))&&h.setContentType($),P.body){const[A,M]=oS(w,fg(cS(u)));s=uS(P.body,mS,A,M)}}mt.isString(p)||(p=p?"include":"omit");const j="credentials"in Request.prototype;v=new Request(a,{...y,signal:g,method:r.toUpperCase(),headers:h.normalize().toJSON(),body:s,duplex:"half",credentials:j?p:void 0});let T=await fetch(v,y);const k=yj&&(m==="stream"||m==="response");if(yj&&(c||k&&N)){const P={};["status","statusText","headers"].forEach(_=>{P[_]=T[_]});const $=mt.toFiniteNumber(T.headers.get("content-length")),[A,M]=c&&oS($,fg(cS(c),!0))||[];T=new Response(uS(T.body,mS,A,()=>{M&&M(),N&&N()}),P)}m=m||"text";let R=await pg[mt.findKey(pg,m)||"text"](T,t);return!k&&N&&N(),await new Promise((P,$)=>{LE(P,$,{data:R,headers:Li.from(T.headers),status:T.status,statusText:T.statusText,config:t,request:v})})}catch(j){throw N&&N(),j&&j.name==="TypeError"&&/Load failed|fetch/i.test(j.message)?Object.assign(new Ea("Network Error",Ea.ERR_NETWORK,t,v),{cause:j.cause||j}):Ea.from(j,j&&j.code,t,v)}}),bj={http:Uq,xhr:bU,fetch:AU};mt.forEach(bj,(t,a)=>{if(t){try{Object.defineProperty(t,"name",{value:a})}catch{}Object.defineProperty(t,"adapterName",{value:a})}});const hS=t=>`- ${t}`,EU=t=>mt.isFunction(t)||t===null||t===!1,$E={getAdapter:t=>{t=mt.isArray(t)?t:[t];const{length:a}=t;let r,s;const n={};for(let i=0;i<a;i++){r=t[i];let o;if(s=r,!EU(r)&&(s=bj[(o=String(r)).toLowerCase()],s===void 0))throw new Ea(`Unknown adapter '${o}'`);if(s)break;n[o||"#"+i]=s}if(!s){const i=Object.entries(n).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=a?i.length>1?`since :
`+i.map(hS).join(`
`):" "+hS(i[0]):"as no adapter specified";throw new Ea("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:bj};function qv(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Gh(null,t)}function xS(t){return qv(t),t.headers=Li.from(t.headers),t.data=Fv.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),$E.getAdapter(t.adapter||Kf.adapter)(t).then(function(s){return qv(t),s.data=Fv.call(t,t.transformResponse,s),s.headers=Li.from(s.headers),s},function(s){return OE(s)||(qv(t),s&&s.response&&(s.response.data=Fv.call(t,t.transformResponse,s.response),s.response.headers=Li.from(s.response.headers))),Promise.reject(s)})}const BE="1.11.0",_y={};["object","boolean","number","function","string","symbol"].forEach((t,a)=>{_y[t]=function(s){return typeof s===t||"a"+(a<1?"n ":" ")+t}});const fS={};_y.transitional=function(a,r,s){function n(i,o){return"[Axios v"+BE+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,c)=>{if(a===!1)throw new Ea(n(o," has been removed"+(r?" in "+r:"")),Ea.ERR_DEPRECATED);return r&&!fS[o]&&(fS[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),a?a(i,o,c):!0}};_y.spelling=function(a){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${a}`),!0)};function TU(t,a,r){if(typeof t!="object")throw new Ea("options must be an object",Ea.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let n=s.length;for(;n-- >0;){const i=s[n],o=a[i];if(o){const c=t[i],u=c===void 0||o(c,i,t);if(u!==!0)throw new Ea("option "+i+" must be "+u,Ea.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ea("Unknown option "+i,Ea.ERR_BAD_OPTION)}}const Z0={assertOptions:TU,validators:_y},Xo=Z0.validators;let sm=class{constructor(a){this.defaults=a||{},this.interceptors={request:new iS,response:new iS}}async request(a,r){try{return await this._request(a,r)}catch(s){if(s instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(a,r){typeof a=="string"?(r=r||{},r.url=a):r=a||{},r=pm(this.defaults,r);const{transitional:s,paramsSerializer:n,headers:i}=r;s!==void 0&&Z0.assertOptions(s,{silentJSONParsing:Xo.transitional(Xo.boolean),forcedJSONParsing:Xo.transitional(Xo.boolean),clarifyTimeoutError:Xo.transitional(Xo.boolean)},!1),n!=null&&(mt.isFunction(n)?r.paramsSerializer={serialize:n}:Z0.assertOptions(n,{encode:Xo.function,serialize:Xo.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Z0.assertOptions(r,{baseUrl:Xo.spelling("baseURL"),withXsrfToken:Xo.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&mt.merge(i.common,i[r.method]);i&&mt.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),r.headers=Li.concat(o,i);const c=[];let u=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(r)===!1||(u=u&&N.synchronous,c.unshift(N.fulfilled,N.rejected))});const m=[];this.interceptors.response.forEach(function(N){m.push(N.fulfilled,N.rejected)});let h,p=0,y;if(!u){const v=[xS.bind(this),void 0];for(v.unshift(...c),v.push(...m),y=v.length,h=Promise.resolve(r);p<y;)h=h.then(v[p++],v[p++]);return h}y=c.length;let g=r;for(p=0;p<y;){const v=c[p++],N=c[p++];try{g=v(g)}catch(w){N.call(this,w);break}}try{h=xS.call(this,g)}catch(v){return Promise.reject(v)}for(p=0,y=m.length;p<y;)h=h.then(m[p++],m[p++]);return h}getUri(a){a=pm(this.defaults,a);const r=ME(a.baseURL,a.url,a.allowAbsoluteUrls);return TE(r,a.params,a.paramsSerializer)}};mt.forEach(["delete","get","head","options"],function(a){sm.prototype[a]=function(r,s){return this.request(pm(s||{},{method:a,url:r,data:(s||{}).data}))}});mt.forEach(["post","put","patch"],function(a){function r(s){return function(i,o,c){return this.request(pm(c||{},{method:a,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}sm.prototype[a]=r(),sm.prototype[a+"Form"]=r(!0)});let PU=class FE{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(n=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](n);s._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(c=>{s.subscribe(c),i=c}).then(n);return o.cancel=function(){s.unsubscribe(i)},o},a(function(i,o,c){s.reason||(s.reason=new Gh(i,o,c),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const r=this._listeners.indexOf(a);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const a=new AbortController,r=s=>{a.abort(s)};return this.subscribe(r),a.signal.unsubscribe=()=>this.unsubscribe(r),a.signal}static source(){let a;return{token:new FE(function(n){a=n}),cancel:a}}};function DU(t){return function(r){return t.apply(null,r)}}function OU(t){return mt.isObject(t)&&t.isAxiosError===!0}const vj={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vj).forEach(([t,a])=>{vj[a]=t});function qE(t){const a=new sm(t),r=yE(sm.prototype.request,a);return mt.extend(r,sm.prototype,a,{allOwnKeys:!0}),mt.extend(r,a,null,{allOwnKeys:!0}),r.create=function(n){return qE(pm(t,n))},r}const re=qE(Kf);re.Axios=sm;re.CanceledError=Gh;re.CancelToken=PU;re.isCancel=OE;re.VERSION=BE;re.toFormData=wy;re.AxiosError=Ea;re.Cancel=re.CanceledError;re.all=function(a){return Promise.all(a)};re.spread=DU;re.isAxiosError=OU;re.mergeConfig=pm;re.AxiosHeaders=Li;re.formToJSON=t=>DE(mt.isHTMLForm(t)?new FormData(t):t);re.getAdapter=$E.getAdapter;re.HttpStatusCode=vj;re.default=re;const{Axios:Sme,AxiosError:_me,CanceledError:Cme,isCancel:kme,CancelToken:Ame,VERSION:Eme,all:Tme,Cancel:Pme,isAxiosError:Dme,spread:Ome,toFormData:Lme,AxiosHeaders:Mme,HttpStatusCode:Rme,formToJSON:Ime,getAdapter:zme,mergeConfig:$me}=re;function UE(t){var a,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(a=0;a<n;a++)t[a]&&(r=UE(t[a]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function Qa(){for(var t,a,r=0,s="",n=arguments.length;r<n;r++)(t=arguments[r])&&(a=UE(t))&&(s&&(s+=" "),s+=a);return s}var Uv={},Wv={},pS;function LU(){return pS||(pS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return r==="__proto__"}t.isUnsafeProperty=a}(Wv)),Wv}var Hv={},gS;function WE(){return gS||(gS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=a}(Hv)),Hv}var Yv={},yS;function HE(){return yS||(yS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}t.toKey=a}(Yv)),Yv}var Gv={},bS;function KN(){return bS||(bS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){const s=[],n=r.length;if(n===0)return s;let i=0,o="",c="",u=!1;for(r.charCodeAt(0)===46&&(s.push(""),i++);i<n;){const m=r[i];c?m==="\\"&&i+1<n?(i++,o+=r[i]):m===c?c="":o+=m:u?m==='"'||m==="'"?c=m:m==="]"?(u=!1,s.push(o),o=""):o+=m:m==="["?(u=!0,o&&(s.push(o),o="")):m==="."?o&&(s.push(o),o=""):o+=m,i++}return o&&s.push(o),s}t.toPath=a}(Gv)),Gv}var vS;function XN(){return vS||(vS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=LU(),r=WE(),s=HE(),n=KN();function i(c,u,m){if(c==null)return m;switch(typeof u){case"string":{if(a.isUnsafeProperty(u))return m;const h=c[u];return h===void 0?r.isDeepKey(u)?i(c,n.toPath(u),m):m:h}case"number":case"symbol":{typeof u=="number"&&(u=s.toKey(u));const h=c[u];return h===void 0?m:h}default:{if(Array.isArray(u))return o(c,u,m);if(Object.is(u?.valueOf(),-0)?u="-0":u=String(u),a.isUnsafeProperty(u))return m;const h=c[u];return h===void 0?m:h}}}function o(c,u,m){if(u.length===0)return m;let h=c;for(let p=0;p<u.length;p++){if(h==null||a.isUnsafeProperty(u[p]))return m;h=h[u[p]]}return h===void 0?m:h}t.get=i}(Uv)),Uv}var Vv,jS;function MU(){return jS||(jS=1,Vv=XN().get),Vv}var RU=MU();const gm=oc(RU);var Kv={exports:{}},or={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NS;function IU(){if(NS)return or;NS=1;var t=typeof Symbol=="function"&&Symbol.for,a=t?Symbol.for("react.element"):60103,r=t?Symbol.for("react.portal"):60106,s=t?Symbol.for("react.fragment"):60107,n=t?Symbol.for("react.strict_mode"):60108,i=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,c=t?Symbol.for("react.context"):60110,u=t?Symbol.for("react.async_mode"):60111,m=t?Symbol.for("react.concurrent_mode"):60111,h=t?Symbol.for("react.forward_ref"):60112,p=t?Symbol.for("react.suspense"):60113,y=t?Symbol.for("react.suspense_list"):60120,g=t?Symbol.for("react.memo"):60115,v=t?Symbol.for("react.lazy"):60116,N=t?Symbol.for("react.block"):60121,w=t?Symbol.for("react.fundamental"):60117,j=t?Symbol.for("react.responder"):60118,T=t?Symbol.for("react.scope"):60119;function k(P){if(typeof P=="object"&&P!==null){var $=P.$$typeof;switch($){case a:switch(P=P.type,P){case u:case m:case s:case i:case n:case p:return P;default:switch(P=P&&P.$$typeof,P){case c:case h:case v:case g:case o:return P;default:return $}}case r:return $}}}function R(P){return k(P)===m}return or.AsyncMode=u,or.ConcurrentMode=m,or.ContextConsumer=c,or.ContextProvider=o,or.Element=a,or.ForwardRef=h,or.Fragment=s,or.Lazy=v,or.Memo=g,or.Portal=r,or.Profiler=i,or.StrictMode=n,or.Suspense=p,or.isAsyncMode=function(P){return R(P)||k(P)===u},or.isConcurrentMode=R,or.isContextConsumer=function(P){return k(P)===c},or.isContextProvider=function(P){return k(P)===o},or.isElement=function(P){return typeof P=="object"&&P!==null&&P.$$typeof===a},or.isForwardRef=function(P){return k(P)===h},or.isFragment=function(P){return k(P)===s},or.isLazy=function(P){return k(P)===v},or.isMemo=function(P){return k(P)===g},or.isPortal=function(P){return k(P)===r},or.isProfiler=function(P){return k(P)===i},or.isStrictMode=function(P){return k(P)===n},or.isSuspense=function(P){return k(P)===p},or.isValidElementType=function(P){return typeof P=="string"||typeof P=="function"||P===s||P===m||P===i||P===n||P===p||P===y||typeof P=="object"&&P!==null&&(P.$$typeof===v||P.$$typeof===g||P.$$typeof===o||P.$$typeof===c||P.$$typeof===h||P.$$typeof===w||P.$$typeof===j||P.$$typeof===T||P.$$typeof===N)},or.typeOf=k,or}var wS;function zU(){return wS||(wS=1,Kv.exports=IU()),Kv.exports}var $U=zU(),un=t=>t===0?0:t>0?1:-1,Ii=t=>typeof t=="number"&&t!=+t,Zu=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,ta=t=>(typeof t=="number"||t instanceof Number)&&!Ii(t),sc=t=>ta(t)||typeof t=="string",BU=0,Tf=t=>{var a=++BU;return"".concat(t||"").concat(a)},Yn=function(a,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ta(a)&&typeof a!="string")return s;var i;if(Zu(a)){if(r==null)return s;var o=a.indexOf("%");i=r*parseFloat(a.slice(0,o))/100}else i=+a;return Ii(i)&&(i=s),n&&r!=null&&i>r&&(i=r),i},YE=t=>{if(!Array.isArray(t))return!1;for(var a=t.length,r={},s=0;s<a;s++)if(!r[t[s]])r[t[s]]=!0;else return!0;return!1};function jr(t,a,r){return ta(t)&&ta(a)?t+r*(a-t):a}function GE(t,a,r){if(!(!t||!t.length))return t.find(s=>s&&(typeof a=="function"?a(s):gm(s,a))===r)}var Fr=t=>t===null||typeof t>"u",Xf=t=>Fr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),FU=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function JN(t){if(typeof t!="string")return!1;var a=FU;return a.includes(t)}var qU=["viewBox","children"],SS=["points","pathLength"],Xv={svg:qU,polygon:SS,polyline:SS},ZN=(t,a)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(x.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var s={};return Object.keys(r).forEach(n=>{JN(n)&&(s[n]=i=>r[n](r,i))}),s},UU=(t,a,r)=>s=>(t(a,r,s),null),Jf=(t,a,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var s=null;return Object.keys(t).forEach(n=>{var i=t[n];JN(n)&&typeof i=="function"&&(s||(s={}),s[n]=UU(i,a,r))}),s},WU=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function VE(t){if(typeof t!="string")return!1;var a=WU;return a.includes(t)}function Ao(t){var a=Object.entries(t).filter(r=>{var[s]=r;return VE(s)});return Object.fromEntries(a)}var _S=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",CS=null,Jv=null,KE=t=>{if(t===CS&&Array.isArray(Jv))return Jv;var a=[];return x.Children.forEach(t,r=>{Fr(r)||($U.isFragment(r)?a=a.concat(KE(r.props.children)):a.push(r))}),Jv=a,CS=t,a};function QN(t,a){var r=[],s=[];return Array.isArray(a)?s=a.map(n=>_S(n)):s=[_S(a)],KE(t).forEach(n=>{var i=gm(n,"type.displayName")||gm(n,"type.name");s.indexOf(i)!==-1&&r.push(n)}),r}var Cy=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,HU=(t,a,r,s)=>{var n;if(typeof a=="symbol"||typeof a=="number")return!0;var i=(n=s&&Xv?.[s])!==null&&n!==void 0?n:[],o=a.startsWith("data-"),c=typeof t!="function"&&(!!s&&i.includes(a)||VE(a)),u=!!r&&JN(a);return o||c||u},Or=(t,a,r)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(x.isValidElement(t)&&(s=t.props),typeof s!="object"&&typeof s!="function")return null;var n={};return Object.keys(s).forEach(i=>{var o;HU((o=s)===null||o===void 0?void 0:o[i],i,a,r)&&(n[i]=s[i])}),n},YU=["children","width","height","viewBox","className","style","title","desc"];function jj(){return jj=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},jj.apply(null,arguments)}function GU(t,a){if(t==null)return{};var r,s,n=VU(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function VU(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var e5=x.forwardRef((t,a)=>{var{children:r,width:s,height:n,viewBox:i,className:o,style:c,title:u,desc:m}=t,h=GU(t,YU),p=i||{width:s,height:n,x:0,y:0},y=Qa("recharts-surface",o);return x.createElement("svg",jj({},Or(h,!0,"svg"),{className:y,width:s,height:n,style:c,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:a}),x.createElement("title",null,u),x.createElement("desc",null,m),r)}),KU=["children","className"];function Nj(){return Nj=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Nj.apply(null,arguments)}function XU(t,a){if(t==null)return{};var r,s,n=JU(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function JU(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var ps=x.forwardRef((t,a)=>{var{children:r,className:s}=t,n=XU(t,KU),i=Qa("recharts-layer",s);return x.createElement("g",Nj({className:i},Or(n,!0),{ref:a}),r)}),XE=x.createContext(null),ZU=()=>x.useContext(XE);function Dr(t){return function(){return t}}const JE=Math.cos,gg=Math.sin,Eo=Math.sqrt,yg=Math.PI,ky=2*yg,wj=Math.PI,Sj=2*wj,Hu=1e-6,QU=Sj-Hu;function ZE(t){this._+=t[0];for(let a=1,r=t.length;a<r;++a)this._+=arguments[a]+t[a]}function eW(t){let a=Math.floor(t);if(!(a>=0))throw new Error(`invalid digits: ${t}`);if(a>15)return ZE;const r=10**a;return function(s){this._+=s[0];for(let n=1,i=s.length;n<i;++n)this._+=Math.round(arguments[n]*r)/r+s[n]}}class tW{constructor(a){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=a==null?ZE:eW(a)}moveTo(a,r){this._append`M${this._x0=this._x1=+a},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(a,r){this._append`L${this._x1=+a},${this._y1=+r}`}quadraticCurveTo(a,r,s,n){this._append`Q${+a},${+r},${this._x1=+s},${this._y1=+n}`}bezierCurveTo(a,r,s,n,i,o){this._append`C${+a},${+r},${+s},${+n},${this._x1=+i},${this._y1=+o}`}arcTo(a,r,s,n,i){if(a=+a,r=+r,s=+s,n=+n,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,c=this._y1,u=s-a,m=n-r,h=o-a,p=c-r,y=h*h+p*p;if(this._x1===null)this._append`M${this._x1=a},${this._y1=r}`;else if(y>Hu)if(!(Math.abs(p*u-m*h)>Hu)||!i)this._append`L${this._x1=a},${this._y1=r}`;else{let g=s-o,v=n-c,N=u*u+m*m,w=g*g+v*v,j=Math.sqrt(N),T=Math.sqrt(y),k=i*Math.tan((wj-Math.acos((N+y-w)/(2*j*T)))/2),R=k/T,P=k/j;Math.abs(R-1)>Hu&&this._append`L${a+R*h},${r+R*p}`,this._append`A${i},${i},0,0,${+(p*g>h*v)},${this._x1=a+P*u},${this._y1=r+P*m}`}}arc(a,r,s,n,i,o){if(a=+a,r=+r,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let c=s*Math.cos(n),u=s*Math.sin(n),m=a+c,h=r+u,p=1^o,y=o?n-i:i-n;this._x1===null?this._append`M${m},${h}`:(Math.abs(this._x1-m)>Hu||Math.abs(this._y1-h)>Hu)&&this._append`L${m},${h}`,s&&(y<0&&(y=y%Sj+Sj),y>QU?this._append`A${s},${s},0,1,${p},${a-c},${r-u}A${s},${s},0,1,${p},${this._x1=m},${this._y1=h}`:y>Hu&&this._append`A${s},${s},0,${+(y>=wj)},${p},${this._x1=a+s*Math.cos(i)},${this._y1=r+s*Math.sin(i)}`)}rect(a,r,s,n){this._append`M${this._x0=this._x1=+a},${this._y0=this._y1=+r}h${s=+s}v${+n}h${-s}Z`}toString(){return this._}}function t5(t){let a=3;return t.digits=function(r){if(!arguments.length)return a;if(r==null)a=null;else{const s=Math.floor(r);if(!(s>=0))throw new RangeError(`invalid digits: ${r}`);a=s}return t},()=>new tW(a)}function a5(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function QE(t){this._context=t}QE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,a){switch(t=+t,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break;case 1:this._point=2;default:this._context.lineTo(t,a);break}}};function Ay(t){return new QE(t)}function e9(t){return t[0]}function t9(t){return t[1]}function a9(t,a){var r=Dr(!0),s=null,n=Ay,i=null,o=t5(c);t=typeof t=="function"?t:t===void 0?e9:Dr(t),a=typeof a=="function"?a:a===void 0?t9:Dr(a);function c(u){var m,h=(u=a5(u)).length,p,y=!1,g;for(s==null&&(i=n(g=o())),m=0;m<=h;++m)!(m<h&&r(p=u[m],m,u))===y&&((y=!y)?i.lineStart():i.lineEnd()),y&&i.point(+t(p,m,u),+a(p,m,u));if(g)return i=null,g+""||null}return c.x=function(u){return arguments.length?(t=typeof u=="function"?u:Dr(+u),c):t},c.y=function(u){return arguments.length?(a=typeof u=="function"?u:Dr(+u),c):a},c.defined=function(u){return arguments.length?(r=typeof u=="function"?u:Dr(!!u),c):r},c.curve=function(u){return arguments.length?(n=u,s!=null&&(i=n(s)),c):n},c.context=function(u){return arguments.length?(u==null?s=i=null:i=n(s=u),c):s},c}function v0(t,a,r){var s=null,n=Dr(!0),i=null,o=Ay,c=null,u=t5(m);t=typeof t=="function"?t:t===void 0?e9:Dr(+t),a=typeof a=="function"?a:Dr(a===void 0?0:+a),r=typeof r=="function"?r:r===void 0?t9:Dr(+r);function m(p){var y,g,v,N=(p=a5(p)).length,w,j=!1,T,k=new Array(N),R=new Array(N);for(i==null&&(c=o(T=u())),y=0;y<=N;++y){if(!(y<N&&n(w=p[y],y,p))===j)if(j=!j)g=y,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),v=y-1;v>=g;--v)c.point(k[v],R[v]);c.lineEnd(),c.areaEnd()}j&&(k[y]=+t(w,y,p),R[y]=+a(w,y,p),c.point(s?+s(w,y,p):k[y],r?+r(w,y,p):R[y]))}if(T)return c=null,T+""||null}function h(){return a9().defined(n).curve(o).context(i)}return m.x=function(p){return arguments.length?(t=typeof p=="function"?p:Dr(+p),s=null,m):t},m.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Dr(+p),m):t},m.x1=function(p){return arguments.length?(s=p==null?null:typeof p=="function"?p:Dr(+p),m):s},m.y=function(p){return arguments.length?(a=typeof p=="function"?p:Dr(+p),r=null,m):a},m.y0=function(p){return arguments.length?(a=typeof p=="function"?p:Dr(+p),m):a},m.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Dr(+p),m):r},m.lineX0=m.lineY0=function(){return h().x(t).y(a)},m.lineY1=function(){return h().x(t).y(r)},m.lineX1=function(){return h().x(s).y(a)},m.defined=function(p){return arguments.length?(n=typeof p=="function"?p:Dr(!!p),m):n},m.curve=function(p){return arguments.length?(o=p,i!=null&&(c=o(i)),m):o},m.context=function(p){return arguments.length?(p==null?i=c=null:c=o(i=p),m):i},m}class r9{constructor(a,r){this._context=a,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(a,r){switch(a=+a,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(a,r):this._context.moveTo(a,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+a)/2,this._y0,this._x0,r,a,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,a,this._y0,a,r);break}}this._x0=a,this._y0=r}}function aW(t){return new r9(t,!0)}function rW(t){return new r9(t,!1)}const r5={draw(t,a){const r=Eo(a/yg);t.moveTo(r,0),t.arc(0,0,r,0,ky)}},sW={draw(t,a){const r=Eo(a/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},s9=Eo(1/3),nW=s9*2,iW={draw(t,a){const r=Eo(a/nW),s=r*s9;t.moveTo(0,-r),t.lineTo(s,0),t.lineTo(0,r),t.lineTo(-s,0),t.closePath()}},lW={draw(t,a){const r=Eo(a),s=-r/2;t.rect(s,s,r,r)}},oW=.8908130915292852,n9=gg(yg/10)/gg(7*yg/10),cW=gg(ky/10)*n9,dW=-JE(ky/10)*n9,uW={draw(t,a){const r=Eo(a*oW),s=cW*r,n=dW*r;t.moveTo(0,-r),t.lineTo(s,n);for(let i=1;i<5;++i){const o=ky*i/5,c=JE(o),u=gg(o);t.lineTo(u*r,-c*r),t.lineTo(c*s-u*n,u*s+c*n)}t.closePath()}},Zv=Eo(3),mW={draw(t,a){const r=-Eo(a/(Zv*3));t.moveTo(0,r*2),t.lineTo(-Zv*r,-r),t.lineTo(Zv*r,-r),t.closePath()}},Ml=-.5,Rl=Eo(3)/2,_j=1/Eo(12),hW=(_j/2+1)*3,xW={draw(t,a){const r=Eo(a/hW),s=r/2,n=r*_j,i=s,o=r*_j+r,c=-i,u=o;t.moveTo(s,n),t.lineTo(i,o),t.lineTo(c,u),t.lineTo(Ml*s-Rl*n,Rl*s+Ml*n),t.lineTo(Ml*i-Rl*o,Rl*i+Ml*o),t.lineTo(Ml*c-Rl*u,Rl*c+Ml*u),t.lineTo(Ml*s+Rl*n,Ml*n-Rl*s),t.lineTo(Ml*i+Rl*o,Ml*o-Rl*i),t.lineTo(Ml*c+Rl*u,Ml*u-Rl*c),t.closePath()}};function fW(t,a){let r=null,s=t5(n);t=typeof t=="function"?t:Dr(t||r5),a=typeof a=="function"?a:Dr(a===void 0?64:+a);function n(){let i;if(r||(r=i=s()),t.apply(this,arguments).draw(r,+a.apply(this,arguments)),i)return r=null,i+""||null}return n.type=function(i){return arguments.length?(t=typeof i=="function"?i:Dr(i),n):t},n.size=function(i){return arguments.length?(a=typeof i=="function"?i:Dr(+i),n):a},n.context=function(i){return arguments.length?(r=i??null,n):r},n}function bg(){}function vg(t,a,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+a)/6,(t._y0+4*t._y1+r)/6)}function i9(t){this._context=t}i9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,a){switch(t=+t,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vg(this,t,a);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=a}};function pW(t){return new i9(t)}function l9(t){this._context=t}l9.prototype={areaStart:bg,areaEnd:bg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,a){switch(t=+t,a=+a,this._point){case 0:this._point=1,this._x2=t,this._y2=a;break;case 1:this._point=2,this._x3=t,this._y3=a;break;case 2:this._point=3,this._x4=t,this._y4=a,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+a)/6);break;default:vg(this,t,a);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=a}};function gW(t){return new l9(t)}function o9(t){this._context=t}o9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,a){switch(t=+t,a=+a,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,s=(this._y0+4*this._y1+a)/6;this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break;case 3:this._point=4;default:vg(this,t,a);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=a}};function yW(t){return new o9(t)}function c9(t){this._context=t}c9.prototype={areaStart:bg,areaEnd:bg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,a){t=+t,a=+a,this._point?this._context.lineTo(t,a):(this._point=1,this._context.moveTo(t,a))}};function bW(t){return new c9(t)}function kS(t){return t<0?-1:1}function AS(t,a,r){var s=t._x1-t._x0,n=a-t._x1,i=(t._y1-t._y0)/(s||n<0&&-0),o=(r-t._y1)/(n||s<0&&-0),c=(i*n+o*s)/(s+n);return(kS(i)+kS(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(c))||0}function ES(t,a){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-a)/2:a}function Qv(t,a,r){var s=t._x0,n=t._y0,i=t._x1,o=t._y1,c=(i-s)/3;t._context.bezierCurveTo(s+c,n+c*a,i-c,o-c*r,i,o)}function jg(t){this._context=t}jg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Qv(this,this._t0,ES(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,a){var r=NaN;if(t=+t,a=+a,!(t===this._x1&&a===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break;case 1:this._point=2;break;case 2:this._point=3,Qv(this,ES(this,r=AS(this,t,a)),r);break;default:Qv(this,this._t0,r=AS(this,t,a));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=a,this._t0=r}}};function d9(t){this._context=new u9(t)}(d9.prototype=Object.create(jg.prototype)).point=function(t,a){jg.prototype.point.call(this,a,t)};function u9(t){this._context=t}u9.prototype={moveTo:function(t,a){this._context.moveTo(a,t)},closePath:function(){this._context.closePath()},lineTo:function(t,a){this._context.lineTo(a,t)},bezierCurveTo:function(t,a,r,s,n,i){this._context.bezierCurveTo(a,t,s,r,i,n)}};function vW(t){return new jg(t)}function jW(t){return new d9(t)}function m9(t){this._context=t}m9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,a=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],a[0]):this._context.moveTo(t[0],a[0]),r===2)this._context.lineTo(t[1],a[1]);else for(var s=TS(t),n=TS(a),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(s[0][i],n[0][i],s[1][i],n[1][i],t[o],a[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,a){this._x.push(+t),this._y.push(+a)}};function TS(t){var a,r=t.length-1,s,n=new Array(r),i=new Array(r),o=new Array(r);for(n[0]=0,i[0]=2,o[0]=t[0]+2*t[1],a=1;a<r-1;++a)n[a]=1,i[a]=4,o[a]=4*t[a]+2*t[a+1];for(n[r-1]=2,i[r-1]=7,o[r-1]=8*t[r-1]+t[r],a=1;a<r;++a)s=n[a]/i[a-1],i[a]-=s,o[a]-=s*o[a-1];for(n[r-1]=o[r-1]/i[r-1],a=r-2;a>=0;--a)n[a]=(o[a]-n[a+1])/i[a];for(i[r-1]=(t[r]+n[r-1])/2,a=0;a<r-1;++a)i[a]=2*t[a+1]-n[a+1];return[n,i]}function NW(t){return new m9(t)}function Ey(t,a){this._context=t,this._t=a}Ey.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,a){switch(t=+t,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,a),this._context.lineTo(t,a);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,a)}break}}this._x=t,this._y=a}};function wW(t){return new Ey(t,.5)}function SW(t){return new Ey(t,0)}function _W(t){return new Ey(t,1)}function Lh(t,a){if((o=t.length)>1)for(var r=1,s,n,i=t[a[0]],o,c=i.length;r<o;++r)for(n=i,i=t[a[r]],s=0;s<c;++s)i[s][1]+=i[s][0]=isNaN(n[s][1])?n[s][0]:n[s][1]}function Cj(t){for(var a=t.length,r=new Array(a);--a>=0;)r[a]=a;return r}function CW(t,a){return t[a]}function kW(t){const a=[];return a.key=t,a}function AW(){var t=Dr([]),a=Cj,r=Lh,s=CW;function n(i){var o=Array.from(t.apply(this,arguments),kW),c,u=o.length,m=-1,h;for(const p of i)for(c=0,++m;c<u;++c)(o[c][m]=[0,+s(p,o[c].key,m,i)]).data=p;for(c=0,h=a5(a(o));c<u;++c)o[h[c]].index=c;return r(o,h),o}return n.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Dr(Array.from(i)),n):t},n.value=function(i){return arguments.length?(s=typeof i=="function"?i:Dr(+i),n):s},n.order=function(i){return arguments.length?(a=i==null?Cj:typeof i=="function"?i:Dr(Array.from(i)),n):a},n.offset=function(i){return arguments.length?(r=i??Lh,n):r},n}function EW(t,a){if((s=t.length)>0){for(var r,s,n=0,i=t[0].length,o;n<i;++n){for(o=r=0;r<s;++r)o+=t[r][n][1]||0;if(o)for(r=0;r<s;++r)t[r][n][1]/=o}Lh(t,a)}}function TW(t,a){if((n=t.length)>0){for(var r=0,s=t[a[0]],n,i=s.length;r<i;++r){for(var o=0,c=0;o<n;++o)c+=t[o][r][1]||0;s[r][1]+=s[r][0]=-c/2}Lh(t,a)}}function PW(t,a){if(!(!((o=t.length)>0)||!((i=(n=t[a[0]]).length)>0))){for(var r=0,s=1,n,i,o;s<i;++s){for(var c=0,u=0,m=0;c<o;++c){for(var h=t[a[c]],p=h[s][1]||0,y=h[s-1][1]||0,g=(p-y)/2,v=0;v<c;++v){var N=t[a[v]],w=N[s][1]||0,j=N[s-1][1]||0;g+=w-j}u+=p,m+=g*p}n[s-1][1]+=n[s-1][0]=r,u&&(r-=m/u)}n[s-1][1]+=n[s-1][0]=r,Lh(t,a)}}var DW=["type","size","sizeType"];function kj(){return kj=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},kj.apply(null,arguments)}function PS(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function DS(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?PS(Object(r),!0).forEach(function(s){OW(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PS(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function OW(t,a,r){return(a=LW(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function LW(t){var a=MW(t,"string");return typeof a=="symbol"?a:a+""}function MW(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function RW(t,a){if(t==null)return{};var r,s,n=IW(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function IW(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var h9={symbolCircle:r5,symbolCross:sW,symbolDiamond:iW,symbolSquare:lW,symbolStar:uW,symbolTriangle:mW,symbolWye:xW},zW=Math.PI/180,$W=t=>{var a="symbol".concat(Xf(t));return h9[a]||r5},BW=(t,a,r)=>{if(a==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*zW;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.tan(s)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},FW=(t,a)=>{h9["symbol".concat(Xf(t))]=a},s5=t=>{var{type:a="circle",size:r=64,sizeType:s="area"}=t,n=RW(t,DW),i=DS(DS({},n),{},{type:a,size:r,sizeType:s}),o="circle";typeof a=="string"&&(o=a);var c=()=>{var y=$W(o),g=fW().type(y).size(BW(r,s,o));return g()},{className:u,cx:m,cy:h}=i,p=Or(i,!0);return m===+m&&h===+h&&r===+r?x.createElement("path",kj({},p,{className:Qa("recharts-symbols",u),transform:"translate(".concat(m,", ").concat(h,")"),d:c()})):null};s5.registerSymbol=FW;function Aj(){return Aj=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Aj.apply(null,arguments)}function OS(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function qW(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?OS(Object(r),!0).forEach(function(s){n5(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OS(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function n5(t,a,r){return(a=UW(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function UW(t){var a=WW(t,"string");return typeof a=="symbol"?a:a+""}function WW(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var Il=32;class i5 extends x.PureComponent{renderIcon(a,r){var{inactiveColor:s}=this.props,n=Il/2,i=Il/6,o=Il/3,c=a.inactive?s:a.color,u=r??a.type;if(u==="none")return null;if(u==="plainline")return x.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:n,x2:Il,y2:n,className:"recharts-legend-icon"});if(u==="line")return x.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(n,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(n,`
            H`).concat(Il,"M").concat(2*o,",").concat(n,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(n),className:"recharts-legend-icon"});if(u==="rect")return x.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Il/8,"h").concat(Il,"v").concat(Il*3/4,"h").concat(-Il,"z"),className:"recharts-legend-icon"});if(x.isValidElement(a.legendIcon)){var m=qW({},a);return delete m.legendIcon,x.cloneElement(a.legendIcon,m)}return x.createElement(s5,{fill:c,cx:n,cy:n,size:Il,sizeType:"diameter",type:u})}renderItems(){var{payload:a,iconSize:r,layout:s,formatter:n,inactiveColor:i,iconType:o}=this.props,c={x:0,y:0,width:Il,height:Il},u={display:s==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map((h,p)=>{var y=h.formatter||n,g=Qa({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:h.inactive});if(h.type==="none")return null;var v=h.inactive?i:h.color,N=y?y(h.value,h,p):h.value;return x.createElement("li",Aj({className:g,style:u,key:"legend-item-".concat(p)},Jf(this.props,h,p)),x.createElement(e5,{width:r,height:r,viewBox:c,style:m,"aria-label":"".concat(N," legend icon")},this.renderIcon(h,o)),x.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},N))})}render(){var{payload:a,layout:r,align:s}=this.props;if(!a||!a.length)return null;var n={padding:0,margin:0,textAlign:r==="horizontal"?s:"left"};return x.createElement("ul",{className:"recharts-default-legend",style:n},this.renderItems())}}n5(i5,"displayName","Legend");n5(i5,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var e1={},t1={},LS;function HW(){return LS||(LS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r,s){const n=new Map;for(let i=0;i<r.length;i++){const o=r[i],c=s(o);n.has(c)||n.set(c,o)}return Array.from(n.values())}t.uniqBy=a}(t1)),t1}var a1={},MS;function x9(){return MS||(MS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return r}t.identity=a}(a1)),a1}var r1={},s1={},n1={},RS;function YW(){return RS||(RS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=a}(n1)),n1}var IS;function l5(){return IS||(IS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=YW();function r(s){return s!=null&&typeof s!="function"&&a.isLength(s.length)}t.isArrayLike=r}(s1)),s1}var i1={},zS;function GW(){return zS||(zS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return typeof r=="object"&&r!==null}t.isObjectLike=a}(i1)),i1}var $S;function VW(){return $S||($S=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=l5(),r=GW();function s(n){return r.isObjectLike(n)&&a.isArrayLike(n)}t.isArrayLikeObject=s}(r1)),r1}var l1={},o1={},BS;function KW(){return BS||(BS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=XN();function r(s){return function(n){return a.get(n,s)}}t.property=r}(o1)),o1}var c1={},d1={},u1={},m1={},FS;function f9(){return FS||(FS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=a}(m1)),m1}var h1={},qS;function p9(){return qS||(qS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=a}(h1)),h1}var x1={},US;function g9(){return US||(US=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r,s){return r===s||Number.isNaN(r)&&Number.isNaN(s)}t.eq=a}(x1)),x1}var WS;function XW(){return WS||(WS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=o5(),r=f9(),s=p9(),n=g9();function i(p,y,g){return typeof g!="function"?a.isMatch(p,y):o(p,y,function v(N,w,j,T,k,R){const P=g(N,w,j,T,k,R);return P!==void 0?!!P:o(N,w,v,R)},new Map)}function o(p,y,g,v){if(y===p)return!0;switch(typeof y){case"object":return c(p,y,g,v);case"function":return Object.keys(y).length>0?o(p,{...y},g,v):n.eq(p,y);default:return r.isObject(p)?typeof y=="string"?y==="":!0:n.eq(p,y)}}function c(p,y,g,v){if(y==null)return!0;if(Array.isArray(y))return m(p,y,g,v);if(y instanceof Map)return u(p,y,g,v);if(y instanceof Set)return h(p,y,g,v);const N=Object.keys(y);if(p==null)return N.length===0;if(N.length===0)return!0;if(v&&v.has(y))return v.get(y)===p;v&&v.set(y,p);try{for(let w=0;w<N.length;w++){const j=N[w];if(!s.isPrimitive(p)&&!(j in p)||y[j]===void 0&&p[j]!==void 0||y[j]===null&&p[j]!==null||!g(p[j],y[j],j,p,y,v))return!1}return!0}finally{v&&v.delete(y)}}function u(p,y,g,v){if(y.size===0)return!0;if(!(p instanceof Map))return!1;for(const[N,w]of y.entries()){const j=p.get(N);if(g(j,w,N,p,y,v)===!1)return!1}return!0}function m(p,y,g,v){if(y.length===0)return!0;if(!Array.isArray(p))return!1;const N=new Set;for(let w=0;w<y.length;w++){const j=y[w];let T=!1;for(let k=0;k<p.length;k++){if(N.has(k))continue;const R=p[k];let P=!1;if(g(R,j,w,p,y,v)&&(P=!0),P){N.add(k),T=!0;break}}if(!T)return!1}return!0}function h(p,y,g,v){return y.size===0?!0:p instanceof Set?m([...p],[...y],g,v):!1}t.isMatchWith=i,t.isSetMatch=h}(u1)),u1}var HS;function o5(){return HS||(HS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=XW();function r(s,n){return a.isMatchWith(s,n,()=>{})}t.isMatch=r}(d1)),d1}var f1={},p1={},g1={},YS;function JW(){return YS||(YS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return Object.getOwnPropertySymbols(r).filter(s=>Object.prototype.propertyIsEnumerable.call(r,s))}t.getSymbols=a}(g1)),g1}var y1={},GS;function y9(){return GS||(GS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=a}(y1)),y1}var b1={},VS;function b9(){return VS||(VS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a="[object RegExp]",r="[object String]",s="[object Number]",n="[object Boolean]",i="[object Arguments]",o="[object Symbol]",c="[object Date]",u="[object Map]",m="[object Set]",h="[object Array]",p="[object Function]",y="[object ArrayBuffer]",g="[object Object]",v="[object Error]",N="[object DataView]",w="[object Uint8Array]",j="[object Uint8ClampedArray]",T="[object Uint16Array]",k="[object Uint32Array]",R="[object BigUint64Array]",P="[object Int8Array]",$="[object Int16Array]",A="[object Int32Array]",M="[object BigInt64Array]",_="[object Float32Array]",B="[object Float64Array]";t.argumentsTag=i,t.arrayBufferTag=y,t.arrayTag=h,t.bigInt64ArrayTag=M,t.bigUint64ArrayTag=R,t.booleanTag=n,t.dataViewTag=N,t.dateTag=c,t.errorTag=v,t.float32ArrayTag=_,t.float64ArrayTag=B,t.functionTag=p,t.int16ArrayTag=$,t.int32ArrayTag=A,t.int8ArrayTag=P,t.mapTag=u,t.numberTag=s,t.objectTag=g,t.regexpTag=a,t.setTag=m,t.stringTag=r,t.symbolTag=o,t.uint16ArrayTag=T,t.uint32ArrayTag=k,t.uint8ArrayTag=w,t.uint8ClampedArrayTag=j}(b1)),b1}var v1={},KS;function ZW(){return KS||(KS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=a}(v1)),v1}var XS;function v9(){return XS||(XS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=JW(),r=y9(),s=b9(),n=p9(),i=ZW();function o(h,p){return c(h,void 0,h,new Map,p)}function c(h,p,y,g=new Map,v=void 0){const N=v?.(h,p,y,g);if(N!==void 0)return N;if(n.isPrimitive(h))return h;if(g.has(h))return g.get(h);if(Array.isArray(h)){const w=new Array(h.length);g.set(h,w);for(let j=0;j<h.length;j++)w[j]=c(h[j],j,y,g,v);return Object.hasOwn(h,"index")&&(w.index=h.index),Object.hasOwn(h,"input")&&(w.input=h.input),w}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const w=new RegExp(h.source,h.flags);return w.lastIndex=h.lastIndex,w}if(h instanceof Map){const w=new Map;g.set(h,w);for(const[j,T]of h)w.set(j,c(T,j,y,g,v));return w}if(h instanceof Set){const w=new Set;g.set(h,w);for(const j of h)w.add(c(j,void 0,y,g,v));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(i.isTypedArray(h)){const w=new(Object.getPrototypeOf(h)).constructor(h.length);g.set(h,w);for(let j=0;j<h.length;j++)w[j]=c(h[j],j,y,g,v);return w}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const w=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return g.set(h,w),u(w,h,y,g,v),w}if(typeof File<"u"&&h instanceof File){const w=new File([h],h.name,{type:h.type});return g.set(h,w),u(w,h,y,g,v),w}if(h instanceof Blob){const w=new Blob([h],{type:h.type});return g.set(h,w),u(w,h,y,g,v),w}if(h instanceof Error){const w=new h.constructor;return g.set(h,w),w.message=h.message,w.name=h.name,w.stack=h.stack,w.cause=h.cause,u(w,h,y,g,v),w}if(typeof h=="object"&&m(h)){const w=Object.create(Object.getPrototypeOf(h));return g.set(h,w),u(w,h,y,g,v),w}return h}function u(h,p,y=h,g,v){const N=[...Object.keys(p),...a.getSymbols(p)];for(let w=0;w<N.length;w++){const j=N[w],T=Object.getOwnPropertyDescriptor(h,j);(T==null||T.writable)&&(h[j]=c(p[j],j,y,g,v))}}function m(h){switch(r.getTag(h)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=c,t.copyProperties=u}(p1)),p1}var JS;function QW(){return JS||(JS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=v9();function r(s){return a.cloneDeepWithImpl(s,void 0,s,new Map,void 0)}t.cloneDeep=r}(f1)),f1}var ZS;function eH(){return ZS||(ZS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=o5(),r=QW();function s(n){return n=r.cloneDeep(n),i=>a.isMatch(i,n)}t.matches=s}(c1)),c1}var j1={},N1={},w1={},QS;function tH(){return QS||(QS=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=v9(),r=b9();function s(n,i){return a.cloneDeepWith(n,(o,c,u,m)=>{const h=i?.(o,c,u,m);if(h!==void 0)return h;if(typeof n=="object")switch(Object.prototype.toString.call(n)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new n.constructor(n?.valueOf());return a.copyProperties(p,n),p}case r.argumentsTag:{const p={};return a.copyProperties(p,n),p.length=n.length,p[Symbol.iterator]=n[Symbol.iterator],p}default:return}})}t.cloneDeepWith=s}(w1)),w1}var e_;function aH(){return e_||(e_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=tH();function r(s){return a.cloneDeepWith(s)}t.cloneDeep=r}(N1)),N1}var S1={},_1={},t_;function j9(){return t_||(t_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=/^(?:0|[1-9]\d*)$/;function r(s,n=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<n;case"symbol":return!1;case"string":return a.test(s)}}t.isIndex=r}(_1)),_1}var C1={},a_;function rH(){return a_||(a_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=y9();function r(s){return s!==null&&typeof s=="object"&&a.getTag(s)==="[object Arguments]"}t.isArguments=r}(C1)),C1}var r_;function sH(){return r_||(r_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=WE(),r=j9(),s=rH(),n=KN();function i(o,c){let u;if(Array.isArray(c)?u=c:typeof c=="string"&&a.isDeepKey(c)&&o?.[c]==null?u=n.toPath(c):u=[c],u.length===0)return!1;let m=o;for(let h=0;h<u.length;h++){const p=u[h];if((m==null||!Object.hasOwn(m,p))&&!((Array.isArray(m)||s.isArguments(m))&&r.isIndex(p)&&p<m.length))return!1;m=m[p]}return!0}t.has=i}(S1)),S1}var s_;function nH(){return s_||(s_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=o5(),r=HE(),s=aH(),n=XN(),i=sH();function o(c,u){switch(typeof c){case"object":{Object.is(c?.valueOf(),-0)&&(c="-0");break}case"number":{c=r.toKey(c);break}}return u=s.cloneDeep(u),function(m){const h=n.get(m,c);return h===void 0?i.has(m,c):u===void 0?h===void 0:a.isMatch(h,u)}}t.matchesProperty=o}(j1)),j1}var n_;function iH(){return n_||(n_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=x9(),r=KW(),s=eH(),n=nH();function i(o){if(o==null)return a.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?n.matchesProperty(o[0],o[1]):s.matches(o);case"string":case"symbol":case"number":return r.property(o)}}t.iteratee=i}(l1)),l1}var i_;function lH(){return i_||(i_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=HW(),r=x9(),s=VW(),n=iH();function i(o,c=r.identity){return s.isArrayLikeObject(o)?a.uniqBy(Array.from(o),n.iteratee(c)):[]}t.uniqBy=i}(e1)),e1}var k1,l_;function oH(){return l_||(l_=1,k1=lH().uniqBy),k1}var cH=oH();const o_=oc(cH);function N9(t,a,r){return a===!0?o_(t,r):typeof a=="function"?o_(t,a):t}var A1={exports:{}},E1={},T1={exports:{}},P1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function dH(){if(c_)return P1;c_=1;var t=qh();function a(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var r=typeof Object.is=="function"?Object.is:a,s=t.useState,n=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function c(p,y){var g=y(),v=s({inst:{value:g,getSnapshot:y}}),N=v[0].inst,w=v[1];return i(function(){N.value=g,N.getSnapshot=y,u(N)&&w({inst:N})},[p,g,y]),n(function(){return u(N)&&w({inst:N}),p(function(){u(N)&&w({inst:N})})},[p]),o(g),g}function u(p){var y=p.getSnapshot;p=p.value;try{var g=y();return!r(p,g)}catch{return!0}}function m(p,y){return y()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:c;return P1.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,P1}var d_;function uH(){return d_||(d_=1,T1.exports=dH()),T1.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u_;function mH(){if(u_)return E1;u_=1;var t=qh(),a=uH();function r(m,h){return m===h&&(m!==0||1/m===1/h)||m!==m&&h!==h}var s=typeof Object.is=="function"?Object.is:r,n=a.useSyncExternalStore,i=t.useRef,o=t.useEffect,c=t.useMemo,u=t.useDebugValue;return E1.useSyncExternalStoreWithSelector=function(m,h,p,y,g){var v=i(null);if(v.current===null){var N={hasValue:!1,value:null};v.current=N}else N=v.current;v=c(function(){function j($){if(!T){if(T=!0,k=$,$=y($),g!==void 0&&N.hasValue){var A=N.value;if(g(A,$))return R=A}return R=$}if(A=R,s(k,$))return A;var M=y($);return g!==void 0&&g(A,M)?(k=$,A):(k=$,R=M)}var T=!1,k,R,P=p===void 0?null:p;return[function(){return j(h())},P===null?void 0:function(){return j(P())}]},[h,p,y,g]);var w=n(m,v[0],v[1]);return o(function(){N.hasValue=!0,N.value=w},[w]),u(w),w},E1}var m_;function hH(){return m_||(m_=1,A1.exports=mH()),A1.exports}var xH=hH(),c5=x.createContext(null),fH=t=>t,is=()=>{var t=x.useContext(c5);return t?t.store.dispatch:fH},Q0=()=>{},pH=()=>Q0,gH=(t,a)=>t===a;function Qt(t){var a=x.useContext(c5);return xH.useSyncExternalStoreWithSelector(a?a.subscription.addNestedSub:pH,a?a.store.getState:Q0,a?a.store.getState:Q0,a?t:Q0,gH)}function yH(t,a=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(a)}function bH(t,a=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(a)}function vH(t,a="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${a}[${r}]`)}}var h_=t=>Array.isArray(t)?t:[t];function jH(t){const a=Array.isArray(t[0])?t[0]:t;return vH(a,"createSelector expects all input-selectors to be functions, but received the following types: "),a}function NH(t,a){const r=[],{length:s}=t;for(let n=0;n<s;n++)r.push(t[n].apply(null,a));return r}var wH=class{constructor(t){this.value=t}deref(){return this.value}},SH=typeof WeakRef<"u"?WeakRef:wH,_H=0,x_=1;function j0(){return{s:_H,v:void 0,o:null,p:null}}function w9(t,a={}){let r=j0();const{resultEqualityCheck:s}=a;let n,i=0;function o(){let c=r;const{length:u}=arguments;for(let p=0,y=u;p<y;p++){const g=arguments[p];if(typeof g=="function"||typeof g=="object"&&g!==null){let v=c.o;v===null&&(c.o=v=new WeakMap);const N=v.get(g);N===void 0?(c=j0(),v.set(g,c)):c=N}else{let v=c.p;v===null&&(c.p=v=new Map);const N=v.get(g);N===void 0?(c=j0(),v.set(g,c)):c=N}}const m=c;let h;if(c.s===x_)h=c.v;else if(h=t.apply(null,arguments),i++,s){const p=n?.deref?.()??n;p!=null&&s(p,h)&&(h=p,i!==0&&i--),n=typeof h=="object"&&h!==null||typeof h=="function"?new SH(h):h}return m.s=x_,m.v=h,h}return o.clearCache=()=>{r=j0(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function CH(t,...a){const r=typeof t=="function"?{memoize:t,memoizeOptions:a}:t,s=(...n)=>{let i=0,o=0,c,u={},m=n.pop();typeof m=="object"&&(u=m,m=n.pop()),yH(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const h={...r,...u},{memoize:p,memoizeOptions:y=[],argsMemoize:g=w9,argsMemoizeOptions:v=[]}=h,N=h_(y),w=h_(v),j=jH(n),T=p(function(){return i++,m.apply(null,arguments)},...N),k=g(function(){o++;const P=NH(j,arguments);return c=T.apply(null,P),c},...w);return Object.assign(k,{resultFunc:m,memoizedResultFunc:T,dependencies:j,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>c,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:p,argsMemoize:g})};return Object.assign(s,{withTypes:()=>s}),s}var nt=CH(w9),kH=Object.assign((t,a=nt)=>{bH(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),s=r.map(i=>t[i]);return a(s,(...i)=>i.reduce((o,c,u)=>(o[r[u]]=c,o),{}))},{withTypes:()=>kH}),D1={},O1={},L1={},f_;function AH(){return f_||(f_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(s){return typeof s=="symbol"?1:s===null?2:s===void 0?3:s!==s?4:0}const r=(s,n,i)=>{if(s!==n){const o=a(s),c=a(n);if(o===c&&o===0){if(s<n)return i==="desc"?1:-1;if(s>n)return i==="desc"?-1:1}return i==="desc"?c-o:o-c}return 0};t.compareValues=r}(L1)),L1}var M1={},R1={},p_;function S9(){return p_||(p_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=a}(R1)),R1}var g_;function EH(){return g_||(g_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=S9(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function n(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||a.isSymbol(i)?!0:typeof i=="string"&&(s.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}t.isKey=n}(M1)),M1}var y_;function TH(){return y_||(y_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=AH(),r=EH(),s=KN();function n(i,o,c,u){if(i==null)return[];c=u?void 0:c,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(g=>String(g));const m=(g,v)=>{let N=g;for(let w=0;w<v.length&&N!=null;++w)N=N[v[w]];return N},h=(g,v)=>v==null||g==null?v:typeof g=="object"&&"key"in g?Object.hasOwn(v,g.key)?v[g.key]:m(v,g.path):typeof g=="function"?g(v):Array.isArray(g)?m(v,g):typeof v=="object"?v[g]:v,p=o.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||r.isKey(g)?g:{key:g,path:s.toPath(g)}));return i.map(g=>({original:g,criteria:p.map(v=>h(v,g))})).slice().sort((g,v)=>{for(let N=0;N<p.length;N++){const w=a.compareValues(g.criteria[N],v.criteria[N],c[N]);if(w!==0)return w}return 0}).map(g=>g.original)}t.orderBy=n}(O1)),O1}var I1={},b_;function PH(){return b_||(b_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r,s=1){const n=[],i=Math.floor(s),o=(c,u)=>{for(let m=0;m<c.length;m++){const h=c[m];Array.isArray(h)&&u<i?o(h,u+1):n.push(h)}};return o(r,0),n}t.flatten=a}(I1)),I1}var z1={},v_;function _9(){return v_||(v_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=j9(),r=l5(),s=f9(),n=g9();function i(o,c,u){return s.isObject(u)&&(typeof c=="number"&&r.isArrayLike(u)&&a.isIndex(c)&&c<u.length||typeof c=="string"&&c in u)?n.eq(u[c],o):!1}t.isIterateeCall=i}(z1)),z1}var j_;function DH(){return j_||(j_=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=TH(),r=PH(),s=_9();function n(i,...o){const c=o.length;return c>1&&s.isIterateeCall(i,o[0],o[1])?o=[]:c>2&&s.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),a.orderBy(i,r.flatten(o),["asc"])}t.sortBy=n}(D1)),D1}var $1,N_;function OH(){return N_||(N_=1,$1=DH().sortBy),$1}var LH=OH();const Ty=oc(LH);var C9=t=>t.legend.settings,MH=t=>t.legend.size,RH=t=>t.legend.payload,IH=nt([RH,C9],(t,a)=>{var{itemSorter:r}=a,s=t.flat(1);return r?Ty(s,r):s});function zH(){return Qt(IH)}var N0=1;function k9(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[a,r]=x.useState({height:0,left:0,top:0,width:0}),s=x.useCallback(n=>{if(n!=null){var i=n.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-a.height)>N0||Math.abs(o.left-a.left)>N0||Math.abs(o.top-a.top)>N0||Math.abs(o.width-a.width)>N0)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[a.width,a.height,a.top,a.left,...t]);return[a,s]}function kn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var $H=typeof Symbol=="function"&&Symbol.observable||"@@observable",w_=$H,B1=()=>Math.random().toString(36).substring(7).split("").join("."),BH={INIT:`@@redux/INIT${B1()}`,REPLACE:`@@redux/REPLACE${B1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${B1()}`},Ng=BH;function d5(t){if(typeof t!="object"||t===null)return!1;let a=t;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(t)===a||Object.getPrototypeOf(t)===null}function A9(t,a,r){if(typeof t!="function")throw new Error(kn(2));if(typeof a=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(kn(0));if(typeof a=="function"&&typeof r>"u"&&(r=a,a=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(kn(1));return r(A9)(t,a)}let s=t,n=a,i=new Map,o=i,c=0,u=!1;function m(){o===i&&(o=new Map,i.forEach((w,j)=>{o.set(j,w)}))}function h(){if(u)throw new Error(kn(3));return n}function p(w){if(typeof w!="function")throw new Error(kn(4));if(u)throw new Error(kn(5));let j=!0;m();const T=c++;return o.set(T,w),function(){if(j){if(u)throw new Error(kn(6));j=!1,m(),o.delete(T),i=null}}}function y(w){if(!d5(w))throw new Error(kn(7));if(typeof w.type>"u")throw new Error(kn(8));if(typeof w.type!="string")throw new Error(kn(17));if(u)throw new Error(kn(9));try{u=!0,n=s(n,w)}finally{u=!1}return(i=o).forEach(T=>{T()}),w}function g(w){if(typeof w!="function")throw new Error(kn(10));s=w,y({type:Ng.REPLACE})}function v(){const w=p;return{subscribe(j){if(typeof j!="object"||j===null)throw new Error(kn(11));function T(){const R=j;R.next&&R.next(h())}return T(),{unsubscribe:w(T)}},[w_](){return this}}}return y({type:Ng.INIT}),{dispatch:y,subscribe:p,getState:h,replaceReducer:g,[w_]:v}}function FH(t){Object.keys(t).forEach(a=>{const r=t[a];if(typeof r(void 0,{type:Ng.INIT})>"u")throw new Error(kn(12));if(typeof r(void 0,{type:Ng.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(kn(13))})}function E9(t){const a=Object.keys(t),r={};for(let i=0;i<a.length;i++){const o=a[i];typeof t[o]=="function"&&(r[o]=t[o])}const s=Object.keys(r);let n;try{FH(r)}catch(i){n=i}return function(o={},c){if(n)throw n;let u=!1;const m={};for(let h=0;h<s.length;h++){const p=s[h],y=r[p],g=o[p],v=y(g,c);if(typeof v>"u")throw c&&c.type,new Error(kn(14));m[p]=v,u=u||v!==g}return u=u||s.length!==Object.keys(o).length,u?m:o}}function wg(...t){return t.length===0?a=>a:t.length===1?t[0]:t.reduce((a,r)=>(...s)=>a(r(...s)))}function qH(...t){return a=>(r,s)=>{const n=a(r,s);let i=()=>{throw new Error(kn(15))};const o={getState:n.getState,dispatch:(u,...m)=>i(u,...m)},c=t.map(u=>u(o));return i=wg(...c)(n.dispatch),{...n,dispatch:i}}}function T9(t){return d5(t)&&"type"in t&&typeof t.type=="string"}var P9=Symbol.for("immer-nothing"),S_=Symbol.for("immer-draftable"),il=Symbol.for("immer-state");function vo(t,...a){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Mh=Object.getPrototypeOf;function ym(t){return!!t&&!!t[il]}function ed(t){return t?D9(t)||Array.isArray(t)||!!t[S_]||!!t.constructor?.[S_]||Zf(t)||Dy(t):!1}var UH=Object.prototype.constructor.toString();function D9(t){if(!t||typeof t!="object")return!1;const a=Mh(t);if(a===null)return!0;const r=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===UH}function Sg(t,a){Py(t)===0?Reflect.ownKeys(t).forEach(r=>{a(r,t[r],t)}):t.forEach((r,s)=>a(s,r,t))}function Py(t){const a=t[il];return a?a.type_:Array.isArray(t)?1:Zf(t)?2:Dy(t)?3:0}function Ej(t,a){return Py(t)===2?t.has(a):Object.prototype.hasOwnProperty.call(t,a)}function O9(t,a,r){const s=Py(t);s===2?t.set(a,r):s===3?t.add(r):t[a]=r}function WH(t,a){return t===a?t!==0||1/t===1/a:t!==t&&a!==a}function Zf(t){return t instanceof Map}function Dy(t){return t instanceof Set}function Yu(t){return t.copy_||t.base_}function Tj(t,a){if(Zf(t))return new Map(t);if(Dy(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=D9(t);if(a===!0||a==="class_only"&&!r){const s=Object.getOwnPropertyDescriptors(t);delete s[il];let n=Reflect.ownKeys(s);for(let i=0;i<n.length;i++){const o=n[i],c=s[o];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(s[o]={configurable:!0,writable:!0,enumerable:c.enumerable,value:t[o]})}return Object.create(Mh(t),s)}else{const s=Mh(t);if(s!==null&&r)return{...t};const n=Object.create(s);return Object.assign(n,t)}}function u5(t,a=!1){return Oy(t)||ym(t)||!ed(t)||(Py(t)>1&&Object.defineProperties(t,{set:{value:w0},add:{value:w0},clear:{value:w0},delete:{value:w0}}),Object.freeze(t),a&&Object.values(t).forEach(r=>u5(r,!0))),t}function w0(){vo(2)}function Oy(t){return Object.isFrozen(t)}var HH={};function bm(t){const a=HH[t];return a||vo(0,t),a}var Pf;function L9(){return Pf}function YH(t,a){return{drafts_:[],parent_:t,immer_:a,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function __(t,a){a&&(bm("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=a)}function Pj(t){Dj(t),t.drafts_.forEach(GH),t.drafts_=null}function Dj(t){t===Pf&&(Pf=t.parent_)}function C_(t){return Pf=YH(Pf,t)}function GH(t){const a=t[il];a.type_===0||a.type_===1?a.revoke_():a.revoked_=!0}function k_(t,a){a.unfinalizedDrafts_=a.drafts_.length;const r=a.drafts_[0];return t!==void 0&&t!==r?(r[il].modified_&&(Pj(a),vo(4)),ed(t)&&(t=_g(a,t),a.parent_||Cg(a,t)),a.patches_&&bm("Patches").generateReplacementPatches_(r[il].base_,t,a.patches_,a.inversePatches_)):t=_g(a,r,[]),Pj(a),a.patches_&&a.patchListener_(a.patches_,a.inversePatches_),t!==P9?t:void 0}function _g(t,a,r){if(Oy(a))return a;const s=a[il];if(!s)return Sg(a,(n,i)=>A_(t,s,a,n,i,r)),a;if(s.scope_!==t)return a;if(!s.modified_)return Cg(t,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const n=s.copy_;let i=n,o=!1;s.type_===3&&(i=new Set(n),n.clear(),o=!0),Sg(i,(c,u)=>A_(t,s,n,c,u,r,o)),Cg(t,n,!1),r&&t.patches_&&bm("Patches").generatePatches_(s,r,t.patches_,t.inversePatches_)}return s.copy_}function A_(t,a,r,s,n,i,o){if(ym(n)){const c=i&&a&&a.type_!==3&&!Ej(a.assigned_,s)?i.concat(s):void 0,u=_g(t,n,c);if(O9(r,s,u),ym(u))t.canAutoFreeze_=!1;else return}else o&&r.add(n);if(ed(n)&&!Oy(n)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;_g(t,n),(!a||!a.scope_.parent_)&&typeof s!="symbol"&&(Zf(r)?r.has(s):Object.prototype.propertyIsEnumerable.call(r,s))&&Cg(t,n)}}function Cg(t,a,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&u5(a,r)}function VH(t,a){const r=Array.isArray(t),s={type_:r?1:0,scope_:a?a.scope_:L9(),modified_:!1,finalized_:!1,assigned_:{},parent_:a,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=s,i=m5;r&&(n=[s],i=Df);const{revoke:o,proxy:c}=Proxy.revocable(n,i);return s.draft_=c,s.revoke_=o,c}var m5={get(t,a){if(a===il)return t;const r=Yu(t);if(!Ej(r,a))return KH(t,r,a);const s=r[a];return t.finalized_||!ed(s)?s:s===F1(t.base_,a)?(q1(t),t.copy_[a]=Lj(s,t)):s},has(t,a){return a in Yu(t)},ownKeys(t){return Reflect.ownKeys(Yu(t))},set(t,a,r){const s=M9(Yu(t),a);if(s?.set)return s.set.call(t.draft_,r),!0;if(!t.modified_){const n=F1(Yu(t),a),i=n?.[il];if(i&&i.base_===r)return t.copy_[a]=r,t.assigned_[a]=!1,!0;if(WH(r,n)&&(r!==void 0||Ej(t.base_,a)))return!0;q1(t),Oj(t)}return t.copy_[a]===r&&(r!==void 0||a in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[a])||(t.copy_[a]=r,t.assigned_[a]=!0),!0},deleteProperty(t,a){return F1(t.base_,a)!==void 0||a in t.base_?(t.assigned_[a]=!1,q1(t),Oj(t)):delete t.assigned_[a],t.copy_&&delete t.copy_[a],!0},getOwnPropertyDescriptor(t,a){const r=Yu(t),s=Reflect.getOwnPropertyDescriptor(r,a);return s&&{writable:!0,configurable:t.type_!==1||a!=="length",enumerable:s.enumerable,value:r[a]}},defineProperty(){vo(11)},getPrototypeOf(t){return Mh(t.base_)},setPrototypeOf(){vo(12)}},Df={};Sg(m5,(t,a)=>{Df[t]=function(){return arguments[0]=arguments[0][0],a.apply(this,arguments)}});Df.deleteProperty=function(t,a){return Df.set.call(this,t,a,void 0)};Df.set=function(t,a,r){return m5.set.call(this,t[0],a,r,t[0])};function F1(t,a){const r=t[il];return(r?Yu(r):t)[a]}function KH(t,a,r){const s=M9(a,r);return s?"value"in s?s.value:s.get?.call(t.draft_):void 0}function M9(t,a){if(!(a in t))return;let r=Mh(t);for(;r;){const s=Object.getOwnPropertyDescriptor(r,a);if(s)return s;r=Mh(r)}}function Oj(t){t.modified_||(t.modified_=!0,t.parent_&&Oj(t.parent_))}function q1(t){t.copy_||(t.copy_=Tj(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var XH=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(a,r,s)=>{if(typeof a=="function"&&typeof r!="function"){const i=r;r=a;const o=this;return function(u=i,...m){return o.produce(u,h=>r.call(this,h,...m))}}typeof r!="function"&&vo(6),s!==void 0&&typeof s!="function"&&vo(7);let n;if(ed(a)){const i=C_(this),o=Lj(a,void 0);let c=!0;try{n=r(o),c=!1}finally{c?Pj(i):Dj(i)}return __(i,s),k_(n,i)}else if(!a||typeof a!="object"){if(n=r(a),n===void 0&&(n=a),n===P9&&(n=void 0),this.autoFreeze_&&u5(n,!0),s){const i=[],o=[];bm("Patches").generateReplacementPatches_(a,n,i,o),s(i,o)}return n}else vo(1,a)},this.produceWithPatches=(a,r)=>{if(typeof a=="function")return(o,...c)=>this.produceWithPatches(o,u=>a(u,...c));let s,n;return[this.produce(a,r,(o,c)=>{s=o,n=c}),s,n]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ed(t)||vo(8),ym(t)&&(t=Yc(t));const a=C_(this),r=Lj(t,void 0);return r[il].isManual_=!0,Dj(a),r}finishDraft(t,a){const r=t&&t[il];(!r||!r.isManual_)&&vo(9);const{scope_:s}=r;return __(s,a),k_(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,a){let r;for(r=a.length-1;r>=0;r--){const n=a[r];if(n.path.length===0&&n.op==="replace"){t=n.value;break}}r>-1&&(a=a.slice(r+1));const s=bm("Patches").applyPatches_;return ym(t)?s(t,a):this.produce(t,n=>s(n,a))}};function Lj(t,a){const r=Zf(t)?bm("MapSet").proxyMap_(t,a):Dy(t)?bm("MapSet").proxySet_(t,a):VH(t,a);return(a?a.scope_:L9()).drafts_.push(r),r}function Yc(t){return ym(t)||vo(10,t),R9(t)}function R9(t){if(!ed(t)||Oy(t))return t;const a=t[il];let r;if(a){if(!a.modified_)return a.base_;a.finalized_=!0,r=Tj(t,a.scope_.immer_.useStrictShallowCopy_)}else r=Tj(t,!0);return Sg(r,(s,n)=>{O9(r,s,R9(n))}),a&&(a.finalized_=!1),r}var JH=new XH,I9=JH.produce;function z9(t){return({dispatch:r,getState:s})=>n=>i=>typeof i=="function"?i(r,s,t):n(i)}var ZH=z9(),QH=z9,eY=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?wg:wg.apply(null,arguments)};function Hl(t,a){function r(...s){if(a){let n=a(...s);if(!n)throw new Error(nl(0));return{type:t,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:t,payload:s[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=s=>T9(s)&&s.type===t,r}var $9=class mf extends Array{constructor(...a){super(...a),Object.setPrototypeOf(this,mf.prototype)}static get[Symbol.species](){return mf}concat(...a){return super.concat.apply(this,a)}prepend(...a){return a.length===1&&Array.isArray(a[0])?new mf(...a[0].concat(this)):new mf(...a.concat(this))}};function E_(t){return ed(t)?I9(t,()=>{}):t}function S0(t,a,r){return t.has(a)?t.get(a):t.set(a,r(a)).get(a)}function tY(t){return typeof t=="boolean"}var aY=()=>function(a){const{thunk:r=!0,immutableCheck:s=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=a??{};let o=new $9;return r&&(tY(r)?o.push(ZH):o.push(QH(r.extraArgument))),o},rY="RTK_autoBatch",T_=t=>a=>{setTimeout(a,t)},sY=(t={type:"raf"})=>a=>(...r)=>{const s=a(...r);let n=!0,i=!1,o=!1;const c=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:T_(10):t.type==="callback"?t.queueNotification:T_(t.timeout),m=()=>{o=!1,i&&(i=!1,c.forEach(h=>h()))};return Object.assign({},s,{subscribe(h){const p=()=>n&&h(),y=s.subscribe(p);return c.add(h),()=>{y(),c.delete(h)}},dispatch(h){try{return n=!h?.meta?.[rY],i=!n,i&&(o||(o=!0,u(m))),s.dispatch(h)}finally{n=!0}}})},nY=t=>function(r){const{autoBatch:s=!0}=r??{};let n=new $9(t);return s&&n.push(sY(typeof s=="object"?s:void 0)),n};function iY(t){const a=aY(),{reducer:r=void 0,middleware:s,devTools:n=!0,preloadedState:i=void 0,enhancers:o=void 0}=t||{};let c;if(typeof r=="function")c=r;else if(d5(r))c=E9(r);else throw new Error(nl(1));let u;typeof s=="function"?u=s(a):u=a();let m=wg;n&&(m=eY({trace:!1,...typeof n=="object"&&n}));const h=qH(...u),p=nY(h);let y=typeof o=="function"?o(p):p();const g=m(...y);return A9(c,i,g)}function B9(t){const a={},r=[];let s;const n={addCase(i,o){const c=typeof i=="string"?i:i.type;if(!c)throw new Error(nl(28));if(c in a)throw new Error(nl(29));return a[c]=o,n},addAsyncThunk(i,o){return o.pending&&(a[i.pending.type]=o.pending),o.rejected&&(a[i.rejected.type]=o.rejected),o.fulfilled&&(a[i.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:i.settled,reducer:o.settled}),n},addMatcher(i,o){return r.push({matcher:i,reducer:o}),n},addDefaultCase(i){return s=i,n}};return t(n),[a,r,s]}function lY(t){return typeof t=="function"}function oY(t,a){let[r,s,n]=B9(a),i;if(lY(t))i=()=>E_(t());else{const c=E_(t);i=()=>c}function o(c=i(),u){let m=[r[u.type],...s.filter(({matcher:h})=>h(u)).map(({reducer:h})=>h)];return m.filter(h=>!!h).length===0&&(m=[n]),m.reduce((h,p)=>{if(p)if(ym(h)){const g=p(h,u);return g===void 0?h:g}else{if(ed(h))return I9(h,y=>p(y,u));{const y=p(h,u);if(y===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return h},c)}return o.getInitialState=i,o}var cY="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",dY=(t=21)=>{let a="",r=t;for(;r--;)a+=cY[Math.random()*64|0];return a},uY=Symbol.for("rtk-slice-createasyncthunk");function mY(t,a){return`${t}/${a}`}function hY({creators:t}={}){const a=t?.asyncThunk?.[uY];return function(s){const{name:n,reducerPath:i=n}=s;if(!n)throw new Error(nl(11));const o=(typeof s.reducers=="function"?s.reducers(fY()):s.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(k,R){const P=typeof k=="string"?k:k.type;if(!P)throw new Error(nl(12));if(P in u.sliceCaseReducersByType)throw new Error(nl(13));return u.sliceCaseReducersByType[P]=R,m},addMatcher(k,R){return u.sliceMatchers.push({matcher:k,reducer:R}),m},exposeAction(k,R){return u.actionCreators[k]=R,m},exposeCaseReducer(k,R){return u.sliceCaseReducersByName[k]=R,m}};c.forEach(k=>{const R=o[k],P={reducerName:k,type:mY(n,k),createNotation:typeof s.reducers=="function"};gY(R)?bY(P,R,m,a):pY(P,R,m)});function h(){const[k={},R=[],P=void 0]=typeof s.extraReducers=="function"?B9(s.extraReducers):[s.extraReducers],$={...k,...u.sliceCaseReducersByType};return oY(s.initialState,A=>{for(let M in $)A.addCase(M,$[M]);for(let M of u.sliceMatchers)A.addMatcher(M.matcher,M.reducer);for(let M of R)A.addMatcher(M.matcher,M.reducer);P&&A.addDefaultCase(P)})}const p=k=>k,y=new Map,g=new WeakMap;let v;function N(k,R){return v||(v=h()),v(k,R)}function w(){return v||(v=h()),v.getInitialState()}function j(k,R=!1){function P(A){let M=A[k];return typeof M>"u"&&R&&(M=S0(g,P,w)),M}function $(A=p){const M=S0(y,R,()=>new WeakMap);return S0(M,A,()=>{const _={};for(const[B,D]of Object.entries(s.selectors??{}))_[B]=xY(D,A,()=>S0(g,A,w),R);return _})}return{reducerPath:k,getSelectors:$,get selectors(){return $(P)},selectSlice:P}}const T={name:n,reducer:N,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:w,...j(i),injectInto(k,{reducerPath:R,...P}={}){const $=R??i;return k.inject({reducerPath:$,reducer:N},P),{...T,...j($,!0)}}};return T}}function xY(t,a,r,s){function n(i,...o){let c=a(i);return typeof c>"u"&&s&&(c=r()),t(c,...o)}return n.unwrapped=t,n}var ol=hY();function fY(){function t(a,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:a,...r}}return t.withTypes=()=>t,{reducer(a){return Object.assign({[a.name](...r){return a(...r)}}[a.name],{_reducerDefinitionType:"reducer"})},preparedReducer(a,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:a,reducer:r}},asyncThunk:t}}function pY({type:t,reducerName:a,createNotation:r},s,n){let i,o;if("reducer"in s){if(r&&!yY(s))throw new Error(nl(17));i=s.reducer,o=s.prepare}else i=s;n.addCase(t,i).exposeCaseReducer(a,i).exposeAction(a,o?Hl(t,o):Hl(t))}function gY(t){return t._reducerDefinitionType==="asyncThunk"}function yY(t){return t._reducerDefinitionType==="reducerWithPrepare"}function bY({type:t,reducerName:a},r,s,n){if(!n)throw new Error(nl(18));const{payloadCreator:i,fulfilled:o,pending:c,rejected:u,settled:m,options:h}=r,p=n(t,i,h);s.exposeAction(a,p),o&&s.addCase(p.fulfilled,o),c&&s.addCase(p.pending,c),u&&s.addCase(p.rejected,u),m&&s.addMatcher(p.settled,m),s.exposeCaseReducer(a,{fulfilled:o||_0,pending:c||_0,rejected:u||_0,settled:m||_0})}function _0(){}var vY="task",F9="listener",q9="completed",h5="cancelled",jY=`task-${h5}`,NY=`task-${q9}`,Mj=`${F9}-${h5}`,wY=`${F9}-${q9}`,Ly=class{constructor(t){this.code=t,this.message=`${vY} ${h5} (reason: ${t})`}name="TaskAbortError";message},x5=(t,a)=>{if(typeof t!="function")throw new TypeError(nl(32))},kg=()=>{},U9=(t,a=kg)=>(t.catch(a),t),W9=(t,a)=>(t.addEventListener("abort",a,{once:!0}),()=>t.removeEventListener("abort",a)),nm=(t,a)=>{const r=t.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:a,configurable:!0,writable:!0}),t.abort(a))},im=t=>{if(t.aborted){const{reason:a}=t;throw new Ly(a)}};function H9(t,a){let r=kg;return new Promise((s,n)=>{const i=()=>n(new Ly(t.reason));if(t.aborted){i();return}r=W9(t,i),a.finally(()=>r()).then(s,n)}).finally(()=>{r=kg})}var SY=async(t,a)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof Ly?"cancelled":"rejected",error:r}}finally{a?.()}},Ag=t=>a=>U9(H9(t,a).then(r=>(im(t),r))),Y9=t=>{const a=Ag(t);return r=>a(new Promise(s=>setTimeout(s,r)))},{assign:Nh}=Object,P_={},My="listenerMiddleware",_Y=(t,a)=>{const r=s=>W9(t,()=>nm(s,t.reason));return(s,n)=>{x5(s);const i=new AbortController;r(i);const o=SY(async()=>{im(t),im(i.signal);const c=await s({pause:Ag(i.signal),delay:Y9(i.signal),signal:i.signal});return im(i.signal),c},()=>nm(i,NY));return n?.autoJoin&&a.push(o.catch(kg)),{result:Ag(t)(o),cancel(){nm(i,jY)}}}},CY=(t,a)=>{const r=async(s,n)=>{im(a);let i=()=>{};const c=[new Promise((u,m)=>{let h=t({predicate:s,effect:(p,y)=>{y.unsubscribe(),u([p,y.getState(),y.getOriginalState()])}});i=()=>{h(),m()}})];n!=null&&c.push(new Promise(u=>setTimeout(u,n,null)));try{const u=await H9(a,Promise.race(c));return im(a),u}finally{i()}};return(s,n)=>U9(r(s,n))},G9=t=>{let{type:a,actionCreator:r,matcher:s,predicate:n,effect:i}=t;if(a)n=Hl(a).match;else if(r)a=r.type,n=r.match;else if(s)n=s;else if(!n)throw new Error(nl(21));return x5(i),{predicate:n,type:a,effect:i}},V9=Nh(t=>{const{type:a,predicate:r,effect:s}=G9(t);return{id:dY(),effect:s,type:a,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(nl(22))}}},{withTypes:()=>V9}),D_=(t,a)=>{const{type:r,effect:s,predicate:n}=G9(a);return Array.from(t.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===n)&&i.effect===s)},Rj=t=>{t.pending.forEach(a=>{nm(a,Mj)})},kY=t=>()=>{t.forEach(Rj),t.clear()},O_=(t,a,r)=>{try{t(a,r)}catch(s){setTimeout(()=>{throw s},0)}},K9=Nh(Hl(`${My}/add`),{withTypes:()=>K9}),AY=Hl(`${My}/removeAll`),X9=Nh(Hl(`${My}/remove`),{withTypes:()=>X9}),EY=(...t)=>{console.error(`${My}/error`,...t)},Qf=(t={})=>{const a=new Map,{extra:r,onError:s=EY}=t;x5(s);const n=h=>(h.unsubscribe=()=>a.delete(h.id),a.set(h.id,h),p=>{h.unsubscribe(),p?.cancelActive&&Rj(h)}),i=h=>{const p=D_(a,h)??V9(h);return n(p)};Nh(i,{withTypes:()=>i});const o=h=>{const p=D_(a,h);return p&&(p.unsubscribe(),h.cancelActive&&Rj(p)),!!p};Nh(o,{withTypes:()=>o});const c=async(h,p,y,g)=>{const v=new AbortController,N=CY(i,v.signal),w=[];try{h.pending.add(v),await Promise.resolve(h.effect(p,Nh({},y,{getOriginalState:g,condition:(j,T)=>N(j,T).then(Boolean),take:N,delay:Y9(v.signal),pause:Ag(v.signal),extra:r,signal:v.signal,fork:_Y(v.signal,w),unsubscribe:h.unsubscribe,subscribe:()=>{a.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((j,T,k)=>{j!==v&&(nm(j,Mj),k.delete(j))})},cancel:()=>{nm(v,Mj),h.pending.delete(v)},throwIfCancelled:()=>{im(v.signal)}})))}catch(j){j instanceof Ly||O_(s,j,{raisedBy:"effect"})}finally{await Promise.all(w),nm(v,wY),h.pending.delete(v)}},u=kY(a);return{middleware:h=>p=>y=>{if(!T9(y))return p(y);if(K9.match(y))return i(y.payload);if(AY.match(y)){u();return}if(X9.match(y))return o(y.payload);let g=h.getState();const v=()=>{if(g===P_)throw new Error(nl(23));return g};let N;try{if(N=p(y),a.size>0){const w=h.getState(),j=Array.from(a.values());for(const T of j){let k=!1;try{k=T.predicate(y,w,g)}catch(R){k=!1,O_(s,R,{raisedBy:"predicate"})}k&&c(T,y,h,v)}}}finally{g=P_}return N},startListening:i,stopListening:o,clearListeners:u}};function nl(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var TY={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},J9=ol({name:"chartLayout",initialState:TY,reducers:{setLayout(t,a){t.layoutType=a.payload},setChartSize(t,a){t.width=a.payload.width,t.height=a.payload.height},setMargin(t,a){var r,s,n,i;t.margin.top=(r=a.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(s=a.payload.right)!==null&&s!==void 0?s:0,t.margin.bottom=(n=a.payload.bottom)!==null&&n!==void 0?n:0,t.margin.left=(i=a.payload.left)!==null&&i!==void 0?i:0},setScale(t,a){t.scale=a.payload}}}),{setMargin:PY,setLayout:DY,setChartSize:OY,setScale:LY}=J9.actions,MY=J9.reducer;function L_(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function M_(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?L_(Object(r),!0).forEach(function(s){RY(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L_(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function RY(t,a,r){return(a=IY(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function IY(t){var a=zY(t,"string");return typeof a=="symbol"?a:a+""}function zY(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var Eg=Math.PI/180,$Y=t=>t*180/Math.PI,Fs=(t,a,r,s)=>({x:t+Math.cos(-Eg*s)*r,y:a+Math.sin(-Eg*s)*r}),Z9=function(a,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(a-(s.left||0)-(s.right||0)),Math.abs(r-(s.top||0)-(s.bottom||0)))/2},BY=(t,a)=>{var{x:r,y:s}=t,{x:n,y:i}=a;return Math.sqrt((r-n)**2+(s-i)**2)},FY=(t,a)=>{var{x:r,y:s}=t,{cx:n,cy:i}=a,o=BY({x:r,y:s},{x:n,y:i});if(o<=0)return{radius:o,angle:0};var c=(r-n)/o,u=Math.acos(c);return s>i&&(u=2*Math.PI-u),{radius:o,angle:$Y(u),angleInRadian:u}},qY=t=>{var{startAngle:a,endAngle:r}=t,s=Math.floor(a/360),n=Math.floor(r/360),i=Math.min(s,n);return{startAngle:a-i*360,endAngle:r-i*360}},UY=(t,a)=>{var{startAngle:r,endAngle:s}=a,n=Math.floor(r/360),i=Math.floor(s/360),o=Math.min(n,i);return t+o*360},WY=(t,a)=>{var{x:r,y:s}=t,{radius:n,angle:i}=FY({x:r,y:s},a),{innerRadius:o,outerRadius:c}=a;if(n<o||n>c||n===0)return null;var{startAngle:u,endAngle:m}=qY(a),h=i,p;if(u<=m){for(;h>m;)h-=360;for(;h<u;)h+=360;p=h>=u&&h<=m}else{for(;h>u;)h-=360;for(;h<m;)h+=360;p=h>=m&&h<=u}return p?M_(M_({},a),{},{radius:n,angle:UY(h,a)}):null};function Q9(t,a,r){return Array.isArray(t)&&t&&a+r!==0?t.slice(a,r+1):t}function R_(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function $l(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?R_(Object(r),!0).forEach(function(s){HY(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R_(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function HY(t,a,r){return(a=YY(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function YY(t){var a=GY(t,"string");return typeof a=="symbol"?a:a+""}function GY(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function pr(t,a,r){return Fr(t)||Fr(a)?r:sc(a)?gm(t,a,r):typeof a=="function"?a(t):r}var VY=(t,a,r,s,n)=>{var i,o=-1,c=(i=a?.length)!==null&&i!==void 0?i:0;if(c<=1||t==null)return 0;if(s==="angleAxis"&&n!=null&&Math.abs(Math.abs(n[1]-n[0])-360)<=1e-6)for(var u=0;u<c;u++){var m=u>0?r[u-1].coordinate:r[c-1].coordinate,h=r[u].coordinate,p=u>=c-1?r[0].coordinate:r[u+1].coordinate,y=void 0;if(un(h-m)!==un(p-h)){var g=[];if(un(p-h)===un(n[1]-n[0])){y=p;var v=h+n[1]-n[0];g[0]=Math.min(v,(v+m)/2),g[1]=Math.max(v,(v+m)/2)}else{y=m;var N=p+n[1]-n[0];g[0]=Math.min(h,(N+h)/2),g[1]=Math.max(h,(N+h)/2)}var w=[Math.min(h,(y+h)/2),Math.max(h,(y+h)/2)];if(t>w[0]&&t<=w[1]||t>=g[0]&&t<=g[1]){({index:o}=r[u]);break}}else{var j=Math.min(m,p),T=Math.max(m,p);if(t>(j+h)/2&&t<=(T+h)/2){({index:o}=r[u]);break}}}else if(a){for(var k=0;k<c;k++)if(k===0&&t<=(a[k].coordinate+a[k+1].coordinate)/2||k>0&&k<c-1&&t>(a[k].coordinate+a[k-1].coordinate)/2&&t<=(a[k].coordinate+a[k+1].coordinate)/2||k===c-1&&t>(a[k].coordinate+a[k-1].coordinate)/2){({index:o}=a[k]);break}}return o},KY=(t,a,r)=>{if(a&&r){var{width:s,height:n}=r,{align:i,verticalAlign:o,layout:c}=a;if((c==="vertical"||c==="horizontal"&&o==="middle")&&i!=="center"&&ta(t[i]))return $l($l({},t),{},{[i]:t[i]+(s||0)});if((c==="horizontal"||c==="vertical"&&i==="center")&&o!=="middle"&&ta(t[o]))return $l($l({},t),{},{[o]:t[o]+(n||0)})}return t},dc=(t,a)=>t==="horizontal"&&a==="xAxis"||t==="vertical"&&a==="yAxis"||t==="centric"&&a==="angleAxis"||t==="radial"&&a==="radiusAxis",eT=(t,a,r,s)=>{if(s)return t.map(c=>c.coordinate);var n,i,o=t.map(c=>(c.coordinate===a&&(n=!0),c.coordinate===r&&(i=!0),c.coordinate));return n||o.push(a),i||o.push(r),o},tT=(t,a,r)=>{if(!t)return null;var{duplicateDomain:s,type:n,range:i,scale:o,realScaleType:c,isCategorical:u,categoricalDomain:m,tickCount:h,ticks:p,niceTicks:y,axisType:g}=t;if(!o)return null;var v=c==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,N=n==="category"&&o.bandwidth?o.bandwidth()/v:0;if(N=g==="angleAxis"&&i&&i.length>=2?un(i[0]-i[1])*2*N:N,p||y){var w=(p||y||[]).map((j,T)=>{var k=s?s.indexOf(j):j;return{coordinate:o(k)+N,value:j,offset:N,index:T}});return w.filter(j=>!Ii(j.coordinate))}return u&&m?m.map((j,T)=>({coordinate:o(j)+N,value:j,index:T,offset:N})):o.ticks&&h!=null?o.ticks(h).map((j,T)=>({coordinate:o(j)+N,value:j,offset:N,index:T})):o.domain().map((j,T)=>({coordinate:o(j)+N,value:s?s[j]:j,index:T,offset:N}))},I_=1e-4,XY=t=>{var a=t.domain();if(!(!a||a.length<=2)){var r=a.length,s=t.range(),n=Math.min(s[0],s[1])-I_,i=Math.max(s[0],s[1])+I_,o=t(a[0]),c=t(a[r-1]);(o<n||o>i||c<n||c>i)&&t.domain([a[0],a[r-1]])}},JY=(t,a)=>{if(!a||a.length!==2||!ta(a[0])||!ta(a[1]))return t;var r=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]),n=[t[0],t[1]];return(!ta(t[0])||t[0]<r)&&(n[0]=r),(!ta(t[1])||t[1]>s)&&(n[1]=s),n[0]>s&&(n[0]=s),n[1]<r&&(n[1]=r),n},ZY=t=>{var a=t.length;if(!(a<=0))for(var r=0,s=t[0].length;r<s;++r)for(var n=0,i=0,o=0;o<a;++o){var c=Ii(t[o][r][1])?t[o][r][0]:t[o][r][1];c>=0?(t[o][r][0]=n,t[o][r][1]=n+c,n=t[o][r][1]):(t[o][r][0]=i,t[o][r][1]=i+c,i=t[o][r][1])}},QY=t=>{var a=t.length;if(!(a<=0))for(var r=0,s=t[0].length;r<s;++r)for(var n=0,i=0;i<a;++i){var o=Ii(t[i][r][1])?t[i][r][0]:t[i][r][1];o>=0?(t[i][r][0]=n,t[i][r][1]=n+o,n=t[i][r][1]):(t[i][r][0]=0,t[i][r][1]=0)}},eG={sign:ZY,expand:EW,none:Lh,silhouette:TW,wiggle:PW,positive:QY},tG=(t,a,r)=>{var s=eG[r],n=AW().keys(a).value((i,o)=>+pr(i,o,0)).order(Cj).offset(s);return n(t)};function aT(t){return t==null?void 0:String(t)}function Tg(t){var{axis:a,ticks:r,bandSize:s,entry:n,index:i,dataKey:o}=t;if(a.type==="category"){if(!a.allowDuplicatedCategory&&a.dataKey&&!Fr(n[a.dataKey])){var c=GE(r,"value",n[a.dataKey]);if(c)return c.coordinate+s/2}return r[i]?r[i].coordinate+s/2:null}var u=pr(n,Fr(o)?a.dataKey:o);return Fr(u)?null:a.scale(u)}var z_=t=>{var{axis:a,ticks:r,offset:s,bandSize:n,entry:i,index:o}=t;if(a.type==="category")return r[o]?r[o].coordinate+s:null;var c=pr(i,a.dataKey,a.scale.domain()[o]);return Fr(c)?null:a.scale(c)-n/2+s},aG=t=>{var{numericAxis:a}=t,r=a.scale.domain();if(a.type==="number"){var s=Math.min(r[0],r[1]),n=Math.max(r[0],r[1]);return s<=0&&n>=0?0:n<0?n:s}return r[0]},rG=t=>{var a=t.flat(2).filter(ta);return[Math.min(...a),Math.max(...a)]},sG=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],nG=(t,a,r)=>{if(t!=null)return sG(Object.keys(t).reduce((s,n)=>{var i=t[n],{stackedData:o}=i,c=o.reduce((u,m)=>{var h=Q9(m,a,r),p=rG(h);return[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]))},$_=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,B_=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,vm=(t,a,r)=>{if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!r||s>0)return s}if(t&&a&&a.length>=2){for(var n=Ty(a,h=>h.coordinate),i=1/0,o=1,c=n.length;o<c;o++){var u=n[o],m=n[o-1];i=Math.min((u.coordinate||0)-(m.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function F_(t){var{tooltipEntrySettings:a,dataKey:r,payload:s,value:n,name:i}=t;return $l($l({},a),{},{dataKey:r,payload:s,value:n,name:i})}function mu(t,a){if(t)return String(t);if(typeof a=="string")return a}function iG(t,a,r,s,n){if(r==="horizontal"||r==="vertical"){var i=t>=n.left&&t<=n.left+n.width&&a>=n.top&&a<=n.top+n.height;return i?{x:t,y:a}:null}return s?WY({x:t,y:a},s):null}var lG=(t,a,r,s)=>{var n=a.find(m=>m&&m.index===r);if(n){if(t==="horizontal")return{x:n.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:n.coordinate};if(t==="centric"){var i=n.coordinate,{radius:o}=s;return $l($l($l({},s),Fs(s.cx,s.cy,o,i)),{},{angle:i,radius:o})}var c=n.coordinate,{angle:u}=s;return $l($l($l({},s),Fs(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return{x:0,y:0}},oG=(t,a)=>a==="horizontal"?t.x:a==="vertical"?t.y:a==="centric"?t.angle:t.radius,id=t=>t.layout.width,ld=t=>t.layout.height,cG=t=>t.layout.scale,rT=t=>t.layout.margin,Ry=nt(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),Iy=nt(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),sT="data-recharts-item-index",nT="data-recharts-item-data-key",ep=60;function q_(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function C0(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?q_(Object(r),!0).forEach(function(s){dG(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q_(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function dG(t,a,r){return(a=uG(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function uG(t){var a=mG(t,"string");return typeof a=="symbol"?a:a+""}function mG(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var hG=t=>t.brush.height;function xG(t){var a=Iy(t);return a.reduce((r,s)=>{if(s.orientation==="left"&&!s.mirror&&!s.hide){var n=typeof s.width=="number"?s.width:ep;return r+n}return r},0)}function fG(t){var a=Iy(t);return a.reduce((r,s)=>{if(s.orientation==="right"&&!s.mirror&&!s.hide){var n=typeof s.width=="number"?s.width:ep;return r+n}return r},0)}function pG(t){var a=Ry(t);return a.reduce((r,s)=>s.orientation==="top"&&!s.mirror&&!s.hide?r+s.height:r,0)}function gG(t){var a=Ry(t);return a.reduce((r,s)=>s.orientation==="bottom"&&!s.mirror&&!s.hide?r+s.height:r,0)}var Zs=nt([id,ld,rT,hG,xG,fG,pG,gG,C9,MH],(t,a,r,s,n,i,o,c,u,m)=>{var h={left:(r.left||0)+n,right:(r.right||0)+i},p={top:(r.top||0)+o,bottom:(r.bottom||0)+c},y=C0(C0({},p),h),g=y.bottom;y.bottom+=s,y=KY(y,u,m);var v=t-y.left-y.right,N=a-y.top-y.bottom;return C0(C0({brushBottom:g},y),{},{width:Math.max(v,0),height:Math.max(N,0)})}),yG=nt(Zs,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),f5=nt(id,ld,(t,a)=>({x:0,y:0,width:t,height:a})),bG=x.createContext(null),Vn=()=>x.useContext(bG)!=null,zy=t=>t.brush,$y=nt([zy,Zs,rT],(t,a,r)=>({height:t.height,x:ta(t.x)?t.x:a.left,y:ta(t.y)?t.y:a.top+a.height+a.brushBottom-(r?.bottom||0),width:ta(t.width)?t.width:a.width})),p5=()=>{var t,a=Vn(),r=Qt(yG),s=Qt($y),n=(t=Qt(zy))===null||t===void 0?void 0:t.padding;return!a||!s||!n?r:{width:s.width-n.left-n.right,height:s.height-n.top-n.bottom,x:n.left,y:n.top}},vG={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},iT=()=>{var t;return(t=Qt(Zs))!==null&&t!==void 0?t:vG},g5=()=>Qt(id),y5=()=>Qt(ld),jG=()=>Qt(t=>t.layout.margin),Ua=t=>t.layout.layoutType,tp=()=>Qt(Ua),NG={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},lT=ol({name:"legend",initialState:NG,reducers:{setLegendSize(t,a){t.size.width=a.payload.width,t.size.height=a.payload.height},setLegendSettings(t,a){t.settings.align=a.payload.align,t.settings.layout=a.payload.layout,t.settings.verticalAlign=a.payload.verticalAlign,t.settings.itemSorter=a.payload.itemSorter},addLegendPayload(t,a){t.payload.push(a.payload)},removeLegendPayload(t,a){var r=Yc(t).payload.indexOf(a.payload);r>-1&&t.payload.splice(r,1)}}}),{setLegendSize:U_,setLegendSettings:wG,addLegendPayload:oT,removeLegendPayload:cT}=lT.actions,SG=lT.reducer,_G=["contextPayload"];function Ij(){return Ij=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ij.apply(null,arguments)}function W_(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Rh(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?W_(Object(r),!0).forEach(function(s){b5(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W_(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function b5(t,a,r){return(a=CG(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function CG(t){var a=kG(t,"string");return typeof a=="symbol"?a:a+""}function kG(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function AG(t,a){if(t==null)return{};var r,s,n=EG(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function EG(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function TG(t){return t.value}function PG(t){var{contextPayload:a}=t,r=AG(t,_G),s=N9(a,t.payloadUniqBy,TG),n=Rh(Rh({},r),{},{payload:s});return x.isValidElement(t.content)?x.cloneElement(t.content,n):typeof t.content=="function"?x.createElement(t.content,n):x.createElement(i5,n)}function DG(t,a,r,s,n,i){var{layout:o,align:c,verticalAlign:u}=a,m,h;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(c==="center"&&o==="vertical"?m={left:((s||0)-i.width)/2}:m=c==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(u==="middle"?h={top:((n||0)-i.height)/2}:h=u==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Rh(Rh({},m),h)}function OG(t){var a=is();return x.useEffect(()=>{a(wG(t))},[a,t]),null}function LG(t){var a=is();return x.useEffect(()=>(a(U_(t)),()=>{a(U_({width:0,height:0}))}),[a,t]),null}function MG(t){var a=zH(),r=ZU(),s=jG(),{width:n,height:i,wrapperStyle:o,portal:c}=t,[u,m]=k9([a]),h=g5(),p=y5();if(h==null||p==null)return null;var y=h-(s.left||0)-(s.right||0),g=By.getWidthOrHeight(t.layout,i,n,y),v=c?o:Rh(Rh({position:"absolute",width:g?.width||n||"auto",height:g?.height||i||"auto"},DG(o,t,s,h,p,u)),o),N=c??r;if(N==null)return null;var w=x.createElement("div",{className:"recharts-legend-wrapper",style:v,ref:m},x.createElement(OG,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),x.createElement(LG,{width:u.width,height:u.height}),x.createElement(PG,Ij({},t,g,{margin:s,chartWidth:h,chartHeight:p,contextPayload:a})));return B7.createPortal(w,N)}class By extends x.PureComponent{static getWidthOrHeight(a,r,s,n){return a==="vertical"&&ta(r)?{height:r}:a==="horizontal"?{width:s||n}:null}render(){return x.createElement(MG,this.props)}}b5(By,"displayName","Legend");b5(By,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function zj(){return zj=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},zj.apply(null,arguments)}function H_(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function U1(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?H_(Object(r),!0).forEach(function(s){RG(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H_(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function RG(t,a,r){return(a=IG(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function IG(t){var a=zG(t,"string");return typeof a=="symbol"?a:a+""}function zG(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function $G(t){return Array.isArray(t)&&sc(t[0])&&sc(t[1])?t.join(" ~ "):t}var BG=t=>{var{separator:a=" : ",contentStyle:r={},itemStyle:s={},labelStyle:n={},payload:i,formatter:o,itemSorter:c,wrapperClassName:u,labelClassName:m,label:h,labelFormatter:p,accessibilityLayer:y=!1}=t,g=()=>{if(i&&i.length){var P={padding:0,margin:0},$=(c?Ty(i,c):i).map((A,M)=>{if(A.type==="none")return null;var _=A.formatter||o||$G,{value:B,name:D}=A,C=B,L=D;if(_){var H=_(B,D,A,M,i);if(Array.isArray(H))[C,L]=H;else if(H!=null)C=H;else return null}var V=U1({display:"block",paddingTop:4,paddingBottom:4,color:A.color||"#000"},s);return x.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(M),style:V},sc(L)?x.createElement("span",{className:"recharts-tooltip-item-name"},L):null,sc(L)?x.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,x.createElement("span",{className:"recharts-tooltip-item-value"},C),x.createElement("span",{className:"recharts-tooltip-item-unit"},A.unit||""))});return x.createElement("ul",{className:"recharts-tooltip-item-list",style:P},$)}return null},v=U1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),N=U1({margin:0},n),w=!Fr(h),j=w?h:"",T=Qa("recharts-default-tooltip",u),k=Qa("recharts-tooltip-label",m);w&&p&&i!==void 0&&i!==null&&(j=p(h,i));var R=y?{role:"status","aria-live":"assertive"}:{};return x.createElement("div",zj({className:T,style:v},R),x.createElement("p",{className:k,style:N},x.isValidElement(j)?j:"".concat(j)),g())},ef="recharts-tooltip-wrapper",FG={visibility:"hidden"};function qG(t){var{coordinate:a,translateX:r,translateY:s}=t;return Qa(ef,{["".concat(ef,"-right")]:ta(r)&&a&&ta(a.x)&&r>=a.x,["".concat(ef,"-left")]:ta(r)&&a&&ta(a.x)&&r<a.x,["".concat(ef,"-bottom")]:ta(s)&&a&&ta(a.y)&&s>=a.y,["".concat(ef,"-top")]:ta(s)&&a&&ta(a.y)&&s<a.y})}function Y_(t){var{allowEscapeViewBox:a,coordinate:r,key:s,offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:c,viewBox:u,viewBoxDimension:m}=t;if(i&&ta(i[s]))return i[s];var h=r[s]-c-(n>0?n:0),p=r[s]+n;if(a[s])return o[s]?h:p;var y=u[s];if(y==null)return 0;if(o[s]){var g=h,v=y;return g<v?Math.max(p,y):Math.max(h,y)}if(m==null)return 0;var N=p+c,w=y+m;return N>w?Math.max(h,y):Math.max(p,y)}function UG(t){var{translateX:a,translateY:r,useTranslate3d:s}=t;return{transform:s?"translate3d(".concat(a,"px, ").concat(r,"px, 0)"):"translate(".concat(a,"px, ").concat(r,"px)")}}function WG(t){var{allowEscapeViewBox:a,coordinate:r,offsetTopLeft:s,position:n,reverseDirection:i,tooltipBox:o,useTranslate3d:c,viewBox:u}=t,m,h,p;return o.height>0&&o.width>0&&r?(h=Y_({allowEscapeViewBox:a,coordinate:r,key:"x",offsetTopLeft:s,position:n,reverseDirection:i,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),p=Y_({allowEscapeViewBox:a,coordinate:r,key:"y",offsetTopLeft:s,position:n,reverseDirection:i,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),m=UG({translateX:h,translateY:p,useTranslate3d:c})):m=FG,{cssProperties:m,cssClasses:qG({translateX:h,translateY:p,coordinate:r})}}function G_(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function k0(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?G_(Object(r),!0).forEach(function(s){$j(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G_(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function $j(t,a,r){return(a=HG(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function HG(t){var a=YG(t,"string");return typeof a=="symbol"?a:a+""}function YG(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}class GG extends x.PureComponent{constructor(){super(...arguments),$j(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),$j(this,"handleKeyDown",a=>{if(a.key==="Escape"){var r,s,n,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==null&&r!==void 0?r:0,y:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&n!==void 0?n:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var a,r;this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:a,allowEscapeViewBox:r,animationDuration:s,animationEasing:n,children:i,coordinate:o,hasPayload:c,isAnimationActive:u,offset:m,position:h,reverseDirection:p,useTranslate3d:y,viewBox:g,wrapperStyle:v,lastBoundingBox:N,innerRef:w,hasPortalFromProps:j}=this.props,{cssClasses:T,cssProperties:k}=WG({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:m,position:h,reverseDirection:p,tooltipBox:{height:N.height,width:N.width},useTranslate3d:y,viewBox:g}),R=j?{}:k0(k0({transition:u&&a?"transform ".concat(s,"ms ").concat(n):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&c?"visible":"hidden",position:"absolute",top:0,left:0}),P=k0(k0({},R),{},{visibility:!this.state.dismissed&&a&&c?"visible":"hidden"},v);return x.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:T,style:P,ref:w},i)}}var VG=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),hu={isSsr:VG()},dT=()=>Qt(t=>t.rootProps.accessibilityLayer);function En(t){return Number.isFinite(t)}function Ih(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function Bj(){return Bj=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Bj.apply(null,arguments)}function V_(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function K_(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?V_(Object(r),!0).forEach(function(s){KG(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V_(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function KG(t,a,r){return(a=XG(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function XG(t){var a=JG(t,"string");return typeof a=="symbol"?a:a+""}function JG(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var X_={curveBasisClosed:gW,curveBasisOpen:yW,curveBasis:pW,curveBumpX:aW,curveBumpY:rW,curveLinearClosed:bW,curveLinear:Ay,curveMonotoneX:vW,curveMonotoneY:jW,curveNatural:NW,curveStep:wW,curveStepAfter:_W,curveStepBefore:SW},A0=t=>En(t.x)&&En(t.y),tf=t=>t.x,af=t=>t.y,ZG=(t,a)=>{if(typeof t=="function")return t;var r="curve".concat(Xf(t));return(r==="curveMonotone"||r==="curveBump")&&a?X_["".concat(r).concat(a==="vertical"?"Y":"X")]:X_[r]||Ay},QG=t=>{var{type:a="linear",points:r=[],baseLine:s,layout:n,connectNulls:i=!1}=t,o=ZG(a,n),c=i?r.filter(A0):r,u;if(Array.isArray(s)){var m=i?s.filter(p=>A0(p)):s,h=c.map((p,y)=>K_(K_({},p),{},{base:m[y]}));return n==="vertical"?u=v0().y(af).x1(tf).x0(p=>p.base.x):u=v0().x(tf).y1(af).y0(p=>p.base.y),u.defined(A0).curve(o),u(h)}return n==="vertical"&&ta(s)?u=v0().y(af).x1(tf).x0(s):ta(s)?u=v0().x(tf).y1(af).y0(s):u=a9().x(tf).y(af),u.defined(A0).curve(o),u(c)},wh=t=>{var{className:a,points:r,path:s,pathRef:n}=t;if((!r||!r.length)&&!s)return null;var i=r&&r.length?QG(t):s;return x.createElement("path",Bj({},Ao(t),ZN(t),{className:Qa("recharts-curve",a),d:i===null?void 0:i,ref:n}))},eV=["x","y","top","left","width","height","className"];function Fj(){return Fj=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Fj.apply(null,arguments)}function J_(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function tV(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?J_(Object(r),!0).forEach(function(s){aV(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J_(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function aV(t,a,r){return(a=rV(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function rV(t){var a=sV(t,"string");return typeof a=="symbol"?a:a+""}function sV(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function nV(t,a){if(t==null)return{};var r,s,n=iV(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iV(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var lV=(t,a,r,s,n,i)=>"M".concat(t,",").concat(n,"v").concat(s,"M").concat(i,",").concat(a,"h").concat(r),oV=t=>{var{x:a=0,y:r=0,top:s=0,left:n=0,width:i=0,height:o=0,className:c}=t,u=nV(t,eV),m=tV({x:a,y:r,top:s,left:n,width:i,height:o},u);return!ta(a)||!ta(r)||!ta(i)||!ta(o)||!ta(s)||!ta(n)?null:x.createElement("path",Fj({},Or(m,!0),{className:Qa("recharts-cross",c),d:lV(a,r,i,o,s,n)}))};function cV(t,a,r,s){var n=s/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?a.x-n:r.left+.5,y:t==="horizontal"?r.top+.5:a.y-n,width:t==="horizontal"?s:r.width-1,height:t==="horizontal"?r.height-1:s}}function Z_(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function dV(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Z_(Object(r),!0).forEach(function(s){uV(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z_(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function uV(t,a,r){return(a=mV(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function mV(t){var a=hV(t,"string");return typeof a=="symbol"?a:a+""}function hV(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function Kn(t,a){var r=dV({},t),s=a,n=Object.keys(a),i=n.reduce((o,c)=>(o[c]===void 0&&s[c]!==void 0&&(o[c]=s[c]),o),r);return i}function xV(){}function Q_(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function eC(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Q_(Object(r),!0).forEach(function(s){fV(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Q_(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function fV(t,a,r){return(a=pV(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function pV(t){var a=gV(t,"string");return typeof a=="symbol"?a:a+""}function gV(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var yV=t=>t.replace(/([A-Z])/g,a=>"-".concat(a.toLowerCase())),uT=(t,a,r)=>t.map(s=>"".concat(yV(s)," ").concat(a,"ms ").concat(r)).join(","),bV=(t,a)=>[Object.keys(t),Object.keys(a)].reduce((r,s)=>r.filter(n=>s.includes(n))),Of=(t,a)=>Object.keys(a).reduce((r,s)=>eC(eC({},r),{},{[s]:t(s,a[s])}),{});function tC(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function An(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?tC(Object(r),!0).forEach(function(s){vV(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tC(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function vV(t,a,r){return(a=jV(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function jV(t){var a=NV(t,"string");return typeof a=="symbol"?a:a+""}function NV(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var Pg=(t,a,r)=>t+(a-t)*r,qj=t=>{var{from:a,to:r}=t;return a!==r},mT=(t,a,r)=>{var s=Of((n,i)=>{if(qj(i)){var[o,c]=t(i.from,i.to,i.velocity);return An(An({},i),{},{from:o,velocity:c})}return i},a);return r<1?Of((n,i)=>qj(i)?An(An({},i),{},{velocity:Pg(i.velocity,s[n].velocity,r),from:Pg(i.from,s[n].from,r)}):i,a):mT(t,s,r-1)};function wV(t,a,r,s,n,i){var o,c=s.reduce((y,g)=>An(An({},y),{},{[g]:{from:t[g],velocity:0,to:a[g]}}),{}),u=()=>Of((y,g)=>g.from,c),m=()=>!Object.values(c).filter(qj).length,h=null,p=y=>{o||(o=y);var g=y-o,v=g/r.dt;c=mT(r,c,v),n(An(An(An({},t),a),u())),o=y,m()||(h=i.setTimeout(p))};return()=>(h=i.setTimeout(p),()=>{h()})}function SV(t,a,r,s,n,i,o){var c=null,u=n.reduce((p,y)=>An(An({},p),{},{[y]:[t[y],a[y]]}),{}),m,h=p=>{m||(m=p);var y=(p-m)/s,g=Of((N,w)=>Pg(...w,r(y)),u);if(i(An(An(An({},t),a),g)),y<1)c=o.setTimeout(h);else{var v=Of((N,w)=>Pg(...w,r(1)),u);i(An(An(An({},t),a),v))}};return()=>(c=o.setTimeout(h),()=>{c()})}const _V=(t,a,r,s,n,i)=>{var o=bV(t,a);return r.isStepper===!0?wV(t,a,r,o,n,i):SV(t,a,r,s,o,n,i)};var Dg=1e-4,hT=(t,a)=>[0,3*t,3*a-6*t,3*t-3*a+1],xT=(t,a)=>t.map((r,s)=>r*a**s).reduce((r,s)=>r+s),aC=(t,a)=>r=>{var s=hT(t,a);return xT(s,r)},CV=(t,a)=>r=>{var s=hT(t,a),n=[...s.map((i,o)=>i*o).slice(1),0];return xT(n,r)},rC=function(){for(var a,r,s,n,i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];if(o.length===1)switch(o[0]){case"linear":[a,s,r,n]=[0,0,1,1];break;case"ease":[a,s,r,n]=[.25,.1,.25,1];break;case"ease-in":[a,s,r,n]=[.42,0,1,1];break;case"ease-out":[a,s,r,n]=[.42,0,.58,1];break;case"ease-in-out":[a,s,r,n]=[0,0,.58,1];break;default:{var u=o[0].split("(");u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4&&([a,s,r,n]=u[1].split(")")[0].split(",").map(v=>parseFloat(v)))}}else o.length===4&&([a,s,r,n]=o);var m=aC(a,r),h=aC(s,n),p=CV(a,r),y=v=>v>1?1:v<0?0:v,g=v=>{for(var N=v>1?1:v,w=N,j=0;j<8;++j){var T=m(w)-N,k=p(w);if(Math.abs(T-N)<Dg||k<Dg)return h(w);w=y(w-T/k)}return h(w)};return g.isStepper=!1,g},kV=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:s=8,dt:n=17}=a,i=(o,c,u)=>{var m=-(o-c)*r,h=u*s,p=u+(m-h)*n/1e3,y=u*n/1e3+o;return Math.abs(y-c)<Dg&&Math.abs(p)<Dg?[c,0]:[y,p]};return i.isStepper=!0,i.dt=n,i},AV=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return rC(t);case"spring":return kV();default:if(t.split("(")[0]==="cubic-bezier")return rC(t)}return typeof t=="function"?t:null};function EV(t){var a,r=()=>null,s=!1,n=null,i=o=>{if(!s){if(Array.isArray(o)){if(!o.length)return;var c=o,[u,...m]=c;if(typeof u=="number"){n=t.setTimeout(i.bind(null,m),u);return}i(u),n=t.setTimeout(i.bind(null,m));return}typeof o=="string"&&(a=o,r(a)),typeof o=="object"&&(a=o,r(a)),typeof o=="function"&&o()}};return{stop:()=>{s=!0},start:o=>{s=!1,n&&(n(),n=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>t}}class TV{setTimeout(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=performance.now(),n=null,i=o=>{o-s>=r?a(o):typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(i))};return n=requestAnimationFrame(i),()=>{cancelAnimationFrame(n)}}}function PV(){return EV(new TV)}var DV=x.createContext(PV);function OV(t,a){var r=x.useContext(DV);return x.useMemo(()=>a??r(t),[t,a,r])}var LV={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},sC={t:0},W1={t:1};function Vh(t){var a=Kn(t,LV),{isActive:r,canBegin:s,duration:n,easing:i,begin:o,onAnimationEnd:c,onAnimationStart:u,children:m}=a,h=OV(a.animationId,a.animationManager),[p,y]=x.useState(r?sC:W1),g=x.useRef(null);return x.useEffect(()=>{r||y(W1)},[r]),x.useEffect(()=>{if(!r||!s)return xV;var v=_V(sC,W1,AV(i),n,y,h.getTimeoutController()),N=()=>{g.current=v()};return h.start([u,o,N,n,c]),()=>{h.stop(),g.current&&g.current(),c()}},[r,s,n,i,o,u,c,h]),m(p.t)}function Kh(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=x.useRef(Tf(a)),s=x.useRef(t);return s.current!==t&&(r.current=Tf(a),s.current=t),r.current}function nC(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function iC(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?nC(Object(r),!0).forEach(function(s){MV(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nC(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function MV(t,a,r){return(a=RV(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function RV(t){var a=IV(t,"string");return typeof a=="symbol"?a:a+""}function IV(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function Og(){return Og=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Og.apply(null,arguments)}var lC=(t,a,r,s,n)=>{var i=Math.min(Math.abs(r)/2,Math.abs(s)/2),o=s>=0?1:-1,c=r>=0?1:-1,u=s>=0&&r>=0||s<0&&r<0?1:0,m;if(i>0&&n instanceof Array){for(var h=[0,0,0,0],p=0,y=4;p<y;p++)h[p]=n[p]>i?i:n[p];m="M".concat(t,",").concat(a+o*h[0]),h[0]>0&&(m+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(t+c*h[0],",").concat(a)),m+="L ".concat(t+r-c*h[1],",").concat(a),h[1]>0&&(m+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(a+o*h[1])),m+="L ".concat(t+r,",").concat(a+s-o*h[2]),h[2]>0&&(m+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(t+r-c*h[2],",").concat(a+s)),m+="L ".concat(t+c*h[3],",").concat(a+s),h[3]>0&&(m+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(a+s-o*h[3])),m+="Z"}else if(i>0&&n===+n&&n>0){var g=Math.min(i,n);m="M ".concat(t,",").concat(a+o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(a,`
            L `).concat(t+r-c*g,",").concat(a,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r,",").concat(a+o*g,`
            L `).concat(t+r,",").concat(a+s-o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r-c*g,",").concat(a+s,`
            L `).concat(t+c*g,",").concat(a+s,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(a+s-o*g," Z")}else m="M ".concat(t,",").concat(a," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return m},zV={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},fT=t=>{var a=Kn(t,zV),r=x.useRef(null),[s,n]=x.useState(-1);x.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var H=r.current.getTotalLength();H&&n(H)}catch{}},[]);var{x:i,y:o,width:c,height:u,radius:m,className:h}=a,{animationEasing:p,animationDuration:y,animationBegin:g,isAnimationActive:v,isUpdateAnimationActive:N}=a,w=x.useRef(c),j=x.useRef(u),T=x.useRef(i),k=x.useRef(o),R=x.useMemo(()=>({x:i,y:o,width:c,height:u,radius:m}),[i,o,c,u,m]),P=Kh(R,"rectangle-");if(i!==+i||o!==+o||c!==+c||u!==+u||c===0||u===0)return null;var $=Qa("recharts-rectangle",h);if(!N)return x.createElement("path",Og({},Or(a,!0),{className:$,d:lC(i,o,c,u,m)}));var A=w.current,M=j.current,_=T.current,B=k.current,D="0px ".concat(s===-1?1:s,"px"),C="".concat(s,"px 0px"),L=uT(["strokeDasharray"],y,typeof p=="string"?p:void 0);return x.createElement(Vh,{animationId:P,key:P,canBegin:s>0,duration:y,easing:p,isActive:N,begin:g},H=>{var V=jr(A,c,H),Y=jr(M,u,H),J=jr(_,i,H),W=jr(B,o,H);r.current&&(w.current=V,j.current=Y,T.current=J,k.current=W);var X;return v?H>0?X={transition:L,strokeDasharray:C}:X={strokeDasharray:D}:X={strokeDasharray:C},x.createElement("path",Og({},Or(a,!0),{className:$,d:lC(J,W,V,Y,m),ref:r,style:iC(iC({},X),a.style)}))})};function pT(t){var{cx:a,cy:r,radius:s,startAngle:n,endAngle:i}=t,o=Fs(a,r,s,n),c=Fs(a,r,s,i);return{points:[o,c],cx:a,cy:r,radius:s,startAngle:n,endAngle:i}}function Uj(){return Uj=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Uj.apply(null,arguments)}var $V=(t,a)=>{var r=un(a-t),s=Math.min(Math.abs(a-t),359.999);return r*s},E0=t=>{var{cx:a,cy:r,radius:s,angle:n,sign:i,isExternal:o,cornerRadius:c,cornerIsExternal:u}=t,m=c*(o?1:-1)+s,h=Math.asin(c/m)/Eg,p=u?n:n+i*h,y=Fs(a,r,m,p),g=Fs(a,r,s,p),v=u?n-i*h:n,N=Fs(a,r,m*Math.cos(h*Eg),v);return{center:y,circleTangency:g,lineTangency:N,theta:h}},gT=t=>{var{cx:a,cy:r,innerRadius:s,outerRadius:n,startAngle:i,endAngle:o}=t,c=$V(i,o),u=i+c,m=Fs(a,r,n,i),h=Fs(a,r,n,u),p="M ".concat(m.x,",").concat(m.y,`
    A `).concat(n,",").concat(n,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(i>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(s>0){var y=Fs(a,r,s,i),g=Fs(a,r,s,u);p+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(i<=u),`,
            `).concat(y.x,",").concat(y.y," Z")}else p+="L ".concat(a,",").concat(r," Z");return p},BV=t=>{var{cx:a,cy:r,innerRadius:s,outerRadius:n,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:m}=t,h=un(m-u),{circleTangency:p,lineTangency:y,theta:g}=E0({cx:a,cy:r,radius:n,angle:u,sign:h,cornerRadius:i,cornerIsExternal:c}),{circleTangency:v,lineTangency:N,theta:w}=E0({cx:a,cy:r,radius:n,angle:m,sign:-h,cornerRadius:i,cornerIsExternal:c}),j=c?Math.abs(u-m):Math.abs(u-m)-g-w;if(j<0)return o?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):gT({cx:a,cy:r,innerRadius:s,outerRadius:n,startAngle:u,endAngle:m});var T="M ".concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(n,",").concat(n,",0,").concat(+(j>180),",").concat(+(h<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(h<0),",").concat(N.x,",").concat(N.y,`
  `);if(s>0){var{circleTangency:k,lineTangency:R,theta:P}=E0({cx:a,cy:r,radius:s,angle:u,sign:h,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),{circleTangency:$,lineTangency:A,theta:M}=E0({cx:a,cy:r,radius:s,angle:m,sign:-h,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),_=c?Math.abs(u-m):Math.abs(u-m)-P-M;if(_<0&&i===0)return"".concat(T,"L").concat(a,",").concat(r,"Z");T+="L".concat(A.x,",").concat(A.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(h<0),",").concat($.x,",").concat($.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(_>180),",").concat(+(h>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(h<0),",").concat(R.x,",").concat(R.y,"Z")}else T+="L".concat(a,",").concat(r,"Z");return T},FV={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},yT=t=>{var a=Kn(t,FV),{cx:r,cy:s,innerRadius:n,outerRadius:i,cornerRadius:o,forceCornerRadius:c,cornerIsExternal:u,startAngle:m,endAngle:h,className:p}=a;if(i<n||m===h)return null;var y=Qa("recharts-sector",p),g=i-n,v=Yn(o,g,0,!0),N;return v>0&&Math.abs(m-h)<360?N=BV({cx:r,cy:s,innerRadius:n,outerRadius:i,cornerRadius:Math.min(v,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:m,endAngle:h}):N=gT({cx:r,cy:s,innerRadius:n,outerRadius:i,startAngle:m,endAngle:h}),x.createElement("path",Uj({},Or(a,!0),{className:y,d:N}))};function qV(t,a,r){var s,n,i,o;if(t==="horizontal")s=a.x,i=s,n=r.top,o=r.top+r.height;else if(t==="vertical")n=a.y,o=n,s=r.left,i=r.left+r.width;else if(a.cx!=null&&a.cy!=null)if(t==="centric"){var{cx:c,cy:u,innerRadius:m,outerRadius:h,angle:p}=a,y=Fs(c,u,m,p),g=Fs(c,u,h,p);s=y.x,n=y.y,i=g.x,o=g.y}else return pT(a);return[{x:s,y:n},{x:i,y:o}]}var H1={},Y1={},G1={},oC;function UV(){return oC||(oC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=S9();function r(s){return a.isSymbol(s)?NaN:Number(s)}t.toNumber=r}(G1)),G1}var cC;function WV(){return cC||(cC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=UV();function r(s){return s?(s=a.toNumber(s),s===1/0||s===-1/0?(s<0?-1:1)*Number.MAX_VALUE:s===s?s:0):s===0?s:0}t.toFinite=r}(Y1)),Y1}var dC;function HV(){return dC||(dC=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=_9(),r=WV();function s(n,i,o){o&&typeof o!="number"&&a.isIterateeCall(n,i,o)&&(i=o=void 0),n=r.toFinite(n),i===void 0?(i=n,n=0):i=r.toFinite(i),o=o===void 0?n<i?1:-1:r.toFinite(o);const c=Math.max(Math.ceil((i-n)/(o||1)),0),u=new Array(c);for(let m=0;m<c;m++)u[m]=n,n+=o;return u}t.range=s}(H1)),H1}var V1,uC;function YV(){return uC||(uC=1,V1=HV().range),V1}var GV=YV();const bT=oc(GV);function tu(t,a){return t==null||a==null?NaN:t<a?-1:t>a?1:t>=a?0:NaN}function VV(t,a){return t==null||a==null?NaN:a<t?-1:a>t?1:a>=t?0:NaN}function v5(t){let a,r,s;t.length!==2?(a=tu,r=(c,u)=>tu(t(c),u),s=(c,u)=>t(c)-u):(a=t===tu||t===VV?t:KV,r=t,s=t);function n(c,u,m=0,h=c.length){if(m<h){if(a(u,u)!==0)return h;do{const p=m+h>>>1;r(c[p],u)<0?m=p+1:h=p}while(m<h)}return m}function i(c,u,m=0,h=c.length){if(m<h){if(a(u,u)!==0)return h;do{const p=m+h>>>1;r(c[p],u)<=0?m=p+1:h=p}while(m<h)}return m}function o(c,u,m=0,h=c.length){const p=n(c,u,m,h-1);return p>m&&s(c[p-1],u)>-s(c[p],u)?p-1:p}return{left:n,center:o,right:i}}function KV(){return 0}function vT(t){return t===null?NaN:+t}function*XV(t,a){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const JV=v5(tu),ap=JV.right;v5(vT).center;class mC extends Map{constructor(a,r=eK){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),a!=null)for(const[s,n]of a)this.set(s,n)}get(a){return super.get(hC(this,a))}has(a){return super.has(hC(this,a))}set(a,r){return super.set(ZV(this,a),r)}delete(a){return super.delete(QV(this,a))}}function hC({_intern:t,_key:a},r){const s=a(r);return t.has(s)?t.get(s):r}function ZV({_intern:t,_key:a},r){const s=a(r);return t.has(s)?t.get(s):(t.set(s,r),r)}function QV({_intern:t,_key:a},r){const s=a(r);return t.has(s)&&(r=t.get(s),t.delete(s)),r}function eK(t){return t!==null&&typeof t=="object"?t.valueOf():t}function tK(t=tu){if(t===tu)return jT;if(typeof t!="function")throw new TypeError("compare is not a function");return(a,r)=>{const s=t(a,r);return s||s===0?s:(t(r,r)===0)-(t(a,a)===0)}}function jT(t,a){return(t==null||!(t>=t))-(a==null||!(a>=a))||(t<a?-1:t>a?1:0)}const aK=Math.sqrt(50),rK=Math.sqrt(10),sK=Math.sqrt(2);function Lg(t,a,r){const s=(a-t)/Math.max(0,r),n=Math.floor(Math.log10(s)),i=s/Math.pow(10,n),o=i>=aK?10:i>=rK?5:i>=sK?2:1;let c,u,m;return n<0?(m=Math.pow(10,-n)/o,c=Math.round(t*m),u=Math.round(a*m),c/m<t&&++c,u/m>a&&--u,m=-m):(m=Math.pow(10,n)*o,c=Math.round(t/m),u=Math.round(a/m),c*m<t&&++c,u*m>a&&--u),u<c&&.5<=r&&r<2?Lg(t,a,r*2):[c,u,m]}function Wj(t,a,r){if(a=+a,t=+t,r=+r,!(r>0))return[];if(t===a)return[t];const s=a<t,[n,i,o]=s?Lg(a,t,r):Lg(t,a,r);if(!(i>=n))return[];const c=i-n+1,u=new Array(c);if(s)if(o<0)for(let m=0;m<c;++m)u[m]=(i-m)/-o;else for(let m=0;m<c;++m)u[m]=(i-m)*o;else if(o<0)for(let m=0;m<c;++m)u[m]=(n+m)/-o;else for(let m=0;m<c;++m)u[m]=(n+m)*o;return u}function Hj(t,a,r){return a=+a,t=+t,r=+r,Lg(t,a,r)[2]}function Yj(t,a,r){a=+a,t=+t,r=+r;const s=a<t,n=s?Hj(a,t,r):Hj(t,a,r);return(s?-1:1)*(n<0?1/-n:n)}function xC(t,a){let r;for(const s of t)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);return r}function fC(t,a){let r;for(const s of t)s!=null&&(r>s||r===void 0&&s>=s)&&(r=s);return r}function NT(t,a,r=0,s=1/0,n){if(a=Math.floor(a),r=Math.floor(Math.max(0,r)),s=Math.floor(Math.min(t.length-1,s)),!(r<=a&&a<=s))return t;for(n=n===void 0?jT:tK(n);s>r;){if(s-r>600){const u=s-r+1,m=a-r+1,h=Math.log(u),p=.5*Math.exp(2*h/3),y=.5*Math.sqrt(h*p*(u-p)/u)*(m-u/2<0?-1:1),g=Math.max(r,Math.floor(a-m*p/u+y)),v=Math.min(s,Math.floor(a+(u-m)*p/u+y));NT(t,a,g,v,n)}const i=t[a];let o=r,c=s;for(rf(t,r,a),n(t[s],i)>0&&rf(t,r,s);o<c;){for(rf(t,o,c),++o,--c;n(t[o],i)<0;)++o;for(;n(t[c],i)>0;)--c}n(t[r],i)===0?rf(t,r,c):(++c,rf(t,c,s)),c<=a&&(r=c+1),a<=c&&(s=c-1)}return t}function rf(t,a,r){const s=t[a];t[a]=t[r],t[r]=s}function nK(t,a,r){if(t=Float64Array.from(XV(t)),!(!(s=t.length)||isNaN(a=+a))){if(a<=0||s<2)return fC(t);if(a>=1)return xC(t);var s,n=(s-1)*a,i=Math.floor(n),o=xC(NT(t,i).subarray(0,i+1)),c=fC(t.subarray(i+1));return o+(c-o)*(n-i)}}function iK(t,a,r=vT){if(!(!(s=t.length)||isNaN(a=+a))){if(a<=0||s<2)return+r(t[0],0,t);if(a>=1)return+r(t[s-1],s-1,t);var s,n=(s-1)*a,i=Math.floor(n),o=+r(t[i],i,t),c=+r(t[i+1],i+1,t);return o+(c-o)*(n-i)}}function lK(t,a,r){t=+t,a=+a,r=(n=arguments.length)<2?(a=t,t=0,1):n<3?1:+r;for(var s=-1,n=Math.max(0,Math.ceil((a-t)/r))|0,i=new Array(n);++s<n;)i[s]=t+s*r;return i}function Kl(t,a){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(a).domain(t);break}return this}function od(t,a){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof a=="function"?this.interpolator(a):this.range(a);break}}return this}const Gj=Symbol("implicit");function j5(){var t=new mC,a=[],r=[],s=Gj;function n(i){let o=t.get(i);if(o===void 0){if(s!==Gj)return s;t.set(i,o=a.push(i)-1)}return r[o%r.length]}return n.domain=function(i){if(!arguments.length)return a.slice();a=[],t=new mC;for(const o of i)t.has(o)||t.set(o,a.push(o)-1);return n},n.range=function(i){return arguments.length?(r=Array.from(i),n):r.slice()},n.unknown=function(i){return arguments.length?(s=i,n):s},n.copy=function(){return j5(a,r).unknown(s)},Kl.apply(n,arguments),n}function N5(){var t=j5().unknown(void 0),a=t.domain,r=t.range,s=0,n=1,i,o,c=!1,u=0,m=0,h=.5;delete t.unknown;function p(){var y=a().length,g=n<s,v=g?n:s,N=g?s:n;i=(N-v)/Math.max(1,y-u+m*2),c&&(i=Math.floor(i)),v+=(N-v-i*(y-u))*h,o=i*(1-u),c&&(v=Math.round(v),o=Math.round(o));var w=lK(y).map(function(j){return v+i*j});return r(g?w.reverse():w)}return t.domain=function(y){return arguments.length?(a(y),p()):a()},t.range=function(y){return arguments.length?([s,n]=y,s=+s,n=+n,p()):[s,n]},t.rangeRound=function(y){return[s,n]=y,s=+s,n=+n,c=!0,p()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(y){return arguments.length?(c=!!y,p()):c},t.padding=function(y){return arguments.length?(u=Math.min(1,m=+y),p()):u},t.paddingInner=function(y){return arguments.length?(u=Math.min(1,y),p()):u},t.paddingOuter=function(y){return arguments.length?(m=+y,p()):m},t.align=function(y){return arguments.length?(h=Math.max(0,Math.min(1,y)),p()):h},t.copy=function(){return N5(a(),[s,n]).round(c).paddingInner(u).paddingOuter(m).align(h)},Kl.apply(p(),arguments)}function wT(t){var a=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return wT(a())},t}function oK(){return wT(N5.apply(null,arguments).paddingInner(1))}function w5(t,a,r){t.prototype=a.prototype=r,r.constructor=t}function ST(t,a){var r=Object.create(t.prototype);for(var s in a)r[s]=a[s];return r}function rp(){}var Lf=.7,Mg=1/Lf,Sh="\\s*([+-]?\\d+)\\s*",Mf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cK=/^#([0-9a-f]{3,8})$/,dK=new RegExp(`^rgb\\(${Sh},${Sh},${Sh}\\)$`),uK=new RegExp(`^rgb\\(${rc},${rc},${rc}\\)$`),mK=new RegExp(`^rgba\\(${Sh},${Sh},${Sh},${Mf}\\)$`),hK=new RegExp(`^rgba\\(${rc},${rc},${rc},${Mf}\\)$`),xK=new RegExp(`^hsl\\(${Mf},${rc},${rc}\\)$`),fK=new RegExp(`^hsla\\(${Mf},${rc},${rc},${Mf}\\)$`),pC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};w5(rp,Rf,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:gC,formatHex:gC,formatHex8:pK,formatHsl:gK,formatRgb:yC,toString:yC});function gC(){return this.rgb().formatHex()}function pK(){return this.rgb().formatHex8()}function gK(){return _T(this).formatHsl()}function yC(){return this.rgb().formatRgb()}function Rf(t){var a,r;return t=(t+"").trim().toLowerCase(),(a=cK.exec(t))?(r=a[1].length,a=parseInt(a[1],16),r===6?bC(a):r===3?new Di(a>>8&15|a>>4&240,a>>4&15|a&240,(a&15)<<4|a&15,1):r===8?T0(a>>24&255,a>>16&255,a>>8&255,(a&255)/255):r===4?T0(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|a&240,((a&15)<<4|a&15)/255):null):(a=dK.exec(t))?new Di(a[1],a[2],a[3],1):(a=uK.exec(t))?new Di(a[1]*255/100,a[2]*255/100,a[3]*255/100,1):(a=mK.exec(t))?T0(a[1],a[2],a[3],a[4]):(a=hK.exec(t))?T0(a[1]*255/100,a[2]*255/100,a[3]*255/100,a[4]):(a=xK.exec(t))?NC(a[1],a[2]/100,a[3]/100,1):(a=fK.exec(t))?NC(a[1],a[2]/100,a[3]/100,a[4]):pC.hasOwnProperty(t)?bC(pC[t]):t==="transparent"?new Di(NaN,NaN,NaN,0):null}function bC(t){return new Di(t>>16&255,t>>8&255,t&255,1)}function T0(t,a,r,s){return s<=0&&(t=a=r=NaN),new Di(t,a,r,s)}function yK(t){return t instanceof rp||(t=Rf(t)),t?(t=t.rgb(),new Di(t.r,t.g,t.b,t.opacity)):new Di}function Vj(t,a,r,s){return arguments.length===1?yK(t):new Di(t,a,r,s??1)}function Di(t,a,r,s){this.r=+t,this.g=+a,this.b=+r,this.opacity=+s}w5(Di,Vj,ST(rp,{brighter(t){return t=t==null?Mg:Math.pow(Mg,t),new Di(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Lf:Math.pow(Lf,t),new Di(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Di(lm(this.r),lm(this.g),lm(this.b),Rg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vC,formatHex:vC,formatHex8:bK,formatRgb:jC,toString:jC}));function vC(){return`#${Qu(this.r)}${Qu(this.g)}${Qu(this.b)}`}function bK(){return`#${Qu(this.r)}${Qu(this.g)}${Qu(this.b)}${Qu((isNaN(this.opacity)?1:this.opacity)*255)}`}function jC(){const t=Rg(this.opacity);return`${t===1?"rgb(":"rgba("}${lm(this.r)}, ${lm(this.g)}, ${lm(this.b)}${t===1?")":`, ${t})`}`}function Rg(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function lm(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Qu(t){return t=lm(t),(t<16?"0":"")+t.toString(16)}function NC(t,a,r,s){return s<=0?t=a=r=NaN:r<=0||r>=1?t=a=NaN:a<=0&&(t=NaN),new jo(t,a,r,s)}function _T(t){if(t instanceof jo)return new jo(t.h,t.s,t.l,t.opacity);if(t instanceof rp||(t=Rf(t)),!t)return new jo;if(t instanceof jo)return t;t=t.rgb();var a=t.r/255,r=t.g/255,s=t.b/255,n=Math.min(a,r,s),i=Math.max(a,r,s),o=NaN,c=i-n,u=(i+n)/2;return c?(a===i?o=(r-s)/c+(r<s)*6:r===i?o=(s-a)/c+2:o=(a-r)/c+4,c/=u<.5?i+n:2-i-n,o*=60):c=u>0&&u<1?0:o,new jo(o,c,u,t.opacity)}function vK(t,a,r,s){return arguments.length===1?_T(t):new jo(t,a,r,s??1)}function jo(t,a,r,s){this.h=+t,this.s=+a,this.l=+r,this.opacity=+s}w5(jo,vK,ST(rp,{brighter(t){return t=t==null?Mg:Math.pow(Mg,t),new jo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Lf:Math.pow(Lf,t),new jo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,a=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*a,n=2*r-s;return new Di(K1(t>=240?t-240:t+120,n,s),K1(t,n,s),K1(t<120?t+240:t-120,n,s),this.opacity)},clamp(){return new jo(wC(this.h),P0(this.s),P0(this.l),Rg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Rg(this.opacity);return`${t===1?"hsl(":"hsla("}${wC(this.h)}, ${P0(this.s)*100}%, ${P0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function wC(t){return t=(t||0)%360,t<0?t+360:t}function P0(t){return Math.max(0,Math.min(1,t||0))}function K1(t,a,r){return(t<60?a+(r-a)*t/60:t<180?r:t<240?a+(r-a)*(240-t)/60:a)*255}const S5=t=>()=>t;function jK(t,a){return function(r){return t+r*a}}function NK(t,a,r){return t=Math.pow(t,r),a=Math.pow(a,r)-t,r=1/r,function(s){return Math.pow(t+s*a,r)}}function wK(t){return(t=+t)==1?CT:function(a,r){return r-a?NK(a,r,t):S5(isNaN(a)?r:a)}}function CT(t,a){var r=a-t;return r?jK(t,r):S5(isNaN(t)?a:t)}const SC=function t(a){var r=wK(a);function s(n,i){var o=r((n=Vj(n)).r,(i=Vj(i)).r),c=r(n.g,i.g),u=r(n.b,i.b),m=CT(n.opacity,i.opacity);return function(h){return n.r=o(h),n.g=c(h),n.b=u(h),n.opacity=m(h),n+""}}return s.gamma=t,s}(1);function SK(t,a){a||(a=[]);var r=t?Math.min(a.length,t.length):0,s=a.slice(),n;return function(i){for(n=0;n<r;++n)s[n]=t[n]*(1-i)+a[n]*i;return s}}function _K(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function CK(t,a){var r=a?a.length:0,s=t?Math.min(r,t.length):0,n=new Array(s),i=new Array(r),o;for(o=0;o<s;++o)n[o]=Xh(t[o],a[o]);for(;o<r;++o)i[o]=a[o];return function(c){for(o=0;o<s;++o)i[o]=n[o](c);return i}}function kK(t,a){var r=new Date;return t=+t,a=+a,function(s){return r.setTime(t*(1-s)+a*s),r}}function Ig(t,a){return t=+t,a=+a,function(r){return t*(1-r)+a*r}}function AK(t,a){var r={},s={},n;(t===null||typeof t!="object")&&(t={}),(a===null||typeof a!="object")&&(a={});for(n in a)n in t?r[n]=Xh(t[n],a[n]):s[n]=a[n];return function(i){for(n in r)s[n]=r[n](i);return s}}var Kj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,X1=new RegExp(Kj.source,"g");function EK(t){return function(){return t}}function TK(t){return function(a){return t(a)+""}}function PK(t,a){var r=Kj.lastIndex=X1.lastIndex=0,s,n,i,o=-1,c=[],u=[];for(t=t+"",a=a+"";(s=Kj.exec(t))&&(n=X1.exec(a));)(i=n.index)>r&&(i=a.slice(r,i),c[o]?c[o]+=i:c[++o]=i),(s=s[0])===(n=n[0])?c[o]?c[o]+=n:c[++o]=n:(c[++o]=null,u.push({i:o,x:Ig(s,n)})),r=X1.lastIndex;return r<a.length&&(i=a.slice(r),c[o]?c[o]+=i:c[++o]=i),c.length<2?u[0]?TK(u[0].x):EK(a):(a=u.length,function(m){for(var h=0,p;h<a;++h)c[(p=u[h]).i]=p.x(m);return c.join("")})}function Xh(t,a){var r=typeof a,s;return a==null||r==="boolean"?S5(a):(r==="number"?Ig:r==="string"?(s=Rf(a))?(a=s,SC):PK:a instanceof Rf?SC:a instanceof Date?kK:_K(a)?SK:Array.isArray(a)?CK:typeof a.valueOf!="function"&&typeof a.toString!="function"||isNaN(a)?AK:Ig)(t,a)}function _5(t,a){return t=+t,a=+a,function(r){return Math.round(t*(1-r)+a*r)}}function DK(t,a){a===void 0&&(a=t,t=Xh);for(var r=0,s=a.length-1,n=a[0],i=new Array(s<0?0:s);r<s;)i[r]=t(n,n=a[++r]);return function(o){var c=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[c](o-c)}}function OK(t){return function(){return t}}function zg(t){return+t}var _C=[0,1];function xi(t){return t}function Xj(t,a){return(a-=t=+t)?function(r){return(r-t)/a}:OK(isNaN(a)?NaN:.5)}function LK(t,a){var r;return t>a&&(r=t,t=a,a=r),function(s){return Math.max(t,Math.min(a,s))}}function MK(t,a,r){var s=t[0],n=t[1],i=a[0],o=a[1];return n<s?(s=Xj(n,s),i=r(o,i)):(s=Xj(s,n),i=r(i,o)),function(c){return i(s(c))}}function RK(t,a,r){var s=Math.min(t.length,a.length)-1,n=new Array(s),i=new Array(s),o=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),a=a.slice().reverse());++o<s;)n[o]=Xj(t[o],t[o+1]),i[o]=r(a[o],a[o+1]);return function(c){var u=ap(t,c,1,s)-1;return i[u](n[u](c))}}function sp(t,a){return a.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Fy(){var t=_C,a=_C,r=Xh,s,n,i,o=xi,c,u,m;function h(){var y=Math.min(t.length,a.length);return o!==xi&&(o=LK(t[0],t[y-1])),c=y>2?RK:MK,u=m=null,p}function p(y){return y==null||isNaN(y=+y)?i:(u||(u=c(t.map(s),a,r)))(s(o(y)))}return p.invert=function(y){return o(n((m||(m=c(a,t.map(s),Ig)))(y)))},p.domain=function(y){return arguments.length?(t=Array.from(y,zg),h()):t.slice()},p.range=function(y){return arguments.length?(a=Array.from(y),h()):a.slice()},p.rangeRound=function(y){return a=Array.from(y),r=_5,h()},p.clamp=function(y){return arguments.length?(o=y?!0:xi,h()):o!==xi},p.interpolate=function(y){return arguments.length?(r=y,h()):r},p.unknown=function(y){return arguments.length?(i=y,p):i},function(y,g){return s=y,n=g,h()}}function C5(){return Fy()(xi,xi)}function IK(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function $g(t,a){if((r=(t=a?t.toExponential(a-1):t.toExponential()).indexOf("e"))<0)return null;var r,s=t.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+t.slice(r+1)]}function zh(t){return t=$g(Math.abs(t)),t?t[1]:NaN}function zK(t,a){return function(r,s){for(var n=r.length,i=[],o=0,c=t[0],u=0;n>0&&c>0&&(u+c+1>s&&(c=Math.max(1,s-u)),i.push(r.substring(n-=c,n+c)),!((u+=c+1)>s));)c=t[o=(o+1)%t.length];return i.reverse().join(a)}}function $K(t){return function(a){return a.replace(/[0-9]/g,function(r){return t[+r]})}}var BK=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function If(t){if(!(a=BK.exec(t)))throw new Error("invalid format: "+t);var a;return new k5({fill:a[1],align:a[2],sign:a[3],symbol:a[4],zero:a[5],width:a[6],comma:a[7],precision:a[8]&&a[8].slice(1),trim:a[9],type:a[10]})}If.prototype=k5.prototype;function k5(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}k5.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function FK(t){e:for(var a=t.length,r=1,s=-1,n;r<a;++r)switch(t[r]){case".":s=n=r;break;case"0":s===0&&(s=r),n=r;break;default:if(!+t[r])break e;s>0&&(s=0);break}return s>0?t.slice(0,s)+t.slice(n+1):t}var kT;function qK(t,a){var r=$g(t,a);if(!r)return t+"";var s=r[0],n=r[1],i=n-(kT=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+$g(t,Math.max(0,a+i-1))[0]}function CC(t,a){var r=$g(t,a);if(!r)return t+"";var s=r[0],n=r[1];return n<0?"0."+new Array(-n).join("0")+s:s.length>n+1?s.slice(0,n+1)+"."+s.slice(n+1):s+new Array(n-s.length+2).join("0")}const kC={"%":(t,a)=>(t*100).toFixed(a),b:t=>Math.round(t).toString(2),c:t=>t+"",d:IK,e:(t,a)=>t.toExponential(a),f:(t,a)=>t.toFixed(a),g:(t,a)=>t.toPrecision(a),o:t=>Math.round(t).toString(8),p:(t,a)=>CC(t*100,a),r:CC,s:qK,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function AC(t){return t}var EC=Array.prototype.map,TC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function UK(t){var a=t.grouping===void 0||t.thousands===void 0?AC:zK(EC.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",s=t.currency===void 0?"":t.currency[1]+"",n=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?AC:$K(EC.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function m(p){p=If(p);var y=p.fill,g=p.align,v=p.sign,N=p.symbol,w=p.zero,j=p.width,T=p.comma,k=p.precision,R=p.trim,P=p.type;P==="n"?(T=!0,P="g"):kC[P]||(k===void 0&&(k=12),R=!0,P="g"),(w||y==="0"&&g==="=")&&(w=!0,y="0",g="=");var $=N==="$"?r:N==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",A=N==="$"?s:/[%p]/.test(P)?o:"",M=kC[P],_=/[defgprs%]/.test(P);k=k===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function B(D){var C=$,L=A,H,V,Y;if(P==="c")L=M(D)+L,D="";else{D=+D;var J=D<0||1/D<0;if(D=isNaN(D)?u:M(Math.abs(D),k),R&&(D=FK(D)),J&&+D==0&&v!=="+"&&(J=!1),C=(J?v==="("?v:c:v==="-"||v==="("?"":v)+C,L=(P==="s"?TC[8+kT/3]:"")+L+(J&&v==="("?")":""),_){for(H=-1,V=D.length;++H<V;)if(Y=D.charCodeAt(H),48>Y||Y>57){L=(Y===46?n+D.slice(H+1):D.slice(H))+L,D=D.slice(0,H);break}}}T&&!w&&(D=a(D,1/0));var W=C.length+D.length+L.length,X=W<j?new Array(j-W+1).join(y):"";switch(T&&w&&(D=a(X+D,X.length?j-L.length:1/0),X=""),g){case"<":D=C+D+L+X;break;case"=":D=C+X+D+L;break;case"^":D=X.slice(0,W=X.length>>1)+C+D+L+X.slice(W);break;default:D=X+C+D+L;break}return i(D)}return B.toString=function(){return p+""},B}function h(p,y){var g=m((p=If(p),p.type="f",p)),v=Math.max(-8,Math.min(8,Math.floor(zh(y)/3)))*3,N=Math.pow(10,-v),w=TC[8+v/3];return function(j){return g(N*j)+w}}return{format:m,formatPrefix:h}}var D0,A5,AT;WK({thousands:",",grouping:[3],currency:["$",""]});function WK(t){return D0=UK(t),A5=D0.format,AT=D0.formatPrefix,D0}function HK(t){return Math.max(0,-zh(Math.abs(t)))}function YK(t,a){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zh(a)/3)))*3-zh(Math.abs(t)))}function GK(t,a){return t=Math.abs(t),a=Math.abs(a)-t,Math.max(0,zh(a)-zh(t))+1}function ET(t,a,r,s){var n=Yj(t,a,r),i;switch(s=If(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(a));return s.precision==null&&!isNaN(i=YK(n,o))&&(s.precision=i),AT(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=GK(n,Math.max(Math.abs(t),Math.abs(a))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=HK(n))&&(s.precision=i-(s.type==="%")*2);break}}return A5(s)}function xu(t){var a=t.domain;return t.ticks=function(r){var s=a();return Wj(s[0],s[s.length-1],r??10)},t.tickFormat=function(r,s){var n=a();return ET(n[0],n[n.length-1],r??10,s)},t.nice=function(r){r==null&&(r=10);var s=a(),n=0,i=s.length-1,o=s[n],c=s[i],u,m,h=10;for(c<o&&(m=o,o=c,c=m,m=n,n=i,i=m);h-- >0;){if(m=Hj(o,c,r),m===u)return s[n]=o,s[i]=c,a(s);if(m>0)o=Math.floor(o/m)*m,c=Math.ceil(c/m)*m;else if(m<0)o=Math.ceil(o*m)/m,c=Math.floor(c*m)/m;else break;u=m}return t},t}function TT(){var t=C5();return t.copy=function(){return sp(t,TT())},Kl.apply(t,arguments),xu(t)}function PT(t){var a;function r(s){return s==null||isNaN(s=+s)?a:s}return r.invert=r,r.domain=r.range=function(s){return arguments.length?(t=Array.from(s,zg),r):t.slice()},r.unknown=function(s){return arguments.length?(a=s,r):a},r.copy=function(){return PT(t).unknown(a)},t=arguments.length?Array.from(t,zg):[0,1],xu(r)}function DT(t,a){t=t.slice();var r=0,s=t.length-1,n=t[r],i=t[s],o;return i<n&&(o=r,r=s,s=o,o=n,n=i,i=o),t[r]=a.floor(n),t[s]=a.ceil(i),t}function PC(t){return Math.log(t)}function DC(t){return Math.exp(t)}function VK(t){return-Math.log(-t)}function KK(t){return-Math.exp(-t)}function XK(t){return isFinite(t)?+("1e"+t):t<0?0:t}function JK(t){return t===10?XK:t===Math.E?Math.exp:a=>Math.pow(t,a)}function ZK(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),a=>Math.log(a)/t)}function OC(t){return(a,r)=>-t(-a,r)}function E5(t){const a=t(PC,DC),r=a.domain;let s=10,n,i;function o(){return n=ZK(s),i=JK(s),r()[0]<0?(n=OC(n),i=OC(i),t(VK,KK)):t(PC,DC),a}return a.base=function(c){return arguments.length?(s=+c,o()):s},a.domain=function(c){return arguments.length?(r(c),o()):r()},a.ticks=c=>{const u=r();let m=u[0],h=u[u.length-1];const p=h<m;p&&([m,h]=[h,m]);let y=n(m),g=n(h),v,N;const w=c==null?10:+c;let j=[];if(!(s%1)&&g-y<w){if(y=Math.floor(y),g=Math.ceil(g),m>0){for(;y<=g;++y)for(v=1;v<s;++v)if(N=y<0?v/i(-y):v*i(y),!(N<m)){if(N>h)break;j.push(N)}}else for(;y<=g;++y)for(v=s-1;v>=1;--v)if(N=y>0?v/i(-y):v*i(y),!(N<m)){if(N>h)break;j.push(N)}j.length*2<w&&(j=Wj(m,h,w))}else j=Wj(y,g,Math.min(g-y,w)).map(i);return p?j.reverse():j},a.tickFormat=(c,u)=>{if(c==null&&(c=10),u==null&&(u=s===10?"s":","),typeof u!="function"&&(!(s%1)&&(u=If(u)).precision==null&&(u.trim=!0),u=A5(u)),c===1/0)return u;const m=Math.max(1,s*c/a.ticks().length);return h=>{let p=h/i(Math.round(n(h)));return p*s<s-.5&&(p*=s),p<=m?u(h):""}},a.nice=()=>r(DT(r(),{floor:c=>i(Math.floor(n(c))),ceil:c=>i(Math.ceil(n(c)))})),a}function OT(){const t=E5(Fy()).domain([1,10]);return t.copy=()=>sp(t,OT()).base(t.base()),Kl.apply(t,arguments),t}function LC(t){return function(a){return Math.sign(a)*Math.log1p(Math.abs(a/t))}}function MC(t){return function(a){return Math.sign(a)*Math.expm1(Math.abs(a))*t}}function T5(t){var a=1,r=t(LC(a),MC(a));return r.constant=function(s){return arguments.length?t(LC(a=+s),MC(a)):a},xu(r)}function LT(){var t=T5(Fy());return t.copy=function(){return sp(t,LT()).constant(t.constant())},Kl.apply(t,arguments)}function RC(t){return function(a){return a<0?-Math.pow(-a,t):Math.pow(a,t)}}function QK(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function eX(t){return t<0?-t*t:t*t}function P5(t){var a=t(xi,xi),r=1;function s(){return r===1?t(xi,xi):r===.5?t(QK,eX):t(RC(r),RC(1/r))}return a.exponent=function(n){return arguments.length?(r=+n,s()):r},xu(a)}function D5(){var t=P5(Fy());return t.copy=function(){return sp(t,D5()).exponent(t.exponent())},Kl.apply(t,arguments),t}function tX(){return D5.apply(null,arguments).exponent(.5)}function IC(t){return Math.sign(t)*t*t}function aX(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function MT(){var t=C5(),a=[0,1],r=!1,s;function n(i){var o=aX(t(i));return isNaN(o)?s:r?Math.round(o):o}return n.invert=function(i){return t.invert(IC(i))},n.domain=function(i){return arguments.length?(t.domain(i),n):t.domain()},n.range=function(i){return arguments.length?(t.range((a=Array.from(i,zg)).map(IC)),n):a.slice()},n.rangeRound=function(i){return n.range(i).round(!0)},n.round=function(i){return arguments.length?(r=!!i,n):r},n.clamp=function(i){return arguments.length?(t.clamp(i),n):t.clamp()},n.unknown=function(i){return arguments.length?(s=i,n):s},n.copy=function(){return MT(t.domain(),a).round(r).clamp(t.clamp()).unknown(s)},Kl.apply(n,arguments),xu(n)}function RT(){var t=[],a=[],r=[],s;function n(){var o=0,c=Math.max(1,a.length);for(r=new Array(c-1);++o<c;)r[o-1]=iK(t,o/c);return i}function i(o){return o==null||isNaN(o=+o)?s:a[ap(r,o)]}return i.invertExtent=function(o){var c=a.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let c of o)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(tu),n()},i.range=function(o){return arguments.length?(a=Array.from(o),n()):a.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return r.slice()},i.copy=function(){return RT().domain(t).range(a).unknown(s)},Kl.apply(i,arguments)}function IT(){var t=0,a=1,r=1,s=[.5],n=[0,1],i;function o(u){return u!=null&&u<=u?n[ap(s,u,0,r)]:i}function c(){var u=-1;for(s=new Array(r);++u<r;)s[u]=((u+1)*a-(u-r)*t)/(r+1);return o}return o.domain=function(u){return arguments.length?([t,a]=u,t=+t,a=+a,c()):[t,a]},o.range=function(u){return arguments.length?(r=(n=Array.from(u)).length-1,c()):n.slice()},o.invertExtent=function(u){var m=n.indexOf(u);return m<0?[NaN,NaN]:m<1?[t,s[0]]:m>=r?[s[r-1],a]:[s[m-1],s[m]]},o.unknown=function(u){return arguments.length&&(i=u),o},o.thresholds=function(){return s.slice()},o.copy=function(){return IT().domain([t,a]).range(n).unknown(i)},Kl.apply(xu(o),arguments)}function zT(){var t=[.5],a=[0,1],r,s=1;function n(i){return i!=null&&i<=i?a[ap(t,i,0,s)]:r}return n.domain=function(i){return arguments.length?(t=Array.from(i),s=Math.min(t.length,a.length-1),n):t.slice()},n.range=function(i){return arguments.length?(a=Array.from(i),s=Math.min(t.length,a.length-1),n):a.slice()},n.invertExtent=function(i){var o=a.indexOf(i);return[t[o-1],t[o]]},n.unknown=function(i){return arguments.length?(r=i,n):r},n.copy=function(){return zT().domain(t).range(a).unknown(r)},Kl.apply(n,arguments)}const J1=new Date,Z1=new Date;function Qs(t,a,r,s){function n(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return n.floor=i=>(t(i=new Date(+i)),i),n.ceil=i=>(t(i=new Date(i-1)),a(i,1),t(i),i),n.round=i=>{const o=n(i),c=n.ceil(i);return i-o<c-i?o:c},n.offset=(i,o)=>(a(i=new Date(+i),o==null?1:Math.floor(o)),i),n.range=(i,o,c)=>{const u=[];if(i=n.ceil(i),c=c==null?1:Math.floor(c),!(i<o)||!(c>0))return u;let m;do u.push(m=new Date(+i)),a(i,c),t(i);while(m<i&&i<o);return u},n.filter=i=>Qs(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;a(o,-1),!i(o););else for(;--c>=0;)for(;a(o,1),!i(o););}),r&&(n.count=(i,o)=>(J1.setTime(+i),Z1.setTime(+o),t(J1),t(Z1),Math.floor(r(J1,Z1))),n.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?n.filter(s?o=>s(o)%i===0:o=>n.count(0,o)%i===0):n)),n}const Bg=Qs(()=>{},(t,a)=>{t.setTime(+t+a)},(t,a)=>a-t);Bg.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Qs(a=>{a.setTime(Math.floor(a/t)*t)},(a,r)=>{a.setTime(+a+r*t)},(a,r)=>(r-a)/t):Bg);Bg.range;const Uc=1e3,Ul=Uc*60,Wc=Ul*60,td=Wc*24,O5=td*7,zC=td*30,Q1=td*365,em=Qs(t=>{t.setTime(t-t.getMilliseconds())},(t,a)=>{t.setTime(+t+a*Uc)},(t,a)=>(a-t)/Uc,t=>t.getUTCSeconds());em.range;const L5=Qs(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Uc)},(t,a)=>{t.setTime(+t+a*Ul)},(t,a)=>(a-t)/Ul,t=>t.getMinutes());L5.range;const M5=Qs(t=>{t.setUTCSeconds(0,0)},(t,a)=>{t.setTime(+t+a*Ul)},(t,a)=>(a-t)/Ul,t=>t.getUTCMinutes());M5.range;const R5=Qs(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Uc-t.getMinutes()*Ul)},(t,a)=>{t.setTime(+t+a*Wc)},(t,a)=>(a-t)/Wc,t=>t.getHours());R5.range;const I5=Qs(t=>{t.setUTCMinutes(0,0,0)},(t,a)=>{t.setTime(+t+a*Wc)},(t,a)=>(a-t)/Wc,t=>t.getUTCHours());I5.range;const np=Qs(t=>t.setHours(0,0,0,0),(t,a)=>t.setDate(t.getDate()+a),(t,a)=>(a-t-(a.getTimezoneOffset()-t.getTimezoneOffset())*Ul)/td,t=>t.getDate()-1);np.range;const qy=Qs(t=>{t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCDate(t.getUTCDate()+a)},(t,a)=>(a-t)/td,t=>t.getUTCDate()-1);qy.range;const $T=Qs(t=>{t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCDate(t.getUTCDate()+a)},(t,a)=>(a-t)/td,t=>Math.floor(t/td));$T.range;function _m(t){return Qs(a=>{a.setDate(a.getDate()-(a.getDay()+7-t)%7),a.setHours(0,0,0,0)},(a,r)=>{a.setDate(a.getDate()+r*7)},(a,r)=>(r-a-(r.getTimezoneOffset()-a.getTimezoneOffset())*Ul)/O5)}const Uy=_m(0),Fg=_m(1),rX=_m(2),sX=_m(3),$h=_m(4),nX=_m(5),iX=_m(6);Uy.range;Fg.range;rX.range;sX.range;$h.range;nX.range;iX.range;function Cm(t){return Qs(a=>{a.setUTCDate(a.getUTCDate()-(a.getUTCDay()+7-t)%7),a.setUTCHours(0,0,0,0)},(a,r)=>{a.setUTCDate(a.getUTCDate()+r*7)},(a,r)=>(r-a)/O5)}const Wy=Cm(0),qg=Cm(1),lX=Cm(2),oX=Cm(3),Bh=Cm(4),cX=Cm(5),dX=Cm(6);Wy.range;qg.range;lX.range;oX.range;Bh.range;cX.range;dX.range;const z5=Qs(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,a)=>{t.setMonth(t.getMonth()+a)},(t,a)=>a.getMonth()-t.getMonth()+(a.getFullYear()-t.getFullYear())*12,t=>t.getMonth());z5.range;const $5=Qs(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCMonth(t.getUTCMonth()+a)},(t,a)=>a.getUTCMonth()-t.getUTCMonth()+(a.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());$5.range;const ad=Qs(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,a)=>{t.setFullYear(t.getFullYear()+a)},(t,a)=>a.getFullYear()-t.getFullYear(),t=>t.getFullYear());ad.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Qs(a=>{a.setFullYear(Math.floor(a.getFullYear()/t)*t),a.setMonth(0,1),a.setHours(0,0,0,0)},(a,r)=>{a.setFullYear(a.getFullYear()+r*t)});ad.range;const rd=Qs(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCFullYear(t.getUTCFullYear()+a)},(t,a)=>a.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());rd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Qs(a=>{a.setUTCFullYear(Math.floor(a.getUTCFullYear()/t)*t),a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0)},(a,r)=>{a.setUTCFullYear(a.getUTCFullYear()+r*t)});rd.range;function BT(t,a,r,s,n,i){const o=[[em,1,Uc],[em,5,5*Uc],[em,15,15*Uc],[em,30,30*Uc],[i,1,Ul],[i,5,5*Ul],[i,15,15*Ul],[i,30,30*Ul],[n,1,Wc],[n,3,3*Wc],[n,6,6*Wc],[n,12,12*Wc],[s,1,td],[s,2,2*td],[r,1,O5],[a,1,zC],[a,3,3*zC],[t,1,Q1]];function c(m,h,p){const y=h<m;y&&([m,h]=[h,m]);const g=p&&typeof p.range=="function"?p:u(m,h,p),v=g?g.range(m,+h+1):[];return y?v.reverse():v}function u(m,h,p){const y=Math.abs(h-m)/p,g=v5(([,,w])=>w).right(o,y);if(g===o.length)return t.every(Yj(m/Q1,h/Q1,p));if(g===0)return Bg.every(Math.max(Yj(m,h,p),1));const[v,N]=o[y/o[g-1][2]<o[g][2]/y?g-1:g];return v.every(N)}return[c,u]}const[uX,mX]=BT(rd,$5,Wy,$T,I5,M5),[hX,xX]=BT(ad,z5,Uy,np,R5,L5);function e2(t){if(0<=t.y&&t.y<100){var a=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return a.setFullYear(t.y),a}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function t2(t){if(0<=t.y&&t.y<100){var a=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return a.setUTCFullYear(t.y),a}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function sf(t,a,r){return{y:t,m:a,d:r,H:0,M:0,S:0,L:0}}function fX(t){var a=t.dateTime,r=t.date,s=t.time,n=t.periods,i=t.days,o=t.shortDays,c=t.months,u=t.shortMonths,m=nf(n),h=lf(n),p=nf(i),y=lf(i),g=nf(o),v=lf(o),N=nf(c),w=lf(c),j=nf(u),T=lf(u),k={a:J,A:W,b:X,B:te,c:null,d:WC,e:WC,f:zX,g:VX,G:XX,H:MX,I:RX,j:IX,L:FT,m:$X,M:BX,p:oe,q,Q:GC,s:VC,S:FX,u:qX,U:UX,V:WX,w:HX,W:YX,x:null,X:null,y:GX,Y:KX,Z:JX,"%":YC},R={a:G,A:z,b:Z,B:Q,c:null,d:HC,e:HC,f:tJ,g:uJ,G:hJ,H:ZX,I:QX,j:eJ,L:UT,m:aJ,M:rJ,p:fe,q:he,Q:GC,s:VC,S:sJ,u:nJ,U:iJ,V:lJ,w:oJ,W:cJ,x:null,X:null,y:dJ,Y:mJ,Z:xJ,"%":YC},P={a:B,A:D,b:C,B:L,c:H,d:qC,e:qC,f:PX,g:FC,G:BC,H:UC,I:UC,j:kX,L:TX,m:CX,M:AX,p:_,q:_X,Q:OX,s:LX,S:EX,u:vX,U:jX,V:NX,w:bX,W:wX,x:V,X:Y,y:FC,Y:BC,Z:SX,"%":DX};k.x=$(r,k),k.X=$(s,k),k.c=$(a,k),R.x=$(r,R),R.X=$(s,R),R.c=$(a,R);function $(ne,me){return function(pe){var ie=[],ke=-1,Ae=0,ae=ne.length,Ne,ce,De;for(pe instanceof Date||(pe=new Date(+pe));++ke<ae;)ne.charCodeAt(ke)===37&&(ie.push(ne.slice(Ae,ke)),(ce=$C[Ne=ne.charAt(++ke)])!=null?Ne=ne.charAt(++ke):ce=Ne==="e"?" ":"0",(De=me[Ne])&&(Ne=De(pe,ce)),ie.push(Ne),Ae=ke+1);return ie.push(ne.slice(Ae,ke)),ie.join("")}}function A(ne,me){return function(pe){var ie=sf(1900,void 0,1),ke=M(ie,ne,pe+="",0),Ae,ae;if(ke!=pe.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(me&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(Ae=t2(sf(ie.y,0,1)),ae=Ae.getUTCDay(),Ae=ae>4||ae===0?qg.ceil(Ae):qg(Ae),Ae=qy.offset(Ae,(ie.V-1)*7),ie.y=Ae.getUTCFullYear(),ie.m=Ae.getUTCMonth(),ie.d=Ae.getUTCDate()+(ie.w+6)%7):(Ae=e2(sf(ie.y,0,1)),ae=Ae.getDay(),Ae=ae>4||ae===0?Fg.ceil(Ae):Fg(Ae),Ae=np.offset(Ae,(ie.V-1)*7),ie.y=Ae.getFullYear(),ie.m=Ae.getMonth(),ie.d=Ae.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),ae="Z"in ie?t2(sf(ie.y,0,1)).getUTCDay():e2(sf(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(ae+5)%7:ie.w+ie.U*7-(ae+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,t2(ie)):e2(ie)}}function M(ne,me,pe,ie){for(var ke=0,Ae=me.length,ae=pe.length,Ne,ce;ke<Ae;){if(ie>=ae)return-1;if(Ne=me.charCodeAt(ke++),Ne===37){if(Ne=me.charAt(ke++),ce=P[Ne in $C?me.charAt(ke++):Ne],!ce||(ie=ce(ne,pe,ie))<0)return-1}else if(Ne!=pe.charCodeAt(ie++))return-1}return ie}function _(ne,me,pe){var ie=m.exec(me.slice(pe));return ie?(ne.p=h.get(ie[0].toLowerCase()),pe+ie[0].length):-1}function B(ne,me,pe){var ie=g.exec(me.slice(pe));return ie?(ne.w=v.get(ie[0].toLowerCase()),pe+ie[0].length):-1}function D(ne,me,pe){var ie=p.exec(me.slice(pe));return ie?(ne.w=y.get(ie[0].toLowerCase()),pe+ie[0].length):-1}function C(ne,me,pe){var ie=j.exec(me.slice(pe));return ie?(ne.m=T.get(ie[0].toLowerCase()),pe+ie[0].length):-1}function L(ne,me,pe){var ie=N.exec(me.slice(pe));return ie?(ne.m=w.get(ie[0].toLowerCase()),pe+ie[0].length):-1}function H(ne,me,pe){return M(ne,a,me,pe)}function V(ne,me,pe){return M(ne,r,me,pe)}function Y(ne,me,pe){return M(ne,s,me,pe)}function J(ne){return o[ne.getDay()]}function W(ne){return i[ne.getDay()]}function X(ne){return u[ne.getMonth()]}function te(ne){return c[ne.getMonth()]}function oe(ne){return n[+(ne.getHours()>=12)]}function q(ne){return 1+~~(ne.getMonth()/3)}function G(ne){return o[ne.getUTCDay()]}function z(ne){return i[ne.getUTCDay()]}function Z(ne){return u[ne.getUTCMonth()]}function Q(ne){return c[ne.getUTCMonth()]}function fe(ne){return n[+(ne.getUTCHours()>=12)]}function he(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var me=$(ne+="",k);return me.toString=function(){return ne},me},parse:function(ne){var me=A(ne+="",!1);return me.toString=function(){return ne},me},utcFormat:function(ne){var me=$(ne+="",R);return me.toString=function(){return ne},me},utcParse:function(ne){var me=A(ne+="",!0);return me.toString=function(){return ne},me}}}var $C={"-":"",_:" ",0:"0"},mn=/^\s*\d+/,pX=/^%/,gX=/[\\^$*+?|[\]().{}]/g;function sr(t,a,r){var s=t<0?"-":"",n=(s?-t:t)+"",i=n.length;return s+(i<r?new Array(r-i+1).join(a)+n:n)}function yX(t){return t.replace(gX,"\\$&")}function nf(t){return new RegExp("^(?:"+t.map(yX).join("|")+")","i")}function lf(t){return new Map(t.map((a,r)=>[a.toLowerCase(),r]))}function bX(t,a,r){var s=mn.exec(a.slice(r,r+1));return s?(t.w=+s[0],r+s[0].length):-1}function vX(t,a,r){var s=mn.exec(a.slice(r,r+1));return s?(t.u=+s[0],r+s[0].length):-1}function jX(t,a,r){var s=mn.exec(a.slice(r,r+2));return s?(t.U=+s[0],r+s[0].length):-1}function NX(t,a,r){var s=mn.exec(a.slice(r,r+2));return s?(t.V=+s[0],r+s[0].length):-1}function wX(t,a,r){var s=mn.exec(a.slice(r,r+2));return s?(t.W=+s[0],r+s[0].length):-1}function BC(t,a,r){var s=mn.exec(a.slice(r,r+4));return s?(t.y=+s[0],r+s[0].length):-1}function FC(t,a,r){var s=mn.exec(a.slice(r,r+2));return s?(t.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function SX(t,a,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(a.slice(r,r+6));return s?(t.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function _X(t,a,r){var s=mn.exec(a.slice(r,r+1));return s?(t.q=s[0]*3-3,r+s[0].length):-1}function CX(t,a,r){var s=mn.exec(a.slice(r,r+2));return s?(t.m=s[0]-1,r+s[0].length):-1}function qC(t,a,r){var s=mn.exec(a.slice(r,r+2));return s?(t.d=+s[0],r+s[0].length):-1}function kX(t,a,r){var s=mn.exec(a.slice(r,r+3));return s?(t.m=0,t.d=+s[0],r+s[0].length):-1}function UC(t,a,r){var s=mn.exec(a.slice(r,r+2));return s?(t.H=+s[0],r+s[0].length):-1}function AX(t,a,r){var s=mn.exec(a.slice(r,r+2));return s?(t.M=+s[0],r+s[0].length):-1}function EX(t,a,r){var s=mn.exec(a.slice(r,r+2));return s?(t.S=+s[0],r+s[0].length):-1}function TX(t,a,r){var s=mn.exec(a.slice(r,r+3));return s?(t.L=+s[0],r+s[0].length):-1}function PX(t,a,r){var s=mn.exec(a.slice(r,r+6));return s?(t.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function DX(t,a,r){var s=pX.exec(a.slice(r,r+1));return s?r+s[0].length:-1}function OX(t,a,r){var s=mn.exec(a.slice(r));return s?(t.Q=+s[0],r+s[0].length):-1}function LX(t,a,r){var s=mn.exec(a.slice(r));return s?(t.s=+s[0],r+s[0].length):-1}function WC(t,a){return sr(t.getDate(),a,2)}function MX(t,a){return sr(t.getHours(),a,2)}function RX(t,a){return sr(t.getHours()%12||12,a,2)}function IX(t,a){return sr(1+np.count(ad(t),t),a,3)}function FT(t,a){return sr(t.getMilliseconds(),a,3)}function zX(t,a){return FT(t,a)+"000"}function $X(t,a){return sr(t.getMonth()+1,a,2)}function BX(t,a){return sr(t.getMinutes(),a,2)}function FX(t,a){return sr(t.getSeconds(),a,2)}function qX(t){var a=t.getDay();return a===0?7:a}function UX(t,a){return sr(Uy.count(ad(t)-1,t),a,2)}function qT(t){var a=t.getDay();return a>=4||a===0?$h(t):$h.ceil(t)}function WX(t,a){return t=qT(t),sr($h.count(ad(t),t)+(ad(t).getDay()===4),a,2)}function HX(t){return t.getDay()}function YX(t,a){return sr(Fg.count(ad(t)-1,t),a,2)}function GX(t,a){return sr(t.getFullYear()%100,a,2)}function VX(t,a){return t=qT(t),sr(t.getFullYear()%100,a,2)}function KX(t,a){return sr(t.getFullYear()%1e4,a,4)}function XX(t,a){var r=t.getDay();return t=r>=4||r===0?$h(t):$h.ceil(t),sr(t.getFullYear()%1e4,a,4)}function JX(t){var a=t.getTimezoneOffset();return(a>0?"-":(a*=-1,"+"))+sr(a/60|0,"0",2)+sr(a%60,"0",2)}function HC(t,a){return sr(t.getUTCDate(),a,2)}function ZX(t,a){return sr(t.getUTCHours(),a,2)}function QX(t,a){return sr(t.getUTCHours()%12||12,a,2)}function eJ(t,a){return sr(1+qy.count(rd(t),t),a,3)}function UT(t,a){return sr(t.getUTCMilliseconds(),a,3)}function tJ(t,a){return UT(t,a)+"000"}function aJ(t,a){return sr(t.getUTCMonth()+1,a,2)}function rJ(t,a){return sr(t.getUTCMinutes(),a,2)}function sJ(t,a){return sr(t.getUTCSeconds(),a,2)}function nJ(t){var a=t.getUTCDay();return a===0?7:a}function iJ(t,a){return sr(Wy.count(rd(t)-1,t),a,2)}function WT(t){var a=t.getUTCDay();return a>=4||a===0?Bh(t):Bh.ceil(t)}function lJ(t,a){return t=WT(t),sr(Bh.count(rd(t),t)+(rd(t).getUTCDay()===4),a,2)}function oJ(t){return t.getUTCDay()}function cJ(t,a){return sr(qg.count(rd(t)-1,t),a,2)}function dJ(t,a){return sr(t.getUTCFullYear()%100,a,2)}function uJ(t,a){return t=WT(t),sr(t.getUTCFullYear()%100,a,2)}function mJ(t,a){return sr(t.getUTCFullYear()%1e4,a,4)}function hJ(t,a){var r=t.getUTCDay();return t=r>=4||r===0?Bh(t):Bh.ceil(t),sr(t.getUTCFullYear()%1e4,a,4)}function xJ(){return"+0000"}function YC(){return"%"}function GC(t){return+t}function VC(t){return Math.floor(+t/1e3)}var ch,HT,YT;fJ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fJ(t){return ch=fX(t),HT=ch.format,ch.parse,YT=ch.utcFormat,ch.utcParse,ch}function pJ(t){return new Date(t)}function gJ(t){return t instanceof Date?+t:+new Date(+t)}function B5(t,a,r,s,n,i,o,c,u,m){var h=C5(),p=h.invert,y=h.domain,g=m(".%L"),v=m(":%S"),N=m("%I:%M"),w=m("%I %p"),j=m("%a %d"),T=m("%b %d"),k=m("%B"),R=m("%Y");function P($){return(u($)<$?g:c($)<$?v:o($)<$?N:i($)<$?w:s($)<$?n($)<$?j:T:r($)<$?k:R)($)}return h.invert=function($){return new Date(p($))},h.domain=function($){return arguments.length?y(Array.from($,gJ)):y().map(pJ)},h.ticks=function($){var A=y();return t(A[0],A[A.length-1],$??10)},h.tickFormat=function($,A){return A==null?P:m(A)},h.nice=function($){var A=y();return(!$||typeof $.range!="function")&&($=a(A[0],A[A.length-1],$??10)),$?y(DT(A,$)):h},h.copy=function(){return sp(h,B5(t,a,r,s,n,i,o,c,u,m))},h}function yJ(){return Kl.apply(B5(hX,xX,ad,z5,Uy,np,R5,L5,em,HT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function bJ(){return Kl.apply(B5(uX,mX,rd,$5,Wy,qy,I5,M5,em,YT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Hy(){var t=0,a=1,r,s,n,i,o=xi,c=!1,u;function m(p){return p==null||isNaN(p=+p)?u:o(n===0?.5:(p=(i(p)-r)*n,c?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([t,a]=p,r=i(t=+t),s=i(a=+a),n=r===s?0:1/(s-r),m):[t,a]},m.clamp=function(p){return arguments.length?(c=!!p,m):c},m.interpolator=function(p){return arguments.length?(o=p,m):o};function h(p){return function(y){var g,v;return arguments.length?([g,v]=y,o=p(g,v),m):[o(0),o(1)]}}return m.range=h(Xh),m.rangeRound=h(_5),m.unknown=function(p){return arguments.length?(u=p,m):u},function(p){return i=p,r=p(t),s=p(a),n=r===s?0:1/(s-r),m}}function fu(t,a){return a.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function GT(){var t=xu(Hy()(xi));return t.copy=function(){return fu(t,GT())},od.apply(t,arguments)}function VT(){var t=E5(Hy()).domain([1,10]);return t.copy=function(){return fu(t,VT()).base(t.base())},od.apply(t,arguments)}function KT(){var t=T5(Hy());return t.copy=function(){return fu(t,KT()).constant(t.constant())},od.apply(t,arguments)}function F5(){var t=P5(Hy());return t.copy=function(){return fu(t,F5()).exponent(t.exponent())},od.apply(t,arguments)}function vJ(){return F5.apply(null,arguments).exponent(.5)}function XT(){var t=[],a=xi;function r(s){if(s!=null&&!isNaN(s=+s))return a((ap(t,s,1)-1)/(t.length-1))}return r.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let n of s)n!=null&&!isNaN(n=+n)&&t.push(n);return t.sort(tu),r},r.interpolator=function(s){return arguments.length?(a=s,r):a},r.range=function(){return t.map((s,n)=>a(n/(t.length-1)))},r.quantiles=function(s){return Array.from({length:s+1},(n,i)=>nK(t,i/s))},r.copy=function(){return XT(a).domain(t)},od.apply(r,arguments)}function Yy(){var t=0,a=.5,r=1,s=1,n,i,o,c,u,m=xi,h,p=!1,y;function g(N){return isNaN(N=+N)?y:(N=.5+((N=+h(N))-i)*(s*N<s*i?c:u),m(p?Math.max(0,Math.min(1,N)):N))}g.domain=function(N){return arguments.length?([t,a,r]=N,n=h(t=+t),i=h(a=+a),o=h(r=+r),c=n===i?0:.5/(i-n),u=i===o?0:.5/(o-i),s=i<n?-1:1,g):[t,a,r]},g.clamp=function(N){return arguments.length?(p=!!N,g):p},g.interpolator=function(N){return arguments.length?(m=N,g):m};function v(N){return function(w){var j,T,k;return arguments.length?([j,T,k]=w,m=DK(N,[j,T,k]),g):[m(0),m(.5),m(1)]}}return g.range=v(Xh),g.rangeRound=v(_5),g.unknown=function(N){return arguments.length?(y=N,g):y},function(N){return h=N,n=N(t),i=N(a),o=N(r),c=n===i?0:.5/(i-n),u=i===o?0:.5/(o-i),s=i<n?-1:1,g}}function JT(){var t=xu(Yy()(xi));return t.copy=function(){return fu(t,JT())},od.apply(t,arguments)}function ZT(){var t=E5(Yy()).domain([.1,1,10]);return t.copy=function(){return fu(t,ZT()).base(t.base())},od.apply(t,arguments)}function QT(){var t=T5(Yy());return t.copy=function(){return fu(t,QT()).constant(t.constant())},od.apply(t,arguments)}function q5(){var t=P5(Yy());return t.copy=function(){return fu(t,q5()).exponent(t.exponent())},od.apply(t,arguments)}function jJ(){return q5.apply(null,arguments).exponent(.5)}const hf=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:N5,scaleDiverging:JT,scaleDivergingLog:ZT,scaleDivergingPow:q5,scaleDivergingSqrt:jJ,scaleDivergingSymlog:QT,scaleIdentity:PT,scaleImplicit:Gj,scaleLinear:TT,scaleLog:OT,scaleOrdinal:j5,scalePoint:oK,scalePow:D5,scaleQuantile:RT,scaleQuantize:IT,scaleRadial:MT,scaleSequential:GT,scaleSequentialLog:VT,scaleSequentialPow:F5,scaleSequentialQuantile:XT,scaleSequentialSqrt:vJ,scaleSequentialSymlog:KT,scaleSqrt:tX,scaleSymlog:LT,scaleThreshold:zT,scaleTime:yJ,scaleUtc:bJ,tickFormat:ET},Symbol.toStringTag,{value:"Module"}));var pu=t=>t.chartData,U5=nt([pu],t=>{var a=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:a,dataStartIndex:0}}),ip=(t,a,r,s)=>s?U5(t):pu(t);function Fh(t){if(Array.isArray(t)&&t.length===2){var[a,r]=t;if(En(a)&&En(r))return!0}return!1}function KC(t,a,r){return r?t:[Math.min(t[0],a[0]),Math.max(t[1],a[1])]}function NJ(t,a){if(a&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,s]=t,n,i;if(En(r))n=r;else if(typeof r=="function")return;if(En(s))i=s;else if(typeof s=="function")return;var o=[n,i];if(Fh(o))return o}}function wJ(t,a,r){if(!(!r&&a==null)){if(typeof t=="function"&&a!=null)try{var s=t(a,r);if(Fh(s))return KC(s,a,r)}catch{}if(Array.isArray(t)&&t.length===2){var[n,i]=t,o,c;if(n==="auto")a!=null&&(o=Math.min(...a));else if(ta(n))o=n;else if(typeof n=="function")try{a!=null&&(o=n(a?.[0]))}catch{}else if(typeof n=="string"&&$_.test(n)){var u=$_.exec(n);if(u==null||a==null)o=void 0;else{var m=+u[1];o=a[0]-m}}else o=a?.[0];if(i==="auto")a!=null&&(c=Math.max(...a));else if(ta(i))c=i;else if(typeof i=="function")try{a!=null&&(c=i(a?.[1]))}catch{}else if(typeof i=="string"&&B_.test(i)){var h=B_.exec(i);if(h==null||a==null)c=void 0;else{var p=+h[1];c=a[1]+p}}else c=a?.[1];var y=[o,c];if(Fh(y))return a==null?y:KC(y,a,r)}}}var Jh=1e9,SJ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},H5,Xr=!0,Yl="[DecimalError] ",om=Yl+"Invalid argument: ",W5=Yl+"Exponent out of range: ",Zh=Math.floor,Gu=Math.pow,_J=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,rl,cn=1e7,zr=7,eP=9007199254740991,Ug=Zh(eP/zr),Vt={};Vt.absoluteValue=Vt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Vt.comparedTo=Vt.cmp=function(t){var a,r,s,n,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(s=i.d.length,n=t.d.length,a=0,r=s<n?s:n;a<r;++a)if(i.d[a]!==t.d[a])return i.d[a]>t.d[a]^i.s<0?1:-1;return s===n?0:s>n^i.s<0?1:-1};Vt.decimalPlaces=Vt.dp=function(){var t=this,a=t.d.length-1,r=(a-t.e)*zr;if(a=t.d[a],a)for(;a%10==0;a/=10)r--;return r<0?0:r};Vt.dividedBy=Vt.div=function(t){return Gc(this,new this.constructor(t))};Vt.dividedToIntegerBy=Vt.idiv=function(t){var a=this,r=a.constructor;return kr(Gc(a,new r(t),0,1),r.precision)};Vt.equals=Vt.eq=function(t){return!this.cmp(t)};Vt.exponent=function(){return qs(this)};Vt.greaterThan=Vt.gt=function(t){return this.cmp(t)>0};Vt.greaterThanOrEqualTo=Vt.gte=function(t){return this.cmp(t)>=0};Vt.isInteger=Vt.isint=function(){return this.e>this.d.length-2};Vt.isNegative=Vt.isneg=function(){return this.s<0};Vt.isPositive=Vt.ispos=function(){return this.s>0};Vt.isZero=function(){return this.s===0};Vt.lessThan=Vt.lt=function(t){return this.cmp(t)<0};Vt.lessThanOrEqualTo=Vt.lte=function(t){return this.cmp(t)<1};Vt.logarithm=Vt.log=function(t){var a,r=this,s=r.constructor,n=s.precision,i=n+5;if(t===void 0)t=new s(10);else if(t=new s(t),t.s<1||t.eq(rl))throw Error(Yl+"NaN");if(r.s<1)throw Error(Yl+(r.s?"NaN":"-Infinity"));return r.eq(rl)?new s(0):(Xr=!1,a=Gc(zf(r,i),zf(t,i),i),Xr=!0,kr(a,n))};Vt.minus=Vt.sub=function(t){var a=this;return t=new a.constructor(t),a.s==t.s?rP(a,t):tP(a,(t.s=-t.s,t))};Vt.modulo=Vt.mod=function(t){var a,r=this,s=r.constructor,n=s.precision;if(t=new s(t),!t.s)throw Error(Yl+"NaN");return r.s?(Xr=!1,a=Gc(r,t,0,1).times(t),Xr=!0,r.minus(a)):kr(new s(r),n)};Vt.naturalExponential=Vt.exp=function(){return aP(this)};Vt.naturalLogarithm=Vt.ln=function(){return zf(this)};Vt.negated=Vt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Vt.plus=Vt.add=function(t){var a=this;return t=new a.constructor(t),a.s==t.s?tP(a,t):rP(a,(t.s=-t.s,t))};Vt.precision=Vt.sd=function(t){var a,r,s,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(om+t);if(a=qs(n)+1,s=n.d.length-1,r=s*zr+1,s=n.d[s],s){for(;s%10==0;s/=10)r--;for(s=n.d[0];s>=10;s/=10)r++}return t&&a>r?a:r};Vt.squareRoot=Vt.sqrt=function(){var t,a,r,s,n,i,o,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(Yl+"NaN")}for(t=qs(c),Xr=!1,n=Math.sqrt(+c),n==0||n==1/0?(a=tc(c.d),(a.length+t)%2==0&&(a+="0"),n=Math.sqrt(a),t=Zh((t+1)/2)-(t<0||t%2),n==1/0?a="5e"+t:(a=n.toExponential(),a=a.slice(0,a.indexOf("e")+1)+t),s=new u(a)):s=new u(n.toString()),r=u.precision,n=o=r+3;;)if(i=s,s=i.plus(Gc(c,i,o+2)).times(.5),tc(i.d).slice(0,o)===(a=tc(s.d)).slice(0,o)){if(a=a.slice(o-3,o+1),n==o&&a=="4999"){if(kr(i,r+1,0),i.times(i).eq(c)){s=i;break}}else if(a!="9999")break;o+=4}return Xr=!0,kr(s,r)};Vt.times=Vt.mul=function(t){var a,r,s,n,i,o,c,u,m,h=this,p=h.constructor,y=h.d,g=(t=new p(t)).d;if(!h.s||!t.s)return new p(0);for(t.s*=h.s,r=h.e+t.e,u=y.length,m=g.length,u<m&&(i=y,y=g,g=i,o=u,u=m,m=o),i=[],o=u+m,s=o;s--;)i.push(0);for(s=m;--s>=0;){for(a=0,n=u+s;n>s;)c=i[n]+g[s]*y[n-s-1]+a,i[n--]=c%cn|0,a=c/cn|0;i[n]=(i[n]+a)%cn|0}for(;!i[--o];)i.pop();return a?++r:i.shift(),t.d=i,t.e=r,Xr?kr(t,p.precision):t};Vt.toDecimalPlaces=Vt.todp=function(t,a){var r=this,s=r.constructor;return r=new s(r),t===void 0?r:(nc(t,0,Jh),a===void 0?a=s.rounding:nc(a,0,8),kr(r,t+qs(r)+1,a))};Vt.toExponential=function(t,a){var r,s=this,n=s.constructor;return t===void 0?r=jm(s,!0):(nc(t,0,Jh),a===void 0?a=n.rounding:nc(a,0,8),s=kr(new n(s),t+1,a),r=jm(s,!0,t+1)),r};Vt.toFixed=function(t,a){var r,s,n=this,i=n.constructor;return t===void 0?jm(n):(nc(t,0,Jh),a===void 0?a=i.rounding:nc(a,0,8),s=kr(new i(n),t+qs(n)+1,a),r=jm(s.abs(),!1,t+qs(s)+1),n.isneg()&&!n.isZero()?"-"+r:r)};Vt.toInteger=Vt.toint=function(){var t=this,a=t.constructor;return kr(new a(t),qs(t)+1,a.rounding)};Vt.toNumber=function(){return+this};Vt.toPower=Vt.pow=function(t){var a,r,s,n,i,o,c=this,u=c.constructor,m=12,h=+(t=new u(t));if(!t.s)return new u(rl);if(c=new u(c),!c.s){if(t.s<1)throw Error(Yl+"Infinity");return c}if(c.eq(rl))return c;if(s=u.precision,t.eq(rl))return kr(c,s);if(a=t.e,r=t.d.length-1,o=a>=r,i=c.s,o){if((r=h<0?-h:h)<=eP){for(n=new u(rl),a=Math.ceil(s/zr+4),Xr=!1;r%2&&(n=n.times(c),JC(n.d,a)),r=Zh(r/2),r!==0;)c=c.times(c),JC(c.d,a);return Xr=!0,t.s<0?new u(rl).div(n):kr(n,s)}}else if(i<0)throw Error(Yl+"NaN");return i=i<0&&t.d[Math.max(a,r)]&1?-1:1,c.s=1,Xr=!1,n=t.times(zf(c,s+m)),Xr=!0,n=aP(n),n.s=i,n};Vt.toPrecision=function(t,a){var r,s,n=this,i=n.constructor;return t===void 0?(r=qs(n),s=jm(n,r<=i.toExpNeg||r>=i.toExpPos)):(nc(t,1,Jh),a===void 0?a=i.rounding:nc(a,0,8),n=kr(new i(n),t,a),r=qs(n),s=jm(n,t<=r||r<=i.toExpNeg,t)),s};Vt.toSignificantDigits=Vt.tosd=function(t,a){var r=this,s=r.constructor;return t===void 0?(t=s.precision,a=s.rounding):(nc(t,1,Jh),a===void 0?a=s.rounding:nc(a,0,8)),kr(new s(r),t,a)};Vt.toString=Vt.valueOf=Vt.val=Vt.toJSON=Vt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,a=qs(t),r=t.constructor;return jm(t,a<=r.toExpNeg||a>=r.toExpPos)};function tP(t,a){var r,s,n,i,o,c,u,m,h=t.constructor,p=h.precision;if(!t.s||!a.s)return a.s||(a=new h(t)),Xr?kr(a,p):a;if(u=t.d,m=a.d,o=t.e,n=a.e,u=u.slice(),i=o-n,i){for(i<0?(s=u,i=-i,c=m.length):(s=m,n=o,c=u.length),o=Math.ceil(p/zr),c=o>c?o+1:c+1,i>c&&(i=c,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(c=u.length,i=m.length,c-i<0&&(i=c,s=m,m=u,u=s),r=0;i;)r=(u[--i]=u[i]+m[i]+r)/cn|0,u[i]%=cn;for(r&&(u.unshift(r),++n),c=u.length;u[--c]==0;)u.pop();return a.d=u,a.e=n,Xr?kr(a,p):a}function nc(t,a,r){if(t!==~~t||t<a||t>r)throw Error(om+t)}function tc(t){var a,r,s,n=t.length-1,i="",o=t[0];if(n>0){for(i+=o,a=1;a<n;a++)s=t[a]+"",r=zr-s.length,r&&(i+=Gd(r)),i+=s;o=t[a],s=o+"",r=zr-s.length,r&&(i+=Gd(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Gc=function(){function t(s,n){var i,o=0,c=s.length;for(s=s.slice();c--;)i=s[c]*n+o,s[c]=i%cn|0,o=i/cn|0;return o&&s.unshift(o),s}function a(s,n,i,o){var c,u;if(i!=o)u=i>o?1:-1;else for(c=u=0;c<i;c++)if(s[c]!=n[c]){u=s[c]>n[c]?1:-1;break}return u}function r(s,n,i){for(var o=0;i--;)s[i]-=o,o=s[i]<n[i]?1:0,s[i]=o*cn+s[i]-n[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,n,i,o){var c,u,m,h,p,y,g,v,N,w,j,T,k,R,P,$,A,M,_=s.constructor,B=s.s==n.s?1:-1,D=s.d,C=n.d;if(!s.s)return new _(s);if(!n.s)throw Error(Yl+"Division by zero");for(u=s.e-n.e,A=C.length,P=D.length,g=new _(B),v=g.d=[],m=0;C[m]==(D[m]||0);)++m;if(C[m]>(D[m]||0)&&--u,i==null?T=i=_.precision:o?T=i+(qs(s)-qs(n))+1:T=i,T<0)return new _(0);if(T=T/zr+2|0,m=0,A==1)for(h=0,C=C[0],T++;(m<P||h)&&T--;m++)k=h*cn+(D[m]||0),v[m]=k/C|0,h=k%C|0;else{for(h=cn/(C[0]+1)|0,h>1&&(C=t(C,h),D=t(D,h),A=C.length,P=D.length),R=A,N=D.slice(0,A),w=N.length;w<A;)N[w++]=0;M=C.slice(),M.unshift(0),$=C[0],C[1]>=cn/2&&++$;do h=0,c=a(C,N,A,w),c<0?(j=N[0],A!=w&&(j=j*cn+(N[1]||0)),h=j/$|0,h>1?(h>=cn&&(h=cn-1),p=t(C,h),y=p.length,w=N.length,c=a(p,N,y,w),c==1&&(h--,r(p,A<y?M:C,y))):(h==0&&(c=h=1),p=C.slice()),y=p.length,y<w&&p.unshift(0),r(N,p,w),c==-1&&(w=N.length,c=a(C,N,A,w),c<1&&(h++,r(N,A<w?M:C,w))),w=N.length):c===0&&(h++,N=[0]),v[m++]=h,c&&N[0]?N[w++]=D[R]||0:(N=[D[R]],w=1);while((R++<P||N[0]!==void 0)&&T--)}return v[0]||v.shift(),g.e=u,kr(g,o?i+qs(g)+1:i)}}();function aP(t,a){var r,s,n,i,o,c,u=0,m=0,h=t.constructor,p=h.precision;if(qs(t)>16)throw Error(W5+qs(t));if(!t.s)return new h(rl);for(Xr=!1,c=p,o=new h(.03125);t.abs().gte(.1);)t=t.times(o),m+=5;for(s=Math.log(Gu(2,m))/Math.LN10*2+5|0,c+=s,r=n=i=new h(rl),h.precision=c;;){if(n=kr(n.times(t),c),r=r.times(++u),o=i.plus(Gc(n,r,c)),tc(o.d).slice(0,c)===tc(i.d).slice(0,c)){for(;m--;)i=kr(i.times(i),c);return h.precision=p,a==null?(Xr=!0,kr(i,p)):i}i=o}}function qs(t){for(var a=t.e*zr,r=t.d[0];r>=10;r/=10)a++;return a}function a2(t,a,r){if(a>t.LN10.sd())throw Xr=!0,r&&(t.precision=r),Error(Yl+"LN10 precision limit exceeded");return kr(new t(t.LN10),a)}function Gd(t){for(var a="";t--;)a+="0";return a}function zf(t,a){var r,s,n,i,o,c,u,m,h,p=1,y=10,g=t,v=g.d,N=g.constructor,w=N.precision;if(g.s<1)throw Error(Yl+(g.s?"NaN":"-Infinity"));if(g.eq(rl))return new N(0);if(a==null?(Xr=!1,m=w):m=a,g.eq(10))return a==null&&(Xr=!0),a2(N,m);if(m+=y,N.precision=m,r=tc(v),s=r.charAt(0),i=qs(g),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&r.charAt(1)>3;)g=g.times(t),r=tc(g.d),s=r.charAt(0),p++;i=qs(g),s>1?(g=new N("0."+r),i++):g=new N(s+"."+r.slice(1))}else return u=a2(N,m+2,w).times(i+""),g=zf(new N(s+"."+r.slice(1)),m-y).plus(u),N.precision=w,a==null?(Xr=!0,kr(g,w)):g;for(c=o=g=Gc(g.minus(rl),g.plus(rl),m),h=kr(g.times(g),m),n=3;;){if(o=kr(o.times(h),m),u=c.plus(Gc(o,new N(n),m)),tc(u.d).slice(0,m)===tc(c.d).slice(0,m))return c=c.times(2),i!==0&&(c=c.plus(a2(N,m+2,w).times(i+""))),c=Gc(c,new N(p),m),N.precision=w,a==null?(Xr=!0,kr(c,w)):c;c=u,n+=2}}function XC(t,a){var r,s,n;for((r=a.indexOf("."))>-1&&(a=a.replace(".","")),(s=a.search(/e/i))>0?(r<0&&(r=s),r+=+a.slice(s+1),a=a.substring(0,s)):r<0&&(r=a.length),s=0;a.charCodeAt(s)===48;)++s;for(n=a.length;a.charCodeAt(n-1)===48;)--n;if(a=a.slice(s,n),a){if(n-=s,r=r-s-1,t.e=Zh(r/zr),t.d=[],s=(r+1)%zr,r<0&&(s+=zr),s<n){for(s&&t.d.push(+a.slice(0,s)),n-=zr;s<n;)t.d.push(+a.slice(s,s+=zr));a=a.slice(s),s=zr-a.length}else s-=n;for(;s--;)a+="0";if(t.d.push(+a),Xr&&(t.e>Ug||t.e<-Ug))throw Error(W5+r)}else t.s=0,t.e=0,t.d=[0];return t}function kr(t,a,r){var s,n,i,o,c,u,m,h,p=t.d;for(o=1,i=p[0];i>=10;i/=10)o++;if(s=a-o,s<0)s+=zr,n=a,m=p[h=0];else{if(h=Math.ceil((s+1)/zr),i=p.length,h>=i)return t;for(m=i=p[h],o=1;i>=10;i/=10)o++;s%=zr,n=s-zr+o}if(r!==void 0&&(i=Gu(10,o-n-1),c=m/i%10|0,u=a<0||p[h+1]!==void 0||m%i,u=r<4?(c||u)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||u||r==6&&(s>0?n>0?m/Gu(10,o-n):0:p[h-1])%10&1||r==(t.s<0?8:7))),a<1||!p[0])return u?(i=qs(t),p.length=1,a=a-i-1,p[0]=Gu(10,(zr-a%zr)%zr),t.e=Zh(-a/zr)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(s==0?(p.length=h,i=1,h--):(p.length=h+1,i=Gu(10,zr-s),p[h]=n>0?(m/Gu(10,o-n)%Gu(10,n)|0)*i:0),u)for(;;)if(h==0){(p[0]+=i)==cn&&(p[0]=1,++t.e);break}else{if(p[h]+=i,p[h]!=cn)break;p[h--]=0,i=1}for(s=p.length;p[--s]===0;)p.pop();if(Xr&&(t.e>Ug||t.e<-Ug))throw Error(W5+qs(t));return t}function rP(t,a){var r,s,n,i,o,c,u,m,h,p,y=t.constructor,g=y.precision;if(!t.s||!a.s)return a.s?a.s=-a.s:a=new y(t),Xr?kr(a,g):a;if(u=t.d,p=a.d,s=a.e,m=t.e,u=u.slice(),o=m-s,o){for(h=o<0,h?(r=u,o=-o,c=p.length):(r=p,s=m,c=u.length),n=Math.max(Math.ceil(g/zr),c)+2,o>n&&(o=n,r.length=1),r.reverse(),n=o;n--;)r.push(0);r.reverse()}else{for(n=u.length,c=p.length,h=n<c,h&&(c=n),n=0;n<c;n++)if(u[n]!=p[n]){h=u[n]<p[n];break}o=0}for(h&&(r=u,u=p,p=r,a.s=-a.s),c=u.length,n=p.length-c;n>0;--n)u[c++]=0;for(n=p.length;n>o;){if(u[--n]<p[n]){for(i=n;i&&u[--i]===0;)u[i]=cn-1;--u[i],u[n]+=cn}u[n]-=p[n]}for(;u[--c]===0;)u.pop();for(;u[0]===0;u.shift())--s;return u[0]?(a.d=u,a.e=s,Xr?kr(a,g):a):new y(0)}function jm(t,a,r){var s,n=qs(t),i=tc(t.d),o=i.length;return a?(r&&(s=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Gd(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(n<0?"e":"e+")+n):n<0?(i="0."+Gd(-n-1)+i,r&&(s=r-o)>0&&(i+=Gd(s))):n>=o?(i+=Gd(n+1-o),r&&(s=r-n-1)>0&&(i=i+"."+Gd(s))):((s=n+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),r&&(s=r-o)>0&&(n+1===o&&(i+="."),i+=Gd(s))),t.s<0?"-"+i:i}function JC(t,a){if(t.length>a)return t.length=a,!0}function sP(t){var a,r,s;function n(i){var o=this;if(!(o instanceof n))return new n(i);if(o.constructor=n,i instanceof n){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(om+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return XC(o,i.toString())}else if(typeof i!="string")throw Error(om+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,_J.test(i))XC(o,i);else throw Error(om+i)}if(n.prototype=Vt,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=sP,n.config=n.set=CJ,t===void 0&&(t={}),t)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],a=0;a<s.length;)t.hasOwnProperty(r=s[a++])||(t[r]=this[r]);return n.config(t),n}function CJ(t){if(!t||typeof t!="object")throw Error(Yl+"Object expected");var a,r,s,n=["precision",1,Jh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(a=0;a<n.length;a+=3)if((s=t[r=n[a]])!==void 0)if(Zh(s)===s&&s>=n[a+1]&&s<=n[a+2])this[r]=s;else throw Error(om+r+": "+s);if((s=t[r="LN10"])!==void 0)if(s==Math.LN10)this[r]=new this(s);else throw Error(om+r+": "+s);return this}var H5=sP(SJ);rl=new H5(1);const xr=H5;var kJ=t=>t,nP={},iP=t=>t===nP,ZC=t=>function a(){return arguments.length===0||arguments.length===1&&iP(arguments.length<=0?void 0:arguments[0])?a:t(...arguments)},lP=(t,a)=>t===1?a:ZC(function(){for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];var i=s.filter(o=>o!==nP).length;return i>=t?a(...s):lP(t-i,ZC(function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var m=s.map(h=>iP(h)?c.shift():h);return a(...m,...c)}))}),Gy=t=>lP(t.length,t),Jj=(t,a)=>{for(var r=[],s=t;s<a;++s)r[s-t]=s;return r},AJ=Gy((t,a)=>Array.isArray(a)?a.map(t):Object.keys(a).map(r=>a[r]).map(t)),EJ=function(){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];if(!r.length)return kJ;var n=r.reverse(),i=n[0],o=n.slice(1);return function(){return o.reduce((c,u)=>u(c),i(...arguments))}},Zj=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),oP=t=>{var a=null,r=null;return function(){for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return a&&n.every((o,c)=>{var u;return o===((u=a)===null||u===void 0?void 0:u[c])})||(a=n,r=t(...n)),r}};function cP(t){var a;return t===0?a=1:a=Math.floor(new xr(t).abs().log(10).toNumber())+1,a}function dP(t,a,r){for(var s=new xr(t),n=0,i=[];s.lt(a)&&n<1e5;)i.push(s.toNumber()),s=s.add(r),n++;return i}Gy((t,a,r)=>{var s=+t,n=+a;return s+r*(n-s)});Gy((t,a,r)=>{var s=a-+t;return s=s||1/0,(r-t)/s});Gy((t,a,r)=>{var s=a-+t;return s=s||1/0,Math.max(0,Math.min(1,(r-t)/s))});var uP=t=>{var[a,r]=t,[s,n]=[a,r];return a>r&&([s,n]=[r,a]),[s,n]},mP=(t,a,r)=>{if(t.lte(0))return new xr(0);var s=cP(t.toNumber()),n=new xr(10).pow(s),i=t.div(n),o=s!==1?.05:.1,c=new xr(Math.ceil(i.div(o).toNumber())).add(r).mul(o),u=c.mul(n);return a?new xr(u.toNumber()):new xr(Math.ceil(u.toNumber()))},TJ=(t,a,r)=>{var s=new xr(1),n=new xr(t);if(!n.isint()&&r){var i=Math.abs(t);i<1?(s=new xr(10).pow(cP(t)-1),n=new xr(Math.floor(n.div(s).toNumber())).mul(s)):i>1&&(n=new xr(Math.floor(t)))}else t===0?n=new xr(Math.floor((a-1)/2)):r||(n=new xr(Math.floor(t)));var o=Math.floor((a-1)/2),c=EJ(AJ(u=>n.add(new xr(u-o).mul(s)).toNumber()),Jj);return c(0,a)},hP=function(a,r,s,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-a)/(s-1)))return{step:new xr(0),tickMin:new xr(0),tickMax:new xr(0)};var o=mP(new xr(r).sub(a).div(s-1),n,i),c;a<=0&&r>=0?c=new xr(0):(c=new xr(a).add(r).div(2),c=c.sub(new xr(c).mod(o)));var u=Math.ceil(c.sub(a).div(o).toNumber()),m=Math.ceil(new xr(r).sub(c).div(o).toNumber()),h=u+m+1;return h>s?hP(a,r,s,n,i+1):(h<s&&(m=r>0?m+(s-h):m,u=r>0?u:u+(s-h)),{step:o,tickMin:c.sub(new xr(u).mul(o)),tickMax:c.add(new xr(m).mul(o))})};function PJ(t){var[a,r]=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(s,2),[o,c]=uP([a,r]);if(o===-1/0||c===1/0){var u=c===1/0?[o,...Jj(0,s-1).map(()=>1/0)]:[...Jj(0,s-1).map(()=>-1/0),c];return a>r?Zj(u):u}if(o===c)return TJ(o,s,n);var{step:m,tickMin:h,tickMax:p}=hP(o,c,i,n,0),y=dP(h,p.add(new xr(.1).mul(m)),m);return a>r?Zj(y):y}function DJ(t,a){var[r,s]=t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=uP([r,s]);if(i===-1/0||o===1/0)return[r,s];if(i===o)return[i];var c=Math.max(a,2),u=mP(new xr(o).sub(i).div(c-1),n,0),m=[...dP(new xr(i),new xr(o),u),o];return n===!1&&(m=m.map(h=>Math.round(h))),r>s?Zj(m):m}var OJ=oP(PJ),LJ=oP(DJ),xP=t=>t.rootProps.maxBarSize,MJ=t=>t.rootProps.barGap,fP=t=>t.rootProps.barCategoryGap,RJ=t=>t.rootProps.barSize,lp=t=>t.rootProps.stackOffset,Y5=t=>t.options.chartName,G5=t=>t.rootProps.syncId,pP=t=>t.rootProps.syncMethod,V5=t=>t.options.eventEmitter,Fc={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},el={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Vy=(t,a)=>{if(!(!t||!a))return t!=null&&t.reversed?[a[1],a[0]]:a},IJ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Fc.angleAxisId,includeHidden:!1,name:void 0,reversed:Fc.reversed,scale:Fc.scale,tick:Fc.tick,tickCount:void 0,ticks:void 0,type:Fc.type,unit:void 0},zJ={allowDataOverflow:el.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:el.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:el.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:el.scale,tick:el.tick,tickCount:el.tickCount,ticks:void 0,type:el.type,unit:void 0},$J={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Fc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fc.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Fc.scale,tick:Fc.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},BJ={allowDataOverflow:el.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:el.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:el.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:el.scale,tick:el.tick,tickCount:el.tickCount,ticks:void 0,type:"category",unit:void 0},K5=(t,a)=>t.polarAxis.angleAxis[a]!=null?t.polarAxis.angleAxis[a]:t.layout.layoutType==="radial"?$J:IJ,X5=(t,a)=>t.polarAxis.radiusAxis[a]!=null?t.polarAxis.radiusAxis[a]:t.layout.layoutType==="radial"?BJ:zJ,Ky=t=>t.polarOptions,J5=nt([id,ld,Zs],Z9),gP=nt([Ky,J5],(t,a)=>{if(t!=null)return Yn(t.innerRadius,a,0)}),yP=nt([Ky,J5],(t,a)=>{if(t!=null)return Yn(t.outerRadius,a,a*.8)}),FJ=t=>{if(t==null)return[0,0];var{startAngle:a,endAngle:r}=t;return[a,r]},bP=nt([Ky],FJ);nt([K5,bP],Vy);var vP=nt([J5,gP,yP],(t,a,r)=>{if(!(t==null||a==null||r==null))return[a,r]});nt([X5,vP],Vy);var jP=nt([Ua,Ky,gP,yP,id,ld],(t,a,r,s,n,i)=>{if(!(t!=="centric"&&t!=="radial"||a==null||r==null||s==null)){var{cx:o,cy:c,startAngle:u,endAngle:m}=a;return{cx:Yn(o,n,n/2),cy:Yn(c,i,i/2),innerRadius:r,outerRadius:s,startAngle:u,endAngle:m,clockWise:!1}}}),Jr=(t,a)=>a,op=(t,a,r)=>r;function Xy(t){return t?.id}var en=t=>{var a=Ua(t);return a==="horizontal"?"xAxis":a==="vertical"?"yAxis":a==="centric"?"angleAxis":"radiusAxis"},Qh=t=>t.tooltip.settings.axisId,hn=t=>{var a=en(t),r=Qh(t);return cp(t,a,r)},NP=nt([hn],t=>t?.dataKey);function wP(t,a,r){var{chartData:s=[]}=a,{allowDuplicatedCategory:n,dataKey:i}=r,o=new Map;return t.forEach(c=>{var u,m=(u=c.data)!==null&&u!==void 0?u:s;if(!(m==null||m.length===0)){var h=Xy(c);m.forEach((p,y)=>{var g=i==null||n?y:String(pr(p,i,null)),v=pr(p,c.dataKey,0),N;o.has(g)?N=o.get(g):N={},Object.assign(N,{[h]:v}),o.set(g,N)})}}),Array.from(o.values())}function Jy(t){return t.stackId!=null&&t.dataKey!=null}function QC(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Wg(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?QC(Object(r),!0).forEach(function(s){qJ(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QC(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function qJ(t,a,r){return(a=UJ(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function UJ(t){var a=WJ(t,"string");return typeof a=="symbol"?a:a+""}function WJ(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var Qj=[0,"auto"],Zi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},SP=(t,a)=>t.cartesianAxis.xAxis[a],gu=(t,a)=>{var r=SP(t,a);return r??Zi},Qi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Qj,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ep},_P=(t,a)=>t.cartesianAxis.yAxis[a],yu=(t,a)=>{var r=_P(t,a);return r??Qi},HJ={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Z5=(t,a)=>{var r=t.cartesianAxis.zAxis[a];return r??HJ},Ts=(t,a,r)=>{switch(a){case"xAxis":return gu(t,r);case"yAxis":return yu(t,r);case"zAxis":return Z5(t,r);case"angleAxis":return K5(t,r);case"radiusAxis":return X5(t,r);default:throw new Error("Unexpected axis type: ".concat(a))}},YJ=(t,a,r)=>{switch(a){case"xAxis":return gu(t,r);case"yAxis":return yu(t,r);default:throw new Error("Unexpected axis type: ".concat(a))}},cp=(t,a,r)=>{switch(a){case"xAxis":return gu(t,r);case"yAxis":return yu(t,r);case"angleAxis":return K5(t,r);case"radiusAxis":return X5(t,r);default:throw new Error("Unexpected axis type: ".concat(a))}},CP=t=>t.graphicalItems.cartesianItems.some(a=>a.type==="bar")||t.graphicalItems.polarItems.some(a=>a.type==="radialBar");function Q5(t,a){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===a;case"yAxis":return"yAxisId"in r&&r.yAxisId===a;case"zAxis":return"zAxisId"in r&&r.zAxisId===a;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===a;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===a;default:return!1}}}var dp=t=>t.graphicalItems.cartesianItems,GJ=nt([Jr,op],Q5),e3=(t,a,r)=>t.filter(r).filter(s=>a?.includeHidden===!0?!0:!s.hide),up=nt([dp,Ts,GJ],e3),kP=nt([up],t=>t.filter(a=>a.type==="area"||a.type==="bar").filter(Jy)),AP=t=>t.filter(a=>!("stackId"in a)||a.stackId===void 0),EP=nt([up],AP),t3=t=>t.map(a=>a.data).filter(Boolean).flat(1),VJ=nt([up],t3),a3=(t,a)=>{var{chartData:r=[],dataStartIndex:s,dataEndIndex:n}=a;return t.length>0?t:r.slice(s,n+1)},r3=nt([VJ,ip],a3),s3=(t,a,r)=>a?.dataKey!=null?t.map(s=>({value:pr(s,a.dataKey)})):r.length>0?r.map(s=>s.dataKey).flatMap(s=>t.map(n=>({value:pr(n,s)}))):t.map(s=>({value:s})),Zy=nt([r3,Ts,up],s3);function TP(t,a){switch(t){case"xAxis":return a.direction==="x";case"yAxis":return a.direction==="y";default:return!1}}function km(t){return t.filter(a=>sc(a)||a instanceof Date).map(Number).filter(a=>Ii(a)===!1)}function KJ(t,a,r){return!r||typeof a!="number"||Ii(a)?[]:r.length?km(r.flatMap(s=>{var n=pr(t,s.dataKey),i,o;if(Array.isArray(n)?[i,o]=n:i=o=n,!(!En(i)||!En(o)))return[a-i,a+o]})):[]}var XJ=nt([kP,ip,hn],wP),PP=(t,a,r)=>{var s={},n=a.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),s);return Object.fromEntries(Object.entries(n).map(i=>{var[o,c]=i,u=c.map(Xy);return[o,{stackedData:tG(t,u,r),graphicalItems:c}]}))},$f=nt([XJ,kP,lp],PP),DP=(t,a,r)=>{var{dataStartIndex:s,dataEndIndex:n}=a;if(r!=="zAxis"){var i=nG(t,s,n);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},JJ=nt([$f,pu,Jr],DP),OP=(t,a,r,s,n)=>r.length>0?t.flatMap(i=>r.flatMap(o=>{var c,u,m=(c=s[o.id])===null||c===void 0?void 0:c.filter(p=>TP(n,p)),h=pr(i,(u=a.dataKey)!==null&&u!==void 0?u:o.dataKey);return{value:h,errorDomain:KJ(i,h,m)}})).filter(Boolean):a?.dataKey!=null?t.map(i=>({value:pr(i,a.dataKey),errorDomain:[]})):t.map(i=>({value:i,errorDomain:[]})),Qy=t=>t.errorBars,LP=(t,a,r)=>t.flatMap(s=>a[s.id]).filter(Boolean).filter(s=>TP(r,s));nt([EP,Qy,Jr],LP);var ZJ=nt([r3,Ts,EP,Qy,Jr],OP);function QJ(t){var{value:a}=t;if(sc(a)||a instanceof Date)return a}var e8=t=>{var a=t.flatMap(s=>[s.value,s.errorDomain]).flat(1),r=km(a);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},eZ=(t,a,r)=>{var s=t.map(QJ).filter(n=>n!=null);return r&&(a.dataKey==null||a.allowDuplicatedCategory&&YE(s))?bT(0,t.length):a.allowDuplicatedCategory?s:Array.from(new Set(s))},n3=t=>{var a;if(t==null||!("domain"in t))return Qj;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var r=km(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(a=t?.domain)!==null&&a!==void 0?a:Qj},Hg=function(){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];var n=r.filter(Boolean);if(n.length!==0){var i=n.flat(),o=Math.min(...i),c=Math.max(...i);return[o,c]}},MP=t=>t.referenceElements.dots,ex=(t,a,r)=>t.filter(s=>s.ifOverflow==="extendDomain").filter(s=>a==="xAxis"?s.xAxisId===r:s.yAxisId===r),tZ=nt([MP,Jr,op],ex),RP=t=>t.referenceElements.areas,aZ=nt([RP,Jr,op],ex),IP=t=>t.referenceElements.lines,rZ=nt([IP,Jr,op],ex),zP=(t,a)=>{var r=km(t.map(s=>a==="xAxis"?s.x:s.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},sZ=nt(tZ,Jr,zP),$P=(t,a)=>{var r=km(t.flatMap(s=>[a==="xAxis"?s.x1:s.y1,a==="xAxis"?s.x2:s.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},nZ=nt([aZ,Jr],$P),BP=(t,a)=>{var r=km(t.map(s=>a==="xAxis"?s.x:s.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},iZ=nt(rZ,Jr,BP),lZ=nt(sZ,iZ,nZ,(t,a,r)=>Hg(t,r,a)),FP=nt([Ts],n3),i3=(t,a,r,s,n,i,o)=>{var c=NJ(a,t.allowDataOverflow);if(c!=null)return c;var u=i==="vertical"&&o==="xAxis"||i==="horizontal"&&o==="yAxis",m=u?Hg(r,n,e8(s)):Hg(n,e8(s));return wJ(a,m,t.allowDataOverflow)},oZ=nt([Ts,FP,JJ,ZJ,lZ,Ua,Jr],i3),cZ=[0,1],l3=(t,a,r,s,n,i,o)=>{if(!((t==null||r==null||r.length===0)&&o===void 0)){var{dataKey:c,type:u}=t,m=dc(a,i);return m&&c==null?bT(0,r.length):u==="category"?eZ(s,t,m):n==="expand"?cZ:o}},o3=nt([Ts,Ua,r3,Zy,lp,Jr,oZ],l3),qP=(t,a,r,s,n)=>{if(t!=null){var{scale:i,type:o}=t;if(i==="auto")return a==="radial"&&n==="radiusAxis"?"band":a==="radial"&&n==="angleAxis"?"linear":o==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var c="scale".concat(Xf(i));return c in hf?c:"point"}}},tx=nt([Ts,Ua,CP,Y5,Jr],qP);function dZ(t){if(t!=null){if(t in hf)return hf[t]();var a="scale".concat(Xf(t));if(a in hf)return hf[a]()}}function c3(t,a,r,s){if(!(r==null||s==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(s);var n=dZ(a);if(n!=null){var i=n.domain(r).range(s);return XY(i),i}}}var d3=(t,a,r)=>{var s=n3(a);if(!(r!=="auto"&&r!=="linear")){if(a!=null&&a.tickCount&&Array.isArray(s)&&(s[0]==="auto"||s[1]==="auto")&&Fh(t))return OJ(t,a.tickCount,a.allowDecimals);if(a!=null&&a.tickCount&&a.type==="number"&&Fh(t))return LJ(t,a.tickCount,a.allowDecimals)}},u3=nt([o3,cp,tx],d3),m3=(t,a,r,s)=>{if(s!=="angleAxis"&&t?.type==="number"&&Fh(a)&&Array.isArray(r)&&r.length>0){var n=a[0],i=r[0],o=a[1],c=r[r.length-1];return[Math.min(n,i),Math.max(o,c)]}return a},uZ=nt([Ts,o3,u3,Jr],m3),mZ=nt(Zy,Ts,(t,a)=>{if(!(!a||a.type!=="number")){var r=1/0,s=Array.from(km(t.map(c=>c.value))).sort((c,u)=>c-u);if(s.length<2)return 1/0;var n=s[s.length-1]-s[0];if(n===0)return 1/0;for(var i=0;i<s.length-1;i++){var o=s[i+1]-s[i];r=Math.min(r,o)}return r/n}}),UP=nt(mZ,Ua,fP,Zs,(t,a,r,s)=>s,(t,a,r,s,n)=>{if(!En(t))return 0;var i=a==="vertical"?s.height:s.width;if(n==="gap")return t*i/2;if(n==="no-gap"){var o=Yn(r,t*i),c=t*i/2;return c-o-(c-o)/i*o}return 0}),hZ=(t,a)=>{var r=gu(t,a);return r==null||typeof r.padding!="string"?0:UP(t,"xAxis",a,r.padding)},xZ=(t,a)=>{var r=yu(t,a);return r==null||typeof r.padding!="string"?0:UP(t,"yAxis",a,r.padding)},fZ=nt(gu,hZ,(t,a)=>{var r,s;if(t==null)return{left:0,right:0};var{padding:n}=t;return typeof n=="string"?{left:a,right:a}:{left:((r=n.left)!==null&&r!==void 0?r:0)+a,right:((s=n.right)!==null&&s!==void 0?s:0)+a}}),pZ=nt(yu,xZ,(t,a)=>{var r,s;if(t==null)return{top:0,bottom:0};var{padding:n}=t;return typeof n=="string"?{top:a,bottom:a}:{top:((r=n.top)!==null&&r!==void 0?r:0)+a,bottom:((s=n.bottom)!==null&&s!==void 0?s:0)+a}}),gZ=nt([Zs,fZ,$y,zy,(t,a,r)=>r],(t,a,r,s,n)=>{var{padding:i}=s;return n?[i.left,r.width-i.right]:[t.left+a.left,t.left+t.width-a.right]}),yZ=nt([Zs,Ua,pZ,$y,zy,(t,a,r)=>r],(t,a,r,s,n,i)=>{var{padding:o}=n;return i?[s.height-o.bottom,o.top]:a==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),mp=(t,a,r,s)=>{var n;switch(a){case"xAxis":return gZ(t,r,s);case"yAxis":return yZ(t,r,s);case"zAxis":return(n=Z5(t,r))===null||n===void 0?void 0:n.range;case"angleAxis":return bP(t);case"radiusAxis":return vP(t,r);default:return}},WP=nt([Ts,mp],Vy),ax=nt([Ts,tx,uZ,WP],c3);nt([up,Qy,Jr],LP);function HP(t,a){return t.id<a.id?-1:t.id>a.id?1:0}var eb=(t,a)=>a,tb=(t,a,r)=>r,bZ=nt(Ry,eb,tb,(t,a,r)=>t.filter(s=>s.orientation===a).filter(s=>s.mirror===r).sort(HP)),vZ=nt(Iy,eb,tb,(t,a,r)=>t.filter(s=>s.orientation===a).filter(s=>s.mirror===r).sort(HP)),YP=(t,a)=>({width:t.width,height:a.height}),jZ=(t,a)=>{var r=typeof a.width=="number"?a.width:ep;return{width:r,height:t.height}},GP=nt(Zs,gu,YP),NZ=(t,a,r)=>{switch(a){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},wZ=(t,a,r)=>{switch(a){case"left":return t.left;case"right":return r-t.right;default:return 0}},SZ=nt(ld,Zs,bZ,eb,tb,(t,a,r,s,n)=>{var i={},o;return r.forEach(c=>{var u=YP(a,c);o==null&&(o=NZ(a,s,t));var m=s==="top"&&!n||s==="bottom"&&n;i[c.id]=o-Number(m)*u.height,o+=(m?-1:1)*u.height}),i}),_Z=nt(id,Zs,vZ,eb,tb,(t,a,r,s,n)=>{var i={},o;return r.forEach(c=>{var u=jZ(a,c);o==null&&(o=wZ(a,s,t));var m=s==="left"&&!n||s==="right"&&n;i[c.id]=o-Number(m)*u.width,o+=(m?-1:1)*u.width}),i}),CZ=(t,a)=>{var r=Zs(t),s=gu(t,a);if(s!=null){var n=SZ(t,s.orientation,s.mirror),i=n[a];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},kZ=(t,a)=>{var r=Zs(t),s=yu(t,a);if(s!=null){var n=_Z(t,s.orientation,s.mirror),i=n[a];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},VP=nt(Zs,yu,(t,a)=>{var r=typeof a.width=="number"?a.width:ep;return{width:r,height:t.height}}),t8=(t,a,r)=>{switch(a){case"xAxis":return GP(t,r).width;case"yAxis":return VP(t,r).height;default:return}},KP=(t,a,r,s)=>{if(r!=null){var{allowDuplicatedCategory:n,type:i,dataKey:o}=r,c=dc(t,s),u=a.map(m=>m.value);if(o&&c&&i==="category"&&n&&YE(u))return u}},h3=nt([Ua,Zy,Ts,Jr],KP),XP=(t,a,r,s)=>{if(!(r==null||r.dataKey==null)){var{type:n,scale:i}=r,o=dc(t,s);if(o&&(n==="number"||i!=="auto"))return a.map(c=>c.value)}},x3=nt([Ua,Zy,cp,Jr],XP),a8=nt([Ua,YJ,tx,ax,h3,x3,mp,u3,Jr],(t,a,r,s,n,i,o,c,u)=>{if(a==null)return null;var m=dc(t,u);return{angle:a.angle,interval:a.interval,minTickGap:a.minTickGap,orientation:a.orientation,tick:a.tick,tickCount:a.tickCount,tickFormatter:a.tickFormatter,ticks:a.ticks,type:a.type,unit:a.unit,axisType:u,categoricalDomain:i,duplicateDomain:n,isCategorical:m,niceTicks:c,range:o,realScaleType:r,scale:s}}),AZ=(t,a,r,s,n,i,o,c,u)=>{if(!(a==null||s==null)){var m=dc(t,u),{type:h,ticks:p,tickCount:y}=a,g=r==="scaleBand"&&typeof s.bandwidth=="function"?s.bandwidth()/2:2,v=h==="category"&&s.bandwidth?s.bandwidth()/g:0;v=u==="angleAxis"&&i!=null&&i.length>=2?un(i[0]-i[1])*2*v:v;var N=p||n;if(N){var w=N.map((j,T)=>{var k=o?o.indexOf(j):j;return{index:T,coordinate:s(k)+v,value:j,offset:v}});return w.filter(j=>!Ii(j.coordinate))}return m&&c?c.map((j,T)=>({coordinate:s(j)+v,value:j,index:T,offset:v})):s.ticks?s.ticks(y).map(j=>({coordinate:s(j)+v,value:j,offset:v})):s.domain().map((j,T)=>({coordinate:s(j)+v,value:o?o[j]:j,index:T,offset:v}))}},JP=nt([Ua,cp,tx,ax,u3,mp,h3,x3,Jr],AZ),EZ=(t,a,r,s,n,i,o)=>{if(!(a==null||r==null||s==null||s[0]===s[1])){var c=dc(t,o),{tickCount:u}=a,m=0;return m=o==="angleAxis"&&s?.length>=2?un(s[0]-s[1])*2*m:m,c&&i?i.map((h,p)=>({coordinate:r(h)+m,value:h,index:p,offset:m})):r.ticks?r.ticks(u).map(h=>({coordinate:r(h)+m,value:h,offset:m})):r.domain().map((h,p)=>({coordinate:r(h)+m,value:n?n[h]:h,index:p,offset:m}))}},ic=nt([Ua,cp,ax,mp,h3,x3,Jr],EZ),lc=nt(Ts,ax,(t,a)=>{if(!(t==null||a==null))return Wg(Wg({},t),{},{scale:a})}),TZ=nt([Ts,tx,o3,WP],c3);nt((t,a,r)=>Z5(t,r),TZ,(t,a)=>{if(!(t==null||a==null))return Wg(Wg({},t),{},{scale:a})});var PZ=nt([Ua,Ry,Iy],(t,a,r)=>{switch(t){case"horizontal":return a.some(s=>s.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(s=>s.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),ZP=t=>t.options.defaultTooltipEventType,QP=t=>t.options.validateTooltipEventTypes;function eD(t,a,r){if(t==null)return a;var s=t?"axis":"item";return r==null?a:r.includes(s)?s:a}function f3(t,a){var r=ZP(t),s=QP(t);return eD(a,r,s)}function DZ(t){return Qt(a=>f3(a,t))}var tD=(t,a)=>{var r,s=Number(a);if(!(Ii(s)||a==null))return s>=0?t==null||(r=t[s])===null||r===void 0?void 0:r.value:void 0},OZ=t=>t.tooltip.settings,Kd={active:!1,index:null,dataKey:void 0,coordinate:void 0},LZ={itemInteraction:{click:Kd,hover:Kd},axisInteraction:{click:Kd,hover:Kd},keyboardInteraction:Kd,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},aD=ol({name:"tooltip",initialState:LZ,reducers:{addTooltipEntrySettings(t,a){t.tooltipItemPayloads.push(a.payload)},removeTooltipEntrySettings(t,a){var r=Yc(t).tooltipItemPayloads.indexOf(a.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(t,a){t.settings=a.payload},setActiveMouseOverItemIndex(t,a){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=a.payload.activeIndex,t.itemInteraction.hover.dataKey=a.payload.activeDataKey,t.itemInteraction.hover.coordinate=a.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,a){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=a.payload.activeIndex,t.itemInteraction.click.dataKey=a.payload.activeDataKey,t.itemInteraction.click.coordinate=a.payload.activeCoordinate},setMouseOverAxisIndex(t,a){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=a.payload.activeIndex,t.axisInteraction.hover.dataKey=a.payload.activeDataKey,t.axisInteraction.hover.coordinate=a.payload.activeCoordinate},setMouseClickAxisIndex(t,a){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=a.payload.activeIndex,t.axisInteraction.click.dataKey=a.payload.activeDataKey,t.axisInteraction.click.coordinate=a.payload.activeCoordinate},setSyncInteraction(t,a){t.syncInteraction=a.payload},setKeyboardInteraction(t,a){t.keyboardInteraction.active=a.payload.active,t.keyboardInteraction.index=a.payload.activeIndex,t.keyboardInteraction.coordinate=a.payload.activeCoordinate,t.keyboardInteraction.dataKey=a.payload.activeDataKey}}}),{addTooltipEntrySettings:MZ,removeTooltipEntrySettings:RZ,setTooltipSettingsState:IZ,setActiveMouseOverItemIndex:rD,mouseLeaveItem:zZ,mouseLeaveChart:sD,setActiveClickItemIndex:$Z,setMouseOverAxisIndex:nD,setMouseClickAxisIndex:BZ,setSyncInteraction:eN,setKeyboardInteraction:tN}=aD.actions,FZ=aD.reducer;function r8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function O0(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?r8(Object(r),!0).forEach(function(s){qZ(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):r8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function qZ(t,a,r){return(a=UZ(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function UZ(t){var a=WZ(t,"string");return typeof a=="symbol"?a:a+""}function WZ(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function HZ(t,a,r){return a==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function YZ(t){return t.index!=null}var iD=(t,a,r,s)=>{if(a==null)return Kd;var n=HZ(t,a,r);if(n==null)return Kd;if(n.active)return n;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var i=t.settings.active===!0;if(YZ(n)){if(i)return O0(O0({},n),{},{active:!0})}else if(s!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:s};return O0(O0({},Kd),{},{coordinate:n.coordinate})},p3=(t,a)=>{var r=t?.index;if(r==null)return null;var s=Number(r);if(!En(s))return r;var n=0,i=1/0;return a.length>0&&(i=a.length-1),String(Math.max(n,Math.min(s,i)))},lD=(t,a,r,s,n,i,o,c)=>{if(!(i==null||c==null)){var u=o[0],m=u==null?void 0:c(u.positions,i);if(m!=null)return m;var h=n?.[Number(i)];if(h)switch(r){case"horizontal":return{x:h.coordinate,y:(s.top+a)/2};default:return{x:(s.left+t)/2,y:h.coordinate}}}},oD=(t,a,r,s)=>{if(a==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var n;return r==="hover"?n=t.itemInteraction.hover.dataKey:n=t.itemInteraction.click.dataKey,n==null&&s!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===n})},hp=t=>t.options.tooltipPayloadSearcher,rx=t=>t.tooltip;function s8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function n8(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?s8(Object(r),!0).forEach(function(s){GZ(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function GZ(t,a,r){return(a=VZ(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function VZ(t){var a=KZ(t,"string");return typeof a=="symbol"?a:a+""}function KZ(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function XZ(t,a){return t??a}var cD=(t,a,r,s,n,i,o)=>{if(!(a==null||i==null)){var{chartData:c,computedData:u,dataStartIndex:m,dataEndIndex:h}=r,p=[];return t.reduce((y,g)=>{var v,{dataDefinedOnItem:N,settings:w}=g,j=XZ(N,c),T=Array.isArray(j)?Q9(j,m,h):j,k=(v=w?.dataKey)!==null&&v!==void 0?v:s,R=w?.nameKey,P;if(s&&Array.isArray(T)&&!Array.isArray(T[0])&&o==="axis"?P=GE(T,s,n):P=i(T,a,u,R),Array.isArray(P))P.forEach(A=>{var M=n8(n8({},w),{},{name:A.name,unit:A.unit,color:void 0,fill:void 0});y.push(F_({tooltipEntrySettings:M,dataKey:A.dataKey,payload:A.payload,value:pr(A.payload,A.dataKey),name:A.name}))});else{var $;y.push(F_({tooltipEntrySettings:w,dataKey:k,payload:P,value:pr(P,k),name:($=pr(P,R))!==null&&$!==void 0?$:w?.name}))}return y},p)}},g3=nt([hn,Ua,CP,Y5,en],qP),JZ=nt([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,a)=>[...t,...a]),ZZ=nt([en,Qh],Q5),xp=nt([JZ,hn,ZZ],e3),QZ=nt([xp],t=>t.filter(Jy)),eQ=nt([xp],t3),sx=nt([eQ,pu],a3),tQ=nt([QZ,pu,hn],wP),y3=nt([sx,hn,xp],s3),aQ=nt([hn],n3),rQ=nt([xp],t=>t.filter(Jy)),sQ=nt([tQ,rQ,lp],PP),nQ=nt([sQ,pu,en],DP),iQ=nt([xp],AP),lQ=nt([sx,hn,iQ,Qy,en],OP),oQ=nt([MP,en,Qh],ex),cQ=nt([oQ,en],zP),dQ=nt([RP,en,Qh],ex),uQ=nt([dQ,en],$P),mQ=nt([IP,en,Qh],ex),hQ=nt([mQ,en],BP),xQ=nt([cQ,hQ,uQ],Hg),fQ=nt([hn,aQ,nQ,lQ,xQ,Ua,en],i3),dD=nt([hn,Ua,sx,y3,lp,en,fQ],l3),pQ=nt([dD,hn,g3],d3),gQ=nt([hn,dD,pQ,en],m3),uD=t=>{var a=en(t),r=Qh(t),s=!1;return mp(t,a,r,s)},mD=nt([hn,uD],Vy),hD=nt([hn,g3,gQ,mD],c3),yQ=nt([Ua,y3,hn,en],KP),bQ=nt([Ua,y3,hn,en],XP),vQ=(t,a,r,s,n,i,o,c)=>{if(a){var{type:u}=a,m=dc(t,c);if(s){var h=r==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,p=u==="category"&&s.bandwidth?s.bandwidth()/h:0;return p=c==="angleAxis"&&n!=null&&n?.length>=2?un(n[0]-n[1])*2*p:p,m&&o?o.map((y,g)=>({coordinate:s(y)+p,value:y,index:g,offset:p})):s.domain().map((y,g)=>({coordinate:s(y)+p,value:i?i[y]:y,index:g,offset:p}))}}},cd=nt([Ua,hn,g3,hD,uD,yQ,bQ,en],vQ),b3=nt([ZP,QP,OZ],(t,a,r)=>eD(r.shared,t,a)),xD=t=>t.tooltip.settings.trigger,v3=t=>t.tooltip.settings.defaultIndex,ab=nt([rx,b3,xD,v3],iD),ou=nt([ab,sx],p3),fD=nt([cd,ou],tD),pD=nt([ab],t=>{if(t)return t.dataKey}),gD=nt([rx,b3,xD,v3],oD),jQ=nt([id,ld,Ua,Zs,cd,v3,gD,hp],lD),NQ=nt([ab,jQ],(t,a)=>t!=null&&t.coordinate?t.coordinate:a),wQ=nt([ab],t=>t.active),SQ=nt([gD,ou,pu,NP,fD,hp,b3],cD),_Q=nt([SQ],t=>{if(t!=null){var a=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(a))}});function i8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function l8(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?i8(Object(r),!0).forEach(function(s){CQ(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function CQ(t,a,r){return(a=kQ(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function kQ(t){var a=AQ(t,"string");return typeof a=="symbol"?a:a+""}function AQ(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var EQ=()=>Qt(hn),TQ=()=>{var t=EQ(),a=Qt(cd),r=Qt(hD);return vm(l8(l8({},t),{},{scale:r}),a)},yD=()=>Qt(Y5),j3=(t,a)=>a,bD=(t,a,r)=>r,N3=(t,a,r,s)=>s,PQ=nt(cd,t=>Ty(t,a=>a.coordinate)),w3=nt([rx,j3,bD,N3],iD),vD=nt([w3,sx],p3),DQ=(t,a,r)=>{if(a!=null){var s=rx(t);return a==="axis"?r==="hover"?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:r==="hover"?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}},jD=nt([rx,j3,bD,N3],oD),Yg=nt([id,ld,Ua,Zs,cd,N3,jD,hp],lD),OQ=nt([w3,Yg],(t,a)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:a}),ND=nt(cd,vD,tD),LQ=nt([jD,vD,pu,NP,ND,hp,j3],cD),MQ=nt([w3],t=>({isActive:t.active,activeIndex:t.index})),RQ=(t,a,r,s,n,i,o,c)=>{if(!(!t||!a||!s||!n||!i)){var u=iG(t.chartX,t.chartY,a,r,c);if(u){var m=oG(u,a),h=VY(m,o,i,s,n),p=lG(a,i,h,u);return{activeIndex:String(h),activeCoordinate:p}}}};function aN(){return aN=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},aN.apply(null,arguments)}function o8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function L0(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?o8(Object(r),!0).forEach(function(s){IQ(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function IQ(t,a,r){return(a=zQ(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function zQ(t){var a=$Q(t,"string");return typeof a=="symbol"?a:a+""}function $Q(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function BQ(t){var{coordinate:a,payload:r,index:s,offset:n,tooltipAxisBandSize:i,layout:o,cursor:c,tooltipEventType:u,chartName:m}=t,h=a,p=r,y=s;if(!c||!h||m!=="ScatterChart"&&u!=="axis")return null;var g,v;if(m==="ScatterChart")g=h,v=oV;else if(m==="BarChart")g=cV(o,h,n,i),v=fT;else if(o==="radial"){var{cx:N,cy:w,radius:j,startAngle:T,endAngle:k}=pT(h);g={cx:N,cy:w,startAngle:T,endAngle:k,innerRadius:j,outerRadius:j},v=yT}else g={points:qV(o,h,n)},v=wh;var R=typeof c=="object"&&"className"in c?c.className:void 0,P=L0(L0(L0(L0({stroke:"#ccc",pointerEvents:"none"},n),g),Or(c,!1)),{},{payload:p,payloadIndex:y,className:Qa("recharts-tooltip-cursor",R)});return x.isValidElement(c)?x.cloneElement(c,P):x.createElement(v,P)}function FQ(t){var a=TQ(),r=iT(),s=tp(),n=yD();return x.createElement(BQ,aN({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:r,layout:s,tooltipAxisBandSize:a,chartName:n}))}var wD=x.createContext(null),qQ=()=>x.useContext(wD),r2={exports:{}},c8;function UQ(){return c8||(c8=1,function(t){var a=Object.prototype.hasOwnProperty,r="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1));function n(u,m,h){this.fn=u,this.context=m,this.once=h||!1}function i(u,m,h,p,y){if(typeof h!="function")throw new TypeError("The listener must be a function");var g=new n(h,p||u,y),v=r?r+m:m;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],g]:u._events[v].push(g):(u._events[v]=g,u._eventsCount++),u}function o(u,m){--u._eventsCount===0?u._events=new s:delete u._events[m]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var m=[],h,p;if(this._eventsCount===0)return m;for(p in h=this._events)a.call(h,p)&&m.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(h)):m},c.prototype.listeners=function(m){var h=r?r+m:m,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,g=p.length,v=new Array(g);y<g;y++)v[y]=p[y].fn;return v},c.prototype.listenerCount=function(m){var h=r?r+m:m,p=this._events[h];return p?p.fn?1:p.length:0},c.prototype.emit=function(m,h,p,y,g,v){var N=r?r+m:m;if(!this._events[N])return!1;var w=this._events[N],j=arguments.length,T,k;if(w.fn){switch(w.once&&this.removeListener(m,w.fn,void 0,!0),j){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,h),!0;case 3:return w.fn.call(w.context,h,p),!0;case 4:return w.fn.call(w.context,h,p,y),!0;case 5:return w.fn.call(w.context,h,p,y,g),!0;case 6:return w.fn.call(w.context,h,p,y,g,v),!0}for(k=1,T=new Array(j-1);k<j;k++)T[k-1]=arguments[k];w.fn.apply(w.context,T)}else{var R=w.length,P;for(k=0;k<R;k++)switch(w[k].once&&this.removeListener(m,w[k].fn,void 0,!0),j){case 1:w[k].fn.call(w[k].context);break;case 2:w[k].fn.call(w[k].context,h);break;case 3:w[k].fn.call(w[k].context,h,p);break;case 4:w[k].fn.call(w[k].context,h,p,y);break;default:if(!T)for(P=1,T=new Array(j-1);P<j;P++)T[P-1]=arguments[P];w[k].fn.apply(w[k].context,T)}}return!0},c.prototype.on=function(m,h,p){return i(this,m,h,p,!1)},c.prototype.once=function(m,h,p){return i(this,m,h,p,!0)},c.prototype.removeListener=function(m,h,p,y){var g=r?r+m:m;if(!this._events[g])return this;if(!h)return o(this,g),this;var v=this._events[g];if(v.fn)v.fn===h&&(!y||v.once)&&(!p||v.context===p)&&o(this,g);else{for(var N=0,w=[],j=v.length;N<j;N++)(v[N].fn!==h||y&&!v[N].once||p&&v[N].context!==p)&&w.push(v[N]);w.length?this._events[g]=w.length===1?w[0]:w:o(this,g)}return this},c.prototype.removeAllListeners=function(m){var h;return m?(h=r?r+m:m,this._events[h]&&o(this,h)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c}(r2)),r2.exports}var WQ=UQ();const HQ=oc(WQ);var Bf=new HQ,rN="recharts.syncEvent.tooltip",d8="recharts.syncEvent.brush";function rb(t,a){if(a){var r=Number.parseInt(a,10);if(!Ii(r))return t?.[r]}}var YQ={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},SD=ol({name:"options",initialState:YQ,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),GQ=SD.reducer,{createEventEmitter:VQ}=SD.actions;function KQ(t){return t.tooltip.syncInteraction}var XQ={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},_D=ol({name:"chartData",initialState:XQ,reducers:{setChartData(t,a){if(t.chartData=a.payload,a.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}a.payload.length>0&&t.dataEndIndex!==a.payload.length-1&&(t.dataEndIndex=a.payload.length-1)},setComputedData(t,a){t.computedData=a.payload},setDataStartEndIndexes(t,a){var{startIndex:r,endIndex:s}=a.payload;r!=null&&(t.dataStartIndex=r),s!=null&&(t.dataEndIndex=s)}}}),{setChartData:u8,setDataStartEndIndexes:JQ,setComputedData:Bme}=_D.actions,ZQ=_D.reducer,QQ=["x","y"];function m8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Wu(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?m8(Object(r),!0).forEach(function(s){eee(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function eee(t,a,r){return(a=tee(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function tee(t){var a=aee(t,"string");return typeof a=="symbol"?a:a+""}function aee(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function ree(t,a){if(t==null)return{};var r,s,n=see(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function see(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var CD=()=>{};function nee(){var t=Qt(G5),a=Qt(V5),r=is(),s=Qt(pP),n=Qt(cd),i=tp(),o=p5(),c=Qt(u=>u.rootProps.className);x.useEffect(()=>{if(t==null)return CD;var u=(m,h,p)=>{if(a!==p&&t===m){if(s==="index"){var y;if(o&&h!==null&&h!==void 0&&(y=h.payload)!==null&&y!==void 0&&y.coordinate){var g=h.payload.coordinate,{x:v,y:N}=g,w=ree(g,QQ),j=Wu(Wu(Wu({},w),typeof v=="number"&&{x:Math.max(o.x,Math.min(v,o.x+o.width))}),typeof N=="number"&&{y:Math.max(o.y,Math.min(N,o.y+o.height))}),T=Wu(Wu({},h),{},{payload:Wu(Wu({},h.payload),{},{coordinate:j})});r(T)}else r(h);return}if(n!=null){var k;if(typeof s=="function"){var R={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},P=s(n,R);k=n[P]}else s==="value"&&(k=n.find(L=>String(L.value)===h.payload.label));var{coordinate:$}=h.payload;if(k==null||h.payload.active===!1||$==null||o==null){r(eN({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:A,y:M}=$,_=Math.min(A,o.x+o.width),B=Math.min(M,o.y+o.height),D={x:i==="horizontal"?k.coordinate:_,y:i==="horizontal"?B:k.coordinate},C=eN({active:h.payload.active,coordinate:D,dataKey:h.payload.dataKey,index:String(k.index),label:h.payload.label});r(C)}}};return Bf.on(rN,u),()=>{Bf.off(rN,u)}},[c,r,a,t,s,n,i,o])}function iee(){var t=Qt(G5),a=Qt(V5),r=is();x.useEffect(()=>{if(t==null)return CD;var s=(n,i,o)=>{a!==o&&t===n&&r(JQ(i))};return Bf.on(d8,s),()=>{Bf.off(d8,s)}},[r,a,t])}function lee(){var t=is();x.useEffect(()=>{t(VQ())},[t]),nee(),iee()}function oee(t,a,r,s,n,i){var o=Qt(y=>DQ(y,t,a)),c=Qt(V5),u=Qt(G5),m=Qt(pP),h=Qt(KQ),p=h?.active;x.useEffect(()=>{if(!p&&u!=null&&c!=null){var y=eN({active:i,coordinate:r,dataKey:o,index:n,label:typeof s=="number"?String(s):s});Bf.emit(rN,u,y,c)}},[p,r,o,n,s,c,u,m,i])}function h8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function x8(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?h8(Object(r),!0).forEach(function(s){cee(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function cee(t,a,r){return(a=dee(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function dee(t){var a=uee(t,"string");return typeof a=="symbol"?a:a+""}function uee(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function mee(t){return t.dataKey}function hee(t,a){return x.isValidElement(t)?x.cloneElement(t,a):typeof t=="function"?x.createElement(t,a):x.createElement(BG,a)}var f8=[],xee={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!hu.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function $s(t){var a=Kn(t,xee),{active:r,allowEscapeViewBox:s,animationDuration:n,animationEasing:i,content:o,filterNull:c,isAnimationActive:u,offset:m,payloadUniqBy:h,position:p,reverseDirection:y,useTranslate3d:g,wrapperStyle:v,cursor:N,shared:w,trigger:j,defaultIndex:T,portal:k,axisId:R}=a,P=is(),$=typeof T=="number"?String(T):T;x.useEffect(()=>{P(IZ({shared:w,trigger:j,axisId:R,active:r,defaultIndex:$}))},[P,w,j,R,r,$]);var A=p5(),M=dT(),_=DZ(w),{activeIndex:B,isActive:D}=Qt(Z=>MQ(Z,_,j,$)),C=Qt(Z=>LQ(Z,_,j,$)),L=Qt(Z=>ND(Z,_,j,$)),H=Qt(Z=>OQ(Z,_,j,$)),V=C,Y=qQ(),J=r??D,[W,X]=k9([V,J]),te=_==="axis"?L:void 0;oee(_,j,H,te,B,J);var oe=k??Y;if(oe==null)return null;var q=V??f8;J||(q=f8),c&&q.length&&(q=N9(V.filter(Z=>Z.value!=null&&(Z.hide!==!0||a.includeHidden)),h,mee));var G=q.length>0,z=x.createElement(GG,{allowEscapeViewBox:s,animationDuration:n,animationEasing:i,isAnimationActive:u,active:J,coordinate:H,hasPayload:G,offset:m,position:p,reverseDirection:y,useTranslate3d:g,viewBox:A,wrapperStyle:v,lastBoundingBox:W,innerRef:X,hasPortalFromProps:!!k},hee(o,x8(x8({},a),{},{payload:q,label:te,active:J,coordinate:H,accessibilityLayer:M})));return x.createElement(x.Fragment,null,B7.createPortal(z,oe),J&&x.createElement(FQ,{cursor:N,tooltipEventType:_,coordinate:H,payload:V,index:B}))}var s2={},n2={},i2={},p8;function fee(){return p8||(p8=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r,s,{signal:n,edges:i}={}){let o,c=null;const u=i!=null&&i.includes("leading"),m=i==null||i.includes("trailing"),h=()=>{c!==null&&(r.apply(o,c),o=void 0,c=null)},p=()=>{m&&h(),N()};let y=null;const g=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,p()},s)},v=()=>{y!==null&&(clearTimeout(y),y=null)},N=()=>{v(),o=void 0,c=null},w=()=>{h()},j=function(...T){if(n?.aborted)return;o=this,c=T;const k=y==null;g(),u&&k&&h()};return j.schedule=g,j.cancel=N,j.flush=w,n?.addEventListener("abort",N,{once:!0}),j}t.debounce=a}(i2)),i2}var g8;function pee(){return g8||(g8=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=fee();function r(s,n=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:c=!0,maxWait:u}=i,m=Array(2);o&&(m[0]="leading"),c&&(m[1]="trailing");let h,p=null;const y=a.debounce(function(...N){h=s.apply(this,N),p=null},n,{edges:m}),g=function(...N){return u!=null&&(p===null&&(p=Date.now()),Date.now()-p>=u)?(h=s.apply(this,N),p=Date.now(),y.cancel(),y.schedule(),h):(y.apply(this,N),h)},v=()=>(y.flush(),h);return g.cancel=y.cancel,g.flush=v,g}t.debounce=r}(n2)),n2}var y8;function gee(){return y8||(y8=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=pee();function r(s,n=0,i={}){const{leading:o=!0,trailing:c=!0}=i;return a.debounce(s,n,{leading:o,maxWait:n,trailing:c})}t.throttle=r}(s2)),s2}var l2,b8;function yee(){return b8||(b8=1,l2=gee().throttle),l2}var bee=yee();const vee=oc(bee);var vf=function(a,r){for(var s=arguments.length,n=new Array(s>2?s-2:0),i=2;i<s;i++)n[i-2]=arguments[i]};function v8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function o2(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?v8(Object(r),!0).forEach(function(s){jee(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function jee(t,a,r){return(a=Nee(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Nee(t){var a=wee(t,"string");return typeof a=="symbol"?a:a+""}function wee(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var Bs=x.forwardRef((t,a)=>{var{aspect:r,initialDimension:s={width:-1,height:-1},width:n="100%",height:i="100%",minWidth:o=0,minHeight:c,maxHeight:u,children:m,debounce:h=0,id:p,className:y,onResize:g,style:v={}}=t,N=x.useRef(null),w=x.useRef();w.current=g,x.useImperativeHandle(a,()=>N.current);var[j,T]=x.useState({containerWidth:s.width,containerHeight:s.height}),k=x.useCallback((P,$)=>{T(A=>{var M=Math.round(P),_=Math.round($);return A.containerWidth===M&&A.containerHeight===_?A:{containerWidth:M,containerHeight:_}})},[]);x.useEffect(()=>{var P=_=>{var B,{width:D,height:C}=_[0].contentRect;k(D,C),(B=w.current)===null||B===void 0||B.call(w,D,C)};h>0&&(P=vee(P,h,{trailing:!0,leading:!1}));var $=new ResizeObserver(P),{width:A,height:M}=N.current.getBoundingClientRect();return k(A,M),$.observe(N.current),()=>{$.disconnect()}},[k,h]);var R=x.useMemo(()=>{var{containerWidth:P,containerHeight:$}=j;if(P<0||$<0)return null;vf(Zu(n)||Zu(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,n,i),vf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var A=Zu(n)?P:n,M=Zu(i)?$:i;return r&&r>0&&(A?M=A/r:M&&(A=M*r),u&&M>u&&(M=u)),vf(A>0||M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,A,M,n,i,o,c,r),x.Children.map(m,_=>x.cloneElement(_,{width:A,height:M,style:o2({width:A,height:M},_.props.style)}))},[r,m,i,u,c,o,j,n]);return x.createElement("div",{id:p?"".concat(p):void 0,className:Qa("recharts-responsive-container",y),style:o2(o2({},v),{},{width:n,height:i,minWidth:o,minHeight:c,maxHeight:u}),ref:N},x.createElement("div",{style:{width:0,height:0,overflow:"visible"}},R))}),wo=t=>null;wo.displayName="Cell";function See(t,a,r){return(a=_ee(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function _ee(t){var a=Cee(t,"string");return typeof a=="symbol"?a:a+""}function Cee(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}class kee{constructor(a){See(this,"cache",new Map),this.maxSize=a}get(a){var r=this.cache.get(a);return r!==void 0&&(this.cache.delete(a),this.cache.set(a,r)),r}set(a,r){if(this.cache.has(a))this.cache.delete(a);else if(this.cache.size>=this.maxSize){var s=this.cache.keys().next().value;this.cache.delete(s)}this.cache.set(a,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function j8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Aee(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?j8(Object(r),!0).forEach(function(s){Eee(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Eee(t,a,r){return(a=Tee(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Tee(t){var a=Pee(t,"string");return typeof a=="symbol"?a:a+""}function Pee(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var Dee={cacheSize:2e3,enableCache:!0},kD=Aee({},Dee),N8=new kee(kD.cacheSize),Oee={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},w8="recharts_measurement_span";function Lee(t,a){var r=a.fontSize||"",s=a.fontFamily||"",n=a.fontWeight||"",i=a.fontStyle||"",o=a.letterSpacing||"",c=a.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(s,"|").concat(n,"|").concat(i,"|").concat(o,"|").concat(c)}var S8=(t,a)=>{try{var r=document.getElementById(w8);r||(r=document.createElement("span"),r.setAttribute("id",w8),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Oee,a),r.textContent="".concat(t);var s=r.getBoundingClientRect();return{width:s.width,height:s.height}}catch{return{width:0,height:0}}},jf=function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a==null||hu.isSsr)return{width:0,height:0};if(!kD.enableCache)return S8(a,r);var s=Lee(a,r),n=N8.get(s);if(n)return n;var i=S8(a,r);return N8.set(s,i),i},_8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,C8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Mee=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Ree=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,AD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Iee=Object.keys(AD),ph="NaN";function zee(t,a){return t*AD[a]}class Ti{static parse(a){var r,[,s,n]=(r=Ree.exec(a))!==null&&r!==void 0?r:[];return new Ti(parseFloat(s),n??"")}constructor(a,r){this.num=a,this.unit=r,this.num=a,this.unit=r,Ii(a)&&(this.unit=""),r!==""&&!Mee.test(r)&&(this.num=NaN,this.unit=""),Iee.includes(r)&&(this.num=zee(a,r),this.unit="px")}add(a){return this.unit!==a.unit?new Ti(NaN,""):new Ti(this.num+a.num,this.unit)}subtract(a){return this.unit!==a.unit?new Ti(NaN,""):new Ti(this.num-a.num,this.unit)}multiply(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new Ti(NaN,""):new Ti(this.num*a.num,this.unit||a.unit)}divide(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new Ti(NaN,""):new Ti(this.num/a.num,this.unit||a.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ii(this.num)}}function ED(t){if(t.includes(ph))return ph;for(var a=t;a.includes("*")||a.includes("/");){var r,[,s,n,i]=(r=_8.exec(a))!==null&&r!==void 0?r:[],o=Ti.parse(s??""),c=Ti.parse(i??""),u=n==="*"?o.multiply(c):o.divide(c);if(u.isNaN())return ph;a=a.replace(_8,u.toString())}for(;a.includes("+")||/.-\d+(?:\.\d+)?/.test(a);){var m,[,h,p,y]=(m=C8.exec(a))!==null&&m!==void 0?m:[],g=Ti.parse(h??""),v=Ti.parse(y??""),N=p==="+"?g.add(v):g.subtract(v);if(N.isNaN())return ph;a=a.replace(C8,N.toString())}return a}var k8=/\(([^()]*)\)/;function $ee(t){for(var a=t,r;(r=k8.exec(a))!=null;){var[,s]=r;a=a.replace(k8,ED(s))}return a}function Bee(t){var a=t.replace(/\s+/g,"");return a=$ee(a),a=ED(a),a}function Fee(t){try{return Bee(t)}catch{return ph}}function c2(t){var a=Fee(t.slice(5,-1));return a===ph?"":a}var qee=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Uee=["dx","dy","angle","className","breakAll"];function sN(){return sN=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},sN.apply(null,arguments)}function A8(t,a){if(t==null)return{};var r,s,n=Wee(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Wee(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var TD=/[ \f\n\r\t\v\u2028\u2029]+/,PD=t=>{var{children:a,breakAll:r,style:s}=t;try{var n=[];Fr(a)||(r?n=a.toString().split(""):n=a.toString().split(TD));var i=n.map(c=>({word:c,width:jf(c,s).width})),o=r?0:jf("",s).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},Hee=(t,a,r,s,n)=>{var{maxLines:i,children:o,style:c,breakAll:u}=t,m=ta(i),h=o,p=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce((C,L)=>{var{word:H,width:V}=L,Y=C[C.length-1];if(Y&&(s==null||n||Y.width+V+r<Number(s)))Y.words.push(H),Y.width+=V+r;else{var J={words:[H],width:V};C.push(J)}return C},[])},y=p(a),g=B=>B.reduce((D,C)=>D.width>C.width?D:C);if(!m||n)return y;var v=y.length>i||g(y).width>Number(s);if(!v)return y;for(var N="",w=B=>{var D=h.slice(0,B),C=PD({breakAll:u,style:c,children:D+N}).wordsWithComputedWidth,L=p(C),H=L.length>i||g(L).width>Number(s);return[H,L]},j=0,T=h.length-1,k=0,R;j<=T&&k<=h.length-1;){var P=Math.floor((j+T)/2),$=P-1,[A,M]=w($),[_]=w(P);if(!A&&!_&&(j=P+1),A&&_&&(T=P-1),!A&&_){R=M;break}k++}return R||y},E8=t=>{var a=Fr(t)?[]:t.toString().split(TD);return[{words:a}]},Yee=t=>{var{width:a,scaleToFit:r,children:s,style:n,breakAll:i,maxLines:o}=t;if((a||r)&&!hu.isSsr){var c,u,m=PD({breakAll:i,children:s,style:n});if(m){var{wordsWithComputedWidth:h,spaceWidth:p}=m;c=h,u=p}else return E8(s);return Hee({breakAll:i,children:s,maxLines:o,style:n},c,u,a,r)}return E8(s)},T8="#808080",sb=x.forwardRef((t,a)=>{var{x:r=0,y:s=0,lineHeight:n="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:c="start",verticalAnchor:u="end",fill:m=T8}=t,h=A8(t,qee),p=x.useMemo(()=>Yee({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:o,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,o,h.style,h.width]),{dx:y,dy:g,angle:v,className:N,breakAll:w}=h,j=A8(h,Uee);if(!sc(r)||!sc(s)||p.length===0)return null;var T=r+(ta(y)?y:0),k=s+(ta(g)?g:0),R;switch(u){case"start":R=c2("calc(".concat(i,")"));break;case"middle":R=c2("calc(".concat((p.length-1)/2," * -").concat(n," + (").concat(i," / 2))"));break;default:R=c2("calc(".concat(p.length-1," * -").concat(n,")"));break}var P=[];if(o){var $=p[0].width,{width:A}=h;P.push("scale(".concat(ta(A)?A/$:1,")"))}return v&&P.push("rotate(".concat(v,", ").concat(T,", ").concat(k,")")),P.length&&(j.transform=P.join(" ")),x.createElement("text",sN({},Or(j,!0),{ref:a,x:T,y:k,className:Qa("recharts-text",N),textAnchor:c,fill:m.includes("url")?T8:m}),p.map((M,_)=>{var B=M.words.join(w?"":" ");return x.createElement("tspan",{x:T,dy:_===0?R:n,key:"".concat(B,"-").concat(_)},B)}))});sb.displayName="Text";var Gee=["labelRef"];function Vee(t,a){if(t==null)return{};var r,s,n=Kee(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Kee(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function P8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function _s(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?P8(Object(r),!0).forEach(function(s){Xee(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Xee(t,a,r){return(a=Jee(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Jee(t){var a=Zee(t,"string");return typeof a=="symbol"?a:a+""}function Zee(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function qc(){return qc=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},qc.apply(null,arguments)}var DD=x.createContext(null),Qee=t=>{var{x:a,y:r,width:s,height:n,children:i}=t,o=x.useMemo(()=>({x:a,y:r,width:s,height:n}),[a,r,s,n]);return x.createElement(DD.Provider,{value:o},i)},OD=()=>{var t=x.useContext(DD),a=p5();return t||a},ete=x.createContext(null),tte=()=>{var t=x.useContext(ete),a=Qt(jP);return t||a},ate=t=>{var{value:a,formatter:r}=t,s=Fr(t.children)?a:t.children;return typeof r=="function"?r(s):s},S3=t=>t!=null&&typeof t=="function",rte=(t,a)=>{var r=un(a-t),s=Math.min(Math.abs(a-t),360);return r*s},ste=(t,a,r,s,n)=>{var{offset:i,className:o}=t,{cx:c,cy:u,innerRadius:m,outerRadius:h,startAngle:p,endAngle:y,clockWise:g}=n,v=(m+h)/2,N=rte(p,y),w=N>=0?1:-1,j,T;switch(a){case"insideStart":j=p+w*i,T=g;break;case"insideEnd":j=y-w*i,T=!g;break;case"end":j=y+w*i,T=g;break;default:throw new Error("Unsupported position ".concat(a))}T=N<=0?T:!T;var k=Fs(c,u,v,j),R=Fs(c,u,v,j+(T?1:-1)*359),P="M".concat(k.x,",").concat(k.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(T?0:1,`,
    `).concat(R.x,",").concat(R.y),$=Fr(t.id)?Tf("recharts-radial-line-"):t.id;return x.createElement("text",qc({},s,{dominantBaseline:"central",className:Qa("recharts-radial-bar-label",o)}),x.createElement("defs",null,x.createElement("path",{id:$,d:P})),x.createElement("textPath",{xlinkHref:"#".concat($)},r))},nte=(t,a,r)=>{var{cx:s,cy:n,innerRadius:i,outerRadius:o,startAngle:c,endAngle:u}=t,m=(c+u)/2;if(r==="outside"){var{x:h,y:p}=Fs(s,n,o+a,m);return{x:h,y:p,textAnchor:h>=s?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:s,y:n,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:s,y:n,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:s,y:n,textAnchor:"middle",verticalAnchor:"end"};var y=(i+o)/2,{x:g,y:v}=Fs(s,n,y,m);return{x:g,y:v,textAnchor:"middle",verticalAnchor:"middle"}},LD=t=>"cx"in t&&ta(t.cx),ite=(t,a)=>{var{parentViewBox:r,offset:s,position:n}=t,i;r!=null&&!LD(r)&&(i=r);var{x:o,y:c,width:u,height:m}=a,h=m>=0?1:-1,p=h*s,y=h>0?"end":"start",g=h>0?"start":"end",v=u>=0?1:-1,N=v*s,w=v>0?"end":"start",j=v>0?"start":"end";if(n==="top"){var T={x:o+u/2,y:c-h*s,textAnchor:"middle",verticalAnchor:y};return _s(_s({},T),i?{height:Math.max(c-i.y,0),width:u}:{})}if(n==="bottom"){var k={x:o+u/2,y:c+m+p,textAnchor:"middle",verticalAnchor:g};return _s(_s({},k),i?{height:Math.max(i.y+i.height-(c+m),0),width:u}:{})}if(n==="left"){var R={x:o-N,y:c+m/2,textAnchor:w,verticalAnchor:"middle"};return _s(_s({},R),i?{width:Math.max(R.x-i.x,0),height:m}:{})}if(n==="right"){var P={x:o+u+N,y:c+m/2,textAnchor:j,verticalAnchor:"middle"};return _s(_s({},P),i?{width:Math.max(i.x+i.width-P.x,0),height:m}:{})}var $=i?{width:u,height:m}:{};return n==="insideLeft"?_s({x:o+N,y:c+m/2,textAnchor:j,verticalAnchor:"middle"},$):n==="insideRight"?_s({x:o+u-N,y:c+m/2,textAnchor:w,verticalAnchor:"middle"},$):n==="insideTop"?_s({x:o+u/2,y:c+p,textAnchor:"middle",verticalAnchor:g},$):n==="insideBottom"?_s({x:o+u/2,y:c+m-p,textAnchor:"middle",verticalAnchor:y},$):n==="insideTopLeft"?_s({x:o+N,y:c+p,textAnchor:j,verticalAnchor:g},$):n==="insideTopRight"?_s({x:o+u-N,y:c+p,textAnchor:w,verticalAnchor:g},$):n==="insideBottomLeft"?_s({x:o+N,y:c+m-p,textAnchor:j,verticalAnchor:y},$):n==="insideBottomRight"?_s({x:o+u-N,y:c+m-p,textAnchor:w,verticalAnchor:y},$):n&&typeof n=="object"&&(ta(n.x)||Zu(n.x))&&(ta(n.y)||Zu(n.y))?_s({x:o+Yn(n.x,u),y:c+Yn(n.y,m),textAnchor:"end",verticalAnchor:"end"},$):_s({x:o+u/2,y:c+m/2,textAnchor:"middle",verticalAnchor:"middle"},$)},lte={offset:5};function Vd(t){var a=Kn(t,lte),{viewBox:r,position:s,value:n,children:i,content:o,className:c="",textBreakAll:u,labelRef:m}=a,h=tte(),p=OD(),y=s==="center"?p:h??p,g=r||y;if(!g||Fr(n)&&Fr(i)&&!x.isValidElement(o)&&typeof o!="function")return null;var v=_s(_s({},a),{},{viewBox:g});if(x.isValidElement(o)){var{labelRef:N}=v,w=Vee(v,Gee);return x.cloneElement(o,w)}var j;if(typeof o=="function"){if(j=x.createElement(o,v),x.isValidElement(j))return j}else j=ate(a);var T=LD(g),k=Or(a,!0);if(T&&(s==="insideStart"||s==="insideEnd"||s==="end"))return ste(a,s,j,k,g);var R=T?nte(g,a.offset,a.position):ite(a,g);return x.createElement(sb,qc({ref:m,className:Qa("recharts-label",c)},k,R,{breakAll:u}),j)}Vd.displayName="Label";var ote=(t,a,r)=>{if(!t)return null;var s={viewBox:a,labelRef:r};return t===!0?x.createElement(Vd,qc({key:"label-implicit"},s)):sc(t)?x.createElement(Vd,qc({key:"label-implicit",value:t},s)):x.isValidElement(t)?t.type===Vd?x.cloneElement(t,_s({key:"label-implicit"},s)):x.createElement(Vd,qc({key:"label-implicit",content:t},s)):S3(t)?x.createElement(Vd,qc({key:"label-implicit",content:t},s)):t&&typeof t=="object"?x.createElement(Vd,qc({},t,{key:"label-implicit"},s)):null};function cte(t){var{label:a}=t,r=OD();return ote(a,r)||null}var d2={},u2={},D8;function dte(){return D8||(D8=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return r[r.length-1]}t.last=a}(u2)),u2}var m2={},O8;function ute(){return O8||(O8=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=a}(m2)),m2}var L8;function mte(){return L8||(L8=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=dte(),r=ute(),s=l5();function n(i){if(s.isArrayLike(i))return a.last(r.toArray(i))}t.last=n}(d2)),d2}var h2,M8;function hte(){return M8||(M8=1,h2=mte().last),h2}var xte=hte();const fte=oc(xte);var pte=["valueAccessor"],gte=["dataKey","clockWise","id","textBreakAll"];function Gg(){return Gg=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Gg.apply(null,arguments)}function R8(t,a){if(t==null)return{};var r,s,n=yte(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yte(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var bte=t=>Array.isArray(t.value)?fte(t.value):t.value,MD=x.createContext(void 0),_3=MD.Provider,RD=x.createContext(void 0),vte=RD.Provider;function jte(){return x.useContext(MD)}function Nte(){return x.useContext(RD)}function eg(t){var{valueAccessor:a=bte}=t,r=R8(t,pte),{dataKey:s,clockWise:n,id:i,textBreakAll:o}=r,c=R8(r,gte),u=jte(),m=Nte(),h=u||m;return!h||!h.length?null:x.createElement(ps,{className:"recharts-label-list"},h.map((p,y)=>{var g,v=Fr(s)?a(p,y):pr(p&&p.payload,s),N=Fr(i)?{}:{id:"".concat(i,"-").concat(y)};return x.createElement(Vd,Gg({},Or(p,!0),c,N,{fill:(g=r.fill)!==null&&g!==void 0?g:p.fill,parentViewBox:p.parentViewBox,value:v,textBreakAll:o,viewBox:p.viewBox,key:"label-".concat(y),index:y}))}))}eg.displayName="LabelList";function nb(t){var{label:a}=t;return a?a===!0?x.createElement(eg,{key:"labelList-implicit"}):x.isValidElement(a)||S3(a)?x.createElement(eg,{key:"labelList-implicit",content:a}):typeof a=="object"?x.createElement(eg,Gg({key:"labelList-implicit"},a,{type:String(a.type)})):null:null}function nN(){return nN=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},nN.apply(null,arguments)}var C3=t=>{var{cx:a,cy:r,r:s,className:n}=t,i=Qa("recharts-dot",n);return a===+a&&r===+r&&s===+s?x.createElement("circle",nN({},Ao(t),ZN(t),{className:i,cx:a,cy:r,r:s})):null},ID=t=>t.graphicalItems.polarItems,wte=nt([Jr,op],Q5),k3=nt([ID,Ts,wte],e3),Ste=nt([k3],t3),A3=nt([Ste,U5],a3),_te=nt([A3,Ts,k3],s3),Cte=nt([A3,Ts,k3],(t,a,r)=>r.length>0?t.flatMap(s=>r.flatMap(n=>{var i,o=pr(s,(i=a.dataKey)!==null&&i!==void 0?i:n.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):a?.dataKey!=null?t.map(s=>({value:pr(s,a.dataKey),errorDomain:[]})):t.map(s=>({value:s,errorDomain:[]}))),I8=()=>{},kte=nt([Ts,FP,I8,Cte,I8,Ua,Jr],i3),zD=nt([Ts,Ua,A3,_te,lp,Jr,kte],l3),Ate=nt([zD,Ts,tx],d3);nt([Ts,zD,Ate,Jr],m3);var Ete={radiusAxis:{},angleAxis:{}},$D=ol({name:"polarAxis",initialState:Ete,reducers:{addRadiusAxis(t,a){t.radiusAxis[a.payload.id]=a.payload},removeRadiusAxis(t,a){delete t.radiusAxis[a.payload.id]},addAngleAxis(t,a){t.angleAxis[a.payload.id]=a.payload},removeAngleAxis(t,a){delete t.angleAxis[a.payload.id]}}}),{addRadiusAxis:Fme,removeRadiusAxis:qme,addAngleAxis:Ume,removeAngleAxis:Wme}=$D.actions,Tte=$D.reducer;function z8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function $8(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?z8(Object(r),!0).forEach(function(s){Pte(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Pte(t,a,r){return(a=Dte(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Dte(t){var a=Ote(t,"string");return typeof a=="symbol"?a:a+""}function Ote(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var Lte=(t,a)=>a,E3=nt([ID,Lte],(t,a)=>t.filter(r=>r.type==="pie").find(r=>r.id===a)),Mte=[],T3=(t,a,r)=>r?.length===0?Mte:r,BD=nt([U5,E3,T3],(t,a,r)=>{var{chartData:s}=t;if(a!=null){var n;if(a?.data!=null&&a.data.length>0?n=a.data:n=s,(!n||!n.length)&&r!=null&&(n=r.map(i=>$8($8({},a.presentationProps),i.props))),n!=null)return n}}),Rte=nt([BD,E3,T3],(t,a,r)=>{if(!(t==null||a==null))return t.map((s,n)=>{var i,o=pr(s,a.nameKey,a.name),c;return r!=null&&(i=r[n])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?c=r[n].props.fill:typeof s=="object"&&s!=null&&"fill"in s?c=s.fill:c=a.fill,{value:mu(o,a.dataKey),color:c,payload:s,type:a.legendType}})}),Ite=nt([BD,E3,T3,Zs],(t,a,r,s)=>{if(!(a==null||t==null))return Lae({offset:s,pieSettings:a,displayedData:t,cells:r})}),x2={},B8;function zte(){return B8||(B8=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function a(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const n=r[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${n}]`}let s=r;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(r)===s}t.isPlainObject=a}(x2)),x2}var f2,F8;function $te(){return F8||(F8=1,f2=zte().isPlainObject),f2}var Bte=$te();const Fte=oc(Bte);function q8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function U8(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?q8(Object(r),!0).forEach(function(s){qte(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function qte(t,a,r){return(a=Ute(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Ute(t){var a=Wte(t,"string");return typeof a=="symbol"?a:a+""}function Wte(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function Vg(){return Vg=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Vg.apply(null,arguments)}var W8=(t,a,r,s,n)=>{var i=r-s,o;return o="M ".concat(t,",").concat(a),o+="L ".concat(t+r,",").concat(a),o+="L ".concat(t+r-i/2,",").concat(a+n),o+="L ".concat(t+r-i/2-s,",").concat(a+n),o+="L ".concat(t,",").concat(a," Z"),o},Hte={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Yte=t=>{var a=Kn(t,Hte),{x:r,y:s,upperWidth:n,lowerWidth:i,height:o,className:c}=a,{animationEasing:u,animationDuration:m,animationBegin:h,isUpdateAnimationActive:p}=a,y=x.useRef(),[g,v]=x.useState(-1),N=x.useRef(n),w=x.useRef(i),j=x.useRef(o),T=x.useRef(r),k=x.useRef(s),R=Kh(t,"trapezoid-");if(x.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var H=y.current.getTotalLength();H&&v(H)}catch{}},[]),r!==+r||s!==+s||n!==+n||i!==+i||o!==+o||n===0&&i===0||o===0)return null;var P=Qa("recharts-trapezoid",c);if(!p)return x.createElement("g",null,x.createElement("path",Vg({},Or(a,!0),{className:P,d:W8(r,s,n,i,o)})));var $=N.current,A=w.current,M=j.current,_=T.current,B=k.current,D="0px ".concat(g===-1?1:g,"px"),C="".concat(g,"px 0px"),L=uT(["strokeDasharray"],m,u);return x.createElement(Vh,{animationId:R,key:R,canBegin:g>0,duration:m,easing:u,isActive:p,begin:h},H=>{var V=jr($,n,H),Y=jr(A,i,H),J=jr(M,o,H),W=jr(_,r,H),X=jr(B,s,H);y.current&&(N.current=V,w.current=Y,j.current=J,T.current=W,k.current=X);var te=H>0?{transition:L,strokeDasharray:C}:{strokeDasharray:D};return x.createElement("path",Vg({},Or(a,!0),{className:P,d:W8(W,X,V,Y,J),ref:y,style:U8(U8({},te),a.style)}))})},Gte=["option","shapeType","propTransformer","activeClassName","isActive"];function Vte(t,a){if(t==null)return{};var r,s,n=Kte(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Kte(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function H8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Kg(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?H8(Object(r),!0).forEach(function(s){Xte(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Xte(t,a,r){return(a=Jte(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Jte(t){var a=Zte(t,"string");return typeof a=="symbol"?a:a+""}function Zte(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function Qte(t,a){return Kg(Kg({},a),t)}function eae(t,a){return t==="symbols"}function Y8(t){var{shapeType:a,elementProps:r}=t;switch(a){case"rectangle":return x.createElement(fT,r);case"trapezoid":return x.createElement(Yte,r);case"sector":return x.createElement(yT,r);case"symbols":if(eae(a))return x.createElement(s5,r);break;default:return null}}function tae(t){return x.isValidElement(t)?t.props:t}function FD(t){var{option:a,shapeType:r,propTransformer:s=Qte,activeClassName:n="recharts-active-shape",isActive:i}=t,o=Vte(t,Gte),c;if(x.isValidElement(a))c=x.cloneElement(a,Kg(Kg({},o),tae(a)));else if(typeof a=="function")c=a(o);else if(Fte(a)&&typeof a!="boolean"){var u=s(a,o);c=x.createElement(Y8,{shapeType:r,elementProps:u})}else{var m=o;c=x.createElement(Y8,{shapeType:r,elementProps:m})}return i?x.createElement(ps,{className:n},c):c}var P3=(t,a)=>{var r=is();return(s,n)=>i=>{t?.(s,n,i),r(rD({activeIndex:String(n),activeDataKey:a,activeCoordinate:s.tooltipPosition}))}},D3=t=>{var a=is();return(r,s)=>n=>{t?.(r,s,n),a(zZ())}},O3=(t,a)=>{var r=is();return(s,n)=>i=>{t?.(s,n,i),r($Z({activeIndex:String(n),activeDataKey:a,activeCoordinate:s.tooltipPosition}))}};function ib(t){var{fn:a,args:r}=t,s=is(),n=Vn();return x.useEffect(()=>{if(!n){var i=a(r);return s(MZ(i)),()=>{s(RZ(i))}}},[a,r,s,n]),null}var qD=()=>{};function L3(t){var{legendPayload:a}=t,r=is(),s=Vn();return x.useEffect(()=>s?qD:(r(oT(a)),()=>{r(cT(a))}),[r,s,a]),null}function aae(t){var{legendPayload:a}=t,r=is(),s=Qt(Ua);return x.useEffect(()=>s!=="centric"&&s!=="radial"?qD:(r(oT(a)),()=>{r(cT(a))}),[r,s,a]),null}var p2,rae=()=>{var[t]=x.useState(()=>Tf("uid-"));return t},sae=(p2=z7.useId)!==null&&p2!==void 0?p2:rae;function nae(t,a){var r=sae();return a||(t?"".concat(t,"-").concat(r):r)}var iae=x.createContext(void 0),lb=t=>{var{id:a,type:r,children:s}=t,n=nae("recharts-".concat(r),a);return x.createElement(iae.Provider,{value:n},s(n))},lae={cartesianItems:[],polarItems:[]},UD=ol({name:"graphicalItems",initialState:lae,reducers:{addCartesianGraphicalItem(t,a){t.cartesianItems.push(a.payload)},replaceCartesianGraphicalItem(t,a){var{prev:r,next:s}=a.payload,n=Yc(t).cartesianItems.indexOf(r);n>-1&&(t.cartesianItems[n]=s)},removeCartesianGraphicalItem(t,a){var r=Yc(t).cartesianItems.indexOf(a.payload);r>-1&&t.cartesianItems.splice(r,1)},addPolarGraphicalItem(t,a){t.polarItems.push(a.payload)},removePolarGraphicalItem(t,a){var r=Yc(t).polarItems.indexOf(a.payload);r>-1&&t.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:oae,replaceCartesianGraphicalItem:cae,removeCartesianGraphicalItem:dae,addPolarGraphicalItem:uae,removePolarGraphicalItem:mae}=UD.actions,hae=UD.reducer;function M3(t){var a=is(),r=x.useRef(null);return x.useEffect(()=>{r.current===null?a(oae(t)):r.current!==t&&a(cae({prev:r.current,next:t})),r.current=t},[a,t]),x.useEffect(()=>()=>{r.current&&(a(dae(r.current)),r.current=null)},[a]),null}function xae(t){var a=is();return x.useEffect(()=>(a(uae(t)),()=>{a(mae(t))}),[a,t]),null}var fae=["onMouseEnter","onClick","onMouseLeave"],pae=["id"],gae=["id"];function R3(t,a){if(t==null)return{};var r,s,n=yae(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yae(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function G8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Kr(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?G8(Object(r),!0).forEach(function(s){bae(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function bae(t,a,r){return(a=vae(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function vae(t){var a=jae(t,"string");return typeof a=="symbol"?a:a+""}function jae(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function cu(){return cu=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},cu.apply(null,arguments)}function Nae(t){var a=x.useMemo(()=>QN(t.children,wo),[t.children]),r=Qt(s=>Rte(s,t.id,a));return r==null?null:x.createElement(aae,{legendPayload:r})}function wae(t){var{dataKey:a,nameKey:r,sectors:s,stroke:n,strokeWidth:i,fill:o,name:c,hide:u,tooltipType:m}=t;return{dataDefinedOnItem:s.map(h=>h.tooltipPayload),positions:s.map(h=>h.tooltipPosition),settings:{stroke:n,strokeWidth:i,fill:o,dataKey:a,nameKey:r,name:mu(c,a),hide:u,type:m,color:o,unit:""}}}var Sae=(t,a)=>t>a?"start":t<a?"end":"middle",_ae=(t,a,r)=>Yn(typeof a=="function"?a(t):a,r,r*.8),Cae=(t,a,r)=>{var{top:s,left:n,width:i,height:o}=a,c=Z9(i,o),u=n+Yn(t.cx,i,i/2),m=s+Yn(t.cy,o,o/2),h=Yn(t.innerRadius,c,0),p=_ae(r,t.outerRadius,c),y=t.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:u,cy:m,innerRadius:h,outerRadius:p,maxRadius:y}},kae=(t,a)=>{var r=un(a-t),s=Math.min(Math.abs(a-t),360);return r*s};function Aae(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var Eae=(t,a)=>{if(x.isValidElement(t))return x.cloneElement(t,a);if(typeof t=="function")return t(a);var r=Qa("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return x.createElement(wh,cu({},a,{type:"linear",className:r}))},Tae=(t,a,r)=>{if(x.isValidElement(t))return x.cloneElement(t,a);var s=r;if(typeof t=="function"&&(s=t(a),x.isValidElement(s)))return s;var n=Qa("recharts-pie-label-text",Aae(t));return x.createElement(sb,cu({},a,{alignmentBaseline:"middle",className:n}),s)};function Pae(t){var{sectors:a,props:r,showLabels:s}=t,{label:n,labelLine:i,dataKey:o}=r;if(!s||!n||!a)return null;var c=Ao(r),u=Or(n,!1),m=Or(i,!1),h=typeof n=="object"&&"offsetRadius"in n&&typeof n.offsetRadius=="number"&&n.offsetRadius||20,p=a.map((y,g)=>{var v=(y.startAngle+y.endAngle)/2,N=Fs(y.cx,y.cy,y.outerRadius+h,v),w=Kr(Kr(Kr(Kr({},c),y),{},{stroke:"none"},u),{},{index:g,textAnchor:Sae(N.x,y.cx)},N),j=Kr(Kr(Kr(Kr({},c),y),{},{fill:"none",stroke:y.fill},m),{},{index:g,points:[Fs(y.cx,y.cy,y.outerRadius,v),N],key:"line"});return x.createElement(ps,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(g)},i&&Eae(i,j),Tae(n,w,pr(y,o)))});return x.createElement(ps,{className:"recharts-pie-labels"},p)}function Dae(t){var{sectors:a,props:r,showLabels:s}=t,{label:n}=r;return typeof n=="object"&&n!=null&&"position"in n?x.createElement(nb,{label:r.label}):x.createElement(Pae,{sectors:a,props:r,showLabels:s})}function Oae(t){var{sectors:a,activeShape:r,inactiveShape:s,allOtherPieProps:n}=t,i=Qt(ou),{onMouseEnter:o,onClick:c,onMouseLeave:u}=n,m=R3(n,fae),h=P3(o,n.dataKey),p=D3(u),y=O3(c,n.dataKey);return a==null||a.length===0?null:x.createElement(x.Fragment,null,a.map((g,v)=>{if(g?.startAngle===0&&g?.endAngle===0&&a.length!==1)return null;var N=r&&String(v)===i,w=i?s:null,j=N?r:w,T=Kr(Kr({},g),{},{stroke:g.stroke,tabIndex:-1,[sT]:v,[nT]:n.dataKey});return x.createElement(ps,cu({tabIndex:-1,className:"recharts-pie-sector"},Jf(m,g,v),{onMouseEnter:h(g,v),onMouseLeave:p(g,v),onClick:y(g,v),key:"sector-".concat(g?.startAngle,"-").concat(g?.endAngle,"-").concat(g.midAngle,"-").concat(v)}),x.createElement(FD,cu({option:j,isActive:N,shapeType:"sector"},T)))}))}function Lae(t){var a,{pieSettings:r,displayedData:s,cells:n,offset:i}=t,{cornerRadius:o,startAngle:c,endAngle:u,dataKey:m,nameKey:h,tooltipType:p}=r,y=Math.abs(r.minAngle),g=kae(c,u),v=Math.abs(g),N=s.length<=1?0:(a=r.paddingAngle)!==null&&a!==void 0?a:0,w=s.filter($=>pr($,m,0)!==0).length,j=(v>=360?w:w-1)*N,T=v-w*y-j,k=s.reduce(($,A)=>{var M=pr(A,m,0);return $+(ta(M)?M:0)},0),R;if(k>0){var P;R=s.map(($,A)=>{var M=pr($,m,0),_=pr($,h,A),B=Cae(r,i,$),D=(ta(M)?M:0)/k,C,L=Kr(Kr({},$),n&&n[A]&&n[A].props);A?C=P.endAngle+un(g)*N*(M!==0?1:0):C=c;var H=C+un(g)*((M!==0?y:0)+D*T),V=(C+H)/2,Y=(B.innerRadius+B.outerRadius)/2,J=[{name:_,value:M,payload:L,dataKey:m,type:p}],W=Fs(B.cx,B.cy,Y,V);return P=Kr(Kr(Kr(Kr({},r.presentationProps),{},{percent:D,cornerRadius:o,name:_,tooltipPayload:J,midAngle:V,middleRadius:Y,tooltipPosition:W},L),B),{},{value:pr($,m),startAngle:C,endAngle:H,payload:L,paddingAngle:un(g)*N}),P})}return R}function Mae(t){var{showLabels:a,sectors:r,children:s}=t,n=x.useMemo(()=>!a||!r?[]:r.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[r,a]);return x.createElement(vte,{value:a?n:void 0},s)}function Rae(t){var{props:a,previousSectorsRef:r}=t,{sectors:s,isAnimationActive:n,animationBegin:i,animationDuration:o,animationEasing:c,activeShape:u,inactiveShape:m,onAnimationStart:h,onAnimationEnd:p}=a,y=Kh(a,"recharts-pie-"),g=r.current,[v,N]=x.useState(!1),w=x.useCallback(()=>{typeof p=="function"&&p(),N(!1)},[p]),j=x.useCallback(()=>{typeof h=="function"&&h(),N(!0)},[h]);return x.createElement(Mae,{showLabels:!v,sectors:s},x.createElement(Vh,{animationId:y,begin:i,duration:o,isActive:n,easing:c,onAnimationStart:j,onAnimationEnd:w,key:y},T=>{var k=[],R=s&&s[0],P=R?.startAngle;return s?.forEach(($,A)=>{var M=g&&g[A],_=A>0?gm($,"paddingAngle",0):0;if(M){var B=jr(M.endAngle-M.startAngle,$.endAngle-$.startAngle,T),D=Kr(Kr({},$),{},{startAngle:P+_,endAngle:P+B+_});k.push(D),P=D.endAngle}else{var{endAngle:C,startAngle:L}=$,H=jr(0,C-L,T),V=Kr(Kr({},$),{},{startAngle:P+_,endAngle:P+H+_});k.push(V),P=V.endAngle}}),r.current=k,x.createElement(ps,null,x.createElement(Oae,{sectors:k,activeShape:u,inactiveShape:m,allOtherPieProps:a}))}),x.createElement(Dae,{showLabels:!v,sectors:s,props:a}),a.children)}var Iae={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!hu.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function zae(t){var{id:a}=t,r=R3(t,pae),{hide:s,className:n,rootTabIndex:i}=t,o=x.useMemo(()=>QN(t.children,wo),[t.children]),c=Qt(h=>Ite(h,a,o)),u=x.useRef(null),m=Qa("recharts-pie",n);return s||c==null?(u.current=null,x.createElement(ps,{tabIndex:i,className:m})):x.createElement(x.Fragment,null,x.createElement(ib,{fn:wae,args:Kr(Kr({},t),{},{sectors:c})}),x.createElement(ps,{tabIndex:i,className:m},x.createElement(Rae,{props:Kr(Kr({},r),{},{sectors:c}),previousSectorsRef:u})))}function au(t){var a=Kn(t,Iae),{id:r}=a,s=R3(a,gae),n=Ao(s);return x.createElement(lb,{id:r,type:"pie"},i=>x.createElement(x.Fragment,null,x.createElement(xae,{type:"pie",id:i,data:s.data,dataKey:s.dataKey,hide:s.hide,angleAxisId:0,radiusAxisId:0,name:s.name,nameKey:s.nameKey,tooltipType:s.tooltipType,legendType:s.legendType,fill:s.fill,cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,paddingAngle:s.paddingAngle,minAngle:s.minAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius,cornerRadius:s.cornerRadius,presentationProps:n}),x.createElement(Nae,cu({},s,{id:i})),x.createElement(zae,cu({},s,{id:i}))))}au.displayName="Pie";function V8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function K8(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?V8(Object(r),!0).forEach(function(s){$ae(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function $ae(t,a,r){return(a=Bae(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Bae(t){var a=Fae(t,"string");return typeof a=="symbol"?a:a+""}function Fae(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var qae={xAxis:{},yAxis:{},zAxis:{}},WD=ol({name:"cartesianAxis",initialState:qae,reducers:{addXAxis(t,a){t.xAxis[a.payload.id]=a.payload},removeXAxis(t,a){delete t.xAxis[a.payload.id]},addYAxis(t,a){t.yAxis[a.payload.id]=a.payload},removeYAxis(t,a){delete t.yAxis[a.payload.id]},addZAxis(t,a){t.zAxis[a.payload.id]=a.payload},removeZAxis(t,a){delete t.zAxis[a.payload.id]},updateYAxisWidth(t,a){var{id:r,width:s}=a.payload;t.yAxis[r]&&(t.yAxis[r]=K8(K8({},t.yAxis[r]),{},{width:s}))}}}),{addXAxis:Uae,removeXAxis:Wae,addYAxis:Hae,removeYAxis:Yae,addZAxis:Hme,removeZAxis:Yme,updateYAxisWidth:Gae}=WD.actions,Vae=WD.reducer,Kae=nt([Zs],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),Xae=nt([Kae,id,ld],(t,a,r)=>{if(!(!t||a==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,a-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),ob=()=>Qt(Xae),Jae=()=>Qt(_Q);function X8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function J8(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?X8(Object(r),!0).forEach(function(s){Zae(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Zae(t,a,r){return(a=Qae(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Qae(t){var a=ere(t,"string");return typeof a=="symbol"?a:a+""}function ere(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var tre=t=>{var{point:a,childIndex:r,mainColor:s,activeDot:n,dataKey:i}=t;if(n===!1||a.x==null||a.y==null)return null;var o=J8(J8({index:r,dataKey:i,cx:a.x,cy:a.y,r:4,fill:s??"none",strokeWidth:2,stroke:"#fff",payload:a.payload,value:a.value},Or(n,!1)),ZN(n)),c;return x.isValidElement(n)?c=x.cloneElement(n,o):typeof n=="function"?c=n(o):c=x.createElement(C3,o),x.createElement(ps,{className:"recharts-active-dot"},c)};function iN(t){var{points:a,mainColor:r,activeDot:s,itemDataKey:n}=t,i=Qt(ou),o=Jae();if(a==null||o==null)return null;var c=a.find(u=>o.includes(u.payload));return Fr(c)?null:tre({point:c,childIndex:Number(i),mainColor:r,dataKey:n,activeDot:s})}var are="Invariant failed";function rre(t,a){throw new Error(are)}var sre=["x","y"];function lN(){return lN=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},lN.apply(null,arguments)}function Z8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function of(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Z8(Object(r),!0).forEach(function(s){nre(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function nre(t,a,r){return(a=ire(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function ire(t){var a=lre(t,"string");return typeof a=="symbol"?a:a+""}function lre(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function ore(t,a){if(t==null)return{};var r,s,n=cre(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cre(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function dre(t,a){var{x:r,y:s}=t,n=ore(t,sre),i="".concat(r),o=parseInt(i,10),c="".concat(s),u=parseInt(c,10),m="".concat(a.height||n.height),h=parseInt(m,10),p="".concat(a.width||n.width),y=parseInt(p,10);return of(of(of(of(of({},a),n),o?{x:o}:{}),u?{y:u}:{}),{},{height:h,width:y,name:a.name,radius:a.radius})}function I3(t){return x.createElement(FD,lN({shapeType:"rectangle",propTransformer:dre,activeClassName:"recharts-active-bar"},t))}var ure=function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(s,n)=>{if(ta(a))return a;var i=ta(s)||Fr(s);return i?a(s,n):(i||rre(),r)}},mre={},HD=ol({name:"errorBars",initialState:mre,reducers:{addErrorBar:(t,a)=>{var{itemId:r,errorBar:s}=a.payload;t[r]||(t[r]=[]),t[r].push(s)},replaceErrorBar:(t,a)=>{var{itemId:r,prev:s,next:n}=a.payload;t[r]&&(t[r]=t[r].map(i=>i.dataKey===s.dataKey&&i.direction===s.direction?n:i))},removeErrorBar:(t,a)=>{var{itemId:r,errorBar:s}=a.payload;t[r]&&(t[r]=t[r].filter(n=>n.dataKey!==s.dataKey||n.direction!==s.direction))}}}),{addErrorBar:Gme,replaceErrorBar:Vme,removeErrorBar:Kme}=HD.actions,hre=HD.reducer,xre=["children"];function fre(t,a){if(t==null)return{};var r,s,n=pre(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pre(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var gre={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},yre=x.createContext(gre);function YD(t){var{children:a}=t,r=fre(t,xre);return x.createElement(yre.Provider,{value:r},a)}function cb(t,a){var r,s,n=Qt(m=>gu(m,t)),i=Qt(m=>yu(m,a)),o=(r=n?.allowDataOverflow)!==null&&r!==void 0?r:Zi.allowDataOverflow,c=(s=i?.allowDataOverflow)!==null&&s!==void 0?s:Qi.allowDataOverflow,u=o||c;return{needClip:u,needClipX:o,needClipY:c}}function z3(t){var{xAxisId:a,yAxisId:r,clipPathId:s}=t,n=ob(),{needClipX:i,needClipY:o,needClip:c}=cb(a,r);if(!c)return null;var{x:u,y:m,width:h,height:p}=n;return x.createElement("clipPath",{id:"clipPath-".concat(s)},x.createElement("rect",{x:i?u:u-h/2,y:o?m:m-p/2,width:i?h:h*2,height:o?p:p*2}))}var bre=["onMouseEnter","onMouseLeave","onClick"],vre=["value","background","tooltipPosition"],jre=["id"],Nre=["onMouseEnter","onClick","onMouseLeave"];function du(){return du=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},du.apply(null,arguments)}function Q8(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function ui(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Q8(Object(r),!0).forEach(function(s){wre(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Q8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function wre(t,a,r){return(a=Sre(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Sre(t){var a=_re(t,"string");return typeof a=="symbol"?a:a+""}function _re(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function Xg(t,a){if(t==null)return{};var r,s,n=Cre(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Cre(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var kre=t=>{var{dataKey:a,name:r,fill:s,legendType:n,hide:i}=t;return[{inactive:i,dataKey:a,type:n,color:s,value:mu(r,a),payload:t}]};function Are(t){var{dataKey:a,stroke:r,strokeWidth:s,fill:n,name:i,hide:o,unit:c}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:s,fill:n,dataKey:a,nameKey:void 0,name:mu(i,a),hide:o,type:t.tooltipType,color:t.fill,unit:c}}}function Ere(t){var a=Qt(ou),{data:r,dataKey:s,background:n,allOtherBarProps:i}=t,{onMouseEnter:o,onMouseLeave:c,onClick:u}=i,m=Xg(i,bre),h=P3(o,s),p=D3(c),y=O3(u,s);if(!n||r==null)return null;var g=Or(n,!1);return x.createElement(x.Fragment,null,r.map((v,N)=>{var{value:w,background:j,tooltipPosition:T}=v,k=Xg(v,vre);if(!j)return null;var R=h(v,N),P=p(v,N),$=y(v,N),A=ui(ui(ui(ui(ui({option:n,isActive:String(N)===a},k),{},{fill:"#eee"},j),g),Jf(m,v,N)),{},{onMouseEnter:R,onMouseLeave:P,onClick:$,dataKey:s,index:N,className:"recharts-bar-background-rectangle"});return x.createElement(I3,du({key:"background-bar-".concat(N)},A))}))}function Tre(t){var{showLabels:a,children:r,rects:s}=t,n=s?.map(i=>{var o={x:i.x,y:i.y,width:i.width,height:i.height};return ui(ui({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return x.createElement(_3,{value:a?n:void 0},r)}function Pre(t){var{shape:a,activeBar:r,baseProps:s,entry:n,index:i,dataKey:o}=t,c=Qt(ou),u=Qt(pD),m=r&&String(i)===c&&(u==null||o===u),h=m?r:a;return x.createElement(I3,du({},s,n,{isActive:m,option:h,index:i,dataKey:o}))}function Dre(t){var{shape:a,baseProps:r,entry:s,index:n,dataKey:i}=t;return x.createElement(I3,du({},r,s,{isActive:!1,option:a,index:n,dataKey:i}))}function Ore(t){var{data:a,props:r}=t,s=Ao(r),{id:n}=s,i=Xg(s,jre),{shape:o,dataKey:c,activeBar:u}=r,{onMouseEnter:m,onClick:h,onMouseLeave:p}=r,y=Xg(r,Nre),g=P3(m,c),v=D3(p),N=O3(h,c);return a?x.createElement(x.Fragment,null,a.map((w,j)=>x.createElement(ps,du({className:"recharts-bar-rectangle"},Jf(y,w,j),{onMouseEnter:g(w,j),onMouseLeave:v(w,j),onClick:N(w,j),key:"rectangle-".concat(w?.x,"-").concat(w?.y,"-").concat(w?.value,"-").concat(j)}),u?x.createElement(Pre,{shape:o,activeBar:u,baseProps:i,entry:w,index:j,dataKey:c}):x.createElement(Dre,{shape:o,baseProps:i,entry:w,index:j,dataKey:c})))):null}function Lre(t){var{props:a,previousRectanglesRef:r}=t,{data:s,layout:n,isAnimationActive:i,animationBegin:o,animationDuration:c,animationEasing:u,onAnimationEnd:m,onAnimationStart:h}=a,p=r.current,y=Kh(a,"recharts-bar-"),[g,v]=x.useState(!1),N=!g,w=x.useCallback(()=>{typeof m=="function"&&m(),v(!1)},[m]),j=x.useCallback(()=>{typeof h=="function"&&h(),v(!0)},[h]);return x.createElement(Tre,{showLabels:N,rects:s},x.createElement(Vh,{animationId:y,begin:o,duration:c,isActive:i,easing:u,onAnimationEnd:w,onAnimationStart:j,key:y},T=>{var k=T===1?s:s?.map((R,P)=>{var $=p&&p[P];if($)return ui(ui({},R),{},{x:jr($.x,R.x,T),y:jr($.y,R.y,T),width:jr($.width,R.width,T),height:jr($.height,R.height,T)});if(n==="horizontal"){var A=jr(0,R.height,T);return ui(ui({},R),{},{y:R.y+R.height-A,height:A})}var M=jr(0,R.width,T);return ui(ui({},R),{},{width:M})});return T>0&&(r.current=k??null),k==null?null:x.createElement(ps,null,x.createElement(Ore,{props:a,data:k}))}),x.createElement(nb,{label:a.label}),a.children)}function Mre(t){var a=x.useRef(null);return x.createElement(Lre,{previousRectanglesRef:a,props:t})}var GD=0,Rre=(t,a)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:pr(t,a)}};class Ire extends x.PureComponent{render(){var{hide:a,data:r,dataKey:s,className:n,xAxisId:i,yAxisId:o,needClip:c,background:u,id:m}=this.props;if(a||r==null)return null;var h=Qa("recharts-bar",n),p=m;return x.createElement(ps,{className:h,id:m},c&&x.createElement("defs",null,x.createElement(z3,{clipPathId:p,xAxisId:i,yAxisId:o})),x.createElement(ps,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(p,")"):void 0},x.createElement(Ere,{data:r,dataKey:s,background:u,allOtherBarProps:this.props}),x.createElement(Mre,this.props)))}}var zre={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!hu.isSsr,legendType:"rect",minPointSize:GD,xAxisId:0,yAxisId:0};function $re(t){var{xAxisId:a,yAxisId:r,hide:s,legendType:n,minPointSize:i,activeBar:o,animationBegin:c,animationDuration:u,animationEasing:m,isAnimationActive:h}=t,{needClip:p}=cb(a,r),y=tp(),g=Vn(),v=QN(t.children,wo),N=Qt(T=>mse(T,a,r,g,t.id,v));if(y!=="vertical"&&y!=="horizontal")return null;var w,j=N?.[0];return j==null||j.height==null||j.width==null?w=0:w=y==="vertical"?j.height/2:j.width/2,x.createElement(YD,{xAxisId:a,yAxisId:r,data:N,dataPointFormatter:Rre,errorBarOffset:w},x.createElement(Ire,du({},t,{layout:y,needClip:p,data:N,xAxisId:a,yAxisId:r,hide:s,legendType:n,minPointSize:i,activeBar:o,animationBegin:c,animationDuration:u,animationEasing:m,isAnimationActive:h})))}function Bre(t){var{layout:a,barSettings:{dataKey:r,minPointSize:s},pos:n,bandSize:i,xAxis:o,yAxis:c,xAxisTicks:u,yAxisTicks:m,stackedData:h,displayedData:p,offset:y,cells:g,parentViewBox:v}=t,N=a==="horizontal"?c:o,w=h?N.scale.domain():null,j=aG({numericAxis:N});return p.map((T,k)=>{var R,P,$,A,M,_;h?R=JY(h[k],w):(R=pr(T,r),Array.isArray(R)||(R=[j,R]));var B=ure(s,GD)(R[1],k);if(a==="horizontal"){var D,[C,L]=[c.scale(R[0]),c.scale(R[1])];P=z_({axis:o,ticks:u,bandSize:i,offset:n.offset,entry:T,index:k}),$=(D=L??C)!==null&&D!==void 0?D:void 0,A=n.size;var H=C-L;if(M=Ii(H)?0:H,_={x:P,y:y.top,width:A,height:y.height},Math.abs(B)>0&&Math.abs(M)<Math.abs(B)){var V=un(M||B)*(Math.abs(B)-Math.abs(M));$-=V,M+=V}}else{var[Y,J]=[o.scale(R[0]),o.scale(R[1])];if(P=Y,$=z_({axis:c,ticks:m,bandSize:i,offset:n.offset,entry:T,index:k}),A=J-Y,M=n.size,_={x:y.left,y:$,width:y.width,height:M},Math.abs(B)>0&&Math.abs(A)<Math.abs(B)){var W=un(A||B)*(Math.abs(B)-Math.abs(A));A+=W}}if(P==null||$==null||A==null||M==null)return null;var X=ui(ui({},T),{},{x:P,y:$,width:A,height:M,value:h?R:R[1],payload:T,background:_,tooltipPosition:{x:P+A/2,y:$+M/2},parentViewBox:v},g&&g[k]&&g[k].props);return X}).filter(Boolean)}function Fl(t){var a=Kn(t,zre),r=Vn();return x.createElement(lb,{id:a.id,type:"bar"},s=>x.createElement(x.Fragment,null,x.createElement(L3,{legendPayload:kre(a)}),x.createElement(ib,{fn:Are,args:a}),x.createElement(M3,{type:"bar",id:s,data:void 0,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:0,dataKey:a.dataKey,stackId:aT(a.stackId),hide:a.hide,barSize:a.barSize,minPointSize:a.minPointSize,maxBarSize:a.maxBarSize,isPanorama:r}),x.createElement($re,du({},a,{id:s}))))}Fl.displayName="Bar";function ek(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function M0(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?ek(Object(r),!0).forEach(function(s){Fre(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ek(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Fre(t,a,r){return(a=qre(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function qre(t){var a=Ure(t,"string");return typeof a=="symbol"?a:a+""}function Ure(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var Wre=(t,a)=>a,Hre=(t,a,r)=>r,Yre=(t,a,r,s)=>s,Gre=(t,a,r,s,n)=>n,fp=nt([dp,Gre],(t,a)=>t.filter(r=>r.type==="bar").find(r=>r.id===a)),Vre=nt([fp],t=>t?.maxBarSize),Kre=(t,a,r,s,n,i)=>i,tk=(t,a,r)=>{var s=r??t;if(!Fr(s))return Yn(s,a,0)},Xre=nt([Ua,dp,Wre,Hre,Yre],(t,a,r,s,n)=>a.filter(i=>t==="horizontal"?i.xAxisId===r:i.yAxisId===s).filter(i=>i.isPanorama===n).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),Jre=(t,a,r,s)=>{var n=Ua(t);return n==="horizontal"?$f(t,"yAxis",r,s):$f(t,"xAxis",a,s)},Zre=(t,a,r)=>{var s=Ua(t);return s==="horizontal"?t8(t,"xAxis",a):t8(t,"yAxis",r)},Qre=(t,a,r)=>{var s={},n=t.filter(Jy),i=t.filter(m=>m.stackId==null),o=n.reduce((m,h)=>(m[h.stackId]||(m[h.stackId]=[]),m[h.stackId].push(h),m),s),c=Object.entries(o).map(m=>{var[h,p]=m,y=p.map(v=>v.dataKey),g=tk(a,r,p[0].barSize);return{stackId:h,dataKeys:y,barSize:g}}),u=i.map(m=>{var h=[m.dataKey].filter(y=>y!=null),p=tk(a,r,m.barSize);return{stackId:void 0,dataKeys:h,barSize:p}});return[...c,...u]},ese=nt([Xre,RJ,Zre],Qre),tse=(t,a,r,s,n)=>{var i,o,c=fp(t,a,r,s,n);if(c!=null){var u=Ua(t),m=xP(t),{maxBarSize:h}=c,p=Fr(h)?m:h,y,g;return u==="horizontal"?(y=lc(t,"xAxis",a,s),g=ic(t,"xAxis",a,s)):(y=lc(t,"yAxis",r,s),g=ic(t,"yAxis",r,s)),(i=(o=vm(y,g,!0))!==null&&o!==void 0?o:p)!==null&&i!==void 0?i:0}},VD=(t,a,r,s)=>{var n=Ua(t),i,o;return n==="horizontal"?(i=lc(t,"xAxis",a,s),o=ic(t,"xAxis",a,s)):(i=lc(t,"yAxis",r,s),o=ic(t,"yAxis",r,s)),vm(i,o)};function ase(t,a,r,s,n){var i=s.length;if(!(i<1)){var o=Yn(t,r,0,!0),c,u=[];if(En(s[0].barSize)){var m=!1,h=r/i,p=s.reduce((j,T)=>j+(T.barSize||0),0);p+=(i-1)*o,p>=r&&(p-=(i-1)*o,o=0),p>=r&&h>0&&(m=!0,h*=.9,p=i*h);var y=(r-p)/2>>0,g={offset:y-o,size:0};c=s.reduce((j,T)=>{var k,R={stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:g.offset+g.size+o,size:m?h:(k=T.barSize)!==null&&k!==void 0?k:0}},P=[...j,R];return g=P[P.length-1].position,P},u)}else{var v=Yn(a,r,0,!0);r-2*v-(i-1)*o<=0&&(o=0);var N=(r-2*v-(i-1)*o)/i;N>1&&(N>>=0);var w=En(n)?Math.min(N,n):N;c=s.reduce((j,T,k)=>[...j,{stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:v+(N+o)*k+(N-w)/2,size:w}}],u)}return c}}var rse=(t,a,r,s,n,i,o)=>{var c=Fr(o)?a:o,u=ase(r,s,n!==i?n:i,t,c);return n!==i&&u!=null&&(u=u.map(m=>M0(M0({},m),{},{position:M0(M0({},m.position),{},{offset:m.position.offset-n/2})}))),u},sse=nt([ese,xP,MJ,fP,tse,VD,Vre],rse),nse=(t,a,r,s)=>lc(t,"xAxis",a,s),ise=(t,a,r,s)=>lc(t,"yAxis",r,s),lse=(t,a,r,s)=>ic(t,"xAxis",a,s),ose=(t,a,r,s)=>ic(t,"yAxis",r,s),cse=nt([sse,fp],(t,a)=>{if(!(t==null||a==null)){var r=t.find(s=>s.stackId===a.stackId&&a.dataKey!=null&&s.dataKeys.includes(a.dataKey));if(r!=null)return r.position}}),dse=(t,a)=>{var r=Xy(a);if(!(!t||r==null||a==null)){var{stackId:s}=a;if(s!=null){var n=t[s];if(n){var{stackedData:i}=n;if(i)return i.find(o=>o.key===r)}}}},use=nt([Jre,fp],dse),mse=nt([Zs,f5,nse,ise,lse,ose,cse,Ua,ip,VD,use,fp,Kre],(t,a,r,s,n,i,o,c,u,m,h,p,y)=>{var{chartData:g,dataStartIndex:v,dataEndIndex:N}=u;if(!(p==null||o==null||a==null||c!=="horizontal"&&c!=="vertical"||r==null||s==null||n==null||i==null||m==null)){var{data:w}=p,j;if(w!=null&&w.length>0?j=w:j=g?.slice(v,N+1),j!=null)return Bre({layout:c,barSettings:p,pos:o,parentViewBox:a,bandSize:m,xAxis:r,yAxis:s,xAxisTicks:n,yAxisTicks:i,stackedData:h,displayedData:j,offset:t,cells:y})}}),KD=t=>{var{chartData:a}=t,r=is(),s=Vn();return x.useEffect(()=>s?()=>{}:(r(u8(a)),()=>{r(u8(void 0))}),[a,r,s]),null},ak={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},XD=ol({name:"brush",initialState:ak,reducers:{setBrushSettings(t,a){return a.payload==null?ak:a.payload}}}),{setBrushSettings:Xme}=XD.actions,hse=XD.reducer;function xse(t,a,r){return(a=fse(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function fse(t){var a=pse(t,"string");return typeof a=="symbol"?a:a+""}function pse(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}class $3{static create(a){return new $3(a)}constructor(a){this.scale=a}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(a){var{bandAware:r,position:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a!==void 0){if(s)switch(s){case"start":return this.scale(a);case"middle":{var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+n}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(a)+i}default:return this.scale(a)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+o}return this.scale(a)}}isInRange(a){var r=this.range(),s=r[0],n=r[r.length-1];return s<=n?a>=s&&a<=n:a>=n&&a<=s}}xse($3,"EPS",1e-4);function gse(t){return(t%180+180)%180}var yse=function(a){var{width:r,height:s}=a,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=gse(n),o=i*Math.PI/180,c=Math.atan(s/r),u=o>c&&o<Math.PI-c?s/Math.sin(o):r/Math.cos(o);return Math.abs(u)},bse={dots:[],areas:[],lines:[]},JD=ol({name:"referenceElements",initialState:bse,reducers:{addDot:(t,a)=>{t.dots.push(a.payload)},removeDot:(t,a)=>{var r=Yc(t).dots.findIndex(s=>s===a.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,a)=>{t.areas.push(a.payload)},removeArea:(t,a)=>{var r=Yc(t).areas.findIndex(s=>s===a.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,a)=>{t.lines.push(a.payload)},removeLine:(t,a)=>{var r=Yc(t).lines.findIndex(s=>s===a.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:Jme,removeDot:Zme,addArea:Qme,removeArea:ehe,addLine:the,removeLine:ahe}=JD.actions,vse=JD.reducer,jse=x.createContext(void 0),Nse=t=>{var{children:a}=t,[r]=x.useState("".concat(Tf("recharts"),"-clip")),s=ob();if(s==null)return null;var{x:n,y:i,width:o,height:c}=s;return x.createElement(jse.Provider,{value:r},x.createElement("defs",null,x.createElement("clipPath",{id:r},x.createElement("rect",{x:n,y:i,height:c,width:o}))),a)};function g2(t,a){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(a,r)||t[r]!==a[r]))return!1;for(var s in a)if({}.hasOwnProperty.call(a,s)&&!{}.hasOwnProperty.call(t,s))return!1;return!0}function ZD(t,a,r){if(a<1)return[];if(a===1&&r===void 0)return t;for(var s=[],n=0;n<t.length;n+=a)s.push(t[n]);return s}function wse(t,a,r){var s={width:t.width+a.width,height:t.height+a.height};return yse(s,r)}function Sse(t,a,r){var s=r==="width",{x:n,y:i,width:o,height:c}=t;return a===1?{start:s?n:i,end:s?n+o:i+c}:{start:s?n+o:i+c,end:s?n:i}}function Jg(t,a,r,s,n){if(t*a<t*s||t*a>t*n)return!1;var i=r();return t*(a-t*i/2-s)>=0&&t*(a+t*i/2-n)<=0}function _se(t,a){return ZD(t,a+1)}function Cse(t,a,r,s,n){for(var i=(s||[]).slice(),{start:o,end:c}=a,u=0,m=1,h=o,p=function(){var v=s?.[u];if(v===void 0)return{v:ZD(s,m)};var N=u,w,j=()=>(w===void 0&&(w=r(v,N)),w),T=v.coordinate,k=u===0||Jg(t,T,j,h,c);k||(u=0,h=o,m+=1),k&&(h=T+t*(j()/2+n),u+=m)},y;m<=i.length;)if(y=p(),y)return y.v;return[]}function rk(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Fn(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?rk(Object(r),!0).forEach(function(s){kse(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rk(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function kse(t,a,r){return(a=Ase(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Ase(t){var a=Ese(t,"string");return typeof a=="symbol"?a:a+""}function Ese(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function Tse(t,a,r,s,n){for(var i=(s||[]).slice(),o=i.length,{start:c}=a,{end:u}=a,m=function(y){var g=i[y],v,N=()=>(v===void 0&&(v=r(g,y)),v);if(y===o-1){var w=t*(g.coordinate+t*N()/2-u);i[y]=g=Fn(Fn({},g),{},{tickCoord:w>0?g.coordinate-w*t:g.coordinate})}else i[y]=g=Fn(Fn({},g),{},{tickCoord:g.coordinate});var j=Jg(t,g.tickCoord,N,c,u);j&&(u=g.tickCoord-t*(N()/2+n),i[y]=Fn(Fn({},g),{},{isShow:!0}))},h=o-1;h>=0;h--)m(h);return i}function Pse(t,a,r,s,n,i){var o=(s||[]).slice(),c=o.length,{start:u,end:m}=a;if(i){var h=s[c-1],p=r(h,c-1),y=t*(h.coordinate+t*p/2-m);o[c-1]=h=Fn(Fn({},h),{},{tickCoord:y>0?h.coordinate-y*t:h.coordinate});var g=Jg(t,h.tickCoord,()=>p,u,m);g&&(m=h.tickCoord-t*(p/2+n),o[c-1]=Fn(Fn({},h),{},{isShow:!0}))}for(var v=i?c-1:c,N=function(T){var k=o[T],R,P=()=>(R===void 0&&(R=r(k,T)),R);if(T===0){var $=t*(k.coordinate-t*P()/2-u);o[T]=k=Fn(Fn({},k),{},{tickCoord:$<0?k.coordinate-$*t:k.coordinate})}else o[T]=k=Fn(Fn({},k),{},{tickCoord:k.coordinate});var A=Jg(t,k.tickCoord,P,u,m);A&&(u=k.tickCoord+t*(P()/2+n),o[T]=Fn(Fn({},k),{},{isShow:!0}))},w=0;w<v;w++)N(w);return o}function B3(t,a,r){var{tick:s,ticks:n,viewBox:i,minTickGap:o,orientation:c,interval:u,tickFormatter:m,unit:h,angle:p}=t;if(!n||!n.length||!s)return[];if(ta(u)||hu.isSsr){var y;return(y=_se(n,ta(u)?u:0))!==null&&y!==void 0?y:[]}var g=[],v=c==="top"||c==="bottom"?"width":"height",N=h&&v==="width"?jf(h,{fontSize:a,letterSpacing:r}):{width:0,height:0},w=(k,R)=>{var P=typeof m=="function"?m(k.value,R):k.value;return v==="width"?wse(jf(P,{fontSize:a,letterSpacing:r}),N,p):jf(P,{fontSize:a,letterSpacing:r})[v]},j=n.length>=2?un(n[1].coordinate-n[0].coordinate):1,T=Sse(i,j,v);return u==="equidistantPreserveStart"?Cse(j,T,w,n,o):(u==="preserveStart"||u==="preserveStartEnd"?g=Pse(j,T,w,n,o,u==="preserveStartEnd"):g=Tse(j,T,w,n,o),g.filter(k=>k.isShow))}var Dse=["viewBox"],Ose=["viewBox"];function gh(){return gh=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},gh.apply(null,arguments)}function sk(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Xs(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?sk(Object(r),!0).forEach(function(s){F3(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sk(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function nk(t,a){if(t==null)return{};var r,s,n=Lse(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lse(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function F3(t,a,r){return(a=Mse(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Mse(t){var a=Rse(t,"string");return typeof a=="symbol"?a:a+""}function Rse(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}class bu extends x.Component{constructor(a){super(a),this.tickRefs=x.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(a,r){var{viewBox:s}=a,n=nk(a,Dse),i=this.props,{viewBox:o}=i,c=nk(i,Ose);return!g2(s,o)||!g2(n,c)||!g2(r,this.state)}getTickLineCoord(a){var{x:r,y:s,width:n,height:i,orientation:o,tickSize:c,mirror:u,tickMargin:m}=this.props,h,p,y,g,v,N,w=u?-1:1,j=a.tickSize||c,T=ta(a.tickCoord)?a.tickCoord:a.coordinate;switch(o){case"top":h=p=a.coordinate,g=s+ +!u*i,y=g-w*j,N=y-w*m,v=T;break;case"left":y=g=a.coordinate,p=r+ +!u*n,h=p-w*j,v=h-w*m,N=T;break;case"right":y=g=a.coordinate,p=r+ +u*n,h=p+w*j,v=h+w*m,N=T;break;default:h=p=a.coordinate,g=s+ +u*i,y=g+w*j,N=y+w*m,v=T;break}return{line:{x1:h,y1:y,x2:p,y2:g},tick:{x:v,y:N}}}getTickTextAnchor(){var{orientation:a,mirror:r}=this.props;switch(a){case"left":return r?"start":"end";case"right":return r?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:a,mirror:r}=this.props;switch(a){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:a,y:r,width:s,height:n,orientation:i,mirror:o,axisLine:c}=this.props,u=Xs(Xs(Xs({},Or(this.props,!1)),Or(c,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var m=+(i==="top"&&!o||i==="bottom"&&o);u=Xs(Xs({},u),{},{x1:a,y1:r+m*n,x2:a+s,y2:r+m*n})}else{var h=+(i==="left"&&!o||i==="right"&&o);u=Xs(Xs({},u),{},{x1:a+h*s,y1:r,x2:a+h*s,y2:r+n})}return x.createElement("line",gh({},u,{className:Qa("recharts-cartesian-axis-line",gm(c,"className"))}))}static renderTickItem(a,r,s){var n,i=Qa(r.className,"recharts-cartesian-axis-tick-value");if(x.isValidElement(a))n=x.cloneElement(a,Xs(Xs({},r),{},{className:i}));else if(typeof a=="function")n=a(Xs(Xs({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof a!="boolean"&&(o=Qa(o,a.className)),n=x.createElement(sb,gh({},r,{className:o}),s)}return n}renderTicks(a,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:n,stroke:i,tick:o,tickFormatter:c,unit:u,padding:m,tickTextProps:h}=this.props,p=B3(Xs(Xs({},this.props),{},{ticks:s}),a,r),y=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),v=Ao(this.props),N=Or(o,!1),w=Xs(Xs({},v),{},{fill:"none"},Or(n,!1)),j=p.map((T,k)=>{var{line:R,tick:P}=this.getTickLineCoord(T),$=Xs(Xs(Xs(Xs({textAnchor:y,verticalAnchor:g},v),{},{stroke:"none",fill:i},N),P),{},{index:k,payload:T,visibleTicksCount:p.length,tickFormatter:c,padding:m},h);return x.createElement(ps,gh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},Jf(this.props,T,k)),n&&x.createElement("line",gh({},w,R,{className:Qa("recharts-cartesian-axis-tick-line",gm(n,"className"))})),o&&bu.renderTickItem(o,$,"".concat(typeof c=="function"?c(T.value,k):T.value).concat(u||"")))});return j.length>0?x.createElement("g",{className:"recharts-cartesian-axis-ticks"},j):null}render(){var{axisLine:a,width:r,height:s,className:n,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||s!=null&&s<=0?null:x.createElement(ps,{className:Qa("recharts-cartesian-axis",n),ref:c=>{if(c){var u=c.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(u);var m=u[0];if(m){var h=window.getComputedStyle(m).fontSize,p=window.getComputedStyle(m).letterSpacing;(h!==this.state.fontSize||p!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(m).fontSize,letterSpacing:window.getComputedStyle(m).letterSpacing})}}}},a&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),x.createElement(Qee,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},x.createElement(cte,{label:this.props.label}),this.props.children))}}F3(bu,"displayName","CartesianAxis");F3(bu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Ise=["x1","y1","x2","y2","key"],zse=["offset"],$se=["xAxisId","yAxisId"],Bse=["xAxisId","yAxisId"];function ik(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function qn(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?ik(Object(r),!0).forEach(function(s){Fse(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ik(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Fse(t,a,r){return(a=qse(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function qse(t){var a=Use(t,"string");return typeof a=="symbol"?a:a+""}function Use(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function tm(){return tm=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},tm.apply(null,arguments)}function Zg(t,a){if(t==null)return{};var r,s,n=Wse(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Wse(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var Hse=t=>{var{fill:a}=t;if(!a||a==="none")return null;var{fillOpacity:r,x:s,y:n,width:i,height:o,ry:c}=t;return x.createElement("rect",{x:s,y:n,ry:c,width:i,height:o,stroke:"none",fill:a,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function QD(t,a){var r;if(x.isValidElement(t))r=x.cloneElement(t,a);else if(typeof t=="function")r=t(a);else{var{x1:s,y1:n,x2:i,y2:o,key:c}=a,u=Zg(a,Ise),m=Ao(u),{offset:h}=m,p=Zg(m,zse);r=x.createElement("line",tm({},p,{x1:s,y1:n,x2:i,y2:o,fill:"none",key:c}))}return r}function Yse(t){var{x:a,width:r,horizontal:s=!0,horizontalPoints:n}=t;if(!s||!n||!n.length)return null;var{xAxisId:i,yAxisId:o}=t,c=Zg(t,$se),u=n.map((m,h)=>{var p=qn(qn({},c),{},{x1:a,y1:m,x2:a+r,y2:m,key:"line-".concat(h),index:h});return QD(s,p)});return x.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function Gse(t){var{y:a,height:r,vertical:s=!0,verticalPoints:n}=t;if(!s||!n||!n.length)return null;var{xAxisId:i,yAxisId:o}=t,c=Zg(t,Bse),u=n.map((m,h)=>{var p=qn(qn({},c),{},{x1:m,y1:a,x2:m,y2:a+r,key:"line-".concat(h),index:h});return QD(s,p)});return x.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function Vse(t){var{horizontalFill:a,fillOpacity:r,x:s,y:n,width:i,height:o,horizontalPoints:c,horizontal:u=!0}=t;if(!u||!a||!a.length)return null;var m=c.map(p=>Math.round(p+n-n)).sort((p,y)=>p-y);n!==m[0]&&m.unshift(0);var h=m.map((p,y)=>{var g=!m[y+1],v=g?n+o-p:m[y+1]-p;if(v<=0)return null;var N=y%a.length;return x.createElement("rect",{key:"react-".concat(y),y:p,x:s,height:v,width:i,stroke:"none",fill:a[N],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function Kse(t){var{vertical:a=!0,verticalFill:r,fillOpacity:s,x:n,y:i,width:o,height:c,verticalPoints:u}=t;if(!a||!r||!r.length)return null;var m=u.map(p=>Math.round(p+n-n)).sort((p,y)=>p-y);n!==m[0]&&m.unshift(0);var h=m.map((p,y)=>{var g=!m[y+1],v=g?n+o-p:m[y+1]-p;if(v<=0)return null;var N=y%r.length;return x.createElement("rect",{key:"react-".concat(y),x:p,y:i,width:v,height:c,stroke:"none",fill:r[N],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var Xse=(t,a)=>{var{xAxis:r,width:s,height:n,offset:i}=t;return eT(B3(qn(qn(qn({},bu.defaultProps),r),{},{ticks:tT(r),viewBox:{x:0,y:0,width:s,height:n}})),i.left,i.left+i.width,a)},Jse=(t,a)=>{var{yAxis:r,width:s,height:n,offset:i}=t;return eT(B3(qn(qn(qn({},bu.defaultProps),r),{},{ticks:tT(r),viewBox:{x:0,y:0,width:s,height:n}})),i.top,i.top+i.height,a)},Zse={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Pi(t){var a=g5(),r=y5(),s=iT(),n=qn(qn({},Kn(t,Zse)),{},{x:ta(t.x)?t.x:s.left,y:ta(t.y)?t.y:s.top,width:ta(t.width)?t.width:s.width,height:ta(t.height)?t.height:s.height}),{xAxisId:i,yAxisId:o,x:c,y:u,width:m,height:h,syncWithTicks:p,horizontalValues:y,verticalValues:g}=n,v=Vn(),N=Qt(_=>a8(_,"xAxis",i,v)),w=Qt(_=>a8(_,"yAxis",o,v));if(!ta(m)||m<=0||!ta(h)||h<=0||!ta(c)||c!==+c||!ta(u)||u!==+u)return null;var j=n.verticalCoordinatesGenerator||Xse,T=n.horizontalCoordinatesGenerator||Jse,{horizontalPoints:k,verticalPoints:R}=n;if((!k||!k.length)&&typeof T=="function"){var P=y&&y.length,$=T({yAxis:w?qn(qn({},w),{},{ticks:P?y:w.ticks}):void 0,width:a,height:r,offset:s},P?!0:p);vf(Array.isArray($),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof $,"]")),Array.isArray($)&&(k=$)}if((!R||!R.length)&&typeof j=="function"){var A=g&&g.length,M=j({xAxis:N?qn(qn({},N),{},{ticks:A?g:N.ticks}):void 0,width:a,height:r,offset:s},A?!0:p);vf(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof M,"]")),Array.isArray(M)&&(R=M)}return x.createElement("g",{className:"recharts-cartesian-grid"},x.createElement(Hse,{fill:n.fill,fillOpacity:n.fillOpacity,x:n.x,y:n.y,width:n.width,height:n.height,ry:n.ry}),x.createElement(Vse,tm({},n,{horizontalPoints:k})),x.createElement(Kse,tm({},n,{verticalPoints:R})),x.createElement(Yse,tm({},n,{offset:s,horizontalPoints:k,xAxis:N,yAxis:w})),x.createElement(Gse,tm({},n,{offset:s,verticalPoints:R,xAxis:N,yAxis:w})))}Pi.displayName="CartesianGrid";var eO=(t,a,r,s)=>lc(t,"xAxis",a,s),tO=(t,a,r,s)=>ic(t,"xAxis",a,s),aO=(t,a,r,s)=>lc(t,"yAxis",r,s),rO=(t,a,r,s)=>ic(t,"yAxis",r,s),Qse=nt([Ua,eO,aO,tO,rO],(t,a,r,s,n)=>dc(t,"xAxis")?vm(a,s,!1):vm(r,n,!1)),ene=(t,a,r,s,n)=>n;function tne(t){return t.type==="line"}var ane=nt([dp,ene],(t,a)=>t.filter(tne).find(r=>r.id===a)),rne=nt([Ua,eO,aO,tO,rO,ane,Qse,ip],(t,a,r,s,n,i,o,c)=>{var{chartData:u,dataStartIndex:m,dataEndIndex:h}=c;if(!(i==null||a==null||r==null||s==null||n==null||s.length===0||n.length===0||o==null)){var{dataKey:p,data:y}=i,g;if(y!=null&&y.length>0?g=y:g=u?.slice(m,h+1),g!=null)return _ne({layout:t,xAxis:a,yAxis:r,xAxisTicks:s,yAxisTicks:n,dataKey:p,bandSize:o,displayedData:g})}}),sne=["id"],nne=["type","layout","connectNulls","needClip"],ine=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function lk(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function tl(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?lk(Object(r),!0).forEach(function(s){lne(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lk(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function lne(t,a,r){return(a=one(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function one(t){var a=cne(t,"string");return typeof a=="symbol"?a:a+""}function cne(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function q3(t,a){if(t==null)return{};var r,s,n=dne(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dne(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function Nm(){return Nm=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Nm.apply(null,arguments)}var une=t=>{var{dataKey:a,name:r,stroke:s,legendType:n,hide:i}=t;return[{inactive:i,dataKey:a,type:n,color:s,value:mu(r,a),payload:t}]};function mne(t){var{dataKey:a,data:r,stroke:s,strokeWidth:n,fill:i,name:o,hide:c,unit:u}=t;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:s,strokeWidth:n,fill:i,dataKey:a,nameKey:void 0,name:mu(o,a),hide:c,type:t.tooltipType,color:t.stroke,unit:u}}}var sO=(t,a)=>"".concat(a,"px ").concat(t-a,"px");function hne(t,a){for(var r=t.length%2!==0?[...t,0]:t,s=[],n=0;n<a;++n)s=[...s,...r];return s}var xne=(t,a,r)=>{var s=r.reduce((p,y)=>p+y);if(!s)return sO(a,t);for(var n=Math.floor(t/s),i=t%s,o=a-t,c=[],u=0,m=0;u<r.length;m+=r[u],++u)if(m+r[u]>i){c=[...r.slice(0,u),i-m];break}var h=c.length%2===0?[0,o]:[o];return[...hne(r,n),...c,...h].map(p=>"".concat(p,"px")).join(", ")};function fne(t,a){var r;if(x.isValidElement(t))r=x.cloneElement(t,a);else if(typeof t=="function")r=t(a);else{var s=Qa("recharts-line-dot",typeof t!="boolean"?t.className:"");r=x.createElement(C3,Nm({},a,{className:s}))}return r}function pne(t,a){return t==null?!1:a?!0:t.length===1}function gne(t){var{clipPathId:a,points:r,props:s}=t,{dot:n,dataKey:i,needClip:o}=s;if(!pne(r,n))return null;var{id:c}=s,u=q3(s,sne),m=Cy(n),h=Ao(u),p=Or(n,!0),y=r.map((v,N)=>{var w=tl(tl(tl({key:"dot-".concat(N),r:3},h),p),{},{index:N,cx:v.x,cy:v.y,dataKey:i,value:v.value,payload:v.payload,points:r});return fne(n,w)}),g={clipPath:o?"url(#clipPath-".concat(m?"":"dots-").concat(a,")"):void 0};return x.createElement(ps,Nm({className:"recharts-line-dots",key:"dots"},g),y)}function yne(t){var{showLabels:a,children:r,points:s}=t,n=x.useMemo(()=>s?.map(i=>{var o={x:i.x,y:i.y,width:0,height:0};return tl(tl({},o),{},{value:i.value,payload:i.payload,viewBox:o,parentViewBox:void 0,fill:void 0})}),[s]);return x.createElement(_3,{value:a?n:null},r)}function ok(t){var{clipPathId:a,pathRef:r,points:s,strokeDasharray:n,props:i}=t,{type:o,layout:c,connectNulls:u,needClip:m}=i,h=q3(i,nne),p=tl(tl({},Or(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:m?"url(#clipPath-".concat(a,")"):void 0,points:s,type:o,layout:c,connectNulls:u,strokeDasharray:n??i.strokeDasharray});return x.createElement(x.Fragment,null,s?.length>1&&x.createElement(wh,Nm({},p,{pathRef:r})),x.createElement(gne,{points:s,clipPathId:a,props:i}))}function bne(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function vne(t){var{clipPathId:a,props:r,pathRef:s,previousPointsRef:n,longestAnimatedLengthRef:i}=t,{points:o,strokeDasharray:c,isAnimationActive:u,animationBegin:m,animationDuration:h,animationEasing:p,animateNewValues:y,width:g,height:v,onAnimationEnd:N,onAnimationStart:w}=r,j=n.current,T=Kh(r,"recharts-line-"),[k,R]=x.useState(!1),P=!k,$=x.useCallback(()=>{typeof N=="function"&&N(),R(!1)},[N]),A=x.useCallback(()=>{typeof w=="function"&&w(),R(!0)},[w]),M=bne(s.current),_=i.current;return x.createElement(yne,{points:o,showLabels:P},r.children,x.createElement(Vh,{animationId:T,begin:m,duration:h,isActive:u,easing:p,onAnimationEnd:$,onAnimationStart:A,key:T},B=>{var D=jr(_,M+_,B),C=Math.min(D,M),L;if(u)if(c){var H="".concat(c).split(/[,\s]+/gim).map(J=>parseFloat(J));L=xne(C,M,H)}else L=sO(M,C);else L=c==null?void 0:String(c);if(j){var V=j.length/o.length,Y=B===1?o:o.map((J,W)=>{var X=Math.floor(W*V);if(j[X]){var te=j[X];return tl(tl({},J),{},{x:jr(te.x,J.x,B),y:jr(te.y,J.y,B)})}return y?tl(tl({},J),{},{x:jr(g*2,J.x,B),y:jr(v/2,J.y,B)}):tl(tl({},J),{},{x:J.x,y:J.y})});return n.current=Y,x.createElement(ok,{props:r,points:Y,clipPathId:a,pathRef:s,strokeDasharray:L})}return B>0&&M>0&&(n.current=o,i.current=C),x.createElement(ok,{props:r,points:o,clipPathId:a,pathRef:s,strokeDasharray:L})}),x.createElement(nb,{label:r.label}))}function jne(t){var{clipPathId:a,props:r}=t,s=x.useRef(null),n=x.useRef(0),i=x.useRef(null);return x.createElement(vne,{props:r,clipPathId:a,previousPointsRef:s,longestAnimatedLengthRef:n,pathRef:i})}var Nne=(t,a)=>({x:t.x,y:t.y,value:t.value,errorVal:pr(t.payload,a)});class wne extends x.Component{render(){var a,{hide:r,dot:s,points:n,className:i,xAxisId:o,yAxisId:c,top:u,left:m,width:h,height:p,id:y,needClip:g}=this.props;if(r)return null;var v=Qa("recharts-line",i),N=y,{r:w=3,strokeWidth:j=2}=(a=Or(s,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},T=Cy(s),k=w*2+j;return x.createElement(x.Fragment,null,x.createElement(ps,{className:v},g&&x.createElement("defs",null,x.createElement(z3,{clipPathId:N,xAxisId:o,yAxisId:c}),!T&&x.createElement("clipPath",{id:"clipPath-dots-".concat(N)},x.createElement("rect",{x:m-k/2,y:u-k/2,width:h+k,height:p+k}))),x.createElement(YD,{xAxisId:o,yAxisId:c,data:n,dataPointFormatter:Nne,errorBarOffset:0},x.createElement(jne,{props:this.props,clipPathId:N}))),x.createElement(iN,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var nO={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!hu.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function Sne(t){var a=Kn(t,nO),{activeDot:r,animateNewValues:s,animationBegin:n,animationDuration:i,animationEasing:o,connectNulls:c,dot:u,hide:m,isAnimationActive:h,label:p,legendType:y,xAxisId:g,yAxisId:v,id:N}=a,w=q3(a,ine),{needClip:j}=cb(g,v),T=ob(),k=tp(),R=Vn(),P=Qt(B=>rne(B,g,v,R,N));if(k!=="horizontal"&&k!=="vertical"||P==null||T==null)return null;var{height:$,width:A,x:M,y:_}=T;return x.createElement(wne,Nm({},w,{id:N,connectNulls:c,dot:u,activeDot:r,animateNewValues:s,animationBegin:n,animationDuration:i,animationEasing:o,isAnimationActive:h,hide:m,label:p,legendType:y,xAxisId:g,yAxisId:v,points:P,layout:k,height:$,width:A,left:M,top:_,needClip:j}))}function _ne(t){var{layout:a,xAxis:r,yAxis:s,xAxisTicks:n,yAxisTicks:i,dataKey:o,bandSize:c,displayedData:u}=t;return u.map((m,h)=>{var p=pr(m,o);if(a==="horizontal"){var y=Tg({axis:r,ticks:n,bandSize:c,entry:m,index:h}),g=Fr(p)?null:s.scale(p);return{x:y,y:g,value:p,payload:m}}var v=Fr(p)?null:r.scale(p),N=Tg({axis:s,ticks:i,bandSize:c,entry:m,index:h});return v==null||N==null?null:{x:v,y:N,value:p,payload:m}}).filter(Boolean)}function pp(t){var a=Kn(t,nO),r=Vn();return x.createElement(lb,{id:a.id,type:"line"},s=>x.createElement(x.Fragment,null,x.createElement(L3,{legendPayload:une(a)}),x.createElement(ib,{fn:mne,args:a}),x.createElement(M3,{type:"line",id:s,data:a.data,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:0,dataKey:a.dataKey,hide:a.hide,isPanorama:r}),x.createElement(Sne,Nm({},a,{id:s}))))}pp.displayName="Line";var iO=(t,a,r,s)=>lc(t,"xAxis",a,s),lO=(t,a,r,s)=>ic(t,"xAxis",a,s),oO=(t,a,r,s)=>lc(t,"yAxis",r,s),cO=(t,a,r,s)=>ic(t,"yAxis",r,s),Cne=nt([Ua,iO,oO,lO,cO],(t,a,r,s,n)=>dc(t,"xAxis")?vm(a,s,!1):vm(r,n,!1)),kne=(t,a,r,s,n)=>n,dO=nt([dp,kne],(t,a)=>t.filter(r=>r.type==="area").find(r=>r.id===a)),Ane=(t,a,r,s,n)=>{var i,o=dO(t,a,r,s,n);if(o!=null){var c=Ua(t),u=dc(c,"xAxis"),m;if(u?m=$f(t,"yAxis",r,s):m=$f(t,"xAxis",a,s),m!=null){var{stackId:h}=o,p=Xy(o);if(!(h==null||p==null)){var y=(i=m[h])===null||i===void 0?void 0:i.stackedData;return y?.find(g=>g.key===p)}}}},Ene=nt([Ua,iO,oO,lO,cO,Ane,ip,Cne,dO],(t,a,r,s,n,i,o,c,u)=>{var{chartData:m,dataStartIndex:h,dataEndIndex:p}=o;if(!(u==null||t!=="horizontal"&&t!=="vertical"||a==null||r==null||s==null||n==null||s.length===0||n.length===0||c==null)){var{data:y}=u,g;if(y&&y.length>0?g=y:g=m?.slice(h,p+1),g!=null){var v=void 0;return Xne({layout:t,xAxis:a,yAxis:r,xAxisTicks:s,yAxisTicks:n,dataStartIndex:h,areaSettings:u,stackedData:i,displayedData:g,chartBaseValue:v,bandSize:c})}}}),Tne=["id"],Pne=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function uO(t,a){if(t==null)return{};var r,s,n=Dne(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Dne(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function ck(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Hc(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?ck(Object(r),!0).forEach(function(s){One(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ck(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function One(t,a,r){return(a=Lne(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Lne(t){var a=Mne(t,"string");return typeof a=="symbol"?a:a+""}function Mne(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function Vc(){return Vc=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Vc.apply(null,arguments)}function Qg(t,a){return t&&t!=="none"?t:a}var Rne=t=>{var{dataKey:a,name:r,stroke:s,fill:n,legendType:i,hide:o}=t;return[{inactive:o,dataKey:a,type:i,color:Qg(s,n),value:mu(r,a),payload:t}]};function Ine(t){var{dataKey:a,data:r,stroke:s,strokeWidth:n,fill:i,name:o,hide:c,unit:u}=t;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:s,strokeWidth:n,fill:i,dataKey:a,nameKey:void 0,name:mu(o,a),hide:c,type:t.tooltipType,color:Qg(s,i),unit:u}}}var zne=(t,a)=>{var r;if(x.isValidElement(t))r=x.cloneElement(t,a);else if(typeof t=="function")r=t(a);else{var s=Qa("recharts-area-dot",typeof t!="boolean"?t.className:"");r=x.createElement(C3,Vc({},a,{className:s}))}return r};function $ne(t,a){return t==null?!1:a?!0:t.length===1}function Bne(t){var{clipPathId:a,points:r,props:s}=t,{needClip:n,dot:i,dataKey:o}=s;if(!$ne(r,i))return null;var c=Cy(i),u=Ao(s),m=Or(i,!0),h=r.map((y,g)=>{var v=Hc(Hc(Hc({key:"dot-".concat(g),r:3},u),m),{},{index:g,cx:y.x,cy:y.y,dataKey:o,value:y.value,payload:y.payload,points:r});return zne(i,v)}),p={clipPath:n?"url(#clipPath-".concat(c?"":"dots-").concat(a,")"):void 0};return x.createElement(ps,Vc({className:"recharts-area-dots"},p),h)}function Fne(t){var{showLabels:a,children:r,points:s}=t,n=s.map(i=>{var o={x:i.x,y:i.y,width:0,height:0};return Hc(Hc({},o),{},{value:i.value,payload:i.payload,parentViewBox:void 0,viewBox:o,fill:void 0})});return x.createElement(_3,{value:a?n:null},r)}function dk(t){var{points:a,baseLine:r,needClip:s,clipPathId:n,props:i}=t,{layout:o,type:c,stroke:u,connectNulls:m,isRange:h}=i,{id:p}=i,y=uO(i,Tne),g=Ao(y);return x.createElement(x.Fragment,null,a?.length>1&&x.createElement(ps,{clipPath:s?"url(#clipPath-".concat(n,")"):void 0},x.createElement(wh,Vc({},g,{id:p,points:a,connectNulls:m,type:c,baseLine:r,layout:o,stroke:"none",className:"recharts-area-area"})),u!=="none"&&x.createElement(wh,Vc({},g,{className:"recharts-area-curve",layout:o,type:c,connectNulls:m,fill:"none",points:a})),u!=="none"&&h&&x.createElement(wh,Vc({},g,{className:"recharts-area-curve",layout:o,type:c,connectNulls:m,fill:"none",points:r}))),x.createElement(Bne,{points:a,props:y,clipPathId:n}))}function qne(t){var{alpha:a,baseLine:r,points:s,strokeWidth:n}=t,i=s[0].y,o=s[s.length-1].y;if(!En(i)||!En(o))return null;var c=a*Math.abs(i-o),u=Math.max(...s.map(m=>m.x||0));return ta(r)?u=Math.max(r,u):r&&Array.isArray(r)&&r.length&&(u=Math.max(...r.map(m=>m.x||0),u)),ta(u)?x.createElement("rect",{x:0,y:i<o?i:i-c,width:u+(n?parseInt("".concat(n),10):1),height:Math.floor(c)}):null}function Une(t){var{alpha:a,baseLine:r,points:s,strokeWidth:n}=t,i=s[0].x,o=s[s.length-1].x;if(!En(i)||!En(o))return null;var c=a*Math.abs(i-o),u=Math.max(...s.map(m=>m.y||0));return ta(r)?u=Math.max(r,u):r&&Array.isArray(r)&&r.length&&(u=Math.max(...r.map(m=>m.y||0),u)),ta(u)?x.createElement("rect",{x:i<o?i:i-c,y:0,width:c,height:Math.floor(u+(n?parseInt("".concat(n),10):1))}):null}function Wne(t){var{alpha:a,layout:r,points:s,baseLine:n,strokeWidth:i}=t;return r==="vertical"?x.createElement(qne,{alpha:a,points:s,baseLine:n,strokeWidth:i}):x.createElement(Une,{alpha:a,points:s,baseLine:n,strokeWidth:i})}function Hne(t){var{needClip:a,clipPathId:r,props:s,previousPointsRef:n,previousBaselineRef:i}=t,{points:o,baseLine:c,isAnimationActive:u,animationBegin:m,animationDuration:h,animationEasing:p,onAnimationStart:y,onAnimationEnd:g}=s,v=Kh(s,"recharts-area-"),[N,w]=x.useState(!1),j=!N,T=x.useCallback(()=>{typeof g=="function"&&g(),w(!1)},[g]),k=x.useCallback(()=>{typeof y=="function"&&y(),w(!0)},[y]),R=n.current,P=i.current;return x.createElement(Fne,{showLabels:j,points:o},s.children,x.createElement(Vh,{animationId:v,begin:m,duration:h,isActive:u,easing:p,onAnimationEnd:T,onAnimationStart:k,key:v},$=>{if(R){var A=R.length/o.length,M=$===1?o:o.map((B,D)=>{var C=Math.floor(D*A);if(R[C]){var L=R[C];return Hc(Hc({},B),{},{x:jr(L.x,B.x,$),y:jr(L.y,B.y,$)})}return B}),_;return ta(c)?_=jr(P,c,$):Fr(c)||Ii(c)?_=jr(P,0,$):_=c.map((B,D)=>{var C=Math.floor(D*A);if(Array.isArray(P)&&P[C]){var L=P[C];return Hc(Hc({},B),{},{x:jr(L.x,B.x,$),y:jr(L.y,B.y,$)})}return B}),$>0&&(n.current=M,i.current=_),x.createElement(dk,{points:M,baseLine:_,needClip:a,clipPathId:r,props:s})}return $>0&&(n.current=o,i.current=c),x.createElement(ps,null,u&&x.createElement("defs",null,x.createElement("clipPath",{id:"animationClipPath-".concat(r)},x.createElement(Wne,{alpha:$,points:o,baseLine:c,layout:s.layout,strokeWidth:s.strokeWidth}))),x.createElement(ps,{clipPath:"url(#animationClipPath-".concat(r,")")},x.createElement(dk,{points:o,baseLine:c,needClip:a,clipPathId:r,props:s})))}),x.createElement(nb,{label:s.label}))}function Yne(t){var{needClip:a,clipPathId:r,props:s}=t,n=x.useRef(null),i=x.useRef();return x.createElement(Hne,{needClip:a,clipPathId:r,props:s,previousPointsRef:n,previousBaselineRef:i})}class Gne extends x.PureComponent{render(){var a,{hide:r,dot:s,points:n,className:i,top:o,left:c,needClip:u,xAxisId:m,yAxisId:h,width:p,height:y,id:g,baseLine:v}=this.props;if(r)return null;var N=Qa("recharts-area",i),w=g,{r:j=3,strokeWidth:T=2}=(a=Or(s,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},k=Cy(s),R=j*2+T;return x.createElement(x.Fragment,null,x.createElement(ps,{className:N},u&&x.createElement("defs",null,x.createElement(z3,{clipPathId:w,xAxisId:m,yAxisId:h}),!k&&x.createElement("clipPath",{id:"clipPath-dots-".concat(w)},x.createElement("rect",{x:c-R/2,y:o-R/2,width:p+R,height:y+R}))),x.createElement(Yne,{needClip:u,clipPathId:w,props:this.props})),x.createElement(iN,{points:n,mainColor:Qg(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(v)&&x.createElement(iN,{points:v,mainColor:Qg(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var mO={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!hu.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function Vne(t){var a,r=Kn(t,mO),{activeDot:s,animationBegin:n,animationDuration:i,animationEasing:o,connectNulls:c,dot:u,fill:m,fillOpacity:h,hide:p,isAnimationActive:y,legendType:g,stroke:v,xAxisId:N,yAxisId:w}=r,j=uO(r,Pne),T=tp(),k=yD(),{needClip:R}=cb(N,w),P=Vn(),{points:$,isRange:A,baseLine:M}=(a=Qt(H=>Ene(H,N,w,P,t.id)))!==null&&a!==void 0?a:{},_=ob();if(T!=="horizontal"&&T!=="vertical"||_==null||k!=="AreaChart"&&k!=="ComposedChart")return null;var{height:B,width:D,x:C,y:L}=_;return!$||!$.length?null:x.createElement(Gne,Vc({},j,{activeDot:s,animationBegin:n,animationDuration:i,animationEasing:o,baseLine:M,connectNulls:c,dot:u,fill:m,fillOpacity:h,height:B,hide:p,layout:T,isAnimationActive:y,isRange:A,legendType:g,needClip:R,points:$,stroke:v,width:D,left:C,top:L,xAxisId:N,yAxisId:w}))}var Kne=(t,a,r,s,n)=>{var i=r??a;if(ta(i))return i;var o=t==="horizontal"?n:s,c=o.scale.domain();if(o.type==="number"){var u=Math.max(c[0],c[1]),m=Math.min(c[0],c[1]);return i==="dataMin"?m:i==="dataMax"||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return i==="dataMin"?c[0]:i==="dataMax"?c[1]:c[0]};function Xne(t){var{areaSettings:{connectNulls:a,baseValue:r,dataKey:s},stackedData:n,layout:i,chartBaseValue:o,xAxis:c,yAxis:u,displayedData:m,dataStartIndex:h,xAxisTicks:p,yAxisTicks:y,bandSize:g}=t,v=n&&n.length,N=Kne(i,o,r,c,u),w=i==="horizontal",j=!1,T=m.map((R,P)=>{var $;v?$=n[h+P]:($=pr(R,s),Array.isArray($)?j=!0:$=[N,$]);var A=$[1]==null||v&&!a&&pr(R,s)==null;return w?{x:Tg({axis:c,ticks:p,bandSize:g,entry:R,index:P}),y:A?null:u.scale($[1]),value:$,payload:R}:{x:A?null:c.scale($[1]),y:Tg({axis:u,ticks:y,bandSize:g,entry:R,index:P}),value:$,payload:R}}),k;return v||j?k=T.map(R=>{var P=Array.isArray(R.value)?R.value[0]:null;return w?{x:R.x,y:P!=null&&R.y!=null?u.scale(P):null,payload:R.payload}:{x:P!=null?c.scale(P):null,y:R.y,payload:R.payload}}):k=w?u.scale(N):c.scale(N),{points:T,baseLine:k,isRange:j}}function hO(t){var a=Kn(t,mO),r=Vn();return x.createElement(lb,{id:a.id,type:"area"},s=>x.createElement(x.Fragment,null,x.createElement(L3,{legendPayload:Rne(a)}),x.createElement(ib,{fn:Ine,args:a}),x.createElement(M3,{type:"area",id:s,data:a.data,dataKey:a.dataKey,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:0,stackId:aT(a.stackId),hide:a.hide,barSize:void 0,baseValue:a.baseValue,isPanorama:r,connectNulls:a.connectNulls}),x.createElement(Vne,Vc({},a,{id:s}))))}hO.displayName="Area";var Jne=["children"],Zne=["dangerouslySetInnerHTML","ticks"],Qne=["id"];function xO(t,a,r){return(a=eie(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function eie(t){var a=tie(t,"string");return typeof a=="symbol"?a:a+""}function tie(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function oN(){return oN=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},oN.apply(null,arguments)}function cN(t,a){if(t==null)return{};var r,s,n=aie(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aie(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function rie(t){var a=is(),r=x.useMemo(()=>{var{children:s}=t,n=cN(t,Jne);return n},[t]);return x.useEffect(()=>(a(Uae(r)),()=>{a(Wae(r))}),[r,a]),t.children}var sie=t=>{var{xAxisId:a,className:r}=t,s=Qt(f5),n=Vn(),i="xAxis",o=Qt(w=>ax(w,i,a,n)),c=Qt(w=>JP(w,i,a,n)),u=Qt(w=>GP(w,a)),m=Qt(w=>CZ(w,a)),h=Qt(w=>SP(w,a));if(u==null||m==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:y}=t,g=cN(t,Zne),{id:v}=h,N=cN(h,Qne);return x.createElement(bu,oN({},g,N,{scale:o,x:m.x,y:m.y,width:u.width,height:u.height,className:Qa("recharts-".concat(i," ").concat(i),r),viewBox:s,ticks:c}))},nie=t=>{var a,r,s,n,i;return x.createElement(rie,{interval:(a=t.interval)!==null&&a!==void 0?a:"preserveEnd",id:t.xAxisId,scale:t.scale,type:t.type,padding:t.padding,allowDataOverflow:t.allowDataOverflow,domain:t.domain,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,includeHidden:(r=t.includeHidden)!==null&&r!==void 0?r:!1,reversed:t.reversed,ticks:t.ticks,height:t.height,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(s=t.angle)!==null&&s!==void 0?s:0,minTickGap:(n=t.minTickGap)!==null&&n!==void 0?n:5,tick:(i=t.tick)!==null&&i!==void 0?i:!0,tickFormatter:t.tickFormatter},x.createElement(sie,t))};class mi extends x.Component{render(){return x.createElement(nie,this.props)}}xO(mi,"displayName","XAxis");xO(mi,"defaultProps",{allowDataOverflow:Zi.allowDataOverflow,allowDecimals:Zi.allowDecimals,allowDuplicatedCategory:Zi.allowDuplicatedCategory,height:Zi.height,hide:!1,mirror:Zi.mirror,orientation:Zi.orientation,padding:Zi.padding,reversed:Zi.reversed,scale:Zi.scale,tickCount:Zi.tickCount,type:Zi.type,xAxisId:0});var iie=t=>{var{ticks:a,label:r,labelGapWithTick:s=5,tickSize:n=0,tickMargin:i=0}=t,o=0;if(a){a.forEach(h=>{if(h){var p=h.getBoundingClientRect();p.width>o&&(o=p.width)}});var c=r?r.getBoundingClientRect().width:0,u=n+i,m=o+u+c+(r?s:0);return Math.round(m)}return 0},lie=["dangerouslySetInnerHTML","ticks"],oie=["id"];function fO(t,a,r){return(a=cie(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function cie(t){var a=die(t,"string");return typeof a=="symbol"?a:a+""}function die(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function dN(){return dN=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},dN.apply(null,arguments)}function uk(t,a){if(t==null)return{};var r,s,n=uie(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uie(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function mie(t){var a=is();return x.useEffect(()=>(a(Hae(t)),()=>{a(Yae(t))}),[t,a]),null}var hie=t=>{var a,{yAxisId:r,className:s,width:n,label:i}=t,o=x.useRef(null),c=x.useRef(null),u=Qt(f5),m=Vn(),h=is(),p="yAxis",y=Qt($=>ax($,p,r,m)),g=Qt($=>VP($,r)),v=Qt($=>kZ($,r)),N=Qt($=>JP($,p,r,m)),w=Qt($=>_P($,r));if(x.useLayoutEffect(()=>{var $;if(!(n!=="auto"||!g||S3(i)||x.isValidElement(i)||w==null)){var A=o.current,M=A==null||($=A.tickRefs)===null||$===void 0?void 0:$.current,{tickSize:_,tickMargin:B}=A.props,D=iie({ticks:M,label:c.current,labelGapWithTick:5,tickSize:_,tickMargin:B});Math.round(g.width)!==Math.round(D)&&h(Gae({id:r,width:D}))}},[o,o==null||(a=o.current)===null||a===void 0||(a=a.tickRefs)===null||a===void 0?void 0:a.current,g?.width,g,h,i,r,n]),g==null||v==null||w==null)return null;var{dangerouslySetInnerHTML:j,ticks:T}=t,k=uk(t,lie),{id:R}=w,P=uk(w,oie);return x.createElement(bu,dN({},k,P,{ref:o,labelRef:c,scale:y,x:v.x,y:v.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:g.width,height:g.height,className:Qa("recharts-".concat(p," ").concat(p),s),viewBox:u,ticks:N}))},xie=t=>{var a,r,s,n,i;return x.createElement(x.Fragment,null,x.createElement(mie,{interval:(a=t.interval)!==null&&a!==void 0?a:"preserveEnd",id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:(r=t.includeHidden)!==null&&r!==void 0?r:!1,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(s=t.angle)!==null&&s!==void 0?s:0,minTickGap:(n=t.minTickGap)!==null&&n!==void 0?n:5,tick:(i=t.tick)!==null&&i!==void 0?i:!0,tickFormatter:t.tickFormatter}),x.createElement(hie,t))},fie={allowDataOverflow:Qi.allowDataOverflow,allowDecimals:Qi.allowDecimals,allowDuplicatedCategory:Qi.allowDuplicatedCategory,hide:!1,mirror:Qi.mirror,orientation:Qi.orientation,padding:Qi.padding,reversed:Qi.reversed,scale:Qi.scale,tickCount:Qi.tickCount,type:Qi.type,width:Qi.width,yAxisId:0};class hi extends x.Component{render(){return x.createElement(xie,this.props)}}fO(hi,"displayName","YAxis");fO(hi,"defaultProps",fie);var y2={exports:{}},b2={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mk;function pie(){if(mk)return b2;mk=1;var t=qh();function a(u,m){return u===m&&(u!==0||1/u===1/m)||u!==u&&m!==m}var r=typeof Object.is=="function"?Object.is:a,s=t.useSyncExternalStore,n=t.useRef,i=t.useEffect,o=t.useMemo,c=t.useDebugValue;return b2.useSyncExternalStoreWithSelector=function(u,m,h,p,y){var g=n(null);if(g.current===null){var v={hasValue:!1,value:null};g.current=v}else v=g.current;g=o(function(){function w(P){if(!j){if(j=!0,T=P,P=p(P),y!==void 0&&v.hasValue){var $=v.value;if(y($,P))return k=$}return k=P}if($=k,r(T,P))return $;var A=p(P);return y!==void 0&&y($,A)?(T=P,$):(T=P,k=A)}var j=!1,T,k,R=h===void 0?null:h;return[function(){return w(m())},R===null?void 0:function(){return w(R())}]},[m,h,p,y]);var N=s(u,g[0],g[1]);return i(function(){v.hasValue=!0,v.value=N},[N]),c(N),N},b2}var hk;function gie(){return hk||(hk=1,y2.exports=pie()),y2.exports}gie();function yie(t){t()}function bie(){let t=null,a=null;return{clear(){t=null,a=null},notify(){yie(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let s=t;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0;const n=a={callback:r,next:null,prev:a};return n.prev?n.prev.next=n:t=n,function(){!s||t===null||(s=!1,n.next?n.next.prev=n.prev:a=n.prev,n.prev?n.prev.next=n.next:t=n.next)}}}}var xk={notify(){},get:()=>[]};function vie(t,a){let r,s=xk,n=0,i=!1;function o(N){h();const w=s.subscribe(N);let j=!1;return()=>{j||(j=!0,w(),p())}}function c(){s.notify()}function u(){v.onStateChange&&v.onStateChange()}function m(){return i}function h(){n++,r||(r=t.subscribe(u),s=bie())}function p(){n--,r&&n===0&&(r(),r=void 0,s.clear(),s=xk)}function y(){i||(i=!0,h())}function g(){i&&(i=!1,p())}const v={addNestedSub:o,notifyNestedSubs:c,handleChangeWrapper:u,isSubscribed:m,trySubscribe:y,tryUnsubscribe:g,getListeners:()=>s};return v}var jie=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Nie=jie(),wie=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Sie=wie(),_ie=()=>Nie||Sie?x.useLayoutEffect:x.useEffect,Cie=_ie(),kie=Symbol.for("react-redux-context"),Aie=typeof globalThis<"u"?globalThis:{};function Eie(){if(!x.createContext)return{};const t=Aie[kie]??=new Map;let a=t.get(x.createContext);return a||(a=x.createContext(null),t.set(x.createContext,a)),a}var Tie=Eie();function Pie(t){const{children:a,context:r,serverState:s,store:n}=t,i=x.useMemo(()=>{const u=vie(n);return{store:n,subscription:u,getServerState:s?()=>s:void 0}},[n,s]),o=x.useMemo(()=>n.getState(),[n]);Cie(()=>{const{subscription:u}=i;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==n.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[i,o]);const c=r||Tie;return x.createElement(c.Provider,{value:i},a)}var Die=Pie,Oie=(t,a)=>a,U3=nt([Oie,Ua,jP,en,mD,cd,PQ,Zs],RQ),W3=t=>{var a=t.currentTarget.getBoundingClientRect(),r=a.width/t.currentTarget.offsetWidth,s=a.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-a.left)/r),chartY:Math.round((t.clientY-a.top)/s)}},pO=Hl("mouseClick"),gO=Qf();gO.startListening({actionCreator:pO,effect:(t,a)=>{var r=t.payload,s=U3(a.getState(),W3(r));s?.activeIndex!=null&&a.dispatch(BZ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var uN=Hl("mouseMove"),yO=Qf();yO.startListening({actionCreator:uN,effect:(t,a)=>{var r=t.payload,s=a.getState(),n=f3(s,s.tooltip.settings.shared),i=U3(s,W3(r));n==="axis"&&(i?.activeIndex!=null?a.dispatch(nD({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):a.dispatch(sD()))}});function Lie(t,a){return a instanceof HTMLElement?"HTMLElement <".concat(a.tagName,' class="').concat(a.className,'">'):a===window?"global.window":a}var fk={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},bO=ol({name:"rootProps",initialState:fk,reducers:{updateOptions:(t,a)=>{var r;t.accessibilityLayer=a.payload.accessibilityLayer,t.barCategoryGap=a.payload.barCategoryGap,t.barGap=(r=a.payload.barGap)!==null&&r!==void 0?r:fk.barGap,t.barSize=a.payload.barSize,t.maxBarSize=a.payload.maxBarSize,t.stackOffset=a.payload.stackOffset,t.syncId=a.payload.syncId,t.syncMethod=a.payload.syncMethod,t.className=a.payload.className}}}),Mie=bO.reducer,{updateOptions:Rie}=bO.actions,vO=ol({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,a)=>a.payload}}),{updatePolarOptions:Iie}=vO.actions,zie=vO.reducer,jO=Hl("keyDown"),NO=Hl("focus"),H3=Qf();H3.startListening({actionCreator:jO,effect:(t,a)=>{var r=a.getState(),s=r.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:n}=r.tooltip,i=t.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(p3(n,sx(r))),c=cd(r);if(i==="Enter"){var u=Yg(r,"axis","hover",String(n.index));a.dispatch(tN({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:u}));return}var m=PZ(r),h=m==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,y=o+p*h;if(!(c==null||y>=c.length||y<0)){var g=Yg(r,"axis","hover",String(y));a.dispatch(tN({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:g}))}}}}});H3.startListening({actionCreator:NO,effect:(t,a)=>{var r=a.getState(),s=r.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:n}=r.tooltip;if(!n.active&&n.index==null){var i="0",o=Yg(r,"axis","hover",String(i));a.dispatch(tN({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var zl=Hl("externalEvent"),wO=Qf();wO.startListening({actionCreator:zl,effect:(t,a)=>{if(t.payload.handler!=null){var r=a.getState(),s={activeCoordinate:NQ(r),activeDataKey:pD(r),activeIndex:ou(r),activeLabel:fD(r),activeTooltipIndex:ou(r),isTooltipActive:wQ(r)};t.payload.handler(s,t.payload.reactEvent)}}});var $ie=nt([rx],t=>t.tooltipItemPayloads),Bie=nt([$ie,hp,(t,a,r)=>a,(t,a,r)=>r],(t,a,r,s)=>{var n=t.find(c=>c.settings.dataKey===s);if(n!=null){var{positions:i}=n;if(i!=null){var o=a(i,r);return o}}}),SO=Hl("touchMove"),_O=Qf();_O.startListening({actionCreator:SO,effect:(t,a)=>{var r=t.payload,s=a.getState(),n=f3(s,s.tooltip.settings.shared);if(n==="axis"){var i=U3(s,W3({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));i?.activeIndex!=null&&a.dispatch(nD({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(n==="item"){var o,c=r.touches[0],u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var m=u.getAttribute(sT),h=(o=u.getAttribute(nT))!==null&&o!==void 0?o:void 0,p=Bie(a.getState(),m,h);a.dispatch(rD({activeDataKey:h,activeIndex:m,activeCoordinate:p}))}}});var Fie=E9({brush:hse,cartesianAxis:Vae,chartData:ZQ,errorBars:hre,graphicalItems:hae,layout:MY,legend:SG,options:GQ,polarAxis:Tte,polarOptions:zie,referenceElements:vse,rootProps:Mie,tooltip:FZ}),qie=function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return iY({reducer:Fie,preloadedState:a,middleware:s=>s({serializableCheck:!1}).concat([gO.middleware,yO.middleware,H3.middleware,wO.middleware,_O.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:Lie},name:"recharts-".concat(r)}})};function CO(t){var{preloadedState:a,children:r,reduxStoreName:s}=t,n=Vn(),i=x.useRef(null);if(n)return r;i.current==null&&(i.current=qie(a,s));var o=c5;return x.createElement(Die,{context:o,store:i.current},r)}function kO(t){var{layout:a,width:r,height:s,margin:n}=t,i=is(),o=Vn();return x.useEffect(()=>{o||(i(DY(a)),i(OY({width:r,height:s})),i(PY(n)))},[i,o,a,r,s,n]),null}function AO(t){var a=is();return x.useEffect(()=>{a(Rie(t))},[a,t]),null}var Uie=["children"];function Wie(t,a){if(t==null)return{};var r,s,n=Hie(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hie(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function ey(){return ey=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},ey.apply(null,arguments)}var Yie={width:"100%",height:"100%"},Gie=x.forwardRef((t,a)=>{var r=g5(),s=y5(),n=dT();if(!Ih(r)||!Ih(s))return null;var{children:i,otherAttributes:o,title:c,desc:u}=t,m,h;return typeof o.tabIndex=="number"?m=o.tabIndex:m=n?0:void 0,typeof o.role=="string"?h=o.role:h=n?"application":void 0,x.createElement(e5,ey({},o,{title:c,desc:u,role:h,tabIndex:m,width:r,height:s,style:Yie,ref:a}),i)}),Vie=t=>{var{children:a}=t,r=Qt($y);if(!r)return null;var{width:s,height:n,y:i,x:o}=r;return x.createElement(e5,{width:s,height:n,x:o,y:i},a)},pk=x.forwardRef((t,a)=>{var{children:r}=t,s=Wie(t,Uie),n=Vn();return n?x.createElement(Vie,null,r):x.createElement(Gie,ey({ref:a},s),r)});function Kie(){var t=is(),[a,r]=x.useState(null),s=Qt(cG);return x.useEffect(()=>{if(a!=null){var n=a.getBoundingClientRect(),i=n.width/a.offsetWidth;En(i)&&i!==s&&t(LY(i))}},[a,t,s]),r}function gk(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,s)}return r}function Xie(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?gk(Object(r),!0).forEach(function(s){Jie(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gk(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Jie(t,a,r){return(a=Zie(a))in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function Zie(t){var a=Qie(t,"string");return typeof a=="symbol"?a:a+""}function Qie(t,a){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}var ele=x.forwardRef((t,a)=>{var{children:r,className:s,height:n,onClick:i,onContextMenu:o,onDoubleClick:c,onMouseDown:u,onMouseEnter:m,onMouseLeave:h,onMouseMove:p,onMouseUp:y,onTouchEnd:g,onTouchMove:v,onTouchStart:N,style:w,width:j}=t,T=is(),[k,R]=x.useState(null),[P,$]=x.useState(null);lee();var A=Kie(),M=x.useCallback(q=>{A(q),typeof a=="function"&&a(q),R(q),$(q)},[A,a,R,$]),_=x.useCallback(q=>{T(pO(q)),T(zl({handler:i,reactEvent:q}))},[T,i]),B=x.useCallback(q=>{T(uN(q)),T(zl({handler:m,reactEvent:q}))},[T,m]),D=x.useCallback(q=>{T(sD()),T(zl({handler:h,reactEvent:q}))},[T,h]),C=x.useCallback(q=>{T(uN(q)),T(zl({handler:p,reactEvent:q}))},[T,p]),L=x.useCallback(()=>{T(NO())},[T]),H=x.useCallback(q=>{T(jO(q.key))},[T]),V=x.useCallback(q=>{T(zl({handler:o,reactEvent:q}))},[T,o]),Y=x.useCallback(q=>{T(zl({handler:c,reactEvent:q}))},[T,c]),J=x.useCallback(q=>{T(zl({handler:u,reactEvent:q}))},[T,u]),W=x.useCallback(q=>{T(zl({handler:y,reactEvent:q}))},[T,y]),X=x.useCallback(q=>{T(zl({handler:N,reactEvent:q}))},[T,N]),te=x.useCallback(q=>{T(SO(q)),T(zl({handler:v,reactEvent:q}))},[T,v]),oe=x.useCallback(q=>{T(zl({handler:g,reactEvent:q}))},[T,g]);return x.createElement(wD.Provider,{value:k},x.createElement(XE.Provider,{value:P},x.createElement("div",{className:Qa("recharts-wrapper",s),style:Xie({position:"relative",cursor:"default",width:j,height:n},w),onClick:_,onContextMenu:V,onDoubleClick:Y,onFocus:L,onKeyDown:H,onMouseDown:J,onMouseEnter:B,onMouseLeave:D,onMouseMove:C,onMouseUp:W,onTouchEnd:oe,onTouchMove:te,onTouchStart:X,ref:M},r)))}),tle=["children","className","width","height","style","compact","title","desc"];function ale(t,a){if(t==null)return{};var r,s,n=rle(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rle(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var EO=x.forwardRef((t,a)=>{var{children:r,className:s,width:n,height:i,style:o,compact:c,title:u,desc:m}=t,h=ale(t,tle),p=Ao(h);return c?x.createElement(pk,{otherAttributes:p,title:u,desc:m},r):x.createElement(ele,{className:s,style:o,width:n,height:i,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},x.createElement(pk,{otherAttributes:p,title:u,desc:m,ref:a},x.createElement(Nse,null,r)))}),sle=["width","height"];function mN(){return mN=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},mN.apply(null,arguments)}function nle(t,a){if(t==null)return{};var r,s,n=ile(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ile(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var lle={top:5,right:5,bottom:5,left:5},ole={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:lle,reverseStackOrder:!1,syncMethod:"index"},Y3=x.forwardRef(function(a,r){var s,n=Kn(a.categoricalChartProps,ole),{width:i,height:o}=n,c=nle(n,sle);if(!Ih(i)||!Ih(o))return null;var{chartName:u,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:p,categoricalChartProps:y}=a,g={chartName:u,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:p,eventEmitter:void 0};return x.createElement(CO,{preloadedState:{options:g},reduxStoreName:(s=y.id)!==null&&s!==void 0?s:u},x.createElement(KD,{chartData:y.data}),x.createElement(kO,{width:i,height:o,layout:n.layout,margin:n.margin}),x.createElement(AO,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),x.createElement(EO,mN({},c,{width:i,height:o,ref:r})))}),cle=["axis"],db=x.forwardRef((t,a)=>x.createElement(Y3,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:cle,tooltipPayloadSearcher:rb,categoricalChartProps:t,ref:a})),dle=["axis","item"],Zd=x.forwardRef((t,a)=>x.createElement(Y3,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:dle,tooltipPayloadSearcher:rb,categoricalChartProps:t,ref:a}));function ule(t){var a=is();return x.useEffect(()=>{a(Iie(t))},[a,t]),null}var mle=["width","height","layout"];function hN(){return hN=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},hN.apply(null,arguments)}function hle(t,a){if(t==null)return{};var r,s,n=xle(t,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xle(t,a){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var fle={top:5,right:5,bottom:5,left:5},ple={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:fle,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},gle=x.forwardRef(function(a,r){var s,n=Kn(a.categoricalChartProps,ple),{width:i,height:o,layout:c}=n,u=hle(n,mle);if(!Ih(i)||!Ih(o))return null;var{chartName:m,defaultTooltipEventType:h,validateTooltipEventTypes:p,tooltipPayloadSearcher:y}=a,g={chartName:m,defaultTooltipEventType:h,validateTooltipEventTypes:p,tooltipPayloadSearcher:y,eventEmitter:void 0};return x.createElement(CO,{preloadedState:{options:g},reduxStoreName:(s=n.id)!==null&&s!==void 0?s:m},x.createElement(KD,{chartData:n.data}),x.createElement(kO,{width:i,height:o,layout:c,margin:n.margin}),x.createElement(AO,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),x.createElement(ule,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),x.createElement(EO,hN({width:i,height:o},u,{ref:r})))}),yle=["item"],ble={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},cm=x.forwardRef((t,a)=>{var r=Kn(t,ble);return x.createElement(gle,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:yle,tooltipPayloadSearcher:rb,categoricalChartProps:r,ref:a})}),vle=["axis"],jle=x.forwardRef((t,a)=>x.createElement(Y3,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:vle,tooltipPayloadSearcher:rb,categoricalChartProps:t,ref:a}));const Nle=()=>{const{token:t}=At(),[a,r]=x.useState(!0),[s,n]=x.useState({totalStudents:0,totalRevenue:0,activeClasses:0,totalEmployees:0,pendingPayments:0,outstandingBalances:0,monthlyRevenue:0,monthlyExpenses:0}),[i,o]=x.useState([]),[c,u]=x.useState([]),[m,h]=x.useState([]),[p,y]=x.useState([]),[g,v]=x.useState([]),[N,w]=x.useState([]),[j,T]=x.useState([]),[k,R]=x.useState([]),[P,$]=x.useState([]),A=["#2563eb","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316","#84cc16"];x.useEffect(()=>{t&&M()},[t]);const M=async()=>{try{r(!0);const C={Authorization:`Bearer ${t}`};let L=0,H=0,V=0,Y=[],J=null,W=null,X=null;try{const Ne=await re.get(`${se}/students?page=1&limit=1000`,{headers:C}),ce=Ne.data.data||[];if(L=ce.length||Ne.data.pagination?.totalStudents||0,ce.length>0){const De=new Date;De.setDate(De.getDate()-30);const ye=ce.filter(Ke=>new Date(Ke.CreatedAt||Ke.created_at)>De).length,Ee=L-ye;Ee>0&&(J={value:`${(ye/Ee*100).toFixed(0)}% from last month`,type:"increase"})}}catch{console.log("Students data not available")}try{const Ne=await re.get(`${se}/employees?page=1&limit=1`,{headers:C});H=Ne.data.pagination?.totalRecords||Ne.data.pagination?.totalEmployees||0}catch{console.log("Employees count not available")}try{Y=(await re.get(`${se}/classes/gradelevel-classes`,{headers:C})).data.data||[],V=Y.filter(ce=>(ce.student_count||ce.StudentCount||0)>0).length}catch{console.log("Classes count not available")}let te=0,oe=[];try{const Ne=new Date().getFullYear(),ce=await re.get(`${se}/analytics/revenue/trends?year=${Ne}&period=monthly`,{headers:C});if(ce.data.data?.trends){oe=ce.data.data.trends;const De=new Date().getMonth()+1,ye=oe.find(Re=>Number(Re.month)===De||Number(Re.period)===De),Ee=oe.find(Re=>Number(Re.month)===De-1||Number(Re.period)===De-1);te=ye?.total_revenue||0;const Ke=Ee?.total_revenue||0;if(Ke>0){const Re=Number(te)-Number(Ke);W={value:`${(Math.abs(Re)/Number(Ke)*100).toFixed(0)}% from last month`,type:Re>=0?"increase":"decrease"}}else De===1&&(W={value:"New Year",type:"increase"})}}catch{console.log("Revenue trends not available")}let q=0;try{const Ne=await re.get(`${se}/students/balances/summary`,{headers:C});q=Ne.data.data?.total_outstanding_debt||Ne.data.data?.total_outstanding||0}catch{console.log("Primary balance summary failed")}try{const Ne=await re.get(`${se}/analytics/student-finance/health-summary`,{headers:C});if(Ne.data.data){const ce=Ne.data.data;q===0&&(q=ce.total_outstanding||0);const De=ce.recent_activity?.amount_last_30_days||0;q>0&&De>0&&(X={value:`${(De/(q+De)*100).toFixed(0)}% decrease`,type:"decrease"})}}catch{console.log("Finance health summary not available")}let G=[];try{const Ne=await re.get(`${se}/fees/all-payments?page=1&limit=100`,{headers:C});if(Ne.data.data){const ce=Ne.data.data,De={};ce.forEach(ye=>{const Ke=new Date(ye.PaymentDate||ye.created_at).toLocaleString("default",{month:"short"});De[Ke]||(De[Ke]={month:Ke,amount:0,count:0}),De[Ke].amount+=parseFloat(ye.Amount||ye.amount||0),De[Ke].count+=1}),G=Object.values(De).slice(-6)}}catch{console.log("Payment stats not available")}let z=[];try{const Ne=new Date().getFullYear(),ce=await re.get(`${se}/analytics/expenses/trends?year=${Ne}&period=monthly`,{headers:C});ce.data.data?.trends&&(z=ce.data.data.trends)}catch{console.log("Expense trends not available")}let Z=[];try{const Ne=new Date().getFullYear(),ce=await re.get(`${se}/analytics/revenue/breakdown?year=${Ne}`,{headers:C});ce.data.data?.revenue_sources&&(Z=ce.data.data.revenue_sources)}catch{console.log("Revenue breakdown not available")}let Q=[];try{const Ne=new Date().getFullYear(),ce=await re.get(`${se}/analytics/expenses/monthly-breakdown?year=${Ne}`,{headers:C});ce.data.data?.breakdown&&(Q=ce.data.data.breakdown)}catch{console.log("Expense breakdown not available")}let fe=[];try{const Ne=new Date().getFullYear(),ce=await re.get(`${se}/analytics/revenue/payment-methods?year=${Ne}`,{headers:C});ce.data.data?.payment_methods&&(fe=ce.data.data.payment_methods)}catch{console.log("Payment methods not available")}let he=[];try{const ce=(await re.get(`${se}/students?page=1&limit=1000`,{headers:C})).data.data||[];if(ce.length>0){const De={Male:0,Female:0,Other:0,Unknown:0};ce.forEach(ye=>{const Ee=ye.Gender||"Unknown";De.hasOwnProperty(Ee)?De[Ee]++:De[Ee]=1}),he=Object.entries(De).filter(([ye,Ee])=>Ee>0).map(([ye,Ee])=>({name:ye,value:Ee}))}}catch{console.log("Gender distribution not available")}const ne=[],me=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];oe.length>0&&oe.forEach((Ne,ce)=>{const De=z.find(ye=>ye.period===Ne.period)||{total_expense:0};ne.push({month:Ne.period_label||me[ce]||`Month ${ce+1}`,revenue:Ne.total_revenue||0,expenses:De.total_expense||0})});let pe=0,ie=0;try{const Ne=await re.get(`${se}/analytics/student-finance/efficiency-metrics`,{headers:C});if(Ne.data.data){const ce=Ne.data.data;pe=ce.payment_status?.pending||0,ie=(ce.total_collected||0)+(ce.total_boarding_collected||0)}}catch{console.log("Efficiency metrics not available")}const ke=oe.reduce((Ne,ce)=>Ne+(ce.total_revenue||0),0),Ae=z.length>0&&z[z.length-1]?.total_expense||0;n({totalStudents:L,totalRevenue:ke,activeClasses:V,totalEmployees:H,pendingPayments:pe,outstandingBalances:q,monthlyRevenue:te,monthlyExpenses:Ae,totalCollectedFees:ie,studentChanges:J,revenueChanges:W,balanceChanges:X}),o(oe),u(G),h(Z),v(z),w(ne),T(fe),R(Q),$(he);const ae=(Y||[]).filter(Ne=>(Ne.student_count||Ne.StudentCount||0)>0).map(Ne=>({name:Ne.name||Ne.Name||"Unknown",students:Ne.student_count||Ne.StudentCount||0})).sort((Ne,ce)=>ce.students-Ne.students);y(ae)}catch(C){console.error("Critical error fetching dashboard data:",C)}finally{r(!1)}},_=C=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(C||0),B=C=>new Intl.NumberFormat("en-US").format(C||0),D=({title:C,value:L,icon:H,change:V,changeType:Y,color:J="blue"})=>{const W={blue:"bg-blue-50 text-blue-600",green:"bg-green-50 text-green-600",orange:"bg-orange-50 text-orange-600",purple:"bg-purple-50 text-purple-600",red:"bg-red-50 text-red-600"};return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow relative",style:{minHeight:"100px"},children:[e.jsx("div",{className:`absolute top-3 right-3 p-2 rounded-lg ${W[J]}`,children:e.jsx(H,{className:"h-4 w-4"})}),e.jsxs("div",{className:"pr-12",children:[e.jsx("p",{className:"font-medium text-gray-600 mb-1",style:{fontSize:"0.75rem"},children:C}),e.jsx("p",{className:"font-bold text-gray-900 mb-1",style:{fontSize:"1.1rem"},children:L}),V&&e.jsxs("div",{className:`flex items-center ${Y==="increase"?"text-green-600":"text-red-600"}`,style:{fontSize:"0.7rem"},children:[Y==="increase"?e.jsx(XF,{className:"h-3 w-3 mr-1"}):e.jsx(KF,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:V})]})]})]})};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading dashboard..."})}):e.jsxs("div",{className:"w-full space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"report-title",children:"Welcome to Brooklyn"}),e.jsx("p",{className:"report-subtitle",children:"Dashboard Overview"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(D,{title:"Total Students",value:B(s.totalStudents),icon:xj,change:s.studentChanges?.value,changeType:s.studentChanges?.type,color:"blue"}),e.jsx(D,{title:"Total Revenue",value:_(s.totalRevenue),icon:tq,change:s.revenueChanges?.value,changeType:s.revenueChanges?.type,color:"green"}),e.jsx(D,{title:"Active Classes",value:B(s.activeClasses),icon:JF,color:"purple"}),e.jsx(D,{title:"Total Employees",value:B(s.totalEmployees),icon:xj,color:"orange"}),e.jsx(D,{title:"Monthly Revenue",value:_(s.monthlyRevenue),icon:aS,change:s.revenueChanges?.value,changeType:s.revenueChanges?.type,color:"green"}),e.jsx(D,{title:"Outstanding Balances",value:_(s.outstandingBalances),icon:tS,change:s.balanceChanges?.value,changeType:s.balanceChanges?.type,color:"red"}),e.jsx(D,{title:"Pending Payments",value:B(s.pendingPayments),icon:tS,color:"orange"}),e.jsx(D,{title:"Payment Collections",value:_(s.totalCollectedFees),icon:aS,change:s.revenueChanges?.value,changeType:s.revenueChanges?.type,color:"green"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",style:{fontSize:"1.1rem"},children:"Revenue Trends"}),i.length>0?e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(jle,{data:i,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})}),e.jsx(Pi,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(mi,{dataKey:"period_label",tick:{fontSize:11},stroke:"#6b7280"}),e.jsx(hi,{tick:{fontSize:11},tickFormatter:C=>`$${C}`,stroke:"#6b7280"}),e.jsx($s,{formatter:C=>_(C),contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"6px"}}),e.jsx(hO,{type:"monotone",dataKey:"total_revenue",stroke:"#10b981",strokeWidth:2,fillOpacity:1,fill:"url(#colorRevenue)"})]})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",children:"No revenue data available"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",style:{fontSize:"1.1rem"},children:"Payment Statistics"}),c.length>0?e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(Zd,{data:c,children:[e.jsx(Pi,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(mi,{dataKey:"month",tick:{fontSize:11},stroke:"#6b7280"}),e.jsx(hi,{tick:{fontSize:11},tickFormatter:C=>`$${C}`,stroke:"#6b7280"}),e.jsx($s,{formatter:C=>_(C),contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"6px"}}),e.jsx(Fl,{dataKey:"amount",fill:"#2563eb",radius:[8,8,0,0]})]})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",children:"No payment data available"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",style:{fontSize:"1.1rem"},children:"Revenue by Source"}),m.length>0?e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(cm,{children:[e.jsx(au,{data:m,cx:"50%",cy:"50%",labelLine:!1,label:({source_name:C,percent:L})=>`${C} ${(L*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"total_amount",children:m.map((C,L)=>e.jsx(wo,{fill:A[L%A.length]},`cell-${L}`))}),e.jsx($s,{formatter:C=>_(C)})]})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",children:"No revenue breakdown data available"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",style:{fontSize:"1.1rem"},children:"Students by Class"}),p.length>0?e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(Zd,{data:p,layout:"vertical",children:[e.jsx(Pi,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(mi,{type:"number",tick:{fontSize:11},stroke:"#6b7280"}),e.jsx(hi,{dataKey:"name",type:"category",tick:{fontSize:11},stroke:"#6b7280",width:80}),e.jsx($s,{formatter:C=>B(C)}),e.jsx(Fl,{dataKey:"students",fill:"#8b5cf6",radius:[0,8,8,0]})]})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",children:"No student data available"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",style:{fontSize:"1.1rem"},children:"Revenue vs Expenses"}),N.length>0?e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(Zd,{data:N,children:[e.jsx(Pi,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(mi,{dataKey:"month",tick:{fontSize:11},stroke:"#6b7280"}),e.jsx(hi,{tick:{fontSize:11},tickFormatter:C=>`$${C}`,stroke:"#6b7280"}),e.jsx($s,{formatter:C=>_(C),contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"6px"}}),e.jsx(By,{}),e.jsx(Fl,{dataKey:"revenue",fill:"#10b981",name:"Revenue",radius:[8,8,0,0]}),e.jsx(Fl,{dataKey:"expenses",fill:"#ef4444",name:"Expenses",radius:[8,8,0,0]})]})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",children:"No comparison data available"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",style:{fontSize:"1.1rem"},children:"Payment Methods"}),j.length>0?e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(cm,{children:[e.jsx(au,{data:j,cx:"50%",cy:"50%",labelLine:!1,label:({method_name:C,percent:L})=>`${C} ${(L*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"total_amount",children:j.map((C,L)=>e.jsx(wo,{fill:A[L%A.length]},`cell-${L}`))}),e.jsx($s,{formatter:C=>_(C)})]})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",children:"No payment method data available"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",style:{fontSize:"1.1rem"},children:"Expense Trends"}),g.length>0?e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(db,{data:g,children:[e.jsx(Pi,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(mi,{dataKey:"period_label",tick:{fontSize:11},stroke:"#6b7280"}),e.jsx(hi,{tick:{fontSize:11},tickFormatter:C=>`$${C}`,stroke:"#6b7280"}),e.jsx($s,{formatter:C=>_(C),contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"6px"}}),e.jsx(pp,{type:"monotone",dataKey:"total_expense",stroke:"#ef4444",strokeWidth:2,dot:{fill:"#ef4444",strokeWidth:2,r:4}})]})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",children:"No expense trend data available"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",style:{fontSize:"1.1rem"},children:"Student Gender Distribution"}),P.length>0?e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(cm,{children:[e.jsx(au,{data:P,cx:"50%",cy:"50%",labelLine:!1,label:({name:C,percent:L})=>`${C} ${(L*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:P.map((C,L)=>e.jsx(wo,{fill:A[L%A.length]},`cell-${L}`))}),e.jsx($s,{})]})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",children:"No gender distribution data available"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",style:{fontSize:"1.1rem"},children:"Expenses by Category"}),k.length>0?e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(Zd,{data:k,layout:"vertical",children:[e.jsx(Pi,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(mi,{type:"number",tick:{fontSize:11},stroke:"#6b7280"}),e.jsx(hi,{dataKey:"category_name",type:"category",tick:{fontSize:11},stroke:"#6b7280",width:100}),e.jsx($s,{formatter:C=>_(C)}),e.jsx(Fl,{dataKey:"total_amount",fill:"#f59e0b",radius:[0,8,8,0]})]})}):e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",children:"No expense breakdown data available"})]})]})]})},wle=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full text-center",children:[e.jsx("div",{className:"mx-auto h-24 w-24 flex items-center justify-center rounded-full bg-red-100 mb-6",children:e.jsx(rq,{className:"h-12 w-12 text-red-600"})}),e.jsx("h1",{className:"text-6xl font-bold text-gray-900 mb-4",children:"404"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Page Not Found"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Sorry, the page you are looking for doesn't exist or has been moved."}),e.jsxs(ss,{to:"/dashboard",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e.jsx(aq,{className:"h-5 w-5 mr-2"}),"Go to Dashboard"]})]})}),Sle=()=>{const{token:t}=At(),[a,r]=x.useState([]),[s,n]=x.useState(!0),[i,o]=x.useState(null),[c,u]=x.useState(""),[m,h]=x.useState(""),[p,y]=x.useState(""),[g,v]=x.useState(""),[N,w]=x.useState([]),[j,T]=x.useState(!1),[k,R]=x.useState(1),[P,$]=x.useState(1),[A,M]=x.useState(0),[_]=x.useState(25),[B,D]=x.useState(!1),[C,L]=x.useState(!1),[H,V]=x.useState(!1),[Y,J]=x.useState(null),[W,X]=x.useState({regNumber:"",name:"",surname:"",dateOfBirth:"",nationalIDNumber:"",address:"",gender:"",active:"Yes",guardianName:"",guardianSurname:"",guardianNationalIDNumber:"",guardianPhoneNumber:"",relationshipToStudent:""}),[te,oe]=x.useState({message:null,type:"success",visible:!1}),[q,G]=x.useState(!1),[z,Z]=x.useState(!1),[Q,fe]=x.useState(null),[he,ne]=x.useState(!1),[me,pe]=x.useState(!1),[ie,ke]=x.useState({regNumber:"",name:"",surname:"",dateOfBirth:"",nationalIDNumber:"",address:"",gender:"",active:"Yes",guardianName:"",guardianSurname:"",guardianNationalIDNumber:"",guardianPhoneNumber:"",relationshipToStudent:""}),[Ae,ae]=x.useState(null),[Ne,ce]=x.useState(!1),[De,ye]=x.useState(!1),[Ee,Ke]=x.useState(null),[Re,Le]=x.useState(!1);x.useEffect(()=>{Oe()},[]),x.useEffect(()=>{$e()},[k,m,p,g]);const Oe=async()=>{try{T(!0);const it=await re.get(`${se}/classes/gradelevel-classes`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});it.data.success&&w(it.data.data||[])}catch(it){console.error("Error fetching classes:",it)}finally{T(!1)}},$e=async()=>{try{n(!0),o(null);let it=[];if(g&&g!==""){if(console.log(" Fetching students for class:",g),it=(await re.get(`${se}/classes/gradelevel-classes/${g}/students`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data.data||[],m&&m.trim()!==""){const qt=m.trim().toLowerCase();it=it.filter(aa=>aa.Name&&aa.Name.toLowerCase().includes(qt)||aa.Surname&&aa.Surname.toLowerCase().includes(qt)||aa.RegNumber&&aa.RegNumber.toLowerCase().includes(qt))}p&&p!==""&&(it=it.filter(qt=>qt.Gender===p)),r(it),$(1),M(it.length)}else if(m&&m.trim()!=="")console.log(" Searching for:",m),it=(await re.get(`${se}/students/search`,{params:{query:m.trim()},headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data.data||[],p&&p!==""&&(it=it.filter(qt=>qt.Gender===p)),console.log(" Search results:",it),r(it),$(1),M(it.length);else{console.log(" Fetching page:",k);const Tt=await re.get(`${se}/students`,{params:{page:k,limit:_},headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});it=Tt.data.data||[],p&&p!==""&&(it=it.filter(dr=>dr.Gender===p));const qt=Tt.data;console.log(" Pagination data:",qt.pagination),console.log(" Raw response:",qt);const aa=qt.pagination?.totalPages||1,Ar=p?it.length:qt.pagination?.totalStudents||0;console.log(" Setting totalPages:",aa,"totalStudents:",Ar),r(it),$(aa),M(Ar)}}catch(it){console.error("Error fetching students:",it),it.response?o(`Error: ${it.response.status} - ${it.response.data?.message||it.response.statusText}`):it.request?o("No response from server. Please check your connection."):o(`Error: ${it.message}`)}finally{n(!1)}};x.useEffect(()=>{const it=setTimeout(()=>{console.log(" Auto-searching for:",c),h(c),R(1)},500);return()=>clearTimeout(it)},[c]);const ct=it=>{it.preventDefault(),console.log(" Manual search triggered:",c),h(c),R(1)},Nt=it=>{const Tt=it.target.value;y(Tt),R(1)},jt=()=>{y(""),R(1)},xt=it=>{const Tt=it.target.value;v(Tt),R(1)},we=()=>{v(""),R(1)},Ie=async it=>{ne(!0),pe(!0),ae(null),ke({regNumber:"",name:"",surname:"",dateOfBirth:"",nationalIDNumber:"",address:"",gender:"",active:"Yes",guardianName:"",guardianSurname:"",guardianNationalIDNumber:"",guardianPhoneNumber:"",relationshipToStudent:""});try{const qt=(await re.get(`${se}/students/${it}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data.data,aa=qt.guardians?.[0];ke({regNumber:qt.RegNumber||"",name:qt.Name||"",surname:qt.Surname||"",dateOfBirth:qt.DateOfBirth?qt.DateOfBirth.split("T")[0]:"",nationalIDNumber:qt.NationalIDNumber||"",address:qt.Address||"",gender:qt.Gender||"",active:qt.Active==="Active"?"Yes":qt.Active==="Inactive"?"No":qt.Active||"Yes",guardianName:aa?.Name||"",guardianSurname:aa?.Surname||"",guardianNationalIDNumber:aa?.NationalIDNumber||"",guardianPhoneNumber:aa?.PhoneNumber||"",relationshipToStudent:aa?.RelationshipToStudent||""})}catch(Tt){console.error("Error fetching student for edit:",Tt),oa("Failed to load student details for editing","error"),ne(!1)}finally{pe(!1)}},dt=()=>{ne(!1),ke({regNumber:"",name:"",surname:"",dateOfBirth:"",nationalIDNumber:"",address:"",gender:"",active:"Yes",guardianName:"",guardianSurname:"",guardianNationalIDNumber:"",guardianPhoneNumber:"",relationshipToStudent:""}),ae(null),ce(!1)},ut=it=>{const{name:Tt,value:qt}=it.target;ke(aa=>({...aa,[Tt]:qt}))},Te=async it=>{it.preventDefault(),ce(!0),ae(null);try{await re.put(`${se}/students/${ie.regNumber}`,ie,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),await $e(),dt(),oa(`Student ${ie.name} ${ie.surname} has been successfully updated!`,"success")}catch(Tt){console.error("Error updating student:",Tt);let qt="An unexpected error occurred";if(Tt.response){const aa=Tt.response.data;aa?.error?qt=aa.error:qt=aa?.message||`Server Error (${Tt.response.status})`}else Tt.request?qt="No response from server. Please check your internet connection.":qt=Tt.message||"An unexpected error occurred";ae(qt)}finally{ce(!1)}},Ve=()=>ie.regNumber&&ie.name&&ie.surname&&ie.dateOfBirth&&ie.gender&&ie.guardianName&&ie.guardianSurname&&ie.guardianPhoneNumber,qe=it=>{Ke(it),ye(!0)},Xe=()=>{ye(!1),Ke(null),Le(!1)},We=async()=>{if(Ee){Le(!0);try{await re.delete(`${se}/students/${Ee.RegNumber}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),await $e(),Xe(),oa(`Student ${Ee.Name} ${Ee.Surname} has been successfully deleted!`,"success")}catch(it){console.error("Error deleting student:",it);let Tt="Failed to delete student";it.response?Tt=it.response.data?.message||`Server Error (${it.response.status})`:it.request&&(Tt="No response from server. Please check your internet connection."),oa(Tt,"error")}finally{Le(!1)}}},Ge=()=>{D(!0),L(!0),setTimeout(()=>{L(!1)},300)},lt=()=>{D(!1),L(!1),J(null),X({regNumber:"",name:"",surname:"",dateOfBirth:"",nationalIDNumber:"",address:"",gender:"",active:"Yes",guardianName:"",guardianSurname:"",guardianNationalIDNumber:"",guardianPhoneNumber:"",relationshipToStudent:""})},Dt=it=>{const{name:Tt,value:qt}=it.target;X(aa=>({...aa,[Tt]:qt}))},It=()=>{const it=Math.floor(Math.random()*1e5).toString().padStart(5,"0"),Tt="ABCDEFGHIJKLMNOPQRSTUVWXYZ",qt=Tt[Math.floor(Math.random()*Tt.length)];return`R${it}${qt}`},Bt=async it=>{try{return(await re.get(`${se}/students/${it}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).status===200}catch(Tt){if(Tt.response&&Tt.response.status===404)return!1;throw Tt}},ze=async()=>{V(!0),J(null);try{let it,Tt=0;const qt=10;do if(it=It(),Tt++,Tt>=qt)throw new Error("Unable to generate unique registration number. Please try again.");while(await Bt(it));X(aa=>({...aa,regNumber:it}))}catch(it){J(`Error generating registration number: ${it.message}`)}finally{V(!1)}},Mt=async it=>{it.preventDefault(),L(!0),J(null);try{const Tt=await re.post(`${se}/students`,W,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});await $e(),lt();const qt=`${W.name} ${W.surname}`;oa(`Student ${qt} has been successfully added!`,"success")}catch(Tt){console.error("Error adding student:",Tt);let qt="An unexpected error occurred";if(Tt.response){const aa=Tt.response.data;aa?.error?qt=aa.error:qt=aa?.message||`Server Error (${Tt.response.status})`}else Tt.request?qt="No response from server. Please check your internet connection.":qt=Tt.message||"An unexpected error occurred";J(qt)}finally{L(!1)}},oa=(it,Tt="success",qt=3e3)=>{oe({message:it,type:Tt,visible:!0}),qt>0&&setTimeout(()=>{oe(aa=>({...aa,visible:!1})),setTimeout(()=>{oe({message:null,type:"success",visible:!1})},300)},qt)},ca=it=>{const Tt={width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"};return it==="success"?e.jsxs("svg",{...Tt,children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}):it==="error"?e.jsxs("svg",{...Tt,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}):it==="info"?e.jsxs("svg",{...Tt,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}):null},Ka=it=>{switch(it){case"success":return"#10b981";case"error":return"#ef4444";case"info":return"#2563eb";case"warning":return"#f59e0b";default:return"#10b981"}},Yt=()=>W.regNumber&&W.name&&W.surname&&W.dateOfBirth&&W.gender&&W.guardianName&&W.guardianSurname&&W.guardianPhoneNumber,er=it=>it?new Date(it).toLocaleDateString():"N/A",Ye=async it=>{G(!0),Z(!0),fe(null);try{const Tt=await re.get(`${se}/students/${it}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});fe(Tt.data.data)}catch(Tt){console.error("Error fetching student:",Tt),oa("Failed to load student details","error"),G(!1)}finally{Z(!1)}},Et=()=>{G(!1),fe(null),Z(!1)},na=a.length>0?(k-1)*_+1:0,zt=Math.min(k*_,A);return a.length>0,s&&a.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading students..."})}):e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Students"}),e.jsx("p",{className:"report-subtitle",children:"Manage student registrations and information."})]}),e.jsx("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"},children:e.jsxs("button",{onClick:Ge,className:"btn-checklist",children:[e.jsx(I,{icon:Ht}),"Add Student"]})})]}),e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsxs("div",{className:"report-filters-left",children:[e.jsx("form",{onSubmit:ct,className:"filter-group",children:e.jsxs("div",{className:"search-input-wrapper",style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:ua,className:"search-icon"}),e.jsx("input",{type:"text",value:c,onChange:it=>u(it.target.value),placeholder:"Search by name, surname, or registration number...",className:"filter-input search-input"}),c&&e.jsx("button",{onClick:()=>{u(""),h(""),R(1)},style:{position:"absolute",right:"8px",padding:"4px 6px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},title:"Clear search",children:""})]})}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Gender:"}),e.jsxs("select",{value:p,onChange:Nt,className:"filter-input",style:{minWidth:"120px",width:"120px"},children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]}),p&&e.jsx("button",{onClick:jt,style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear gender filter",children:""})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Class:"}),e.jsxs("select",{value:g,onChange:xt,className:"filter-input",style:{minWidth:"180px",width:"180px"},disabled:j,children:[e.jsx("option",{value:"",children:"All Classes"}),N.map(it=>e.jsx("option",{value:it.id,children:it.name},it.id))]}),g&&e.jsx("button",{onClick:we,style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear class filter",children:""})]})]})}),i&&e.jsx("div",{style:{padding:"10px 30px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem"},children:i}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:s&&a.length===0?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading students..."}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"REG NUMBER"}),e.jsx("th",{style:{padding:"6px 10px"},children:"NAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"SURNAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"GENDER"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STATUS"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[a.map((it,Tt)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:Tt%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:it.RegNumber}),e.jsx("td",{style:{padding:"4px 10px"},children:it.Name}),e.jsx("td",{style:{padding:"4px 10px"},children:it.Surname}),e.jsx("td",{style:{padding:"4px 10px"},children:it.Gender||"N/A"}),e.jsx("td",{style:{padding:"4px 10px"},children:it.Active||"Unknown"}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>Ye(it.RegNumber),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0},title:"View",children:e.jsx(I,{icon:qa})}),e.jsx("button",{onClick:()=>Ie(it.RegNumber),style:{color:"#6366f1",background:"none",border:"none",cursor:"pointer",padding:0},title:"Edit",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>qe(it),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:0},title:"Delete",children:e.jsx(I,{icon:sa})})]})})]},it.RegNumber)),Array.from({length:Math.max(0,25-a.length)}).map((it,Tt)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(a.length+Tt)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${Tt}`))]})]})}),e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",na," to ",zt," of ",A||0," results."]}),e.jsxs("div",{className:"table-footer-right",children:[!m&&P>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>R(Math.max(1,k-1)),disabled:k===1,children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",k," of ",P]}),e.jsx("button",{className:"pagination-btn",onClick:()=>R(Math.min(P,k+1)),disabled:k===P,children:"Next"})]}),!m&&P<=1&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"All data displayed"})]})]}),B&&e.jsx("div",{className:"modal-overlay",onClick:lt,children:e.jsx("div",{className:"modal-dialog",onClick:it=>it.stopPropagation(),style:{maxWidth:"800px",minHeight:C?"400px":"auto"},children:C?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading..."})]}),e.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{height:"32px",width:"100px",background:"#e5e7eb",borderRadius:"4px"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Add Student"}),e.jsx("button",{className:"modal-close-btn",onClick:lt,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[Y&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:Y}),e.jsxs("form",{onSubmit:Mt,className:"modal-form",children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:as,style:{color:"#2563eb"}}),"Student Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Registration Number ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",name:"regNumber",className:"form-control",placeholder:"Enter or generate",value:W.regNumber,onChange:Dt,required:!0}),e.jsx("button",{type:"button",onClick:ze,disabled:H,className:"modal-btn",style:{background:"#6b7280",color:"white",padding:"6px 12px",whiteSpace:"nowrap",fontSize:"0.7rem"},children:H?"Generating...":"Generate"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["First Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"name",className:"form-control",placeholder:"Enter first name",value:W.name,onChange:Dt,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Surname ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"surname",className:"form-control",placeholder:"Enter surname",value:W.surname,onChange:Dt,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Date of Birth ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"date",name:"dateOfBirth",className:"form-control",value:W.dateOfBirth,onChange:Dt,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"National ID Number"}),e.jsx("input",{type:"text",name:"nationalIDNumber",className:"form-control",placeholder:"Enter national ID",value:W.nationalIDNumber,onChange:Dt})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Gender ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"gender",className:"form-control",value:W.gender,onChange:Dt,required:!0,children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Address"}),e.jsx("input",{type:"text",name:"address",className:"form-control",placeholder:"Enter full address",value:W.address,onChange:Dt})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:as,style:{color:"#10b981"}}),"Guardian Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Guardian First Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"guardianName",className:"form-control",placeholder:"Enter guardian first name",value:W.guardianName,onChange:Dt,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Guardian Surname ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"guardianSurname",className:"form-control",placeholder:"Enter guardian surname",value:W.guardianSurname,onChange:Dt,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Guardian National ID"}),e.jsx("input",{type:"text",name:"guardianNationalIDNumber",className:"form-control",placeholder:"Enter guardian national ID",value:W.guardianNationalIDNumber,onChange:Dt})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Relationship to Student"}),e.jsx("input",{type:"text",name:"relationshipToStudent",className:"form-control",placeholder:"e.g., Father, Mother, Uncle",value:W.relationshipToStudent,onChange:Dt})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsxs("label",{className:"form-label",children:["Guardian Phone Number ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"tel",name:"guardianPhoneNumber",className:"form-control",placeholder:"Enter phone number",value:W.guardianPhoneNumber,onChange:Dt,required:!0})]})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:lt,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:Mt,disabled:!Yt()||C,children:C?"Saving...":"Save Student"})]})]})})}),q&&e.jsx("div",{className:"modal-overlay",onClick:Et,children:e.jsx("div",{className:"modal-dialog",onClick:it=>it.stopPropagation(),style:{maxWidth:"800px",minHeight:z?"400px":"auto"},children:z?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{style:{marginTop:"15px",color:"var(--text-secondary)"},children:"Loading student details..."})]}),e.jsx("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}})})]}):Q?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",style:{color:"#000000"},children:["Student Profile - ",Q.Name," ",Q.Surname]}),e.jsx("button",{className:"modal-close-btn",onClick:Et,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:0,fontSize:"0.95rem",fontWeight:"700",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:as,style:{color:"#2563eb"}}),"Student Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px 30px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Registration Number"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:Q.RegNumber||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"First Name"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:Q.Name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Surname"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:Q.Surname||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Date of Birth"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:er(Q.DateOfBirth)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"National ID Number"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:Q.NationalIDNumber||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Gender"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:Q.Gender||"N/A"})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Address"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:Q.Address||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Status"}),e.jsx("div",{style:{fontSize:"0.85rem",color:Q.Active==="Yes"?"#10b981":"#ef4444",fontWeight:"600"},children:Q.Active||"N/A"})]})]})]}),Q.guardians&&Q.guardians.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:0,fontSize:"0.95rem",fontWeight:"700",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:as,style:{color:"#10b981"}}),"Guardian Information"]}),Q.guardians.map((it,Tt)=>e.jsx("div",{style:{marginBottom:Tt<Q.guardians.length-1?"20px":"0"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px 30px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Guardian First Name"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:it.Name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Guardian Surname"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:it.Surname||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"National ID Number"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:it.NationalIDNumber||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Phone Number"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:it.PhoneNumber||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Relationship to Student"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:it.RelationshipToStudent||"N/A"})]})]})},Tt))]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:Et,children:"Close"})})]}):null})}),he&&e.jsx("div",{className:"modal-overlay",onClick:dt,children:e.jsx("div",{className:"modal-dialog",onClick:it=>it.stopPropagation(),style:{maxWidth:"800px",minHeight:me?"400px":"auto"},children:me?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{style:{marginTop:"15px",color:"var(--text-secondary)"},children:"Loading student details..."})]}),e.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{height:"32px",width:"100px",background:"#e5e7eb",borderRadius:"4px"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Edit Student"}),e.jsx("button",{className:"modal-close-btn",onClick:dt,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[Ae&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:Ae}),e.jsxs("form",{onSubmit:Te,className:"modal-form",children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:as,style:{color:"#2563eb"}}),"Student Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Registration Number ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"regNumber",className:"form-control",placeholder:"Enter registration number",value:ie.regNumber,onChange:ut,required:!0,readOnly:!0,style:{backgroundColor:"#f9fafb",cursor:"not-allowed"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["First Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"name",className:"form-control",placeholder:"Enter first name",value:ie.name,onChange:ut,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Surname ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"surname",className:"form-control",placeholder:"Enter surname",value:ie.surname,onChange:ut,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Date of Birth ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"date",name:"dateOfBirth",className:"form-control",value:ie.dateOfBirth,onChange:ut,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"National ID Number"}),e.jsx("input",{type:"text",name:"nationalIDNumber",className:"form-control",placeholder:"Enter national ID",value:ie.nationalIDNumber,onChange:ut})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Gender ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"gender",className:"form-control",value:ie.gender,onChange:ut,required:!0,children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Address"}),e.jsx("input",{type:"text",name:"address",className:"form-control",placeholder:"Enter full address",value:ie.address,onChange:ut})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:as,style:{color:"#10b981"}}),"Guardian Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Guardian First Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"guardianName",className:"form-control",placeholder:"Enter guardian first name",value:ie.guardianName,onChange:ut,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Guardian Surname ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"guardianSurname",className:"form-control",placeholder:"Enter guardian surname",value:ie.guardianSurname,onChange:ut,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Guardian National ID"}),e.jsx("input",{type:"text",name:"guardianNationalIDNumber",className:"form-control",placeholder:"Enter guardian national ID",value:ie.guardianNationalIDNumber,onChange:ut})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Relationship to Student"}),e.jsx("input",{type:"text",name:"relationshipToStudent",className:"form-control",placeholder:"e.g., Father, Mother, Uncle",value:ie.relationshipToStudent,onChange:ut})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsxs("label",{className:"form-label",children:["Guardian Phone Number ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"tel",name:"guardianPhoneNumber",className:"form-control",placeholder:"Enter phone number",value:ie.guardianPhoneNumber,onChange:ut,required:!0})]})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:dt,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:Te,disabled:!Ve()||Ne,children:Ne?"Saving...":"Update Student"})]})]})})}),De&&Ee&&e.jsx("div",{className:"modal-overlay",onClick:Xe,children:e.jsxs("div",{className:"modal-dialog",onClick:it=>it.stopPropagation(),style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Confirm Delete"}),e.jsx("button",{className:"modal-close-btn",onClick:Xe,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#ef4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"4px"},children:"Are you sure you want to delete this student?"}),e.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-secondary)"},children:"This action cannot be undone."})]})]}),e.jsxs("div",{style:{padding:"12px",background:"#f9fafb",borderRadius:"4px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Student Information"}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Name:"})," ",Ee.Name," ",Ee.Surname]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Registration Number:"})," ",Ee.RegNumber]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:Xe,disabled:Re,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-delete",onClick:We,disabled:Re,children:Re?"Deleting...":"Delete Student"})]})]})}),te.visible&&te.message&&e.jsx("div",{className:"success-toast",children:e.jsxs("div",{className:"success-toast-content",style:{background:Ka(te.type)},children:[ca(te.type),e.jsx("span",{children:te.message})]})})]})},_le=()=>{const t=Da(),{token:a}=At(),[r,s]=x.useState(!1),[n,i]=x.useState(null),[o,c]=x.useState(!1),[u,m]=x.useState(!1),[h,p]=x.useState(null),[y,g]=x.useState(!1),[v,N]=x.useState(null),[w,j]=x.useState({regNumber:"",name:"",surname:"",dateOfBirth:"",nationalIDNumber:"",address:"",gender:"",active:"Yes",guardianName:"",guardianSurname:"",guardianNationalIDNumber:"",guardianPhoneNumber:"",relationshipToStudent:""}),T=_=>{const{name:B,value:D}=_.target;j(C=>({...C,[B]:D}))},k=()=>{j({regNumber:"",name:"",surname:"",dateOfBirth:"",nationalIDNumber:"",address:"",gender:"",active:"Yes",guardianName:"",guardianSurname:"",guardianNationalIDNumber:"",guardianPhoneNumber:"",relationshipToStudent:""}),i(null)},R=()=>{const _=Math.floor(Math.random()*1e4).toString().padStart(4,"0"),B="ABCDEFGHIJKLMNOPQRSTUVWXYZ",D=B[Math.floor(Math.random()*B.length)];return`R${_}${D}`},P=async _=>{try{return(await re.get(`${se}/students/${_}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).status===200}catch(B){if(B.response&&B.response.status===404)return!1;throw B}},$=async()=>{c(!0),i(null);try{let _,B=0;const D=10;do if(_=R(),B++,B>=D)throw new Error("Unable to generate unique registration number. Please try again.");while(await P(_));j(C=>({...C,regNumber:_}))}catch(_){console.error("Error generating registration number:",_),i(`Error generating registration number: ${_.message}`)}finally{c(!1)}},A=async _=>{_.preventDefault(),s(!0),i(null);try{const D=(await re.post(`${se}/students`,w,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data;p(D.data),m(!0),k()}catch(B){console.error("Error adding student:",B);let D="An unexpected error occurred",C="general",L="";if(B.response){const H=B.response.data,V=B.response.status;if(H?.errorType&&H?.error)D=H.error,C=H.errorType,H.field==="regNumber"?L="Registration Number":H.field==="nationalIDNumber"?L="National ID Number":H.field&&(L=H.field);else if(V===500&&H?.error){const Y=H.error.toLowerCase();Y.includes("duplicate entry")&&Y.includes("regnumber")?(D="A student with this registration number already exists. Please use a different registration number.",C="duplicate",L="Registration Number"):Y.includes("duplicate entry")&&Y.includes("nationalidnumber")?(D="National ID number already exists. A student with this National ID is already registered.",C="duplicate",L="National ID Number"):Y.includes("duplicate entry")?(D="This information already exists in the system. Please check your entries and try again.",C="duplicate",L="Duplicate Data"):(D=H.error||"Database error occurred",C="database")}else D=H?.error||`Server Error (${V}): ${B.response.statusText}`,C="server"}else B.request?(D="No response from server. Please check your internet connection and try again.",C="network"):(D=B.message||"An unexpected error occurred",C="general");N({message:D,type:C,field:L,originalError:B.response?.data?.error||B.message}),g(!0)}finally{s(!1)}},M=()=>w.regNumber&&w.name&&w.surname&&w.dateOfBirth&&w.gender&&w.guardianName&&w.guardianSurname&&w.guardianPhoneNumber;return e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[u&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-green-100 rounded-full",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mt-4",children:"Student Added Successfully!"}),e.jsx("div",{className:"mt-2 px-7 py-3",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Student ",e.jsxs("strong",{children:[h?.name," ",h?.surname]})," has been successfully registered with registration number ",e.jsx("strong",{children:h?.regNumber}),"."]})}),e.jsxs("div",{className:"items-center px-4 py-3",children:[e.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 bg-gray-700 text-white text-xs font-medium hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 w-full",children:"Add Another Student"}),e.jsx("button",{onClick:()=>{m(!1),t("/dashboard/students")},className:"mt-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 text-xs font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 w-full",children:"View All Students"})]})]})})}),y&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-red-100 rounded-full",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mt-4",children:v?.type==="duplicate"?"Duplicate Information":v?.type==="network"?"Connection Error":v?.type==="database"?"Database Error":"Error Adding Student"}),e.jsxs("div",{className:"mt-2 px-7 py-3",children:[e.jsx("p",{className:"text-xs text-gray-700 mb-3",children:v?.message}),v?.field&&e.jsxs("p",{className:"text-xs text-red-600 font-medium",children:["Field: ",v.field]}),v?.type==="duplicate"&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Please check your information and try again."})]}),e.jsxs("div",{className:"items-center px-4 py-3",children:[e.jsx("button",{onClick:()=>{g(!1),N(null)},className:"px-4 py-2 bg-red-600 text-white text-xs font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 w-full",children:"Close"}),v?.type==="duplicate"&&v?.field==="Registration Number"&&e.jsx("button",{onClick:()=>{g(!1),N(null),$()},className:"mt-2 px-4 py-2 bg-gray-700 text-white text-xs font-medium hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 w-full",children:"Generate New Registration Number"})]})]})})}),e.jsx("div",{className:"sm:flex sm:items-center",children:e.jsx("div",{className:"sm:flex-auto",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-semibold text-gray-900",children:"Add New Student"}),e.jsx("p",{className:"mt-2 text-xs text-gray-700",children:"Register a new student with guardian information"})]})})}),n&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 p-4",children:e.jsx("div",{className:"text-sm text-red-600",children:n})}),e.jsxs("form",{onSubmit:A,className:"mt-8 space-y-8",children:[e.jsxs("div",{className:"bg-white overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"px-4 py-5 sm:px-6",children:e.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 flex items-center",children:[e.jsx(I,{icon:as,className:"mr-2 text-blue-600"}),"Student Information"]})}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsx("div",{className:"px-4 py-5 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"regNumber",className:"block text-xs font-medium text-gray-600",children:["Registration Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"mt-1 flex",children:[e.jsx("input",{type:"text",name:"regNumber",id:"regNumber",required:!0,value:w.regNumber,onChange:T,className:"flex-1 border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Enter manually or generate"}),e.jsx("button",{type:"button",onClick:$,disabled:o,className:"ml-2 inline-flex items-center justify-center border border-transparent bg-gray-700 px-3 py-2 text-xs font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Generating...":"Generate"})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"name",className:"block text-xs font-medium text-gray-600",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",id:"name",required:!0,value:w.name,onChange:T,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"First name"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"surname",className:"block text-xs font-medium text-gray-600",children:["Surname ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"surname",id:"surname",required:!0,value:w.surname,onChange:T,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Surname"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"dateOfBirth",className:"block text-xs font-medium text-gray-600",children:["Date of Birth ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"dateOfBirth",id:"dateOfBirth",required:!0,value:w.dateOfBirth,onChange:T,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"nationalIDNumber",className:"block text-xs font-medium text-gray-600",children:"National ID Number"}),e.jsx("input",{type:"text",name:"nationalIDNumber",id:"nationalIDNumber",value:w.nationalIDNumber,onChange:T,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"National ID"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"gender",className:"block text-xs font-medium text-gray-600",children:["Gender ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"gender",id:"gender",required:!0,value:w.gender,onChange:T,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"address",className:"block text-xs font-medium text-gray-600",children:"Address"}),e.jsx("input",{type:"text",name:"address",id:"address",value:w.address,onChange:T,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Full address"})]})]})})})]}),e.jsxs("div",{className:"bg-white overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"px-4 py-5 sm:px-6",children:e.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 flex items-center",children:[e.jsx(I,{icon:as,className:"mr-2 text-green-600"}),"Guardian Information"]})}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsx("div",{className:"px-4 py-5 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-3",children:[e.jsxs("label",{htmlFor:"guardianName",className:"block text-xs font-medium text-gray-600",children:["Guardian First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"guardianName",id:"guardianName",required:!0,value:w.guardianName,onChange:T,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Guardian first name"})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsxs("label",{htmlFor:"guardianSurname",className:"block text-xs font-medium text-gray-600",children:["Guardian Surname ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"guardianSurname",id:"guardianSurname",required:!0,value:w.guardianSurname,onChange:T,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Guardian surname"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"guardianNationalIDNumber",className:"block text-xs font-medium text-gray-600",children:"Guardian National ID (Optional)"}),e.jsx("input",{type:"text",name:"guardianNationalIDNumber",id:"guardianNationalIDNumber",value:w.guardianNationalIDNumber,onChange:T,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Guardian national ID"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"relationshipToStudent",className:"block text-xs font-medium text-gray-600",children:"Relationship to Student"}),e.jsx("input",{type:"text",name:"relationshipToStudent",id:"relationshipToStudent",value:w.relationshipToStudent,onChange:T,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"e.g., Father, Mother, Uncle, Aunt"})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsxs("label",{htmlFor:"guardianPhoneNumber",className:"block text-xs font-medium text-gray-600",children:["Guardian Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",name:"guardianPhoneNumber",id:"guardianPhoneNumber",required:!0,value:w.guardianPhoneNumber,onChange:T,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Phone number"})]})]})})})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsxs(ss,{to:"/dashboard/students",className:"inline-flex items-center justify-center border border-gray-300 bg-white px-3 py-1.5 text-xs font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 sm:w-auto",children:[e.jsx(I,{icon:Wt,className:"mr-2"}),"Cancel"]}),e.jsxs("button",{type:"submit",disabled:!M()||r,className:"inline-flex items-center justify-center border border-transparent bg-gray-700 px-3 py-1.5 text-xs font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(I,{icon:ns,className:"mr-2"}),r?"Saving...":"Save Student"]})]})]})]})},Cle=()=>{const{id:t}=Tn(),a=Da(),{token:r}=At(),[s,n]=x.useState(!0),[i,o]=x.useState(!1),[c,u]=x.useState(null),[m,h]=x.useState(null),[p,y]=x.useState(!1),[g,v]=x.useState({regNumber:"",name:"",surname:"",dateOfBirth:"",nationalIDNumber:"",address:"",gender:"",active:"Yes",guardianName:"",guardianSurname:"",guardianNationalIDNumber:"",guardianPhoneNumber:"",relationshipToStudent:""});x.useEffect(()=>{N()},[t]);const N=async()=>{try{n(!0),u(null),console.log(" Fetching student for edit with regNumber:",t);const R=(await re.get(`${se}/students/${t}`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data;console.log(" Student data for edit:",R.data),h(R.data);const P=R.data,$=P.guardians?.[0];v({regNumber:P.RegNumber||"",name:P.Name||"",surname:P.Surname||"",dateOfBirth:P.DateOfBirth?P.DateOfBirth.split("T")[0]:"",nationalIDNumber:P.NationalIDNumber||"",address:P.Address||"",gender:P.Gender||"",active:P.Active==="Active"?"Yes":P.Active==="Inactive"?"No":P.Active||"Yes",guardianName:$?.Name||"",guardianSurname:$?.Surname||"",guardianNationalIDNumber:$?.NationalIDNumber||"",guardianPhoneNumber:$?.PhoneNumber||"",relationshipToStudent:$?.RelationshipToStudent||""})}catch(k){console.error("Error fetching student for edit:",k),k.response?k.response.status===404?u("Student not found"):u(`Error: ${k.response.status} - ${k.response.data?.message||k.response.statusText}`):k.request?u("No response from server. Please check your connection."):u(`Error: ${k.message}`)}finally{n(!1)}},w=k=>{const{name:R,value:P}=k.target;v($=>({...$,[R]:P}))},j=async k=>{k.preventDefault(),o(!0),u(null);try{console.log(" Saving student data:",g);const R=await re.put(`${se}/students/${t}`,g,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});console.log(" Student updated successfully:",R.data),y(!0)}catch(R){if(console.error("Error updating student:",R),R.response){const P=R.response.data;u(P?.error||`Failed to update student: ${R.response.status}`)}else R.request?u("No response from server. Please check your connection."):u(`Error: ${R.message}`)}finally{o(!1)}},T=()=>g.regNumber&&g.name&&g.surname&&g.dateOfBirth&&g.gender&&g.guardianName&&g.guardianSurname&&g.guardianPhoneNumber;return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading student information..."})}):c?e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-red-50 border border-red-200 p-4",children:e.jsx("div",{className:"text-sm text-red-600",children:c})})}):m?e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Edit Student"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[m.Name," ",m.Surname," - ",m.RegNumber]})]})})}),c&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 p-4",children:e.jsx("div",{className:"text-sm text-red-600",children:c})}),e.jsxs("form",{onSubmit:j,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 sm:px-6",children:e.jsxs("h3",{className:"text-sm leading-6 font-medium text-gray-900 flex items-center",children:[e.jsx(I,{icon:as,className:"mr-2 text-blue-600"}),"Student Information"]})}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsx("div",{className:"px-4 py-5 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"regNumber",className:"block text-xs font-medium text-gray-600",children:["Registration Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"regNumber",id:"regNumber",required:!0,value:g.regNumber,onChange:w,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"e.g., ST001"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"name",className:"block text-xs font-medium text-gray-600",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",id:"name",required:!0,value:g.name,onChange:w,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"First name"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"surname",className:"block text-xs font-medium text-gray-600",children:["Surname ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"surname",id:"surname",required:!0,value:g.surname,onChange:w,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"Surname"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"dateOfBirth",className:"block text-xs font-medium text-gray-600",children:["Date of Birth ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"dateOfBirth",id:"dateOfBirth",required:!0,value:g.dateOfBirth,onChange:w,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"nationalIDNumber",className:"block text-xs font-medium text-gray-600",children:"National ID Number"}),e.jsx("input",{type:"text",name:"nationalIDNumber",id:"nationalIDNumber",value:g.nationalIDNumber,onChange:w,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"National ID"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"gender",className:"block text-xs font-medium text-gray-600",children:["Gender ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"gender",id:"gender",required:!0,value:g.gender,onChange:w,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"address",className:"block text-xs font-medium text-gray-600",children:"Address"}),e.jsx("input",{type:"text",name:"address",id:"address",value:g.address,onChange:w,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"Full address"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"active",className:"block text-xs font-medium text-gray-600",children:"Status"}),e.jsxs("select",{name:"active",id:"active",value:g.active,onChange:w,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"Yes",children:"Yes"}),e.jsx("option",{value:"No",children:"No"})]})]})]})})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 sm:px-6",children:e.jsxs("h3",{className:"text-sm leading-6 font-medium text-gray-900 flex items-center",children:[e.jsx(I,{icon:as,className:"mr-2 text-green-600"}),"Guardian Information"]})}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsx("div",{className:"px-4 py-5 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-3",children:[e.jsxs("label",{htmlFor:"guardianName",className:"block text-xs font-medium text-gray-600",children:["Guardian First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"guardianName",id:"guardianName",required:!0,value:g.guardianName,onChange:w,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"Guardian first name"})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsxs("label",{htmlFor:"guardianSurname",className:"block text-xs font-medium text-gray-600",children:["Guardian Surname ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"guardianSurname",id:"guardianSurname",required:!0,value:g.guardianSurname,onChange:w,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"Guardian surname"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"guardianNationalIDNumber",className:"block text-xs font-medium text-gray-600",children:["Guardian National ID ",e.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),e.jsx("input",{type:"text",name:"guardianNationalIDNumber",id:"guardianNationalIDNumber",value:g.guardianNationalIDNumber,onChange:w,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"Guardian national ID"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{htmlFor:"guardianPhoneNumber",className:"block text-xs font-medium text-gray-600",children:["Guardian Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",name:"guardianPhoneNumber",id:"guardianPhoneNumber",required:!0,value:g.guardianPhoneNumber,onChange:w,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"Phone number"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"relationshipToStudent",className:"block text-xs font-medium text-gray-600",children:"Relationship to Student"}),e.jsx("input",{type:"text",name:"relationshipToStudent",id:"relationshipToStudent",value:g.relationshipToStudent,onChange:w,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"e.g., Mother, Father, Guardian"})]})]})})})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsxs(ss,{to:`/dashboard/students/view/${t}`,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[e.jsx(I,{icon:Wt,className:"mr-2"}),"Cancel"]}),e.jsxs("button",{type:"submit",disabled:!T()||i,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(I,{icon:ns,className:"mr-2"}),i?"Saving...":"Save Changes"]})]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-green-100",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mt-4",children:"Student Information Successfully Updated!"}),e.jsx("div",{className:"mt-2 px-7 py-3",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["The information for ",e.jsxs("strong",{children:[m?.Name," ",m?.Surname]})," has been successfully updated."]})}),e.jsxs("div",{className:"items-center px-4 py-3",children:[e.jsx("button",{onClick:()=>{y(!1),a(`/dashboard/students/view/${t}`)},className:"px-4 py-2 bg-gray-700 text-white text-xs font-medium hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 w-full",children:"View Student Details"}),e.jsx("button",{onClick:()=>{y(!1),a("/dashboard/students")},className:"mt-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 text-xs font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 w-full",children:"Back to Students List"})]})]})})})]}):e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-gray-500",children:"Student not found"})})})},kle=()=>{const{id:t}=Tn(),a=Da(),{token:r}=At(),[s,n]=x.useState(null),[i,o]=x.useState(!0),[c,u]=x.useState(null),[m,h]=x.useState("personal");x.useEffect(()=>{p()},[t]);const p=async()=>{try{o(!0),u(null),console.log(" Fetching student with regNumber:",t);const N=(await re.get(`${se}/students/${t}`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).data;console.log(" Student data received:",N.data),console.log(" Guardian data:",N.data.guardians),n(N.data)}catch(v){console.error("Error fetching student:",v),v.response?v.response.status===404?u("Student not found"):u(`Error: ${v.response.status} - ${v.response.data?.message||v.response.statusText}`):v.request?u("No response from server. Please check your connection."):u(`Error: ${v.message}`)}finally{o(!1)}},y=async()=>{if(window.confirm("Are you sure you want to delete this student? This action cannot be undone."))try{await re.delete(`${se}/students/${t}`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}}),a("/dashboard/students")}catch(v){console.error("Error deleting student:",v),v.response?u(`Failed to delete student: ${v.response.status} - ${v.response.data?.message||v.response.statusText}`):v.request?u("No response from server. Please check your connection."):u(`Error: ${v.message}`)}},g=v=>v?new Date(v).toLocaleDateString():"N/A";return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading student information..."})}):c?e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 p-4",children:[e.jsx("div",{className:"text-sm text-red-600",children:c}),e.jsxs(ss,{to:"/dashboard/students",className:"mt-2 inline-flex items-center text-sm text-red-600 hover:text-red-800",children:[e.jsx(I,{icon:fm,className:"mr-1"}),"Back to Students"]})]})}):s?e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg font-bold text-gray-900",children:[s.Name," ",s.Surname]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Registration Number: ",s.RegNumber]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(ss,{to:`/dashboard/students/edit/${t}`,className:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[e.jsx(I,{icon:Aa,className:"mr-2"}),"Edit"]}),e.jsxs("button",{onClick:y,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx(I,{icon:sa,className:"mr-2"}),"Delete"]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("nav",{className:"flex space-x-8 border-b border-gray-200",children:[{id:"personal",label:"Personal Information",icon:Js},{id:"guardian",label:"Guardian Information",icon:Cr}].map(v=>e.jsxs("button",{onClick:()=>h(v.id),className:`py-2 px-1 border-b-2 font-medium text-xs flex items-center ${m===v.id?"border-gray-700 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(I,{icon:v.icon,className:"mr-2 h-3 w-3"}),v.label]},v.id))})}),e.jsxs("div",{className:"min-h-96",children:[m==="personal"&&e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 sm:px-6",children:e.jsxs("h3",{className:"text-sm leading-6 font-medium text-gray-900 flex items-center",children:[e.jsx(I,{icon:Js,className:"mr-2 text-blue-600"}),"Personal Information"]})}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsxs("dl",{children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Full Name"}),e.jsxs("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2",children:[s.Name," ",s.Surname]})]}),e.jsxs("div",{className:"bg-white px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Registration Number"}),e.jsx("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2 font-mono",children:s.RegNumber})]}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Date of Birth"}),e.jsxs("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2 flex items-center",children:[e.jsx(I,{icon:Pa,className:"mr-2 text-gray-400"}),g(s.DateOfBirth)]})]}),e.jsxs("div",{className:"bg-white px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"National ID Number"}),e.jsxs("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2 flex items-center",children:[e.jsx(I,{icon:mj,className:"mr-2 text-gray-400"}),s.NationalIDNumber||"N/A"]})]}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Gender"}),e.jsxs("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2 flex items-center",children:[e.jsx(I,{icon:XB,className:"mr-2 text-gray-400"}),s.Gender||"N/A"]})]}),e.jsxs("div",{className:"bg-white px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Address"}),e.jsxs("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2 flex items-center",children:[e.jsx(I,{icon:lu,className:"mr-2 text-gray-400"}),s.Address||"N/A"]})]}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Status"}),e.jsx("dd",{className:"mt-1 text-xs sm:mt-0 sm:col-span-2",children:e.jsx("div",{className:"text-xs text-gray-900",children:s.Active||"Unknown"})})]}),s.ImagePath&&e.jsxs("div",{className:"bg-white px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Profile Image"}),e.jsx("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2",children:e.jsx("img",{src:s.ImagePath,alt:`${s.Name} ${s.Surname}`,className:"h-20 w-20 object-cover"})})]})]})})]}),m==="guardian"&&e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 sm:px-6",children:e.jsxs("h3",{className:"text-sm leading-6 font-medium text-gray-900 flex items-center",children:[e.jsx(I,{icon:Cr,className:"mr-2 text-green-600"}),"Guardian Information"]})}),e.jsx("div",{className:"border-t border-gray-200",children:s.guardians&&s.guardians.length>0?e.jsx("div",{children:s.guardians.map((v,N)=>e.jsxs("dl",{className:N>0?"border-t border-gray-200":"",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Guardian Name"}),e.jsxs("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2",children:[v.Name," ",v.Surname]})]}),e.jsxs("div",{className:"bg-white px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Phone Number"}),e.jsxs("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2 flex items-center",children:[e.jsx(I,{icon:$N,className:"mr-2 text-gray-400"}),v.PhoneNumber||"N/A"]})]}),v.NationalIDNumber&&e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"National ID"}),e.jsxs("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2 flex items-center",children:[e.jsx(I,{icon:mj,className:"mr-2 text-gray-400"}),v.NationalIDNumber]})]}),v.RelationshipToStudent&&e.jsxs("div",{className:"bg-white px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500",children:"Relationship"}),e.jsx("dd",{className:"mt-1 text-xs text-gray-900 sm:mt-0 sm:col-span-2",children:v.RelationshipToStudent})]})]},v.GuardianID||N))}):e.jsx("div",{className:"px-4 py-8 text-center text-xs text-gray-500",children:"No guardian information available"})})]})]})]}):e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-500",children:"Student not found"}),e.jsxs(ss,{to:"/dashboard/students",className:"mt-2 inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(I,{icon:fm,className:"mr-1"}),"Back to Students"]})]})})},TO=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState(null),[i,o]=x.useState(null),[c,u]=x.useState(""),[m,h]=x.useState([]),[p,y]=x.useState(null),[g,v]=x.useState(0),[N,w]=x.useState({adjustment_type:"debit",amount:"",description:"Opening Balance - Historical Debt",reference:""}),j=async()=>{if(!c.trim()){n("Please enter a registration number or student name to search");return}r(!0);try{const A=await re.get(`${se}/students/search?query=${c}`,{headers:{Authorization:`Bearer ${t}`}});h(A.data.data||[]),n(null)}catch(A){console.error("Error searching students:",A),n("Failed to search for student"),h([])}finally{r(!1)}},T=async A=>{try{r(!0),n(null);const M=t?{Authorization:`Bearer ${t}`}:{},_=await re.get(`${se}/students/${A.RegNumber}/balance`,{headers:M});y(A),v(_.data.balance||0),w({adjustment_type:"debit",amount:"",description:"Opening Balance - Historical Debt",reference:""}),h([]),u("")}catch(M){console.error("Error getting student balance:",M),n(M.response?.data?.error||"Failed to load student balance")}finally{r(!1)}},k=A=>{const{name:M,value:_}=A.target;w(B=>({...B,[M]:_}))},R=()=>{const A=Date.now(),M=Math.random().toString(36).substring(2,8).toUpperCase();w(_=>({..._,reference:`MBU-${A}-${M}`}))},P=async A=>{if(A.preventDefault(),!p){n("Please select a student first");return}if(!N.amount||parseFloat(N.amount)<=0){n("Please enter a valid amount");return}if(!N.description.trim()){n("Please enter a description for this adjustment");return}try{r(!0),n(null),o(null);const M=t?{Authorization:`Bearer ${t}`}:{},_={student_id:p.RegNumber,adjustment_type:N.adjustment_type,amount:parseFloat(N.amount),description:N.description,reference:N.reference||`MBU-${Date.now()}-${Math.random().toString(36).substring(2,8).toUpperCase()}`};await re.post(`${se}/students/manual-balance-adjustment`,_,{headers:M}),o("Opening balance recorded successfully! This historical debt has been added to the student account."),await new Promise(D=>setTimeout(D,500)),console.log(" Refreshing balance for student:",p.RegNumber);const B=await re.get(`${se}/students/${p.RegNumber}/balance`,{headers:M});console.log(" Balance response:",B.data),v(B.data.balance||0),w({adjustment_type:"debit",amount:"",description:"Opening Balance - Historical Debt",reference:""})}catch(M){console.error("Error updating balance:",M),n(M.response?.data?.error||"Failed to update student balance")}finally{r(!1)}},$=()=>{y(null),v(0),w({adjustment_type:"debit",amount:"",description:"Opening Balance - Historical Debt",reference:""}),n(null),o(null)};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Student Opening Balance Entry"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Record historical student debts from before system implementation"})]})}),e.jsx("div",{className:"mt-3 bg-yellow-50 border border-yellow-200 px-4 py-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(I,{icon:Ma,className:"text-yellow-600 mr-3 mt-0.5"}),e.jsxs("div",{className:"text-xs text-yellow-800",children:[e.jsx("p",{className:"font-semibold mb-1",children:" Use This ONLY for Opening Balances"}),e.jsx("p",{className:"mb-1",children:"This feature is designed ONLY for recording historical debts that existed BEFORE your system went live."}),e.jsx("p",{className:"font-medium",children:"For mid-term adjustments:"}),e.jsxs("ul",{className:"list-disc ml-4 mt-1",children:[e.jsxs("li",{children:["Use the ",e.jsx("strong",{children:"Waivers"})," module to forgive fees"]}),e.jsxs("li",{children:["Use the ",e.jsx("strong",{children:"Payments"})," module to record payments"]}),e.jsx("li",{children:"Contact the accounting team for other corrections"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 shadow",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Search Student"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:c,onChange:A=>u(A.target.value),placeholder:"Search by registration number or name",className:"flex-1 px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",onKeyPress:A=>A.key==="Enter"&&j()}),e.jsxs("button",{onClick:j,disabled:a,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 text-xs font-medium flex items-center",children:[a?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):e.jsx(I,{icon:ua,className:"mr-2"}),"Search"]})]}),m.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-700",children:"Search Results:"}),m.map(A=>e.jsx("div",{onClick:()=>T(A),className:"p-3 border border-gray-200 hover:bg-gray-50 cursor-pointer text-xs",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[A.Name," ",A.Surname]}),e.jsxs("p",{className:"text-gray-600",children:["Reg: ",A.RegNumber]})]}),e.jsx(I,{icon:Js,className:"text-gray-400"})]})},A.id))]}),p&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-blue-900 text-xs",children:[p.Name," ",p.Surname]}),e.jsxs("p",{className:"text-blue-700 text-xs",children:["Reg: ",p.RegNumber]}),e.jsxs("p",{className:"text-blue-700 text-xs",children:["Current Balance:",e.jsxs("span",{className:`font-bold ml-1 ${g>=0?"text-green-600":"text-red-600"}`,children:["$",Math.abs(g).toFixed(2)," ",g>=0?"Credit":"Debit"]})]})]}),e.jsx("button",{onClick:$,className:"text-blue-600 hover:text-blue-800",children:e.jsx(I,{icon:Wt})})]})})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 shadow",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Opening Balance Entry"})}),e.jsxs("form",{onSubmit:P,className:"p-4",children:[i&&e.jsxs("div",{className:"mb-4 p-3 bg-green-100 border border-green-200 text-green-700 text-xs",children:[e.jsx(I,{icon:cr,className:"mr-2"}),i]}),s&&e.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 text-xs",children:[e.jsx(I,{icon:Ma,className:"mr-2"}),s]}),!p&&e.jsxs("div",{className:"mb-4 p-3 bg-yellow-100 border border-yellow-200 text-yellow-700 text-xs",children:[e.jsx(I,{icon:hE,className:"mr-2"}),"Please search and select a student first"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Balance Type *"}),e.jsxs("select",{name:"adjustment_type",value:N.adjustment_type,onChange:k,required:!0,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"debit",children:"Student Owes Money (Debit - Most Common)"}),e.jsx("option",{value:"credit",children:"Student Has Credit (Rare - use payment module instead)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:` In most cases, you'll use "Student Owes Money" for historical unpaid fees`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Amount *"}),e.jsx("input",{type:"number",name:"amount",value:N.amount,onChange:k,required:!0,min:"0.01",step:"0.01",placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description *"}),e.jsx("textarea",{name:"description",value:N.description,onChange:k,required:!0,rows:3,placeholder:"e.g., Opening Balance - Unpaid fees from 2023 Term 1",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:" Describe what this historical debt is for (year, term, reason)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reference"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"reference",value:N.reference,onChange:k,placeholder:"Auto-generated if left empty",className:"flex-1 px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"}),e.jsx("button",{type:"button",onClick:R,className:"px-3 py-2 bg-gray-600 text-white hover:bg-gray-700 text-xs font-medium",children:"Generate"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:$,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 text-xs font-medium border border-gray-300",children:"Clear"}),e.jsxs("button",{type:"submit",disabled:a||!p,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-xs font-medium flex items-center",children:[a?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):e.jsx(I,{icon:ns,className:"mr-2"}),a?"Processing...":"Record Adjustment"]})]})]})]})]})]})})},Ale=()=>{const{token:t}=At(),[a,r]=x.useState([]),[s,n]=x.useState(!0),[i,o]=x.useState(null),[c,u]=x.useState(""),[m,h]=x.useState(!1),[p,y]=x.useState(!1),[g,v]=x.useState(!1),[N,w]=x.useState(null),j=async()=>{try{n(!0),o(null);const G=await re.get(`${se}/management/users`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});console.log(" Users data:",G.data),r(G.data.data||[])}catch(G){console.error("Error fetching users:",G),G.response?o(`Error: ${G.response.status} - ${G.response.data?.error||G.response.statusText}`):G.request?o("No response from server. Please check your connection."):o(`Error: ${G.message}`)}finally{n(!1)}};x.useEffect(()=>{j()},[]);const T=()=>{w(null),h(!0)},k=G=>{w(G),y(!0)},R=G=>{w(G),v(!0)},P=async G=>{const Z=a.find(Q=>Q.id===G).is_active?"deactivate":"activate";if(window.confirm(`Are you sure you want to ${Z} this user?`))try{await re.patch(`${se}/management/users/${G}/toggle-status`,{},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),r(a.map(Q=>Q.id===G?{...Q,is_active:!Q.is_active}:Q))}catch(Q){console.error("Error toggling user status:",Q),o("Failed to update user status")}},$=async G=>{if(window.confirm("Are you sure you want to delete this user?"))try{await re.delete(`${se}/management/users/${G}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),r(a.filter(z=>z.id!==G))}catch(z){console.error("Error deleting user:",z),z.response?.data?.error?o(z.response.data.error):o("Failed to delete user")}},A=G=>G.username==="sysadmin",[M,_]=x.useState(""),[B,D]=x.useState(1),[C,L]=x.useState(1),[H,V]=x.useState(0),[Y]=x.useState(25),J=G=>{G.preventDefault(),_(c),D(1)},W=()=>{u(""),_(""),D(1)};x.useEffect(()=>{j()},[B,M]),x.useEffect(()=>{if(a.length>0){const G=a.filter(z=>z.username.toLowerCase().includes(M.toLowerCase())||z.roles.some(Z=>Z.toLowerCase().includes(M.toLowerCase())));V(G.length),L(Math.ceil(G.length/Y))}},[a,M,Y]);const te=a.filter(G=>G.username.toLowerCase().includes(M.toLowerCase())||G.roles.some(z=>z.toLowerCase().includes(M.toLowerCase()))).slice((B-1)*Y,B*Y),oe=te.length>0?(B-1)*Y+1:0,q=Math.min(B*Y,H);return te.length>0,s?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:e.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"0.75rem"},children:"Loading users..."})}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsxs("div",{className:"report-filters-left",children:[e.jsx("form",{onSubmit:J,className:"filter-group",children:e.jsxs("div",{className:"search-input-wrapper",style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:ua,className:"search-icon"}),e.jsx("input",{type:"text",value:c,onChange:G=>u(G.target.value),placeholder:"Search by username or role...",className:"filter-input search-input"}),c&&e.jsx("button",{onClick:W,style:{position:"absolute",right:"8px",padding:"4px 6px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},title:"Clear search",children:""})]})}),e.jsxs("button",{onClick:T,className:"btn-checklist",children:[e.jsx(I,{icon:Ht}),"Add User"]})]})}),i&&e.jsx("div",{style:{padding:"10px 30px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem"},children:i}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:s&&a.length===0?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading users..."}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"USERNAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STATUS"}),e.jsx("th",{style:{padding:"6px 10px"},children:"LAST LOGIN"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[te.map((G,z)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:z%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Js,style:{color:"var(--text-secondary)",fontSize:"0.7rem"}}),G.username]})}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(I,{icon:G.is_active?cr:hm,style:{fontSize:"0.7rem",color:G.is_active?"#10b981":"#ef4444"}}),G.is_active?"Active":"Inactive"]})}),e.jsx("td",{style:{padding:"4px 10px"},children:G.last_login?new Date(G.last_login).toLocaleDateString():"Never"}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>R(G),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0},title:"View Roles",children:e.jsx(I,{icon:kf})}),A(G)?e.jsx("button",{disabled:!0,style:{color:"#d1d5db",background:"none",border:"none",cursor:"not-allowed",padding:0},title:"System admin cannot be edited",children:e.jsx(I,{icon:Aa})}):e.jsx("button",{onClick:()=>k(G),style:{color:"#6366f1",background:"none",border:"none",cursor:"pointer",padding:0},title:"Edit User",children:e.jsx(I,{icon:Aa})}),A(G)?e.jsx("button",{disabled:!0,style:{color:"#d1d5db",background:"none",border:"none",cursor:"not-allowed",padding:0},title:"System admin cannot be deactivated",children:e.jsx(I,{icon:V6})}):e.jsx("button",{onClick:()=>P(G.id),style:{color:G.is_active?"#f59e0b":"#10b981",background:"none",border:"none",cursor:"pointer",padding:0},title:G.is_active?"Deactivate User":"Activate User",children:e.jsx(I,{icon:G.is_active?V6:cr})}),A(G)?e.jsx("button",{disabled:!0,style:{color:"#d1d5db",background:"none",border:"none",cursor:"not-allowed",padding:0},title:"System admin cannot be deleted",children:e.jsx(I,{icon:sa})}):e.jsx("button",{onClick:()=>$(G.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:0},title:"Delete User",children:e.jsx(I,{icon:sa})})]})})]},G.id)),Array.from({length:Math.max(0,Y-te.length)}).map((G,z)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(te.length+z)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${z}`))]})]})}),e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",oe," to ",q," of ",H||0," results."]}),e.jsxs("div",{className:"table-footer-right",children:[!M&&C>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>D(Math.max(1,B-1)),disabled:B===1,children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",B," of ",C]}),e.jsx("button",{className:"pagination-btn",onClick:()=>D(Math.min(C,B+1)),disabled:B===C,children:"Next"})]}),!M&&C<=1&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"All data displayed"})]})]}),m&&e.jsx(yk,{isOpen:m,onClose:()=>h(!1),user:null,onSave:async G=>{try{const z=await re.post(`${se}/management/users`,G,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});console.log(" User created:",z.data),j(),h(!1)}catch(z){throw console.error("Error creating user:",z),z}}}),p&&N&&e.jsx(yk,{isOpen:p,onClose:()=>y(!1),user:N,onSave:async G=>{try{const z=await re.put(`${se}/management/users/${N.id}`,G,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});console.log(" User updated:",z.data),j(),y(!1)}catch(z){throw console.error("Error updating user:",z),z}}}),g&&N&&e.jsx(Ele,{isOpen:g,onClose:()=>v(!1),user:N})]})},yk=({isOpen:t,onClose:a,user:r,onSave:s})=>{const{token:n}=At(),[i,o]=x.useState({username:"",password:"",roles:[],isActive:!0}),[c,u]=x.useState([]),[m,h]=x.useState(!1),[p,y]=x.useState(null),g=async()=>{try{const j=await re.get(`${se}/management/roles`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});u(j.data.data||[])}catch(j){console.error("Error fetching roles:",j)}};x.useEffect(()=>{g(),o(r?{username:r.username||"",password:"",roles:r.roleIds||[],isActive:r.is_active!==void 0?r.is_active:!0}:{username:"",password:"",roles:[],isActive:!0})},[r]);const v=j=>{const{name:T,value:k,type:R,checked:P}=j.target;o($=>({...$,[T]:R==="checkbox"?P:k}))},N=j=>{o(T=>({...T,roles:T.roles.includes(j)?T.roles.filter(k=>k!==j):[...T.roles,j]}))},w=async j=>{j.preventDefault(),h(!0),y(null);try{await s(i)}catch(T){console.error("Error saving user:",T),T.response?.data?.error?y(T.response.data.error):y("Failed to save user")}finally{h(!1)}};return t?e.jsx("div",{className:"modal-overlay",onClick:a,children:e.jsxs("div",{className:"modal-dialog",onClick:j=>j.stopPropagation(),style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:r?"Edit User":"Add New User"}),e.jsx("button",{className:"modal-close-btn",onClick:a,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[p&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:p}),e.jsxs("form",{onSubmit:j=>{j.preventDefault(),w(j)},className:"modal-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Username ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"username",className:"form-control",required:!0,value:i.username,onChange:v,placeholder:"Enter username"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Password ",!r&&e.jsx("span",{className:"required",children:"*"}),r&&e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",fontWeight:"normal"},children:" (Leave blank to keep current)"})]}),e.jsx("input",{type:"password",name:"password",className:"form-control",required:!r,value:i.password,onChange:v,placeholder:"Enter password"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Roles ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("div",{style:{maxHeight:"150px",overflowY:"auto",border:"1px solid var(--border-color)",borderRadius:"4px",padding:"12px",background:"white"},children:c.map(j=>e.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:i.roles.includes(j.id),onChange:()=>N(j.id),style:{marginRight:"8px",cursor:"pointer"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-primary)"},children:j.name})]},j.id))})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:i.isActive,onChange:v,style:{marginRight:"8px",cursor:"pointer"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-primary)"},children:"Active User"})]})})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"modal-btn modal-btn-cancel",onClick:a,children:"Cancel"}),e.jsx("button",{type:"button",className:"modal-btn modal-btn-confirm",onClick:w,disabled:m,children:m?"Saving...":`${r?"Update":"Create"} User`})]})]})}):null},Ele=({isOpen:t,onClose:a,user:r})=>t?e.jsx("div",{className:"modal-overlay",onClick:a,children:e.jsxs("div",{className:"modal-dialog",onClick:s=>s.stopPropagation(),style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",children:["User Roles - ",r.username]}),e.jsx("button",{className:"modal-close-btn",onClick:a,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Js,style:{color:"#2563eb"}}),"User Information"]}),e.jsx("div",{style:{background:"#f9fafb",padding:"12px",border:"1px solid var(--border-color)",borderRadius:"4px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px",fontSize:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:500,color:"var(--text-secondary)"},children:"Username:"}),e.jsx("div",{style:{color:"var(--text-primary)",marginTop:"4px"},children:r.username})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:500,color:"var(--text-secondary)"},children:"Status:"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px",color:r.is_active?"#10b981":"#ef4444"},children:[e.jsx(I,{icon:r.is_active?cr:hm,style:{fontSize:"0.7rem"}}),e.jsx("span",{children:r.is_active?"Active":"Inactive"})]})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("span",{style:{fontWeight:500,color:"var(--text-secondary)"},children:"Last Login:"}),e.jsx("div",{style:{color:"var(--text-primary)",marginTop:"4px"},children:r.last_login?new Date(r.last_login).toLocaleDateString():"Never"})]})]})})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:kf,style:{color:"#8b5cf6"}}),"Assigned Roles (",r.roles.length,")"]}),r.roles&&r.roles.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:r.roles.map((s,n)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px",background:"#eff6ff",border:"1px solid #bfdbfe",borderRadius:"4px"},children:[e.jsx(I,{icon:kf,style:{fontSize:"0.7rem",color:"#2563eb"}}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:500,color:"#1e40af"},children:s})]},n))}):e.jsx("div",{style:{textAlign:"center",padding:"32px",color:"var(--text-secondary)",fontSize:"0.75rem"},children:"No roles assigned to this user"})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:a,children:"Close"})})]})}):null,Tle=()=>{const{token:t}=At(),[a,r]=x.useState([]),[s,n]=x.useState(!0),[i,o]=x.useState(null),[c,u]=x.useState(""),[m,h]=x.useState(!1),[p,y]=x.useState(!1),[g,v]=x.useState(!1),[N,w]=x.useState(null),j=async()=>{try{n(!0),o(null);const A=await re.get(`${se}/management/roles`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});console.log(" Roles data:",A.data),r(A.data.data||[])}catch(A){console.error("Error fetching roles:",A),A.response?o(`Error: ${A.response.status} - ${A.response.data?.error||A.response.statusText}`):A.request?o("No response from server. Please check your connection."):o(`Error: ${A.message}`)}finally{n(!1)}};x.useEffect(()=>{j()},[]);const T=()=>{w(null),h(!0)},k=A=>{w(A),y(!0)},R=A=>{console.log(" Delete button clicked for role:",A?.name),w(A),v(!0),console.log(" Modal state set to true")},P=async()=>{if(N)try{await re.delete(`${se}/management/roles/${N.id}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),r(a.filter(A=>A.id!==N.id)),v(!1),w(null)}catch(A){console.error("Error deleting role:",A),A.response?.data?.error?o(A.response.data.error):o("Failed to delete role"),v(!1)}},$=a.filter(A=>A.name.toLowerCase().includes(c.toLowerCase())||A.description.toLowerCase().includes(c.toLowerCase()));return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading roles..."})}):e.jsxs("div",{children:[e.jsxs("div",{className:"sm:flex sm:items-center mb-6",children:[e.jsxs("div",{className:"sm:flex-auto",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"System Roles"}),e.jsx("p",{className:"mt-1 text-xs text-gray-700",children:"Manage user roles"})]}),e.jsx("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none",children:e.jsxs("button",{onClick:T,className:"inline-flex items-center justify-center border border-transparent bg-gray-700 px-3 py-1.5 text-xs font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:[e.jsx(I,{icon:Ht,className:"mr-2"}),"Add Role"]})})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex gap-2",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(I,{icon:ua,className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"text",value:c,onChange:A=>u(A.target.value),placeholder:"Search by role name or description...",className:"block w-full pl-10 pr-3 py-1.5 border border-gray-300 leading-5 bg-white placeholder-gray-400 focus:outline-none focus:placeholder-gray-300 focus:ring-1 focus:ring-gray-500 focus:border-gray-500 text-xs"})]})})})}),i&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-4",children:e.jsx("div",{className:"text-sm text-red-600",children:i})}),e.jsx("div",{className:"mt-8 flex flex-col",children:e.jsx("div",{className:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{className:"bg-gray-100/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Role Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Users"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:kf,className:"h-3 w-3 text-gray-400 mr-2"}),e.jsx("div",{className:"text-xs text-gray-900 font-medium",children:A.name})]})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("div",{className:"text-xs text-gray-900",children:A.description})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-xs text-gray-900",children:[e.jsx(I,{icon:Cr,className:"h-3 w-3 text-gray-400 mr-1"}),A.userCount]})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"text-xs text-gray-900 flex items-center",children:[e.jsx(I,{icon:A.isActive?cr:hm,className:`h-3 w-3 mr-1 ${A.isActive?"text-green-500":"text-red-500"}`}),A.isActive?"Active":"Inactive"]})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>k(A),className:"text-blue-600 hover:text-blue-900",children:e.jsx(I,{icon:Aa,className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>R(A),className:"text-red-600 hover:text-red-900",children:e.jsx(I,{icon:sa,className:"h-4 w-4"})})]})})]},A.id))})]})})})})}),m&&e.jsx(bk,{isOpen:m,onClose:()=>h(!1),role:null,onSave:async A=>{try{const M=await re.post(`${se}/management/roles`,A,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});console.log(" Role created:",M.data),j(),h(!1)}catch(M){throw console.error("Error creating role:",M),M}}}),p&&N&&e.jsx(bk,{isOpen:p,onClose:()=>y(!1),role:N,onSave:async A=>{try{const M=await re.put(`${se}/management/roles/${N.id}`,A,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});console.log(" Role updated:",M.data),j(),y(!1)}catch(M){throw console.error("Error updating role:",M),M}}}),console.log(" Modal render check:",{showDeleteModal:g,selectedRole:N?.name}),g&&N&&e.jsx(Ple,{isOpen:g,onClose:()=>{console.log(" Closing delete modal"),v(!1),w(null)},role:N,onConfirm:P})]})},bk=({isOpen:t,onClose:a,role:r,onSave:s})=>{const[n,i]=x.useState({name:"",description:"",isActive:!0});x.useEffect(()=>{i(r?{name:r.name||"",description:r.description||"",isActive:r.isActive!==void 0?r.isActive:!0}:{name:"",description:"",isActive:!0})},[r]);const o=u=>{const{name:m,value:h,type:p,checked:y}=u.target;i(g=>({...g,[m]:p==="checkbox"?y:h}))},c=u=>{u.preventDefault(),s(n)};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-[500px] bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-sm leading-6 font-medium text-gray-900 mb-4",children:r?"Edit Role":"Add New Role"}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-xs font-medium text-gray-600",children:["Role Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",id:"name",required:!0,value:n.name,onChange:o,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"Enter role name"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"description",className:"block text-xs font-medium text-gray-600",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{name:"description",id:"description",required:!0,rows:3,value:n.description,onChange:o,className:"mt-1 block w-full border border-gray-300 px-3 py-1.5 text-gray-900 placeholder-gray-300 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",placeholder:"Enter role description"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:n.isActive,onChange:o,className:"h-3 w-3 text-gray-600 focus:ring-gray-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-xs text-gray-700",children:"Active Role"})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-3 py-1.5 border border-gray-300 text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"px-3 py-1.5 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500",children:[r?"Update":"Create"," Role"]})]})]})]})})}):null},Ple=({isOpen:t,onClose:a,role:r,onConfirm:s})=>{const[n,i]=x.useState(!1),o=async()=>{i(!0);try{await s()}catch(m){console.error("Error during deletion:",m)}finally{i(!1)}},c=m=>{m.target===m.currentTarget&&a()};if(!t)return null;console.log(" Delete modal rendering for role:",r?.name);const u=r.userCount>0;return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:c,children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-[400px] bg-white shadow-lg",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(I,{icon:sa,className:"h-6 w-6 text-red-600"})}),e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-sm leading-6 font-medium text-gray-900",children:"Delete Role"})})]}),e.jsx("div",{className:"mb-4",children:u?e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Cannot delete this role because it is currently assigned to users."}),e.jsx("div",{className:"bg-red-50 border border-red-200 p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:Cr,className:"h-4 w-4 text-red-500 mr-2"}),e.jsxs("span",{className:"text-sm text-red-700",children:[e.jsx("strong",{children:r.name})," is assigned to ",e.jsx("strong",{children:r.userCount})," user",r.userCount!==1?"s":""]})]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Please reassign or remove this role from all users before deleting it."})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Are you sure you want to delete this role? This action cannot be undone."}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 p-3",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900",children:r.name}),e.jsx("div",{className:"text-gray-600",children:r.description})]})})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:a,className:"px-3 py-1.5 border border-gray-300 text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",children:u?"Close":"Cancel"}),!u&&e.jsx("button",{type:"button",onClick:o,disabled:n,className:`px-3 py-1.5 border border-transparent text-xs font-medium text-white ${n?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}`,children:n?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-1"}),"Deleting..."]}):"Delete Role"})]})]})})})},Dle=()=>{const{token:t,user:a}=At(),[r,s]=x.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[n,i]=x.useState({current:!1,new:!1,confirm:!1}),[o,c]=x.useState(!1),[u,m]=x.useState(""),[h,p]=x.useState(!1),y=w=>{const{name:j,value:T}=w.target;s(k=>({...k,[j]:T})),u&&m(""),h&&p(!1)},g=w=>{i(j=>({...j,[w]:!j[w]}))},v=()=>r.currentPassword?r.newPassword?r.newPassword.length<6?(m("New password must be at least 6 characters long"),!1):r.newPassword!==r.confirmPassword?(m("New passwords do not match"),!1):r.currentPassword===r.newPassword?(m("New password must be different from current password"),!1):!0:(m("New password is required"),!1):(m("Current password is required"),!1),N=async w=>{if(w.preventDefault(),!!v()){c(!0),m("");try{const j=await re.put(`${se}/auth/change-password`,{currentPassword:r.currentPassword,newPassword:r.newPassword},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});console.log(" Password changed successfully:",j.data),p(!0),s({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>p(!1),5e3)}catch(j){console.error("Error changing password:",j),j.response?.data?.error?m(j.response.data.error):j.response?.status===401?m("Current password is incorrect"):j.response?.status===400?m("Invalid password format"):m("Failed to change password. Please try again.")}finally{c(!1)}}};return e.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[h&&e.jsx("div",{className:"mb-4 bg-green-50 border border-green-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:Hn,className:"h-4 w-4 text-green-500 mr-2"}),e.jsx("span",{className:"text-sm text-green-600",children:"Password changed successfully!"})]})}),u&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-4",children:e.jsx("div",{className:"text-sm text-red-600",children:u})}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"currentPassword",className:"block text-xs font-medium text-gray-600",children:["Current Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{type:n.current?"text":"password",name:"currentPassword",id:"currentPassword",required:!0,value:r.currentPassword,onChange:y,className:"block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-sm pr-10",placeholder:"Enter your current password"}),e.jsx("button",{type:"button",onClick:()=>g("current"),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:e.jsx(I,{icon:n.current?yf:qa,className:"h-4 w-4 text-gray-400 hover:text-gray-600"})})]})]}),e.jsx("div",{}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"newPassword",className:"block text-xs font-medium text-gray-600",children:["New Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{type:n.new?"text":"password",name:"newPassword",id:"newPassword",required:!0,value:r.newPassword,onChange:y,className:"block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-sm pr-10",placeholder:"Enter your new password"}),e.jsx("button",{type:"button",onClick:()=>g("new"),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:e.jsx(I,{icon:n.new?yf:qa,className:"h-4 w-4 text-gray-400 hover:text-gray-600"})})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Password must be at least 6 characters long"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"confirmPassword",className:"block text-xs font-medium text-gray-600",children:["Confirm New Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{type:n.confirm?"text":"password",name:"confirmPassword",id:"confirmPassword",required:!0,value:r.confirmPassword,onChange:y,className:"block w-full border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-sm pr-10",placeholder:"Confirm your new password"}),e.jsx("button",{type:"button",onClick:()=>g("confirm"),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:e.jsx(I,{icon:n.confirm?yf:qa,className:"h-4 w-4 text-gray-400 hover:text-gray-600"})})]})]})]}),e.jsx("div",{className:"pt-4 flex justify-start",children:e.jsx("button",{type:"submit",disabled:o,className:`inline-flex justify-center py-2 px-6 border border-transparent text-sm font-medium text-white ${o?"bg-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500"}`,children:o?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Changing Password..."]}):"Change Password"})})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 p-4",children:[e.jsx("h4",{className:"text-xs font-medium text-blue-900 mb-2",children:"Password Security Tips"}),e.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[e.jsx("li",{children:" Use a combination of letters, numbers, and symbols"}),e.jsx("li",{children:" Avoid using personal information"}),e.jsx("li",{children:" Don't reuse passwords from other accounts"}),e.jsx("li",{children:" Change your password regularly"})]})]})]})},Ole=()=>{const[t,a]=x.useState("users"),r=[{id:"users",name:"User Management",icon:Cr},{id:"roles",name:"Role Management",icon:kf},{id:"password",name:"Change Password",icon:qB}];return e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Settings"}),e.jsx("p",{className:"report-subtitle",children:"Manage system users, roles, and account settings."})]}),e.jsx("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"}})]}),e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsx("div",{className:"report-filters-left",children:e.jsx("div",{className:"filter-group",style:{display:"flex",gap:"8px",alignItems:"center"},children:r.map(s=>e.jsxs("button",{onClick:()=>a(s.id),style:{padding:"6px 12px",fontSize:"0.75rem",fontWeight:500,border:`1px solid ${t===s.id?"#2563eb":"var(--border-color)"}`,borderRadius:"4px",background:t===s.id?"#2563eb":"transparent",color:t===s.id?"white":"var(--text-primary)",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},onMouseEnter:n=>{t!==s.id&&(n.currentTarget.style.background="#f3f4f6",n.currentTarget.style.borderColor="#d1d5db")},onMouseLeave:n=>{t!==s.id&&(n.currentTarget.style.background="transparent",n.currentTarget.style.borderColor="var(--border-color)")},children:[e.jsx(I,{icon:s.icon,style:{fontSize:"0.7rem"}}),e.jsx("span",{children:s.name})]},s.id))})})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden",minHeight:0},children:[t==="users"&&e.jsx(Ale,{}),t==="roles"&&e.jsx(Tle,{}),t==="password"&&e.jsx(Dle,{})]})]})},Lle=()=>{const{token:t}=At(),[a,r]=x.useState([]),[s,n]=x.useState(!1),[i,o]=x.useState(""),[c,u]=x.useState(""),[m,h]=x.useState(""),[p,y]=x.useState(!1),[g,v]=x.useState(null),[N,w]=x.useState({visible:!1,message:null,type:"success"}),[j,T]=x.useState(!1),[k,R]=x.useState(!1),[P,$]=x.useState(!1),[A,M]=x.useState(!1),[_,B]=x.useState(null),[D,C]=x.useState({employeeId:"",fullName:"",idNumber:"",address:"",email:"",phoneNumber:"",gender:"",departmentId:"",jobTitleId:"",hireDate:"",generateEmployeeId:!0}),[L,H]=x.useState([{bankName:"",accountNumber:"",currency:"",isPrimary:!0}]),[V,Y]=x.useState([]),[J,W]=x.useState([]),[X,te]=x.useState(""),[oe,q]=x.useState(""),[G,z]=x.useState(""),[Z,Q]=x.useState(1),[fe,he]=x.useState(1),[ne,me]=x.useState(0),pe=25;x.useEffect(()=>{ie(),ke()},[Z,m,X,oe,G]),x.useEffect(()=>{const Te=setTimeout(()=>{h(c),Q(1)},500);return()=>clearTimeout(Te)},[c]);const ie=async()=>{try{n(!0),o("");const Te={page:Z,limit:pe};m.trim()&&(Te.search=m.trim()),X&&(Te.department=X),oe&&(Te.jobTitle=oe),G&&(Te.gender=G);const Ve=await re.get(`${se}/employees`,{headers:{Authorization:`Bearer ${t}`},params:Te});Ve.data.success&&(r(Ve.data.data),Ve.data.pagination&&(he(Ve.data.pagination.totalPages),me(Ve.data.pagination.totalRecords)))}catch(Te){console.error("Error fetching employees:",Te),o("Failed to load employees")}finally{n(!1)}},ke=async()=>{try{const Te=await re.get(`${se}/configurations/active`,{headers:{Authorization:`Bearer ${t}`}});Te.data.success&&(Y(Te.data.data.departments||[]),W(Te.data.data.jobTitles||[]))}catch(Te){console.error("Error fetching dropdown data:",Te)}},Ae=Te=>{Te.preventDefault(),h(c),Q(1)},ae=()=>{u(""),h(""),Q(1)},Ne=Te=>{v(Te),y(!0)},ce=async()=>{try{n(!0),await re.delete(`${se}/employees/${g.id}`,{headers:{Authorization:`Bearer ${t}`}}),y(!1),v(null),jt("Employee deleted successfully"),ie()}catch(Te){console.error("Error deleting employee:",Te),o(Te.response?.data?.error||"Failed to delete employee"),y(!1)}finally{n(!1)}},De=Te=>{Q(Te)},ye=()=>{C({employeeId:"",fullName:"",idNumber:"",address:"",email:"",phoneNumber:"",gender:"",departmentId:"",jobTitleId:"",hireDate:"",generateEmployeeId:!0}),H([{bankName:"",accountNumber:"",currency:"",isPrimary:!0}]),B(null),T(!0)},Ee=async Te=>{try{M(!0),$(!0);const Ve=await re.get(`${se}/employees/${Te}`,{headers:{Authorization:`Bearer ${t}`}});Ve.data.success&&v(Ve.data.data)}catch(Ve){console.error("Error fetching employee:",Ve),B("Failed to load employee details")}finally{M(!1)}},Ke=async Te=>{try{M(!0),R(!0),B(null);const Ve=await re.get(`${se}/employees/${Te}`,{headers:{Authorization:`Bearer ${t}`}});if(Ve.data.success){const qe=Ve.data.data;C({id:qe.id,employeeId:qe.employee_id||"",fullName:qe.full_name||"",idNumber:qe.id_number||"",address:qe.address||"",email:qe.email||"",phoneNumber:qe.phone_number||"",gender:qe.gender||"",departmentId:qe.department_id||"",jobTitleId:qe.job_title_id||"",hireDate:qe.hire_date?qe.hire_date.split("T")[0]:"",generateEmployeeId:!1}),qe.bankAccounts&&qe.bankAccounts.length>0?H(qe.bankAccounts.map(Xe=>({id:Xe.id,bankName:Xe.bank_name||"",accountNumber:Xe.account_number||"",currency:Xe.currency||"",isPrimary:Xe.is_primary||!1}))):H([{bankName:"",accountNumber:"",currency:"",isPrimary:!0}])}}catch(Ve){console.error("Error fetching employee for edit:",Ve),B("Failed to load employee data")}finally{M(!1)}},Re=Te=>{const{name:Ve,value:qe,type:Xe,checked:We}=Te.target;C(Ge=>({...Ge,[Ve]:Xe==="checkbox"?We:qe}))},Le=(Te,Ve,qe)=>{H(Xe=>{const We=[...Xe];return We[Te]={...We[Te],[Ve]:qe},Ve==="isPrimary"&&qe&&We.forEach((Ge,lt)=>{lt!==Te&&(Ge.isPrimary=!1)}),We})},Oe=()=>{H(Te=>[...Te,{bankName:"",accountNumber:"",currency:"",isPrimary:!1}])},$e=Te=>{L.length>1&&H(Ve=>{const qe=Ve.filter((Xe,We)=>We!==Te);return Ve[Te].isPrimary&&qe.length>0&&(qe[0].isPrimary=!0),qe})},ct=async Te=>{Te&&Te.preventDefault();try{M(!0),B(null);const Ve={...D,bankAccounts:L.filter(Ge=>Ge.bankName.trim()&&Ge.accountNumber.trim())},qe=k?`${se}/employees/${D.id}`:`${se}/employees`;(await re[k?"put":"post"](qe,Ve,{headers:{Authorization:`Bearer ${t}`}})).data.success&&(T(!1),R(!1),jt(k?"Employee updated successfully":"Employee added successfully"),ie())}catch(Ve){console.error("Error saving employee:",Ve),B(Ve.response?.data?.error||"Failed to save employee")}finally{M(!1)}},Nt=()=>{T(!1),R(!1),$(!1),v(null),B(null)},jt=(Te,Ve="success",qe=3e3)=>{w({message:Te,type:Ve,visible:!0}),qe>0&&setTimeout(()=>{w(Xe=>({...Xe,visible:!1})),setTimeout(()=>{w({message:null,type:"success",visible:!1})},300)},qe)},xt=Te=>{const Ve={width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"};return Te==="success"?e.jsxs("svg",{...Ve,children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}):Te==="error"?e.jsxs("svg",{...Ve,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}):null},we=Te=>{switch(Te){case"success":return"#10b981";case"error":return"#ef4444";default:return"#10b981"}},Ie=Te=>Te?new Date(Te).toLocaleDateString():"N/A",dt=a.length>0?(Z-1)*pe+1:0,ut=Math.min(Z*pe,ne);return e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Employees"}),e.jsx("p",{className:"report-subtitle",children:"Manage employee information and records."})]}),e.jsx("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"},children:e.jsxs("button",{onClick:ye,className:"btn-checklist",style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Ht}),"Add Employee"]})})]}),e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsxs("div",{className:"report-filters-left",children:[e.jsx("form",{onSubmit:Ae,className:"filter-group",children:e.jsxs("div",{className:"search-input-wrapper",style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:ua,className:"search-icon"}),e.jsx("input",{type:"text",value:c,onChange:Te=>u(Te.target.value),placeholder:"Search by name, ID or department...",className:"filter-input search-input",style:{width:"300px"}}),c&&e.jsx("button",{type:"button",onClick:ae,style:{position:"absolute",right:"8px",padding:"4px 6px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},title:"Clear search",children:""})]})}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Dept:"}),e.jsxs("select",{value:X,onChange:Te=>{te(Te.target.value),Q(1)},className:"filter-input",style:{minWidth:"150px"},children:[e.jsx("option",{value:"",children:"All Departments"}),V.map(Te=>e.jsx("option",{value:Te.id,children:Te.name},Te.id))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Title:"}),e.jsxs("select",{value:oe,onChange:Te=>{q(Te.target.value),Q(1)},className:"filter-input",style:{minWidth:"150px"},children:[e.jsx("option",{value:"",children:"All Job Titles"}),J.map(Te=>e.jsx("option",{value:Te.id,children:Te.name},Te.id))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Gender:"}),e.jsxs("select",{value:G,onChange:Te=>{z(Te.target.value),Q(1)},className:"filter-input",style:{minWidth:"100px"},children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]})]})}),i&&e.jsx("div",{style:{padding:"10px 30px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem"},children:i}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:s&&a.length===0?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading employees..."}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"EMPLOYEE ID"}),e.jsx("th",{style:{padding:"6px 10px"},children:"FULL NAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"DEPARTMENT"}),e.jsx("th",{style:{padding:"6px 10px"},children:"JOB TITLE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"GENDER"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[a.map((Te,Ve)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:Ve%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:Te.employee_id}),e.jsx("td",{style:{padding:"4px 10px"},children:Te.full_name}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:Ri,className:"h-3 w-3 mr-1 text-gray-400"}),Te.department_name||"Not assigned"]})}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:rm,className:"h-3 w-3 mr-1 text-gray-400"}),Te.job_title||"Not assigned"]})}),e.jsx("td",{style:{padding:"4px 10px"},children:Te.gender||"Not specified"}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>Ee(Te.id),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0},title:"View",children:e.jsx(I,{icon:qa})}),e.jsx("button",{onClick:()=>Ke(Te.id),style:{color:"#6366f1",background:"none",border:"none",cursor:"pointer",padding:0},title:"Edit",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>Ne(Te),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:0},title:"Delete",children:e.jsx(I,{icon:sa})})]})})]},Te.id)),Array.from({length:Math.max(0,pe-a.length)}).map((Te,Ve)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(a.length+Ve)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${Ve}`))]})]})}),e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",dt," to ",ut," of ",ne||0," results."]}),e.jsxs("div",{className:"table-footer-right",children:[fe>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>De(Z-1),disabled:Z===1,children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",Z," of ",fe]}),e.jsx("button",{className:"pagination-btn",onClick:()=>De(Z+1),disabled:Z===fe,children:"Next"})]}),fe<=1&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"All data displayed"})]})]}),(j||k)&&e.jsx("div",{className:"modal-overlay",onClick:Nt,children:e.jsx("div",{className:"modal-dialog",onClick:Te=>Te.stopPropagation(),style:{maxWidth:"800px",minHeight:A?"400px":"auto"},children:A&&!D.fullName?e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:k?"Edit Employee":"Add Employee"}),e.jsx("button",{className:"modal-close-btn",onClick:Nt,children:e.jsx(I,{icon:Wt})})]}),e.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[_&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:_}),e.jsxs("form",{onSubmit:ct,className:"modal-form",children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:rm,style:{color:"#2563eb"}}),"Employee Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Employee ID"}),e.jsx("input",{type:"text",name:"employeeId",className:"form-control",placeholder:D.generateEmployeeId?"Will be auto-generated":"Enter employee ID",value:D.employeeId,onChange:Re,readOnly:D.generateEmployeeId,style:{background:D.generateEmployeeId?"#f3f4f6":"white"}}),!k&&e.jsxs("div",{style:{marginTop:"5px",display:"flex",alignItems:"center"},children:[e.jsx("input",{type:"checkbox",id:"generateEmployeeId",name:"generateEmployeeId",checked:D.generateEmployeeId,onChange:Re,style:{marginRight:"5px"}}),e.jsx("label",{htmlFor:"generateEmployeeId",style:{fontSize:"0.65rem",color:"#6b7280"},children:"Auto-generate ID"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Full Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"fullName",className:"form-control",placeholder:"Enter full name",value:D.fullName,onChange:Re,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["ID Number ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"idNumber",className:"form-control",placeholder:"Enter ID number",value:D.idNumber,onChange:Re,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Gender"}),e.jsxs("select",{name:"gender",className:"form-control",value:D.gender,onChange:Re,children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{type:"email",name:"email",className:"form-control",placeholder:"Enter email address",value:D.email,onChange:Re})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phoneNumber",className:"form-control",placeholder:"Enter phone number",value:D.phoneNumber,onChange:Re})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Department"}),e.jsxs("select",{name:"departmentId",className:"form-control",value:D.departmentId,onChange:Re,children:[e.jsx("option",{value:"",children:"Select Department"}),V.map(Te=>e.jsx("option",{value:Te.id,children:Te.name},Te.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Job Title"}),e.jsxs("select",{name:"jobTitleId",className:"form-control",value:D.jobTitleId,onChange:Re,children:[e.jsx("option",{value:"",children:"Select Job Title"}),J.map(Te=>e.jsx("option",{value:Te.id,children:Te.name},Te.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Hire Date"}),e.jsx("input",{type:"date",name:"hireDate",className:"form-control",value:D.hireDate,onChange:Re})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Address"}),e.jsx("textarea",{name:"address",className:"form-control",placeholder:"Enter full address",value:D.address||"",onChange:Re,rows:"2"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Jd,style:{color:"#10b981"}}),"Banking Information"]}),e.jsxs("button",{type:"button",onClick:Oe,className:"modal-btn",style:{background:"#6b7280",color:"white",fontSize:"0.65rem",padding:"4px 8px"},children:[e.jsx(I,{icon:Ht,style:{marginRight:"4px"}}),"Add Account"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:L.map((Te,Ve)=>e.jsxs("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"4px",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:600},children:["Account ",Ve+1]}),Te.isPrimary&&e.jsx("span",{style:{fontSize:"0.6rem",padding:"2px 6px",background:"#fef3c7",color:"#92400e",borderRadius:"4px"},children:"Primary"})]}),L.length>1&&e.jsx("button",{type:"button",onClick:()=>$e(Ve),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer"},children:e.jsx(I,{icon:sa})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Bank Name"}),e.jsx("input",{type:"text",className:"form-control",value:Te.bankName,onChange:qe=>Le(Ve,"bankName",qe.target.value),placeholder:"Bank name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Account No."}),e.jsx("input",{type:"text",className:"form-control",value:Te.accountNumber,onChange:qe=>Le(Ve,"accountNumber",qe.target.value),placeholder:"Account number"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Currency"}),e.jsx("input",{type:"text",className:"form-control",value:Te.currency,onChange:qe=>Le(Ve,"currency",qe.target.value),placeholder:"e.g. USD"})]})]}),e.jsxs("div",{style:{marginTop:"8px",display:"flex",alignItems:"center"},children:[e.jsx("input",{type:"checkbox",id:`primary_${Ve}`,checked:Te.isPrimary,onChange:qe=>Le(Ve,"isPrimary",qe.target.checked),style:{marginRight:"5px"}}),e.jsx("label",{htmlFor:`primary_${Ve}`,style:{fontSize:"0.65rem",color:"#6b7280"},children:"Set as primary account"})]})]},Ve))})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:Nt,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:ct,disabled:A,children:A?"Saving...":k?"Update Employee":"Save Employee"})]})]})})}),P&&e.jsx("div",{className:"modal-overlay",onClick:Nt,children:e.jsx("div",{className:"modal-dialog",onClick:Te=>Te.stopPropagation(),style:{maxWidth:"800px",minHeight:A?"400px":"auto"},children:A?e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading employee details..."})]}):g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",children:["Employee Profile - ",g.full_name]}),e.jsx("button",{className:"modal-close-btn",onClick:Nt,children:e.jsx(I,{icon:Wt})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:0,fontSize:"0.95rem",fontWeight:"700",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:rm,style:{color:"#2563eb"}}),"Employee Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px 30px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Employee ID"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:g.employee_id})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Full Name"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:g.full_name})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"ID Number"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:g.id_number})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Gender"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:g.gender||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Email"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:g.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Phone Number"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:g.phone_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Department"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:g.department_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Job Title"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:g.job_title||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Hire Date"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:Ie(g.hire_date)})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Address"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:g.address||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:0,fontSize:"0.95rem",fontWeight:"700",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Jd,style:{color:"#10b981"}}),"Banking Information"]}),g.bankAccounts&&g.bankAccounts.length>0?e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"16px"},children:g.bankAccounts.map((Te,Ve)=>e.jsx("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"4px",border:"1px solid #e5e7eb"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",fontWeight:"600",color:"#6b7280"},children:"Bank Name"}),e.jsx("div",{style:{fontSize:"0.8rem"},children:Te.bank_name})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",fontWeight:"600",color:"#6b7280"},children:"Account Number"}),e.jsx("div",{style:{fontSize:"0.8rem"},children:Te.account_number})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",fontWeight:"600",color:"#6b7280"},children:"Currency"}),e.jsxs("div",{style:{fontSize:"0.8rem"},children:[Te.currency,Te.is_primary&&e.jsx("span",{style:{marginLeft:"8px",fontSize:"0.6rem",padding:"2px 6px",background:"#fef3c7",color:"#92400e",borderRadius:"4px"},children:"Primary"})]})]})]})},Ve))}):e.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",fontStyle:"italic"},children:"No banking information available."})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:Nt,children:"Close"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:()=>{Nt(),Ke(g.id)},children:"Edit Profile"})]})]}):null})}),p&&g&&e.jsx("div",{className:"modal-overlay",onClick:()=>y(!1),children:e.jsxs("div",{className:"modal-dialog",onClick:Te=>Te.stopPropagation(),style:{maxWidth:"400px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Delete Employee"}),e.jsx("button",{className:"modal-close-btn",onClick:()=>y(!1),children:""})]}),e.jsxs("div",{className:"modal-body text-center",style:{padding:"20px"},children:[e.jsx("div",{style:{marginBottom:"15px"},children:e.jsx(I,{icon:sa,style:{fontSize:"3rem",color:"#ef4444"}})}),e.jsxs("p",{style:{fontSize:"0.875rem",color:"var(--text-primary)"},children:["Are you sure you want to delete ",e.jsx("strong",{children:g.full_name}),"?"]}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:"8px"},children:"This action will deactivate the employee record."})]}),e.jsxs("div",{className:"modal-footer",style:{justifyContent:"center",gap:"12px"},children:[e.jsx("button",{onClick:()=>y(!1),className:"modal-btn modal-btn-cancel",children:"Cancel"}),e.jsx("button",{onClick:ce,disabled:s,className:"modal-btn modal-btn-confirm",style:{background:"#ef4444"},children:s?"Deleting...":"Delete"})]})]})}),N.visible&&N.message&&e.jsx("div",{className:"success-toast",children:e.jsxs("div",{className:"success-toast-content",style:{background:we(N.type)},children:[xt(N.type),e.jsx("span",{children:N.message})]})})]})},Mle=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState(""),[i,o]=x.useState(!1),[c,u]=x.useState(!1),[m,h]=x.useState({}),[p,y]=x.useState([]),[g,v]=x.useState([]),[N,w]=x.useState({employeeId:"",fullName:"",idNumber:"",address:"",email:"",phoneNumber:"",gender:"",departmentId:"",jobTitleId:"",hireDate:"",generateEmployeeId:!0}),[j,T]=x.useState([{bankName:"",accountNumber:"",currency:"",isPrimary:!0}]);x.useEffect(()=>{k()},[]);const k=async()=>{try{const C=await re.get(`${se}/configurations/active`,{headers:{Authorization:`Bearer ${t}`}});C.data.success&&(y(C.data.data.departments||[]),v(C.data.data.jobTitles||[]))}catch(C){console.error("Error fetching dropdown data:",C),n("Failed to load form data")}},R=C=>{const{name:L,value:H,type:V,checked:Y}=C.target;w(J=>({...J,[L]:V==="checkbox"?Y:H}))},P=(C,L,H)=>{T(V=>{const Y=[...V];return Y[C]={...Y[C],[L]:H},L==="isPrimary"&&H&&Y.forEach((J,W)=>{W!==C&&(J.isPrimary=!1)}),Y})},$=()=>{T(C=>[...C,{bankName:"",accountNumber:"",currency:"",isPrimary:!1}])},A=C=>{j.length>1&&T(L=>{const H=L.filter((V,Y)=>Y!==C);return L[C].isPrimary&&H.length>0&&(H[0].isPrimary=!0),H})},M=()=>N.fullName.trim()?N.idNumber.trim()?j.filter(L=>L.bankName.trim()&&L.accountNumber.trim()).length===0&&j.some(L=>L.bankName.trim()||L.accountNumber.trim())?(n("Please complete bank account information or remove incomplete entries"),!1):!0:(n("ID number is required"),!1):(n("Full name is required"),!1),_=async C=>{if(C.preventDefault(),!!M())try{r(!0),n("");const L={...N,employeeId:N.generateEmployeeId?void 0:N.employeeId,departmentId:N.departmentId||null,jobTitleId:N.jobTitleId||null,hireDate:N.hireDate||null,bankAccounts:j.filter(V=>V.bankName.trim()&&V.accountNumber.trim())};(await re.post(`${se}/employees`,L,{headers:{Authorization:`Bearer ${t}`}})).data.success&&(o(!0),w({employeeId:"",fullName:"",idNumber:"",address:"",email:"",phoneNumber:"",departmentId:"",jobTitleId:"",hireDate:"",generateEmployeeId:!0}),T([{bankName:"",accountNumber:"",currency:"",isPrimary:!0}]))}catch(L){console.error("Error creating employee:",L),L.response?.data?.errorType&&L.response?.data?.field?(h({type:L.response.data.errorType,field:L.response.data.field,message:L.response.data.error}),u(!0)):n(L.response?.data?.error||"Failed to create employee")}finally{r(!1)}},B=()=>{o(!1)},D=()=>{u(!1),h({})};return e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Add New Employee"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Create a new employee record with personal and banking information"})]}),s&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-3",children:e.jsx("div",{className:"text-xs text-red-600",children:s})}),e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(I,{icon:Js,className:"mr-2 h-4 w-4 text-gray-400"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"generateEmployeeId",name:"generateEmployeeId",checked:N.generateEmployeeId,onChange:R,className:"h-4 w-4 text-gray-600 focus:ring-gray-500 border-gray-300"}),e.jsx("label",{htmlFor:"generateEmployeeId",className:"ml-2 block text-xs text-gray-600",children:"Auto-generate Employee ID (V + 4 numbers + letter)"})]}),!N.generateEmployeeId&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Employee ID ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"employeeId",value:N.employeeId,onChange:R,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"e.g., V1234A"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"fullName",required:!0,value:N.fullName,onChange:R,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter full name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["ID Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"idNumber",required:!0,value:N.idNumber,onChange:R,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter ID number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:N.email,onChange:R,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phoneNumber",value:N.phoneNumber,onChange:R,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Gender"}),e.jsxs("select",{name:"gender",value:N.gender,onChange:R,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Address"}),e.jsx("textarea",{name:"address",value:N.address,onChange:R,rows:"3",className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter home address"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(I,{icon:Ri,className:"mr-2 h-4 w-4 text-gray-400"}),"Work Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Department"}),e.jsxs("select",{name:"departmentId",value:N.departmentId,onChange:R,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Department"}),p.map(C=>e.jsx("option",{value:C.id,children:C.name},C.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Job Title"}),e.jsxs("select",{name:"jobTitleId",value:N.jobTitleId,onChange:R,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Job Title"}),g.map(C=>e.jsx("option",{value:C.id,children:C.name},C.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Hire Date (Optional)"}),e.jsx("input",{type:"date",name:"hireDate",value:N.hireDate,onChange:R,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(I,{icon:Jd,className:"mr-2 h-4 w-4 text-gray-400"}),"Bank Account Information"]}),e.jsxs("button",{type:"button",onClick:$,className:"bg-gray-700 text-white px-3 py-1 text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(I,{icon:Ht,className:"mr-1 h-3 w-3"}),"Add Account"]})]}),e.jsx("div",{className:"space-y-4",children:j.map((C,L)=>e.jsxs("div",{className:"border border-gray-200 p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Account ",L+1]}),C.isPrimary&&e.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(I,{icon:jh,className:"mr-1 h-3 w-3"}),"Primary"]})]}),j.length>1&&e.jsx("button",{type:"button",onClick:()=>A(L),className:"text-red-600 hover:text-red-900",children:e.jsx(I,{icon:sa,className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Bank Name"}),e.jsx("input",{type:"text",value:C.bankName,onChange:H=>P(L,"bankName",H.target.value),className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter bank name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Account Number"}),e.jsx("input",{type:"text",value:C.accountNumber,onChange:H=>P(L,"accountNumber",H.target.value),className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter account number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Currency"}),e.jsx("input",{type:"text",value:C.currency,onChange:H=>P(L,"currency",H.target.value),className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"e.g., USD, EUR, GBP"})]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:`isPrimary_${L}`,checked:C.isPrimary,onChange:H=>P(L,"isPrimary",H.target.checked),className:"h-4 w-4 text-gray-600 focus:ring-gray-500 border-gray-300"}),e.jsx("label",{htmlFor:`isPrimary_${L}`,className:"ml-2 block text-xs text-gray-600",children:"Set as primary account"})]})})]},L))})]}),e.jsx("div",{className:"flex justify-start",children:e.jsx("button",{type:"submit",disabled:a,className:`px-6 py-2 text-xs font-medium text-white ${a?"bg-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-800"}`,children:a?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Employee..."]}):"Create Employee"})})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-green-100 mb-4",children:e.jsx(I,{icon:Hn,className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Employee Created Successfully"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"The employee has been added to the system successfully."}),e.jsx("button",{onClick:B,className:"px-4 py-2 bg-gray-700 text-white text-xs hover:bg-gray-800",children:"Continue"})]})})}),c&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-red-100 mb-4",children:e.jsx(I,{icon:Ma,className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Creating Employee"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:m.message}),e.jsx("button",{onClick:D,className:"px-4 py-2 bg-red-600 text-white text-xs hover:bg-red-700",children:"Close"})]})})})]})},Rle=()=>{const{id:t}=Tn(),{token:a}=At(),[r,s]=x.useState(null),[n,i]=x.useState(!0),[o,c]=x.useState(""),[u,m]=x.useState("personal");x.useEffect(()=>{h()},[t]);const h=async()=>{try{i(!0),c("");const y=await re.get(`${se}/employees/${t}`,{headers:{Authorization:`Bearer ${a}`}});y.data.success?s(y.data.data):c("Employee not found")}catch(y){console.error("Error fetching employee:",y),c("Failed to load employee information")}finally{i(!1)}},p=y=>y?new Date(y).toLocaleDateString():"Not set";return n?e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-xs text-gray-500",children:"Loading employee information..."})})}):o||!r?e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-xs text-red-600",children:o||"Employee not found"})})}):e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:r.full_name}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Employee ID: ",r.employee_id,"  ",r.department_name||"No Department","  ",r.job_title||"No Job Title"]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold ${r.is_active?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:r.is_active?"Active":"Inactive"})})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("nav",{className:"flex space-x-8 border-b border-gray-200",children:[{id:"personal",label:"Personal Information",icon:Js},{id:"banking",label:"Banking",icon:Jd}].map(y=>e.jsxs("button",{onClick:()=>m(y.id),className:`py-2 px-1 border-b-2 font-medium text-xs flex items-center ${u===y.id?"border-gray-700 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(I,{icon:y.icon,className:"mr-2 h-3 w-3"}),y.label]},y.id))})}),e.jsxs("div",{className:"min-h-96",children:[u==="personal"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(I,{icon:Js,className:"mr-2 h-4 w-4 text-gray-400"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Full Name"}),e.jsx("div",{className:"mt-1 text-sm text-gray-900",children:r.full_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Employee ID"}),e.jsx("div",{className:"mt-1 text-sm text-gray-900",children:r.employee_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"ID Number"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[e.jsx(I,{icon:mj,className:"mr-2 h-4 w-4 text-gray-400"}),r.id_number]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Gender"}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-800",children:r.gender||"Not specified"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Email Address"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[e.jsx(I,{icon:nE,className:"mr-2 h-4 w-4 text-gray-400"}),r.email||"Not provided"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Phone Number"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[e.jsx(I,{icon:$N,className:"mr-2 h-4 w-4 text-gray-400"}),r.phone_number||"Not provided"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Hire Date"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[e.jsx(I,{icon:Pa,className:"mr-2 h-4 w-4 text-gray-400"}),p(r.hire_date)]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Address"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-start",children:[e.jsx(I,{icon:lu,className:"mr-2 h-4 w-4 text-gray-400 mt-0.5"}),r.address||"Not provided"]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(I,{icon:Ri,className:"mr-2 h-4 w-4 text-gray-400"}),"Work Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Department"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[e.jsx(I,{icon:Ri,className:"mr-2 h-4 w-4 text-gray-400"}),r.department_name||"Not assigned"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Job Title"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[e.jsx(I,{icon:rm,className:"mr-2 h-4 w-4 text-gray-400"}),r.job_title||"Not assigned"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Employment Status"}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold ${r.is_active?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:r.is_active?"Active":"Inactive"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Date Created"}),e.jsx("div",{className:"mt-1 text-sm text-gray-900",children:p(r.created_at)})]})]})]})]}),u==="banking"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(I,{icon:Jd,className:"mr-2 h-4 w-4 text-gray-400"}),"Bank Accounts"]}),r.bankAccounts&&r.bankAccounts.length>0?e.jsx("div",{className:"space-y-4",children:r.bankAccounts.map((y,g)=>e.jsxs("div",{className:"border border-gray-200 p-4 bg-gray-50",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Account ",g+1]}),y.is_primary&&e.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(I,{icon:jh,className:"mr-1 h-3 w-3"}),"Primary"]}),e.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold ${y.is_active?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:y.is_active?"Active":"Inactive"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Bank Name"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[e.jsx(I,{icon:Jd,className:"mr-2 h-4 w-4 text-gray-400"}),y.bank_name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Account Number"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[e.jsx(I,{icon:ql,className:"mr-2 h-4 w-4 text-gray-400"}),y.account_number]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Currency"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-900 flex items-center",children:[e.jsx(I,{icon:Za,className:"mr-2 h-4 w-4 text-gray-400"}),y.currency]})]})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:["Added on ",p(y.created_at)]})]},y.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:Jd,className:"h-12 w-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-xs text-gray-500",children:"No bank accounts found"})]})]})})]})]})},Ile=()=>{const{id:t}=Tn(),a=Da(),{token:r}=At(),[s,n]=x.useState(!1),[i,o]=x.useState(!0),[c,u]=x.useState(""),[m,h]=x.useState(!1),[p,y]=x.useState(!1),[g,v]=x.useState({}),[N,w]=x.useState([]),[j,T]=x.useState([]),[k,R]=x.useState({employeeId:"",fullName:"",idNumber:"",address:"",email:"",phoneNumber:"",gender:"",departmentId:"",jobTitleId:"",hireDate:"",generateEmployeeId:!1}),[P,$]=x.useState([{bankName:"",accountNumber:"",currency:"",isPrimary:!0}]);x.useEffect(()=>{A()},[t]);const A=async()=>{try{o(!0);const Y=await re.get(`${se}/employees/${t}`,{headers:{Authorization:`Bearer ${r}`}});if(Y.data.success){const W=Y.data.data;R({employeeId:W.employee_id||"",fullName:W.full_name||"",idNumber:W.id_number||"",address:W.address||"",email:W.email||"",phoneNumber:W.phone_number||"",gender:W.gender||"",departmentId:W.department_id||"",jobTitleId:W.job_title_id||"",hireDate:W.hire_date?W.hire_date.split("T")[0]:"",generateEmployeeId:!1}),W.bankAccounts&&W.bankAccounts.length>0?$(W.bankAccounts.map(X=>({id:X.id,bankName:X.bank_name||"",accountNumber:X.account_number||"",currency:X.currency||"",isPrimary:X.is_primary||!1}))):$([{bankName:"",accountNumber:"",currency:"",isPrimary:!0}])}const J=await re.get(`${se}/configurations/active`,{headers:{Authorization:`Bearer ${r}`}});J.data.success&&(w(J.data.data.departments||[]),T(J.data.data.jobTitles||[]))}catch(Y){console.error("Error fetching employee data:",Y),u("Failed to load employee data")}finally{o(!1)}},M=Y=>{const{name:J,value:W,type:X,checked:te}=Y.target;R(oe=>({...oe,[J]:X==="checkbox"?te:W}))},_=(Y,J,W)=>{$(X=>{const te=[...X];return te[Y]={...te[Y],[J]:W},J==="isPrimary"&&W&&te.forEach((oe,q)=>{q!==Y&&(oe.isPrimary=!1)}),te})},B=()=>{$(Y=>[...Y,{bankName:"",accountNumber:"",currency:"",isPrimary:!1}])},D=Y=>{P.length>1&&$(J=>{const W=J.filter((X,te)=>te!==Y);return J[Y].isPrimary&&W.length>0&&(W[0].isPrimary=!0),W})},C=()=>k.fullName.trim()?k.idNumber.trim()?P.filter(J=>J.bankName.trim()&&J.accountNumber.trim()).length===0&&P.some(J=>J.bankName.trim()||J.accountNumber.trim())?(u("Please complete bank account information or remove incomplete entries"),!1):!0:(u("ID number is required"),!1):(u("Full name is required"),!1),L=async Y=>{if(Y.preventDefault(),!!C())try{n(!0),u("");const J={...k,departmentId:k.departmentId||null,jobTitleId:k.jobTitleId||null,hireDate:k.hireDate||null,bankAccounts:P.filter(X=>X.bankName.trim()&&X.accountNumber.trim())};(await re.put(`${se}/employees/${t}`,J,{headers:{Authorization:`Bearer ${r}`}})).data.success&&h(!0)}catch(J){console.error("Error updating employee:",J),J.response?.data?.errorType&&J.response?.data?.field?(v({type:J.response.data.errorType,field:J.response.data.field,message:J.response.data.error}),y(!0)):u(J.response?.data?.error||"Failed to update employee")}finally{n(!1)}},H=()=>{h(!1),a("/dashboard/employees")},V=()=>{y(!1),v({})};return i?e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-700"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading employee data..."})]})}):e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"mb-2",children:e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Edit Employee"})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Update employee information and banking details"})]}),c&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-3",children:e.jsx("div",{className:"text-xs text-red-600",children:c})}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(I,{icon:Js,className:"mr-2 h-4 w-4 text-gray-400"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Employee ID"}),e.jsx("input",{type:"text",name:"employeeId",value:k.employeeId,onChange:M,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500 bg-gray-50",readOnly:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"fullName",required:!0,value:k.fullName,onChange:M,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter full name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["ID Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"idNumber",required:!0,value:k.idNumber,onChange:M,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter ID number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:k.email,onChange:M,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phoneNumber",value:k.phoneNumber,onChange:M,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Gender"}),e.jsxs("select",{name:"gender",value:k.gender,onChange:M,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Address"}),e.jsx("textarea",{name:"address",value:k.address,onChange:M,rows:"3",className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter home address"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(I,{icon:Ri,className:"mr-2 h-4 w-4 text-gray-400"}),"Work Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Department"}),e.jsxs("select",{name:"departmentId",value:k.departmentId,onChange:M,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Department"}),N.map(Y=>e.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Job Title"}),e.jsxs("select",{name:"jobTitleId",value:k.jobTitleId,onChange:M,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Job Title"}),j.map(Y=>e.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Hire Date (Optional)"}),e.jsx("input",{type:"date",name:"hireDate",value:k.hireDate,onChange:M,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(I,{icon:Jd,className:"mr-2 h-4 w-4 text-gray-400"}),"Bank Account Information"]}),e.jsxs("button",{type:"button",onClick:B,className:"bg-gray-700 text-white px-3 py-1 text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(I,{icon:Ht,className:"mr-1 h-3 w-3"}),"Add Account"]})]}),e.jsx("div",{className:"space-y-4",children:P.map((Y,J)=>e.jsxs("div",{className:"border border-gray-200 p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Account ",J+1]}),Y.isPrimary&&e.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(I,{icon:jh,className:"mr-1 h-3 w-3"}),"Primary"]})]}),P.length>1&&e.jsx("button",{type:"button",onClick:()=>D(J),className:"text-red-600 hover:text-red-900",children:e.jsx(I,{icon:sa,className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Bank Name"}),e.jsx("input",{type:"text",value:Y.bankName,onChange:W=>_(J,"bankName",W.target.value),className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter bank name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Account Number"}),e.jsx("input",{type:"text",value:Y.accountNumber,onChange:W=>_(J,"accountNumber",W.target.value),className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter account number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Currency"}),e.jsx("input",{type:"text",value:Y.currency,onChange:W=>_(J,"currency",W.target.value),className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"e.g., USD, EUR, GBP"})]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:`isPrimary_${J}`,checked:Y.isPrimary,onChange:W=>_(J,"isPrimary",W.target.checked),className:"h-4 w-4 text-gray-600 focus:ring-gray-500 border-gray-300"}),e.jsx("label",{htmlFor:`isPrimary_${J}`,className:"ml-2 block text-xs text-gray-600",children:"Set as primary account"})]})})]},J))})]}),e.jsx("div",{className:"flex justify-start",children:e.jsx("button",{type:"submit",disabled:s,className:`px-6 py-2 text-xs font-medium text-white ${s?"bg-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-800"}`,children:s?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating Employee..."]}):"Update Employee"})})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-green-100 mb-4",children:e.jsx(I,{icon:Hn,className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Employee Updated Successfully"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"The employee information has been updated successfully."}),e.jsx("button",{onClick:H,className:"px-4 py-2 bg-gray-700 text-white text-xs hover:bg-gray-800",children:"Continue"})]})})}),p&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-red-100 mb-4",children:e.jsx(I,{icon:Ma,className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Updating Employee"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:g.message}),e.jsx("button",{onClick:V,className:"px-4 py-2 bg-red-600 text-white text-xs hover:bg-red-700",children:"Close"})]})})})]})},zle=()=>{const{token:t}=At(),[a,r]=x.useState([]),[s,n]=x.useState(!1),[i,o]=x.useState(""),[c,u]=x.useState(""),[m,h]=x.useState(!1),[p,y]=x.useState(!1),[g,v]=x.useState(null),[N,w]=x.useState("create"),[j,T]=x.useState(1),[k,R]=x.useState(1),[P,$]=x.useState(0),A=10,[M,_]=x.useState({name:"",description:"",isActive:!0});x.useEffect(()=>{B()},[j,c]);const B=async()=>{try{n(!0),o("");const X={page:j,limit:A};c.trim()&&(X.search=c.trim());const te=await re.get(`${se}/configurations/departments`,{headers:{Authorization:`Bearer ${t}`},params:X});te.data.success&&(r(te.data.data),te.data.pagination&&(R(te.data.pagination.totalPages),$(te.data.pagination.totalRecords)))}catch(X){console.error("Error fetching departments:",X),o("Failed to load departments")}finally{n(!1)}},D=()=>{T(1),B()},C=()=>{u(""),T(1)},L=()=>{w("create"),_({name:"",description:"",isActive:!0}),v(null),h(!0)},H=X=>{w("edit"),_({name:X.name,description:X.description||"",isActive:X.is_active}),v(X),h(!0)},V=X=>{v(X),y(!0)},Y=async X=>{X.preventDefault();try{n(!0),o("");const te=N==="create"?`${se}/configurations/departments`:`${se}/configurations/departments/${g.id}`;(await re[N==="create"?"post":"put"](te,M,{headers:{Authorization:`Bearer ${t}`}})).data.success&&(h(!1),B(),_({name:"",description:"",isActive:!0}))}catch(te){console.error("Error saving department:",te),te.response?.data?.error?o(te.response.data.error):o("Failed to save department")}finally{n(!1)}},J=async()=>{try{n(!0),await re.delete(`${se}/configurations/departments/${g.id}`,{headers:{Authorization:`Bearer ${t}`}}),y(!1),v(null),B()}catch(X){console.error("Error deleting department:",X),o(X.response?.data?.error||"Failed to delete department"),y(!1)}finally{n(!1)}},W=X=>{T(X)};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",placeholder:"Search departments...",value:c,onChange:X=>u(X.target.value),onKeyPress:X=>X.key==="Enter"&&D(),className:"border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500"}),e.jsx("button",{onClick:D,className:"ml-2 bg-gray-700 text-white px-3 py-2 text-xs hover:bg-gray-800",children:e.jsx(I,{icon:ua,className:"h-3 w-3"})}),c&&e.jsx("button",{onClick:C,className:"ml-2 text-gray-500 hover:text-gray-700 text-xs",children:"Clear"})]})}),e.jsxs("button",{onClick:L,className:"bg-gray-700 text-white px-4 py-2 text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(I,{icon:Ht,className:"mr-2 h-3 w-3"}),"Add Department"]})]}),i&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-3",children:e.jsx("div",{className:"text-xs text-red-600",children:i})}),e.jsx("div",{className:"bg-white border border-gray-200",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-100/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Employees"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-xs text-gray-500",children:"Loading departments..."})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-xs text-gray-500",children:"No departments found"})}):a.map(X=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:Ri,className:"h-4 w-4 text-gray-400 mr-3"}),e.jsx("div",{children:e.jsx("div",{className:"font-medium text-gray-900",children:X.name})})]})}),e.jsx("td",{className:"px-6 py-4 text-xs text-gray-500",children:e.jsx("div",{className:"max-w-xs truncate",children:X.description||"No description"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(I,{icon:Cr,className:"h-3 w-3 mr-1"}),X.employee_count||0]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold ${X.is_active?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:X.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>H(X),className:"text-blue-600 hover:text-blue-900",title:"Edit Department",children:e.jsx(I,{icon:Aa,className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>V(X),className:"text-red-600 hover:text-red-900",title:"Delete Department",children:e.jsx(I,{icon:sa,className:"h-4 w-4"})})]})})]},X.id))})]})}),k>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",(j-1)*A+1," to ",Math.min(j*A,P)," of ",P," departments"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>W(j-1),disabled:j===1,className:`px-3 py-1 text-xs border ${j===1?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.jsx(I,{icon:gy,className:"h-3 w-3"})}),[...Array(k)].map((X,te)=>e.jsx("button",{onClick:()=>W(te+1),className:`px-3 py-1 text-xs border ${j===te+1?"border-gray-700 bg-gray-700 text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:te+1},te+1)),e.jsx("button",{onClick:()=>W(j+1),disabled:j===k,className:`px-3 py-1 text-xs border ${j===k?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.jsx(I,{icon:xy,className:"h-3 w-3"})})]})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:N==="create"?"Add New Department":"Edit Department"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Department Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:M.name,onChange:X=>_({...M,name:X.target.value}),className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter department name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Description"}),e.jsx("textarea",{value:M.description,onChange:X=>_({...M,description:X.target.value}),rows:"3",className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter department description"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:M.isActive,onChange:X=>_({...M,isActive:X.target.checked}),className:"h-4 w-4 text-gray-600 focus:ring-gray-500 border-gray-300"}),e.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-xs text-gray-600",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-gray-700 text-white text-xs hover:bg-gray-800 disabled:bg-gray-400",children:s?"Saving...":N==="create"?"Create":"Update"})]})]})]})})}),p&&g&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-red-100 mb-4",children:e.jsx(I,{icon:sa,className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Department"}),e.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:['Are you sure you want to delete "',g.name,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:J,disabled:s,className:"px-4 py-2 bg-red-600 text-white text-xs hover:bg-red-700 disabled:bg-red-400",children:s?"Deleting...":"Delete"})]})]})})})]})},$le=()=>{const{token:t}=At(),[a,r]=x.useState([]),[s,n]=x.useState(!1),[i,o]=x.useState(""),[c,u]=x.useState(""),[m,h]=x.useState(!1),[p,y]=x.useState(!1),[g,v]=x.useState(null),[N,w]=x.useState("create"),[j,T]=x.useState(1),[k,R]=x.useState(1),[P,$]=x.useState(0),A=10,[M,_]=x.useState({title:"",description:"",isActive:!0});x.useEffect(()=>{B()},[j,c]);const B=async()=>{try{n(!0),o("");const X={page:j,limit:A};c.trim()&&(X.search=c.trim());const te=await re.get(`${se}/configurations/job-titles`,{headers:{Authorization:`Bearer ${t}`},params:X});te.data.success&&(r(te.data.data),te.data.pagination&&(R(te.data.pagination.totalPages),$(te.data.pagination.totalRecords)))}catch(X){console.error("Error fetching job titles:",X),o("Failed to load job titles")}finally{n(!1)}},D=()=>{T(1),B()},C=()=>{u(""),T(1)},L=()=>{w("create"),_({title:"",description:"",isActive:!0}),v(null),h(!0)},H=X=>{w("edit"),_({title:X.title,description:X.description||"",isActive:X.is_active}),v(X),h(!0)},V=X=>{v(X),y(!0)},Y=async X=>{X.preventDefault();try{n(!0),o("");const te=N==="create"?`${se}/configurations/job-titles`:`${se}/configurations/job-titles/${g.id}`;(await re[N==="create"?"post":"put"](te,M,{headers:{Authorization:`Bearer ${t}`}})).data.success&&(h(!1),B(),_({title:"",description:"",isActive:!0}))}catch(te){console.error("Error saving job title:",te),te.response?.data?.error?o(te.response.data.error):o("Failed to save job title")}finally{n(!1)}},J=async()=>{try{n(!0),await re.delete(`${se}/configurations/job-titles/${g.id}`,{headers:{Authorization:`Bearer ${t}`}}),y(!1),v(null),B()}catch(X){console.error("Error deleting job title:",X),o(X.response?.data?.error||"Failed to delete job title"),y(!1)}finally{n(!1)}},W=X=>{T(X)};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",placeholder:"Search job titles...",value:c,onChange:X=>u(X.target.value),onKeyPress:X=>X.key==="Enter"&&D(),className:"border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500"}),e.jsx("button",{onClick:D,className:"ml-2 bg-gray-700 text-white px-3 py-2 text-xs hover:bg-gray-800",children:e.jsx(I,{icon:ua,className:"h-3 w-3"})}),c&&e.jsx("button",{onClick:C,className:"ml-2 text-gray-500 hover:text-gray-700 text-xs",children:"Clear"})]})}),e.jsxs("button",{onClick:L,className:"bg-gray-700 text-white px-4 py-2 text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(I,{icon:Ht,className:"mr-2 h-3 w-3"}),"Add Job Title"]})]}),i&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-3",children:e.jsx("div",{className:"text-xs text-red-600",children:i})}),e.jsx("div",{className:"bg-white border border-gray-200",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-100/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Job Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Employees"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b border-gray-200",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-xs text-gray-500",children:"Loading job titles..."})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-xs text-gray-500",children:"No job titles found"})}):a.map(X=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:rm,className:"h-4 w-4 text-gray-400 mr-3"}),e.jsx("div",{children:e.jsx("div",{className:"font-medium text-gray-900",children:X.title})})]})}),e.jsx("td",{className:"px-6 py-4 text-xs text-gray-500",children:e.jsx("div",{className:"max-w-xs truncate",children:X.description||"No description"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(I,{icon:Cr,className:"h-3 w-3 mr-1"}),X.employee_count||0]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold ${X.is_active?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:X.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>H(X),className:"text-blue-600 hover:text-blue-900",title:"Edit Job Title",children:e.jsx(I,{icon:Aa,className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>V(X),className:"text-red-600 hover:text-red-900",title:"Delete Job Title",children:e.jsx(I,{icon:sa,className:"h-4 w-4"})})]})})]},X.id))})]})}),k>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",(j-1)*A+1," to ",Math.min(j*A,P)," of ",P," job titles"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>W(j-1),disabled:j===1,className:`px-3 py-1 text-xs border ${j===1?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.jsx(I,{icon:gy,className:"h-3 w-3"})}),[...Array(k)].map((X,te)=>e.jsx("button",{onClick:()=>W(te+1),className:`px-3 py-1 text-xs border ${j===te+1?"border-gray-700 bg-gray-700 text-white":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:te+1},te+1)),e.jsx("button",{onClick:()=>W(j+1),disabled:j===k,className:`px-3 py-1 text-xs border ${j===k?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e.jsx(I,{icon:xy,className:"h-3 w-3"})})]})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:N==="create"?"Add New Job Title":"Edit Job Title"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Job Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:M.title,onChange:X=>_({...M,title:X.target.value}),className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter job title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Description"}),e.jsx("textarea",{value:M.description,onChange:X=>_({...M,description:X.target.value}),rows:"3",className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter job title description"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:M.isActive,onChange:X=>_({...M,isActive:X.target.checked}),className:"h-4 w-4 text-gray-600 focus:ring-gray-500 border-gray-300"}),e.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-xs text-gray-600",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-gray-700 text-white text-xs hover:bg-gray-800 disabled:bg-gray-400",children:s?"Saving...":N==="create"?"Create":"Update"})]})]})]})})}),p&&g&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-red-100 mb-4",children:e.jsx(I,{icon:sa,className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Job Title"}),e.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:['Are you sure you want to delete "',g.title,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:J,disabled:s,className:"px-4 py-2 bg-red-600 text-white text-xs hover:bg-red-700 disabled:bg-red-400",children:s?"Deleting...":"Delete"})]})]})})})]})},Ble=()=>{const{token:t}=At(),[a,r]=x.useState([]),[s,n]=x.useState({code:"",name:"",symbol:"",is_active:!0}),[i,o]=x.useState(!1),[c,u]=x.useState("");x.useEffect(()=>{m()},[]);const m=async()=>{o(!0),u("");try{const y=await re.get(`${se}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}});y.data.success?r(y.data.data||[]):u("Failed to load currencies.")}catch{u("Failed to load currencies.")}finally{o(!1)}},h=y=>{const{name:g,value:v,type:N,checked:w}=y.target;n(j=>({...j,[g]:N==="checkbox"?w:v}))},p=async y=>{y.preventDefault(),o(!0),u("");try{const g=await re.post(`${se}/accounting/currencies`,s,{headers:{Authorization:`Bearer ${t}`}});g.data.success?(n({code:"",name:"",symbol:"",is_active:!0}),m()):u(g.data.message||"Failed to add currency.")}catch(g){u(g.response?.data?.message||"Failed to add currency.")}finally{o(!1)}};return e.jsxs("div",{className:"mt-12",children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsx("h2",{className:"text-base font-semibold text-gray-800",children:"Currencies"})}),e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden mb-6",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-xs font-semibold text-gray-700",children:"Add New Currency"})}),e.jsxs("form",{className:"px-4 py-4 flex flex-col md:flex-row md:items-end gap-4",onSubmit:p,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"code",value:s.code,onChange:h,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0},required:!0})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:h,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0},required:!0})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Symbol"}),e.jsx("input",{type:"text",name:"symbol",value:s.symbol,onChange:h,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0}})]}),e.jsxs("div",{className:"flex items-center mb-2 md:mb-0",children:[e.jsx("input",{type:"checkbox",name:"is_active",checked:s.is_active,onChange:h,className:"mr-2 border-gray-300 focus:ring-gray-900",style:{borderRadius:0},id:"is_active"}),e.jsx("label",{htmlFor:"is_active",className:"text-xs text-gray-700",children:"Active"})]}),e.jsxs("button",{type:"submit",className:"px-4 py-2 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900",style:{borderRadius:0},disabled:i,children:[e.jsx(I,{icon:Ht,className:"mr-2 h-3 w-3"}),i?"Saving...":"Add Currency"]})]}),c&&e.jsx("div",{className:"px-4 pb-2 text-xs text-red-600",children:c})]}),e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-xs font-semibold text-gray-700",children:"Currencies List"})}),e.jsx("div",{className:"border-t border-gray-200",children:i?e.jsx("div",{className:"p-6 text-xs text-gray-500",children:"Loading currencies..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Code"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Symbol"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(y=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap font-mono",children:y.code}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:y.name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:y.symbol||"-"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("span",{className:y.is_active?"text-gray-700":"text-gray-400",children:y.is_active?"Active":"Inactive"})})]},y.id))})]})})})]})]})},Fle=()=>{const[t,a]=x.useState("departments");return e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Configurations"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Manage departments, job titles, and currencies for employee assignments and accounting"})]})})}),e.jsx("div",{className:"mb-6",children:e.jsx("nav",{className:"flex space-x-8 border-b border-gray-200",children:[{id:"departments",label:"Departments",icon:Ri},{id:"job-titles",label:"Job Titles",icon:rm},{id:"currencies",label:"Currencies",icon:Bl}].map(r=>e.jsxs("button",{onClick:()=>a(r.id),className:`py-2 px-1 border-b-2 font-medium text-xs flex items-center ${t===r.id?"border-gray-700 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(I,{icon:r.icon,className:"mr-2 h-3 w-3"}),r.label]},r.id))})}),e.jsxs("div",{className:"min-h-96 mb-12",children:[t==="departments"&&e.jsx(zle,{}),t==="job-titles"&&e.jsx($le,{}),t==="currencies"&&e.jsx(Ble,{})]})]})},qle=()=>{const{token:t}=At(),[a,r]=x.useState([]),[s,n]=x.useState(!0),[i,o]=x.useState(null),[c,u]=x.useState(""),[m,h]=x.useState(""),[p,y]=x.useState(1),[g,v]=x.useState(1),[N,w]=x.useState(0),[j]=x.useState(25),[T,k]=x.useState(!1),[R,P]=x.useState(!1),[$,A]=x.useState(null),[M,_]=x.useState({name:"",stream_id:"",capacity:"",homeroom_teacher_employee_number:""}),[B,D]=x.useState({message:null,type:"success",visible:!1}),[C,L]=x.useState(!1),[H,V]=x.useState(!1),[Y,J]=x.useState(null),[W,X]=x.useState([]),[te,oe]=x.useState(!1),[q,G]=x.useState(!1),[z,Z]=x.useState(""),[Q,fe]=x.useState([]),[he,ne]=x.useState(!1),[me,pe]=x.useState(null),[ie,ke]=x.useState(""),[Ae,ae]=x.useState(!1),[Ne,ce]=x.useState(null),[De,ye]=x.useState(!1),[Ee,Ke]=x.useState(!1),[Re,Le]=x.useState(!1),[Oe,$e]=x.useState({id:"",name:"",stream_id:"",capacity:"",homeroom_teacher_employee_number:""}),[ct,Nt]=x.useState(null),[jt,xt]=x.useState(!1),[we,Ie]=x.useState(!1),[dt,ut]=x.useState(null),[Te,Ve]=x.useState(!1),[qe,Xe]=x.useState([]),[We,Ge]=x.useState([]),[lt,Dt]=x.useState("classes"),[It,Bt]=x.useState([]),[ze,Mt]=x.useState(!1),[oa,ca]=x.useState(!1),[Ka,Yt]=x.useState({term:"",academic_year:"",start_date:"",end_date:""}),[er,Ye]=x.useState({name:"",stage:""}),[Et,na]=x.useState(!1),[zt,it]=x.useState(""),[Tt,qt]=x.useState(""),[aa,Ar]=x.useState(null),[dr,Er]=x.useState({name:"",stage:""}),[ls,gr]=x.useState([]),[Ra,Ps]=x.useState({code:"",name:"",syllabus:""}),[Xn,Us]=x.useState(!1),[Ds,Jn]=x.useState(!1),[Xl,Pn]=x.useState(""),[Jl,Dn]=x.useState(""),[Os,os]=x.useState(!1),[tn,pi]=x.useState({new_term:"",new_academic_year:""}),[Ws,$i]=x.useState("close");x.useEffect(()=>{Bi(),Zn(),cl()},[p,m]),x.useEffect(()=>{lt==="term-year"&&Oo()},[lt]),x.useEffect(()=>{if(!q)return;const Pe=setTimeout(()=>{z.trim().length>=2?$t(z):fe([])},500);return()=>clearTimeout(Pe)},[z,q]);const Zn=async()=>{try{const Pe=await re.get(`${se}/classes/streams`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});Pe.data.success&&Xe(Pe.data.data||[])}catch(Pe){console.error("Error fetching streams:",Pe)}},cl=async()=>{try{const Pe=await re.get(`${se}/employees`,{params:{limit:100,page:1},headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});Pe.data.success&&Ge(Pe.data.data||[])}catch(Pe){console.error("Error fetching teachers:",Pe)}},Bi=async()=>{try{if(n(!0),o(null),m&&m.trim()!==""){console.log(" Searching for:",m);const Ct=(await re.get(`${se}/classes/gradelevel-classes/search`,{params:{search:m.trim()},headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data;console.log(" Search results:",Ct),r(Ct.data||[]),v(1),w(Ct.data?.length||0)}else{console.log(" Fetching all classes");const Ct=(await re.get(`${se}/classes/gradelevel-classes`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data;console.log(" Raw response:",Ct);const wa=Ct.data||[],Ya=(p-1)*j,ai=Ya+j,hl=wa.slice(Ya,ai),ri=Math.ceil(wa.length/j);r(hl),v(ri),w(wa.length)}}catch(Pe){console.error("Error fetching grade-level classes:",Pe),Pe.response?o(`Error: ${Pe.response.status} - ${Pe.response.data?.message||Pe.response.statusText}`):Pe.request?o("No response from server. Please check your connection."):o(`Error: ${Pe.message}`)}finally{n(!1)}},$a=Pe=>{Pe.preventDefault(),console.log(" Starting search with term:",c),h(c),y(1)},gi=()=>{k(!0),P(!0),setTimeout(()=>{P(!1)},300)},On=()=>{k(!1),P(!1),A(null),_({name:"",stream_id:"",capacity:"",homeroom_teacher_employee_number:""})},Lr=Pe=>{const{name:Ct,value:wa}=Pe.target;_(Ya=>({...Ya,[Ct]:wa}))},Ln=async Pe=>{Pe.preventDefault(),P(!0),A(null);try{const Ct=await re.post(`${se}/classes/gradelevel-classes`,M,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});await Bi();const wa=M.name;Tr(`Class ${wa} has been successfully added!`,"success"),lt==="add-class"?(Dt("classes"),_({name:"",stream_id:"",capacity:"",homeroom_teacher_employee_number:""})):On()}catch(Ct){console.error("Error adding class:",Ct);let wa="An unexpected error occurred";if(Ct.response){const Ya=Ct.response.data;Ya?.error?wa=Ya.error:wa=Ya?.message||`Server Error (${Ct.response.status})`}else Ct.request?wa="No response from server. Please check your internet connection.":wa=Ct.message||"An unexpected error occurred";A(wa)}finally{P(!1)}},Ls=async Pe=>{L(!0),V(!0),J(null),X([]);try{const Ct=await re.get(`${se}/classes/gradelevel-classes/${Pe}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});J(Ct.data.data),await Ot(Pe)}catch(Ct){console.error("Error fetching class:",Ct),Tr("Failed to load class details","error"),L(!1)}finally{V(!1)}},Ot=async Pe=>{oe(!0);try{const Ct=await re.get(`${se}/classes/gradelevel-enrollments`,{params:{gradelevel_class_id:Pe},headers:{Authorization:`Bearer ${t}`}});Ct.data.success&&X(Ct.data.data||[])}catch(Ct){console.error("Error fetching students:",Ct)}finally{oe(!1)}},$t=async Pe=>{if(!Pe||Pe.trim().length<2){fe([]);return}ne(!0),ke(""),fe([]);try{const Ct=await re.get(`${se}/students/search`,{params:{query:Pe},headers:{Authorization:`Bearer ${t}`}});Ct.data.success?fe(Ct.data.data||[]):ke("Failed to search students.")}catch{ke("Failed to search students.")}finally{ne(!1)}},ft=async Pe=>{if(Y){pe(Pe.RegNumber),ke("");try{const Ct=await re.post(`${se}/classes/gradelevel-enrollments`,{student_regnumber:Pe.RegNumber,gradelevel_class_id:Y.id},{headers:{Authorization:`Bearer ${t}`}});Ct.data.success?(G(!1),Z(""),fe([]),await Ot(Y.id),Tr(`Student ${Pe.Name} ${Pe.Surname} has been successfully added to the class!`,"success"),Y&&L(!0)):ke(Ct.data.message||"Failed to add student.")}catch(Ct){ke(Ct.response?.data?.message||"Failed to add student.")}finally{pe(null)}}},Ca=Pe=>{ce(Pe),ae(!0)},dl=()=>{ae(!1),ce(null),ye(!1)},ul=async()=>{if(Ne){ye(!0);try{if(await re.delete(`${se}/classes/gradelevel-enrollments/${Ne.id}`,{headers:{Authorization:`Bearer ${t}`}}),Y){await Ot(Y.id);const Pe=`${Ne.Name} ${Ne.Surname}`;Tr(`${Pe} has been successfully unenrolled from the class!`,"success")}dl()}catch(Pe){console.error("Error removing student:",Pe),Tr("Failed to unenroll student","error")}finally{ye(!1)}}},xn=()=>{L(!1),J(null),V(!1),X([]),G(!1),Z(""),fe([])},mc=()=>{L(!1),G(!0)},Qn=()=>{G(!1),Z(""),fe([]),ke(""),Y&&L(!0)},ml=async Pe=>{Ke(!0),Le(!0),Nt(null),$e({id:"",name:"",stream_id:"",capacity:"",homeroom_teacher_employee_number:""});try{const wa=(await re.get(`${se}/classes/gradelevel-classes/${Pe}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data.data;$e({id:wa.id||"",name:wa.name||"",stream_id:wa.stream_id||"",capacity:wa.capacity||"",homeroom_teacher_employee_number:wa.homeroom_teacher_employee_number||""})}catch(Ct){console.error("Error fetching class for edit:",Ct),Tr("Failed to load class details for editing","error"),Ke(!1)}finally{Le(!1)}},Fi=()=>{Ke(!1),$e({id:"",name:"",stream_id:"",capacity:"",homeroom_teacher_employee_number:""}),Nt(null),xt(!1)},Zl=Pe=>{const{name:Ct,value:wa}=Pe.target;$e(Ya=>({...Ya,[Ct]:wa}))},Do=async Pe=>{Pe.preventDefault(),xt(!0),Nt(null);try{await re.put(`${se}/classes/gradelevel-classes/${Oe.id}`,Oe,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),await Bi(),Fi(),Tr(`Class ${Oe.name} has been successfully updated!`,"success")}catch(Ct){console.error("Error updating class:",Ct);let wa="An unexpected error occurred";if(Ct.response){const Ya=Ct.response.data;Ya?.error?wa=Ya.error:wa=Ya?.message||`Server Error (${Ct.response.status})`}else Ct.request?wa="No response from server. Please check your internet connection.":wa=Ct.message||"An unexpected error occurred";Nt(wa)}finally{xt(!1)}},vu=()=>Oe.name&&Oe.stream_id,hc=Pe=>{ut(Pe),Ie(!0)},fn=()=>{Ie(!1),ut(null),Ve(!1)},yi=async()=>{if(dt){Ve(!0);try{await re.delete(`${se}/classes/gradelevel-classes/${dt.id}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),await Bi(),fn(),Tr(`Class ${dt.name} has been successfully deleted!`,"success")}catch(Pe){console.error("Error deleting class:",Pe);let Ct="Failed to delete class";Pe.response?Ct=Pe.response.data?.message||`Server Error (${Pe.response.status})`:Pe.request&&(Ct="No response from server. Please check your internet connection."),Tr(Ct,"error")}finally{Ve(!1)}}},Tr=(Pe,Ct="success",wa=3e3)=>{D({message:Pe,type:Ct,visible:!0}),wa>0&&setTimeout(()=>{D(Ya=>({...Ya,visible:!1})),setTimeout(()=>{D({message:null,type:"success",visible:!1})},300)},wa)},Mn=Pe=>{const Ct={width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"};return Pe==="success"?e.jsxs("svg",{...Ct,children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}):Pe==="error"?e.jsxs("svg",{...Ct,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}):Pe==="info"?e.jsxs("svg",{...Ct,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}):null},bi=Pe=>{switch(Pe){case"success":return"#10b981";case"error":return"#ef4444";case"info":return"#2563eb";case"warning":return"#f59e0b";default:return"#10b981"}},ma=()=>M.name&&M.stream_id,Oo=async()=>{Mt(!0);try{const Pe=await re.get(`${se}/classes/class-term-years`,{headers:{Authorization:`Bearer ${t}`}});Pe.data.success&&Bt(Pe.data.data||[])}catch(Pe){console.error("Error fetching class term years:",Pe)}finally{Mt(!1)}},xc=async Pe=>{Pe.preventDefault();try{(await re.post(`${se}/classes/class-term-years/bulk-populate`,Ka,{headers:{Authorization:`Bearer ${t}`}})).data.success&&(Tr("Class term years bulk populated successfully!","success"),ca(!1),Yt({term:"",academic_year:"",start_date:"",end_date:""}),Oo())}catch(Ct){Tr(Ct.response?.data?.message||"Failed to bulk populate","error")}},Ql=async()=>{try{const Pe=await re.get(`${se}/classes/subjects`,{headers:{Authorization:`Bearer ${t}`}});Pe.data.success&&gr(Pe.data.data||[])}catch(Pe){console.error("Error fetching subjects:",Pe)}},ei=async Pe=>{if(Pe.preventDefault(),it(""),qt(""),!er.name.trim()||!er.stage.trim()){it("Both name and stage are required.");return}try{na(!0);const Ct=await re.post(`${se}/classes/streams`,er,{headers:{Authorization:`Bearer ${t}`}});Ct.data.success?(qt("Stream added successfully!"),Ye({name:"",stage:""}),Zn()):it(Ct.data.message||"Failed to add stream.")}catch(Ct){it(Ct.response?.data?.message||"Failed to add stream.")}finally{na(!1)}},ti=async Pe=>{if(Pe.preventDefault(),!Ra.code.trim()||!Ra.name.trim()){it("Both code and name are required.");return}try{Us(!0);const Ct=await re.post(`${se}/classes/subjects`,Ra,{headers:{Authorization:`Bearer ${t}`}});Ct.data.success?(Tr("Subject added successfully!","success"),Ps({code:"",name:"",syllabus:""}),Ql()):Tr(Ct.data.message||"Failed to add subject.","error")}catch(Ct){Tr(Ct.response?.data?.message||"Failed to add subject.","error")}finally{Us(!1)}},pn=async()=>{try{Jn(!0),Pn(""),Dn("");const Pe=await re.post(`${se}/close-to-term/close-to-term`,{},{headers:{Authorization:`Bearer ${t}`}});Pe.data.success&&(Dn(`Close to Term completed successfully! ${Pe.data.data.closed_count} enrollments closed.`),os(!1))}catch(Pe){Pn(Pe.response?.data?.message||"Failed to close term"),os(!1)}finally{Jn(!1)}},vi=async()=>{if(!tn.new_term||!tn.new_academic_year){Pn("Please enter both term and academic year");return}try{Jn(!0),Pn(""),Dn("");const Pe=await re.post(`${se}/close-to-term/open-to-term`,tn,{headers:{Authorization:`Bearer ${t}`}});Pe.data.success&&(Dn(`Open to Term completed successfully! ${Pe.data.data.classes_updated} classes updated.`),os(!1),pi({new_term:"",new_academic_year:""}))}catch(Pe){Pn(Pe.response?.data?.message||"Failed to open term"),os(!1)}finally{Jn(!1)}},fc=a.length>0?(p-1)*j+1:0,qi=Math.min(p*j,N);a.length>0;const Lo=[{id:"classes",name:"Classes",icon:vh},{id:"add-class",name:"Add Gradelevel Class",icon:Ht},{id:"term-year",name:"Class Term Year",icon:Pa},{id:"configurations",name:"Class Configurations",icon:Ph},{id:"close-term",name:"Close to Term",icon:UN}];return s&&a.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading classes..."})}):e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Classes"}),e.jsx("p",{className:"report-subtitle",children:"Manage grade-level classes and student enrollments."})]}),e.jsx("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"},children:lt==="classes"&&e.jsxs("button",{onClick:gi,className:"btn-checklist",children:[e.jsx(I,{icon:Ht}),"Add Class"]})})]}),e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsxs("div",{className:"report-filters-left",style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[e.jsx("div",{className:"filter-group",style:{display:"flex",gap:"8px",alignItems:"center"},children:Lo.map(Pe=>e.jsxs("button",{onClick:()=>Dt(Pe.id),style:{padding:"6px 12px",fontSize:"0.75rem",fontWeight:500,border:`1px solid ${lt===Pe.id?"#2563eb":"var(--border-color)"}`,borderRadius:"4px",background:lt===Pe.id?"#2563eb":"transparent",color:lt===Pe.id?"white":"var(--text-primary)",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},onMouseEnter:Ct=>{lt!==Pe.id&&(Ct.currentTarget.style.background="#f3f4f6",Ct.currentTarget.style.borderColor="#d1d5db")},onMouseLeave:Ct=>{lt!==Pe.id&&(Ct.currentTarget.style.background="transparent",Ct.currentTarget.style.borderColor="var(--border-color)")},children:[e.jsx(I,{icon:Pe.icon,style:{fontSize:"0.7rem"}}),e.jsx("span",{children:Pe.name})]},Pe.id))}),lt==="classes"&&e.jsx("form",{onSubmit:$a,className:"filter-group",style:{marginLeft:"auto"},children:e.jsxs("div",{className:"search-input-wrapper",style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:ua,className:"search-icon"}),e.jsx("input",{type:"text",value:c,onChange:Pe=>u(Pe.target.value),placeholder:"Search by class name or stream name...",className:"filter-input search-input"}),c&&e.jsx("button",{onClick:()=>{u(""),h(""),y(1)},style:{position:"absolute",right:"8px",padding:"4px 6px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},title:"Clear search",children:""})]})})]})}),i&&e.jsx("div",{style:{padding:"10px 30px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",flexShrink:0},children:i}),e.jsxs("div",{className:"report-content-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:lt==="classes"?"0":"20px 30px"},children:[lt==="classes"&&e.jsx("div",{className:"ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:s&&a.length===0?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading classes..."}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"CLASS NAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STREAM"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STAGE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"TEACHER"}),e.jsx("th",{style:{padding:"6px 10px"},children:"CAPACITY"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[a.map((Pe,Ct)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:Ct%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:Pe.name}),e.jsx("td",{style:{padding:"4px 10px"},children:Pe.stream_name||"N/A"}),e.jsx("td",{style:{padding:"4px 10px"},children:Pe.stream_stage||"N/A"}),e.jsx("td",{style:{padding:"4px 10px"},children:Pe.teacher_name||"Not Assigned"}),e.jsx("td",{style:{padding:"4px 10px"},children:Pe.capacity||"Unlimited"}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>Ls(Pe.id),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0},title:"View",children:e.jsx(I,{icon:qa})}),e.jsx("button",{onClick:()=>ml(Pe.id),style:{color:"#6366f1",background:"none",border:"none",cursor:"pointer",padding:0},title:"Edit",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>hc(Pe),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:0},title:"Delete",children:e.jsx(I,{icon:sa})})]})})]},Pe.id)),Array.from({length:Math.max(0,25-a.length)}).map((Pe,Ct)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(a.length+Ct)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${Ct}`))]})]})}),lt==="add-class"&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:e.jsxs("div",{children:[e.jsxs("h3",{style:{fontSize:"0.95rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Ht,style:{color:"#2563eb"}}),"Add New Gradelevel Class"]}),$&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:$}),e.jsxs("form",{onSubmit:Ln,className:"modal-form",style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Class Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"name",className:"form-control",placeholder:"Enter class name",value:M.name,onChange:Lr,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Stream ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"stream_id",className:"form-control",value:M.stream_id,onChange:Lr,required:!0,children:[e.jsx("option",{value:"",children:"Select stream"}),qe.map(Pe=>e.jsxs("option",{value:Pe.id,children:[Pe.name," - ",Pe.stage]},Pe.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Capacity"}),e.jsx("input",{type:"number",name:"capacity",className:"form-control",placeholder:"Enter capacity (optional)",value:M.capacity,onChange:Lr,min:"1"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Homeroom Teacher"}),e.jsxs("select",{name:"homeroom_teacher_employee_number",className:"form-control",value:M.homeroom_teacher_employee_number,onChange:Lr,children:[e.jsx("option",{value:"",children:"Select teacher (optional)"}),We.map(Pe=>e.jsx("option",{value:Pe.employee_id,children:Pe.full_name||`${Pe.first_name||""} ${Pe.last_name||""}`.trim()},Pe.id))]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[e.jsx("button",{type:"submit",className:"modal-btn modal-btn-confirm",disabled:!ma()||R,style:{padding:"8px 16px"},children:R?"Saving...":"Save Class"}),e.jsx("button",{type:"button",onClick:()=>{_({name:"",stream_id:"",capacity:"",homeroom_teacher_employee_number:""}),A(null)},className:"modal-btn modal-btn-cancel",style:{padding:"8px 16px"},children:"Clear"})]})]})]})}),lt==="term-year"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{fontSize:"0.95rem",fontWeight:700,color:"var(--text-primary)",margin:0},children:"Class Term Year Management"}),e.jsxs("button",{onClick:()=>ca(!0),className:"btn-checklist",style:{fontSize:"0.7rem",padding:"6px 12px"},children:[e.jsx(I,{icon:Dh,style:{marginRight:"4px",fontSize:"0.7rem"}}),"Bulk Populate"]})]}),ze?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading class term years..."}):It.length===0?e.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#64748b",fontSize:"0.75rem"},children:'No class term year records found. Use "Bulk Populate" to create records.'}):e.jsx("div",{className:"ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"CLASS NAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STREAM"}),e.jsx("th",{style:{padding:"6px 10px"},children:"TERM"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACADEMIC YEAR"}),e.jsx("th",{style:{padding:"6px 10px"},children:"START DATE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"END DATE"})]})}),e.jsxs("tbody",{children:[It.map((Pe,Ct)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:Ct%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:Pe.class_name||"N/A"}),e.jsx("td",{style:{padding:"4px 10px"},children:Pe.stream_name||"N/A"}),e.jsxs("td",{style:{padding:"4px 10px"},children:["Term ",Pe.term]}),e.jsx("td",{style:{padding:"4px 10px"},children:Pe.academic_year}),e.jsx("td",{style:{padding:"4px 10px"},children:Pe.start_date?new Date(Pe.start_date).toLocaleDateString():"N/A"}),e.jsx("td",{style:{padding:"4px 10px"},children:Pe.end_date?new Date(Pe.end_date).toLocaleDateString():"N/A"})]},Pe.id)),Array.from({length:Math.max(0,25-It.length)}).map((Pe,Ct)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(It.length+Ct)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${Ct}`))]})]})})]}),lt==="configurations"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{children:[e.jsxs("h3",{style:{fontSize:"0.95rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Cr,style:{color:"#2563eb"}}),"Add New Stream"]}),e.jsxs("form",{onSubmit:ei,style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginBottom:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Stream Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:er.name,onChange:Pe=>Ye({...er,name:Pe.target.value}),className:"form-control",placeholder:"e.g., Grade 1, Form 2",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Stage ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"stage",value:er.stage,onChange:Pe=>Ye({...er,stage:Pe.target.value}),className:"form-control",placeholder:"e.g., Primary, Secondary",required:!0})]}),e.jsx("div",{className:"form-group",style:{display:"flex",alignItems:"flex-end"},children:e.jsx("button",{type:"submit",className:"modal-btn modal-btn-confirm",disabled:Et,style:{width:"100%"},children:Et?"Adding...":"Add Stream"})})]}),(zt||Tt)&&e.jsx("div",{style:{padding:"10px",background:zt?"#fee2e2":"#d1fae5",color:zt?"#dc2626":"#065f46",fontSize:"0.75rem",borderRadius:"4px",marginBottom:"16px"},children:zt||Tt})]}),e.jsxs("div",{children:[e.jsxs("h3",{style:{fontSize:"0.95rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:vh,style:{color:"#2563eb"}}),"Add New Subject"]}),e.jsxs("form",{onSubmit:ti,style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Subject Code ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"code",value:Ra.code,onChange:Pe=>Ps({...Ra,code:Pe.target.value}),className:"form-control",placeholder:"e.g., ENG101",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Subject Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:Ra.name,onChange:Pe=>Ps({...Ra,name:Pe.target.value}),className:"form-control",placeholder:"e.g., English Language",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Syllabus"}),e.jsx("input",{type:"text",name:"syllabus",value:Ra.syllabus,onChange:Pe=>Ps({...Ra,syllabus:Pe.target.value}),className:"form-control",placeholder:"e.g., ZIMSEC, Cambridge"})]}),e.jsx("div",{className:"form-group",style:{display:"flex",alignItems:"flex-end"},children:e.jsx("button",{type:"submit",className:"modal-btn modal-btn-confirm",disabled:Xn,style:{width:"100%"},children:Xn?"Adding...":"Add Subject"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"0.95rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"16px"},children:"Existing Streams"}),qe.length===0?e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#64748b",fontSize:"0.75rem"},children:"No streams found."}):e.jsx("div",{style:{border:"1px solid var(--border-color)",borderRadius:"4px",overflow:"hidden"},children:e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"STREAM NAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STAGE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsx("tbody",{children:qe.map((Pe,Ct)=>e.jsx("tr",{style:{height:"32px",backgroundColor:Ct%2===0?"#fafafa":"#f3f4f6"},children:aa===Pe.id?e.jsxs(e.Fragment,{children:[e.jsx("td",{style:{padding:"4px 10px"},children:e.jsx("input",{type:"text",value:dr.name,onChange:wa=>Er({...dr,name:wa.target.value}),className:"form-control",style:{width:"100%"}})}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsx("input",{type:"text",value:dr.stage,onChange:wa=>Er({...dr,stage:wa.target.value}),className:"form-control",style:{width:"100%"}})}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>{re.put(`${se}/classes/streams/${Pe.id}`,dr,{headers:{Authorization:`Bearer ${t}`}}).then(()=>{Ar(null),Zn(),Tr("Stream updated successfully!","success")}).catch(()=>Tr("Failed to update stream","error"))},className:"modal-btn modal-btn-confirm",style:{padding:"4px 8px",fontSize:"0.7rem"},children:e.jsx(I,{icon:ns})}),e.jsx("button",{onClick:()=>Ar(null),className:"modal-btn modal-btn-cancel",style:{padding:"4px 8px",fontSize:"0.7rem"},children:e.jsx(I,{icon:Wt})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{style:{padding:"4px 10px"},children:Pe.name}),e.jsx("td",{style:{padding:"4px 10px"},children:Pe.stage}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>{Ar(Pe.id),Er({name:Pe.name,stage:Pe.stage})},style:{color:"#6366f1",background:"none",border:"none",cursor:"pointer",padding:0},title:"Edit",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this stream?")&&re.delete(`${se}/classes/streams/${Pe.id}`,{headers:{Authorization:`Bearer ${t}`}}).then(()=>{Zn(),Tr("Stream deleted successfully!","success")}).catch(()=>Tr("Failed to delete stream","error"))},style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:0},title:"Delete",children:e.jsx(I,{icon:sa})})]})})]})},Pe.id))})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"0.95rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"16px"},children:"Existing Subjects"}),ls.length===0?e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#64748b",fontSize:"0.75rem"},children:"No subjects found."}):e.jsx("div",{style:{border:"1px solid var(--border-color)",borderRadius:"4px",overflow:"hidden"},children:e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"SUBJECT NAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"CODE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"SYLLABUS"})]})}),e.jsx("tbody",{children:ls.map((Pe,Ct)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:Ct%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:Pe.name}),e.jsx("td",{style:{padding:"4px 10px",fontFamily:"monospace"},children:Pe.code}),e.jsx("td",{style:{padding:"4px 10px"},children:Pe.syllabus||"-"})]},Pe.id))})]})})]})]}),lt==="close-term"&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsx("div",{style:{borderBottom:"1px solid var(--border-color)"},children:e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsx("button",{onClick:()=>$i("close"),style:{padding:"8px 16px",fontSize:"0.75rem",fontWeight:500,border:"none",borderBottom:`2px solid ${Ws==="close"?"#2563eb":"transparent"}`,background:"transparent",color:Ws==="close"?"#2563eb":"var(--text-secondary)",cursor:"pointer"},children:"Close to Term"}),e.jsx("button",{onClick:()=>$i("open"),style:{padding:"8px 16px",fontSize:"0.75rem",fontWeight:500,border:"none",borderBottom:`2px solid ${Ws==="open"?"#2563eb":"transparent"}`,background:"transparent",color:Ws==="open"?"#2563eb":"var(--text-secondary)",cursor:"pointer"},children:"Open to Term"})]})}),Xl&&e.jsxs("div",{style:{padding:"10px",background:"#fee2e2",border:"1px solid #fecaca",color:"#dc2626",fontSize:"0.75rem",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Wt,style:{fontSize:"0.7rem"}}),Xl]}),Jl&&e.jsxs("div",{style:{padding:"10px",background:"#d1fae5",border:"1px solid #a7f3d0",color:"#065f46",fontSize:"0.75rem",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:ns,style:{fontSize:"0.7rem"}}),Jl]}),Ws==="close"?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:e.jsxs("div",{style:{background:"#f9fafb",padding:"16px",borderRadius:"4px",border:"1px solid var(--border-color)"},children:[e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"8px"},children:"Close Current Term"}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"16px"},children:"This will de-enroll all students from their current classes. This action cannot be undone."}),e.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to close the current term? This will de-enroll all students.")&&pn()},className:"modal-btn modal-btn-delete",disabled:Ds,style:{padding:"8px 16px"},children:Ds?"Closing...":"Close to Term"})]})}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:e.jsxs("div",{style:{background:"#f9fafb",padding:"16px",borderRadius:"4px",border:"1px solid var(--border-color)"},children:[e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px"},children:"Open to New Term"}),e.jsxs("form",{onSubmit:Pe=>{Pe.preventDefault(),vi()},style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["New Term ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"new_term",value:tn.new_term,onChange:Pe=>pi({...tn,new_term:Pe.target.value}),className:"form-control",required:!0,children:[e.jsx("option",{value:"",children:"Select term"}),e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["New Academic Year ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"new_academic_year",value:tn.new_academic_year,onChange:Pe=>pi({...tn,new_academic_year:Pe.target.value}),className:"form-control",placeholder:"e.g., 2024",required:!0})]}),e.jsx("button",{type:"submit",className:"modal-btn modal-btn-confirm",disabled:Ds,style:{padding:"8px 16px",width:"fit-content"},children:Ds?"Opening...":"Open to Term"})]})]})})]})]}),lt==="classes"&&e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",fc," to ",qi," of ",N||0," results."]}),e.jsxs("div",{className:"table-footer-right",children:[!m&&g>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>y(Math.max(1,p-1)),disabled:p===1,children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",p," of ",g]}),e.jsx("button",{className:"pagination-btn",onClick:()=>y(Math.min(g,p+1)),disabled:p===g,children:"Next"})]}),!m&&g<=1&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"All data displayed"})]})]}),T&&e.jsx("div",{className:"modal-overlay",onClick:On,children:e.jsx("div",{className:"modal-dialog",onClick:Pe=>Pe.stopPropagation(),style:{maxWidth:"600px",minHeight:R?"400px":"auto"},children:R?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{style:{marginTop:"15px",color:"var(--text-secondary)"},children:"Loading..."})]}),e.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{height:"32px",width:"100px",background:"#e5e7eb",borderRadius:"4px"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Add Class"}),e.jsx("button",{className:"modal-close-btn",onClick:On,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[$&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:$}),e.jsxs("form",{onSubmit:Ln,className:"modal-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Class Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"name",className:"form-control",placeholder:"Enter class name",value:M.name,onChange:Lr,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Stream ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"stream_id",className:"form-control",value:M.stream_id,onChange:Lr,required:!0,children:[e.jsx("option",{value:"",children:"Select stream"}),qe.map(Pe=>e.jsxs("option",{value:Pe.id,children:[Pe.name," - ",Pe.stage]},Pe.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Capacity"}),e.jsx("input",{type:"number",name:"capacity",className:"form-control",placeholder:"Enter capacity (optional)",value:M.capacity,onChange:Lr,min:"1"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Homeroom Teacher"}),e.jsxs("select",{name:"homeroom_teacher_employee_number",className:"form-control",value:M.homeroom_teacher_employee_number,onChange:Lr,children:[e.jsx("option",{value:"",children:"Select teacher (optional)"}),We.map(Pe=>e.jsx("option",{value:Pe.employee_id,children:Pe.full_name||`${Pe.first_name||""} ${Pe.last_name||""}`.trim()},Pe.id))]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:On,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:Ln,disabled:!ma()||R,children:R?"Saving...":"Save Class"})]})]})})}),C&&e.jsx("div",{className:"modal-overlay",onClick:xn,children:e.jsx("div",{className:"modal-dialog",onClick:Pe=>Pe.stopPropagation(),style:{maxWidth:"900px",width:"90%",maxHeight:"90vh",minHeight:H?"400px":"auto"},children:H?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{style:{marginTop:"15px",color:"var(--text-secondary)"},children:"Loading class details..."})]}),e.jsx("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}})})]}):Y?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",style:{color:"#000000"},children:["Class Details - ",Y.name]}),e.jsx("button",{className:"modal-close-btn",onClick:xn,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"modal-body",style:{maxHeight:"calc(90vh - 120px)",overflowY:"auto"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:0,fontSize:"0.95rem",fontWeight:"700",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:vh,style:{color:"#2563eb"}}),"Class Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px 30px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Class Name"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:Y.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Stream"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:Y.stream_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Stage"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:Y.stream_stage||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Capacity"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:Y.capacity||"Unlimited"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Homeroom Teacher"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:Y.teacher_name||"Not Assigned"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("h4",{style:{margin:0,fontSize:"0.95rem",fontWeight:"700",color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Cr,style:{color:"#2563eb"}}),"Students (",W.length,")"]}),e.jsxs("button",{onClick:mc,className:"modal-btn modal-btn-confirm",style:{padding:"4px 12px",fontSize:"0.75rem"},children:[e.jsx(I,{icon:Ht,style:{marginRight:"4px"}}),"Add Student"]})]}),te?e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)",fontSize:"0.75rem"},children:"Loading students..."}):W.length===0?e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)",fontSize:"0.75rem"},children:"No students enrolled in this class."}):e.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"STUDENT NAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"REGISTRATION NUMBER"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[W.map((Pe,Ct)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:Ct%2===0?"#fafafa":"#f3f4f6"},children:[e.jsxs("td",{style:{padding:"4px 10px"},children:[Pe.Name," ",Pe.Surname]}),e.jsx("td",{style:{padding:"4px 10px",fontFamily:"monospace"},children:Pe.RegNumber}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsx("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:e.jsx("button",{onClick:()=>Ca(Pe),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:0},title:"De-enroll Student",children:e.jsx(I,{icon:sa})})})})]},Pe.id)),Array.from({length:Math.max(0,25-W.length)}).map((Pe,Ct)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(W.length+Ct)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${Ct}`))]})]})})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:xn,children:"Close"})})]}):null})}),q&&Y&&e.jsx("div",{className:"modal-overlay",onClick:Qn,children:e.jsxs("div",{className:"modal-dialog",onClick:Pe=>Pe.stopPropagation(),style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",children:["Add Student to ",Y.name]}),e.jsx("button",{className:"modal-close-btn",onClick:Qn,children:e.jsx(I,{icon:Wt})})]}),e.jsxs("div",{className:"modal-body",children:[ie&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:ie}),e.jsx("div",{className:"modal-form",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Search Student"}),e.jsx("input",{type:"text",value:z,onChange:Pe=>Z(Pe.target.value),className:"form-control",placeholder:"Search by registration number, first name, or surname",style:{width:"100%"}}),e.jsx("p",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:"4px"},children:"Start typing to search (minimum 2 characters)"})]})}),Q.length>0&&e.jsxs("div",{style:{marginTop:"16px",maxHeight:"300px",overflowY:"auto",border:"1px solid var(--border-color)",borderRadius:"4px"},children:[e.jsx("div",{style:{padding:"8px 12px",background:"#f9fafb",borderBottom:"1px solid var(--border-color)",fontWeight:600,fontSize:"0.75rem"},children:"Search Results"}),Q.map(Pe=>e.jsxs("div",{style:{padding:"12px",borderBottom:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.8rem",fontWeight:500,color:"var(--text-primary)"},children:[Pe.Name," ",Pe.Surname]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",fontFamily:"monospace",marginTop:"2px"},children:Pe.RegNumber})]}),e.jsx("button",{onClick:()=>ft(Pe),className:"modal-btn modal-btn-confirm",disabled:me===Pe.RegNumber,style:{padding:"4px 12px",fontSize:"0.75rem"},children:me===Pe.RegNumber?"Adding...":"Add"})]},Pe.RegNumber))]}),Q.length===0&&!he&&z&&e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)",fontSize:"0.75rem"},children:"No students found. Try a different search term."})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:Qn,children:"Cancel"})})]})}),Ee&&e.jsx("div",{className:"modal-overlay",onClick:Fi,children:e.jsx("div",{className:"modal-dialog",onClick:Pe=>Pe.stopPropagation(),style:{maxWidth:"600px",minHeight:Re?"400px":"auto"},children:Re?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{style:{marginTop:"15px",color:"var(--text-secondary)"},children:"Loading class details..."})]}),e.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{height:"32px",width:"100px",background:"#e5e7eb",borderRadius:"4px"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Edit Class"}),e.jsx("button",{className:"modal-close-btn",onClick:Fi,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[ct&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:ct}),e.jsxs("form",{onSubmit:Do,className:"modal-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Class Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"name",className:"form-control",placeholder:"Enter class name",value:Oe.name,onChange:Zl,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Stream ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"stream_id",className:"form-control",value:Oe.stream_id,onChange:Zl,required:!0,children:[e.jsx("option",{value:"",children:"Select stream"}),qe.map(Pe=>e.jsxs("option",{value:Pe.id,children:[Pe.name," - ",Pe.stage]},Pe.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Capacity"}),e.jsx("input",{type:"number",name:"capacity",className:"form-control",placeholder:"Enter capacity (optional)",value:Oe.capacity,onChange:Zl,min:"1"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Homeroom Teacher"}),e.jsxs("select",{name:"homeroom_teacher_employee_number",className:"form-control",value:Oe.homeroom_teacher_employee_number,onChange:Zl,children:[e.jsx("option",{value:"",children:"Select teacher (optional)"}),We.map(Pe=>e.jsx("option",{value:Pe.employee_id,children:Pe.full_name||`${Pe.first_name||""} ${Pe.last_name||""}`.trim()},Pe.id))]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:Fi,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:Do,disabled:!vu()||jt,children:jt?"Saving...":"Update Class"})]})]})})}),Ae&&Ne&&e.jsx("div",{className:"modal-overlay",onClick:dl,children:e.jsxs("div",{className:"modal-dialog",onClick:Pe=>Pe.stopPropagation(),style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Confirm De-enroll"}),e.jsx("button",{className:"modal-close-btn",onClick:dl,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#ef4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"4px"},children:"Are you sure you want to de-enroll this student?"}),e.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-secondary)"},children:"This action will remove the student from the class."})]})]}),e.jsxs("div",{style:{padding:"12px",background:"#f9fafb",borderRadius:"4px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Student Information"}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:[e.jsxs("div",{style:{marginBottom:"4px"},children:[e.jsx("strong",{children:"Name:"})," ",Ne.Name," ",Ne.Surname]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Registration Number:"})," ",Ne.RegNumber]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:dl,disabled:De,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:ul,disabled:De,style:{background:"#dc2626"},children:De?"De-enrolling...":"De-enroll"})]})]})}),we&&dt&&e.jsx("div",{className:"modal-overlay",onClick:fn,children:e.jsxs("div",{className:"modal-dialog",onClick:Pe=>Pe.stopPropagation(),style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Confirm Delete"}),e.jsx("button",{className:"modal-close-btn",onClick:fn,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#ef4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"4px"},children:"Are you sure you want to delete this class?"}),e.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-secondary)"},children:"This action cannot be undone."})]})]}),e.jsxs("div",{style:{padding:"12px",background:"#f9fafb",borderRadius:"4px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Class Information"}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Name:"})," ",dt.name]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Stream:"})," ",dt.stream_name||"N/A"]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:fn,disabled:Te,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-delete",onClick:yi,disabled:Te,children:Te?"Deleting...":"Delete Class"})]})]})}),oa&&e.jsx("div",{className:"modal-overlay",onClick:()=>ca(!1),children:e.jsxs("div",{className:"modal-dialog",onClick:Pe=>Pe.stopPropagation(),style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Bulk Populate Class Term Year"}),e.jsx("button",{className:"modal-close-btn",onClick:()=>ca(!1),children:e.jsx(I,{icon:Wt})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:xc,className:"modal-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Term ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"term",value:Ka.term,onChange:Pe=>Yt({...Ka,term:Pe.target.value}),className:"form-control",required:!0,children:[e.jsx("option",{value:"",children:"Select term"}),e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Academic Year ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"academic_year",value:Ka.academic_year,onChange:Pe=>Yt({...Ka,academic_year:Pe.target.value}),className:"form-control",placeholder:"e.g., 2024",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Start Date ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"date",name:"start_date",value:Ka.start_date,onChange:Pe=>Yt({...Ka,start_date:Pe.target.value}),className:"form-control",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["End Date ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"date",name:"end_date",value:Ka.end_date,onChange:Pe=>Yt({...Ka,end_date:Pe.target.value}),className:"form-control",required:!0})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:()=>ca(!1),children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:xc,children:"Bulk Populate"})]})]})}),B.visible&&B.message&&e.jsx("div",{className:"success-toast",children:e.jsxs("div",{className:"success-toast-content",style:{background:bi(B.type)},children:[Mn(B.type),e.jsx("span",{children:B.message})]})})]})},Ule=()=>{const{token:t}=At(),[a,r]=x.useState([]),[s,n]=x.useState(!1),[i,o]=x.useState(""),[c,u]=x.useState(!1),[m,h]=x.useState(!1),[p,y]=x.useState({}),[g,v]=x.useState(""),[N,w]=x.useState([]),[j,T]=x.useState(!1),[k,R]=x.useState(""),[P,$]=x.useState(!1),[A,M]=x.useState({stream_id:"",name:"",homeroom_teacher_employee_number:"",capacity:""});x.useEffect(()=>{_()},[]),x.useEffect(()=>{if(!g.trim()){w([]),R("");return}T(!0),R("");const J=setTimeout(async()=>{try{const W=await re.get(`${se}/employees/search`,{params:{query:g},headers:{Authorization:`Bearer ${t}`}});W.data.success?w(W.data.data||[]):R("Failed to search employees")}catch{R("Failed to search employees")}finally{T(!1)}},400);return()=>clearTimeout(J)},[g,t]);const _=async()=>{try{const J=await re.get(`${se}/classes/streams`,{headers:{Authorization:`Bearer ${t}`}});J.data.success&&r(J.data.data||[])}catch{o("Failed to load streams")}},B=J=>{const{name:W,value:X}=J.target;M(te=>({...te,[W]:X}))},D=J=>{v(J.target.value),$(!0)},C=J=>{M(W=>({...W,homeroom_teacher_employee_number:J.employee_id})),v(`${J.full_name} (${J.employee_id})`),$(!1)},L=()=>A.stream_id?A.name.trim()?A.capacity&&isNaN(Number(A.capacity))?(o("Capacity must be a number"),!1):!0:(o("Class name is required"),!1):(o("Stream is required"),!1),H=async J=>{if(J.preventDefault(),o(""),!!L())try{n(!0);const W={...A,capacity:A.capacity?Number(A.capacity):null,homeroom_teacher_employee_number:A.homeroom_teacher_employee_number||null};(await re.post(`${se}/classes/gradelevel-classes`,W,{headers:{Authorization:`Bearer ${t}`}})).data.success&&(u(!0),M({stream_id:"",name:"",homeroom_teacher_employee_number:"",capacity:""}),v(""))}catch(W){W.response?.data?.message?(y({message:W.response.data.message}),h(!0)):o("Failed to create class")}finally{n(!1)}},V=()=>u(!1),Y=()=>{h(!1),y({})};return e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-lg font-bold text-gray-900 flex items-center",children:[e.jsx(I,{icon:Cr,className:"mr-2 h-5 w-5 text-gray-400"}),"Add Gradelevel Class"]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Create a new gradelevel class (homeroom) within a stream."})]}),i&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-3",children:e.jsx("div",{className:"text-xs text-red-600",children:i})}),e.jsxs("form",{onSubmit:H,className:"space-y-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Stream ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"stream_id",value:A.stream_id,onChange:B,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Stream"}),a.map(J=>e.jsxs("option",{value:J.id,children:[J.name," (",J.stage,")"]},J.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Class Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:A.name,onChange:B,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 1A, 2B, Form 1",required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Homeroom Teacher ",e.jsx("span",{className:"text-gray-400",children:"(search by name or ID)"})]}),e.jsx("input",{type:"text",name:"homeroom_teacher_search",value:g,onChange:D,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Type to search...",autoComplete:"off",onFocus:()=>$(!0)}),P&&g&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded shadow max-h-48 overflow-y-auto",children:j?e.jsxs("div",{className:"p-2 text-xs text-gray-500 flex items-center",children:[e.jsx(I,{icon:fs,spin:!0,className:"mr-2"}),"Searching..."]}):k?e.jsx("div",{className:"p-2 text-xs text-red-600",children:k}):N.length===0?e.jsx("div",{className:"p-2 text-xs text-gray-500",children:"No employees found."}):N.map(J=>e.jsxs("div",{className:"p-2 text-xs cursor-pointer hover:bg-blue-50",onClick:()=>C(J),children:[e.jsx("span",{className:"font-medium text-gray-900",children:J.full_name})," ",e.jsxs("span",{className:"text-gray-500",children:["(",J.employee_id,")"]}),J.job_title&&e.jsx("span",{className:"ml-2 text-gray-400",children:J.job_title})]},J.employee_id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Capacity"}),e.jsx("input",{type:"number",name:"capacity",value:A.capacity,onChange:B,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 40",min:"1"})]})]})}),e.jsx("div",{className:"flex justify-start",children:e.jsx("button",{type:"submit",disabled:s,className:`px-6 py-2 text-xs font-medium text-white ${s?"bg-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-800"}`,children:s?"Creating...":"Create Class"})})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-green-100 mb-4",children:e.jsx(I,{icon:Hn,className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Class Created Successfully"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"The gradelevel class has been added to the system successfully."}),e.jsx("button",{onClick:V,className:"px-4 py-2 bg-gray-700 text-white text-xs hover:bg-gray-800",children:"Continue"})]})})}),m&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-red-100 mb-4",children:e.jsx(I,{icon:Ma,className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Creating Class"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:p.message}),e.jsx("button",{onClick:Y,className:"px-4 py-2 bg-red-600 text-white text-xs hover:bg-red-700",children:"Close"})]})})})]})},Wle=()=>{const{token:t}=At(),{id:a}=Tn(),r=Da(),[s,n]=x.useState([]),[i,o]=x.useState(!1),[c,u]=x.useState(!0),[m,h]=x.useState(""),[p,y]=x.useState(!1),[g,v]=x.useState(!1),[N,w]=x.useState({}),[j,T]=x.useState(""),[k,R]=x.useState([]),[P,$]=x.useState(!1),[A,M]=x.useState(""),[_,B]=x.useState(!1),[D,C]=x.useState({stream_id:"",name:"",homeroom_teacher_employee_number:"",capacity:""});x.useEffect(()=>{L(),H()},[a]),x.useEffect(()=>{const G=setTimeout(()=>{j.trim().length>=2?V(j.trim()):(R([]),M(""))},300);return()=>clearTimeout(G)},[j]);const L=async()=>{try{const G=await re.get(`${se}/classes/streams`,{headers:{Authorization:`Bearer ${t}`}});G.data.success&&n(G.data.data)}catch(G){console.error("Error fetching streams:",G)}},H=async()=>{try{u(!0);const G=await re.get(`${se}/classes/gradelevel-classes/${a}`,{headers:{Authorization:`Bearer ${t}`}});if(G.data.success){const z=G.data.data;C({stream_id:z.stream_id||"",name:z.name||"",homeroom_teacher_employee_number:z.homeroom_teacher_employee_number||"",capacity:z.capacity||""}),z.teacher_name&&T(`${z.teacher_name} (${z.homeroom_teacher_employee_number})`)}else h("Failed to load class information.")}catch{h("Failed to load class information.")}finally{u(!1)}},V=async G=>{try{$(!0),M("");const z=await re.get(`${se}/employees/search?q=${encodeURIComponent(G)}`,{headers:{Authorization:`Bearer ${t}`}});z.data.success?R(z.data.data):M("Failed to search employees")}catch{M("Failed to search employees")}finally{$(!1)}},Y=G=>{const{name:z,value:Z}=G.target;C(Q=>({...Q,[z]:Z}))},J=G=>{T(G.target.value),B(!0)},W=G=>{C(z=>({...z,homeroom_teacher_employee_number:G.employee_id})),T(`${G.full_name} (${G.employee_id})`),B(!1)},X=()=>D.stream_id?D.name.trim()?D.capacity&&isNaN(Number(D.capacity))?(h("Capacity must be a number"),!1):!0:(h("Class name is required"),!1):(h("Stream is required"),!1),te=async G=>{if(G.preventDefault(),h(""),!!X())try{o(!0);const z={...D,capacity:D.capacity?Number(D.capacity):null,homeroom_teacher_employee_number:D.homeroom_teacher_employee_number||null};(await re.put(`${se}/classes/gradelevel-classes/${a}`,z,{headers:{Authorization:`Bearer ${t}`}})).data.success&&y(!0)}catch(z){z.response?.data?.message?(w({message:z.response.data.message}),v(!0)):h("Failed to update class")}finally{o(!1)}},oe=()=>{y(!1),r("/dashboard/classes")},q=()=>{v(!1),w({})};return c?e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(I,{icon:fs,spin:!0,className:"h-8 w-8 text-gray-400 mb-4"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Loading class information..."})]})})}):e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("button",{onClick:()=>r("/dashboard/classes"),className:"mr-3 p-2 text-gray-400 hover:text-gray-600",title:"Back to Classes",children:e.jsx(I,{icon:fm,className:"h-4 w-4"})}),e.jsxs("h1",{className:"text-lg font-bold text-gray-900 flex items-center",children:[e.jsx(I,{icon:Aa,className:"mr-2 h-5 w-5 text-gray-400"}),"Edit Gradelevel Class"]})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Update the gradelevel class information."})]}),m&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 p-3",children:e.jsx("div",{className:"text-xs text-red-600",children:m})}),e.jsxs("form",{onSubmit:te,className:"space-y-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-6 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Stream ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"stream_id",value:D.stream_id,onChange:Y,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Stream"}),s.map(G=>e.jsxs("option",{value:G.id,children:[G.name," (",G.stage,")"]},G.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Class Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:D.name,onChange:Y,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 1A, 2B, Form 1",required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Homeroom Teacher ",e.jsx("span",{className:"text-gray-400",children:"(search by name or ID)"})]}),e.jsx("input",{type:"text",name:"homeroom_teacher_search",value:j,onChange:J,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Type to search...",autoComplete:"off",onFocus:()=>B(!0)}),_&&j&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded shadow max-h-48 overflow-y-auto",children:P?e.jsxs("div",{className:"p-2 text-xs text-gray-500 flex items-center",children:[e.jsx(I,{icon:fs,spin:!0,className:"mr-2"}),"Searching..."]}):A?e.jsx("div",{className:"p-2 text-xs text-red-600",children:A}):k.length===0?e.jsx("div",{className:"p-2 text-xs text-gray-500",children:"No employees found."}):k.map(G=>e.jsxs("div",{className:"p-2 text-xs cursor-pointer hover:bg-blue-50",onClick:()=>W(G),children:[e.jsx("span",{className:"font-medium text-gray-900",children:G.full_name})," ",e.jsxs("span",{className:"text-gray-500",children:["(",G.employee_id,")"]}),G.job_title&&e.jsx("span",{className:"ml-2 text-gray-400",children:G.job_title})]},G.employee_id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Capacity"}),e.jsx("input",{type:"number",name:"capacity",value:D.capacity,onChange:Y,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 40",min:"1"})]})]})}),e.jsxs("div",{className:"flex justify-start space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>r("/dashboard/classes"),className:"px-6 py-2 text-xs font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:`px-6 py-2 text-xs font-medium text-white ${i?"bg-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-800"}`,children:i?"Updating...":"Update Class"})]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-green-100 mb-4",children:e.jsx(I,{icon:Hn,className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Class Updated Successfully"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"The gradelevel class has been updated successfully."}),e.jsx("button",{onClick:oe,className:"px-4 py-2 bg-gray-700 text-white text-xs hover:bg-gray-800",children:"Continue"})]})})}),g&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-red-100 mb-4",children:e.jsx(I,{icon:Ma,className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Updating Class"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:N.message}),e.jsx("button",{onClick:q,className:"px-4 py-2 bg-red-600 text-white text-xs hover:bg-red-700",children:"Close"})]})})})]})},Hle=({classId:t})=>{const{token:a}=At(),[r,s]=x.useState([]),[n,i]=x.useState(!0),[o,c]=x.useState(""),[u,m]=x.useState(!1),[h,p]=x.useState(""),[y,g]=x.useState([]),[v,N]=x.useState(!1),[w,j]=x.useState(""),[T,k]=x.useState(null),[R,P]=x.useState(""),[$,A]=x.useState(null),[M,_]=x.useState(null),[B,D]=x.useState("");x.useEffect(()=>{C()},[t]);const C=async()=>{i(!0),c("");try{const Y=await re.get(`${se}/classes/gradelevel-enrollments`,{params:{gradelevel_class_id:t},headers:{Authorization:`Bearer ${a}`}});Y.data.success?s(Y.data.data||[]):c("Failed to load students.")}catch{c("Failed to load students.")}finally{i(!1)}},L=async Y=>{Y.preventDefault(),N(!0),j(""),g([]);try{const J=await re.get(`${se}/students/search`,{params:{query:h},headers:{Authorization:`Bearer ${a}`}});J.data.success?g(J.data.data||[]):j("Failed to search students.")}catch{j("Failed to search students.")}finally{N(!1)}},H=async Y=>{k(Y.RegNumber),P("");try{const J=await re.post(`${se}/classes/gradelevel-enrollments`,{student_regnumber:Y.RegNumber,gradelevel_class_id:t},{headers:{Authorization:`Bearer ${a}`}});J.data.success?(m(!1),p(""),g([]),C()):P(J.data.message||"Failed to add student.")}catch(J){P(J.response?.data?.message||"Failed to add student.")}finally{k(null)}},V=async Y=>{A(Y.id),D("");try{await re.delete(`${se}/classes/gradelevel-enrollments/${Y.id}`,{headers:{Authorization:`Bearer ${a}`}}),C(),_(null)}catch{D("Failed to de-enroll student.")}finally{A(null)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-sm text-gray-700 flex items-center",children:[e.jsx(I,{icon:Js,className:"mr-2 h-4 w-4 text-gray-400"}),"Students Enrolled"]}),e.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium text-white bg-gray-900  hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(I,{icon:Ht,className:"mr-1 h-3 w-3"}),"Add Student"]})]}),n?e.jsx("div",{className:"text-xs text-gray-500",children:"Loading students..."}):o?e.jsx("div",{className:"text-xs text-red-600",children:o}):r.length===0?e.jsx("div",{className:"text-xs text-gray-500",children:"No students enrolled in this class."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Student Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Student ID"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(Y=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap",children:[Y.Name," ",Y.Surname]}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:Y.RegNumber}),e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap",children:[e.jsxs("button",{onClick:()=>_(Y.id),className:"inline-flex items-center px-2 py-1 text-xs text-red-600 hover:text-white border border-red-200 hover:bg-red-600 rounded",disabled:$===Y.id,children:[e.jsx(I,{icon:sa,className:"h-3 w-3 mr-1"}),"De-enroll"]}),M===Y.id&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded shadow w-full max-w-md",children:[e.jsx("div",{className:"text-base text-gray-900 mb-4",children:"Are you sure you want to de-enroll this student?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>_(null),className:"px-5 py-2 text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsxs("button",{onClick:()=>V(Y),className:"px-5 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 flex items-center",disabled:$===Y.id,children:[$===Y.id?e.jsx(I,{icon:fs,spin:!0,className:"h-4 w-4 mr-2"}):e.jsx(I,{icon:sa,className:"h-4 w-4 mr-2"}),"De-enroll"]})]})]})})]})]},Y.RegNumber))})]})}),u&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded shadow w-full max-w-2xl",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Add Student to Class"}),e.jsxs("form",{onSubmit:L,className:"mb-4",children:[e.jsxs("div",{className:"flex mb-2",children:[e.jsx("input",{type:"text",value:h,onChange:Y=>p(Y.target.value),placeholder:"Search by registration number, first name, or surname",className:"flex-1 px-3 py-2 border border-gray-300 text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),e.jsxs("button",{type:"submit",className:"ml-2 px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 flex items-center",disabled:v,children:[v?e.jsx(I,{icon:fs,spin:!0,className:"h-4 w-4"}):e.jsx(I,{icon:ua,className:"h-4 w-4"}),e.jsx("span",{className:"ml-2",children:"Search"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" You can search by registration number, first name, or surname"})]}),w&&e.jsx("div",{className:"text-xs text-red-600 mb-2",children:w}),R&&e.jsx("div",{className:"text-xs text-red-600 mb-2",children:R}),e.jsxs("div",{className:"max-h-80 overflow-y-auto",children:[y.length===0&&!v&&e.jsx("div",{className:"text-xs text-gray-500",children:"No students found."}),y.map(Y=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-sm text-gray-900",children:[Y.Name," ",Y.Surname]}),e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:Y.RegNumber})]}),e.jsxs("button",{onClick:()=>H(Y),className:"ml-2 px-4 py-2 bg-blue-600 text-white text-xs font-medium rounded hover:bg-blue-700 flex items-center",disabled:T===Y.RegNumber,children:[T===Y.RegNumber?e.jsx(I,{icon:fs,spin:!0,className:"h-4 w-4"}):e.jsx(I,{icon:Ht,className:"h-4 w-4"}),e.jsx("span",{className:"ml-2",children:"Add"})]})]},Y.RegNumber))]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>m(!1),className:"px-5 py-2 text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Close"})})]})})]})},Yle=({classId:t,streamId:a})=>{const{token:r}=At(),[s,n]=x.useState(!1),[i,o]=x.useState({subject_id:"",employee_number:"",capacity:""}),[c,u]=x.useState(""),[m,h]=x.useState([]),[p,y]=x.useState(!1),[g,v]=x.useState(!1),[N,w]=x.useState(""),[j,T]=x.useState([]),[k,R]=x.useState(!1),[P,$]=x.useState(!1),[A,M]=x.useState(!1),[_,B]=x.useState(""),[D,C]=x.useState(!1),[L,H]=x.useState(!1),[V,Y]=x.useState({}),[J,W]=x.useState([]),[X,te]=x.useState(!1),[oe,q]=x.useState(""),[G,z]=x.useState(null),[Z,Q]=x.useState(null),[fe,he]=x.useState("");am.useEffect(()=>{if(!c.trim()){h([]);return}y(!0);const ye=setTimeout(async()=>{try{const Ee=await re.get(`${se}/classes/subjects/search`,{params:{q:c},headers:{Authorization:`Bearer ${r}`}});Ee.data.success&&h(Ee.data.data||[])}catch{h([])}finally{y(!1)}},400);return()=>clearTimeout(ye)},[c,r]),am.useEffect(()=>{if(!N.trim()){T([]);return}R(!0);const ye=setTimeout(async()=>{try{const Ee=await re.get(`${se}/employees/search`,{params:{query:N},headers:{Authorization:`Bearer ${r}`}});Ee.data.success&&T(Ee.data.data||[])}catch{T([])}finally{R(!1)}},400);return()=>clearTimeout(ye)},[N,r]),am.useEffect(()=>{t&&(te(!0),q(""),re.get(`${se}/classes/subject-classes`,{params:{gradelevel_class_id:t},headers:{Authorization:`Bearer ${r}`}}).then(ye=>{ye.data.success?W(ye.data.data||[]):q("Failed to load subject classes.")}).catch(()=>q("Failed to load subject classes.")).finally(()=>te(!1)))},[t,s]);const ne=ye=>{const{name:Ee,value:Ke}=ye.target;o(Re=>({...Re,[Ee]:Ke}))},me=ye=>{u(ye.target.value),v(!0)},pe=ye=>{o(Ee=>({...Ee,subject_id:ye.id})),u(`${ye.name} (${ye.code})`),v(!1)},ie=ye=>{w(ye.target.value),$(!0)},ke=ye=>{o(Ee=>({...Ee,employee_number:ye.employee_id})),w(`${ye.full_name} (${ye.employee_id})`),$(!1)},Ae=()=>i.subject_id?i.employee_number?!0:(B("Teacher is required"),!1):(B("Subject is required"),!1),ae=async ye=>{if(ye.preventDefault(),B(""),!!Ae())try{M(!0);const Ee={...i,gradelevel_class_id:t,stream_id:a,capacity:i.capacity?Number(i.capacity):null};(await re.post(`${se}/classes/subject-classes`,Ee,{headers:{Authorization:`Bearer ${r}`}})).data.success&&(C(!0),o({subject_id:"",employee_number:"",capacity:""}),u(""),w(""),n(!1))}catch(Ee){Ee.response?.data?.message?(Y({message:Ee.response.data.message}),H(!0)):B("Failed to create subject class")}finally{M(!1)}},Ne=()=>C(!1),ce=()=>{H(!1),Y({})},De=async ye=>{z(ye.id),he("");try{await re.delete(`${se}/classes/subject-classes/${ye.id}`,{headers:{Authorization:`Bearer ${r}`}}),Q(null),W(Ee=>Ee.filter(Ke=>Ke.id!==ye.id))}catch{he("Failed to delete subject class.")}finally{z(null)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-sm text-gray-700 flex items-center",children:[e.jsx(I,{icon:Zc,className:"mr-2 h-4 w-4 text-gray-400"}),"Subject Classes"]}),e.jsxs("button",{onClick:()=>n(!0),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(I,{icon:Ht,className:"mr-1 h-3 w-3"}),"Add Subject Class"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-900 mb-2",children:"Subject Classes"}),X?e.jsx("div",{className:"text-xs text-gray-500",children:"Loading subject classes..."}):oe?e.jsx("div",{className:"text-xs text-red-600",children:oe}):J.length===0?e.jsx("div",{className:"text-xs text-gray-500",children:"No subject classes found for this class."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Subject Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Code"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Teacher"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Capacity"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:J.map(ye=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ye.subject_name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ye.subject_code}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ye.employee_number||"-"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ye.capacity||"Unlimited"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ss,{to:`/dashboard/classes/subject-classes/view/${ye.id}`,className:"text-blue-600 hover:text-blue-900",title:"View",children:"View"}),e.jsx("button",{className:"text-red-600 hover:text-red-900",title:"Delete",onClick:()=>Q(ye.id),children:"Delete"}),Z===ye.id&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded shadow w-full max-w-md",children:[e.jsx("div",{className:"text-base text-gray-900 mb-4",children:"Are you sure you want to delete this subject class?"}),fe&&e.jsx("div",{className:"text-xs text-red-600 mb-2",children:fe}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>Q(null),className:"px-5 py-2 text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsxs("button",{onClick:()=>De(ye),className:"px-5 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 flex items-center",disabled:G===ye.id,children:[G===ye.id?e.jsx(I,{icon:fs,spin:!0,className:"h-4 w-4 mr-2"}):null,"Delete"]})]})]})})]})})]},ye.id))})]})})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded shadow w-full max-w-2xl",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Add Subject Class"}),_&&e.jsx("div",{className:"mb-2 bg-red-50 border border-red-200 p-2 text-xs text-red-600",children:_}),e.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Subject ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"subject_search",value:c,onChange:me,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Type to search...",autoComplete:"off",onFocus:()=>v(!0)}),g&&c&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded shadow max-h-48 overflow-y-auto",children:p?e.jsxs("div",{className:"p-2 text-xs text-gray-500 flex items-center",children:[e.jsx(I,{icon:fs,spin:!0,className:"mr-2"}),"Searching..."]}):m.length===0?e.jsx("div",{className:"p-2 text-xs text-gray-500",children:"No subjects found."}):m.map(ye=>e.jsxs("div",{className:"p-2 text-xs cursor-pointer hover:bg-blue-50",onClick:()=>pe(ye),children:[e.jsx("span",{className:"font-medium text-gray-900",children:ye.name})," ",e.jsxs("span",{className:"text-gray-500",children:["(",ye.code,")"]})]},ye.id))})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Teacher ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"teacher_search",value:N,onChange:ie,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Type to search...",autoComplete:"off",onFocus:()=>$(!0)}),P&&N&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded shadow max-h-48 overflow-y-auto",children:k?e.jsxs("div",{className:"p-2 text-xs text-gray-500 flex items-center",children:[e.jsx(I,{icon:fs,spin:!0,className:"mr-2"}),"Searching..."]}):j.length===0?e.jsx("div",{className:"p-2 text-xs text-gray-500",children:"No employees found."}):j.map(ye=>e.jsxs("div",{className:"p-2 text-xs cursor-pointer hover:bg-blue-50",onClick:()=>ke(ye),children:[e.jsx("span",{className:"font-medium text-gray-900",children:ye.full_name})," ",e.jsxs("span",{className:"text-gray-500",children:["(",ye.employee_id,")"]}),ye.job_title&&e.jsx("span",{className:"ml-2 text-gray-400",children:ye.job_title})]},ye.employee_id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Capacity"}),e.jsx("input",{type:"number",name:"capacity",value:i.capacity,onChange:ne,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 40",min:"1"})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-5 py-2 text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300 mr-2",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:A,className:`px-6 py-2 text-xs font-medium text-white ${A?"bg-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-800"}`,children:A?"Creating...":"Create Subject Class"})]})]})]})}),D&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-green-100 mb-4",children:e.jsx(I,{icon:Hn,className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Subject Class Created Successfully"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"The subject class has been added to the system successfully."}),e.jsx("button",{onClick:Ne,className:"px-4 py-2 bg-gray-700 text-white text-xs hover:bg-gray-800",children:"Continue"})]})})}),L&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 bg-red-100 mb-4",children:e.jsx(I,{icon:Ma,className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Creating Subject Class"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:V.message}),e.jsx("button",{onClick:ce,className:"px-4 py-2 bg-red-600 text-white text-xs hover:bg-red-700",children:"Close"})]})})})]})},Gle=()=>{const{token:t}=At(),{id:a}=Tn(),[r,s]=x.useState("students"),[n,i]=x.useState(null),[o,c]=x.useState(!0),[u,m]=x.useState("");x.useEffect(()=>{h()},[a]);const h=async()=>{c(!0),m("");try{const y=await re.get(`${se}/classes/gradelevel-classes/${a}`,{headers:{Authorization:`Bearer ${t}`}});y.data.success?i(y.data.data):m("Failed to load class information.")}catch{m("Failed to load class information.")}finally{c(!1)}},p=()=>{if(o)return e.jsx("div",{className:"text-xs text-gray-500",children:"Loading..."});if(u)return e.jsx("div",{className:"text-xs text-red-600",children:u});if(!n)return e.jsx("div",{className:"text-xs text-gray-500",children:"No data found."});switch(r){case"students":return e.jsx(Hle,{classId:n.id});case"subjectclasses":return e.jsx(Yle,{classId:n.id,streamId:n.stream_id});default:return null}};return e.jsxs("div",{className:"",children:[o?e.jsx("div",{className:"text-xs text-gray-500 mb-4",children:"Loading..."}):u?e.jsx("div",{className:"text-xs text-red-600 mb-4",children:u}):n?e.jsx("div",{className:"mb-6  border-b border-gray-200",children:e.jsxs("div",{className:"px-6 pt-2 pb-2",children:[e.jsx("div",{className:"text-xl text-gray-900 font-semibold mb-1",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:[n.stream_name," (",n.stream_stage,")"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-8 text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[e.jsx(I,{icon:DB,className:"mr-2 h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Teacher:"}),e.jsx("span",{className:"ml-1 text-gray-900",children:n.teacher_name||"Not Assigned"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Capacity:"}),e.jsx("span",{className:"ml-1 text-gray-900",children:n.capacity||"Unlimited"})]})]})]})}):null,e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8 px-6",children:[e.jsxs("button",{onClick:()=>s("students"),className:`py-3 text-sm font-medium border-b-2 transition-colors duration-150 ${r==="students"?"border-gray-700 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(I,{icon:Cr,className:"mr-2 h-4 w-4"}),"Students"]}),e.jsxs("button",{onClick:()=>s("subjectclasses"),className:`py-3 text-sm font-medium border-b-2 transition-colors duration-150 ${r==="subjectclasses"?"border-gray-700 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(I,{icon:Zc,className:"mr-2 h-4 w-4"}),"Subject Classes"]})]})}),e.jsx("div",{className:"px-0 md:px-6",children:p()})]})},Vle=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState(null),[i,o]=x.useState(null),[c,u]=x.useState(!1),[m,h]=x.useState({new_term:"",new_academic_year:""}),[p,y]=x.useState("close"),g=k=>{const{name:R,value:P}=k.target;h($=>({...$,[R]:P}))},v=async()=>{try{r(!0),n(null),o(null);const k=t?{Authorization:`Bearer ${t}`}:{},R=await re.post(`${se}/close-to-term/close-to-term`,{},{headers:k});o(`Close to Term completed successfully! ${R.data.data.closed_count} enrollments closed.`),u(!1)}catch(k){console.error("Error closing term:",k),n(k.response?.data?.message||"Failed to close term"),u(!1)}finally{r(!1)}},N=async()=>{if(!m.new_term||!m.new_academic_year){n("Please enter both term and academic year");return}try{r(!0),n(null),o(null);const k=t?{Authorization:`Bearer ${t}`}:{},R=await re.post(`${se}/close-to-term/open-to-term`,m,{headers:k});o(`Open to Term completed successfully! ${R.data.data.classes_updated} classes updated.`),u(!1),h({new_term:"",new_academic_year:""})}catch(k){console.error("Error opening term:",k),n(k.response?.data?.message||"Failed to open term"),u(!1)}finally{r(!1)}},w=()=>{u(!1)},j=()=>{if(p==="open"&&(!m.new_term||!m.new_academic_year)){n("Please enter both term and academic year");return}u(!0)},T=()=>{p==="close"?v():N()};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Term Management"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Close current term or open to next term"})]})})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>y("close"),className:`py-2 px-1 border-b-2 font-medium text-xs ${p==="close"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Close to Term"}),e.jsx("button",{onClick:()=>y("open"),className:`py-2 px-1 border-b-2 font-medium text-xs ${p==="open"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Open to Term"})]})})}),e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white border border-gray-200 shadow",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:p==="close"?"Close to Term":"Open to Term"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:p==="close"?"De-enroll all students from current term (no balance changes)":"Move classes to next term and academic year"})]}),e.jsxs("div",{className:"p-4",children:[i&&e.jsxs("div",{className:"mb-4 p-3 bg-green-100 border border-green-200 text-green-700 text-xs",children:[e.jsx(I,{icon:cr,className:"mr-2"}),i]}),s&&e.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 text-xs",children:[e.jsx(I,{icon:Ma,className:"mr-2"}),s]}),e.jsxs("div",{className:"space-y-4",children:[p==="close"?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"This will close ALL active enrollments (both gradelevel and subject classes). No balance changes will be made."})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"New Term *"}),e.jsx("input",{type:"text",name:"new_term",value:m.new_term,onChange:g,placeholder:"e.g., Term 1, Term 2, Term 3",required:!0,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"New Academic Year *"}),e.jsx("input",{type:"text",name:"new_academic_year",value:m.new_academic_year,onChange:g,placeholder:"e.g., 2025, 2026",required:!0,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:j,disabled:a||p==="open"&&(!m.new_term||!m.new_academic_year),className:"flex-1 px-4 py-2 bg-orange-600 text-white hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed text-xs font-medium flex items-center justify-center",children:[a?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):e.jsx(I,{icon:Dh,className:"mr-2"}),a?"Processing...":p==="close"?"Close to Term":"Open to Term"]})})]})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-base font-bold text-gray-900",children:["Confirm ",p==="close"?"Close to Term":"Open to Term"]}),e.jsx("button",{onClick:w,className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt})})]}),e.jsxs("div",{className:"mb-4 p-3 bg-orange-50 border border-orange-200 rounded",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(I,{icon:Ma,className:"text-orange-600 text-xs mr-2"}),e.jsx("span",{className:"text-xs font-medium text-orange-800",children:"Warning"})]}),e.jsx("p",{className:"text-xs text-orange-700",children:p==="close"?e.jsx(e.Fragment,{children:"Are you sure you want to close ALL active enrollments? This will de-enroll all students from both gradelevel and subject classes. This action will NOT affect student balances."}):e.jsxs(e.Fragment,{children:["Are you sure you want to set all classes to ",e.jsxs("strong",{children:[m.new_term," ",m.new_academic_year]}),"? This will update the class term year for all gradelevel and subject classes."]})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:w,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 text-xs font-medium rounded",children:"Cancel"}),e.jsxs("button",{onClick:T,disabled:a,className:"px-4 py-2 bg-orange-600 text-white hover:bg-orange-700 disabled:opacity-50 text-xs font-medium rounded flex items-center",children:[a?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):e.jsx(I,{icon:Dh,className:"mr-2"}),a?"Processing...":`Yes, ${p==="close"?"Close to Term":"Open to Term"}`]})]})]})})]})})},Kle=({subjectClassId:t,gradelevelClassId:a})=>{const{token:r}=At(),[s,n]=x.useState([]),[i,o]=x.useState(!0),[c,u]=x.useState(""),[m,h]=x.useState(!1),[p,y]=x.useState(""),[g,v]=x.useState([]),[N,w]=x.useState(!1),[j,T]=x.useState(""),[k,R]=x.useState(null),[P,$]=x.useState(""),[A,M]=x.useState(null),[_,B]=x.useState(null),[D,C]=x.useState("");x.useEffect(()=>{t&&L()},[t]);const L=async()=>{o(!0),u("");try{const J=await re.get(`${se}/classes/subject-enrollments`,{params:{subject_class_id:t},headers:{Authorization:`Bearer ${r}`}});J.data.success?n(J.data.data||[]):u("Failed to load students.")}catch{u("Failed to load students.")}finally{o(!1)}},H=async J=>{J.preventDefault(),w(!0),T(""),v([]);try{const W=await re.get(`${se}/students/search`,{params:{query:p},headers:{Authorization:`Bearer ${r}`}});W.data.success?v(W.data.data||[]):T("Failed to search students.")}catch{T("Failed to search students.")}finally{w(!1)}},V=async J=>{R(J.RegNumber),$("");try{const W=await re.post(`${se}/classes/subject-enrollments`,{student_regnumber:J.RegNumber,subject_class_id:t,gradelevel_class_id:a},{headers:{Authorization:`Bearer ${r}`}});W.data.success?(h(!1),y(""),v([]),L()):$(W.data.message||"Failed to enroll student.")}catch(W){$(W.response?.data?.message||"Failed to enroll student.")}finally{R(null)}},Y=async J=>{M(J.id),C("");try{await re.delete(`${se}/classes/subject-enrollments/${J.id}`,{headers:{Authorization:`Bearer ${r}`}}),L(),B(null)}catch{C("Failed to de-enroll student.")}finally{M(null)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-sm text-gray-700 flex items-center",children:[e.jsx(I,{icon:Js,className:"mr-2 h-4 w-4 text-gray-400"}),"Students Enrolled"]}),e.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(I,{icon:Ht,className:"mr-1 h-3 w-3"}),"Enroll Student"]})]}),i?e.jsx("div",{className:"text-xs text-gray-500",children:"Loading students..."}):c?e.jsx("div",{className:"text-xs text-red-600",children:c}):s.length===0?e.jsx("div",{className:"text-xs text-gray-500",children:"No students enrolled in this subject class."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Student Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Student ID"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(J=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap",children:[J.Name," ",J.Surname]}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:J.RegNumber}),e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap",children:[e.jsxs("button",{onClick:()=>B(J.id),className:"inline-flex items-center px-2 py-1 text-xs text-red-600 hover:text-white border border-red-200 hover:bg-red-600 rounded",disabled:A===J.id,children:[e.jsx(I,{icon:sa,className:"h-3 w-3 mr-1"}),"De-enroll"]}),_===J.id&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded shadow w-full max-w-md",children:[e.jsx("div",{className:"text-base text-gray-900 mb-4",children:"Are you sure you want to de-enroll this student?"}),D&&e.jsx("div",{className:"text-xs text-red-600 mb-2",children:D}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>B(null),className:"px-5 py-2 text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300",disabled:A===J.id,children:"Cancel"}),e.jsxs("button",{onClick:()=>Y(J),className:"px-5 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 flex items-center",disabled:A===J.id,children:[A===J.id?e.jsx(I,{icon:fs,spin:!0,className:"h-4 w-4 mr-2"}):e.jsx(I,{icon:sa,className:"h-4 w-4 mr-2"}),"De-enroll"]})]})]})})]})]},J.RegNumber))})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded shadow w-full max-w-2xl relative",children:[k&&e.jsxs("div",{className:"absolute inset-0 bg-white bg-opacity-70 flex items-center justify-center z-50",children:[e.jsx(I,{icon:fs,spin:!0,className:"h-8 w-8 text-gray-700"}),e.jsx("span",{className:"ml-3 text-gray-700 text-sm",children:"Enrolling..."})]}),e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Enroll Student in Subject Class"}),e.jsxs("form",{onSubmit:H,className:"flex mb-4",children:[e.jsx("input",{type:"text",value:p,onChange:J=>y(J.target.value),placeholder:"Search by name or reg number...",className:"flex-1 px-3 py-2 border border-gray-300 text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:!!k}),e.jsxs("button",{type:"submit",className:"ml-2 px-4 py-2 bg-gray-900 text-white text-sm font-medium rounded hover:bg-gray-800 flex items-center",disabled:N||!!k,children:[N?e.jsx(I,{icon:fs,spin:!0,className:"h-4 w-4"}):e.jsx(I,{icon:ua,className:"h-4 w-4"}),e.jsx("span",{className:"ml-2",children:"Search"})]})]}),j&&e.jsx("div",{className:"text-xs text-red-600 mb-2",children:j}),P&&e.jsx("div",{className:"text-xs text-red-600 mb-2",children:P}),e.jsxs("div",{className:"max-h-80 overflow-y-auto",children:[g.length===0&&!N&&e.jsx("div",{className:"text-xs text-gray-500",children:"No students found."}),g.map(J=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-sm text-gray-900",children:[J.Name," ",J.Surname]}),e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:J.RegNumber})]}),e.jsxs("button",{onClick:()=>V(J),className:"ml-2 px-4 py-2 bg-blue-600 text-white text-xs font-medium rounded hover:bg-blue-700 flex items-center",disabled:!!k,children:[k===J.RegNumber?e.jsx(I,{icon:fs,spin:!0,className:"h-4 w-4"}):e.jsx(I,{icon:Ht,className:"h-4 w-4"}),e.jsx("span",{className:"ml-2",children:"Enroll"})]})]},J.RegNumber))]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>h(!1),className:"px-5 py-2 text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300",disabled:!!k,children:"Close"})})]})})]})},Xle=()=>{const{token:t}=At(),{id:a}=Tn();Da();const[r,s]=x.useState(null),[n,i]=x.useState(!0),[o,c]=x.useState(""),[u,m]=x.useState("students");x.useEffect(()=>{h()},[a]);const h=async()=>{i(!0),c("");try{const y=await re.get(`${se}/classes/subject-classes/${a}`,{headers:{Authorization:`Bearer ${t}`}});y.data.success?s(y.data.data):c("Failed to load subject class information.")}catch{c("Failed to load subject class information.")}finally{i(!1)}},p=()=>{if(n)return e.jsx("div",{className:"text-xs text-gray-500",children:"Loading..."});if(o)return e.jsx("div",{className:"text-xs text-red-600",children:o});if(!r)return e.jsx("div",{className:"text-xs text-gray-500",children:"No data found."});switch(u){case"students":default:return e.jsx(Kle,{subjectClassId:r.id,gradelevelClassId:r.gradelevel_class_id})}};return e.jsxs("div",{className:"px-0 py-1 w-full",children:[e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsxs("div",{className:"pt-2 pb-2",children:[e.jsxs("div",{className:" text-gray-900 font-semibold mb-1 flex items-center",children:[e.jsx(I,{icon:Zc,className:"mr-2 h-5 w-5 text-gray-400"}),"Subject Class Information"]}),r&&e.jsx("div",{className:"border border-gray-200 p-4 mt-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Subject Name"}),e.jsx("div",{className:"text-sm text-gray-900",children:r.subject_name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Subject Code"}),e.jsx("div",{className:"text-sm text-gray-900",children:r.subject_code})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Stream"}),e.jsxs("div",{className:"text-sm text-gray-900",children:[r.stream_name," (",r.stream_stage,")"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Gradelevel Class"}),e.jsx("div",{className:"text-sm text-gray-900",children:r.gradelevel_class_name||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Teacher"}),e.jsx("div",{className:"text-sm text-gray-900",children:r.teacher_name||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Capacity"}),e.jsx("div",{className:"text-sm text-gray-900",children:r.capacity||"Unlimited"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Syllabus"}),e.jsx("div",{className:"text-sm text-gray-900",children:r.subject_syllabus||"-"})]})]})})]})}),e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:e.jsxs("button",{onClick:()=>m("students"),className:`py-3 text-xs font-medium border-b-2 transition-colors duration-150 ${u==="students"?"border-gray-700 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(I,{icon:Cr,className:"mr-2 h-4 w-4"}),"Students"]})})}),e.jsx("div",{className:"px-0 md:px-6",children:p()})]})},Jle=["Asset","Liability","Equity","Revenue","Expense"],Zle={Asset:"1",Liability:"2",Equity:"3",Revenue:"4",Expense:"5"},Qle=()=>{const{token:t}=At(),[a,r]=x.useState([]),[s,n]=x.useState([]),[i,o]=x.useState(!0),[c,u]=x.useState(""),[m,h]=x.useState(!1),[p,y]=x.useState(!1),[g,v]=x.useState(!1),[N,w]=x.useState(!1),[j,T]=x.useState(null),[k,R]=x.useState(null),[P,$]=x.useState([]),[A,M]=x.useState([]),[_,B]=x.useState(!1),[D,C]=x.useState({current_page:1,total_pages:1,total_records:0,limit:25}),[L,H]=x.useState({search:"",startDate:"",endDate:"",transactionType:""}),[V,Y]=x.useState(null),[J,W]=x.useState({code:"",name:"",type:"",parent_id:"",is_active:!0}),[X,te]=x.useState({account_id:"",amount:"",balance_type:"debit",description:"",reference:"",opening_balance_date:new Date().toISOString().split("T")[0],currency_id:1}),[oe,q]=x.useState(!1),[G,z]=x.useState(!1),[Z,Q]=x.useState(""),[fe,he]=x.useState(""),[ne,me]=x.useState("");x.useEffect(()=>{ie(),pe()},[]);const pe=async()=>{try{const $e=await re.get(`${se}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}});if($e.data.success){const ct=$e.data.data||[];n(ct);const Nt=ct.find(jt=>jt.base_currency)||ct[0];Nt&&te(jt=>({...jt,currency_id:Nt.id}))}}catch($e){console.error("Error loading currencies:",$e)}};x.useEffect(()=>{if(!J.type){W(jt=>({...jt,code:""}));return}const $e=Zle[J.type],ct=a.filter(jt=>jt.type===J.type&&jt.code&&jt.code.startsWith($e)).map(jt=>parseInt(jt.code,10)).filter(jt=>!isNaN(jt));let Nt;ct.length===0?Nt=$e+"000":Nt=(Math.max(...ct)+1).toString(),W(jt=>({...jt,code:Nt}))},[J.type,a]);const ie=async()=>{o(!0),u("");try{const $e=await re.get(`${se}/accounting/chart-of-accounts`,{headers:{Authorization:`Bearer ${t}`}});$e.data.success?r($e.data.data||[]):u("Failed to load accounts.")}catch{u("Failed to load accounts.")}finally{o(!1)}},ke=$e=>{const{name:ct,value:Nt,type:jt,checked:xt}=$e.target;W(we=>({...we,[ct]:jt==="checkbox"?xt:Nt}))},Ae=async $e=>{$e.preventDefault(),q(!0),Q("");try{const ct={...J,parent_id:J.parent_id||null,is_active:!!J.is_active},Nt=await re.post(`${se}/accounting/chart-of-accounts`,ct,{headers:{Authorization:`Bearer ${t}`}});Nt.data.success?(h(!1),W({code:"",name:"",type:"",parent_id:"",is_active:!0}),ie()):Q(Nt.data.message||"Failed to add account.")}catch(ct){Q(ct.response?.data?.message||"Failed to add account.")}finally{q(!1)}},ae=$e=>{Y($e);const ct=$e.type==="Asset"||$e.type==="Expense"?"debit":"credit";te({account_id:$e.id,amount:"",balance_type:ct,description:`Opening Balance - ${$e.name} (${$e.code})`,reference:`OB-${$e.code}-${Date.now()}`,opening_balance_date:new Date().toISOString().split("T")[0],currency_id:s.find(Nt=>Nt.base_currency)?.id||s[0]?.id||1}),he(""),me(""),y(!0)},Ne=$e=>{const{name:ct,value:Nt}=$e.target;te(jt=>({...jt,[ct]:Nt}))},ce=async $e=>{$e.preventDefault(),z(!0),he(""),me("");try{const ct={...X,amount:parseFloat(X.amount)},Nt=await re.post(`${se}/accounting/chart-of-accounts/opening-balance`,ct,{headers:{Authorization:`Bearer ${t}`}});Nt.data.success?(me("Opening balance created successfully!"),y(!1),te({account_id:"",amount:"",balance_type:"debit",description:"",reference:"",opening_balance_date:new Date().toISOString().split("T")[0],currency_id:1}),setTimeout(()=>me(""),3e3)):he(Nt.data.message||"Failed to create opening balance.")}catch(ct){he(ct.response?.data?.message||"Failed to create opening balance.")}finally{z(!1)}},De=async $e=>{v(!0),w(!0),T(null),R(null),$([]),M([]),C({current_page:1,total_pages:1,total_records:0,limit:25}),H({search:"",startDate:"",endDate:"",transactionType:""});try{const Nt=(await re.get(`${se}/accounting/chart-of-accounts/${$e}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data.data;if(T(Nt),Nt.parent_id)try{const xt=await re.get(`${se}/accounting/chart-of-accounts/${Nt.parent_id}`,{headers:{Authorization:`Bearer ${t}`}});xt.data.success&&R(xt.data.data)}catch(xt){console.error("Error fetching parent account:",xt)}const jt=await re.get(`${se}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}});if(jt.data.success){const xt=jt.data.data||[],we=await Promise.all(xt.map(async Ie=>{try{const dt=await re.get(`${se}/accounting/account-balances/${$e}?currency_id=${Ie.id}`,{headers:{Authorization:`Bearer ${t}`}});return{currency:Ie,balance:dt.data.data?dt.data.data.balance:0,as_of_date:dt.data.data?dt.data.data.as_of_date:""}}catch{return{currency:Ie,balance:0,as_of_date:""}}}));$(we)}await Ee($e,1,{search:"",startDate:"",endDate:"",transactionType:""})}catch(ct){console.error("Error fetching account:",ct)}finally{w(!1)}},ye=($e,ct)=>{const Nt={...L,[$e]:ct};H(Nt),C(jt=>({...jt,current_page:1})),j&&setTimeout(()=>{Ee(j.id,1,Nt)},0)},Ee=async($e,ct=1,Nt=null)=>{B(!0);try{const jt={page:ct,limit:D.limit,...Nt||L},we=(await re.get(`${se}/accounting/general-ledger/journal-entries/account/${$e}`,{params:jt,headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data;M(we.data||[]),C(Ie=>({...Ie,...we.pagination||{},current_page:ct}))}catch(jt){console.error("Error fetching ledger entries:",jt)}finally{B(!1)}},Ke=$e=>{C(ct=>({...ct,current_page:$e})),j&&Ee(j.id,$e)},Re=()=>{v(!1),T(null),R(null),$([]),M([]),w(!1)},Le=$e=>$e?new Date($e).toLocaleDateString():"N/A",Oe=($e,ct="$")=>`${ct}${parseFloat($e||0).toFixed(2)}`;return e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Chart of Accounts"}),e.jsx("p",{className:"report-subtitle",children:"Manage accounting accounts and structure."})]}),e.jsx("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"},children:e.jsx("button",{onClick:()=>h(!0),className:"btn-checklist",children:"+ Add Account"})})]}),ne&&e.jsx("div",{style:{padding:"10px 30px",background:"#d1fae5",color:"#065f46",fontSize:"0.75rem",flexShrink:0},children:ne}),m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-700 bg-opacity-50",children:e.jsxs("div",{className:"bg-white border border-gray-300 w-full max-w-md p-0",style:{borderRadius:0},children:[e.jsxs("div",{className:"border-b border-gray-200 px-6 py-3 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-800",children:"Add Account"}),e.jsx("button",{className:"text-xs text-gray-500 hover:text-gray-800",onClick:()=>h(!1),style:{borderRadius:0},children:""})]}),e.jsxs("form",{className:"px-6 py-4",onSubmit:Ae,children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"code",value:J.code,readOnly:!0,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 bg-gray-100 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0},required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:J.name,onChange:ke,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0},required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"type",value:J.type,onChange:ke,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0},required:!0,children:[e.jsx("option",{value:"",children:"Select type"}),Jle.map($e=>e.jsx("option",{value:$e,children:$e},$e))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Parent Account"}),e.jsxs("select",{name:"parent_id",value:J.parent_id,onChange:ke,className:"w-full border border-gray-300 px-2 py-1 text-xs text-gray-900 focus:outline-none focus:ring-gray-900 focus:border-gray-900",style:{borderRadius:0},children:[e.jsx("option",{value:"",children:"None"}),a.map($e=>e.jsxs("option",{value:$e.id,children:[$e.code," - ",$e.name]},$e.id))]})]}),e.jsxs("div",{className:"mb-4 flex items-center",children:[e.jsx("input",{type:"checkbox",name:"is_active",checked:J.is_active,onChange:ke,className:"mr-2 border-gray-300 focus:ring-gray-900",style:{borderRadius:0},id:"is_active"}),e.jsx("label",{htmlFor:"is_active",className:"text-xs text-gray-700",children:"Active"})]}),Z&&e.jsx("div",{className:"text-xs text-red-600 mb-2",children:Z}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",className:"px-4 py-2 text-xs font-medium text-gray-800 bg-gray-200 hover:bg-gray-300 border border-gray-300 mr-2",style:{borderRadius:0},onClick:()=>h(!1),disabled:oe,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900",style:{borderRadius:0},disabled:oe,children:oe?"Saving...":"Save"})]})]})]})}),c&&e.jsx("div",{style:{padding:"10px 30px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",flexShrink:0},children:c}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:i?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading accounts..."}):c?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#dc2626",fontSize:"0.75rem"},children:c}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"CODE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"NAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"TYPE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"PARENT"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STATUS"}),e.jsx("th",{style:{padding:"6px 10px",width:"100px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[a.map(($e,ct)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:ct%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px",fontFamily:"monospace"},children:$e.code}),e.jsx("td",{style:{padding:"4px 10px"},children:$e.name}),e.jsx("td",{style:{padding:"4px 10px"},children:$e.type}),e.jsx("td",{style:{padding:"4px 10px"},children:$e.parent_id||"-"}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsx("span",{style:{color:$e.is_active?"var(--text-primary)":"var(--text-secondary)"},children:$e.is_active?"Active":"Inactive"})}),e.jsx("td",{style:{padding:"4px 10px",whiteSpace:"nowrap"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>De($e.id),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0,fontSize:"0.7rem"},title:"View",children:"View"}),e.jsx("button",{onClick:()=>ae($e),style:{color:"#6366f1",background:"none",border:"none",cursor:"pointer",padding:0,fontSize:"0.7rem"},title:"Add Opening Balance",children:"OB"})]})})]},$e.id)),Array.from({length:Math.max(0,25-a.length)}).map(($e,ct)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(a.length+ct)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${ct}`))]})]})}),e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",a.length," account",a.length!==1?"s":"","."]}),e.jsx("div",{className:"table-footer-right",children:e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"All data displayed"})})]}),p&&V&&e.jsx("div",{className:"modal-overlay",onClick:()=>y(!1),children:e.jsxs("div",{className:"modal-dialog",onClick:$e=>$e.stopPropagation(),style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Add Opening Balance"}),e.jsx("button",{className:"modal-close-btn",onClick:()=>y(!1),children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("form",{onSubmit:ce,className:"modal-form",children:[e.jsxs("div",{className:"modal-body",children:[fe&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:fe}),e.jsxs("div",{style:{padding:"12px",background:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"4px",marginBottom:"20px",fontSize:"0.75rem"},children:[e.jsx("p",{style:{fontWeight:600,color:"#92400e",marginBottom:"4px"},children:" Use This ONLY for Opening Balances"}),e.jsx("p",{style:{color:"#78350f",margin:0},children:"This feature is for recording historical balances that existed BEFORE the system was implemented. Do NOT use this for mid-term adjustments."})]}),e.jsxs("div",{style:{padding:"12px",background:"#eff6ff",border:"1px solid #bfdbfe",borderRadius:"4px",marginBottom:"20px",fontSize:"0.75rem"},children:[e.jsxs("div",{style:{marginBottom:"4px"},children:[e.jsx("strong",{children:"Account:"})," ",V.code," - ",V.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",V.type]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Balance Type ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"balance_type",value:X.balance_type,onChange:Ne,className:"form-control",required:!0,children:[e.jsx("option",{value:"debit",children:"Debit"}),e.jsx("option",{value:"credit",children:"Credit"})]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginTop:"4px"},children:V.type==="Asset"||V.type==="Expense"?"Debit = Positive, Credit = Negative":"Credit = Positive, Debit = Negative"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Amount ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"number",name:"amount",value:X.amount,onChange:Ne,step:"0.01",min:"0",className:"form-control",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("select",{name:"currency_id",value:X.currency_id,onChange:Ne,className:"form-control",required:!0,children:s.map($e=>e.jsxs("option",{value:$e.id,children:[$e.code," - ",$e.name," ",$e.base_currency&&"(Base)"]},$e.id))})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Opening Balance Date ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"date",name:"opening_balance_date",value:X.opening_balance_date,onChange:Ne,className:"form-control",required:!0})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsxs("label",{className:"form-label",children:["Description ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("textarea",{name:"description",value:X.description,onChange:Ne,rows:"2",className:"form-control",required:!0,placeholder:"e.g., Opening Balance - Historical balance from previous system"})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Reference"}),e.jsx("input",{type:"text",name:"reference",value:X.reference,onChange:Ne,className:"form-control",placeholder:"Auto-generated if left blank"})]})]}),e.jsx("div",{style:{padding:"12px",background:"#eff6ff",border:"1px solid #bfdbfe",borderRadius:"4px",marginTop:"20px",fontSize:"0.75rem",color:"#1e40af"},children:e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{children:"Note:"})," This will create a journal entry using Retained Earnings (3998) as the offsetting account. This ensures historical balances don't affect current period financial statements."]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"modal-btn modal-btn-cancel",onClick:()=>y(!1),disabled:G,children:"Cancel"}),e.jsx("button",{type:"submit",className:"modal-btn modal-btn-confirm",disabled:G,children:G?"Creating...":"Create Opening Balance"})]})]})]})}),g&&e.jsx("div",{className:"modal-overlay",onClick:Re,children:e.jsx("div",{className:"modal-dialog",onClick:$e=>$e.stopPropagation(),style:{maxWidth:"95vw",maxHeight:"95vh",width:"1200px"},children:N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{style:{marginTop:"15px",color:"var(--text-secondary)"},children:"Loading account details..."})]}),e.jsx("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}})})]}):j?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",style:{color:"#000000"},children:["Account Details - ",j.code," - ",j.name]}),e.jsx("button",{className:"modal-close-btn",onClick:Re,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"modal-body",style:{maxHeight:"calc(95vh - 120px)",overflowY:"auto"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:0,fontSize:"0.95rem",fontWeight:"700",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Wl,style:{color:"#2563eb"}}),"Account Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px 30px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Account Code"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400",fontFamily:"monospace"},children:j.code||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Account Name"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:j.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Account Type"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:j.type||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Status"}),e.jsx("div",{style:{fontSize:"0.85rem",color:j.is_active?"#10b981":"#ef4444",fontWeight:"600"},children:j.is_active?"Active":"Inactive"})]}),k&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Parent Account"}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:[k.code," - ",k.name]})]})]})]}),P.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:0,fontSize:"0.95rem",fontWeight:"700",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Za,style:{color:"#10b981"}}),"Account Balances"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px 30px"},children:P.map($e=>e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:[$e.currency.code," - ",$e.currency.name]}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:$e.balance===0?"0.00":`${Oe(Math.abs($e.balance),$e.currency.symbol)} ${$e.balance<0?"CR":"DR"}`}),$e.as_of_date&&e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginTop:"4px"},children:["As of: ",$e.as_of_date.slice(0,10)]})]},$e.currency.id))})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:0,fontSize:"0.95rem",fontWeight:"700",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Wl,style:{color:"#6366f1"}}),"Ledger Entries & Transactions"]}),e.jsx("div",{style:{padding:"12px",background:"#f9fafb",border:"1px solid var(--border-color)",borderRadius:"4px",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"12px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Search"}),e.jsx("input",{type:"text",value:L.search,onChange:$e=>ye("search",$e.target.value),placeholder:"Search transactions...",className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Start Date"}),e.jsx("input",{type:"date",value:L.startDate,onChange:$e=>ye("startDate",$e.target.value),className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"End Date"}),e.jsx("input",{type:"date",value:L.endDate,onChange:$e=>ye("endDate",$e.target.value),className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Type"}),e.jsxs("select",{value:L.transactionType,onChange:$e=>ye("transactionType",$e.target.value),className:"form-control",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"DEBIT",children:"Debit"}),e.jsx("option",{value:"CREDIT",children:"Credit"})]})]})]})}),e.jsx("div",{style:{border:"1px solid var(--border-color)",borderRadius:"4px",overflow:"hidden",maxHeight:"400px",overflowY:"auto"},children:_?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading transactions..."}):A.length===0?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:[e.jsx(I,{icon:Wl,style:{fontSize:"2rem",marginBottom:"12px",opacity:.5}}),e.jsx("div",{style:{fontSize:"0.75rem"},children:"No transactions found"})]}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"DATE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"DESCRIPTION"}),e.jsx("th",{style:{padding:"6px 10px",textAlign:"right"},children:"DEBIT"}),e.jsx("th",{style:{padding:"6px 10px",textAlign:"right"},children:"CREDIT"}),e.jsx("th",{style:{padding:"6px 10px"},children:"REFERENCE"})]})}),e.jsxs("tbody",{children:[A.map(($e,ct)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:ct%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:Le($e.transaction_date)}),e.jsx("td",{style:{padding:"4px 10px"},children:$e.description||"N/A"}),e.jsx("td",{style:{padding:"4px 10px",textAlign:"right",color:"#dc2626",fontWeight:500},children:$e.debit_amount>0?Oe($e.debit_amount):"-"}),e.jsx("td",{style:{padding:"4px 10px",textAlign:"right",color:"#059669",fontWeight:500},children:$e.credit_amount>0?Oe($e.credit_amount):"-"}),e.jsx("td",{style:{padding:"4px 10px"},children:$e.reference||$e.receipt_number||$e.reference_number||"-"})]},`${$e.source}-${$e.id}`)),Array.from({length:Math.max(0,25-A.length)}).map(($e,ct)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(A.length+ct)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${ct}`))]})]})}),D.total_pages>1&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"16px",paddingTop:"12px",borderTop:"1px solid var(--border-color)"},children:[e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:["Showing page ",D.current_page," of ",D.total_pages,"(",D.total_records," total entries)"]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>Ke(D.current_page-1),disabled:D.current_page===1,className:"pagination-btn",style:{fontSize:"0.7rem"},children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",D.current_page," of ",D.total_pages]}),e.jsx("button",{onClick:()=>Ke(D.current_page+1),disabled:D.current_page===D.total_pages,className:"pagination-btn",style:{fontSize:"0.7rem"},children:"Next"})]})]})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:Re,children:"Close"})})]}):null})})]})},eoe=()=>{const{id:t}=Tn(),{token:a}=At(),[r,s]=x.useState(null),[n,i]=x.useState(!0),[o,c]=x.useState(""),[u,m]=x.useState(null),[h,p]=x.useState([]),[y,g]=x.useState([]),[v,N]=x.useState(!0),[w,j]=x.useState(null),[T,k]=x.useState({balance:"",as_of_date:""}),[R,P]=x.useState(!1),[$,A]=x.useState(""),[M,_]=x.useState([]),[B,D]=x.useState(!1),[C,L]=x.useState({current_page:1,total_pages:1,total_records:0,limit:10}),[H,V]=x.useState({search:"",startDate:"",endDate:"",transactionType:""});x.useEffect(()=>{Y()},[t]),x.useEffect(()=>{r&&(J(),W())},[r,H,C.current_page]);const Y=async()=>{i(!0),c("");try{const z=await re.get(`${se}/accounting/chart-of-accounts/${t}`,{headers:{Authorization:`Bearer ${a}`}});if(z.data.success){if(s(z.data.data),z.data.data.parent_id){const Z=await re.get(`${se}/accounting/chart-of-accounts/${z.data.data.parent_id}`,{headers:{Authorization:`Bearer ${a}`}});Z.data.success&&m(Z.data.data)}}else c("Failed to load account.")}catch{c("Failed to load account.")}finally{i(!1)}},J=async()=>{N(!0);try{const z=await re.get(`${se}/accounting/currencies`,{headers:{Authorization:`Bearer ${a}`}});if(z.data.success){p(z.data.data||[]);const Z=await Promise.all((z.data.data||[]).map(async Q=>{try{const fe=await re.get(`${se}/accounting/account-balances/${t}?currency_id=${Q.id}`,{headers:{Authorization:`Bearer ${a}`}});return{currency:Q,balance:fe.data.data?fe.data.data.balance:0,as_of_date:fe.data.data?fe.data.data.as_of_date:""}}catch{return{currency:Q,balance:0,as_of_date:""}}}));g(Z)}}catch{g([])}finally{N(!1)}},W=async()=>{if(r){D(!0);try{const z={page:C.current_page,limit:C.limit,...H,accountId:t},Q=(await re.get(`${se}/accounting/general-ledger/journal-entries/account/${t}`,{params:z,headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data;_(Q.data||[]),L(Q.pagination||C)}catch(z){console.error("Error fetching ledger entries:",z)}finally{D(!1)}}},X=(z,Z)=>{V(Q=>({...Q,[z]:Z})),L(Q=>({...Q,current_page:1}))},te=z=>{L(Z=>({...Z,current_page:z}))},oe=z=>new Date(z).toLocaleDateString(),q=(z,Z="$")=>`${Z}${parseFloat(z||0).toFixed(2)}`,G=z=>z==="fee_payment"?Za:Js;return e.jsx("div",{className:"px-2 md:px-4 lg:px-8 w-full max-w-full",children:n?e.jsx("div",{className:"p-3 md:p-6 text-xs text-gray-500",children:"Loading account..."}):o?e.jsx("div",{className:"p-3 md:p-6 text-xs text-red-600",children:o}):r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 md:mb-8 border-b border-gray-200 pb-3 md:pb-4",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-6",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-base md:text-lg font-bold text-gray-900 mb-1",children:[r.code,"  ",r.name]}),e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:r.type}),e.jsx("div",{className:"text-xs text-gray-500",children:r.parent_id&&u?`Parent: ${u.code} - ${u.name}`:""})]})})}),e.jsxs("div",{className:"mb-4 md:mb-8",children:[e.jsx("div",{className:"mb-2 text-xs font-semibold text-gray-700",children:"Account Balances"}),e.jsx("div",{className:"border border-gray-200 overflow-hidden",children:v?e.jsx("div",{className:"p-3 md:p-4 text-xs text-gray-500",children:"Loading balances..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full divide-y divide-gray-200 text-xs",style:{minWidth:"400px"},children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Currency"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider hidden sm:table-cell",children:"Symbol"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Balance"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider hidden md:table-cell",children:"As of Date"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map((z,Z)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-900",children:[z.currency.code," - ",z.currency.name]}),e.jsx("div",{className:"text-xs text-gray-500 sm:hidden",children:z.currency.symbol||"-"})]}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap hidden sm:table-cell",children:z.currency.symbol||"-"}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap",children:e.jsx("span",{className:`text-xs font-medium ${z.balance<0?"text-green-600":z.balance>0?"text-red-600":""}`,children:z.balance===0?"0.00":`${q(Math.abs(z.balance),z.currency.symbol)} ${z.balance<0?"CR":"DR"}`})}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap hidden md:table-cell",children:z.as_of_date?z.as_of_date.slice(0,10):"-"})]},z.currency.id))})]})})})]}),e.jsxs("div",{className:"mb-4 md:mb-8",children:[e.jsxs("div",{className:"mb-3 md:mb-4",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Ledger Entries & Transactions"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Transactions affecting this account"})]}),e.jsx("div",{className:"bg-gray-50 p-3 md:p-4 rounded-lg mb-3 md:mb-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),e.jsx("input",{type:"text",value:H.search,onChange:z=>X("search",z.target.value),placeholder:"Search transactions...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:H.startDate,onChange:z=>X("startDate",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:H.endDate,onChange:z=>X("endDate",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:H.transactionType,onChange:z=>X("transactionType",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"DEBIT",children:"Debit"}),e.jsx("option",{value:"CREDIT",children:"Credit"})]})]})]})}),e.jsxs("div",{className:"border border-gray-200 overflow-hidden",children:[B?e.jsx("div",{className:"p-3 md:p-4 text-xs text-gray-500",children:"Loading ledger entries..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full divide-y divide-gray-200 text-xs",style:{minWidth:"500px"},children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Date"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Description"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-right font-medium tracking-wider",children:"DR"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-right font-medium tracking-wider",children:"CR"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Reference"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(z=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-gray-900",children:oe(z.transaction_date)}),e.jsx("td",{className:"px-2 md:px-3 py-2 text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:G(z.source),className:"mr-2 text-gray-400 h-3 w-3 flex-shrink-0"}),e.jsx("div",{children:e.jsx("div",{className:"text-xs font-medium",children:z.description})})]})}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-right font-medium text-red-600",children:z.debit_amount>0?q(z.debit_amount):"-"}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-right font-medium text-green-600",children:z.credit_amount>0?q(z.credit_amount):"-"}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-gray-500",children:z.reference||z.receipt_number||z.reference_number||"-"})]},`${z.source}-${z.id}`))})]})}),!B&&M.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:Wl,className:"mx-auto h-8 w-8 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No ledger entries found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:H.search||H.startDate||H.endDate?"Try adjusting your filters.":"No transactions have been recorded for this account yet."})]})]}),C.total_pages>1&&e.jsxs("div",{className:"mt-3 md:mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-700 text-center sm:text-left",children:["Showing page ",C.current_page," of ",C.total_pages,"(",C.total_records," total entries)"]}),e.jsxs("div",{className:"flex justify-center sm:justify-end space-x-2",children:[e.jsx("button",{onClick:()=>te(C.current_page-1),disabled:C.current_page===1,className:"px-3 py-1 border border-gray-300 text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md",children:"Previous"}),e.jsx("button",{onClick:()=>te(C.current_page+1),disabled:C.current_page===C.total_pages,className:"px-3 py-1 border border-gray-300 text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md",children:"Next"})]})]})]})]}):e.jsx("div",{className:"p-3 md:p-6 text-xs text-gray-500",children:"Account not found."})})},toe=()=>{const{token:t}=At(),[a,r]=x.useState([]),[s,n]=x.useState(!0),[i,o]=x.useState(""),[c,u]=x.useState(!1),[m,h]=x.useState(""),[p,y]=x.useState(null),[g,v]=x.useState([]),[N,w]=x.useState(!1),[j,T]=x.useState(""),[k,R]=x.useState(1),[P,$]=x.useState(1),[A,M]=x.useState({amount:"",description:"",reference:"",currency_id:1});x.useEffect(()=>{_()},[]);const _=async()=>{n(!0),o("");try{const J=await re.get(`${se}/accounting/cash-bank/balances`,{headers:{Authorization:`Bearer ${t}`}});J.data.success?(r(J.data.data),o("")):o("Failed to load account balances")}catch(J){console.error("Error loading balances:",J),o("Error loading account balances. Please try again."),r([])}finally{n(!1)}},B=async(J,W=1)=>{w(!0);try{const X={page:W,limit:10,search:j,startDate:"",endDate:"",transactionType:""},oe=(await re.get(`${se}/accounting/general-ledger/journal-entries/account/${J}`,{params:X,headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data;v(oe.data||[]),$(oe.pagination?.total_pages||1),R(W)}catch(X){console.error("Error loading transactions:",X)}finally{w(!1)}},D=J=>{y(J),B(J.id)},C=J=>{h(J),u(!0),M({amount:"",description:"",reference:"",currency_id:1})},L=()=>{u(!1),h(""),M({amount:"",description:"",reference:"",currency_id:1})},H=async J=>{if(J.preventDefault(),!A.amount||!A.description){alert("Amount and description are required");return}try{let W="";switch(m){case"cash-injection":W="/accounting/cash-bank/cash/injection";break;case"cash-withdrawal":W="/accounting/cash-bank/cash/withdrawal";break;case"bank-deposit":W="/accounting/cash-bank/bank/deposit";break;case"bank-withdrawal":W="/accounting/cash-bank/bank/withdrawal";break;case"cash-to-bank":W="/accounting/cash-bank/transfer/cash-to-bank";break;case"bank-to-cash":W="/accounting/cash-bank/transfer/bank-to-cash";break;default:return}const te=(await re.post(`${se}${W}`,A,{headers:{Authorization:`Bearer ${t}`}})).data;te.success?(alert("Transaction recorded successfully!"),L(),_(),p&&B(p.id,k)):alert(`Error: ${te.message}`)}catch(W){console.error("Error recording transaction:",W),alert("Error recording transaction")}},V=()=>{switch(m){case"cash-injection":return"Cash Injection";case"cash-withdrawal":return"Cash Withdrawal";case"bank-deposit":return"Bank Deposit";case"bank-withdrawal":return"Bank Withdrawal";case"cash-to-bank":return"Cash to Bank Transfer";case"bank-to-cash":return"Bank to Cash Transfer";default:return"Transaction"}},Y=()=>{switch(m){case"cash-injection":return"Add cash to the business";case"cash-withdrawal":return"Take cash out of the business";case"bank-deposit":return"Deposit money into bank account";case"bank-withdrawal":return"Withdraw money from bank account";case"cash-to-bank":return"Transfer cash to bank account";case"bank-to-cash":return"Transfer money from bank to cash";default:return""}};return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg",children:"Loading..."})}):e.jsxs("div",{className:"px-2 md:px-4 lg:px-8 w-full max-w-full",children:[e.jsx("div",{className:"mb-4 md:mb-8 border-b border-gray-200 pb-3 md:pb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base md:text-lg font-bold text-gray-900 mb-1",children:"Cash & Bank Management"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Manage cash and bank operations"})]}),e.jsx("button",{onClick:_,className:"mt-2 md:mt-0 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-xs",children:"Refresh"})]})}),e.jsxs("div",{className:"mb-4 md:mb-8",children:[e.jsx("div",{className:"mb-2 text-xs font-semibold text-gray-700",children:"Quick Actions"}),e.jsx("div",{className:"border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"bg-gray-50 p-3 md:p-4",children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-2",children:[e.jsxs("button",{onClick:()=>C("cash-injection"),className:"px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-xs",children:[e.jsx(I,{icon:Ht,className:"mr-1"}),"Cash In"]}),e.jsxs("button",{onClick:()=>C("cash-withdrawal"),className:"px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors text-xs",children:[e.jsx(I,{icon:V0,className:"mr-1"}),"Cash Out"]}),e.jsxs("button",{onClick:()=>C("bank-deposit"),className:"px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-xs",children:[e.jsx(I,{icon:Ht,className:"mr-1"}),"Bank In"]}),e.jsxs("button",{onClick:()=>C("bank-withdrawal"),className:"px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors text-xs",children:[e.jsx(I,{icon:V0,className:"mr-1"}),"Bank Out"]}),e.jsxs("button",{onClick:()=>C("cash-to-bank"),className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors text-xs",children:[e.jsx(I,{icon:oF,className:"mr-1"}),"CashBank"]}),e.jsxs("button",{onClick:()=>C("bank-to-cash"),className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors text-xs",children:[e.jsx(I,{icon:fm,className:"mr-1"}),"BankCash"]})]})})})]}),p?e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 md:mb-8 border-b border-gray-200 pb-3 md:pb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(I,{icon:p.account_name.toLowerCase().includes("cash")?Za:Ri,className:"text-lg text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base md:text-lg font-bold text-gray-900",children:p.account_name}),e.jsx("div",{className:"text-xs text-gray-500",children:p.code})]})]}),e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:p.account_type}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Currency: ",p.currency_code]})]}),e.jsx("button",{onClick:()=>y(null),className:"mt-2 md:mt-0 px-3 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"Back to Overview"})]})}),e.jsxs("div",{className:"mb-4 md:mb-8",children:[e.jsx("div",{className:"mb-2 text-xs font-semibold text-gray-700",children:"Account Balance"}),e.jsx("div",{className:"border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"bg-gray-50 p-3 md:p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:p.current_balance.toLocaleString()}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Current Balance (",p.currency_code,")"]})]})})})]}),e.jsxs("div",{className:"mb-4 md:mb-8",children:[e.jsxs("div",{className:"mb-3 md:mb-4",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Transaction History"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Transactions affecting this account"})]}),e.jsx("div",{className:"bg-gray-50 p-3 md:p-4 rounded-lg mb-3 md:mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:ua,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-3 w-3"}),e.jsx("input",{type:"text",placeholder:"Search transactions...",value:j,onChange:J=>T(J.target.value),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>B(p.id,1),className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-xs",children:"Search"})})]})}),e.jsxs("div",{className:"border border-gray-200 overflow-hidden",children:[N?e.jsx("div",{className:"p-3 md:p-4 text-xs text-gray-500",children:"Loading transactions..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full divide-y divide-gray-200 text-xs",style:{minWidth:"500px"},children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Date"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Description"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-right font-medium tracking-wider",children:"DR"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-right font-medium tracking-wider",children:"CR"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Reference"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-2 md:px-3 py-4 text-center text-gray-500",children:"No transactions found"})}):g.map((J,W)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-gray-900",children:new Date(J.transaction_date).toLocaleDateString()}),e.jsx("td",{className:"px-2 md:px-3 py-2 text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:Za,className:"mr-2 text-gray-400 h-3 w-3 flex-shrink-0"}),e.jsx("div",{children:e.jsx("div",{className:"text-xs font-medium",children:J.description})})]})}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-right font-medium text-red-600",children:J.debit_amount>0?`$${parseFloat(J.debit_amount||0).toFixed(2)}`:"-"}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-right font-medium text-green-600",children:J.credit_amount>0?`$${parseFloat(J.credit_amount||0).toFixed(2)}`:"-"}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-gray-500",children:J.reference||"-"})]},W))})]})}),!N&&g.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:Za,className:"mx-auto h-8 w-8 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No transactions found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:j?"Try adjusting your search.":"No transactions have been recorded for this account yet."})]})]}),P>1&&e.jsxs("div",{className:"mt-3 md:mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-700 text-center sm:text-left",children:["Showing page ",k," of ",P]}),e.jsxs("div",{className:"flex justify-center sm:justify-end space-x-2",children:[e.jsx("button",{onClick:()=>B(p.id,k-1),disabled:k===1,className:"px-3 py-1 border border-gray-300 text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md",children:"Previous"}),e.jsx("button",{onClick:()=>B(p.id,k+1),disabled:k===P,className:"px-3 py-1 border border-gray-300 text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md",children:"Next"})]})]})]})]}):e.jsxs(e.Fragment,{children:[i&&e.jsx("div",{className:"mb-3 md:mb-4 bg-red-50 border border-red-200 rounded-md p-3",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(I,{icon:V0,className:"h-4 w-4 text-red-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-xs font-medium text-red-800",children:"Error"}),e.jsx("div",{className:"mt-1 text-xs text-red-700",children:e.jsx("p",{children:i})})]})]})}),e.jsxs("div",{className:"mb-4 md:mb-8",children:[e.jsx("div",{className:"mb-2 text-xs font-semibold text-gray-700",children:"Cash & Bank Accounts"}),e.jsx("div",{className:"border border-gray-200 overflow-hidden",children:s?e.jsx("div",{className:"p-3 md:p-4 text-xs text-gray-500",children:"Loading accounts..."}):a.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full divide-y divide-gray-200 text-xs",style:{minWidth:"400px"},children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Account"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Type"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-right font-medium tracking-wider",children:"Balance"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-left font-medium tracking-wider",children:"Currency"}),e.jsx("th",{className:"px-2 md:px-3 py-2 text-center font-medium tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(J=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:J.account_name.toLowerCase().includes("cash")?Za:Ri,className:"mr-2 text-blue-600 h-3 w-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:J.account_name}),e.jsx("div",{className:"text-xs text-gray-500",children:J.code})]})]})}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-xs text-gray-500",children:J.account_type}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-right",children:e.jsx("span",{className:"text-xs font-medium text-gray-900",children:J.current_balance.toLocaleString()})}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-xs text-gray-500",children:J.currency_code}),e.jsx("td",{className:"px-2 md:px-3 py-2 whitespace-nowrap text-center",children:e.jsxs("button",{onClick:()=>D(J),className:"px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-xs",children:[e.jsx(I,{icon:qa,className:"mr-1"}),"View"]})})]},J.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:Za,className:"mx-auto h-8 w-8 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No Cash/Bank Accounts Found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Cash and Bank accounts need to be set up in the Chart of Accounts first."}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:'Please ensure you have accounts with "Cash" or "Bank" in their names in the Chart of Accounts.'})]})})]})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-900 mb-1",children:V()}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:Y()}),e.jsxs("form",{onSubmit:H,children:[e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Amount *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:A.amount,onChange:J=>M({...A,amount:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Enter amount",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description *"}),e.jsx("textarea",{value:A.description,onChange:J=>M({...A,description:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Enter description",rows:"3",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reference Number"}),e.jsx("input",{type:"text",value:A.reference,onChange:J=>M({...A,reference:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs",placeholder:"Enter reference number (optional)"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 mt-4 md:mt-6",children:[e.jsx("button",{type:"button",onClick:L,className:"w-full sm:w-auto px-3 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors text-xs",children:"Cancel"}),e.jsx("button",{type:"submit",className:"w-full sm:w-auto px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-xs",children:"Record Transaction"})]})]})]})})})]})},aoe=()=>{const{token:t}=At(),[a,r]=x.useState(null),[s,n]=x.useState(!1),[i,o]=x.useState(""),[c,u]=x.useState(""),[m,h]=x.useState(new Date().toISOString().slice(0,10)),[p,y]=x.useState(!1),[g,v]=x.useState(!1),[N,w]=x.useState(!1),[j,T]=x.useState(""),[k,R]=x.useState(""),[P,$]=x.useState(""),[A,M]=x.useState([]),[_,B]=x.useState(!1),[D,C]=x.useState([]),[L,H]=x.useState(null),[V,Y]=x.useState(!1);x.useEffect(()=>{J()},[]);const J=async()=>{n(!0),o("");try{const he=await re.get(`${se}/accounting/trial-balance`,{params:{as_of_date:m},headers:{Authorization:`Bearer ${t}`}});r(he.data.data)}catch(he){console.error("Error fetching trial balance:",he),o(he.response?.data?.message||"Failed to fetch trial balance")}finally{n(!1)}},W=async()=>{try{const he=await re.get(`${se}/accounting/trial-balance/export`,{params:{as_of_date:m},headers:{Authorization:`Bearer ${t}`},responseType:"blob"}),ne=window.URL.createObjectURL(new Blob([he.data])),me=document.createElement("a");me.href=ne,me.setAttribute("download",`trial_balance_${m}.csv`),document.body.appendChild(me),me.click(),me.remove()}catch(he){console.error("Error exporting trial balance:",he),o("Failed to export trial balance")}},X=async()=>{if(!a){o("Please generate a trial balance first");return}y(!0),T(`Trial Balance - ${new Date(m).toLocaleDateString()}`)},te=async()=>{if(!j.trim()){o("Please enter a report name");return}try{n(!0),await re.post(`${se}/accounting/saved-reports`,{report_type:"trial_balance",report_name:j,report_description:k,period_start_date:m,period_end_date:m,report_data:a,report_summary:{total_debit:a.totals.total_debit,total_credit:a.totals.total_credit,is_balanced:a.is_balanced,difference:a.totals.difference},tags:P},{headers:{Authorization:`Bearer ${t}`}}),u("Report saved successfully!"),y(!1),T(""),R(""),$("")}catch(he){console.error("Error saving report:",he),o(he.response?.data?.error||"Failed to save report")}finally{n(!1)}},oe=async()=>{B(!0),o("");try{console.log(" Loading saved reports..."),console.log("URL:",`${se}/accounting/saved-reports`);const he=await re.get(`${se}/accounting/saved-reports`,{params:{report_type:"trial_balance"},headers:{Authorization:`Bearer ${t}`}});console.log(" Response:",he.data),M(he.data.data.reports),v(!0)}catch(he){console.error(" Error loading saved reports:",he),console.error("Error response:",he.response?.data),console.error("Error message:",he.message),o(he.response?.data?.error||he.message||"Failed to load saved reports")}finally{B(!1)}},q=async he=>{try{n(!0);const me=(await re.get(`${se}/accounting/saved-reports/${he}`,{headers:{Authorization:`Bearer ${t}`}})).data.data;r(me.report_data),h(me.period_start_date),v(!1),Y(!1),u(`Loaded: ${me.report_name}`)}catch(ne){console.error("Error loading report:",ne),o("Failed to load report")}finally{n(!1)}},G=async()=>{B(!0),o("");try{const he=await re.get(`${se}/accounting/saved-reports`,{params:{report_type:"trial_balance"},headers:{Authorization:`Bearer ${t}`}});M(he.data.data.reports),C([]),w(!0)}catch(he){console.error("Error loading saved reports:",he),o(he.response?.data?.error||"Failed to load saved reports")}finally{B(!1)}},z=he=>{C(ne=>ne.includes(he)?ne.filter(me=>me!==he):ne.length>=5?(o("You can only compare up to 5 reports at once"),ne):[...ne,he])},Z=async()=>{if(D.length<2){o("Please select at least 2 reports to compare");return}try{n(!0),o("");const he=D.map(ie=>re.get(`${se}/accounting/saved-reports/${ie}`,{headers:{Authorization:`Bearer ${t}`}})),me=(await Promise.all(he)).map(ie=>ie.data.data),pe=new Map;me.forEach((ie,ke)=>{ie.report_data.trial_balance.forEach(Ae=>{pe.has(Ae.account_code)||pe.set(Ae.account_code,{account_code:Ae.account_code,account_name:Ae.account_name,type:Ae.type,balances:[]});const ae=pe.get(Ae.account_code);ae.balances[ke]={debit:Ae.debit_balance,credit:Ae.credit_balance,balance:Ae.balance}})}),pe.forEach(ie=>{for(let ke=0;ke<me.length;ke++)ie.balances[ke]||(ie.balances[ke]={debit:0,credit:0,balance:0})}),H({reports:me.map(ie=>({id:ie.id,name:ie.report_name,date:ie.period_start_date,totals:ie.report_data.totals})),accounts:Array.from(pe.values())}),w(!1),Y(!0),u(`Comparing ${me.length} trial balance reports`)}catch(he){console.error("Error comparing reports:",he),o("Failed to load reports for comparison")}finally{n(!1)}},Q=he=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(he||0),fe=he=>{const ne=Math.abs(he),me=he<0?"CR":"DR";return e.jsxs("span",{className:he<0?"text-green-600":"text-red-600",children:[Q(ne)," ",me]})};return e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Trial Balance"}),e.jsx("p",{className:"text-xs text-gray-600",children:"View account balances and verify books are balanced"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 p-4 mb-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[e.jsx(I,{icon:Pa,className:"mr-1"}),"As of Date"]}),e.jsx("input",{type:"date",value:m,onChange:he=>h(he.target.value),className:"w-full px-2 py-1.5 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-900"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:J,disabled:s,className:"w-full px-3 py-1.5 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 disabled:bg-gray-400 disabled:cursor-not-allowed",children:s?e.jsxs(e.Fragment,{children:[e.jsx(I,{icon:fs,spin:!0,className:"mr-1"}),"Loading..."]}):"Generate Trial Balance"})}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:W,disabled:s||!a,className:"w-full px-3 py-1.5 text-xs font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(I,{icon:fi,className:"mr-1"}),"Export CSV"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:X,disabled:s||!a,className:"w-full px-3 py-1.5 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(I,{icon:ns,className:"mr-1"}),"Save Report"]})}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:oe,disabled:_,className:"w-full px-3 py-1.5 text-xs font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(I,{icon:iu,className:"mr-1"}),"Load Report"]})}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:G,disabled:_,className:"w-full px-3 py-1.5 text-xs font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(I,{icon:al,className:"mr-1"}),"Compare Reports"]})})]})]}),i&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 mb-4",children:[e.jsx(I,{icon:Ma,className:"mr-2 text-xs"}),e.jsx("span",{className:"text-xs",children:i})]}),c&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-3 py-2 mb-4",children:[e.jsx(I,{icon:cr,className:"mr-2 text-xs"}),e.jsx("span",{className:"text-xs",children:c})]}),a&&e.jsx("div",{className:`border p-3 mb-4 ${a.is_balanced?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:a.is_balanced?cr:Ma,className:`text-lg mr-2 ${a.is_balanced?"text-green-600":"text-red-600"}`}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold ${a.is_balanced?"text-green-900":"text-red-900"}`,children:a.is_balanced?"Books are Balanced":"Books are NOT Balanced"}),e.jsx("p",{className:`text-xs ${a.is_balanced?"text-green-700":"text-red-700"}`,children:a.is_balanced?"Total debits equal total credits":`Difference: ${Q(Math.abs(a.totals.difference))}`})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"As of"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:new Date(a.as_of_date).toLocaleDateString()})]})]})}),V&&L&&e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden mb-4",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Trial Balance Comparison (",L.reports.length," Reports)"]}),e.jsxs("button",{onClick:()=>Y(!1),className:"text-xs px-3 py-1 text-gray-600 hover:text-gray-900 border border-gray-300 hover:bg-gray-50",children:[e.jsx(I,{icon:Wt,className:"mr-1"}),"Close Comparison"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 border-r border-gray-300",children:"Code"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 border-r border-gray-300",children:"Account Name"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 border-r border-gray-300",children:"Type"}),L.reports.map((he,ne)=>e.jsxs("th",{className:"px-4 py-3 text-right font-semibold text-gray-700 border-l border-gray-300 bg-gray-100",children:[e.jsx("div",{className:"font-bold",children:he.name}),e.jsx("div",{className:"text-xs font-normal text-gray-600 mt-1",children:new Date(he.date).toLocaleDateString()})]},ne))]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:L.accounts.map((he,ne)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2.5 whitespace-nowrap text-gray-900 font-mono border-r border-gray-200",children:he.account_code}),e.jsx("td",{className:"px-3 py-2.5 text-gray-900 border-r border-gray-200",children:he.account_name}),e.jsx("td",{className:"px-3 py-2.5 whitespace-nowrap border-r border-gray-200",children:e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded ${he.type==="Asset"?"bg-blue-100 text-blue-800":he.type==="Liability"?"bg-red-100 text-red-800":he.type==="Equity"?"bg-purple-100 text-purple-800":he.type==="Revenue"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:he.type})}),he.balances.map((me,pe)=>e.jsx("td",{className:`px-4 py-2.5 text-right font-mono border-l border-gray-200 ${me.balance<0?"text-red-600":me.balance>0?"text-gray-900":"text-gray-400"}`,children:e.jsx("span",{className:"font-semibold",children:me.balance<0?`(${Q(Math.abs(me.balance))})`:Q(me.balance)})},pe))]},ne))}),e.jsxs("tfoot",{className:"bg-gray-100 font-bold border-t-2 border-gray-300",children:[e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{colSpan:"3",className:"px-3 py-3 text-gray-900 text-sm",children:"Total Debits"}),L.reports.map((he,ne)=>e.jsx("td",{className:"px-4 py-3 text-right font-mono text-sm border-l border-gray-300",children:Q(he.totals.total_debit)},ne))]}),e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{colSpan:"3",className:"px-3 py-3 text-gray-900 text-sm",children:"Total Credits"}),L.reports.map((he,ne)=>e.jsx("td",{className:"px-4 py-3 text-right font-mono text-sm border-l border-gray-300",children:Q(he.totals.total_credit)},ne))]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{colSpan:"3",className:"px-3 py-3 text-gray-900 text-sm",children:"Difference"}),L.reports.map((he,ne)=>e.jsx("td",{className:`px-4 py-3 text-right font-mono text-sm border-l border-gray-300 ${he.totals.difference===0?"text-green-600":"text-red-600"}`,children:Q(he.totals.difference)},ne))]})]})]})})]}),a&&!V&&e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700 tracking-wider",children:"Account Code"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700 tracking-wider",children:"Account Name"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700 tracking-wider",children:"Type"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700 tracking-wider",children:"Debit"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700 tracking-wider",children:"Credit"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700 tracking-wider",children:"Balance"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.trial_balance.map(he=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs font-mono text-gray-900",children:he.account_code}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-900",children:he.account_name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 text-xs font-semibold rounded-full ${he.account_type==="Asset"?"bg-blue-100 text-blue-800":he.account_type==="Liability"?"bg-red-100 text-red-800":he.account_type==="Equity"?"bg-purple-100 text-purple-800":he.account_type==="Revenue"?"bg-green-100 text-green-800":he.account_type==="Expense"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:he.account_type})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right text-red-600",children:he.total_debit>0?Q(he.total_debit):"-"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right text-green-600",children:he.total_credit>0?Q(he.total_credit):"-"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right font-medium",children:fe(he.balance)})]},he.id))}),e.jsx("tfoot",{className:"bg-gray-100 border-t-2 border-gray-300",children:e.jsxs("tr",{children:[e.jsxs("td",{colSpan:"3",className:"px-3 py-2 text-xs font-bold text-gray-900",children:[e.jsx(I,{icon:al,className:"mr-1"}),"Total"]}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right font-bold text-red-600",children:Q(a.totals.total_debit)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right font-bold text-green-600",children:Q(a.totals.total_credit)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right font-bold text-gray-900",children:a.totals.difference!==0?Q(Math.abs(a.totals.difference)):"-"})]})})]})}),a.trial_balance.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:al,className:"text-4xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No account activity found for this date"})]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Save Trial Balance"}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Report Name *"}),e.jsx("input",{type:"text",value:j,onChange:he=>T(he.target.value),placeholder:"e.g., Trial Balance - October 2024",className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{value:k,onChange:he=>R(he.target.value),placeholder:"Add any notes or description...",rows:3,className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tags (Optional)"}),e.jsx("input",{type:"text",value:P,onChange:he=>$(he.target.value),placeholder:"e.g., monthly, approved, october",className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate tags with commas"})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>y(!1),className:"flex-1 px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:te,disabled:s||!j.trim(),className:"flex-1 px-4 py-2 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400",children:[e.jsx(I,{icon:ns,className:"mr-1"}),"Save Report"]})]})]})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Load Saved Trial Balance"}),e.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt})})]}),A.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:iu,className:"text-4xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No saved trial balance reports found"})]}):e.jsx("div",{className:"space-y-2",children:A.map(he=>e.jsx("div",{className:"border border-gray-200 p-3 hover:bg-gray-50 cursor-pointer",onClick:()=>q(he.id),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:he.report_name}),he.report_description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:he.report_description}),e.jsxs("div",{className:"flex gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Date: ",new Date(he.period_start_date).toLocaleDateString()]}),e.jsxs("span",{children:["Saved: ",new Date(he.saved_at).toLocaleDateString()]}),he.report_summary&&e.jsx("span",{className:he.report_summary.is_balanced?"text-green-600":"text-red-600",children:he.report_summary.is_balanced?" Balanced":" Not Balanced"})]}),he.tags&&e.jsx("div",{className:"mt-2",children:he.tags.split(",").map((ne,me)=>e.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 text-xs px-2 py-0.5 mr-1",children:ne.trim()},me))})]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-xs font-medium ml-4",children:"Load "})]})},he.id))}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>v(!1),className:"w-full px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Close"})})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Compare Trial Balance Reports"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Select 2-5 reports to compare (",D.length," selected)"]})]}),e.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt})})]}),A.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:al,className:"text-4xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No saved trial balance reports found"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto mb-4",children:A.map(he=>e.jsx("div",{className:`border p-3 cursor-pointer transition-all ${D.includes(he.id)?"border-orange-500 bg-orange-50":"border-gray-200 hover:bg-gray-50"}`,onClick:()=>z(he.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"checkbox",checked:D.includes(he.id),onChange:()=>{},className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:he.report_name}),he.report_description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:he.report_description}),e.jsxs("div",{className:"flex gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Date: ",new Date(he.period_start_date).toLocaleDateString()]}),e.jsxs("span",{children:["Saved: ",new Date(he.saved_at).toLocaleDateString()]}),he.report_summary&&e.jsx("span",{className:he.report_summary.is_balanced?"text-green-600":"text-red-600",children:he.report_summary.is_balanced?" Balanced":" Not Balanced"})]})]})]})},he.id))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>w(!1),className:"flex-1 px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:Z,disabled:D.length<2,className:"flex-1 px-4 py-2 text-xs font-medium text-white bg-orange-600 hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(I,{icon:al,className:"mr-1"}),"Compare ",D.length," Reports"]})]})]})]})})]})},roe=()=>{const{token:t}=At(),[a,r]=x.useState([]),[s,n]=x.useState(!0),[i,o]=x.useState(""),[c,u]=x.useState(!1),[m,h]=x.useState("add"),[p,y]=x.useState({id:null,name:"",contact_person:"",phone:"",email:"",address:"",is_active:!0}),[g,v]=x.useState(""),[N,w]=x.useState(!1),j=async()=>{n(!0),o("");try{const A=await re.get(`${se}/expenses/suppliers`,{headers:{Authorization:`Bearer ${t}`}});r(A.data.data||[])}catch{o("Failed to load suppliers.")}finally{n(!1)}};x.useEffect(()=>{j()},[]);const T=()=>{y({id:null,name:"",contact_person:"",phone:"",email:"",address:"",is_active:!0}),h("add"),u(!0),v("")},k=A=>{y({...A}),h("edit"),u(!0),v("")},R=A=>{const{name:M,value:_,type:B,checked:D}=A.target;y(C=>({...C,[M]:B==="checkbox"?D:_}))},P=async A=>{A.preventDefault(),w(!0),v("");try{if(!p.name){v("Name is required."),w(!1);return}m==="add"?await re.post(`${se}/expenses/suppliers`,p,{headers:{Authorization:`Bearer ${t}`}}):await re.put(`${se}/expenses/suppliers/${p.id}`,p,{headers:{Authorization:`Bearer ${t}`}}),u(!1),j()}catch{v("Failed to save supplier.")}finally{w(!1)}},$=async A=>{if(window.confirm("Are you sure you want to delete this supplier?"))try{await re.delete(`${se}/expenses/suppliers/${A}`,{headers:{Authorization:`Bearer ${t}`}}),j()}catch{alert("Failed to delete supplier.")}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-base font-semibold text-gray-800",children:"Suppliers"}),e.jsx("button",{className:"px-3 py-1 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800",style:{borderRadius:0},onClick:T,children:"+ Add Supplier"})]}),e.jsx("div",{className:"border-t border-gray-200",children:s?e.jsx("div",{className:"text-xs text-gray-500 p-4",children:"Loading suppliers..."}):i?e.jsx("div",{className:"text-xs text-red-600 p-4",children:i}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Contact Person"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Email"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Address"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(A=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:A.name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:A.contact_person}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:A.phone}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:A.email}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:A.address}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:A.is_active?"Active":"Inactive"}),e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap",children:[e.jsx("button",{className:"text-gray-700 hover:text-gray-900 text-xs mr-2",style:{borderRadius:0},onClick:()=>k(A),children:"Edit"}),e.jsx("button",{className:"text-red-600 hover:text-red-800 text-xs",style:{borderRadius:0},onClick:()=>$(A.id),children:"Delete"})]})]},A.id))})]})})}),c&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 z-50",children:e.jsxs("div",{className:"bg-white border border-gray-200 p-6 w-full max-w-md",style:{borderRadius:0},children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800 mb-4",children:m==="add"?"Add Supplier":"Edit Supplier"}),e.jsxs("form",{onSubmit:P,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:p.name,onChange:R,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Contact Person"}),e.jsx("input",{type:"text",name:"contact_person",value:p.contact_person,onChange:R,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Phone"}),e.jsx("input",{type:"text",name:"phone",value:p.phone,onChange:R,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:p.email,onChange:R,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Address"}),e.jsx("input",{type:"text",name:"address",value:p.address,onChange:R,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0}})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"is_active",checked:p.is_active,onChange:R,className:"mr-2"}),e.jsx("label",{className:"text-xs text-gray-600",children:"Active"})]}),g&&e.jsx("div",{className:"text-xs text-red-600",children:g}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[e.jsx("button",{type:"button",className:"px-3 py-1 text-xs text-gray-700 bg-gray-200 hover:bg-gray-300",style:{borderRadius:0},onClick:()=>u(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-3 py-1 text-xs text-white bg-gray-900 hover:bg-gray-800",style:{borderRadius:0},disabled:N,children:N?"Saving...":"Save"})]})]})]})})]})},soe=()=>{const{token:t}=At(),[a,r]=x.useState([]),[s,n]=x.useState(!0),[i,o]=x.useState(""),[c,u]=x.useState(null),[m,h]=x.useState(!1),[p,y]=x.useState(!1),[g,v]=x.useState(null),[N,w]=x.useState(!1),[j,T]=x.useState(1),[k]=x.useState(20),[R,P]=x.useState(0),[$,A]=x.useState(""),[M,_]=x.useState(""),[B,D]=x.useState(""),[C,L]=x.useState(""),H=Da(),[V,Y]=x.useState({supplier_id:"",amount:"",currency_id:"",expense_date:new Date().toISOString().split("T")[0],description:"",payment_method:"Cash",payment_status:"full",expense_account_id:"",amount_paid:"",reference_number:""}),[J,W]=x.useState(""),[X,te]=x.useState(!1),[oe,q]=x.useState([]),[G,z]=x.useState([]),[Z,Q]=x.useState([]),[fe,he]=x.useState(!1),ne=async()=>{n(!0),o("");try{const Le=[];Le.push(`page=${j}`),Le.push(`pageSize=${k}`),M&&Le.push(`search=${encodeURIComponent(M)}`),B&&Le.push(`startDate=${B}`),C&&Le.push(`endDate=${C}`);const Oe=Le.length?`?${Le.join("&")}`:"",$e=await re.get(`${se}/expenses/expenses${Oe}`,{headers:{Authorization:`Bearer ${t}`}});r($e.data.data||[]),P($e.data.total||0)}catch{o("Failed to load expenses.")}finally{n(!1)}};x.useEffect(()=>{ne()},[j,M,B,C]),x.useEffect(()=>{p&&me()},[p]);const me=async()=>{he(!0);try{const[Le,Oe,$e]=await Promise.all([re.get(`${se}/expenses/suppliers`,{headers:{Authorization:`Bearer ${t}`}}),re.get(`${se}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}}),re.get(`${se}/accounting/chart-of-accounts`,{headers:{Authorization:`Bearer ${t}`}})]);q(Le.data.data||[]),z(Oe.data.data||[]);const ct=$e.data.data||[];Q(ct.filter(Nt=>Nt.type==="Expense"))}catch(Le){console.error("Error fetching options:",Le)}finally{he(!1)}},pe=Le=>{Le.preventDefault(),_($),T(1)},ie=()=>{const Le=Date.now(),Oe=Math.floor(Math.random()*1e3);return`EXP-${Le}-${Oe}`},ke=Le=>{const{name:Oe,value:$e}=Le.target;if(Y(ct=>({...ct,[Oe]:$e})),Oe==="amount"&&V.payment_status==="partial"){const ct=parseFloat($e)||0;(parseFloat(V.amount_paid)||0)>ct&&Y(jt=>({...jt,amount_paid:$e}))}},Ae=()=>{Y({supplier_id:"",amount:"",currency_id:"",expense_date:new Date().toISOString().split("T")[0],description:"",payment_method:"Cash",payment_status:"full",expense_account_id:"",amount_paid:"",reference_number:""}),W(""),y(!0)},ae=()=>{y(!1),W(""),Y({supplier_id:"",amount:"",currency_id:"",expense_date:new Date().toISOString().split("T")[0],description:"",payment_method:"Cash",payment_status:"full",expense_account_id:"",amount_paid:"",reference_number:""})},Ne=async Le=>{Le.preventDefault(),te(!0),W("");try{if(!V.amount||!V.currency_id||!V.expense_date||!V.payment_method||!V.payment_status||!V.expense_account_id){W("Please fill all required fields."),te(!1);return}if(!V.reference_number){W("Please add a reference number."),te(!1);return}if(V.payment_status==="partial"){if(!V.amount_paid||parseFloat(V.amount_paid)<=0){W("Please enter the amount paid for partial payment."),te(!1);return}if(parseFloat(V.amount_paid)>=parseFloat(V.amount)){W("Amount paid must be less than total amount for partial payment."),te(!1);return}}await re.post(`${se}/expenses/expenses`,{...V,supplier_id:V.supplier_id||null,amount:parseFloat(V.amount),amount_paid:V.payment_status==="partial"?parseFloat(V.amount_paid):null,expense_account_id:V.expense_account_id,reference_number:V.reference_number},{headers:{Authorization:`Bearer ${t}`}}),ae(),ne()}catch(Oe){W(Oe.response?.data?.message||"Failed to save expense.")}finally{te(!1)}},ce=V.amount&&V.amount_paid?(parseFloat(V.amount)-parseFloat(V.amount_paid)).toFixed(2):"",De=async Le=>{if(window.confirm("Are you sure you want to delete this expense?")){u(Le);try{await re.delete(`${se}/expenses/expenses/${Le}`,{headers:{Authorization:`Bearer ${t}`}}),ne()}catch{alert("Failed to delete expense.")}finally{u(null)}}},ye=async Le=>{h(!0),w(!0),v(null);try{const Oe=await re.get(`${se}/expenses/expenses/${Le}`,{headers:{Authorization:`Bearer ${t}`}});v(Oe.data.data)}catch{v(null)}finally{w(!1)}},Ee=Math.ceil(R/k),Ke=a.length>0?(j-1)*k+1:0,Re=Math.min(j*k,R);return e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Expenses"}),e.jsx("p",{className:"report-subtitle",children:"Manage and track expense records."})]}),e.jsx("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"},children:e.jsxs("button",{onClick:Ae,className:"btn-checklist",children:[e.jsx(I,{icon:Ht}),"Add Expense"]})})]}),i&&e.jsx("div",{style:{padding:"10px 30px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",flexShrink:0},children:i}),e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsxs("div",{className:"report-filters-left",children:[e.jsx("form",{onSubmit:pe,className:"filter-group",children:e.jsxs("div",{className:"search-input-wrapper",style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:ua,className:"search-icon"}),e.jsx("input",{type:"text",value:$,onChange:Le=>A(Le.target.value),placeholder:"Search by description, supplier...",className:"filter-input search-input"}),$&&e.jsx("button",{onClick:()=>{A(""),_(""),T(1)},style:{position:"absolute",right:"8px",padding:"4px 6px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},title:"Clear search",children:""})]})}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Start Date:"}),e.jsx("input",{type:"date",value:B,onChange:Le=>{T(1),D(Le.target.value)},className:"filter-input",style:{minWidth:"150px",width:"150px"}}),B&&e.jsx("button",{onClick:()=>{T(1),D("")},style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear start date",children:""})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"End Date:"}),e.jsx("input",{type:"date",value:C,onChange:Le=>{T(1),L(Le.target.value)},className:"filter-input",style:{minWidth:"150px",width:"150px"}}),C&&e.jsx("button",{onClick:()=>{T(1),L("")},style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear end date",children:""})]})]})}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:s?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading expenses..."}):i?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#dc2626",fontSize:"0.75rem"},children:i}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px",width:"100px"},children:"DATE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"DESCRIPTION"}),e.jsx("th",{style:{padding:"6px 10px",textAlign:"right",width:"120px"},children:"DEBIT"}),e.jsx("th",{style:{padding:"6px 10px",textAlign:"right",width:"120px"},children:"CREDIT"}),e.jsx("th",{style:{padding:"6px 10px",width:"100px"},children:"REFERENCE"}),e.jsx("th",{style:{padding:"6px 10px",width:"100px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[a.map((Le,Oe)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:Oe%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:Le.expense_date}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[e.jsx("div",{style:{fontWeight:500},children:Le.description}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:[Le.supplier_name?`Supplier: ${Le.supplier_name}`:"",Le.supplier_name&&Le.payment_method?"  ":"",Le.payment_method?`${Le.payment_method}`:"",Le.payment_status?` (${Le.payment_status})`:""]})]})}),e.jsxs("td",{style:{padding:"4px 10px",textAlign:"right",color:"#dc2626",fontWeight:500},children:[parseFloat(Le.amount||0).toFixed(2)," ",Le.currency_code||""]}),e.jsx("td",{style:{padding:"4px 10px",textAlign:"right",color:"#059669"},children:"-"}),e.jsx("td",{style:{padding:"4px 10px",fontSize:"0.7rem",color:"var(--text-secondary)"},children:Le.journal_description||"-"}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>ye(Le.id),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0},title:"View",children:e.jsx(I,{icon:qa})}),e.jsx("button",{onClick:()=>H(`/dashboard/expenses/expenses/edit/${Le.id}`),style:{color:"#6366f1",background:"none",border:"none",cursor:"pointer",padding:0},title:"Edit",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>De(Le.id),disabled:c===Le.id,style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:0,opacity:c===Le.id?.5:1},title:"Delete",children:c===Le.id?"...":e.jsx(I,{icon:sa})})]})})]},Le.id)),Array.from({length:Math.max(0,25-a.length)}).map((Le,Oe)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(a.length+Oe)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${Oe}`))]})]})}),e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",Ke," to ",Re," of ",R||0," results."]}),e.jsxs("div",{className:"table-footer-right",children:[Ee>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>T(Math.max(1,j-1)),disabled:j===1,children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",j," of ",Ee]}),e.jsx("button",{className:"pagination-btn",onClick:()=>T(Math.min(Ee,j+1)),disabled:j===Ee,children:"Next"})]}),Ee<=1&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"All data displayed"})]})]}),m&&e.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:e.jsx("div",{className:"modal-dialog",onClick:Le=>Le.stopPropagation(),style:{maxWidth:"600px",minHeight:N?"400px":"auto"},children:N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{style:{marginTop:"15px",color:"var(--text-secondary)"},children:"Loading expense details..."})]}),e.jsx("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}})})]}):g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Expense Details"}),e.jsx("button",{className:"modal-close-btn",onClick:()=>h(!1),children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px 30px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Date"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:g.expense_date||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Supplier"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:g.supplier_name||"-"})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Description"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:g.description||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Amount"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:parseFloat(g.amount||0).toFixed(2)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Currency"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:g.currency_code||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Payment Method"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:g.payment_method||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Payment Status"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:g.payment_status||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Journal"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:g.journal_description||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Recorded At"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:g.created_at||"N/A"})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:()=>h(!1),children:"Close"})})]}):e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",borderRadius:"4px"},children:"Failed to load expense details."}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:()=>h(!1),children:"Close"})})]})})}),p&&e.jsx("div",{className:"modal-overlay",onClick:ae,children:e.jsx("div",{className:"modal-dialog",onClick:Le=>Le.stopPropagation(),style:{maxWidth:"800px",minHeight:fe?"400px":"auto"},children:fe?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{style:{marginTop:"15px",color:"var(--text-secondary)"},children:"Loading..."})]}),e.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{height:"32px",width:"100px",background:"#e5e7eb",borderRadius:"4px"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Add Expense"}),e.jsx("button",{className:"modal-close-btn",onClick:ae,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[J&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:J}),e.jsxs("form",{onSubmit:Ne,className:"modal-form",children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:BN,style:{color:"#2563eb"}}),"Expense Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Expense Date ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"date",name:"expense_date",className:"form-control",value:V.expense_date,onChange:ke,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Supplier"}),e.jsxs("select",{name:"supplier_id",className:"form-control",value:V.supplier_id,onChange:ke,children:[e.jsx("option",{value:"",children:"-- None --"}),oe.map(Le=>e.jsx("option",{value:Le.id,children:Le.name},Le.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Total Amount ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"number",name:"amount",className:"form-control",placeholder:"Enter amount",value:V.amount,onChange:ke,required:!0,step:"0.01",min:"0"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"currency_id",className:"form-control",value:V.currency_id,onChange:ke,required:!0,children:[e.jsx("option",{value:"",children:"-- Select --"}),G.map(Le=>e.jsxs("option",{value:Le.id,children:[Le.code," - ",Le.name]},Le.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Expense Account ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"expense_account_id",className:"form-control",value:V.expense_account_id,onChange:ke,required:!0,children:[e.jsx("option",{value:"",children:"-- Select --"}),Z.map(Le=>e.jsxs("option",{value:Le.id,children:[Le.code," - ",Le.name]},Le.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Reference Number ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",name:"reference_number",className:"form-control",placeholder:"Enter or generate",value:V.reference_number,onChange:ke,required:!0}),e.jsx("button",{type:"button",onClick:()=>Y(Le=>({...Le,reference_number:ie()})),className:"modal-btn",style:{background:"#6b7280",color:"white",padding:"6px 12px",whiteSpace:"nowrap",fontSize:"0.7rem"},children:"Generate"})]})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("input",{type:"text",name:"description",className:"form-control",placeholder:"Enter expense description",value:V.description,onChange:ke})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Za,style:{color:"#10b981"}}),"Payment Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Payment Method ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"payment_method",className:"form-control",value:V.payment_method,onChange:ke,required:!0,children:[e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Cheque",children:"Cheque"}),e.jsx("option",{value:"Mobile Money",children:"Mobile Money"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Payment Status ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"payment_status",className:"form-control",value:V.payment_status,onChange:ke,required:!0,children:[e.jsx("option",{value:"full",children:"Full Payment"}),e.jsx("option",{value:"partial",children:"Partial Payment"}),e.jsx("option",{value:"debt",children:"Credit/Debt"})]})]}),V.payment_status==="partial"&&e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsxs("label",{className:"form-label",children:["Amount Paid ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"number",name:"amount_paid",className:"form-control",placeholder:"Enter amount paid",value:V.amount_paid,onChange:ke,required:V.payment_status==="partial",step:"0.01",min:"0"}),ce&&e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginTop:"4px"},children:["Remaining: ",ce]})]})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:ae,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:Ne,disabled:X,children:X?"Saving...":"Save Expense"})]})]})})})]})},noe=()=>{const{token:t}=At(),a=Da(),[r,s]=x.useState({supplier_id:"",amount:"",currency_id:"",expense_date:"",description:"",payment_method:"cash",payment_status:"full",expense_account_id:"",amount_paid:"",reference_number:""}),[n,i]=x.useState(""),[o,c]=x.useState(!1),[u,m]=x.useState([]),[h,p]=x.useState([]),[y,g]=x.useState([]),v=async()=>{try{const P=await re.get(`${se}/expenses/suppliers`,{headers:{Authorization:`Bearer ${t}`}});m(P.data.data||[])}catch{}},N=async()=>{try{const P=await re.get(`${se}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}});p(P.data.data||[])}catch{}},w=async()=>{try{const $=(await re.get(`${se}/accounting/chart-of-accounts`,{headers:{Authorization:`Bearer ${t}`}})).data.data||[];g($.filter(A=>A.type==="Expense"))}catch{}};x.useEffect(()=>{v(),N(),w()},[]);const j=P=>{const{name:$,value:A}=P.target;if(s(M=>({...M,[$]:A})),$==="amount"&&r.payment_status==="partial"){const M=parseFloat(A)||0;(parseFloat(r.amount_paid)||0)>M&&s(B=>({...B,amount_paid:A}))}},T=()=>{const P=Date.now(),$=Math.floor(Math.random()*1e3);return`EXP-${P}-${$}`},k=async P=>{P.preventDefault(),c(!0),i("");try{if(!r.amount||!r.currency_id||!r.expense_date||!r.payment_method||!r.payment_status||!r.expense_account_id){i("Please fill all required fields."),c(!1);return}if(!r.reference_number){i("Please add a reference number."),c(!1);return}if(r.payment_status==="partial"){if(!r.amount_paid||parseFloat(r.amount_paid)<=0){i("Please enter the amount paid for partial payment."),c(!1);return}if(parseFloat(r.amount_paid)>=parseFloat(r.amount)){i("Amount paid must be less than total amount for partial payment."),c(!1);return}}await re.post(`${se}/expenses/expenses`,{...r,supplier_id:r.supplier_id||null,amount:parseFloat(r.amount),amount_paid:r.payment_status==="partial"?parseFloat(r.amount_paid):null,expense_account_id:r.expense_account_id,reference_number:r.reference_number},{headers:{Authorization:`Bearer ${t}`}}),a("/dashboard/expenses/expenses")}catch{i("Failed to save expense.")}finally{c(!1)}},R=r.amount&&r.amount_paid?(parseFloat(r.amount)-parseFloat(r.amount_paid)).toFixed(2):"";return e.jsxs("div",{className:"bg-white border border-gray-200 p-4 w-full",children:[e.jsx("h1",{className:"text-base font-medium text-gray-900 mb-4",children:"Record Expense"}),e.jsxs("form",{onSubmit:k,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Supplier"}),e.jsxs("select",{name:"supplier_id",value:r.supplier_id,onChange:j,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"-- None --"}),u.map(P=>e.jsx("option",{value:P.id,children:P.name},P.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Total Amount"}),e.jsx("input",{type:"number",name:"amount",value:r.amount,onChange:j,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Currency"}),e.jsxs("select",{name:"currency_id",value:r.currency_id,onChange:j,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"",children:"-- Select --"}),h.map(P=>e.jsx("option",{value:P.id,children:P.code},P.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("input",{type:"date",name:"expense_date",value:r.expense_date,onChange:j,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Expense Account"}),e.jsxs("select",{name:"expense_account_id",value:r.expense_account_id,onChange:j,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"",children:"-- Select --"}),y.map(P=>e.jsxs("option",{value:P.id,children:[P.code," - ",P.name]},P.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Payment Method"}),e.jsxs("select",{name:"payment_method",value:r.payment_method,onChange:j,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Cheque",children:"Cheque"}),e.jsx("option",{value:"Mobile Money",children:"Mobile Money"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Payment Status"}),e.jsxs("select",{name:"payment_status",value:r.payment_status,onChange:j,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"full",children:"Full Payment"}),e.jsx("option",{value:"partial",children:"Partial Payment"}),e.jsx("option",{value:"debt",children:"Credit/Debt"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reference Number"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",name:"reference_number",value:r.reference_number,onChange:j,placeholder:"Enter reference",className:"flex-1 border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"}),e.jsx("button",{type:"button",onClick:()=>s(P=>({...P,reference_number:T()})),className:"bg-gray-600 text-white px-2 py-1.5 text-xs hover:bg-gray-700",children:"Auto"})]})]}),r.payment_status==="partial"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Amount Paid"}),e.jsx("input",{type:"number",name:"amount_paid",value:r.amount_paid,onChange:j,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,step:"0.01"}),R&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Remaining: ",R]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("input",{type:"text",name:"description",value:r.description,onChange:j,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),n&&e.jsx("div",{className:"text-xs text-red-600",children:n}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",className:"px-3 py-1.5 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",onClick:()=>a("/dashboard/expenses/expenses"),children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-3 py-1.5 bg-gray-900 text-white text-xs hover:bg-gray-800",disabled:o,children:o?"Saving...":"Save Expense"})]})]})]})},ioe=()=>{const{token:t}=At(),a=Da(),{id:r}=Tn(),[s,n]=x.useState({supplier_id:"",amount:"",currency_id:"",expense_date:"",description:"",payment_method:"cash",payment_status:"full"}),[i,o]=x.useState(""),[c,u]=x.useState(!1),[m,h]=x.useState([]),[p,y]=x.useState([]),[g,v]=x.useState(null),[N,w]=x.useState(!0),j=async()=>{try{const A=await re.get(`${se}/expenses/suppliers`,{headers:{Authorization:`Bearer ${t}`}});h(A.data.data||[])}catch{}},T=async()=>{try{const A=await re.get(`${se}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}});y(A.data.data||[])}catch{}},k=async()=>{try{const M=(await re.get(`${se}/accounting/chart-of-accounts`,{headers:{Authorization:`Bearer ${t}`}})).data.data||[],_=M.find(B=>B.code==="5000")||M.find(B=>B.type==="Expense");v(_)}catch{}},R=async()=>{w(!0);try{const M=(await re.get(`${se}/expenses/expenses/${r}`,{headers:{Authorization:`Bearer ${t}`}})).data.data;n({supplier_id:M.supplier_id||"",amount:M.amount||"",currency_id:M.currency_id||"",expense_date:M.expense_date||"",description:M.description||"",payment_method:M.payment_method||"cash",payment_status:M.payment_status||"full"})}catch{o("Failed to load expense.")}finally{w(!1)}};x.useEffect(()=>{j(),T(),k(),R()},[r]);const P=A=>{const{name:M,value:_}=A.target;n(B=>({...B,[M]:_}))},$=async A=>{A.preventDefault(),u(!0),o("");try{if(!s.amount||!s.currency_id||!s.expense_date||!s.payment_method||!s.payment_status){o("Please fill all required fields."),u(!1);return}await re.put(`${se}/expenses/expenses/${r}`,{...s,supplier_id:s.supplier_id||null,amount:parseFloat(s.amount)},{headers:{Authorization:`Bearer ${t}`}}),a("/dashboard/expenses/expenses")}catch{o("Failed to update expense.")}finally{u(!1)}};return N?e.jsx("div",{className:"flex items-center justify-center h-64 text-xs text-gray-500",children:"Loading expense..."}):e.jsxs("div",{className:"p-6 w-full max-w-5xl mx-auto",children:[e.jsx("h1",{className:"text-base font-semibold text-gray-800 mb-6",children:"Edit Expense"}),e.jsxs("form",{onSubmit:$,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Supplier"}),e.jsxs("select",{name:"supplier_id",value:s.supplier_id,onChange:P,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0},children:[e.jsx("option",{value:"",children:"-- None --"}),m.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Amount"}),e.jsx("input",{type:"number",name:"amount",value:s.amount,onChange:P,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0},required:!0,step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Currency"}),e.jsxs("select",{name:"currency_id",value:s.currency_id,onChange:P,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0},required:!0,children:[e.jsx("option",{value:"",children:"-- Select --"}),p.map(A=>e.jsx("option",{value:A.id,children:A.code},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Date"}),e.jsx("input",{type:"date",name:"expense_date",value:s.expense_date,onChange:P,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0},required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Expense Account"}),e.jsx("input",{type:"text",value:g?`${g.code} - ${g.name}`:"",className:"w-full border border-gray-300 px-2 py-1 text-xs bg-gray-100",style:{borderRadius:0},readOnly:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Description"}),e.jsx("input",{type:"text",name:"description",value:s.description,onChange:P,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Payment Method"}),e.jsxs("select",{name:"payment_method",value:s.payment_method,onChange:P,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0},required:!0,children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"bank",children:"Bank"}),e.jsx("option",{value:"credit",children:"Credit"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Payment Status"}),e.jsxs("select",{name:"payment_status",value:s.payment_status,onChange:P,className:"w-full border border-gray-300 px-2 py-1 text-xs",style:{borderRadius:0},required:!0,children:[e.jsx("option",{value:"full",children:"Full"}),e.jsx("option",{value:"partial",children:"Partial"}),e.jsx("option",{value:"debt",children:"Debt"})]})]})]}),i&&e.jsx("div",{className:"text-xs text-red-600",children:i}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[e.jsx("button",{type:"button",className:"px-3 py-1 text-xs text-gray-700 bg-gray-200 hover:bg-gray-300",style:{borderRadius:0},onClick:()=>a("/dashboard/expenses/expenses"),children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-3 py-1 text-xs text-white bg-gray-900 hover:bg-gray-800",style:{borderRadius:0},disabled:c,children:c?"Saving...":"Save"})]})]})]})},loe=()=>{const{token:t}=At();Da();const[a,r]=x.useState([]),[s,n]=x.useState({}),[i,o]=x.useState(!0),[c,u]=x.useState(""),[m,h]=x.useState(""),[p,y]=x.useState(""),[g,v]=x.useState(1),[N,w]=x.useState(20),[j,T]=x.useState(0),[k,R]=x.useState(!1),[P,$]=x.useState(null),[A,M]=x.useState({amount:"",currency_id:"",payment_date:"",payment_method:"cash",description:""}),[_,B]=x.useState([]),[D,C]=x.useState(!1),[L,H]=x.useState(!1),[V,Y]=x.useState(null),[J,W]=x.useState([]),[X,te]=x.useState(!1),[oe,q]=x.useState(!1),[G,z]=x.useState([]),[Z,Q]=x.useState({supplier_id:"",amount:"",description:"",reference_number:"",due_date:"",opening_balance_date:"",currency_id:1}),[fe,he]=x.useState(!1),ne=async()=>{try{const Re=await re.get(`${se}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}});B(Re.data.data||[])}catch{}},me=async()=>{try{const Re=await re.get(`${se}/expenses/suppliers`,{headers:{Authorization:`Bearer ${t}`}});z(Re.data.data||[])}catch{}},pe=async()=>{try{o(!0);const Re=new URLSearchParams({page:g.toString(),pageSize:N.toString()});m&&Re.append("search",m),p&&Re.append("status",p);const Le=await re.get(`${se}/expenses/accounts-payable?${Re}`,{headers:{Authorization:`Bearer ${t}`}});r(Le.data.data||[]),T(Le.data.total||0)}catch{u("Failed to load accounts payable")}finally{o(!1)}},ie=async()=>{try{const Re=await re.get(`${se}/expenses/accounts-payable/summary`,{headers:{Authorization:`Bearer ${t}`}});n(Re.data.data||{})}catch{}},ke=async Re=>{try{te(!0);const Le=await re.get(`${se}/expenses/accounts-payable/${Re}/payments`,{headers:{Authorization:`Bearer ${t}`}});W(Le.data.data||[])}catch(Le){console.error("Error fetching transactions:",Le)}finally{te(!1)}};x.useEffect(()=>{ne(),me(),pe(),ie()},[g,N,m,p]);const Ae=Re=>{h(Re.target.value),v(1)},ae=Re=>{y(Re.target.value),v(1)},Ne=Re=>{$(Re),M({amount:Re.outstanding_balance,currency_id:Re.currency_id,payment_date:new Date().toISOString().split("T")[0],payment_method:"cash",description:`Payment for ${Re.expense_description}`}),u(""),R(!0)},ce=async Re=>{Y(Re),H(!0),await ke(Re.id)},De=async Re=>{Re.preventDefault(),C(!0),u("");try{await re.post(`${se}/expenses/accounts-payable/${P.id}/pay`,{amount:parseFloat(A.amount),currency_id:P.currency_id,payment_date:A.payment_date,payment_method:A.payment_method,description:A.description},{headers:{Authorization:`Bearer ${t}`}}),R(!1),u(""),pe(),ie()}catch(Le){console.error("Payment error:",Le),u(Le.response?.data?.message||Le.message)}finally{C(!1)}},ye=async Re=>{Re.preventDefault(),he(!0);try{await re.post(`${se}/expenses/accounts-payable/opening-balance`,{supplier_id:Z.supplier_id||null,amount:parseFloat(Z.amount),description:Z.description,reference_number:Z.reference_number,due_date:Z.due_date||null,opening_balance_date:Z.opening_balance_date,currency_id:Z.currency_id},{headers:{Authorization:`Bearer ${t}`}}),q(!1),Q({supplier_id:"",amount:"",description:"",reference_number:"",due_date:"",opening_balance_date:"",currency_id:1}),pe(),ie(),alert("Opening balance created successfully!")}catch(Le){console.error("Opening balance error:",Le),u("Failed to create opening balance: "+(Le.response?.data?.message||Le.message))}finally{he(!1)}},Ee=Re=>{switch(Re){case"outstanding":return"text-red-600 bg-red-100";case"partial":return"text-yellow-600 bg-yellow-100";case"paid":return"text-green-600 bg-green-100";case"overdue":return"text-red-800 bg-red-200";default:return"text-gray-600 bg-gray-100"}},Ke=(Re,Le)=>`${Le} ${parseFloat(Re).toFixed(2)}`;return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-bold text-gray-900 mb-2",children:"Accounts Payable"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage outstanding payments and track transaction history"})]}),e.jsx("button",{onClick:()=>q(!0),className:"bg-blue-600 text-white px-4 py-2 text-xs hover:bg-blue-700 flex items-center space-x-2",children:e.jsx("span",{children:"+ Add Opening Balance"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white p-4 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Total Payables"}),e.jsx("div",{className:"text-lg font-semibold",children:s.total_payables||0})]}),e.jsxs("div",{className:"bg-white p-4 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Total Outstanding"}),e.jsx("div",{className:"text-lg font-semibold text-red-600",children:s.total_outstanding?Ke(s.total_outstanding,"USD"):"USD 0.00"})]}),e.jsxs("div",{className:"bg-white p-4 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Outstanding"}),e.jsx("div",{className:"text-lg font-semibold text-red-600",children:s.outstanding_count||0})]}),e.jsxs("div",{className:"bg-white p-4 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Overdue"}),e.jsx("div",{className:"text-lg font-semibold text-red-800",children:s.overdue_count||0})]})]}),e.jsx("div",{className:"bg-white p-4 border border-gray-200 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Search"}),e.jsx("input",{type:"text",value:m,onChange:Ae,placeholder:"Search by supplier, description...",className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Status"}),e.jsxs("select",{value:p,onChange:ae,className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"outstanding",children:"Outstanding"}),e.jsx("option",{value:"partial",children:"Partial"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"overdue",children:"Overdue"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Page Size"}),e.jsxs("select",{value:N,onChange:Re=>w(Number(Re.target.value)),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"})]})]})]})}),e.jsx("div",{className:"mt-8 flex flex-col",children:e.jsx("div",{className:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Payable To"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Description"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Original Amount"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Paid Amount"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Outstanding"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Due Date"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-3 py-4 text-center text-xs text-gray-500",children:"Loading..."})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-3 py-4 text-center text-xs text-gray-500",children:"No accounts payable found"})}):a.map(Re=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:Re.payable_to||"Non-Supplier"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:Re.expense_description})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:Ke(Re.original_amount,Re.currency_code)})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:Ke(Re.paid_amount,Re.currency_code)})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900 font-medium",children:Ke(Re.outstanding_balance,Re.currency_code)})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded ${Ee(Re.status)}`,children:Re.status})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:Re.due_date||"Not set"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ce(Re),className:"text-blue-600 hover:text-blue-900",title:"View Transactions",children:e.jsx(I,{icon:qa,className:"h-3 w-3"})}),Re.status!=="paid"&&e.jsx("button",{onClick:()=>Ne(Re),className:"text-green-600 hover:text-green-900",title:"Make Payment",children:"Pay"})]})})]},Re.id))})]})})})})}),j>N&&e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:["Showing ",(g-1)*N+1," to ",Math.min(g*N,j)," of ",j," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>v(g-1),disabled:g===1,className:"px-3 py-1 text-xs text-gray-700 bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>v(g+1),disabled:g*N>=j,className:"px-3 py-1 text-xs text-gray-700 bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:"Next"})]})]}),k&&P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 w-full max-w-md",children:[c&&e.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 text-xs rounded",children:[e.jsx("strong",{children:"Error:"})," ",c]}),e.jsx("h2",{className:"text-base font-semibold mb-4",children:"Make Payment"}),e.jsxs("form",{onSubmit:De,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Amount"}),e.jsx("input",{type:"number",value:A.amount,onChange:Re=>M(Le=>({...Le,amount:Re.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",required:!0,step:"0.01",max:P.outstanding_balance})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Payment Date"}),e.jsx("input",{type:"date",value:A.payment_date,onChange:Re=>M(Le=>({...Le,payment_date:Re.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Payment Method"}),e.jsxs("select",{value:A.payment_method,onChange:Re=>M(Le=>({...Le,payment_method:Re.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"bank",children:"Bank"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:A.description,onChange:Re=>M(Le=>({...Le,description:Re.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{R(!1),u("")},className:"px-4 py-1 text-xs text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:D,className:"px-4 py-1 text-xs text-white bg-gray-900 hover:bg-gray-800",children:D?"Processing...":"Make Payment"})]})]})]})}),L&&V&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-base font-semibold",children:"Transaction History"}),e.jsx("button",{onClick:()=>H(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Payable Details"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Payable To:"}),e.jsx("div",{className:"font-medium",children:V.payable_to||"Non-Supplier"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Description:"}),e.jsx("div",{className:"font-medium",children:V.expense_description})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Outstanding:"}),e.jsx("div",{className:"font-medium text-red-600",children:Ke(V.outstanding_balance,V.currency_code)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("div",{className:"font-medium",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded ${Ee(V.status)}`,children:V.status})})]})]})]}),X?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"text-xs text-gray-500",children:"Loading transactions..."})}):J.length===0?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"text-xs text-gray-500",children:"No transactions found"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Payment Date"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Amount Paid"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Payment Method"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Description"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:J.map(Re=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:new Date(Re.payment_date).toLocaleDateString()})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900 font-medium",children:Ke(Re.amount_paid,V.currency_code)})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900 capitalize",children:Re.payment_method})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:Re.description||"N/A"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-green-100 text-green-800",children:Re.status})})]},Re.id))})]})})]})}),oe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold",children:"Add Opening Balance"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Record historical debt or payable"})]}),e.jsx("button",{onClick:()=>q(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),e.jsxs("form",{onSubmit:ye,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Supplier ",e.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),e.jsxs("select",{value:Z.supplier_id,onChange:Re=>Q(Le=>({...Le,supplier_id:Re.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Supplier (Optional)"}),G.map(Re=>e.jsx("option",{value:Re.id,children:Re.name},Re.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:Z.amount,onChange:Re=>Q(Le=>({...Le,amount:Re.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:"e.g., 50000.00"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:Z.description,onChange:Re=>Q(Le=>({...Le,description:Re.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:"3",required:!0,placeholder:"e.g., City Council - Historical Debt from 2020"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Reference Number"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:Z.reference_number,onChange:Re=>Q(Le=>({...Le,reference_number:Re.target.value})),className:"flex-1 border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., CC-2020-DEBT"}),e.jsx("button",{type:"button",onClick:()=>{const Re=Date.now(),Le=Math.floor(Math.random()*1e3).toString().padStart(3,"0"),Oe=`OB-${new Date().getFullYear()}-${Le}-${Re.toString().slice(-4)}`;Q($e=>({...$e,reference_number:Oe}))},className:"px-3 py-1 text-xs bg-gray-600 text-white hover:bg-gray-700 whitespace-nowrap",children:"Auto Generate"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank or click Auto Generate"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Opening Balance Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:Z.opening_balance_date,onChange:Re=>Q(Le=>({...Le,opening_balance_date:Re.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",value:Z.due_date,onChange:Re=>Q(Le=>({...Le,due_date:Re.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 mt-4",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"Note:"})," This will create a journal entry debiting Retained Earnings (3998) and crediting Accounts Payable (2000). This ensures historical debts don't inflate current period expenses. The payable will appear in the list above and can be paid off like any other payable."]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>q(!1),className:"px-4 py-2 text-xs text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:fe,className:"px-4 py-2 text-xs text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:fe?"Creating...":"Create Opening Balance"})]})]})]})})]})},ooe=()=>{const{token:t}=At(),a=Da(),[r,s]=x.useState([]),[n,i]=x.useState(!0),[o,c]=x.useState(null),[u,m]=x.useState(""),[h,p]=x.useState(""),[y,g]=x.useState(1),[v,N]=x.useState(1),[w,j]=x.useState(0),[T]=x.useState(25),[k,R]=x.useState(!1),[P,$]=x.useState(!1),[A,M]=x.useState(null),[_,B]=x.useState([]),[D,C]=x.useState(!1),[L,H]=x.useState(!1),[V,Y]=x.useState(null),[J,W]=x.useState([]),[X,te]=x.useState(!1),[oe,q]=x.useState({message:null,type:"success",visible:!1});x.useEffect(()=>{G()},[y,h]);const G=async()=>{try{if(i(!0),c(null),h&&h.trim()!==""){console.log(" Searching for:",h);const De=(await re.get(`${se}/classes/gradelevel-classes`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data.data||[],ye=h.trim().toLowerCase(),Ee=De.filter(Ke=>Ke.name&&Ke.name.toLowerCase().includes(ye)||Ke.stream_name&&Ke.stream_name.toLowerCase().includes(ye)||Ke.stream_stage&&Ke.stream_stage.toLowerCase().includes(ye));s(Ee),N(1),j(Ee.length)}else{console.log(" Fetching all classes");const De=(await re.get(`${se}/classes/gradelevel-classes`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data;console.log(" Raw response:",De);const ye=De.data||[],Ee=(y-1)*T,Ke=Ee+T,Re=ye.slice(Ee,Ke),Le=Math.ceil(ye.length/T);s(Re),N(Le),j(ye.length)}}catch(ce){console.error("Error fetching classes:",ce),ce.response?c(`Error: ${ce.response.status} - ${ce.response.data?.message||ce.response.statusText}`):ce.request?c("No response from server. Please check your connection."):c(`Error: ${ce.message}`)}finally{i(!1)}},z=ce=>{ce.preventDefault(),console.log(" Starting search with term:",u),p(u),g(1)},Z=async ce=>{R(!0),$(!0),M(null),B([]);try{const De=await re.get(`${se}/classes/gradelevel-classes/${ce}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});M(De.data.data),C(!0);let Ee=(await re.get(`${se}/classes/gradelevel-classes/${ce}/students`,{headers:{Authorization:`Bearer ${t}`}})).data.data||[];const Ke=new Date().getFullYear(),Re="1";try{const Oe=(await re.get(`${se}/results/results/class-positions`,{headers:{Authorization:`Bearer ${t}`},params:{gradelevel_class_id:ce,term:Re,academic_year:Ke}})).data.data||[];Ee=Ee.map($e=>{const ct=Oe.find(Nt=>Nt.RegNumber===$e.RegNumber);return{...$e,position:ct?.position||null,total_marks:ct?.total_mark||null,average:ct?.average||null,grade:ct?.grade||null}})}catch{console.log("No position data available")}B(Ee)}catch(De){console.error("Error fetching class:",De),ie("Failed to load class details","error"),R(!1)}finally{$(!1),C(!1)}},Q=()=>{R(!1),M(null),B([]),$(!1),C(!1)},fe=async ce=>{H(!0),te(!0),Y(ce),W([]);try{const De=await re.get(`${se}/results/results/student/${ce.RegNumber}`,{headers:{Authorization:`Bearer ${t}`},params:{gradelevel_class_id:A?.id}});W(De.data.data||[])}catch(De){console.error("Error fetching student results:",De),ie("Failed to fetch student results","error")}finally{te(!1)}},he=()=>{H(!1),Y(null),W([]),te(!1)},ne=ce=>ce===1?e.jsx(I,{icon:Jc,style:{color:"#f59e0b",fontSize:"0.875rem"}}):ce===2?e.jsx(I,{icon:zN,style:{color:"#6b7280",fontSize:"0.875rem"}}):ce===3?e.jsx(I,{icon:WN,style:{color:"#f97316",fontSize:"0.875rem"}}):null,me=ce=>ce===1?{background:"#fef3c7",color:"#92400e"}:ce===2?{background:"#f3f4f6",color:"#374151"}:ce===3?{background:"#fed7aa",color:"#9a3412"}:{background:"#dbeafe",color:"#1e40af"},pe=ce=>{window.location.href=`/dashboard/results/entry/${ce}`},ie=(ce,De="success",ye=3e3)=>{q({message:ce,type:De,visible:!0}),ye>0&&setTimeout(()=>{q(Ee=>({...Ee,visible:!1})),setTimeout(()=>{q({message:null,type:"success",visible:!1})},300)},ye)},ke=ce=>{const De={width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"};return ce==="success"?e.jsxs("svg",{...De,children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}):ce==="error"?e.jsxs("svg",{...De,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}):ce==="info"?e.jsxs("svg",{...De,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}):null},Ae=ce=>{switch(ce){case"success":return"#10b981";case"error":return"#ef4444";case"info":return"#2563eb";case"warning":return"#f59e0b";default:return"#10b981"}},ae=r.length>0?(y-1)*T+1:0,Ne=Math.min(y*T,w);return r.length>0,n&&r.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading classes..."})}):e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Results"}),e.jsx("p",{className:"report-subtitle",children:"View and manage student results by class."})]}),e.jsx("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"},children:e.jsxs("button",{onClick:()=>a("/dashboard/results/grading"),className:"btn-checklist",style:{fontSize:"0.7rem",padding:"6px 12px"},children:[e.jsx(I,{icon:Qc,style:{marginRight:"4px",fontSize:"0.7rem"}}),"Grading Criteria"]})})]}),e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsx("div",{className:"report-filters-left",children:e.jsx("form",{onSubmit:z,className:"filter-group",children:e.jsxs("div",{className:"search-input-wrapper",style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:ua,className:"search-icon"}),e.jsx("input",{type:"text",value:u,onChange:ce=>m(ce.target.value),placeholder:"Search by class name, stream, or stage...",className:"filter-input search-input"}),u&&e.jsx("button",{onClick:()=>{m(""),p(""),g(1)},style:{position:"absolute",right:"8px",padding:"4px 6px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},title:"Clear search",children:""})]})})})}),o&&e.jsx("div",{style:{padding:"10px 30px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem"},children:o}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:n&&r.length===0?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading classes..."}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"CLASS NAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STAGE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STREAM"}),e.jsx("th",{style:{padding:"6px 10px"},children:"CAPACITY"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[r.map((ce,De)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:De%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:vh,style:{color:"#64748b",fontSize:"0.875rem"}}),e.jsx("div",{style:{fontWeight:500},children:ce.name})]})}),e.jsx("td",{style:{padding:"4px 10px"},children:ce.stream_stage||"N/A"}),e.jsx("td",{style:{padding:"4px 10px"},children:ce.stream_name||"N/A"}),e.jsx("td",{style:{padding:"4px 10px"},children:ce.capacity||"Unlimited"}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>Z(ce.id),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0},title:"View Results",children:e.jsx(I,{icon:qa})}),e.jsx("button",{onClick:()=>pe(ce.id),style:{color:"#10b981",background:"none",border:"none",cursor:"pointer",padding:0},title:"Add Result",children:e.jsx(I,{icon:Ht})})]})})]},ce.id)),Array.from({length:Math.max(0,25-r.length)}).map((ce,De)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(r.length+De)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${De}`))]})]})}),e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",ae," to ",Ne," of ",w||0," results."]}),e.jsxs("div",{className:"table-footer-right",children:[!h&&v>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>g(Math.max(1,y-1)),disabled:y===1,children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",y," of ",v]}),e.jsx("button",{className:"pagination-btn",onClick:()=>g(Math.min(v,y+1)),disabled:y===v,children:"Next"})]}),!h&&v<=1&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"All data displayed"})]})]}),k&&e.jsx("div",{className:"modal-overlay",onClick:Q,children:e.jsx("div",{className:"modal-dialog",onClick:ce=>ce.stopPropagation(),style:{maxWidth:"900px",minHeight:P?"400px":"auto",maxHeight:"90vh"},children:P?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{style:{marginTop:"15px",color:"var(--text-secondary)"},children:"Loading class results..."})]}),e.jsx("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}})})]}):A?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",style:{color:"#000000"},children:["Class Results - ",A.name]}),e.jsx("button",{className:"modal-close-btn",onClick:Q,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"modal-body",style:{maxHeight:"60vh",overflowY:"auto"},children:D?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"40px"},children:e.jsx("div",{className:"loading-spinner"})}):_.length===0?e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--text-secondary)"},children:e.jsx("p",{style:{margin:0,fontSize:"0.875rem"},children:"No students found in this class"})}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"POSITION"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STUDENT NAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"REGISTRATION NUMBER"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsx("tbody",{children:_.map((ce,De)=>{const ye=ce.position,Ee=ye?me(ye):{background:"#f3f4f6",color:"#6b7280"};return e.jsxs("tr",{style:{height:"32px",backgroundColor:De%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:ye?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[ne(ye),e.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:500,...Ee},children:ye})]}):e.jsx("span",{style:{color:"#6b7280",fontSize:"0.75rem"},children:"N/A"})}),e.jsxs("td",{style:{padding:"4px 10px"},children:[ce.Surname," ",ce.Name]}),e.jsx("td",{style:{padding:"4px 10px"},children:ce.RegNumber}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsx("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:e.jsx("button",{onClick:()=>fe(ce),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0},title:"View Results",children:e.jsx(I,{icon:qa})})})})]},ce.RegNumber)})})]})})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:Q,children:"Close"})})]}):null})}),L&&V&&e.jsx("div",{className:"modal-overlay",onClick:he,children:e.jsx("div",{className:"modal-dialog",onClick:ce=>ce.stopPropagation(),style:{maxWidth:"800px",minHeight:X?"400px":"auto",maxHeight:"90vh"},children:X?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{style:{marginTop:"15px",color:"var(--text-secondary)"},children:"Loading student results..."})]}),e.jsx("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",style:{color:"#000000"},children:[V.Surname," ",V.Name," - Results"]}),e.jsx("button",{className:"modal-close-btn",onClick:he,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"modal-body",style:{maxHeight:"60vh",overflowY:"auto"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:0,fontSize:"0.95rem",fontWeight:"700",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:as,style:{color:"#2563eb"}}),"Student Information"]}),e.jsx("div",{style:{padding:"12px",background:"#f9fafb",borderRadius:"6px",border:"1px solid #e5e7eb",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",fontSize:"0.85rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:600,color:"var(--text-secondary)"},children:"Registration Number:"})," ",e.jsx("span",{style:{color:"var(--text-primary)"},children:V.RegNumber})]}),e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:600,color:"var(--text-secondary)"},children:"Class:"})," ",e.jsx("span",{style:{color:"var(--text-primary)"},children:A?.name||"N/A"})]})]})})]}),J.length===0?e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"var(--text-secondary)"},children:e.jsx("p",{style:{margin:0,fontSize:"0.875rem"},children:"No results found for this student"})}):e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:0,fontSize:"0.95rem",fontWeight:"700",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:vh,style:{color:"#2563eb"}}),"Subject Results"]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"SUBJECT"}),e.jsx("th",{style:{padding:"6px 10px"},children:"COURSEWORK"}),e.jsx("th",{style:{padding:"6px 10px"},children:"PAPER MARKS"}),e.jsx("th",{style:{padding:"6px 10px"},children:"TOTAL"}),e.jsx("th",{style:{padding:"6px 10px"},children:"GRADE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"POINTS"})]})}),e.jsx("tbody",{children:J.map((ce,De)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:De%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px",fontWeight:500},children:ce.subject_name||"N/A"}),e.jsx("td",{style:{padding:"4px 10px"},children:ce.coursework_mark||"N/A"}),e.jsx("td",{style:{padding:"4px 10px"},children:ce.total_paper_marks||"N/A"}),e.jsx("td",{style:{padding:"4px 10px",fontWeight:500},children:ce.total_marks||"N/A"}),e.jsx("td",{style:{padding:"4px 10px",fontWeight:500},children:ce.grade||"N/A"}),e.jsx("td",{style:{padding:"4px 10px"},children:ce.points||"N/A"})]},ce.id))})]})})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:he,children:"Close"})})]})})}),oe.visible&&oe.message&&e.jsx("div",{className:"success-toast",children:e.jsxs("div",{className:"success-toast-content",style:{background:Ae(oe.type)},children:[ke(oe.type),e.jsx("span",{children:oe.message})]})})]})},coe=()=>{const{token:t}=At();Da();const[a,r]=x.useState([]),[s,n]=x.useState(!0),[i,o]=x.useState(""),[c,u]=x.useState(""),[m,h]=x.useState(!1),[p,y]=x.useState(!1),[g,v]=x.useState(null),[N,w]=x.useState({grade:"",min_mark:"",max_mark:"",points:"",description:""}),[j,T]=x.useState(!1);x.useEffect(()=>{k()},[]);const k=async()=>{try{n(!0);const _=await re.get(`${se}/results/grading`,{headers:{Authorization:`Bearer ${t}`}});r(_.data.data||[])}catch(_){console.error("Error fetching grading criteria:",_),o("Failed to fetch grading criteria")}finally{n(!1)}},R=async _=>{_.preventDefault(),T(!0);try{const B={...N,min_mark:parseInt(N.min_mark),max_mark:parseInt(N.max_mark),points:parseInt(N.points)};await re.post(`${se}/results/grading`,B,{headers:{Authorization:`Bearer ${t}`}}),h(!1),w({grade:"",min_mark:"",max_mark:"",points:"",description:""}),k()}catch(B){console.error("Error adding grading criterion:",B),o("Failed to add grading criterion: "+(B.response?.data?.message||B.message))}finally{T(!1)}},P=async _=>{_.preventDefault(),T(!0);try{const B={...N,min_mark:parseInt(N.min_mark),max_mark:parseInt(N.max_mark),points:parseInt(N.points)};await re.put(`${se}/results/grading/${g.id}`,B,{headers:{Authorization:`Bearer ${t}`}}),y(!1),v(null),w({grade:"",min_mark:"",max_mark:"",points:"",description:""}),k()}catch(B){console.error("Error updating grading criterion:",B),o("Failed to update grading criterion: "+(B.response?.data?.message||B.message))}finally{T(!1)}},$=async _=>{if(window.confirm(`Are you sure you want to delete grade "${_.grade}"?`))try{await re.delete(`${se}/results/grading/${_.id}`,{headers:{Authorization:`Bearer ${t}`}}),k()}catch(B){console.error("Error deleting grading criterion:",B),o("Failed to delete grading criterion: "+(B.response?.data?.message||B.message))}},A=_=>{v(_),w({grade:_.grade,min_mark:_.min_mark.toString(),max_mark:_.max_mark.toString(),points:_.points.toString(),description:_.description||""}),y(!0)},M=a.filter(_=>_.grade.toLowerCase().includes(c.toLowerCase())||_.description&&_.description.toLowerCase().includes(c.toLowerCase()));return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-base font-bold text-gray-900 mb-2",children:"Grading Criteria"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage grade ranges and points for automatic grade calculation"})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:ua,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-3 w-3"}),e.jsx("input",{type:"text",placeholder:"Search grades...",value:c,onChange:_=>u(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("button",{onClick:()=>h(!0),className:"ml-4 px-4 py-2 bg-gray-900 text-white text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(I,{icon:Ht,className:"mr-2 h-3 w-3"}),"Add Grade"]})]}),e.jsx("div",{className:"bg-white border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mark Range"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-3 py-4 text-center text-xs text-gray-500",children:"Loading..."})}):M.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-3 py-4 text-center text-xs text-gray-500",children:c?"No grades found matching your search":"No grading criteria found"})}):M.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-bold text-gray-900",children:_.grade})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"text-xs text-gray-900",children:[_.min_mark," - ",_.max_mark]})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-medium text-gray-900",children:_.points})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("div",{className:"text-xs text-gray-900",children:_.description||"No description"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${_.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:_.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>A(_),className:"text-blue-600 hover:text-blue-900",title:"Edit Grade",children:e.jsx(I,{icon:Aa,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>$(_),className:"text-red-600 hover:text-red-900",title:"Delete Grade",children:e.jsx(I,{icon:sa,className:"h-3 w-3"})})]})})]},_.id))})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 w-full max-w-md rounded-lg",children:[e.jsx("h2",{className:"text-base font-semibold mb-4",children:"Add New Grade"}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Grade *"}),e.jsx("input",{type:"text",value:N.grade,onChange:_=>w(B=>({...B,grade:_.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,placeholder:"e.g., A, B, C, D, E, F"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Min Mark *"}),e.jsx("input",{type:"number",value:N.min_mark,onChange:_=>w(B=>({...B,min_mark:_.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:"0",max:"100",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Max Mark *"}),e.jsx("input",{type:"number",value:N.max_mark,onChange:_=>w(B=>({...B,max_mark:_.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:"0",max:"100",placeholder:"100"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Points *"}),e.jsx("input",{type:"number",value:N.points,onChange:_=>w(B=>({...B,points:_.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:"0",placeholder:"e.g., 12 for A, 10 for B"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Description"}),e.jsx("textarea",{value:N.description,onChange:_=>w(B=>({...B,description:_.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:"2",placeholder:"Optional description (e.g., Excellent, Good, Pass)"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{h(!1),w({grade:"",min_mark:"",max_mark:"",points:"",description:""})},className:"px-4 py-1 text-xs text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:j,className:"px-4 py-1 text-xs text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50",children:j?"Adding...":"Add Grade"})]})]})]})}),p&&g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 w-full max-w-md rounded-lg",children:[e.jsx("h2",{className:"text-base font-semibold mb-4",children:"Edit Grade"}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Grade *"}),e.jsx("input",{type:"text",value:N.grade,onChange:_=>w(B=>({...B,grade:_.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Min Mark *"}),e.jsx("input",{type:"number",value:N.min_mark,onChange:_=>w(B=>({...B,min_mark:_.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Max Mark *"}),e.jsx("input",{type:"number",value:N.max_mark,onChange:_=>w(B=>({...B,max_mark:_.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:"0",max:"100"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Points *"}),e.jsx("input",{type:"number",value:N.points,onChange:_=>w(B=>({...B,points:_.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Description"}),e.jsx("textarea",{value:N.description,onChange:_=>w(B=>({...B,description:_.target.value})),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:"2"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{y(!1),v(null),w({grade:"",min_mark:"",max_mark:"",points:"",description:""})},className:"px-4 py-1 text-xs text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:j,className:"px-4 py-1 text-xs text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50",children:j?"Updating...":"Update Grade"})]})]})]})}),i&&e.jsx("div",{className:"mt-4 text-xs text-red-600",children:i})]})},doe=()=>{const{token:t}=At(),{classId:a}=Tn(),r=Da(),s=Co(),n=s.state?.editMode||!1,i=s.state?.resultData||null,o=s.state?.studentId||null,[c,u]=x.useState(!1),[m,h]=x.useState(""),[p,y]=x.useState(""),[g,v]=x.useState(null),[N,w]=x.useState([]),[j,T]=x.useState([]),[k,R]=x.useState([]),[P,$]=x.useState(""),[A,M]=x.useState(""),[_,B]=x.useState(""),[D,C]=x.useState(new Date().getFullYear().toString()),[L,H]=x.useState(""),[V,Y]=x.useState([{name:"Paper 1",mark:""}]),[J,W]=x.useState(!1);x.useEffect(()=>{a&&(X(),te(),oe(),q())},[a]),x.useEffect(()=>{n&&i&&o&&($(i.subject_class_id.toString()),M(o),B(i.term),C(i.academic_year),G())},[n,i,o]);const X=async()=>{try{const ie=await re.get(`${se}/classes/gradelevel-classes/${a}`,{headers:{Authorization:`Bearer ${t}`}});v(ie.data.data)}catch(ie){console.error("Error fetching class info:",ie)}},te=async()=>{try{const ie=await re.get(`${se}/classes/subject-classes?gradelevel_class_id=${a}`,{headers:{Authorization:`Bearer ${t}`}});w(ie.data.data||[])}catch(ie){console.error("Error fetching subjects:",ie)}},oe=async()=>{try{const ie=await re.get(`${se}/classes/gradelevel-classes/${a}/students`,{headers:{Authorization:`Bearer ${t}`}});T(ie.data.data||[])}catch(ie){console.error("Error fetching students:",ie)}},q=async()=>{try{const ie=await re.get(`${se}/results/grading`,{headers:{Authorization:`Bearer ${t}`}});R(ie.data.data||[])}catch(ie){console.error("Error fetching grading criteria:",ie)}},G=async()=>{try{const ie=await re.get(`${se}/results/coursework`,{headers:{Authorization:`Bearer ${t}`},params:{reg_number:o,subject_class_id:i.subject_class_id,gradelevel_class_id:a,term:i.term,academic_year:i.academic_year}});if(ie.data.data&&ie.data.data.length>0&&H(ie.data.data[0].coursework_mark.toString()),i.paper_marks&&i.paper_marks.length>0){const ke=i.paper_marks.map(Ae=>({name:Ae.paper_name,mark:Ae.mark.toString()}));Y(ke)}}catch(ie){console.error("Error loading existing data:",ie)}},z=()=>{Y([...V,{name:`Paper ${V.length+1}`,mark:""}])},Z=ie=>{if(V.length>1){const ke=V.filter((Ae,ae)=>ae!==ie);Y(ke)}},Q=(ie,ke,Ae)=>{const ae=[...V];ae[ie][ke]=Ae,Y(ae)},fe=()=>{const ie=V.filter(ae=>ae.mark&&parseFloat(ae.mark)>0);if(ie.length===0)return 0;const Ae=ie.reduce((ae,Ne)=>ae+(parseFloat(Ne.mark)||0),0)/ie.length;return Math.round(Ae*100)/100},he=ie=>{const ke=k.find(Ae=>ie>=Ae.min_mark&&ie<=Ae.max_mark);return ke?{grade:ke.grade,points:ke.points}:{grade:"N/A",points:0}},ne=async()=>{if(console.log("=== VALIDATION CHECK ==="),console.log("selectedSubject:",P),console.log("selectedStudent:",A),console.log("selectedTerm:",_),console.log("selectedYear:",D),console.log("courseworkMark:",L),console.log("paperMarks:",V),console.log("editMode:",n),!P||!A||!_||!D){console.log(" VALIDATION FAILED - Missing required fields"),h("Please fill in all required fields");return}W(!0);try{const ie=fe(),ke=he(ie);if(console.log("=== CALCULATED VALUES ==="),console.log("totalMarks:",ie),console.log("gradeInfo:",ke),n&&i){if(console.log(" UPDATING EXISTING RESULT"),L){const Ae={reg_number:A,subject_class_id:P,gradelevel_class_id:a,term:_,academic_year:D,coursework_mark:parseFloat(L)};console.log(" UPDATING COURSEWORK:",Ae),await re.post(`${se}/results/coursework`,Ae,{headers:{Authorization:`Bearer ${t}`}}),console.log(" Coursework updated successfully")}for(let Ae=0;Ae<V.length;Ae++){const ae=V[Ae];if(ae.mark){let Ne=null;try{const ce={name:ae.name,description:`${ae.name} for ${P}`};console.log(" CREATING PAPER:",ce),Ne=(await re.post(`${se}/results/papers`,ce,{headers:{Authorization:`Bearer ${t}`}})).data.data.id,console.log(" Paper created successfully with ID:",Ne)}catch{console.log(" Paper creation failed, trying to get existing paper");try{const ye=(await re.get(`${se}/results/papers`,{headers:{Authorization:`Bearer ${t}`}})).data.data.find(Ee=>Ee.name===ae.name);if(ye)Ne=ye.id,console.log(" Found existing paper, ID:",Ne);else{console.error(" Could not find or create paper");continue}}catch{console.error(" Could not get existing papers");continue}}if(Ne){const ce={result_id:i.id,paper_id:Ne,mark:parseFloat(ae.mark)};console.log(" UPDATING PAPER MARK:",ce),await re.post(`${se}/results/results/paper-mark`,ce,{headers:{Authorization:`Bearer ${t}`}}),console.log(" Paper mark updated successfully")}}else console.log(" Skipping empty paper mark:",ae)}y("Result updated successfully!")}else{if(console.log(" CREATING NEW RESULT"),L){const ce={reg_number:A,subject_class_id:P,gradelevel_class_id:a,term:_,academic_year:D,coursework_mark:parseFloat(L)};console.log(" SAVING COURSEWORK:",ce),await re.post(`${se}/results/coursework`,ce,{headers:{Authorization:`Bearer ${t}`}}),console.log(" Coursework saved successfully")}else console.log(" No coursework mark to save");const Ae={reg_number:A,subject_class_id:P,gradelevel_class_id:a,term:_,academic_year:D};console.log(" SAVING MAIN RESULT:",Ae);const ae=await re.post(`${se}/results/results`,Ae,{headers:{Authorization:`Bearer ${t}`}});console.log(" Main result saved successfully");const Ne=ae.data.data.id;for(let ce=0;ce<V.length;ce++){const De=V[ce];if(De.mark){let ye=null;try{const Ee={name:De.name,description:`${De.name} for ${P}`};console.log(" CREATING PAPER:",Ee),ye=(await re.post(`${se}/results/papers`,Ee,{headers:{Authorization:`Bearer ${t}`}})).data.data.id,console.log(" Paper created successfully with ID:",ye)}catch{console.log(" Paper creation failed, trying to get existing paper");try{const Re=(await re.get(`${se}/results/papers`,{headers:{Authorization:`Bearer ${t}`}})).data.data.find(Le=>Le.name===De.name);if(Re)ye=Re.id,console.log(" Found existing paper, ID:",ye);else{console.error(" Could not find or create paper");continue}}catch{console.error(" Could not get existing papers");continue}}if(ye){const Ee={result_id:Ne,paper_id:ye,mark:parseFloat(De.mark)};console.log(" SAVING PAPER MARK:",Ee),await re.post(`${se}/results/results/paper-mark`,Ee,{headers:{Authorization:`Bearer ${t}`}}),console.log(" Paper mark saved successfully")}}else console.log(" Skipping empty paper mark:",De)}y("Result saved successfully!"),H(""),Y([{name:"Paper 1",mark:""}]),M("")}setTimeout(()=>{r(`/dashboard/results/student/${a}/${A}`)},1500)}catch(ie){console.error(" ERROR SAVING RESULT:",ie),console.error("Error response:",ie.response?.data),console.error("Error status:",ie.response?.status),console.error("Error message:",ie.message),h("Failed to save result: "+(ie.response?.data?.message||ie.message))}finally{W(!1)}},me=fe(),pe=he(me);return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-base font-bold text-gray-900 mb-2",children:n?"Edit Result":"Enter Results"}),g&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Class: ",g.name," - ",g.stream_stage," - ",g.stream_name]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Subject *"}),e.jsxs("select",{value:P,onChange:ie=>$(ie.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Subject"}),N.map(ie=>e.jsx("option",{value:ie.id,children:ie.subject_name},ie.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Student *"}),e.jsxs("select",{value:A,onChange:ie=>M(ie.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Student"}),j.map(ie=>e.jsxs("option",{value:ie.RegNumber,children:[ie.Surname," ",ie.Name," (",ie.RegNumber,")"]},ie.RegNumber))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Term *"}),e.jsxs("select",{value:_,onChange:ie=>B(ie.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Academic Year *"}),e.jsx("input",{type:"text",value:D,onChange:ie=>C(ie.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Coursework Mark"}),e.jsx("input",{type:"number",value:L,onChange:ie=>H(ie.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",min:"0",max:"100",step:"0.1",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-xs text-gray-600",children:"Paper Marks"}),e.jsxs("button",{type:"button",onClick:z,className:"text-blue-600 hover:text-blue-900 text-xs flex items-center",children:[e.jsx(I,{icon:Ht,className:"h-3 w-3 mr-1"}),"Add Paper"]})]}),e.jsx("div",{className:"space-y-2",children:V.map((ie,ke)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:ie.name,onChange:Ae=>Q(ke,"name",Ae.target.value),className:"flex-1 border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Paper name"}),e.jsx("input",{type:"number",value:ie.mark,onChange:Ae=>Q(ke,"mark",Ae.target.value),className:"w-20 border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",min:"0",max:"100",step:"0.1",placeholder:"0"}),V.length>1&&e.jsx("button",{type:"button",onClick:()=>Z(ke),className:"text-red-600 hover:text-red-900",children:e.jsx(I,{icon:sa,className:"h-3 w-3"})})]},ke))})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-200",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase mb-2",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Coursework:"})," ",L||"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Paper Average:"})," ",me]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Grade:"})," ",pe.grade]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Points:"})," ",pe.points]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("button",{onClick:ne,disabled:J||!P||!A||!_||!D,className:"px-4 py-2 bg-gray-900 text-white text-xs hover:bg-gray-800 disabled:opacity-50 flex items-center",children:[e.jsx(I,{icon:ns,className:"mr-2 h-3 w-3"}),J?"Saving...":n?"Update Result":"Save Result"]})})]}),m&&e.jsx("div",{className:"mt-4 text-xs text-red-600",children:m}),p&&e.jsx("div",{className:"mt-4 text-xs text-green-600",children:p})]})},uoe=()=>{const{token:t}=At(),{classId:a}=Tn(),r=Da(),[s,n]=x.useState(null),[i,o]=x.useState([]),[c,u]=x.useState(!0),[m,h]=x.useState("");x.useEffect(()=>{a&&(p(),y())},[a]);const p=async()=>{try{const j=await re.get(`${se}/classes/gradelevel-classes/${a}`,{headers:{Authorization:`Bearer ${t}`}});n(j.data.data)}catch(j){console.error("Error fetching class info:",j)}},y=async()=>{try{u(!0);const T=(await re.get(`${se}/classes/gradelevel-classes/${a}/students`,{headers:{Authorization:`Bearer ${t}`}})).data.data||[];if(T.length>0){const k=new Date().getFullYear(),R="1";try{const $=(await re.get(`${se}/results/results/class-positions`,{headers:{Authorization:`Bearer ${t}`},params:{gradelevel_class_id:a,term:R,academic_year:k}})).data.data||[],A=T.map(M=>{const _=$.find(B=>B.RegNumber===M.RegNumber);return{...M,position:_?.position||"N/A",total_marks:_?.total_mark||"N/A",average:_?.average||"N/A",grade:_?.grade||"N/A"}});o(A)}catch{console.log("No position data available, showing students without positions"),o(T)}}else o([])}catch(j){console.error("Error fetching students:",j),h("Failed to fetch students")}finally{u(!1)}},g=j=>{r(`/dashboard/results/student/${a}/${j.RegNumber}`)},v=()=>{r(`/dashboard/results/entry/${a}`)},N=j=>j===1?e.jsx(I,{icon:Jc,className:"h-3 w-3 text-yellow-500"}):j===2?e.jsx(I,{icon:zN,className:"h-3 w-3 text-gray-400"}):j===3?e.jsx(I,{icon:WN,className:"h-3 w-3 text-orange-500"}):null,w=j=>j===1?"bg-yellow-100 text-yellow-800":j===2?"bg-gray-100 text-gray-800":j===3?"bg-orange-100 text-orange-800":j==="N/A"?"bg-gray-100 text-gray-600":"bg-blue-100 text-blue-800";return e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"mb-6",children:e.jsx("h1",{className:"text-base font-bold text-gray-900 mb-2",children:"Class Results"})}),s&&e.jsx("div",{className:"bg-white border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Class Name"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Stage"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.stream_stage||"N/A"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Stream"}),e.jsx("p",{className:"text-sm text-gray-900",children:s.stream_name||"N/A"})]})]})}),e.jsx("div",{className:"flex justify-end mb-6",children:e.jsxs("button",{onClick:v,className:"px-4 py-2 bg-gray-900 text-white text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(I,{icon:Ht,className:"mr-2 h-3 w-3"}),"Add Result"]})}),e.jsx("div",{className:"bg-white border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Name"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registration Number"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-3 py-4 text-center text-xs text-gray-500",children:"Loading..."})}):i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-3 py-4 text-center text-xs text-gray-500",children:"No students found in this class"})}):i.map((j,T)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[j.position!=="N/A"&&N(j.position),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${w(j.position)}`,children:j.position!=="N/A"?j.position:"N/A"})]})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"text-xs font-bold text-gray-900",children:[j.Surname," ",j.Name]})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:j.RegNumber})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs font-medium",children:e.jsx("button",{onClick:()=>g(j),className:"text-blue-600 hover:text-blue-900",title:"View Student Results",children:e.jsx(I,{icon:qa,className:"h-3 w-3"})})})]},j.RegNumber))})]})}),m&&e.jsx("div",{className:"mt-4 text-xs text-red-600",children:m})]})},moe=()=>{const{token:t}=At(),{classId:a,studentId:r}=Tn(),s=Da(),[n,i]=x.useState(null),[o,c]=x.useState(null),[u,m]=x.useState([]),[h,p]=x.useState(null),[y,g]=x.useState(null),[v,N]=x.useState([]),[w,j]=x.useState(!0),[T,k]=x.useState(""),[R,P]=x.useState(!1),[$,A]=x.useState(null);x.useEffect(()=>{a&&r&&(M(),_(),B(),D(),L())},[a,r]),x.useEffect(()=>{n&&n.stream_id&&r&&C()},[n,r]);const M=async()=>{try{const X=await re.get(`${se}/classes/gradelevel-classes/${a}`,{headers:{Authorization:`Bearer ${t}`}});i(X.data.data)}catch(X){console.error("Error fetching class info:",X)}},_=async()=>{try{const te=(await re.get(`${se}/classes/gradelevel-classes/${a}/students`,{headers:{Authorization:`Bearer ${t}`}})).data.data.find(oe=>oe.RegNumber===r);te&&c(te)}catch(X){console.error("Error fetching student info:",X)}},B=async()=>{try{j(!0);const X=new Date().getFullYear(),oe=await re.get(`${se}/results/results`,{headers:{Authorization:`Bearer ${t}`},params:{reg_number:r,gradelevel_class_id:a,term:"1",academic_year:X}});m(oe.data.data||[])}catch(X){console.error("Error fetching student results:",X),k("Failed to fetch student results")}finally{j(!1)}},D=async()=>{try{const X=new Date().getFullYear(),G=((await re.get(`${se}/results/results/class-positions`,{headers:{Authorization:`Bearer ${t}`},params:{gradelevel_class_id:a,term:"1",academic_year:X}})).data.data||[]).find(z=>z.RegNumber===r);G&&p(G)}catch(X){console.error("Error fetching student position:",X)}},C=async()=>{try{const X=new Date().getFullYear(),te="1";if(n&&n.stream_id){const G=((await re.get(`${se}/results/results/stream-positions`,{headers:{Authorization:`Bearer ${t}`},params:{stream_id:n.stream_id,term:te,academic_year:X}})).data.data||[]).find(z=>z.RegNumber===r);G&&g(G)}}catch(X){console.error("Error fetching student stream position:",X)}},L=async()=>{try{const X=new Date().getFullYear(),oe=await re.get(`${se}/results/coursework`,{headers:{Authorization:`Bearer ${t}`},params:{reg_number:r,gradelevel_class_id:a,term:"1",academic_year:X}});N(oe.data.data||[])}catch(X){console.error("Error fetching coursework marks:",X)}},H=X=>X===1?e.jsx(I,{icon:Jc,className:"h-3 w-3 text-yellow-500"}):X===2?e.jsx(I,{icon:zN,className:"h-3 w-3 text-gray-400"}):X===3?e.jsx(I,{icon:WN,className:"h-3 w-3 text-orange-500"}):null,V=X=>X===1?"bg-yellow-100 text-yellow-800":X===2?"bg-gray-100 text-gray-800":X===3?"bg-orange-100 text-orange-800":X==="N/A"?"bg-gray-100 text-gray-600":"bg-blue-100 text-blue-800",Y=X=>{s(`/dashboard/results/entry/${a}`,{state:{editMode:!0,resultData:X,studentId:r}})},J=X=>{A(X),P(!0)},W=async()=>{try{await re.delete(`${se}/results/results/${$.id}`,{headers:{Authorization:`Bearer ${t}`}}),B(),D(),C(),P(!1),A(null)}catch(X){console.error("Error deleting result:",X),k("Failed to delete result")}};return e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"mb-6",children:e.jsx("h1",{className:"text-base font-bold text-gray-900 mb-2",children:"Student Results"})}),o&&e.jsx("div",{className:"bg-white border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Student Name"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[o.Surname," ",o.Name]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Registration Number"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.RegNumber})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Class"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Grade Level"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.stream_stage||"N/A"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Stream"}),e.jsx("p",{className:"text-sm text-gray-900",children:n?.stream_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Gender"}),e.jsx("p",{className:"text-sm text-gray-900",children:o.Gender})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Term"}),e.jsx("p",{className:"text-sm text-gray-900",children:"Term 1"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Academic Year"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date().getFullYear()})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Class Position"}),e.jsx("p",{className:"text-sm text-gray-900",children:h?e.jsxs("span",{className:"flex items-center",children:[H(h.position),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${V(h.position)}`,children:h.position})]}):"N/A"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Stream Position"}),e.jsx("p",{className:"text-sm text-gray-900",children:y?e.jsxs("span",{className:"flex items-center",children:[H(y.streamPosition),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${V(y.streamPosition)}`,children:y.streamPosition})]}):"N/A"})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"Subject Results"})}),w?e.jsx("div",{className:"px-4 py-8 text-center text-xs text-gray-500",children:"Loading results..."}):u.length===0?e.jsx("div",{className:"px-4 py-8 text-center text-xs text-gray-500",children:"No results found for this student"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coursework"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paper Marks"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(X=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-medium text-gray-900",children:X.subject_name})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:(()=>{const te=v.find(oe=>oe.subject_class_id===X.subject_class_id);return te?te.coursework_mark:"N/A"})()})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs text-gray-900",children:X.paper_marks&&X.paper_marks.length>0?e.jsx("div",{children:X.paper_marks.map((te,oe)=>e.jsxs("div",{className:"text-xs",children:[te.paper_name,": ",te.mark]},oe))}):"N/A"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-medium text-gray-900",children:X.total_mark||"N/A"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-medium text-gray-900",children:X.grade||"N/A"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Y(X),className:"text-blue-600 hover:text-blue-900",title:"Edit Result",children:e.jsx(I,{icon:Aa,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>J(X),className:"text-red-600 hover:text-red-900",title:"Delete Result",children:e.jsx(I,{icon:sa,className:"h-3 w-3"})})]})})]},X.id))})]})})]}),T&&e.jsx("div",{className:"mt-4 text-xs text-red-600",children:T}),R&&$&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 w-full max-w-md",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"Delete Result"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Are you sure you want to delete the result for"," ",e.jsx("span",{className:"font-semibold",children:$.subject_name}),"?"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This action cannot be undone."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{P(!1),A(null)},className:"px-4 py-2 text-xs bg-gray-300 text-gray-700 hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{onClick:W,className:"px-4 py-2 text-xs bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})})]})},hoe=()=>{const{token:t}=At();Da();const[a,r]=x.useState(!1),[s,n]=x.useState(""),[i,o]=x.useState(""),[c,u]=x.useState([]),[m,h]=x.useState([]),[p,y]=x.useState([]),[g,v]=x.useState([]),[N,w]=x.useState(""),[j,T]=x.useState(""),[k,R]=x.useState(""),[P,$]=x.useState(new Date().getFullYear().toString()),[A,M]=x.useState({}),[_,B]=x.useState(!1);x.useEffect(()=>{D()},[]),x.useEffect(()=>{N&&(C(),L())},[N]),x.useEffect(()=>{N&&j&&k&&P&&H()},[N,j,k,P]);const D=async()=>{try{const W=await re.get(`${se}/classes/gradelevel-classes`,{headers:{Authorization:`Bearer ${t}`}});u(W.data.data||[])}catch(W){console.error("Error fetching classes:",W)}},C=async()=>{try{const W=await re.get(`${se}/classes/subject-classes?gradelevel_class_id=${N}`,{headers:{Authorization:`Bearer ${t}`}});h(W.data.data||[])}catch(W){console.error("Error fetching subjects:",W)}},L=async()=>{try{const W=await re.get(`${se}/classes/gradelevel-classes/${N}/students`,{headers:{Authorization:`Bearer ${t}`}});y(W.data.data||[])}catch(W){console.error("Error fetching students:",W)}},H=async()=>{try{r(!0);const W=await re.get(`${se}/results/coursework`,{headers:{Authorization:`Bearer ${t}`},params:{gradelevel_class_id:N,subject_class_id:j,term:k,academic_year:P}});v(W.data.data||[]);const X={};W.data.data.forEach(te=>{X[te.reg_number]=te.coursework_mark}),M(X)}catch(W){console.error("Error fetching coursework:",W),n("Failed to fetch coursework")}finally{r(!1)}},V=(W,X)=>{M(te=>({...te,[W]:X}))},Y=async()=>{B(!0),n(""),o("");try{const W=[];Object.keys(A).forEach(X=>{const te=A[X];te!==void 0&&te!==""&&W.push(re.post(`${se}/results/coursework`,{reg_number:X,subject_class_id:j,gradelevel_class_id:N,academic_year:P,term:k,coursework_mark:parseFloat(te)},{headers:{Authorization:`Bearer ${t}`}}))}),await Promise.all(W),o("All coursework marks saved successfully!"),H()}catch(W){console.error("Error saving coursework:",W),n("Failed to save coursework: "+(W.response?.data?.message||W.message))}finally{B(!1)}},J=async()=>{B(!0),n(""),o("");try{const W=[];if(p.forEach(X=>{const te=A[X.RegNumber];te!==void 0&&te!==""&&W.push({reg_number:X.RegNumber,subject_class_id:j,gradelevel_class_id:N,academic_year:P,term:k,coursework_mark:parseFloat(te)})}),W.length===0){n("No coursework marks to save");return}await re.post(`${se}/results/coursework/bulk`,{coursework_data:W},{headers:{Authorization:`Bearer ${t}`}}),o(`Successfully saved ${W.length} coursework marks!`),H()}catch(W){console.error("Error bulk saving coursework:",W),n("Failed to save coursework: "+(W.response?.data?.message||W.message))}finally{B(!1)}};return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-base font-bold text-gray-900 mb-2",children:"Coursework Entry"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enter mid-term coursework marks for students"})]}),e.jsx("div",{className:"bg-white p-4 border border-gray-200 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Class"}),e.jsxs("select",{value:N,onChange:W=>w(W.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Class"}),c.map(W=>e.jsx("option",{value:W.id,children:W.name},W.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Subject"}),e.jsxs("select",{value:j,onChange:W=>T(W.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:!N,children:[e.jsx("option",{value:"",children:"Select Subject"}),m.map(W=>e.jsx("option",{value:W.id,children:W.name},W.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Term"}),e.jsxs("select",{value:k,onChange:W=>R(W.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Academic Year"}),e.jsx("input",{type:"text",value:P,onChange:W=>$(W.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 2024"})]})]})}),N&&j&&k&&P&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Coursework Entry - ",m.find(W=>W.id==j)?.name,"(",k," ",P,")"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:Y,disabled:_,className:"px-4 py-2 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50 flex items-center",children:[e.jsx(I,{icon:ns,className:"mr-2 h-3 w-3"}),_?"Saving...":"Save Marks"]}),e.jsxs("button",{onClick:J,disabled:_,className:"px-4 py-2 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 disabled:opacity-50 flex items-center",children:[e.jsx(I,{icon:Ht,className:"mr-2 h-3 w-3"}),_?"Saving...":"Bulk Save"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coursework Mark"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"px-3 py-4 text-center text-xs text-gray-500",children:"Loading..."})}):p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"px-3 py-4 text-center text-xs text-gray-500",children:"No students found in this class"})}):p.map(W=>{const X=g.find(te=>te.reg_number===W.RegNumber);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-900",children:[W.Surname," ",W.Name]}),e.jsx("div",{className:"text-xs text-gray-500",children:W.RegNumber})]}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:A[W.RegNumber]||"",onChange:te=>V(W.RegNumber,te.target.value),className:"w-20 border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${X?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:X?"Saved":"Not Saved"})})]},W.RegNumber)})})]})})]}),s&&e.jsx("div",{className:"mt-4 text-xs text-red-600",children:s}),i&&e.jsx("div",{className:"mt-4 text-xs text-green-600",children:i})]})},xoe=()=>{const[t,a]=x.useState([]),[r,s]=x.useState(!0),[n,i]=x.useState(null),[o,c]=x.useState(""),[u,m]=x.useState(""),[h,p]=x.useState(1),[y,g]=x.useState(1),[v,N]=x.useState(0),[w]=x.useState(25),[j,T]=x.useState(!1),[k,R]=x.useState(!1),[P,$]=x.useState(null),[A,M]=x.useState({name:"",description:"",location:"",gender:"Male"}),[_,B]=x.useState({message:null,type:"success",visible:!1}),[D,C]=x.useState(!1),[L,H]=x.useState(!1),[V,Y]=x.useState(null),[J,W]=x.useState(!1),[X,te]=x.useState(!1),[oe,q]=x.useState({id:"",name:"",description:"",location:"",gender:"Male"}),[G,z]=x.useState(null),[Z,Q]=x.useState(!1),[fe,he]=x.useState(!1),[ne,me]=x.useState(null),[pe,ie]=x.useState(!1),{token:ke}=At();x.useEffect(()=>{Ae()},[h,u]);const Ae=async()=>{try{if(s(!0),i(null),u&&u.trim()!==""){console.log(" Searching for:",u);const Xe=(await re.get(`${se}/boarding/hostels`,{params:{search:u.trim()},headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"}})).data.data||[],We=u.trim().toLowerCase(),Ge=Xe.filter(lt=>lt.name&&lt.name.toLowerCase().includes(We)||lt.location&&lt.location.toLowerCase().includes(We)||lt.description&&lt.description.toLowerCase().includes(We));a(Ge),g(1),N(Ge.length)}else{console.log(" Fetching all hostels");const Xe=(await re.get(`${se}/boarding/hostels`,{headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"}})).data;console.log(" Raw response:",Xe);const We=Xe.data||[],Ge=(h-1)*w,lt=Ge+w,Dt=We.slice(Ge,lt),It=Math.ceil(We.length/w);a(Dt),g(It),N(We.length)}}catch(qe){console.error("Error fetching hostels:",qe),qe.response?i(`Error: ${qe.response.status} - ${qe.response.data?.message||qe.response.statusText}`):qe.request?i("No response from server. Please check your connection."):i(`Error: ${qe.message}`)}finally{s(!1)}},ae=qe=>{qe.preventDefault(),console.log(" Starting search with term:",o),m(o),p(1)},Ne=()=>{T(!0),R(!0),setTimeout(()=>{R(!1)},300)},ce=()=>{T(!1),R(!1),$(null),M({name:"",description:"",location:"",gender:"Male"})},De=qe=>{const{name:Xe,value:We}=qe.target;M(Ge=>({...Ge,[Xe]:We}))},ye=async qe=>{qe.preventDefault(),R(!0),$(null);try{const Xe=await re.post(`${se}/boarding/hostels`,A,{headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"}});if(Xe.data.success){await Ae(),ce();const We=A.name;we(`Hostel ${We} has been successfully added!`,"success")}else $(Xe.data.message||"Failed to create hostel")}catch(Xe){console.error("Error creating hostel:",Xe);let We="An unexpected error occurred";if(Xe.response){const Ge=Xe.response.data;Ge?.error?We=Ge.error:We=Ge?.message||`Server Error (${Xe.response.status})`}else Xe.request?We="No response from server. Please check your internet connection.":We=Xe.message||"An unexpected error occurred";$(We)}finally{R(!1)}},Ee=async qe=>{C(!0),H(!0),Y(null);try{const Xe=await re.get(`${se}/boarding/hostels/${qe}`,{headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"}});Y(Xe.data.data)}catch(Xe){console.error("Error fetching hostel:",Xe),we("Failed to load hostel details","error"),C(!1)}finally{H(!1)}},Ke=()=>{C(!1),Y(null),H(!1)},Re=async qe=>{W(!0),te(!0),z(null),q({id:"",name:"",description:"",location:"",gender:"Male"});try{const We=(await re.get(`${se}/boarding/hostels/${qe}`,{headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"}})).data.data;q({id:We.id||"",name:We.name||"",description:We.description||"",location:We.location||"",gender:We.gender||"Male"})}catch(Xe){console.error("Error fetching hostel for edit:",Xe),we("Failed to load hostel details for editing","error"),W(!1)}finally{te(!1)}},Le=()=>{W(!1),q({id:"",name:"",description:"",location:"",gender:"Male"}),z(null),Q(!1)},Oe=qe=>{const{name:Xe,value:We}=qe.target;q(Ge=>({...Ge,[Xe]:We}))},$e=async qe=>{qe.preventDefault(),Q(!0),z(null);try{await re.put(`${se}/boarding/hostels/${oe.id}`,oe,{headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"}}),await Ae(),Le(),we(`Hostel ${oe.name} has been successfully updated!`,"success")}catch(Xe){console.error("Error updating hostel:",Xe);let We="An unexpected error occurred";if(Xe.response){const Ge=Xe.response.data;Ge?.error?We=Ge.error:We=Ge?.message||`Server Error (${Xe.response.status})`}else Xe.request?We="No response from server. Please check your internet connection.":We=Xe.message||"An unexpected error occurred";z(We)}finally{Q(!1)}},ct=()=>oe.name&&oe.location&&oe.gender,Nt=qe=>{me(qe),he(!0)},jt=()=>{he(!1),me(null),ie(!1)},xt=async()=>{if(ne){ie(!0);try{await re.delete(`${se}/boarding/hostels/${ne.id}`,{headers:{Authorization:`Bearer ${ke}`,"Content-Type":"application/json"}}),await Ae(),jt(),we(`Hostel ${ne.name} has been successfully deleted!`,"success")}catch(qe){console.error("Error deleting hostel:",qe);let Xe="Failed to delete hostel";qe.response?Xe=qe.response.data?.message||`Server Error (${qe.response.status})`:qe.request&&(Xe="No response from server. Please check your internet connection."),we(Xe,"error")}finally{ie(!1)}}},we=(qe,Xe="success",We=3e3)=>{B({message:qe,type:Xe,visible:!0}),We>0&&setTimeout(()=>{B(Ge=>({...Ge,visible:!1})),setTimeout(()=>{B({message:null,type:"success",visible:!1})},300)},We)},Ie=qe=>{const Xe={width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"};return qe==="success"?e.jsxs("svg",{...Xe,children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}):qe==="error"?e.jsxs("svg",{...Xe,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}):qe==="info"?e.jsxs("svg",{...Xe,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}):null},dt=qe=>{switch(qe){case"success":return"#10b981";case"error":return"#ef4444";case"info":return"#2563eb";case"warning":return"#f59e0b";default:return"#10b981"}},ut=()=>A.name&&A.location&&A.gender,Te=t.length>0?(h-1)*w+1:0,Ve=Math.min(h*w,v);return t.length>0,r&&t.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading hostels..."})}):e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Hostels"}),e.jsx("p",{className:"report-subtitle",children:"Manage boarding hostels and their details."})]}),e.jsx("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"},children:e.jsxs("button",{onClick:Ne,className:"btn-checklist",children:[e.jsx(I,{icon:Ht}),"Add Hostel"]})})]}),e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsx("div",{className:"report-filters-left",children:e.jsx("form",{onSubmit:ae,className:"filter-group",children:e.jsxs("div",{className:"search-input-wrapper",style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:ua,className:"search-icon"}),e.jsx("input",{type:"text",value:o,onChange:qe=>c(qe.target.value),placeholder:"Search by name, location, or description...",className:"filter-input search-input"}),o&&e.jsx("button",{onClick:()=>{c(""),m(""),p(1)},style:{position:"absolute",right:"8px",padding:"4px 6px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},title:"Clear search",children:""})]})})})}),n&&e.jsx("div",{style:{padding:"10px 30px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem"},children:n}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:r&&t.length===0?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading hostels..."}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"NAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"LOCATION"}),e.jsx("th",{style:{padding:"6px 10px"},children:"GENDER"}),e.jsx("th",{style:{padding:"6px 10px"},children:"TOTAL ROOMS"}),e.jsx("th",{style:{padding:"6px 10px"},children:"TOTAL CAPACITY"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[t.map((qe,Xe)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:Xe%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:qe.name}),e.jsx("td",{style:{padding:"4px 10px"},children:qe.location||"N/A"}),e.jsx("td",{style:{padding:"4px 10px"},children:qe.gender||"N/A"}),e.jsx("td",{style:{padding:"4px 10px"},children:qe.total_rooms||0}),e.jsx("td",{style:{padding:"4px 10px"},children:qe.total_capacity||0}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>Ee(qe.id),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0},title:"View",children:e.jsx(I,{icon:qa})}),e.jsx("button",{onClick:()=>Re(qe.id),style:{color:"#6366f1",background:"none",border:"none",cursor:"pointer",padding:0},title:"Edit",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>Nt(qe),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:0},title:"Delete",children:e.jsx(I,{icon:sa})})]})})]},qe.id)),Array.from({length:Math.max(0,25-t.length)}).map((qe,Xe)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(t.length+Xe)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${Xe}`))]})]})}),e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",Te," to ",Ve," of ",v||0," results."]}),e.jsxs("div",{className:"table-footer-right",children:[!u&&y>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>p(Math.max(1,h-1)),disabled:h===1,children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",h," of ",y]}),e.jsx("button",{className:"pagination-btn",onClick:()=>p(Math.min(y,h+1)),disabled:h===y,children:"Next"})]}),!u&&y<=1&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"All data displayed"})]})]}),j&&e.jsx("div",{className:"modal-overlay",onClick:ce,children:e.jsx("div",{className:"modal-dialog",onClick:qe=>qe.stopPropagation(),style:{maxWidth:"600px",minHeight:k?"400px":"auto"},children:k?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{style:{marginTop:"15px",color:"var(--text-secondary)"},children:"Loading..."})]}),e.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{height:"32px",width:"100px",background:"#e5e7eb",borderRadius:"4px"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Add Hostel"}),e.jsx("button",{className:"modal-close-btn",onClick:ce,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[P&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:P}),e.jsxs("form",{onSubmit:ye,className:"modal-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"name",className:"form-control",placeholder:"Enter hostel name",value:A.name,onChange:De,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{name:"description",className:"form-control",placeholder:"Enter hostel description (optional)",rows:"3",value:A.description,onChange:De})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Location ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"location",className:"form-control",placeholder:"Enter hostel location",value:A.location,onChange:De,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Gender ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"gender",className:"form-control",value:A.gender,onChange:De,required:!0,children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:ce,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:ye,disabled:!ut()||k,children:k?"Saving...":"Save Hostel"})]})]})})}),D&&e.jsx("div",{className:"modal-overlay",onClick:Ke,children:e.jsx("div",{className:"modal-dialog",onClick:qe=>qe.stopPropagation(),style:{maxWidth:"600px",minHeight:L?"400px":"auto"},children:L?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{style:{marginTop:"15px",color:"var(--text-secondary)"},children:"Loading hostel details..."})]}),e.jsx("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}})})]}):V?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",style:{color:"#000000"},children:["Hostel Details - ",V.name]}),e.jsx("button",{className:"modal-close-btn",onClick:Ke,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:0,fontSize:"0.95rem",fontWeight:"700",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Ri,style:{color:"#2563eb"}}),"Hostel Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px 30px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Name"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:V.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Location"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:V.location||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Gender"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:V.gender||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Total Rooms"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:V.total_rooms||0})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Total Capacity"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:V.total_capacity||0})]}),V.description&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Description"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:V.description})]})]})]})})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:Ke,children:"Close"})})]}):null})}),J&&e.jsx("div",{className:"modal-overlay",onClick:Le,children:e.jsx("div",{className:"modal-dialog",onClick:qe=>qe.stopPropagation(),style:{maxWidth:"600px",minHeight:X?"400px":"auto"},children:X?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{style:{marginTop:"15px",color:"var(--text-secondary)"},children:"Loading hostel details..."})]}),e.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{height:"32px",width:"100px",background:"#e5e7eb",borderRadius:"4px"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Edit Hostel"}),e.jsx("button",{className:"modal-close-btn",onClick:Le,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[G&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:G}),e.jsxs("form",{onSubmit:$e,className:"modal-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"name",className:"form-control",placeholder:"Enter hostel name",value:oe.name,onChange:Oe,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{name:"description",className:"form-control",placeholder:"Enter hostel description (optional)",rows:"3",value:oe.description,onChange:Oe})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Location ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"location",className:"form-control",placeholder:"Enter hostel location",value:oe.location,onChange:Oe,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Gender ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"gender",className:"form-control",value:oe.gender,onChange:Oe,required:!0,children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:Le,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:$e,disabled:!ct()||Z,children:Z?"Saving...":"Update Hostel"})]})]})})}),fe&&ne&&e.jsx("div",{className:"modal-overlay",onClick:jt,children:e.jsxs("div",{className:"modal-dialog",onClick:qe=>qe.stopPropagation(),style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Confirm Delete"}),e.jsx("button",{className:"modal-close-btn",onClick:jt,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#ef4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"4px"},children:"Are you sure you want to delete this hostel?"}),e.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-secondary)"},children:"This action cannot be undone."})]})]}),e.jsxs("div",{style:{padding:"12px",background:"#f9fafb",borderRadius:"4px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Hostel Information"}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Name:"})," ",ne.name]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Location:"})," ",ne.location||"N/A"]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Gender:"})," ",ne.gender||"N/A"]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:jt,disabled:pe,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-delete",onClick:xt,disabled:pe,children:pe?"Deleting...":"Delete Hostel"})]})]})}),_.visible&&_.message&&e.jsx("div",{className:"success-toast",children:e.jsxs("div",{className:"success-toast-content",style:{background:dt(_.type)},children:[Ie(_.type),e.jsx("span",{children:_.message})]})})]})},foe=()=>e.jsx(xoe,{}),poe=()=>{const[t,a]=x.useState(null),[r,s]=x.useState(!0),[n,i]=x.useState(""),[o,c]=x.useState("rooms"),{token:u}=At(),{id:m}=Tn();Da();const h=[{id:"rooms",name:"Rooms",icon:yy},{id:"enrollments",name:"Enrollments",icon:as},{id:"billing",name:"Billing",icon:PF}];x.useEffect(()=>{p()},[m]);const p=async()=>{try{s(!0);const g=await re.get(`${se}/boarding/hostels/${m}`,{headers:{Authorization:`Bearer ${u}`}});a(g.data.data)}catch(g){console.error("Error fetching hostel:",g),i("Failed to load hostel details")}finally{s(!1)}},y=()=>{switch(o){case"rooms":return e.jsx(vk,{hostelId:m});case"enrollments":return e.jsx(goe,{hostelId:m});case"billing":return e.jsx(yoe,{hostelId:m});default:return e.jsx(vk,{hostelId:m})}};return r?e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-6"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((g,v)=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},v))})]})}):n?e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 text-xs",children:n})}):t?e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage hostel details and operations"})]})})})}),e.jsxs("div",{className:"mb-6 bg-white border border-gray-200/30 p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Location"}),e.jsx("p",{className:"text-xs text-gray-900",children:t.location||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Gender"}),e.jsx("p",{className:"text-xs text-gray-900",children:t.gender||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Total Rooms"}),e.jsx("p",{className:"text-xs text-gray-900",children:t.total_rooms||0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Total Capacity"}),e.jsx("p",{className:"text-xs text-gray-900",children:t.total_capacity||0})]})]}),t.description&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Description"}),e.jsx("p",{className:"text-xs text-gray-900",children:t.description})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("nav",{className:"flex space-x-8 border-b border-gray-200",children:h.map(g=>e.jsxs("button",{onClick:()=>c(g.id),className:`py-2 px-1 border-b-2 font-medium text-xs flex items-center ${o===g.id?"border-gray-700 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(I,{icon:g.icon,className:"mr-2 h-3 w-3"}),g.name]},g.id))})}),e.jsx("div",{className:"min-h-96",children:y()})]}):e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"mb-4 p-4 bg-yellow-100 border border-yellow-400 text-yellow-700 text-xs",children:"Hostel not found"})})},vk=({hostelId:t})=>{const[a,r]=x.useState([]),[s,n]=x.useState(!0),[i,o]=x.useState(!1),[c,u]=x.useState(!1),[m,h]=x.useState(!1),[p,y]=x.useState(null),[g,v]=x.useState(""),[N,w]=x.useState(""),{token:j}=At(),[T,k]=x.useState({room_number:"",room_type:"Single",floor_number:"",capacity:1,description:""});x.useEffect(()=>{R()},[t]);const R=async()=>{try{n(!0);const B=await re.get(`${se}/boarding/hostels/${t}/rooms`,{headers:{Authorization:`Bearer ${j}`}});B.data&&Array.isArray(B.data.data)?r(B.data.data):r([])}catch(B){console.error("Error fetching rooms:",B),w("Failed to load rooms"),r([])}finally{n(!1)}},P=async B=>{B.preventDefault();try{c?await re.put(`${se}/boarding/rooms/${p.id}`,T,{headers:{Authorization:`Bearer ${j}`}}):await re.post(`${se}/boarding/rooms`,{...T,hostel_id:t},{headers:{Authorization:`Bearer ${j}`}}),o(!1),u(!1),k({room_number:"",room_type:"Single",floor_number:"",capacity:1,description:""}),R()}catch(D){console.error("Error saving room:",D),w("Failed to save room")}},$=B=>{y(B),k({room_number:B.room_number,room_type:B.room_type,floor_number:B.floor_number,capacity:B.capacity,description:B.description||""}),u(!0)},A=B=>{y(B),h(!0)},M=async B=>{if(window.confirm("Are you sure you want to delete this room?"))try{await re.delete(`${se}/boarding/rooms/${B.id}`,{headers:{Authorization:`Bearer ${j}`}}),R()}catch(D){console.error("Error deleting room:",D),w("Failed to delete room")}},_=a.filter(B=>B&&B.room_number&&B.room_number.toLowerCase().includes(g.toLowerCase())||B&&B.room_type&&B.room_type.toLowerCase().includes(g.toLowerCase()));return s?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((B,D)=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},D))})]}):e.jsxs("div",{className:"bg-white border border-gray-200/30 p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Rooms"}),e.jsxs("button",{onClick:()=>o(!0),className:"bg-gray-900 text-white px-3 py-1.5 text-xs font-medium hover:bg-gray-800",children:[e.jsx(I,{icon:Ht,className:"mr-1"}),"Add Room"]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:ua,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search rooms...",value:g,onChange:B=>v(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200/30 focus:outline-none focus:ring-2 focus:ring-gray-500 text-xs"})]})}),N&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 text-xs",children:N}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200/30",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Room Number"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Floor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capacity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Occupancy"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200/30",children:(_||[]).map((B,D)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:B?.room_number||"N/A"}),e.jsx("div",{className:"text-xs text-gray-500",children:B?.description||""})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:B?.room_type||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:B?.floor_number||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:B?.capacity||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:B?.current_enrollments||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>B&&A(B),className:"text-blue-600 hover:text-blue-900 p-1",disabled:!B,children:e.jsx(I,{icon:qa,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>B&&$(B),className:"text-green-600 hover:text-green-900 p-1",disabled:!B,children:e.jsx(I,{icon:Aa,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>B&&M(B),className:"text-red-600 hover:text-red-900 p-1",disabled:!B,children:e.jsx(I,{icon:sa,className:"h-3 w-3"})})]})})]},B?.id||D))})]})}),(i||c)&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-30 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-3/4 max-w-4xl shadow-lg bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:c?"Edit Room":"Add New Room"}),e.jsxs("form",{onSubmit:P,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Room Number"}),e.jsx("input",{type:"text",required:!0,value:T.room_number,onChange:B=>k({...T,room_number:B.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Room Type"}),e.jsxs("select",{required:!0,value:T.room_type,onChange:B=>k({...T,room_type:B.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"Single",children:"Single"}),e.jsx("option",{value:"Double",children:"Double"}),e.jsx("option",{value:"Triple",children:"Triple"}),e.jsx("option",{value:"Quad",children:"Quad"}),e.jsx("option",{value:"Many",children:"Many"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Floor Number"}),e.jsx("input",{type:"number",required:!0,value:T.floor_number,onChange:B=>k({...T,floor_number:B.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Capacity"}),e.jsx("input",{type:"number",required:!0,min:"1",value:T.capacity,onChange:B=>k({...T,capacity:parseInt(B.target.value)}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:T.description,onChange:B=>k({...T,description:B.target.value}),rows:"3",className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{o(!1),u(!1),k({room_number:"",room_type:"Single",floor_number:"",capacity:1,description:""})},className:"px-3 py-1.5 border border-gray-300 text-xs font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-3 py-1.5 bg-gray-900 text-white text-xs font-medium hover:bg-gray-800",children:c?"Update":"Create"})]})]})]})})}),m&&p&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Room Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Room Number"}),e.jsx("p",{className:"text-xs text-gray-900",children:p?.room_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Room Type"}),e.jsx("p",{className:"text-xs text-gray-900",children:p?.room_type||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Floor Number"}),e.jsx("p",{className:"text-xs text-gray-900",children:p?.floor_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Capacity"}),e.jsx("p",{className:"text-xs text-gray-900",children:p?.capacity||0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Current Occupancy"}),e.jsx("p",{className:"text-xs text-gray-900",children:p?.current_enrollments||0})]}),p?.description&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Description"}),e.jsx("p",{className:"text-xs text-gray-900",children:p.description})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>h(!1),className:"px-3 py-1.5 bg-gray-900 text-white text-xs font-medium hover:bg-gray-800",children:"Close"})})]})})})]})},goe=({hostelId:t})=>{const[a,r]=x.useState([]),[s,n]=x.useState([]),[i,o]=x.useState(!0),[c,u]=x.useState(!1),[m,h]=x.useState(!1),[p,y]=x.useState(!1),[g,v]=x.useState(null),[N,w]=x.useState(""),[j,T]=x.useState(""),[k,R]=x.useState(""),[P,$]=x.useState(""),[A,M]=x.useState(!1),{token:_}=At(),[B,D]=x.useState({student_reg_number:"",room_id:"",academic_year:"",term:"",enrollment_date:"",check_in_date:"",check_out_date:"",status:"enrolled",notes:""}),[C,L]=x.useState(""),[H,V]=x.useState(null);x.useEffect(()=>{J(),Y()},[t]);const Y=x.useCallback(async()=>{try{o(!0);const me=new URLSearchParams;j&&me.append("term",j),k&&me.append("academic_year",k);const pe=`${se}/boarding/hostels/${t}/enrollments${me.toString()?`?${me.toString()}`:""}`,ie=await re.get(pe,{headers:{Authorization:`Bearer ${_}`}});ie.data&&Array.isArray(ie.data.data)?r(ie.data.data):r([])}catch(me){console.error("Error fetching enrollments:",me),$("Failed to load enrollments"),r([])}finally{o(!1)}},[t,j,k,_]),J=x.useCallback(async()=>{try{const me=await re.get(`${se}/boarding/hostels/${t}/rooms`,{headers:{Authorization:`Bearer ${_}`}});me.data&&Array.isArray(me.data.data)?n(me.data.data):n([])}catch(me){console.error("Error fetching rooms:",me),n([])}},[t,_]),W=async me=>{if(me.preventDefault(),!B.student_reg_number){$("Student registration number is required");return}if(!B.room_id){$("Room selection is required");return}if(!B.academic_year){$("Academic year is required");return}if(!B.term){$("Term is required");return}if(!B.enrollment_date){$("Enrollment date is required");return}M(!0),$("");try{const pe={...B};pe.term&&pe.term.startsWith("Term ")&&(pe.term=pe.term.replace("Term ",""));const ie=m?pe:{...pe,hostel_id:t};if(console.log("Sending enrollment data:",ie),m)await re.put(`${se}/boarding/enrollments/${g.id}`,pe,{headers:{Authorization:`Bearer ${_}`}});else{const ke=await re.post(`${se}/boarding/enrollments`,ie,{headers:{Authorization:`Bearer ${_}`}});console.log("Enrollment response:",ke.data)}u(!1),h(!1),D({student_reg_number:"",room_id:"",academic_year:"",term:"",enrollment_date:"",check_in_date:"",check_out_date:"",status:"enrolled",notes:""}),Z(),Y()}catch(pe){console.error("Error saving enrollment:",pe),pe.response&&pe.response.data&&pe.response.data.message?$(pe.response.data.message):$("Failed to save enrollment")}finally{M(!1)}},X=async me=>{v(me);let pe=me.term;me.term&&!me.term.startsWith("Term ")&&(pe=`Term ${me.term}`),D({student_reg_number:me.student_reg_number,room_id:me.room_id||"",academic_year:me.academic_year,term:pe,enrollment_date:me.enrollment_date,check_in_date:me.check_in_date||"",check_out_date:me.check_out_date||"",status:me.status,notes:me.notes||""}),L(me.student_reg_number);try{const ie=await re.get(`${se}/students/search`,{params:{query:me.student_reg_number},headers:{Authorization:`Bearer ${_}`}});if(ie.data.success&&ie.data.data.length>0){const ke=ie.data.data.find(Ae=>Ae.RegNumber===me.student_reg_number);ke&&V(ke)}}catch(ie){console.error("Error searching for student during edit:",ie)}h(!0)},te=me=>{v(me),y(!0)},oe=async me=>{if(window.confirm("Are you sure you want to delete this enrollment?"))try{const pe=await re.delete(`${se}/boarding/enrollments/${me.id}`,{headers:{Authorization:`Bearer ${_}`}});pe.data.success?Y():$(pe.data.message||"Failed to delete enrollment")}catch(pe){console.error("Error deleting enrollment:",pe);const ie=pe.response?.data?.message||pe.response?.data?.error||"Failed to delete enrollment";$(ie)}},q=async me=>{try{await re.post(`${se}/boarding/enrollments/${me.id}/checkin`,{},{headers:{Authorization:`Bearer ${_}`}}),Y()}catch(pe){console.error("Error checking in student:",pe),$("Failed to check in student")}},G=async me=>{try{await re.post(`${se}/boarding/enrollments/${me.id}/checkout`,{},{headers:{Authorization:`Bearer ${_}`}}),Y()}catch(pe){console.error("Error checking out student:",pe),$("Failed to check out student")}},z=async()=>{if(!C.trim()){$("Please enter a registration number");return}try{$("");const me=await re.get(`${se}/students/search`,{params:{query:C},headers:{Authorization:`Bearer ${_}`}});if(me.data.success&&me.data.data.length>0){const pe=me.data.data.find(ie=>ie.RegNumber===C);pe?(V(pe),D({...B,student_reg_number:pe.RegNumber})):(V(null),$("Student not found with this registration number"))}else V(null),$("Student not found with this registration number")}catch(me){console.error("Error searching for student:",me),V(null),$("Error searching for student. Please try again.")}},Z=()=>{L(""),V(null),D({...B,student_reg_number:""})},Q=me=>"Student",fe=me=>{const pe=s.find(ie=>ie.id===me);return pe?pe.room_number:"N/A"},he=me=>{const pe={enrolled:"bg-blue-100 text-blue-800",checked_in:"bg-green-100 text-green-800",checked_out:"bg-yellow-100 text-yellow-800",cancelled:"bg-red-100 text-red-800"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${pe[me]||"bg-gray-100 text-gray-800"}`,children:me.replace("_"," ").toUpperCase()})},ne=a.filter(me=>me&&Q(me.student_reg_number).toLowerCase().includes(N.toLowerCase())||me&&me.status&&me.status.toLowerCase().includes(N.toLowerCase()));return i?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((me,pe)=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},pe))})]}):e.jsxs("div",{className:"bg-white border border-gray-200/30 p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Enrollments"}),e.jsxs("button",{onClick:()=>u(!0),className:"bg-gray-900 text-white px-3 py-1.5 text-xs font-medium hover:bg-gray-800",children:[e.jsx(I,{icon:Ht,className:"mr-1"}),"Enroll Student"]})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:ua,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search enrollments...",value:N,onChange:me=>w(me.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200/30 focus:outline-none focus:ring-2 focus:ring-gray-500 text-xs"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Academic Year"}),e.jsx("input",{type:"text",placeholder:"Enter year (e.g., 2025)",value:k,onChange:me=>R(me.target.value),className:"w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Term"}),e.jsxs("select",{value:j,onChange:me=>T(me.target.value),className:"w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"",children:"All Terms"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:Y,className:"w-full bg-gray-900 text-white px-3 py-2 text-xs font-medium hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500",children:[e.jsx(I,{icon:ua,className:"mr-1"}),"Search"]})})]})]}),P&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 text-xs",children:P}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200/30",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Room"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academic Year"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Term"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200/30",children:(ne||[]).map((me,pe)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:Q(me?.student_reg_number)}),e.jsx("div",{className:"text-xs text-gray-500",children:me?.student_reg_number})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:fe(me?.room_id)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:me?.academic_year||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:me?.term||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs font-medium",children:he(me?.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>me&&te(me),className:"text-blue-600 hover:text-blue-900 p-1",disabled:!me,children:e.jsx(I,{icon:qa,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>me&&X(me),className:"text-green-600 hover:text-green-900 p-1",disabled:!me,children:e.jsx(I,{icon:Aa,className:"h-3 w-3"})}),me?.status==="enrolled"&&e.jsx("button",{onClick:()=>me&&q(me),className:"text-purple-600 hover:text-purple-900 p-1",disabled:!me,title:"Check In",children:e.jsx(I,{icon:as,className:"h-3 w-3"})}),me?.status==="checked_in"&&e.jsx("button",{onClick:()=>me&&G(me),className:"text-orange-600 hover:text-orange-900 p-1",disabled:!me,title:"Check Out",children:e.jsx(I,{icon:as,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>me&&oe(me),className:"text-red-600 hover:text-red-900 p-1",disabled:!me,children:e.jsx(I,{icon:sa,className:"h-3 w-3"})})]})})]},me?.id||pe))})]})}),(c||m)&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-30 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-3/4 max-w-4xl shadow-lg bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:m?"Edit Enrollment":"Enroll New Student"}),P&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 text-xs",children:P}),e.jsxs("form",{onSubmit:W,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Student Registration Number"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Enter registration number",value:C,onChange:me=>L(me.target.value),className:"flex-1 border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"}),e.jsx("button",{type:"button",onClick:z,className:"bg-gray-900 text-white px-3 py-2 text-xs font-medium hover:bg-gray-800",children:"Search"})]}),H&&e.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded",children:[e.jsxs("p",{className:"text-xs text-green-800",children:[e.jsx("strong",{children:"Found:"})," ",H.Name," ",H.Surname," (",H.RegNumber,")"]}),e.jsx("button",{type:"button",onClick:Z,className:"text-xs text-red-600 hover:text-red-800 mt-1",children:"Clear"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Room"}),e.jsxs("select",{value:B.room_id,onChange:me=>D({...B,room_id:me.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"",children:"Select Room"}),s.map(me=>e.jsxs("option",{value:me.id,children:[me.room_number," (",me.room_type,") - ",me.current_enrollments||0,"/",me.capacity]},me.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Academic Year"}),e.jsx("input",{type:"text",required:!0,value:B.academic_year,onChange:me=>D({...B,academic_year:me.target.value}),placeholder:"e.g., 2025",className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Term"}),e.jsxs("select",{required:!0,value:B.term,onChange:me=>D({...B,term:me.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Enrollment Date"}),e.jsx("input",{type:"date",required:!0,value:B.enrollment_date,onChange:me=>D({...B,enrollment_date:me.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Status"}),e.jsxs("select",{required:!0,value:B.status,onChange:me=>D({...B,status:me.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"enrolled",children:"Enrolled"}),e.jsx("option",{value:"checked_in",children:"Checked In"}),e.jsx("option",{value:"checked_out",children:"Checked Out"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Check In Date"}),e.jsx("input",{type:"date",value:B.check_in_date,onChange:me=>D({...B,check_in_date:me.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Check Out Date"}),e.jsx("input",{type:"date",value:B.check_out_date,onChange:me=>D({...B,check_out_date:me.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Notes"}),e.jsx("textarea",{value:B.notes,onChange:me=>D({...B,notes:me.target.value}),rows:"3",className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{u(!1),h(!1),D({student_reg_number:"",room_id:"",academic_year:"",term:"",enrollment_date:"",check_in_date:"",check_out_date:"",status:"enrolled",notes:""}),Z()},className:"px-3 py-1.5 border border-gray-300 text-xs font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:A,className:`px-3 py-1.5 text-xs font-medium ${A?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800"}`,children:A?e.jsxs(e.Fragment,{children:[e.jsx(I,{icon:fs,className:"mr-1 animate-spin"}),m?"Updating...":"Enrolling..."]}):m?"Update":"Enroll"})]})]})]})})}),p&&g&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Enrollment Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Student"}),e.jsx("p",{className:"text-xs text-gray-900",children:Q(g?.student_reg_number)}),e.jsx("p",{className:"text-xs text-gray-500",children:g?.student_reg_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Room"}),e.jsx("p",{className:"text-xs text-gray-900",children:fe(g?.room_id)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Academic Year"}),e.jsx("p",{className:"text-xs text-gray-900",children:g?.academic_year||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Term"}),e.jsx("p",{className:"text-xs text-gray-900",children:g?.term||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Status"}),e.jsx("div",{className:"mt-1",children:he(g?.status)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Enrollment Date"}),e.jsx("p",{className:"text-xs text-gray-900",children:g?.enrollment_date||"N/A"})]}),g?.check_in_date&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Check In Date"}),e.jsx("p",{className:"text-xs text-gray-900",children:g.check_in_date})]}),g?.check_out_date&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Check Out Date"}),e.jsx("p",{className:"text-xs text-gray-900",children:g.check_out_date})]}),g?.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Notes"}),e.jsx("p",{className:"text-xs text-gray-900",children:g.notes})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>y(!1),className:"px-3 py-1.5 bg-gray-900 text-white text-xs font-medium hover:bg-gray-800",children:"Close"})})]})})})]})},yoe=({hostelId:t})=>{const[a,r]=x.useState([]),[s,n]=x.useState([]),[i,o]=x.useState(!0),[c,u]=x.useState(!1),[m,h]=x.useState(!1),[p,y]=x.useState(null),[g,v]=x.useState(""),{token:N}=At(),[w,j]=x.useState({term:"",academic_year:"",amount:"",currency_id:""});x.useEffect(()=>{T(),k()},[t]);const T=async()=>{try{o(!0),console.log("Fetching billing fees for hostel:",t),console.log("Request URL:",`${se}/boarding/hostels/${t}/billing-fees`);const _=await re.get(`${se}/boarding/hostels/${t}/billing-fees`,{headers:{Authorization:`Bearer ${N}`}});console.log("Billing fees response:",_.data),_.data&&Array.isArray(_.data.data)?r(_.data.data):r([])}catch(_){console.error("Error fetching billing fees:",_),console.error("Error details:",{message:_.message,status:_.response?.status,statusText:_.response?.statusText,data:_.response?.data,config:{url:_.config?.url,method:_.config?.method,headers:_.config?.headers}}),v("Failed to load billing fees"),r([])}finally{o(!1)}},k=async()=>{try{const _=await re.get(`${se}/accounting/currencies`,{headers:{Authorization:`Bearer ${N}`}});_.data&&Array.isArray(_.data.data)?n(_.data.data):n([])}catch(_){console.error("Error fetching currencies:",_),n([])}},R=async _=>{_.preventDefault();try{m?await re.put(`${se}/boarding/billing-fees/${p.id}`,w,{headers:{Authorization:`Bearer ${N}`}}):await re.post(`${se}/boarding/billing-fees`,{...w,hostel_id:t},{headers:{Authorization:`Bearer ${N}`}}),u(!1),h(!1),j({term:"",academic_year:"",amount:"",currency_id:""}),T()}catch(B){console.error("Error saving billing fee:",B),B.response&&B.response.data&&B.response.data.message?v(B.response.data.message):v("Failed to save billing fee")}},P=_=>{y(_),j({term:_.term,academic_year:_.academic_year,amount:_.amount,currency_id:_.currency_id}),h(!0)},$=async _=>{if(window.confirm("Are you sure you want to delete this billing fee?"))try{await re.delete(`${se}/boarding/billing-fees/${_.id}`,{headers:{Authorization:`Bearer ${N}`}}),T()}catch(B){console.error("Error deleting billing fee:",B),v("Failed to delete billing fee")}},A=_=>{const B=s.find(D=>D.id===_);return B?B.name:"N/A"},M=_=>{const B=s.find(D=>D.id===_);return B?B.symbol:""};return i?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((_,B)=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},B))})]}):e.jsxs("div",{className:"bg-white border border-gray-200/30 p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Billing & Fees"}),e.jsxs("button",{onClick:()=>u(!0),className:"bg-gray-900 text-white px-3 py-1.5 text-xs font-medium hover:bg-gray-800",children:[e.jsx(I,{icon:Ht,className:"mr-1"}),"Add Billing"]})]}),g&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 text-xs",children:g}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200/30",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Term"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academic Year"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Currency"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200/30",children:(a||[]).map((_,B)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:_?.term||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:_?.academic_year||"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:[M(_?.currency_id),_?.amount||0]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-900",children:A(_?.currency_id)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>_&&P(_),className:"text-green-600 hover:text-green-900 p-1",disabled:!_,children:e.jsx(I,{icon:Aa,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>_&&$(_),className:"text-red-600 hover:text-red-900 p-1",disabled:!_,children:e.jsx(I,{icon:sa,className:"h-3 w-3"})})]})})]},_?.id||B))})]})}),(c||m)&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-30 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-3/4 max-w-4xl shadow-lg bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:m?"Edit Fee Structure":"Add New Fee Structure"}),g&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 text-xs",children:g}),e.jsxs("form",{onSubmit:R,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Term"}),e.jsxs("select",{required:!0,value:w.term,onChange:_=>j({...w,term:_.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Academic Year"}),e.jsx("input",{type:"text",required:!0,value:w.academic_year,onChange:_=>j({...w,academic_year:_.target.value}),placeholder:"e.g., 2025",className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Amount"}),e.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",value:w.amount,onChange:_=>j({...w,amount:_.target.value}),placeholder:"0.00",className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Currency"}),e.jsxs("select",{required:!0,value:w.currency_id,onChange:_=>j({...w,currency_id:_.target.value}),className:"mt-1 block w-full border border-gray-200/30 px-3 py-2 focus:outline-none focus:ring-gray-500 focus:border-gray-500 text-xs",children:[e.jsx("option",{value:"",children:"Select Currency"}),s.map(_=>e.jsxs("option",{value:_.id,children:[_.name," (",_.symbol,")"]},_.id))]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{u(!1),h(!1),j({term:"",academic_year:"",amount:"",currency_id:""})},className:"px-3 py-1.5 border border-gray-300 text-xs font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-3 py-1.5 bg-gray-900 text-white text-xs font-medium hover:bg-gray-800",children:m?"Update":"Create"})]})]})]})})})]})},boe=()=>{const[t,a]=x.useState([]),[r,s]=x.useState([]),[n,i]=x.useState([]),[o,c]=x.useState([]),[u,m]=x.useState(!0),[h,p]=x.useState(!1),[y,g]=x.useState(!1),[v,N]=x.useState(!1),[w,j]=x.useState(null),[T,k]=x.useState(""),[R,P]=x.useState(""),{token:$}=At(),[A,M]=x.useState({student_id:"",hostel_id:"",room_id:"",academic_year:"",term:"",enrollment_date:"",check_in_date:"",check_out_date:"",status:"ACTIVE"});x.useEffect(()=>{_(),B(),D()},[]);const _=async()=>{try{m(!0);const z=await re.get("/api/boarding/enrollments",{headers:{Authorization:`Bearer ${$}`}});console.log("Enrollments API response:",z.data),Array.isArray(z.data)?a(z.data):z.data&&Array.isArray(z.data.data)?a(z.data.data):z.data&&z.data.enrollments&&Array.isArray(z.data.enrollments)?a(z.data.enrollments):(console.warn("Unexpected response format, setting empty array"),a([]))}catch(z){console.error("Error fetching enrollments:",z),P("Failed to load enrollments"),a([])}finally{m(!1)}},B=async()=>{try{const z=await re.get("/api/students",{headers:{Authorization:`Bearer ${$}`}});console.log("Students API response:",z.data),Array.isArray(z.data)?s(z.data):z.data&&Array.isArray(z.data.data)?s(z.data.data):z.data&&z.data.students&&Array.isArray(z.data.students)?s(z.data.students):(console.warn("Unexpected students response format, setting empty array"),s([]))}catch(z){console.error("Error fetching students:",z),s([])}},D=async()=>{try{const z=await re.get("/api/boarding/hostels",{headers:{Authorization:`Bearer ${$}`}});console.log("Hostels for enrollments API response:",z.data),Array.isArray(z.data)?i(z.data):z.data&&Array.isArray(z.data.data)?i(z.data.data):z.data&&z.data.hostels&&Array.isArray(z.data.hostels)?i(z.data.hostels):(console.warn("Unexpected hostels response format, setting empty array"),i([]))}catch(z){console.error("Error fetching hostels:",z),i([])}},C=async z=>{try{const Z=await re.get(`/api/boarding/rooms/available/${z}`,{headers:{Authorization:`Bearer ${$}`}});console.log("Rooms for enrollments API response:",Z.data),Array.isArray(Z.data)?c(Z.data):Z.data&&Array.isArray(Z.data.data)?c(Z.data.data):Z.data&&Z.data.rooms&&Array.isArray(Z.data.rooms)?c(Z.data.rooms):(console.warn("Unexpected rooms response format, setting empty array"),c([]))}catch(Z){console.error("Error fetching rooms:",Z),c([])}},L=async z=>{z.preventDefault();try{y?await re.put(`/api/boarding/enrollments/${w.id}`,A,{headers:{Authorization:`Bearer ${$}`}}):await re.post("/api/boarding/enrollments",A,{headers:{Authorization:`Bearer ${$}`}}),p(!1),g(!1),M({student_id:"",hostel_id:"",room_id:"",academic_year:"",term:"",enrollment_date:"",check_in_date:"",check_out_date:"",status:"ACTIVE"}),_()}catch(Z){console.error("Error saving enrollment:",Z),P("Failed to save enrollment")}},H=z=>{j(z),M({student_id:z.student_id,hostel_id:z.hostel_id,room_id:z.room_id,academic_year:z.academic_year,term:z.term,enrollment_date:z.enrollment_date,check_in_date:z.check_in_date,check_out_date:z.check_out_date,status:z.status}),g(!0)},V=z=>{j(z),N(!0)},Y=async z=>{if(window.confirm("Are you sure you want to cancel this enrollment?"))try{await re.delete(`/api/boarding/enrollments/${z.id}`,{headers:{Authorization:`Bearer ${$}`}}),_()}catch(Z){console.error("Error deleting enrollment:",Z),P("Failed to cancel enrollment")}},J=async z=>{try{await re.post(`/api/boarding/enrollments/${z.id}/checkin`,{},{headers:{Authorization:`Bearer ${$}`}}),_()}catch(Z){console.error("Error checking in student:",Z),P("Failed to check in student")}},W=async z=>{try{await re.post(`/api/boarding/enrollments/${z.id}/checkout`,{},{headers:{Authorization:`Bearer ${$}`}}),_()}catch(Z){console.error("Error checking out student:",Z),P("Failed to check out student")}},X=z=>{const Z=(r||[]).find(Q=>Q.id===z);return Z?`${Z.Name} ${Z.Surname}`:"Unknown Student"},te=z=>{const Z=(n||[]).find(Q=>Q.id===z);return Z?Z.name:"Unknown Hostel"},oe=z=>{const Z=(o||[]).find(Q=>Q.id===z);return Z?Z.room_number:"Unknown Room"},q=z=>{const Z={ACTIVE:{bg:"bg-green-100",text:"text-green-800",label:"Active"},CHECKED_IN:{bg:"bg-blue-100",text:"text-blue-800",label:"Checked In"},CHECKED_OUT:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Checked Out"},CANCELLED:{bg:"bg-red-100",text:"text-red-800",label:"Cancelled"}},Q=Z[z]||Z.ACTIVE;return e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Q.bg} ${Q.text}`,children:Q.label})},G=(()=>{try{return Array.isArray(t)?t.filter(z=>z&&X(z.student_id).toLowerCase().includes(T.toLowerCase())||z&&te(z.hostel_id).toLowerCase().includes(T.toLowerCase())):(console.warn("Enrollments is not an array:",t),[])}catch(z){return console.error("Error filtering enrollments:",z),[]}})();return u?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-6"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((z,Z)=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},Z))})]})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:"Boarding Enrollments"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage student enrollments in boarding facilities"})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Enrollments"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage student enrollments in boarding facilities"})]}),e.jsxs("button",{onClick:()=>p(!0),className:"bg-gray-900 text-white px-4 py-2 rounded flex items-center space-x-2 hover:bg-gray-800",children:[e.jsx(I,{icon:Ht}),e.jsx("span",{children:"Enroll Student"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:ua,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search enrollments...",value:T,onChange:z=>k(z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),R&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:R}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hostel"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Room"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academic Year"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Term"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(G||[]).map((z,Z)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:X(z?.student_id)}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Enrolled: ",z?.enrollment_date?new Date(z.enrollment_date).toLocaleDateString():"N/A"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te(z?.hostel_id)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:oe(z?.room_id)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z?.academic_year||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z?.term||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:q(z?.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>z&&V(z),className:"text-blue-600 hover:text-blue-900",disabled:!z,children:e.jsx(I,{icon:qa})}),e.jsx("button",{onClick:()=>z&&H(z),className:"text-green-600 hover:text-green-900",disabled:!z,children:e.jsx(I,{icon:Aa})}),z?.status==="ACTIVE"&&e.jsx("button",{onClick:()=>z&&J(z),className:"text-blue-600 hover:text-blue-900",title:"Check In",disabled:!z,children:e.jsx(I,{icon:YB})}),z?.status==="CHECKED_IN"&&e.jsx("button",{onClick:()=>z&&W(z),className:"text-yellow-600 hover:text-yellow-900",title:"Check Out",disabled:!z,children:e.jsx(I,{icon:oE})}),e.jsx("button",{onClick:()=>z&&Y(z),className:"text-red-600 hover:text-red-900",disabled:!z,children:e.jsx(I,{icon:sa})})]})})]},z?.id||Z))})]})}),(h||y)&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:y?"Edit Enrollment":"Enroll Student"}),e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Student"}),e.jsxs("select",{required:!0,value:A.student_id,onChange:z=>M({...A,student_id:z.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Student"}),(r||[]).map(z=>e.jsxs("option",{value:z.id,children:[z.Name," ",z.Surname]},z.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Hostel"}),e.jsxs("select",{required:!0,value:A.hostel_id,onChange:z=>{M({...A,hostel_id:z.target.value,room_id:""}),z.target.value&&C(z.target.value)},className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Hostel"}),(n||[]).map(z=>e.jsx("option",{value:z.id,children:z.name},z.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Room"}),e.jsxs("select",{required:!0,value:A.room_id,onChange:z=>M({...A,room_id:z.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Room"}),(o||[]).map(z=>e.jsxs("option",{value:z.id,children:[z.room_number," (",z.room_type,")"]},z.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Academic Year"}),e.jsx("input",{type:"text",required:!0,value:A.academic_year,onChange:z=>M({...A,academic_year:z.target.value}),placeholder:"e.g., 2024-2025",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Term"}),e.jsxs("select",{required:!0,value:A.term,onChange:z=>M({...A,term:z.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Enrollment Date"}),e.jsx("input",{type:"date",required:!0,value:A.enrollment_date,onChange:z=>M({...A,enrollment_date:z.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{required:!0,value:A.status,onChange:z=>M({...A,status:z.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"CHECKED_IN",children:"Checked In"}),e.jsx("option",{value:"CHECKED_OUT",children:"Checked Out"}),e.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{p(!1),g(!1),M({student_id:"",hostel_id:"",room_id:"",academic_year:"",term:"",enrollment_date:"",check_in_date:"",check_out_date:"",status:"ACTIVE"})},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-gray-900 text-white rounded-md text-sm font-medium hover:bg-gray-800",children:y?"Update":"Enroll"})]})]})]})})}),v&&w&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Enrollment Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Student"}),e.jsx("p",{className:"text-sm text-gray-900",children:X(w?.student_id)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Hostel"}),e.jsx("p",{className:"text-sm text-gray-900",children:te(w?.hostel_id)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Room"}),e.jsx("p",{className:"text-sm text-gray-900",children:oe(w?.room_id)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Academic Year"}),e.jsx("p",{className:"text-sm text-gray-900",children:w?.academic_year||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Term"}),e.jsx("p",{className:"text-sm text-gray-900",children:w?.term||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Enrollment Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:w?.enrollment_date?new Date(w.enrollment_date).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("div",{className:"mt-1",children:q(w?.status)})]}),w?.check_in_date&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Check In Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(w.check_in_date).toLocaleDateString()})]}),w?.check_out_date&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Check Out Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:new Date(w.check_out_date).toLocaleDateString()})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-gray-900 text-white rounded-md text-sm font-medium hover:bg-gray-800",children:"Close"})})]})})})]})},Am=({isOpen:t,onClose:a,message:r})=>t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:cr,className:"text-green-500 text-lg mr-2"}),e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Success"})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt,className:"text-xs"})})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-4",children:r}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-3 py-1.5 bg-gray-900 text-white rounded text-xs hover:bg-gray-800",children:"OK"})})]})}):null,dd=({isOpen:t,onClose:a,message:r})=>t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:Ma,className:"text-red-500 text-lg mr-2"}),e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Error"})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt,className:"text-xs"})})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-4",children:r}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:"px-3 py-1.5 bg-gray-900 text-white rounded text-xs hover:bg-gray-800",children:"OK"})})]})}):null,voe="modulepreload",joe=function(t){return"/"+t},jk={},v2=function(a,r,s){let n=Promise.resolve();if(r&&r.length>0){let u=function(m){return Promise.all(m.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");n=u(r.map(m=>{if(m=joe(m),m in jk)return;jk[m]=!0;const h=m.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${p}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":voe,h||(y.as="script"),y.crossOrigin="",y.href=m,c&&y.setAttribute("nonce",c),document.head.appendChild(y),h)return new Promise((g,v)=>{y.addEventListener("load",g),y.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return n.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return a().catch(i)})};function fr(t){"@babel/helpers - typeof";return fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},fr(t)}var _o=Uint8Array,sl=Uint16Array,G3=Int32Array,V3=new _o([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),K3=new _o([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Nk=new _o([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),PO=function(t,a){for(var r=new sl(31),s=0;s<31;++s)r[s]=a+=1<<t[s-1];for(var n=new G3(r[30]),s=1;s<30;++s)for(var i=r[s];i<r[s+1];++i)n[i]=i-r[s]<<5|s;return{b:r,r:n}},DO=PO(V3,2),Noe=DO.b,xN=DO.r;Noe[28]=258,xN[258]=28;var woe=PO(K3,0),wk=woe.r,fN=new sl(32768);for(var $r=0;$r<32768;++$r){var Wd=($r&43690)>>1|($r&21845)<<1;Wd=(Wd&52428)>>2|(Wd&13107)<<2,Wd=(Wd&61680)>>4|(Wd&3855)<<4,fN[$r]=((Wd&65280)>>8|(Wd&255)<<8)>>1}var Nf=function(t,a,r){for(var s=t.length,n=0,i=new sl(a);n<s;++n)t[n]&&++i[t[n]-1];var o=new sl(a);for(n=1;n<a;++n)o[n]=o[n-1]+i[n-1]<<1;var c;if(r){c=new sl(1<<a);var u=15-a;for(n=0;n<s;++n)if(t[n])for(var m=n<<4|t[n],h=a-t[n],p=o[t[n]-1]++<<h,y=p|(1<<h)-1;p<=y;++p)c[fN[p]>>u]=m}else for(c=new sl(s),n=0;n<s;++n)t[n]&&(c[n]=fN[o[t[n]-1]++]>>15-t[n]);return c},wm=new _o(288);for(var $r=0;$r<144;++$r)wm[$r]=8;for(var $r=144;$r<256;++$r)wm[$r]=9;for(var $r=256;$r<280;++$r)wm[$r]=7;for(var $r=280;$r<288;++$r)wm[$r]=8;var ty=new _o(32);for(var $r=0;$r<32;++$r)ty[$r]=5;var Soe=Nf(wm,9,0),_oe=Nf(ty,5,0),OO=function(t){return(t+7)/8|0},Coe=function(t,a,r){return(r==null||r>t.length)&&(r=t.length),new _o(t.subarray(a,r))},zc=function(t,a,r){r<<=a&7;var s=a/8|0;t[s]|=r,t[s+1]|=r>>8},cf=function(t,a,r){r<<=a&7;var s=a/8|0;t[s]|=r,t[s+1]|=r>>8,t[s+2]|=r>>16},j2=function(t,a){for(var r=[],s=0;s<t.length;++s)t[s]&&r.push({s,f:t[s]});var n=r.length,i=r.slice();if(!n)return{t:MO,l:0};if(n==1){var o=new _o(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(P,$){return P.f-$.f}),r.push({s:-1,f:25001});var c=r[0],u=r[1],m=0,h=1,p=2;for(r[0]={s:-1,f:c.f+u.f,l:c,r:u};h!=n-1;)c=r[r[m].f<r[p].f?m++:p++],u=r[m!=h&&r[m].f<r[p].f?m++:p++],r[h++]={s:-1,f:c.f+u.f,l:c,r:u};for(var y=i[0].s,s=1;s<n;++s)i[s].s>y&&(y=i[s].s);var g=new sl(y+1),v=pN(r[h-1],g,0);if(v>a){var s=0,N=0,w=v-a,j=1<<w;for(i.sort(function($,A){return g[A.s]-g[$.s]||$.f-A.f});s<n;++s){var T=i[s].s;if(g[T]>a)N+=j-(1<<v-g[T]),g[T]=a;else break}for(N>>=w;N>0;){var k=i[s].s;g[k]<a?N-=1<<a-g[k]++-1:++s}for(;s>=0&&N;--s){var R=i[s].s;g[R]==a&&(--g[R],++N)}v=a}return{t:new _o(g),l:v}},pN=function(t,a,r){return t.s==-1?Math.max(pN(t.l,a,r+1),pN(t.r,a,r+1)):a[t.s]=r},Sk=function(t){for(var a=t.length;a&&!t[--a];);for(var r=new sl(++a),s=0,n=t[0],i=1,o=function(u){r[s++]=u},c=1;c<=a;++c)if(t[c]==n&&c!=a)++i;else{if(!n&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(n),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(n);i=1,n=t[c]}return{c:r.subarray(0,s),n:a}},df=function(t,a){for(var r=0,s=0;s<a.length;++s)r+=t[s]*a[s];return r},LO=function(t,a,r){var s=r.length,n=OO(a+2);t[n]=s&255,t[n+1]=s>>8,t[n+2]=t[n]^255,t[n+3]=t[n+1]^255;for(var i=0;i<s;++i)t[n+i+4]=r[i];return(n+4+s)*8},_k=function(t,a,r,s,n,i,o,c,u,m,h){zc(a,h++,r),++n[256];for(var p=j2(n,15),y=p.t,g=p.l,v=j2(i,15),N=v.t,w=v.l,j=Sk(y),T=j.c,k=j.n,R=Sk(N),P=R.c,$=R.n,A=new sl(19),M=0;M<T.length;++M)++A[T[M]&31];for(var M=0;M<P.length;++M)++A[P[M]&31];for(var _=j2(A,7),B=_.t,D=_.l,C=19;C>4&&!B[Nk[C-1]];--C);var L=m+5<<3,H=df(n,wm)+df(i,ty)+o,V=df(n,y)+df(i,N)+o+14+3*C+df(A,B)+2*A[16]+3*A[17]+7*A[18];if(u>=0&&L<=H&&L<=V)return LO(a,h,t.subarray(u,u+m));var Y,J,W,X;if(zc(a,h,1+(V<H)),h+=2,V<H){Y=Nf(y,g,0),J=y,W=Nf(N,w,0),X=N;var te=Nf(B,D,0);zc(a,h,k-257),zc(a,h+5,$-1),zc(a,h+10,C-4),h+=14;for(var M=0;M<C;++M)zc(a,h+3*M,B[Nk[M]]);h+=3*C;for(var oe=[T,P],q=0;q<2;++q)for(var G=oe[q],M=0;M<G.length;++M){var z=G[M]&31;zc(a,h,te[z]),h+=B[z],z>15&&(zc(a,h,G[M]>>5&127),h+=G[M]>>12)}}else Y=Soe,J=wm,W=_oe,X=ty;for(var M=0;M<c;++M){var Z=s[M];if(Z>255){var z=Z>>18&31;cf(a,h,Y[z+257]),h+=J[z+257],z>7&&(zc(a,h,Z>>23&31),h+=V3[z]);var Q=Z&31;cf(a,h,W[Q]),h+=X[Q],Q>3&&(cf(a,h,Z>>5&8191),h+=K3[Q])}else cf(a,h,Y[Z]),h+=J[Z]}return cf(a,h,Y[256]),h+J[256]},koe=new G3([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),MO=new _o(0),Aoe=function(t,a,r,s,n,i){var o=i.z||t.length,c=new _o(s+o+5*(1+Math.ceil(o/7e3))+n),u=c.subarray(s,c.length-n),m=i.l,h=(i.r||0)&7;if(a){h&&(u[0]=i.r>>3);for(var p=koe[a-1],y=p>>13,g=p&8191,v=(1<<r)-1,N=i.p||new sl(32768),w=i.h||new sl(v+1),j=Math.ceil(r/3),T=2*j,k=function(Ae){return(t[Ae]^t[Ae+1]<<j^t[Ae+2]<<T)&v},R=new G3(25e3),P=new sl(288),$=new sl(32),A=0,M=0,_=i.i||0,B=0,D=i.w||0,C=0;_+2<o;++_){var L=k(_),H=_&32767,V=w[L];if(N[H]=V,w[L]=H,D<=_){var Y=o-_;if((A>7e3||B>24576)&&(Y>423||!m)){h=_k(t,u,0,R,P,$,M,B,C,_-C,h),B=A=M=0,C=_;for(var J=0;J<286;++J)P[J]=0;for(var J=0;J<30;++J)$[J]=0}var W=2,X=0,te=g,oe=H-V&32767;if(Y>2&&L==k(_-oe))for(var q=Math.min(y,Y)-1,G=Math.min(32767,_),z=Math.min(258,Y);oe<=G&&--te&&H!=V;){if(t[_+W]==t[_+W-oe]){for(var Z=0;Z<z&&t[_+Z]==t[_+Z-oe];++Z);if(Z>W){if(W=Z,X=oe,Z>q)break;for(var Q=Math.min(oe,Z-2),fe=0,J=0;J<Q;++J){var he=_-oe+J&32767,ne=N[he],me=he-ne&32767;me>fe&&(fe=me,V=he)}}}H=V,V=N[H],oe+=H-V&32767}if(X){R[B++]=268435456|xN[W]<<18|wk[X];var pe=xN[W]&31,ie=wk[X]&31;M+=V3[pe]+K3[ie],++P[257+pe],++$[ie],D=_+W,++A}else R[B++]=t[_],++P[t[_]]}}for(_=Math.max(_,D);_<o;++_)R[B++]=t[_],++P[t[_]];h=_k(t,u,m,R,P,$,M,B,C,_-C,h),m||(i.r=h&7|u[h/8|0]<<3,h-=7,i.h=w,i.p=N,i.i=_,i.w=D)}else{for(var _=i.w||0;_<o+m;_+=65535){var ke=_+65535;ke>=o&&(u[h/8|0]=m,ke=o),h=LO(u,h+1,t.subarray(_,ke))}i.i=o}return Coe(c,0,s+OO(h)+n)},RO=function(){var t=1,a=0;return{p:function(r){for(var s=t,n=a,i=r.length|0,o=0;o!=i;){for(var c=Math.min(o+2655,i);o<c;++o)n+=s+=r[o];s=(s&65535)+15*(s>>16),n=(n&65535)+15*(n>>16)}t=s,a=n},d:function(){return t%=65521,a%=65521,(t&255)<<24|(t&65280)<<8|(a&255)<<8|a>>8}}},Eoe=function(t,a,r,s,n){if(!n&&(n={l:1},a.dictionary)){var i=a.dictionary.subarray(-32768),o=new _o(i.length+t.length);o.set(i),o.set(t,i.length),t=o,n.w=i.length}return Aoe(t,a.level==null?6:a.level,a.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+a.mem,r,s,n)},IO=function(t,a,r){for(;r;++a)t[a]=r,r>>>=8},Toe=function(t,a){var r=a.level,s=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=s<<6|(a.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,a.dictionary){var n=RO();n.p(a.dictionary),IO(t,2,n.d())}};function gN(t,a){a||(a={});var r=RO();r.p(t);var s=Eoe(t,a,a.dictionary?6:2,4);return Toe(s,a),IO(s,s.length-4,r.d()),s}var Poe=typeof TextDecoder<"u"&&new TextDecoder,Doe=0;try{Poe.decode(MO,{stream:!0}),Doe=1}catch{}function Ooe(t){if(Array.isArray(t))return t}function Loe(t,a){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,n,i,o,c=[],u=!0,m=!1;try{if(i=(r=r.call(t)).next,a!==0)for(;!(u=(s=i.call(r)).done)&&(c.push(s.value),c.length!==a);u=!0);}catch(h){m=!0,n=h}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(m)throw n}}return c}}function Ck(t,a){(a==null||a>t.length)&&(a=t.length);for(var r=0,s=Array(a);r<a;r++)s[r]=t[r];return s}function Moe(t,a){if(t){if(typeof t=="string")return Ck(t,a);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ck(t,a):void 0}}function Roe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kk(t,a){return Ooe(t)||Loe(t,a)||Moe(t,a)||Roe()}function Ak(t,a="utf8"){return new TextDecoder(a).decode(t)}const Ioe=new TextEncoder;function zoe(t){return Ioe.encode(t)}const $oe=1024*8,Boe=(()=>{const t=new Uint8Array(4),a=new Uint32Array(t.buffer);return!((a[0]=1)&t[0])})(),N2={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class X3{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(a=$oe,r={}){let s=!1;typeof a=="number"?a=new ArrayBuffer(a):(s=!0,this.lastWrittenByte=a.byteLength);const n=r.offset?r.offset>>>0:0,i=a.byteLength-n;let o=n;(ArrayBuffer.isView(a)||a instanceof X3)&&(a.byteLength!==a.buffer.byteLength&&(o=a.byteOffset+n),a=a.buffer),s?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=a,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(a=1){return this.offset+a<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(a=1){return this.offset+=a,this}back(a=1){return this.offset-=a,this}seek(a){return this.offset=a,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const a=this._marks.pop();if(a===void 0)throw new Error("Mark stack empty");return this.seek(a),this}rewind(){return this.offset=0,this}ensureAvailable(a=1){if(!this.available(a)){const s=(this.offset+a)*2,n=new Uint8Array(s);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(a=1){return this.readArray(a,"uint8")}readArray(a,r){const s=N2[r].BYTES_PER_ELEMENT*a,n=this.byteOffset+this.offset,i=this.buffer.slice(n,n+s);if(this.littleEndian===Boe&&r!=="uint8"&&r!=="int8"){const c=new Uint8Array(this.buffer.slice(n,n+s));c.reverse();const u=new N2[r](c.buffer);return this.offset+=s,u.reverse(),u}const o=new N2[r](i);return this.offset+=s,o}readInt16(){const a=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,a}readUint16(){const a=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,a}readInt32(){const a=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,a}readUint32(){const a=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,a}readFloat32(){const a=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,a}readFloat64(){const a=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,a}readBigInt64(){const a=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,a}readBigUint64(){const a=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,a}readChar(){return String.fromCharCode(this.readInt8())}readChars(a=1){let r="";for(let s=0;s<a;s++)r+=this.readChar();return r}readUtf8(a=1){return Ak(this.readBytes(a))}decodeText(a=1,r="utf8"){return Ak(this.readBytes(a),r)}writeBoolean(a){return this.writeUint8(a?255:0),this}writeInt8(a){return this.ensureAvailable(1),this._data.setInt8(this.offset++,a),this._updateLastWrittenByte(),this}writeUint8(a){return this.ensureAvailable(1),this._data.setUint8(this.offset++,a),this._updateLastWrittenByte(),this}writeByte(a){return this.writeUint8(a)}writeBytes(a){this.ensureAvailable(a.length);for(let r=0;r<a.length;r++)this._data.setUint8(this.offset++,a[r]);return this._updateLastWrittenByte(),this}writeInt16(a){return this.ensureAvailable(2),this._data.setInt16(this.offset,a,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(a){return this.ensureAvailable(2),this._data.setUint16(this.offset,a,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(a){return this.ensureAvailable(4),this._data.setInt32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(a){return this.ensureAvailable(4),this._data.setUint32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(a){return this.ensureAvailable(4),this._data.setFloat32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(a){return this.ensureAvailable(8),this._data.setFloat64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(a){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(a){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(a){return this.writeUint8(a.charCodeAt(0))}writeChars(a){for(let r=0;r<a.length;r++)this.writeUint8(a.charCodeAt(r));return this}writeUtf8(a){return this.writeBytes(zoe(a))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function nx(t){let a=t.length;for(;--a>=0;)t[a]=0}const Foe=3,qoe=258,zO=29,Uoe=256,Woe=Uoe+1+zO,$O=30,Hoe=512,Yoe=new Array((Woe+2)*2);nx(Yoe);const Goe=new Array($O*2);nx(Goe);const Voe=new Array(Hoe);nx(Voe);const Koe=new Array(qoe-Foe+1);nx(Koe);const Xoe=new Array(zO);nx(Xoe);const Joe=new Array($O);nx(Joe);const Zoe=(t,a,r,s)=>{let n=t&65535|0,i=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do n=n+a[s++]|0,i=i+n|0;while(--o);n%=65521,i%=65521}return n|i<<16|0};var yN=Zoe;const Qoe=()=>{let t,a=[];for(var r=0;r<256;r++){t=r;for(var s=0;s<8;s++)t=t&1?3988292384^t>>>1:t>>>1;a[r]=t}return a},ece=new Uint32Array(Qoe()),tce=(t,a,r,s)=>{const n=ece,i=s+r;t^=-1;for(let o=s;o<i;o++)t=t>>>8^n[(t^a[o])&255];return t^-1};var Jo=tce,bN={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},BO={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const ace=(t,a)=>Object.prototype.hasOwnProperty.call(t,a);var rce=function(t){const a=Array.prototype.slice.call(arguments,1);for(;a.length;){const r=a.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const s in r)ace(r,s)&&(t[s]=r[s])}}return t},sce=t=>{let a=0;for(let s=0,n=t.length;s<n;s++)a+=t[s].length;const r=new Uint8Array(a);for(let s=0,n=0,i=t.length;s<i;s++){let o=t[s];r.set(o,n),n+=o.length}return r},FO={assign:rce,flattenChunks:sce};let qO=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{qO=!1}const Ff=new Uint8Array(256);for(let t=0;t<256;t++)Ff[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Ff[254]=Ff[254]=1;var nce=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let a,r,s,n,i,o=t.length,c=0;for(n=0;n<o;n++)r=t.charCodeAt(n),(r&64512)===55296&&n+1<o&&(s=t.charCodeAt(n+1),(s&64512)===56320&&(r=65536+(r-55296<<10)+(s-56320),n++)),c+=r<128?1:r<2048?2:r<65536?3:4;for(a=new Uint8Array(c),i=0,n=0;i<c;n++)r=t.charCodeAt(n),(r&64512)===55296&&n+1<o&&(s=t.charCodeAt(n+1),(s&64512)===56320&&(r=65536+(r-55296<<10)+(s-56320),n++)),r<128?a[i++]=r:r<2048?(a[i++]=192|r>>>6,a[i++]=128|r&63):r<65536?(a[i++]=224|r>>>12,a[i++]=128|r>>>6&63,a[i++]=128|r&63):(a[i++]=240|r>>>18,a[i++]=128|r>>>12&63,a[i++]=128|r>>>6&63,a[i++]=128|r&63);return a};const ice=(t,a)=>{if(a<65534&&t.subarray&&qO)return String.fromCharCode.apply(null,t.length===a?t:t.subarray(0,a));let r="";for(let s=0;s<a;s++)r+=String.fromCharCode(t[s]);return r};var lce=(t,a)=>{const r=a||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,a));let s,n;const i=new Array(r*2);for(n=0,s=0;s<r;){let o=t[s++];if(o<128){i[n++]=o;continue}let c=Ff[o];if(c>4){i[n++]=65533,s+=c-1;continue}for(o&=c===2?31:c===3?15:7;c>1&&s<r;)o=o<<6|t[s++]&63,c--;if(c>1){i[n++]=65533;continue}o<65536?i[n++]=o:(o-=65536,i[n++]=55296|o>>10&1023,i[n++]=56320|o&1023)}return ice(i,n)},oce=(t,a)=>{a=a||t.length,a>t.length&&(a=t.length);let r=a-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?a:r+Ff[t[r]]>a?r:a},vN={string2buf:nce,buf2string:lce,utf8border:oce};function cce(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var dce=cce;const R0=16209,uce=16191;var mce=function(a,r){let s,n,i,o,c,u,m,h,p,y,g,v,N,w,j,T,k,R,P,$,A,M,_,B;const D=a.state;s=a.next_in,_=a.input,n=s+(a.avail_in-5),i=a.next_out,B=a.output,o=i-(r-a.avail_out),c=i+(a.avail_out-257),u=D.dmax,m=D.wsize,h=D.whave,p=D.wnext,y=D.window,g=D.hold,v=D.bits,N=D.lencode,w=D.distcode,j=(1<<D.lenbits)-1,T=(1<<D.distbits)-1;e:do{v<15&&(g+=_[s++]<<v,v+=8,g+=_[s++]<<v,v+=8),k=N[g&j];t:for(;;){if(R=k>>>24,g>>>=R,v-=R,R=k>>>16&255,R===0)B[i++]=k&65535;else if(R&16){P=k&65535,R&=15,R&&(v<R&&(g+=_[s++]<<v,v+=8),P+=g&(1<<R)-1,g>>>=R,v-=R),v<15&&(g+=_[s++]<<v,v+=8,g+=_[s++]<<v,v+=8),k=w[g&T];a:for(;;){if(R=k>>>24,g>>>=R,v-=R,R=k>>>16&255,R&16){if($=k&65535,R&=15,v<R&&(g+=_[s++]<<v,v+=8,v<R&&(g+=_[s++]<<v,v+=8)),$+=g&(1<<R)-1,$>u){a.msg="invalid distance too far back",D.mode=R0;break e}if(g>>>=R,v-=R,R=i-o,$>R){if(R=$-R,R>h&&D.sane){a.msg="invalid distance too far back",D.mode=R0;break e}if(A=0,M=y,p===0){if(A+=m-R,R<P){P-=R;do B[i++]=y[A++];while(--R);A=i-$,M=B}}else if(p<R){if(A+=m+p-R,R-=p,R<P){P-=R;do B[i++]=y[A++];while(--R);if(A=0,p<P){R=p,P-=R;do B[i++]=y[A++];while(--R);A=i-$,M=B}}}else if(A+=p-R,R<P){P-=R;do B[i++]=y[A++];while(--R);A=i-$,M=B}for(;P>2;)B[i++]=M[A++],B[i++]=M[A++],B[i++]=M[A++],P-=3;P&&(B[i++]=M[A++],P>1&&(B[i++]=M[A++]))}else{A=i-$;do B[i++]=B[A++],B[i++]=B[A++],B[i++]=B[A++],P-=3;while(P>2);P&&(B[i++]=B[A++],P>1&&(B[i++]=B[A++]))}}else if((R&64)===0){k=w[(k&65535)+(g&(1<<R)-1)];continue a}else{a.msg="invalid distance code",D.mode=R0;break e}break}}else if((R&64)===0){k=N[(k&65535)+(g&(1<<R)-1)];continue t}else if(R&32){D.mode=uce;break e}else{a.msg="invalid literal/length code",D.mode=R0;break e}break}}while(s<n&&i<c);P=v>>3,s-=P,v-=P<<3,g&=(1<<v)-1,a.next_in=s,a.next_out=i,a.avail_in=s<n?5+(n-s):5-(s-n),a.avail_out=i<c?257+(c-i):257-(i-c),D.hold=g,D.bits=v};const dh=15,Ek=852,Tk=592,Pk=0,w2=1,Dk=2,hce=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),xce=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),fce=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),pce=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),gce=(t,a,r,s,n,i,o,c)=>{const u=c.bits;let m=0,h=0,p=0,y=0,g=0,v=0,N=0,w=0,j=0,T=0,k,R,P,$,A,M=null,_;const B=new Uint16Array(dh+1),D=new Uint16Array(dh+1);let C=null,L,H,V;for(m=0;m<=dh;m++)B[m]=0;for(h=0;h<s;h++)B[a[r+h]]++;for(g=u,y=dh;y>=1&&B[y]===0;y--);if(g>y&&(g=y),y===0)return n[i++]=1<<24|64<<16|0,n[i++]=1<<24|64<<16|0,c.bits=1,0;for(p=1;p<y&&B[p]===0;p++);for(g<p&&(g=p),w=1,m=1;m<=dh;m++)if(w<<=1,w-=B[m],w<0)return-1;if(w>0&&(t===Pk||y!==1))return-1;for(D[1]=0,m=1;m<dh;m++)D[m+1]=D[m]+B[m];for(h=0;h<s;h++)a[r+h]!==0&&(o[D[a[r+h]]++]=h);if(t===Pk?(M=C=o,_=20):t===w2?(M=hce,C=xce,_=257):(M=fce,C=pce,_=0),T=0,h=0,m=p,A=i,v=g,N=0,P=-1,j=1<<g,$=j-1,t===w2&&j>Ek||t===Dk&&j>Tk)return 1;for(;;){L=m-N,o[h]+1<_?(H=0,V=o[h]):o[h]>=_?(H=C[o[h]-_],V=M[o[h]-_]):(H=96,V=0),k=1<<m-N,R=1<<v,p=R;do R-=k,n[A+(T>>N)+R]=L<<24|H<<16|V|0;while(R!==0);for(k=1<<m-1;T&k;)k>>=1;if(k!==0?(T&=k-1,T+=k):T=0,h++,--B[m]===0){if(m===y)break;m=a[r+o[h]]}if(m>g&&(T&$)!==P){for(N===0&&(N=g),A+=p,v=m-N,w=1<<v;v+N<y&&(w-=B[v+N],!(w<=0));)v++,w<<=1;if(j+=1<<v,t===w2&&j>Ek||t===Dk&&j>Tk)return 1;P=T&$,n[P]=g<<24|v<<16|A-i|0}}return T!==0&&(n[A+T]=m-N<<24|64<<16|0),c.bits=g,0};var wf=gce;const yce=0,UO=1,WO=2,{Z_FINISH:Ok,Z_BLOCK:bce,Z_TREES:I0,Z_OK:Sm,Z_STREAM_END:vce,Z_NEED_DICT:jce,Z_STREAM_ERROR:Gl,Z_DATA_ERROR:HO,Z_MEM_ERROR:YO,Z_BUF_ERROR:Nce,Z_DEFLATED:Lk}=BO,ub=16180,Mk=16181,Rk=16182,Ik=16183,zk=16184,$k=16185,Bk=16186,Fk=16187,qk=16188,Uk=16189,ay=16190,$c=16191,S2=16192,Wk=16193,_2=16194,Hk=16195,Yk=16196,Gk=16197,Vk=16198,z0=16199,$0=16200,Kk=16201,Xk=16202,Jk=16203,Zk=16204,Qk=16205,C2=16206,e7=16207,t7=16208,Vr=16209,GO=16210,VO=16211,wce=852,Sce=592,_ce=15,Cce=_ce,a7=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function kce(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Em=t=>{if(!t)return 1;const a=t.state;return!a||a.strm!==t||a.mode<ub||a.mode>VO?1:0},KO=t=>{if(Em(t))return Gl;const a=t.state;return t.total_in=t.total_out=a.total=0,t.msg="",a.wrap&&(t.adler=a.wrap&1),a.mode=ub,a.last=0,a.havedict=0,a.flags=-1,a.dmax=32768,a.head=null,a.hold=0,a.bits=0,a.lencode=a.lendyn=new Int32Array(wce),a.distcode=a.distdyn=new Int32Array(Sce),a.sane=1,a.back=-1,Sm},XO=t=>{if(Em(t))return Gl;const a=t.state;return a.wsize=0,a.whave=0,a.wnext=0,KO(t)},JO=(t,a)=>{let r;if(Em(t))return Gl;const s=t.state;return a<0?(r=0,a=-a):(r=(a>>4)+5,a<48&&(a&=15)),a&&(a<8||a>15)?Gl:(s.window!==null&&s.wbits!==a&&(s.window=null),s.wrap=r,s.wbits=a,XO(t))},ZO=(t,a)=>{if(!t)return Gl;const r=new kce;t.state=r,r.strm=t,r.window=null,r.mode=ub;const s=JO(t,a);return s!==Sm&&(t.state=null),s},Ace=t=>ZO(t,Cce);let r7=!0,k2,A2;const Ece=t=>{if(r7){k2=new Int32Array(512),A2=new Int32Array(32);let a=0;for(;a<144;)t.lens[a++]=8;for(;a<256;)t.lens[a++]=9;for(;a<280;)t.lens[a++]=7;for(;a<288;)t.lens[a++]=8;for(wf(UO,t.lens,0,288,k2,0,t.work,{bits:9}),a=0;a<32;)t.lens[a++]=5;wf(WO,t.lens,0,32,A2,0,t.work,{bits:5}),r7=!1}t.lencode=k2,t.lenbits=9,t.distcode=A2,t.distbits=5},QO=(t,a,r,s)=>{let n;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),s>=i.wsize?(i.window.set(a.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(n=i.wsize-i.wnext,n>s&&(n=s),i.window.set(a.subarray(r-s,r-s+n),i.wnext),s-=n,s?(i.window.set(a.subarray(r-s,r),0),i.wnext=s,i.whave=i.wsize):(i.wnext+=n,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=n))),0},Tce=(t,a)=>{let r,s,n,i,o,c,u,m,h,p,y,g,v,N,w=0,j,T,k,R,P,$,A,M;const _=new Uint8Array(4);let B,D;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Em(t)||!t.output||!t.input&&t.avail_in!==0)return Gl;r=t.state,r.mode===$c&&(r.mode=S2),o=t.next_out,n=t.output,u=t.avail_out,i=t.next_in,s=t.input,c=t.avail_in,m=r.hold,h=r.bits,p=c,y=u,M=Sm;e:for(;;)switch(r.mode){case ub:if(r.wrap===0){r.mode=S2;break}for(;h<16;){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}if(r.wrap&2&&m===35615){r.wbits===0&&(r.wbits=15),r.check=0,_[0]=m&255,_[1]=m>>>8&255,r.check=Jo(r.check,_,2,0),m=0,h=0,r.mode=Mk;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((m&255)<<8)+(m>>8))%31){t.msg="incorrect header check",r.mode=Vr;break}if((m&15)!==Lk){t.msg="unknown compression method",r.mode=Vr;break}if(m>>>=4,h-=4,A=(m&15)+8,r.wbits===0&&(r.wbits=A),A>15||A>r.wbits){t.msg="invalid window size",r.mode=Vr;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=m&512?Uk:$c,m=0,h=0;break;case Mk:for(;h<16;){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}if(r.flags=m,(r.flags&255)!==Lk){t.msg="unknown compression method",r.mode=Vr;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Vr;break}r.head&&(r.head.text=m>>8&1),r.flags&512&&r.wrap&4&&(_[0]=m&255,_[1]=m>>>8&255,r.check=Jo(r.check,_,2,0)),m=0,h=0,r.mode=Rk;case Rk:for(;h<32;){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}r.head&&(r.head.time=m),r.flags&512&&r.wrap&4&&(_[0]=m&255,_[1]=m>>>8&255,_[2]=m>>>16&255,_[3]=m>>>24&255,r.check=Jo(r.check,_,4,0)),m=0,h=0,r.mode=Ik;case Ik:for(;h<16;){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}r.head&&(r.head.xflags=m&255,r.head.os=m>>8),r.flags&512&&r.wrap&4&&(_[0]=m&255,_[1]=m>>>8&255,r.check=Jo(r.check,_,2,0)),m=0,h=0,r.mode=zk;case zk:if(r.flags&1024){for(;h<16;){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}r.length=m,r.head&&(r.head.extra_len=m),r.flags&512&&r.wrap&4&&(_[0]=m&255,_[1]=m>>>8&255,r.check=Jo(r.check,_,2,0)),m=0,h=0}else r.head&&(r.head.extra=null);r.mode=$k;case $k:if(r.flags&1024&&(g=r.length,g>c&&(g=c),g&&(r.head&&(A=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(s.subarray(i,i+g),A)),r.flags&512&&r.wrap&4&&(r.check=Jo(r.check,s,g,i)),c-=g,i+=g,r.length-=g),r.length))break e;r.length=0,r.mode=Bk;case Bk:if(r.flags&2048){if(c===0)break e;g=0;do A=s[i+g++],r.head&&A&&r.length<65536&&(r.head.name+=String.fromCharCode(A));while(A&&g<c);if(r.flags&512&&r.wrap&4&&(r.check=Jo(r.check,s,g,i)),c-=g,i+=g,A)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Fk;case Fk:if(r.flags&4096){if(c===0)break e;g=0;do A=s[i+g++],r.head&&A&&r.length<65536&&(r.head.comment+=String.fromCharCode(A));while(A&&g<c);if(r.flags&512&&r.wrap&4&&(r.check=Jo(r.check,s,g,i)),c-=g,i+=g,A)break e}else r.head&&(r.head.comment=null);r.mode=qk;case qk:if(r.flags&512){for(;h<16;){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}if(r.wrap&4&&m!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Vr;break}m=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=$c;break;case Uk:for(;h<32;){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}t.adler=r.check=a7(m),m=0,h=0,r.mode=ay;case ay:if(r.havedict===0)return t.next_out=o,t.avail_out=u,t.next_in=i,t.avail_in=c,r.hold=m,r.bits=h,jce;t.adler=r.check=1,r.mode=$c;case $c:if(a===bce||a===I0)break e;case S2:if(r.last){m>>>=h&7,h-=h&7,r.mode=C2;break}for(;h<3;){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}switch(r.last=m&1,m>>>=1,h-=1,m&3){case 0:r.mode=Wk;break;case 1:if(Ece(r),r.mode=z0,a===I0){m>>>=2,h-=2;break e}break;case 2:r.mode=Yk;break;case 3:t.msg="invalid block type",r.mode=Vr}m>>>=2,h-=2;break;case Wk:for(m>>>=h&7,h-=h&7;h<32;){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}if((m&65535)!==(m>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Vr;break}if(r.length=m&65535,m=0,h=0,r.mode=_2,a===I0)break e;case _2:r.mode=Hk;case Hk:if(g=r.length,g){if(g>c&&(g=c),g>u&&(g=u),g===0)break e;n.set(s.subarray(i,i+g),o),c-=g,i+=g,u-=g,o+=g,r.length-=g;break}r.mode=$c;break;case Yk:for(;h<14;){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}if(r.nlen=(m&31)+257,m>>>=5,h-=5,r.ndist=(m&31)+1,m>>>=5,h-=5,r.ncode=(m&15)+4,m>>>=4,h-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Vr;break}r.have=0,r.mode=Gk;case Gk:for(;r.have<r.ncode;){for(;h<3;){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}r.lens[C[r.have++]]=m&7,m>>>=3,h-=3}for(;r.have<19;)r.lens[C[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,B={bits:r.lenbits},M=wf(yce,r.lens,0,19,r.lencode,0,r.work,B),r.lenbits=B.bits,M){t.msg="invalid code lengths set",r.mode=Vr;break}r.have=0,r.mode=Vk;case Vk:for(;r.have<r.nlen+r.ndist;){for(;w=r.lencode[m&(1<<r.lenbits)-1],j=w>>>24,T=w>>>16&255,k=w&65535,!(j<=h);){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}if(k<16)m>>>=j,h-=j,r.lens[r.have++]=k;else{if(k===16){for(D=j+2;h<D;){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}if(m>>>=j,h-=j,r.have===0){t.msg="invalid bit length repeat",r.mode=Vr;break}A=r.lens[r.have-1],g=3+(m&3),m>>>=2,h-=2}else if(k===17){for(D=j+3;h<D;){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}m>>>=j,h-=j,A=0,g=3+(m&7),m>>>=3,h-=3}else{for(D=j+7;h<D;){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}m>>>=j,h-=j,A=0,g=11+(m&127),m>>>=7,h-=7}if(r.have+g>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Vr;break}for(;g--;)r.lens[r.have++]=A}}if(r.mode===Vr)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Vr;break}if(r.lenbits=9,B={bits:r.lenbits},M=wf(UO,r.lens,0,r.nlen,r.lencode,0,r.work,B),r.lenbits=B.bits,M){t.msg="invalid literal/lengths set",r.mode=Vr;break}if(r.distbits=6,r.distcode=r.distdyn,B={bits:r.distbits},M=wf(WO,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,B),r.distbits=B.bits,M){t.msg="invalid distances set",r.mode=Vr;break}if(r.mode=z0,a===I0)break e;case z0:r.mode=$0;case $0:if(c>=6&&u>=258){t.next_out=o,t.avail_out=u,t.next_in=i,t.avail_in=c,r.hold=m,r.bits=h,mce(t,y),o=t.next_out,n=t.output,u=t.avail_out,i=t.next_in,s=t.input,c=t.avail_in,m=r.hold,h=r.bits,r.mode===$c&&(r.back=-1);break}for(r.back=0;w=r.lencode[m&(1<<r.lenbits)-1],j=w>>>24,T=w>>>16&255,k=w&65535,!(j<=h);){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}if(T&&(T&240)===0){for(R=j,P=T,$=k;w=r.lencode[$+((m&(1<<R+P)-1)>>R)],j=w>>>24,T=w>>>16&255,k=w&65535,!(R+j<=h);){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}m>>>=R,h-=R,r.back+=R}if(m>>>=j,h-=j,r.back+=j,r.length=k,T===0){r.mode=Qk;break}if(T&32){r.back=-1,r.mode=$c;break}if(T&64){t.msg="invalid literal/length code",r.mode=Vr;break}r.extra=T&15,r.mode=Kk;case Kk:if(r.extra){for(D=r.extra;h<D;){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}r.length+=m&(1<<r.extra)-1,m>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Xk;case Xk:for(;w=r.distcode[m&(1<<r.distbits)-1],j=w>>>24,T=w>>>16&255,k=w&65535,!(j<=h);){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}if((T&240)===0){for(R=j,P=T,$=k;w=r.distcode[$+((m&(1<<R+P)-1)>>R)],j=w>>>24,T=w>>>16&255,k=w&65535,!(R+j<=h);){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}m>>>=R,h-=R,r.back+=R}if(m>>>=j,h-=j,r.back+=j,T&64){t.msg="invalid distance code",r.mode=Vr;break}r.offset=k,r.extra=T&15,r.mode=Jk;case Jk:if(r.extra){for(D=r.extra;h<D;){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}r.offset+=m&(1<<r.extra)-1,m>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Vr;break}r.mode=Zk;case Zk:if(u===0)break e;if(g=y-u,r.offset>g){if(g=r.offset-g,g>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Vr;break}g>r.wnext?(g-=r.wnext,v=r.wsize-g):v=r.wnext-g,g>r.length&&(g=r.length),N=r.window}else N=n,v=o-r.offset,g=r.length;g>u&&(g=u),u-=g,r.length-=g;do n[o++]=N[v++];while(--g);r.length===0&&(r.mode=$0);break;case Qk:if(u===0)break e;n[o++]=r.length,u--,r.mode=$0;break;case C2:if(r.wrap){for(;h<32;){if(c===0)break e;c--,m|=s[i++]<<h,h+=8}if(y-=u,t.total_out+=y,r.total+=y,r.wrap&4&&y&&(t.adler=r.check=r.flags?Jo(r.check,n,y,o-y):yN(r.check,n,y,o-y)),y=u,r.wrap&4&&(r.flags?m:a7(m))!==r.check){t.msg="incorrect data check",r.mode=Vr;break}m=0,h=0}r.mode=e7;case e7:if(r.wrap&&r.flags){for(;h<32;){if(c===0)break e;c--,m+=s[i++]<<h,h+=8}if(r.wrap&4&&m!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Vr;break}m=0,h=0}r.mode=t7;case t7:M=vce;break e;case Vr:M=HO;break e;case GO:return YO;case VO:default:return Gl}return t.next_out=o,t.avail_out=u,t.next_in=i,t.avail_in=c,r.hold=m,r.bits=h,(r.wsize||y!==t.avail_out&&r.mode<Vr&&(r.mode<C2||a!==Ok))&&QO(t,t.output,t.next_out,y-t.avail_out),p-=t.avail_in,y-=t.avail_out,t.total_in+=p,t.total_out+=y,r.total+=y,r.wrap&4&&y&&(t.adler=r.check=r.flags?Jo(r.check,n,y,t.next_out-y):yN(r.check,n,y,t.next_out-y)),t.data_type=r.bits+(r.last?64:0)+(r.mode===$c?128:0)+(r.mode===z0||r.mode===_2?256:0),(p===0&&y===0||a===Ok)&&M===Sm&&(M=Nce),M},Pce=t=>{if(Em(t))return Gl;let a=t.state;return a.window&&(a.window=null),t.state=null,Sm},Dce=(t,a)=>{if(Em(t))return Gl;const r=t.state;return(r.wrap&2)===0?Gl:(r.head=a,a.done=!1,Sm)},Oce=(t,a)=>{const r=a.length;let s,n,i;return Em(t)||(s=t.state,s.wrap!==0&&s.mode!==ay)?Gl:s.mode===ay&&(n=1,n=yN(n,a,r,0),n!==s.check)?HO:(i=QO(t,a,r,r),i?(s.mode=GO,YO):(s.havedict=1,Sm))};var Lce=XO,Mce=JO,Rce=KO,Ice=Ace,zce=ZO,$ce=Tce,Bce=Pce,Fce=Dce,qce=Oce,Uce="pako inflate (from Nodeca project)",Bc={inflateReset:Lce,inflateReset2:Mce,inflateResetKeep:Rce,inflateInit:Ice,inflateInit2:zce,inflate:$ce,inflateEnd:Bce,inflateGetHeader:Fce,inflateSetDictionary:qce,inflateInfo:Uce};function Wce(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Hce=Wce;const eL=Object.prototype.toString,{Z_NO_FLUSH:Yce,Z_FINISH:Gce,Z_OK:qf,Z_STREAM_END:E2,Z_NEED_DICT:T2,Z_STREAM_ERROR:Vce,Z_DATA_ERROR:s7,Z_MEM_ERROR:Kce}=BO;function gp(t){this.options=FO.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const a=this.options;a.raw&&a.windowBits>=0&&a.windowBits<16&&(a.windowBits=-a.windowBits,a.windowBits===0&&(a.windowBits=-15)),a.windowBits>=0&&a.windowBits<16&&!(t&&t.windowBits)&&(a.windowBits+=32),a.windowBits>15&&a.windowBits<48&&(a.windowBits&15)===0&&(a.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new dce,this.strm.avail_out=0;let r=Bc.inflateInit2(this.strm,a.windowBits);if(r!==qf)throw new Error(bN[r]);if(this.header=new Hce,Bc.inflateGetHeader(this.strm,this.header),a.dictionary&&(typeof a.dictionary=="string"?a.dictionary=vN.string2buf(a.dictionary):eL.call(a.dictionary)==="[object ArrayBuffer]"&&(a.dictionary=new Uint8Array(a.dictionary)),a.raw&&(r=Bc.inflateSetDictionary(this.strm,a.dictionary),r!==qf)))throw new Error(bN[r])}gp.prototype.push=function(t,a){const r=this.strm,s=this.options.chunkSize,n=this.options.dictionary;let i,o,c;if(this.ended)return!1;for(a===~~a?o=a:o=a===!0?Gce:Yce,eL.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(s),r.next_out=0,r.avail_out=s),i=Bc.inflate(r,o),i===T2&&n&&(i=Bc.inflateSetDictionary(r,n),i===qf?i=Bc.inflate(r,o):i===s7&&(i=T2));r.avail_in>0&&i===E2&&r.state.wrap>0&&t[r.next_in]!==0;)Bc.inflateReset(r),i=Bc.inflate(r,o);switch(i){case Vce:case s7:case T2:case Kce:return this.onEnd(i),this.ended=!0,!1}if(c=r.avail_out,r.next_out&&(r.avail_out===0||i===E2))if(this.options.to==="string"){let u=vN.utf8border(r.output,r.next_out),m=r.next_out-u,h=vN.buf2string(r.output,u);r.next_out=m,r.avail_out=s-m,m&&r.output.set(r.output.subarray(u,u+m),0),this.onData(h)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===qf&&c===0)){if(i===E2)return i=Bc.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};gp.prototype.onData=function(t){this.chunks.push(t)};gp.prototype.onEnd=function(t){t===qf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=FO.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Xce(t,a){const r=new gp(a);if(r.push(t),r.err)throw r.msg||bN[r.err];return r.result}var Jce=gp,Zce=Xce,Qce={Inflate:Jce,inflate:Zce};const{Inflate:ede,inflate:tde}=Qce;var n7=ede,ade=tde;const tL=[];for(let t=0;t<256;t++){let a=t;for(let r=0;r<8;r++)a&1?a=3988292384^a>>>1:a=a>>>1;tL[t]=a}const i7=4294967295;function rde(t,a,r){let s=t;for(let n=0;n<r;n++)s=tL[(s^a[n])&255]^s>>>8;return s}function sde(t,a){return(rde(i7,t,a)^i7)>>>0}function l7(t,a,r){const s=t.readUint32(),n=sde(new Uint8Array(t.buffer,t.byteOffset+t.offset-a-4,a),a);if(n!==s)throw new Error(`CRC mismatch for chunk ${r}. Expected ${s}, found ${n}`)}function aL(t,a,r){for(let s=0;s<r;s++)a[s]=t[s]}function rL(t,a,r,s){let n=0;for(;n<s;n++)a[n]=t[n];for(;n<r;n++)a[n]=t[n]+a[n-s]&255}function sL(t,a,r,s){let n=0;if(r.length===0)for(;n<s;n++)a[n]=t[n];else for(;n<s;n++)a[n]=t[n]+r[n]&255}function nL(t,a,r,s,n){let i=0;if(r.length===0){for(;i<n;i++)a[i]=t[i];for(;i<s;i++)a[i]=t[i]+(a[i-n]>>1)&255}else{for(;i<n;i++)a[i]=t[i]+(r[i]>>1)&255;for(;i<s;i++)a[i]=t[i]+(a[i-n]+r[i]>>1)&255}}function iL(t,a,r,s,n){let i=0;if(r.length===0){for(;i<n;i++)a[i]=t[i];for(;i<s;i++)a[i]=t[i]+a[i-n]&255}else{for(;i<n;i++)a[i]=t[i]+r[i]&255;for(;i<s;i++)a[i]=t[i]+nde(a[i-n],r[i],r[i-n])&255}}function nde(t,a,r){const s=t+a-r,n=Math.abs(s-t),i=Math.abs(s-a),o=Math.abs(s-r);return n<=i&&n<=o?t:i<=o?a:r}function ide(t,a,r,s,n,i){switch(t){case 0:aL(a,r,n);break;case 1:rL(a,r,n,i);break;case 2:sL(a,r,s,n);break;case 3:nL(a,r,s,n,i);break;case 4:iL(a,r,s,n,i);break;default:throw new Error(`Unsupported filter: ${t}`)}}const lde=new Uint16Array([255]),ode=new Uint8Array(lde.buffer),cde=ode[0]===255;function dde(t){const{data:a,width:r,height:s,channels:n,depth:i}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(i/8)*n,u=new Uint8Array(s*r*c);let m=0;for(let h=0;h<7;h++){const p=o[h],y=Math.ceil((r-p.x)/p.xStep),g=Math.ceil((s-p.y)/p.yStep);if(y<=0||g<=0)continue;const v=y*c,N=new Uint8Array(v);for(let w=0;w<g;w++){const j=a[m++],T=a.subarray(m,m+v);m+=v;const k=new Uint8Array(v);ide(j,T,k,N,v,c),N.set(k);for(let R=0;R<y;R++){const P=p.x+R*p.xStep,$=p.y+w*p.yStep;if(!(P>=r||$>=s))for(let A=0;A<c;A++)u[($*r+P)*c+A]=k[R*c+A]}}}if(i===16){const h=new Uint16Array(u.buffer);if(cde)for(let p=0;p<h.length;p++)h[p]=ude(h[p]);return h}else return u}function ude(t){return(t&255)<<8|t>>8&255}const mde=new Uint16Array([255]),hde=new Uint8Array(mde.buffer),xde=hde[0]===255,fde=new Uint8Array(0);function o7(t){const{data:a,width:r,height:s,channels:n,depth:i}=t,o=Math.ceil(i/8)*n,c=Math.ceil(i/8*n*r),u=new Uint8Array(s*c);let m=fde,h=0,p,y;for(let g=0;g<s;g++){switch(p=a.subarray(h+1,h+1+c),y=u.subarray(g*c,(g+1)*c),a[h]){case 0:aL(p,y,c);break;case 1:rL(p,y,c,o);break;case 2:sL(p,y,m,c);break;case 3:nL(p,y,m,c,o);break;case 4:iL(p,y,m,c,o);break;default:throw new Error(`Unsupported filter: ${a[h]}`)}m=y,h+=c+1}if(i===16){const g=new Uint16Array(u.buffer);if(xde)for(let v=0;v<g.length;v++)g[v]=pde(g[v]);return g}else return u}function pde(t){return(t&255)<<8|t>>8&255}const tg=Uint8Array.of(137,80,78,71,13,10,26,10);function c7(t){if(!gde(t.readBytes(tg.length)))throw new Error("wrong PNG signature")}function gde(t){if(t.length<tg.length)return!1;for(let a=0;a<tg.length;a++)if(t[a]!==tg[a])return!1;return!0}const yde="tEXt",bde=0,lL=new TextDecoder("latin1");function vde(t){if(Nde(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const jde=/^[\u0000-\u00FF]*$/;function Nde(t){if(!jde.test(t))throw new Error("invalid latin1 text")}function wde(t,a,r){const s=oL(a);t[s]=Sde(a,r-s.length-1)}function oL(t){for(t.mark();t.readByte()!==bde;);const a=t.offset;t.reset();const r=lL.decode(t.readBytes(a-t.offset-1));return t.skip(1),vde(r),r}function Sde(t,a){return lL.decode(t.readBytes(a))}const Ji={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},P2={UNKNOWN:-1,DEFLATE:0},d7={UNKNOWN:-1,ADAPTIVE:0},D2={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},B0={NONE:0,BACKGROUND:1,PREVIOUS:2},O2={SOURCE:0,OVER:1};class _de extends X3{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(a,r={}){super(a);const{checkCrc:s=!1}=r;this._checkCrc=s,this._inflator=new n7,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=P2.UNKNOWN,this._filterMethod=d7.UNKNOWN,this._interlaceMethod=D2.UNKNOWN,this._colorType=Ji.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(c7(this);!this._end;){const a=this.readUint32(),r=this.readChars(4);this.decodeChunk(a,r)}return this.decodeImage(),this._png}decodeApng(){for(c7(this);!this._end;){const a=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(a,r)}return this.decodeApngImage(),this._apng}decodeChunk(a,r){const s=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(a);break;case"IDAT":this.decodeIDAT(a);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(a);break;case"iCCP":this.decodeiCCP(a);break;case yde:wde(this._png.text,this,a);break;case"pHYs":this.decodepHYs();break;default:this.skip(a);break}if(this.offset-s!==a)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?l7(this,a+4,r):this.skip(4)}decodeApngChunk(a,r){const s=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(a);break;default:this.decodeChunk(a,r),this.offset=s+a;break}if(this.offset-s!==a)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?l7(this,a+4,r):this.skip(4)}decodeIHDR(){const a=this._png;a.width=this.readUint32(),a.height=this.readUint32(),a.depth=Cde(this.readUint8());const r=this.readUint8();this._colorType=r;let s;switch(r){case Ji.GREYSCALE:s=1;break;case Ji.TRUECOLOUR:s=3;break;case Ji.INDEXED_COLOUR:s=1;break;case Ji.GREYSCALE_ALPHA:s=2;break;case Ji.TRUECOLOUR_ALPHA:s=4;break;case Ji.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==P2.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const a={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(a)}decodePLTE(a){if(a%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${a}`);const r=a/3;this._hasPalette=!0;const s=[];this._palette=s;for(let n=0;n<r;n++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(a){this._writingDataChunks=!0;const r=a,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(a)}decodeFDAT(a){this._writingDataChunks=!0;let r=a,s=this.offset+this.byteOffset;if(s+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,s,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(a)}decodetRNS(a){switch(this._colorType){case Ji.GREYSCALE:case Ji.TRUECOLOUR:{if(a%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${a}`);if(a/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${a/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(a/2);for(let r=0;r<a/2;r++)this._transparency[r]=this.readUint16();break}case Ji.INDEXED_COLOUR:{if(a>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${a} vs ${this._palette.length})`);let r=0;for(;r<a;r++){const s=this.readByte();this._palette[r].push(s)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Ji.UNKNOWN:case Ji.GREYSCALE_ALPHA:case Ji.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(a){const r=oL(this),s=this.readUint8();if(s!==P2.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const n=this.readBytes(a-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:ade(n)}}decodepHYs(){const a=this.readUint32(),r=this.readUint32(),s=this.readByte();this._png.resolution={x:a,y:r,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let a=0;a<this._numberOfFrames;a++){const r={sequenceNumber:this._frames[a].sequenceNumber,delayNumber:this._frames[a].delayNumber,delayDenominator:this._frames[a].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(a);if(s){if(s.data=o7({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),a===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)r.data=s.data;else{const n=this._apng.frames.at(a-1);this.disposeFrame(s,n,r),this.addFrameDataToCanvas(r,s)}this._apng.frames.push(r)}}return this._apng}disposeFrame(a,r,s){switch(a.disposeOp){case B0.NONE:break;case B0.BACKGROUND:for(let n=0;n<this._png.height;n++)for(let i=0;i<this._png.width;i++){const o=(n*a.width+i)*this._png.channels;for(let c=0;c<this._png.channels;c++)s.data[o+c]=0}break;case B0.PREVIOUS:s.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(a,r){const s=1<<this._png.depth,n=(i,o)=>{const c=((i+r.yOffset)*this._png.width+r.xOffset+o)*this._png.channels,u=(i*r.width+o)*this._png.channels;return{index:c,frameIndex:u}};switch(r.blendOp){case O2.SOURCE:for(let i=0;i<r.height;i++)for(let o=0;o<r.width;o++){const{index:c,frameIndex:u}=n(i,o);for(let m=0;m<this._png.channels;m++)a.data[c+m]=r.data[u+m]}break;case O2.OVER:for(let i=0;i<r.height;i++)for(let o=0;o<r.width;o++){const{index:c,frameIndex:u}=n(i,o);for(let m=0;m<this._png.channels;m++){const h=r.data[u+this._png.channels-1]/s,p=m%(this._png.channels-1)===0?1:r.data[u+m],y=Math.floor(h*p+(1-h)*a.data[c+m]);a.data[c+m]+=y}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const a=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==d7.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===D2.NO_INTERLACE)this._png.data=o7({data:a,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===D2.ADAM7)this._png.data=dde({data:a,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const a=this._inflator.result,r=this._frames.at(-1);r?r.data=a:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:B0.NONE,blendOp:O2.SOURCE,data:a}),this._inflator=new n7,this._writingDataChunks=!1}}function Cde(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var u7;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(u7||(u7={}));function kde(t,a){return new _de(t,a).decode()}var ja=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function L2(){ja.console&&typeof ja.console.log=="function"&&ja.console.log.apply(ja.console,arguments)}var _r={log:L2,warn:function(t){ja.console&&(typeof ja.console.warn=="function"?ja.console.warn.apply(ja.console,arguments):L2.call(null,arguments))},error:function(t){ja.console&&(typeof ja.console.error=="function"?ja.console.error.apply(ja.console,arguments):L2(t))}};function M2(t,a,r){var s=new XMLHttpRequest;s.open("GET",t),s.responseType="blob",s.onload=function(){Vu(s.response,a,r)},s.onerror=function(){_r.error("could not download file")},s.send()}function m7(t){var a=new XMLHttpRequest;a.open("HEAD",t,!1);try{a.send()}catch{}return a.status>=200&&a.status<=299}function F0(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(a)}}var Vu=ja.saveAs||((typeof window>"u"?"undefined":fr(window))!=="object"||window!==ja?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,a,r){var s=ja.URL||ja.webkitURL,n=document.createElement("a");a=a||t.name||"download",n.download=a,n.rel="noopener",typeof t=="string"?(n.href=t,n.origin!==location.origin?m7(n.href)?M2(t,a,r):F0(n,n.target="_blank"):F0(n)):(n.href=s.createObjectURL(t),setTimeout(function(){s.revokeObjectURL(n.href)},4e4),setTimeout(function(){F0(n)},0))}:"msSaveOrOpenBlob"in navigator?function(t,a,r){if(a=a||t.name||"download",typeof t=="string")if(m7(t))M2(t,a,r);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout(function(){F0(s)})}else navigator.msSaveOrOpenBlob(function(n,i){return i===void 0?i={autoBom:!1}:fr(i)!=="object"&&(_r.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}(t,r),a)}:function(t,a,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof t=="string")return M2(t,a,r);var n=t.type==="application/octet-stream",i=/constructor/i.test(ja.HTMLElement)||ja.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||n&&i)&&(typeof FileReader>"u"?"undefined":fr(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var h=c.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=h:location=h,s=null},c.readAsDataURL(t)}else{var u=ja.URL||ja.webkitURL,m=u.createObjectURL(t);s?s.location=m:location.href=m,s=null,setTimeout(function(){u.revokeObjectURL(m)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function cL(t){var a;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],s=0;s<r.length;s++){var n=r[s].re,i=r[s].process,o=n.exec(t);o&&(a=i(o),this.r=a[0],this.g=a[1],this.b=a[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),u=this.g.toString(16),m=this.b.toString(16);return c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),m.length==1&&(m="0"+m),"#"+c+u+m}}var ag=ja.atob.bind(ja),h7=ja.btoa.bind(ja);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function R2(t,a){var r=t[0],s=t[1],n=t[2],i=t[3];r=In(r,s,n,i,a[0],7,-680876936),i=In(i,r,s,n,a[1],12,-389564586),n=In(n,i,r,s,a[2],17,606105819),s=In(s,n,i,r,a[3],22,-1044525330),r=In(r,s,n,i,a[4],7,-176418897),i=In(i,r,s,n,a[5],12,1200080426),n=In(n,i,r,s,a[6],17,-1473231341),s=In(s,n,i,r,a[7],22,-45705983),r=In(r,s,n,i,a[8],7,1770035416),i=In(i,r,s,n,a[9],12,-1958414417),n=In(n,i,r,s,a[10],17,-42063),s=In(s,n,i,r,a[11],22,-1990404162),r=In(r,s,n,i,a[12],7,1804603682),i=In(i,r,s,n,a[13],12,-40341101),n=In(n,i,r,s,a[14],17,-1502002290),r=zn(r,s=In(s,n,i,r,a[15],22,1236535329),n,i,a[1],5,-165796510),i=zn(i,r,s,n,a[6],9,-1069501632),n=zn(n,i,r,s,a[11],14,643717713),s=zn(s,n,i,r,a[0],20,-373897302),r=zn(r,s,n,i,a[5],5,-701558691),i=zn(i,r,s,n,a[10],9,38016083),n=zn(n,i,r,s,a[15],14,-660478335),s=zn(s,n,i,r,a[4],20,-405537848),r=zn(r,s,n,i,a[9],5,568446438),i=zn(i,r,s,n,a[14],9,-1019803690),n=zn(n,i,r,s,a[3],14,-187363961),s=zn(s,n,i,r,a[8],20,1163531501),r=zn(r,s,n,i,a[13],5,-1444681467),i=zn(i,r,s,n,a[2],9,-51403784),n=zn(n,i,r,s,a[7],14,1735328473),r=$n(r,s=zn(s,n,i,r,a[12],20,-1926607734),n,i,a[5],4,-378558),i=$n(i,r,s,n,a[8],11,-2022574463),n=$n(n,i,r,s,a[11],16,1839030562),s=$n(s,n,i,r,a[14],23,-35309556),r=$n(r,s,n,i,a[1],4,-1530992060),i=$n(i,r,s,n,a[4],11,1272893353),n=$n(n,i,r,s,a[7],16,-155497632),s=$n(s,n,i,r,a[10],23,-1094730640),r=$n(r,s,n,i,a[13],4,681279174),i=$n(i,r,s,n,a[0],11,-358537222),n=$n(n,i,r,s,a[3],16,-722521979),s=$n(s,n,i,r,a[6],23,76029189),r=$n(r,s,n,i,a[9],4,-640364487),i=$n(i,r,s,n,a[12],11,-421815835),n=$n(n,i,r,s,a[15],16,530742520),r=Bn(r,s=$n(s,n,i,r,a[2],23,-995338651),n,i,a[0],6,-198630844),i=Bn(i,r,s,n,a[7],10,1126891415),n=Bn(n,i,r,s,a[14],15,-1416354905),s=Bn(s,n,i,r,a[5],21,-57434055),r=Bn(r,s,n,i,a[12],6,1700485571),i=Bn(i,r,s,n,a[3],10,-1894986606),n=Bn(n,i,r,s,a[10],15,-1051523),s=Bn(s,n,i,r,a[1],21,-2054922799),r=Bn(r,s,n,i,a[8],6,1873313359),i=Bn(i,r,s,n,a[15],10,-30611744),n=Bn(n,i,r,s,a[6],15,-1560198380),s=Bn(s,n,i,r,a[13],21,1309151649),r=Bn(r,s,n,i,a[4],6,-145523070),i=Bn(i,r,s,n,a[11],10,-1120210379),n=Bn(n,i,r,s,a[2],15,718787259),s=Bn(s,n,i,r,a[9],21,-343485551),t[0]=Qd(r,t[0]),t[1]=Qd(s,t[1]),t[2]=Qd(n,t[2]),t[3]=Qd(i,t[3])}function mb(t,a,r,s,n,i){return a=Qd(Qd(a,t),Qd(s,i)),Qd(a<<n|a>>>32-n,r)}function In(t,a,r,s,n,i,o){return mb(a&r|~a&s,t,a,n,i,o)}function zn(t,a,r,s,n,i,o){return mb(a&s|r&~s,t,a,n,i,o)}function $n(t,a,r,s,n,i,o){return mb(a^r^s,t,a,n,i,o)}function Bn(t,a,r,s,n,i,o){return mb(r^(a|~s),t,a,n,i,o)}function dL(t){var a,r=t.length,s=[1732584193,-271733879,-1732584194,271733878];for(a=64;a<=t.length;a+=64)R2(s,Ade(t.substring(a-64,a)));t=t.substring(a-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(a=0;a<t.length;a++)n[a>>2]|=t.charCodeAt(a)<<(a%4<<3);if(n[a>>2]|=128<<(a%4<<3),a>55)for(R2(s,n),a=0;a<16;a++)n[a]=0;return n[14]=8*r,R2(s,n),s}function Ade(t){var a,r=[];for(a=0;a<64;a+=4)r[a>>2]=t.charCodeAt(a)+(t.charCodeAt(a+1)<<8)+(t.charCodeAt(a+2)<<16)+(t.charCodeAt(a+3)<<24);return r}var x7="0123456789abcdef".split("");function Ede(t){for(var a="",r=0;r<4;r++)a+=x7[t>>8*r+4&15]+x7[t>>8*r&15];return a}function Tde(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function jN(t){return dL(t).map(Tde).join("")}var Pde=function(t){for(var a=0;a<t.length;a++)t[a]=Ede(t[a]);return t.join("")}(dL("hello"))!="5d41402abc4b2a76b9719d911017c592";function Qd(t,a){if(Pde){var r=(65535&t)+(65535&a);return(t>>16)+(a>>16)+(r>>16)<<16|65535&r}return t+a&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function NN(t,a){var r,s,n,i;if(t!==r){for(var o=(n=t,i=1+(256/t.length|0),new Array(i+1).join(n)),c=[],u=0;u<256;u++)c[u]=u;var m=0;for(u=0;u<256;u++){var h=c[u];m=(m+h+o.charCodeAt(u))%256,c[u]=c[m],c[m]=h}r=t,s=c}else c=s;var p=a.length,y=0,g=0,v="";for(u=0;u<p;u++)g=(g+(h=c[y=(y+1)%256]))%256,c[y]=c[g],c[g]=h,o=c[(c[y]+c[g])%256],v+=String.fromCharCode(a.charCodeAt(u)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var f7={print:4,modify:8,copy:16,"annot-forms":32};function hh(t,a,r,s){this.v=1,this.r=2;var n=192;t.forEach(function(c){if(f7.perm!==void 0)throw new Error("Invalid permission: "+c);n+=f7[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(a+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^n)),this.encryptionKey=jN(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=NN(this.encryptionKey,this.padding)}function xh(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var a="",r=t.length,s=0;s<r;s++){var n=t.charCodeAt(s);a+=n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?"#"+("0"+n.toString(16)).slice(-2):t[s]}return a}function p7(t){if(fr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var a={};this.subscribe=function(r,s,n){if(n=n||!1,typeof r!="string"||typeof s!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");a.hasOwnProperty(r)||(a[r]={});var i=Math.random().toString(35);return a[r][i]=[s,!!n],i},this.unsubscribe=function(r){for(var s in a)if(a[s][r])return delete a[s][r],Object.keys(a[s]).length===0&&delete a[s],!0;return!1},this.publish=function(r){if(a.hasOwnProperty(r)){var s=Array.prototype.slice.call(arguments,1),n=[];for(var i in a[r]){var o=a[r][i];try{o[0].apply(t,s)}catch(c){ja.console&&_r.error("jsPDF PubSub Error",c.message,c)}o[1]&&n.push(i)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return a}}function ry(t){if(!(this instanceof ry))return new ry(t);var a="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&a.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function uL(t,a){this.gState=t,this.matrix=a,this.id="",this.objectNumber=-1}function Ku(t,a,r,s,n){if(!(this instanceof Ku))return new Ku(t,a,r,s,n);this.type=t==="axial"?2:3,this.coords=a,this.colors=r,uL.call(this,s,n)}function yh(t,a,r,s,n){if(!(this instanceof yh))return new yh(t,a,r,s,n);this.boundingBox=t,this.xStep=a,this.yStep=r,this.stream="",this.cloneIndex=0,uL.call(this,s,n)}function ia(t){var a,r=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],n=arguments[2],i=arguments[3],o=[],c=1,u=16,m="S",h=null;fr(t=t||{})==="object"&&(r=t.orientation,s=t.unit||s,n=t.format||n,i=t.compress||t.compressPdf||i,(h=t.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),c=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(a=t.precision),t.floatPrecision!==void 0&&(u=t.floatPrecision),m=t.defaultPathOperation||"S"),o=t.filters||(i===!0?["FlateEncode"]:o),s=s||"mm",r=(""+(r||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,y={},g={internal:{},__private__:{}};g.__private__.PubSub=p7;var v="1.3",N=g.__private__.getPdfVersion=function(){return v};g.__private__.setPdfVersion=function(U){v=U};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return w};var j=g.__private__.getPageFormat=function(U){return w[U]};n=n||"a4";var T="compat",k="advanced",R=T;function P(){this.saveGraphicsState(),ae(new Yt(we,0,0,-we,0,si()*we).toString()+" cm"),this.setFontSize(this.getFontSize()/we),m="n",R=k}function $(){this.restoreGraphicsState(),m="S",R=T}var A=g.__private__.combineFontStyleAndFontWeight=function(U,ue){if(U=="bold"&&ue=="normal"||U=="bold"&&ue==400||U=="normal"&&ue=="italic"||U=="bold"&&ue=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ue&&(U=ue==400||ue==="normal"?U==="italic"?"italic":"normal":ue!=700&&ue!=="bold"||U!=="normal"?(ue==700?"bold":ue)+""+U:"bold"),U};g.advancedAPI=function(U){var ue=R===T;return ue&&P.call(this),typeof U!="function"||(U(this),ue&&$.call(this)),this},g.compatAPI=function(U){var ue=R===k;return ue&&$.call(this),typeof U!="function"||(U(this),ue&&P.call(this)),this},g.isAdvancedAPI=function(){return R===k};var M,_=function(U){if(R!==k)throw new Error(U+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=g.roundToPrecision=g.__private__.roundToPrecision=function(U,ue){var Ce=a||ue;if(isNaN(U)||isNaN(Ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return U.toFixed(Ce).replace(/0+$/,"")};M=g.hpf=g.__private__.hpf=typeof u=="number"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return B(U,u)}:u==="smart"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return B(U,U>-1&&U<1?16:5)}:function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return B(U,16)};var D=g.f2=g.__private__.f2=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f2");return B(U,2)},C=g.__private__.f3=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f3");return B(U,3)},L=g.scale=g.__private__.scale=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.scale");return R===T?U*we:R===k?U:void 0},H=function(U){return L(function(ue){return R===T?si()-ue:R===k?ue:void 0}(U))};g.__private__.setPrecision=g.setPrecision=function(U){typeof parseInt(U,10)=="number"&&(a=parseInt(U,10))};var V,Y="00000000000000000000000000000000",J=g.__private__.getFileId=function(){return Y},W=g.__private__.setFileId=function(U){return Y=U!==void 0&&/^[a-fA-F0-9]{32}$/.test(U)?U.toUpperCase():Y.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&($t=new hh(h.userPermissions,h.userPassword,h.ownerPassword,Y)),Y};g.setFileId=function(U){return W(U),this},g.getFileId=function(){return J()};var X=g.__private__.convertDateToPDFDate=function(U){var ue=U.getTimezoneOffset(),Ce=ue<0?"+":"-",Be=Math.floor(Math.abs(ue/60)),Ze=Math.abs(ue%60),yt=[Ce,z(Be),"'",z(Ze),"'"].join("");return["D:",U.getFullYear(),z(U.getMonth()+1),z(U.getDate()),z(U.getHours()),z(U.getMinutes()),z(U.getSeconds()),yt].join("")},te=g.__private__.convertPDFDateToDate=function(U){var ue=parseInt(U.substr(2,4),10),Ce=parseInt(U.substr(6,2),10)-1,Be=parseInt(U.substr(8,2),10),Ze=parseInt(U.substr(10,2),10),yt=parseInt(U.substr(12,2),10),_t=parseInt(U.substr(14,2),10);return new Date(ue,Ce,Be,Ze,yt,_t,0)},oe=g.__private__.setCreationDate=function(U){var ue;if(U===void 0&&(U=new Date),U instanceof Date)ue=X(U);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(U))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ue=U}return V=ue},q=g.__private__.getCreationDate=function(U){var ue=V;return U==="jsDate"&&(ue=te(V)),ue};g.setCreationDate=function(U){return oe(U),this},g.getCreationDate=function(U){return q(U)};var G,z=g.__private__.padd2=function(U){return("0"+parseInt(U)).slice(-2)},Z=g.__private__.padd2Hex=function(U){return("00"+(U=U.toString())).substr(U.length)},Q=0,fe=[],he=[],ne=0,me=[],pe=[],ie=!1,ke=he;g.__private__.setCustomOutputDestination=function(U){ie=!0,ke=U};var Ae=function(U){ie||(ke=U)};g.__private__.resetCustomOutputDestination=function(){ie=!1,ke=he};var ae=g.__private__.out=function(U){return U=U.toString(),ne+=U.length+1,ke.push(U),ke},Ne=g.__private__.write=function(U){return ae(arguments.length===1?U.toString():Array.prototype.join.call(arguments," "))},ce=g.__private__.getArrayBuffer=function(U){for(var ue=U.length,Ce=new ArrayBuffer(ue),Be=new Uint8Array(Ce);ue--;)Be[ue]=U.charCodeAt(ue);return Ce},De=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return De};var ye=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(U){return ye=R===k?U/we:U,this};var Ee,Ke=g.__private__.getFontSize=g.getFontSize=function(){return R===T?ye:ye*we},Re=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(U){return Re=U,this},g.__private__.getR2L=g.getR2L=function(){return Re};var Le,Oe=g.__private__.setZoomMode=function(U){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(U))Ee=U;else if(isNaN(U)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(U)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+U+'" is not recognized.');Ee=U}else Ee=parseInt(U,10)};g.__private__.getZoomMode=function(){return Ee};var $e,ct=g.__private__.setPageMode=function(U){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(U)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+U+'" is not recognized.');Le=U};g.__private__.getPageMode=function(){return Le};var Nt=g.__private__.setLayoutMode=function(U){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(U)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+U+'" is not recognized.');$e=U};g.__private__.getLayoutMode=function(){return $e},g.__private__.setDisplayMode=g.setDisplayMode=function(U,ue,Ce){return Oe(U),Nt(ue),ct(Ce),this};var jt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(U){if(Object.keys(jt).indexOf(U)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return jt[U]},g.__private__.getDocumentProperties=function(){return jt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(U){for(var ue in jt)jt.hasOwnProperty(ue)&&U[ue]&&(jt[ue]=U[ue]);return this},g.__private__.setDocumentProperty=function(U,ue){if(Object.keys(jt).indexOf(U)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return jt[U]=ue};var xt,we,Ie,dt,ut,Te={},Ve={},qe=[],Xe={},We={},Ge={},lt={},Dt=null,It=0,Bt=[],ze=new p7(g),Mt=t.hotfixes||[],oa={},ca={},Ka=[],Yt=function U(ue,Ce,Be,Ze,yt,_t){if(!(this instanceof U))return new U(ue,Ce,Be,Ze,yt,_t);isNaN(ue)&&(ue=1),isNaN(Ce)&&(Ce=0),isNaN(Be)&&(Be=0),isNaN(Ze)&&(Ze=1),isNaN(yt)&&(yt=0),isNaN(_t)&&(_t=0),this._matrix=[ue,Ce,Be,Ze,yt,_t]};Object.defineProperty(Yt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(Yt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(Yt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(Yt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(Yt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(Yt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(Yt.prototype,"a",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(Yt.prototype,"b",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(Yt.prototype,"c",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(Yt.prototype,"d",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(Yt.prototype,"e",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(Yt.prototype,"f",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(Yt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Yt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Yt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Yt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Yt.prototype.join=function(U){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(M).join(U)},Yt.prototype.multiply=function(U){var ue=U.sx*this.sx+U.shy*this.shx,Ce=U.sx*this.shy+U.shy*this.sy,Be=U.shx*this.sx+U.sy*this.shx,Ze=U.shx*this.shy+U.sy*this.sy,yt=U.tx*this.sx+U.ty*this.shx+this.tx,_t=U.tx*this.shy+U.ty*this.sy+this.ty;return new Yt(ue,Ce,Be,Ze,yt,_t)},Yt.prototype.decompose=function(){var U=this.sx,ue=this.shy,Ce=this.shx,Be=this.sy,Ze=this.tx,yt=this.ty,_t=Math.sqrt(U*U+ue*ue),Kt=(U/=_t)*Ce+(ue/=_t)*Be;Ce-=U*Kt,Be-=ue*Kt;var ra=Math.sqrt(Ce*Ce+Be*Be);return Kt/=ra,U*(Be/=ra)<ue*(Ce/=ra)&&(U=-U,ue=-ue,Kt=-Kt,_t=-_t),{scale:new Yt(_t,0,0,ra,0,0),translate:new Yt(1,0,0,1,Ze,yt),rotate:new Yt(U,ue,-ue,U,0,0),skew:new Yt(1,0,Kt,1,0,0)}},Yt.prototype.toString=function(U){return this.join(" ")},Yt.prototype.inversed=function(){var U=this.sx,ue=this.shy,Ce=this.shx,Be=this.sy,Ze=this.tx,yt=this.ty,_t=1/(U*Be-ue*Ce),Kt=Be*_t,ra=-ue*_t,pa=-Ce*_t,Sa=U*_t;return new Yt(Kt,ra,pa,Sa,-Kt*Ze-pa*yt,-ra*Ze-Sa*yt)},Yt.prototype.applyToPoint=function(U){var ue=U.x*this.sx+U.y*this.shx+this.tx,Ce=U.x*this.shy+U.y*this.sy+this.ty;return new pc(ue,Ce)},Yt.prototype.applyToRectangle=function(U){var ue=this.applyToPoint(U),Ce=this.applyToPoint(new pc(U.x+U.w,U.y+U.h));return new gc(ue.x,ue.y,Ce.x-ue.x,Ce.y-ue.y)},Yt.prototype.clone=function(){var U=this.sx,ue=this.shy,Ce=this.shx,Be=this.sy,Ze=this.tx,yt=this.ty;return new Yt(U,ue,Ce,Be,Ze,yt)},g.Matrix=Yt;var er=g.matrixMult=function(U,ue){return ue.multiply(U)},Ye=new Yt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Ye;var Et=function(U,ue){if(!We[U]){var Ce=(ue instanceof Ku?"Sh":"P")+(Object.keys(Xe).length+1).toString(10);ue.id=Ce,We[U]=Ce,Xe[Ce]=ue,ze.publish("addPattern",ue)}};g.ShadingPattern=Ku,g.TilingPattern=yh,g.addShadingPattern=function(U,ue){return _("addShadingPattern()"),Et(U,ue),this},g.beginTilingPattern=function(U){_("beginTilingPattern()"),eo(U.boundingBox[0],U.boundingBox[1],U.boundingBox[2]-U.boundingBox[0],U.boundingBox[3]-U.boundingBox[1],U.matrix)},g.endTilingPattern=function(U,ue){_("endTilingPattern()"),ue.stream=pe[G].join(`
`),Et(U,ue),ze.publish("endTilingPattern",ue),Ka.pop().restore()};var na,zt=g.__private__.newObject=function(){var U=it();return Tt(U,!0),U},it=g.__private__.newObjectDeferred=function(){return Q++,fe[Q]=function(){return ne},Q},Tt=function(U,ue){return ue=typeof ue=="boolean"&&ue,fe[U]=ne,ue&&ae(U+" 0 obj"),U},qt=g.__private__.newAdditionalObject=function(){var U={objId:it(),content:""};return me.push(U),U},aa=it(),Ar=it(),dr=g.__private__.decodeColorString=function(U){var ue=U.split(" ");if(ue.length!==2||ue[1]!=="g"&&ue[1]!=="G")ue.length!==5||ue[4]!=="k"&&ue[4]!=="K"||(ue=[(1-ue[0])*(1-ue[3]),(1-ue[1])*(1-ue[3]),(1-ue[2])*(1-ue[3]),"r"]);else{var Ce=parseFloat(ue[0]);ue=[Ce,Ce,Ce,"r"]}for(var Be="#",Ze=0;Ze<3;Ze++)Be+=("0"+Math.floor(255*parseFloat(ue[Ze])).toString(16)).slice(-2);return Be},Er=g.__private__.encodeColorString=function(U){var ue;typeof U=="string"&&(U={ch1:U});var Ce=U.ch1,Be=U.ch2,Ze=U.ch3,yt=U.ch4,_t=U.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ce=="string"&&Ce.charAt(0)!=="#"){var Kt=new cL(Ce);if(Kt.ok)Ce=Kt.toHex();else if(!/^\d*\.?\d*$/.test(Ce))throw new Error('Invalid color "'+Ce+'" passed to jsPDF.encodeColorString.')}if(typeof Ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ce)&&(Ce="#"+Ce[1]+Ce[1]+Ce[2]+Ce[2]+Ce[3]+Ce[3]),typeof Ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ce)){var ra=parseInt(Ce.substr(1),16);Ce=ra>>16&255,Be=ra>>8&255,Ze=255&ra}if(Be===void 0||yt===void 0&&Ce===Be&&Be===Ze)ue=typeof Ce=="string"?Ce+" "+_t[0]:U.precision===2?D(Ce/255)+" "+_t[0]:C(Ce/255)+" "+_t[0];else if(yt===void 0||fr(yt)==="object"){if(yt&&!isNaN(yt.a)&&yt.a===0)return["1.","1.","1.",_t[1]].join(" ");ue=typeof Ce=="string"?[Ce,Be,Ze,_t[1]].join(" "):U.precision===2?[D(Ce/255),D(Be/255),D(Ze/255),_t[1]].join(" "):[C(Ce/255),C(Be/255),C(Ze/255),_t[1]].join(" ")}else ue=typeof Ce=="string"?[Ce,Be,Ze,yt,_t[2]].join(" "):U.precision===2?[D(Ce),D(Be),D(Ze),D(yt),_t[2]].join(" "):[C(Ce),C(Be),C(Ze),C(yt),_t[2]].join(" ");return ue},ls=g.__private__.getFilters=function(){return o},gr=g.__private__.putStream=function(U){var ue=(U=U||{}).data||"",Ce=U.filters||ls(),Be=U.alreadyAppliedFilters||[],Ze=U.addLength1||!1,yt=ue.length,_t=U.objectId,Kt=function(ds){return ds};if(h!==null&&_t===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Kt=$t.encryptor(_t,0));var ra={};Ce===!0&&(Ce=["FlateEncode"]);var pa=U.additionalKeyValues||[],Sa=(ra=ia.API.processDataByFilters!==void 0?ia.API.processDataByFilters(ue,Ce):{data:ue,reverseChain:[]}).reverseChain+(Array.isArray(Be)?Be.join(" "):Be.toString());if(ra.data.length!==0&&(pa.push({key:"Length",value:ra.data.length}),Ze===!0&&pa.push({key:"Length1",value:yt})),Sa.length!=0)if(Sa.split("/").length-1==1)pa.push({key:"Filter",value:Sa});else{pa.push({key:"Filter",value:"["+Sa+"]"});for(var Ga=0;Ga<pa.length;Ga+=1)if(pa[Ga].key==="DecodeParms"){for(var Mr=[],cs=0;cs<ra.reverseChain.split("/").length-1;cs+=1)Mr.push("null");Mr.push(pa[Ga].value),pa[Ga].value="["+Mr.join(" ")+"]"}}ae("<<");for(var ir=0;ir<pa.length;ir++)ae("/"+pa[ir].key+" "+pa[ir].value);ae(">>"),ra.data.length!==0&&(ae("stream"),ae(Kt(ra.data)),ae("endstream"))},Ra=g.__private__.putPage=function(U){var ue=U.number,Ce=U.data,Be=U.objId,Ze=U.contentsObjId;Tt(Be,!0),ae("<</Type /Page"),ae("/Parent "+U.rootDictionaryObjId+" 0 R"),ae("/Resources "+U.resourceDictionaryObjId+" 0 R"),ae("/MediaBox ["+parseFloat(M(U.mediaBox.bottomLeftX))+" "+parseFloat(M(U.mediaBox.bottomLeftY))+" "+M(U.mediaBox.topRightX)+" "+M(U.mediaBox.topRightY)+"]"),U.cropBox!==null&&ae("/CropBox ["+M(U.cropBox.bottomLeftX)+" "+M(U.cropBox.bottomLeftY)+" "+M(U.cropBox.topRightX)+" "+M(U.cropBox.topRightY)+"]"),U.bleedBox!==null&&ae("/BleedBox ["+M(U.bleedBox.bottomLeftX)+" "+M(U.bleedBox.bottomLeftY)+" "+M(U.bleedBox.topRightX)+" "+M(U.bleedBox.topRightY)+"]"),U.trimBox!==null&&ae("/TrimBox ["+M(U.trimBox.bottomLeftX)+" "+M(U.trimBox.bottomLeftY)+" "+M(U.trimBox.topRightX)+" "+M(U.trimBox.topRightY)+"]"),U.artBox!==null&&ae("/ArtBox ["+M(U.artBox.bottomLeftX)+" "+M(U.artBox.bottomLeftY)+" "+M(U.artBox.topRightX)+" "+M(U.artBox.topRightY)+"]"),typeof U.userUnit=="number"&&U.userUnit!==1&&ae("/UserUnit "+U.userUnit),ze.publish("putPage",{objId:Be,pageContext:Bt[ue],pageNumber:ue,page:Ce}),ae("/Contents "+Ze+" 0 R"),ae(">>"),ae("endobj");var yt=Ce.join(`
`);return R===k&&(yt+=`
Q`),Tt(Ze,!0),gr({data:yt,filters:ls(),objectId:Ze}),ae("endobj"),Be},Ps=g.__private__.putPages=function(){var U,ue,Ce=[];for(U=1;U<=It;U++)Bt[U].objId=it(),Bt[U].contentsObjId=it();for(U=1;U<=It;U++)Ce.push(Ra({number:U,data:pe[U],objId:Bt[U].objId,contentsObjId:Bt[U].contentsObjId,mediaBox:Bt[U].mediaBox,cropBox:Bt[U].cropBox,bleedBox:Bt[U].bleedBox,trimBox:Bt[U].trimBox,artBox:Bt[U].artBox,userUnit:Bt[U].userUnit,rootDictionaryObjId:aa,resourceDictionaryObjId:Ar}));Tt(aa,!0),ae("<</Type /Pages");var Be="/Kids [";for(ue=0;ue<It;ue++)Be+=Ce[ue]+" 0 R ";ae(Be+"]"),ae("/Count "+It),ae(">>"),ae("endobj"),ze.publish("postPutPages")},Xn=function(U){ze.publish("putFont",{font:U,out:ae,newObject:zt,putStream:gr}),U.isAlreadyPutted!==!0&&(U.objectNumber=zt(),ae("<<"),ae("/Type /Font"),ae("/BaseFont /"+xh(U.postScriptName)),ae("/Subtype /Type1"),typeof U.encoding=="string"&&ae("/Encoding /"+U.encoding),ae("/FirstChar 32"),ae("/LastChar 255"),ae(">>"),ae("endobj"))},Us=function(U){U.objectNumber=zt();var ue=[];ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Form"}),ue.push({key:"BBox",value:"["+[M(U.x),M(U.y),M(U.x+U.width),M(U.y+U.height)].join(" ")+"]"}),ue.push({key:"Matrix",value:"["+U.matrix.toString()+"]"});var Ce=U.pages[1].join(`
`);gr({data:Ce,additionalKeyValues:ue,objectId:U.objectNumber}),ae("endobj")},Ds=function(U,ue){ue||(ue=21);var Ce=zt(),Be=function(_t,Kt){var ra,pa=[],Sa=1/(Kt-1);for(ra=0;ra<1;ra+=Sa)pa.push(ra);if(pa.push(1),_t[0].offset!=0){var Ga={offset:0,color:_t[0].color};_t.unshift(Ga)}if(_t[_t.length-1].offset!=1){var Mr={offset:1,color:_t[_t.length-1].color};_t.push(Mr)}for(var cs="",ir=0,ds=0;ds<pa.length;ds++){for(ra=pa[ds];ra>_t[ir+1].offset;)ir++;var us=_t[ir].offset,Hs=(ra-us)/(_t[ir+1].offset-us),to=_t[ir].color,Ro=_t[ir+1].color;cs+=Z(Math.round((1-Hs)*to[0]+Hs*Ro[0]).toString(16))+Z(Math.round((1-Hs)*to[1]+Hs*Ro[1]).toString(16))+Z(Math.round((1-Hs)*to[2]+Hs*Ro[2]).toString(16))}return cs.trim()}(U.colors,ue),Ze=[];Ze.push({key:"FunctionType",value:"0"}),Ze.push({key:"Domain",value:"[0.0 1.0]"}),Ze.push({key:"Size",value:"["+ue+"]"}),Ze.push({key:"BitsPerSample",value:"8"}),Ze.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ze.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gr({data:Be,additionalKeyValues:Ze,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ce}),ae("endobj"),U.objectNumber=zt(),ae("<< /ShadingType "+U.type),ae("/ColorSpace /DeviceRGB");var yt="/Coords ["+M(parseFloat(U.coords[0]))+" "+M(parseFloat(U.coords[1]))+" ";U.type===2?yt+=M(parseFloat(U.coords[2]))+" "+M(parseFloat(U.coords[3])):yt+=M(parseFloat(U.coords[2]))+" "+M(parseFloat(U.coords[3]))+" "+M(parseFloat(U.coords[4]))+" "+M(parseFloat(U.coords[5])),ae(yt+="]"),U.matrix&&ae("/Matrix ["+U.matrix.toString()+"]"),ae("/Function "+Ce+" 0 R"),ae("/Extend [true true]"),ae(">>"),ae("endobj")},Jn=function(U,ue){var Ce=it(),Be=zt();ue.push({resourcesOid:Ce,objectOid:Be}),U.objectNumber=Be;var Ze=[];Ze.push({key:"Type",value:"/Pattern"}),Ze.push({key:"PatternType",value:"1"}),Ze.push({key:"PaintType",value:"1"}),Ze.push({key:"TilingType",value:"1"}),Ze.push({key:"BBox",value:"["+U.boundingBox.map(M).join(" ")+"]"}),Ze.push({key:"XStep",value:M(U.xStep)}),Ze.push({key:"YStep",value:M(U.yStep)}),Ze.push({key:"Resources",value:Ce+" 0 R"}),U.matrix&&Ze.push({key:"Matrix",value:"["+U.matrix.toString()+"]"}),gr({data:U.stream,additionalKeyValues:Ze,objectId:U.objectNumber}),ae("endobj")},Xl=function(U){for(var ue in U.objectNumber=zt(),ae("<<"),U)switch(ue){case"opacity":ae("/ca "+D(U[ue]));break;case"stroke-opacity":ae("/CA "+D(U[ue]))}ae(">>"),ae("endobj")},Pn=function(U){Tt(U.resourcesOid,!0),ae("<<"),ae("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var ue in ae("/Font <<"),Te)Te.hasOwnProperty(ue)&&(p===!1||p===!0&&y.hasOwnProperty(ue))&&ae("/"+ue+" "+Te[ue].objectNumber+" 0 R");ae(">>")}(),function(){if(Object.keys(Xe).length>0){for(var ue in ae("/Shading <<"),Xe)Xe.hasOwnProperty(ue)&&Xe[ue]instanceof Ku&&Xe[ue].objectNumber>=0&&ae("/"+ue+" "+Xe[ue].objectNumber+" 0 R");ze.publish("putShadingPatternDict"),ae(">>")}}(),function(ue){if(Object.keys(Xe).length>0){for(var Ce in ae("/Pattern <<"),Xe)Xe.hasOwnProperty(Ce)&&Xe[Ce]instanceof g.TilingPattern&&Xe[Ce].objectNumber>=0&&Xe[Ce].objectNumber<ue&&ae("/"+Ce+" "+Xe[Ce].objectNumber+" 0 R");ze.publish("putTilingPatternDict"),ae(">>")}}(U.objectOid),function(){if(Object.keys(Ge).length>0){var ue;for(ue in ae("/ExtGState <<"),Ge)Ge.hasOwnProperty(ue)&&Ge[ue].objectNumber>=0&&ae("/"+ue+" "+Ge[ue].objectNumber+" 0 R");ze.publish("putGStateDict"),ae(">>")}}(),function(){for(var ue in ae("/XObject <<"),oa)oa.hasOwnProperty(ue)&&oa[ue].objectNumber>=0&&ae("/"+ue+" "+oa[ue].objectNumber+" 0 R");ze.publish("putXobjectDict"),ae(">>")}(),ae(">>"),ae("endobj")},Jl=function(U){Ve[U.fontName]=Ve[U.fontName]||{},Ve[U.fontName][U.fontStyle]=U.id},Dn=function(U,ue,Ce,Be,Ze){var yt={id:"F"+(Object.keys(Te).length+1).toString(10),postScriptName:U,fontName:ue,fontStyle:Ce,encoding:Be,isStandardFont:Ze||!1,metadata:{}};return ze.publish("addFont",{font:yt,instance:this}),Te[yt.id]=yt,Jl(yt),yt.id},Os=g.__private__.pdfEscape=g.pdfEscape=function(U,ue){return function(Ce,Be){var Ze,yt,_t,Kt,ra,pa,Sa,Ga,Mr;if(_t=(Be=Be||{}).sourceEncoding||"Unicode",ra=Be.outputEncoding,(Be.autoencode||ra)&&Te[xt].metadata&&Te[xt].metadata[_t]&&Te[xt].metadata[_t].encoding&&(Kt=Te[xt].metadata[_t].encoding,!ra&&Te[xt].encoding&&(ra=Te[xt].encoding),!ra&&Kt.codePages&&(ra=Kt.codePages[0]),typeof ra=="string"&&(ra=Kt[ra]),ra)){for(Sa=!1,pa=[],Ze=0,yt=Ce.length;Ze<yt;Ze++)(Ga=ra[Ce.charCodeAt(Ze)])?pa.push(String.fromCharCode(Ga)):pa.push(Ce[Ze]),pa[Ze].charCodeAt(0)>>8&&(Sa=!0);Ce=pa.join("")}for(Ze=Ce.length;Sa===void 0&&Ze!==0;)Ce.charCodeAt(Ze-1)>>8&&(Sa=!0),Ze--;if(!Sa)return Ce;for(pa=Be.noBOM?[]:[254,255],Ze=0,yt=Ce.length;Ze<yt;Ze++){if((Mr=(Ga=Ce.charCodeAt(Ze))>>8)>>8)throw new Error("Character at position "+Ze+" of string '"+Ce+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");pa.push(Mr),pa.push(Ga-(Mr<<8))}return String.fromCharCode.apply(void 0,pa)}(U,ue).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},os=g.__private__.beginPage=function(U){pe[++It]=[],Bt[It]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(U[0]),topRightY:Number(U[1])}},Ws(It),Ae(pe[G])},tn=function(U,ue){var Ce,Be,Ze;switch(r=ue||r,typeof U=="string"&&(Ce=j(U.toLowerCase()),Array.isArray(Ce)&&(Be=Ce[0],Ze=Ce[1])),Array.isArray(U)&&(Be=U[0]*we,Ze=U[1]*we),isNaN(Be)&&(Be=n[0],Ze=n[1]),(Be>14400||Ze>14400)&&(_r.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Be=Math.min(14400,Be),Ze=Math.min(14400,Ze)),n=[Be,Ze],r.substr(0,1)){case"l":Ze>Be&&(n=[Ze,Be]);break;case"p":Be>Ze&&(n=[Ze,Be])}os(n),Oo(bi),ae(qi),ai!==0&&ae(ai+" J"),hl!==0&&ae(hl+" j"),ze.publish("addPage",{pageNumber:It})},pi=function(U){U>0&&U<=It&&(pe.splice(U,1),Bt.splice(U,1),It--,G>It&&(G=It),this.setPage(G))},Ws=function(U){U>0&&U<=It&&(G=U)},$i=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return pe.length-1},Zn=function(U,ue,Ce){var Be,Ze=void 0;return Ce=Ce||{},U=U!==void 0?U:Te[xt].fontName,ue=ue!==void 0?ue:Te[xt].fontStyle,Be=U.toLowerCase(),Ve[Be]!==void 0&&Ve[Be][ue]!==void 0?Ze=Ve[Be][ue]:Ve[U]!==void 0&&Ve[U][ue]!==void 0?Ze=Ve[U][ue]:Ce.disableWarning===!1&&_r.warn("Unable to look up font label for font '"+U+"', '"+ue+"'. Refer to getFontList() for available fonts."),Ze||Ce.noFallback||(Ze=Ve.times[ue])==null&&(Ze=Ve.times.normal),Ze},cl=g.__private__.putInfo=function(){var U=zt(),ue=function(Be){return Be};for(var Ce in h!==null&&(ue=$t.encryptor(U,0)),ae("<<"),ae("/Producer ("+Os(ue("jsPDF "+ia.version))+")"),jt)jt.hasOwnProperty(Ce)&&jt[Ce]&&ae("/"+Ce.substr(0,1).toUpperCase()+Ce.substr(1)+" ("+Os(ue(jt[Ce]))+")");ae("/CreationDate ("+Os(ue(V))+")"),ae(">>"),ae("endobj")},Bi=g.__private__.putCatalog=function(U){var ue=(U=U||{}).rootDictionaryObjId||aa;switch(zt(),ae("<<"),ae("/Type /Catalog"),ae("/Pages "+ue+" 0 R"),Ee||(Ee="fullwidth"),Ee){case"fullwidth":ae("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ae("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ae("/OpenAction [3 0 R /Fit]");break;case"original":ae("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ce=""+Ee;Ce.substr(Ce.length-1)==="%"&&(Ee=parseInt(Ee)/100),typeof Ee=="number"&&ae("/OpenAction [3 0 R /XYZ null null "+D(Ee)+"]")}switch($e||($e="continuous"),$e){case"continuous":ae("/PageLayout /OneColumn");break;case"single":ae("/PageLayout /SinglePage");break;case"two":case"twoleft":ae("/PageLayout /TwoColumnLeft");break;case"tworight":ae("/PageLayout /TwoColumnRight")}Le&&ae("/PageMode /"+Le),ze.publish("putCatalog"),ae(">>"),ae("endobj")},$a=g.__private__.putTrailer=function(){ae("trailer"),ae("<<"),ae("/Size "+(Q+1)),ae("/Root "+Q+" 0 R"),ae("/Info "+(Q-1)+" 0 R"),h!==null&&ae("/Encrypt "+$t.oid+" 0 R"),ae("/ID [ <"+Y+"> <"+Y+"> ]"),ae(">>")},gi=g.__private__.putHeader=function(){ae("%PDF-"+v),ae("%")},On=g.__private__.putXRef=function(){var U="0000000000";ae("xref"),ae("0 "+(Q+1)),ae("0000000000 65535 f ");for(var ue=1;ue<=Q;ue++)typeof fe[ue]=="function"?ae((U+fe[ue]()).slice(-10)+" 00000 n "):fe[ue]!==void 0?ae((U+fe[ue]).slice(-10)+" 00000 n "):ae("0000000000 00000 n ")},Lr=g.__private__.buildDocument=function(){var U;Q=0,ne=0,he=[],fe=[],me=[],aa=it(),Ar=it(),Ae(he),ze.publish("buildDocument"),gi(),Ps(),function(){ze.publish("putAdditionalObjects");for(var Ce=0;Ce<me.length;Ce++){var Be=me[Ce];Tt(Be.objId,!0),ae(Be.content),ae("endobj")}ze.publish("postPutAdditionalObjects")}(),U=[],function(){for(var Ce in Te)Te.hasOwnProperty(Ce)&&(p===!1||p===!0&&y.hasOwnProperty(Ce))&&Xn(Te[Ce])}(),function(){var Ce;for(Ce in Ge)Ge.hasOwnProperty(Ce)&&Xl(Ge[Ce])}(),function(){for(var Ce in oa)oa.hasOwnProperty(Ce)&&Us(oa[Ce])}(),function(Ce){var Be;for(Be in Xe)Xe.hasOwnProperty(Be)&&(Xe[Be]instanceof Ku?Ds(Xe[Be]):Xe[Be]instanceof yh&&Jn(Xe[Be],Ce))}(U),ze.publish("putResources"),U.forEach(Pn),Pn({resourcesOid:Ar,objectOid:Number.MAX_SAFE_INTEGER}),ze.publish("postPutResources"),h!==null&&($t.oid=zt(),ae("<<"),ae("/Filter /Standard"),ae("/V "+$t.v),ae("/R "+$t.r),ae("/U <"+$t.toHexString($t.U)+">"),ae("/O <"+$t.toHexString($t.O)+">"),ae("/P "+$t.P),ae(">>"),ae("endobj")),cl(),Bi();var ue=ne;return On(),$a(),ae("startxref"),ae(""+ue),ae("%%EOF"),Ae(pe[G]),he.join(`
`)},Ln=g.__private__.getBlob=function(U){return new Blob([ce(U)],{type:"application/pdf"})},Ls=g.output=g.__private__.output=(na=function(U,ue){switch(typeof(ue=ue||{})=="string"?ue={filename:ue}:ue.filename=ue.filename||"generated.pdf",U){case void 0:return Lr();case"save":g.save(ue.filename);break;case"arraybuffer":return ce(Lr());case"blob":return Ln(Lr());case"bloburi":case"bloburl":if(ja.URL!==void 0&&typeof ja.URL.createObjectURL=="function")return ja.URL&&ja.URL.createObjectURL(Ln(Lr()))||void 0;_r.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ce="",Be=Lr();try{Ce=h7(Be)}catch{Ce=h7(unescape(encodeURIComponent(Be)))}return"data:application/pdf;filename="+ue.filename+";base64,"+Ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ja)==="[object Window]"){var Ze="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",yt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ue.pdfObjectUrl&&(Ze=ue.pdfObjectUrl,yt="");var _t='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ze+'"'+yt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ue)+");<\/script></body></html>",Kt=ja.open();return Kt!==null&&Kt.document.write(_t),Kt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ja)==="[object Window]"){var ra='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ue.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ue.filename+'" width="500px" height="400px" /></body></html>',pa=ja.open();if(pa!==null){pa.document.write(ra);var Sa=this;pa.document.documentElement.querySelector("#pdfViewer").onload=function(){pa.document.title=ue.filename,pa.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Sa.output("bloburl"))}}return pa}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ja)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ga='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ue)+'"></iframe></body></html>',Mr=ja.open();if(Mr!==null&&(Mr.document.write(Ga),Mr.document.title=ue.filename),Mr||typeof safari>"u")return Mr;break;case"datauri":case"dataurl":return ja.document.location.href=this.output("datauristring",ue);default:return null}},na.foo=function(){try{return na.apply(this,arguments)}catch(Ce){var U=Ce.stack||"";~U.indexOf(" at ")&&(U=U.split(" at ")[1]);var ue="Error in function "+U.split(`
`)[0].split("<")[0]+": "+Ce.message;if(!ja.console)throw new Error(ue);ja.console.error(ue,Ce),ja.alert&&alert(ue)}},na.foo.bar=na,na.foo),Ot=function(U){return Array.isArray(Mt)===!0&&Mt.indexOf(U)>-1};switch(s){case"pt":we=1;break;case"mm":we=72/25.4;break;case"cm":we=72/2.54;break;case"in":we=72;break;case"px":we=Ot("px_scaling")==1?.75:96/72;break;case"pc":case"em":we=12;break;case"ex":we=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);we=s}var $t=null;oe(),W();var ft=g.__private__.getPageInfo=g.getPageInfo=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Bt[U].objId,pageNumber:U,pageContext:Bt[U]}},Ca=g.__private__.getPageInfoByObjId=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ue in Bt)if(Bt[ue].objId===U)break;return ft(ue)},dl=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:Bt[G].objId,pageNumber:G,pageContext:Bt[G]}};g.addPage=function(){return tn.apply(this,arguments),this},g.setPage=function(){return Ws.apply(this,arguments),Ae.call(this,pe[G]),this},g.insertPage=function(U){return this.addPage(),this.movePage(G,U),this},g.movePage=function(U,ue){var Ce,Be;if(U>ue){Ce=pe[U],Be=Bt[U];for(var Ze=U;Ze>ue;Ze--)pe[Ze]=pe[Ze-1],Bt[Ze]=Bt[Ze-1];pe[ue]=Ce,Bt[ue]=Be,this.setPage(ue)}else if(U<ue){Ce=pe[U],Be=Bt[U];for(var yt=U;yt<ue;yt++)pe[yt]=pe[yt+1],Bt[yt]=Bt[yt+1];pe[ue]=Ce,Bt[ue]=Be,this.setPage(ue)}return this},g.deletePage=function(){return pi.apply(this,arguments),this},g.__private__.text=g.text=function(U,ue,Ce,Be,Ze){var yt,_t,Kt,ra,pa,Sa,Ga,Mr,cs,ir=(Be=Be||{}).scope||this;if(typeof U=="number"&&typeof ue=="number"&&(typeof Ce=="string"||Array.isArray(Ce))){var ds=Ce;Ce=ue,ue=U,U=ds}if(arguments[3]instanceof Yt==0?(Kt=arguments[4],ra=arguments[5],fr(Ga=arguments[3])==="object"&&Ga!==null||(typeof Kt=="string"&&(ra=Kt,Kt=null),typeof Ga=="string"&&(ra=Ga,Ga=null),typeof Ga=="number"&&(Kt=Ga,Ga=null),Be={flags:Ga,angle:Kt,align:ra})):(_("The transform parameter of text() with a Matrix value"),cs=Ze),isNaN(ue)||isNaN(Ce)||U==null)throw new Error("Invalid arguments passed to jsPDF.text");if(U.length===0)return ir;var us,Hs="",to=typeof Be.lineHeightFactor=="number"?Be.lineHeightFactor:Mn,Ro=ir.internal.scaleFactor;function ix(tr){return tr=tr.split("	").join(Array(Be.TabLen||9).join(" ")),Os(tr,Ga)}function Pm(tr){for(var lr,Nr=tr.concat(),Rr=[],Sl=Nr.length;Sl--;)typeof(lr=Nr.shift())=="string"?Rr.push(lr):Array.isArray(tr)&&(lr.length===1||lr[1]===void 0&&lr[2]===void 0)?Rr.push(lr[0]):Rr.push([lr[0],lr[1],lr[2]]);return Rr}function yc(tr,lr){var Nr;if(typeof tr=="string")Nr=lr(tr)[0];else if(Array.isArray(tr)){for(var Rr,Sl,Si=tr.concat(),bn=[],vc=Si.length;vc--;)typeof(Rr=Si.shift())=="string"?bn.push(lr(Rr)[0]):Array.isArray(Rr)&&typeof Rr[0]=="string"&&(Sl=lr(Rr[0],Rr[1],Rr[2]),bn.push([Sl[0],Sl[1],Sl[2]]));Nr=bn}return Nr}var Ui=!1,Nu=!0;if(typeof U=="string")Ui=!0;else if(Array.isArray(U)){var Io=U.concat();_t=[];for(var ji,Ms=Io.length;Ms--;)(typeof(ji=Io.shift())!="string"||Array.isArray(ji)&&typeof ji[0]!="string")&&(Nu=!1);Ui=Nu}if(Ui===!1)throw new Error('Type of text must be string or Array. "'+U+'" is not recognized.');typeof U=="string"&&(U=U.match(/[\r?\n]/)?U.split(/\r\n|\r|\n/g):[U]);var pl=ye/ir.internal.scaleFactor,gl=pl*(to-1);switch(Be.baseline){case"bottom":Ce-=gl;break;case"top":Ce+=pl-gl;break;case"hanging":Ce+=pl-2*gl;break;case"middle":Ce+=pl/2-gl}if((Sa=Be.maxWidth||0)>0&&(typeof U=="string"?U=ir.splitTextToSize(U,Sa):Object.prototype.toString.call(U)==="[object Array]"&&(U=U.reduce(function(tr,lr){return tr.concat(ir.splitTextToSize(lr,Sa))},[]))),yt={text:U,x:ue,y:Ce,options:Be,mutex:{pdfEscape:Os,activeFontKey:xt,fonts:Te,activeFontSize:ye}},ze.publish("preProcessText",yt),U=yt.text,Kt=(Be=yt.options).angle,cs instanceof Yt==0&&Kt&&typeof Kt=="number"){Kt*=Math.PI/180,Be.rotationDirection===0&&(Kt=-Kt),R===k&&(Kt=-Kt);var bc=Math.cos(Kt),md=Math.sin(Kt);cs=new Yt(bc,md,-md,bc,0,0)}else Kt&&Kt instanceof Yt&&(cs=Kt);R!==k||cs||(cs=Ye),(pa=Be.charSpace||wa)!==void 0&&(Hs+=M(L(pa))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Mr=Be.horizontalScale)!==void 0&&(Hs+=M(100*Mr)+` Tz
`),Be.lang;var an=-1,ao=Be.renderingMode!==void 0?Be.renderingMode:Be.stroke,hd=ir.internal.getCurrentPageInfo().pageContext;switch(ao){case 0:case!1:case"fill":an=0;break;case 1:case!0:case"stroke":an=1;break;case 2:case"fillThenStroke":an=2;break;case 3:case"invisible":an=3;break;case 4:case"fillAndAddForClipping":an=4;break;case 5:case"strokeAndAddPathForClipping":an=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":an=6;break;case 7:case"addToPathForClipping":an=7}var Dm=hd.usedRenderingMode!==void 0?hd.usedRenderingMode:-1;an!==-1?Hs+=an+` Tr
`:Dm!==-1&&(Hs+=`0 Tr
`),an!==-1&&(hd.usedRenderingMode=an),ra=Be.align||"left";var gs,ni=ye*to,xd=ir.internal.pageSize.getWidth(),ro=Te[xt];pa=Be.charSpace||wa,Sa=Be.maxWidth||0,Ga=Object.assign({autoencode:!0,noBOM:!0},Be.flags);var Ni=[],fd=function(tr){return ir.getStringUnitWidth(tr,{font:ro,charSpace:pa,fontSize:ye,doKerning:!1})*ye/Ro};if(Object.prototype.toString.call(U)==="[object Array]"){var Ys;_t=Pm(U),ra!=="left"&&(gs=_t.map(fd));var gn,zo=0;if(ra==="right"){ue-=gs[0],U=[],Ms=_t.length;for(var wi=0;wi<Ms;wi++)wi===0?(gn=ti(ue),Ys=pn(Ce)):(gn=L(zo-gs[wi]),Ys=-ni),U.push([_t[wi],gn,Ys]),zo=gs[wi]}else if(ra==="center"){ue-=gs[0]/2,U=[],Ms=_t.length;for(var yl=0;yl<Ms;yl++)yl===0?(gn=ti(ue),Ys=pn(Ce)):(gn=L((zo-gs[yl])/2),Ys=-ni),U.push([_t[yl],gn,Ys]),zo=gs[yl]}else if(ra==="left"){U=[],Ms=_t.length;for(var pd=0;pd<Ms;pd++)U.push(_t[pd])}else if(ra==="justify"&&ro.encoding==="Identity-H"){U=[],Ms=_t.length,Sa=Sa!==0?Sa:xd;for(var so=0,qr=0;qr<Ms;qr++)if(Ys=qr===0?pn(Ce):-ni,gn=qr===0?ti(ue):so,qr<Ms-1){var lx=L((Sa-gs[qr])/(_t[qr].split(" ").length-1)),bl=_t[qr].split(" ");U.push([bl[0]+" ",gn,Ys]),so=0;for(var vl=1;vl<bl.length;vl++){var gd=(fd(bl[vl-1]+" "+bl[vl])-fd(bl[vl]))*Ro+lx;vl==bl.length-1?U.push([bl[vl],gd,0]):U.push([bl[vl]+" ",gd,0]),so-=gd}}else U.push([_t[qr],gn,Ys]);U.push(["",so,0])}else{if(ra!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(U=[],Ms=_t.length,Sa=Sa!==0?Sa:xd,qr=0;qr<Ms;qr++)Ys=qr===0?pn(Ce):-ni,gn=qr===0?ti(ue):0,qr<Ms-1?Ni.push(M(L((Sa-gs[qr])/(_t[qr].split(" ").length-1)))):Ni.push(0),U.push([_t[qr],gn,Ys])}}(typeof Be.R2L=="boolean"?Be.R2L:Re)===!0&&(U=yc(U,function(tr,lr,Nr){return[tr.split("").reverse().join(""),lr,Nr]})),yt={text:U,x:ue,y:Ce,options:Be,mutex:{pdfEscape:Os,activeFontKey:xt,fonts:Te,activeFontSize:ye}},ze.publish("postProcessText",yt),U=yt.text,us=yt.mutex.isHex||!1;var wu=Te[xt].encoding;wu!=="WinAnsiEncoding"&&wu!=="StandardEncoding"||(U=yc(U,function(tr,lr,Nr){return[ix(tr),lr,Nr]})),_t=Pm(U),U=[];for(var Rs,jl,$o,Bo=Array.isArray(_t[0])?1:0,Nl="",yd=function(tr,lr,Nr){var Rr="";return Nr instanceof Yt?(Nr=typeof Be.angle=="number"?er(Nr,new Yt(1,0,0,1,tr,lr)):er(new Yt(1,0,0,1,tr,lr),Nr),R===k&&(Nr=er(new Yt(1,0,0,-1,0,0),Nr)),Rr=Nr.join(" ")+` Tm
`):Rr=M(tr)+" "+M(lr)+` Td
`,Rr},yn=0;yn<_t.length;yn++){switch(Nl="",Bo){case 1:$o=(us?"<":"(")+_t[yn][0]+(us?">":")"),Rs=parseFloat(_t[yn][1]),jl=parseFloat(_t[yn][2]);break;case 0:$o=(us?"<":"(")+_t[yn]+(us?">":")"),Rs=ti(ue),jl=pn(Ce)}Ni!==void 0&&Ni[yn]!==void 0&&(Nl=Ni[yn]+` Tw
`),yn===0?U.push(Nl+yd(Rs,jl,cs)+$o):Bo===0?U.push(Nl+$o):Bo===1&&U.push(Nl+yd(Rs,jl,cs)+$o)}U=Bo===0?U.join(` Tj
T* `):U.join(` Tj
`),U+=` Tj
`;var wl=`BT
/`;return wl+=xt+" "+ye+` Tf
`,wl+=M(ye*to)+` TL
`,wl+=Pe+`
`,wl+=Hs,wl+=U,ae(wl+="ET"),y[xt]=!0,ir};var ul=g.__private__.clip=g.clip=function(U){return ae(U==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return ul("evenodd")},g.__private__.discardPath=g.discardPath=function(){return ae("n"),this};var xn=g.__private__.isValidStyle=function(U){var ue=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(U)!==-1&&(ue=!0),ue};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(U){return xn(U)&&(m=U),this};var mc=g.__private__.getStyle=g.getStyle=function(U){var ue=m;switch(U){case"D":case"S":ue="S";break;case"F":ue="f";break;case"FD":case"DF":ue="B";break;case"f":case"f*":case"B":case"B*":ue=U}return ue},Qn=g.close=function(){return ae("h"),this};g.stroke=function(){return ae("S"),this},g.fill=function(U){return ml("f",U),this},g.fillEvenOdd=function(U){return ml("f*",U),this},g.fillStroke=function(U){return ml("B",U),this},g.fillStrokeEvenOdd=function(U){return ml("B*",U),this};var ml=function(U,ue){fr(ue)==="object"?Do(ue,U):ae(U)},Fi=function(U){U===null||R===k&&U===void 0||(U=mc(U),ae(U))};function Zl(U,ue,Ce,Be,Ze){var yt=new yh(ue||this.boundingBox,Ce||this.xStep,Be||this.yStep,this.gState,Ze||this.matrix);yt.stream=this.stream;var _t=U+"$$"+this.cloneIndex+++"$$";return Et(_t,yt),yt}var Do=function(U,ue){var Ce=We[U.key],Be=Xe[Ce];if(Be instanceof Ku)ae("q"),ae(vu(ue)),Be.gState&&g.setGState(Be.gState),ae(U.matrix.toString()+" cm"),ae("/"+Ce+" sh"),ae("Q");else if(Be instanceof yh){var Ze=new Yt(1,0,0,-1,0,si());U.matrix&&(Ze=Ze.multiply(U.matrix||Ye),Ce=Zl.call(Be,U.key,U.boundingBox,U.xStep,U.yStep,Ze).id),ae("q"),ae("/Pattern cs"),ae("/"+Ce+" scn"),Be.gState&&g.setGState(Be.gState),ae(ue),ae("Q")}},vu=function(U){switch(U){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},hc=g.moveTo=function(U,ue){return ae(M(L(U))+" "+M(H(ue))+" m"),this},fn=g.lineTo=function(U,ue){return ae(M(L(U))+" "+M(H(ue))+" l"),this},yi=g.curveTo=function(U,ue,Ce,Be,Ze,yt){return ae([M(L(U)),M(H(ue)),M(L(Ce)),M(H(Be)),M(L(Ze)),M(H(yt)),"c"].join(" ")),this};g.__private__.line=g.line=function(U,ue,Ce,Be,Ze){if(isNaN(U)||isNaN(ue)||isNaN(Ce)||isNaN(Be)||!xn(Ze))throw new Error("Invalid arguments passed to jsPDF.line");return R===T?this.lines([[Ce-U,Be-ue]],U,ue,[1,1],Ze||"S"):this.lines([[Ce-U,Be-ue]],U,ue,[1,1]).stroke()},g.__private__.lines=g.lines=function(U,ue,Ce,Be,Ze,yt){var _t,Kt,ra,pa,Sa,Ga,Mr,cs,ir,ds,us,Hs;if(typeof U=="number"&&(Hs=Ce,Ce=ue,ue=U,U=Hs),Be=Be||[1,1],yt=yt||!1,isNaN(ue)||isNaN(Ce)||!Array.isArray(U)||!Array.isArray(Be)||!xn(Ze)||typeof yt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(hc(ue,Ce),_t=Be[0],Kt=Be[1],pa=U.length,ds=ue,us=Ce,ra=0;ra<pa;ra++)(Sa=U[ra]).length===2?(ds=Sa[0]*_t+ds,us=Sa[1]*Kt+us,fn(ds,us)):(Ga=Sa[0]*_t+ds,Mr=Sa[1]*Kt+us,cs=Sa[2]*_t+ds,ir=Sa[3]*Kt+us,ds=Sa[4]*_t+ds,us=Sa[5]*Kt+us,yi(Ga,Mr,cs,ir,ds,us));return yt&&Qn(),Fi(Ze),this},g.path=function(U){for(var ue=0;ue<U.length;ue++){var Ce=U[ue],Be=Ce.c;switch(Ce.op){case"m":hc(Be[0],Be[1]);break;case"l":fn(Be[0],Be[1]);break;case"c":yi.apply(this,Be);break;case"h":Qn()}}return this},g.__private__.rect=g.rect=function(U,ue,Ce,Be,Ze){if(isNaN(U)||isNaN(ue)||isNaN(Ce)||isNaN(Be)||!xn(Ze))throw new Error("Invalid arguments passed to jsPDF.rect");return R===T&&(Be=-Be),ae([M(L(U)),M(H(ue)),M(L(Ce)),M(L(Be)),"re"].join(" ")),Fi(Ze),this},g.__private__.triangle=g.triangle=function(U,ue,Ce,Be,Ze,yt,_t){if(isNaN(U)||isNaN(ue)||isNaN(Ce)||isNaN(Be)||isNaN(Ze)||isNaN(yt)||!xn(_t))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ce-U,Be-ue],[Ze-Ce,yt-Be],[U-Ze,ue-yt]],U,ue,[1,1],_t,!0),this},g.__private__.roundedRect=g.roundedRect=function(U,ue,Ce,Be,Ze,yt,_t){if(isNaN(U)||isNaN(ue)||isNaN(Ce)||isNaN(Be)||isNaN(Ze)||isNaN(yt)||!xn(_t))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Kt=4/3*(Math.SQRT2-1);return Ze=Math.min(Ze,.5*Ce),yt=Math.min(yt,.5*Be),this.lines([[Ce-2*Ze,0],[Ze*Kt,0,Ze,yt-yt*Kt,Ze,yt],[0,Be-2*yt],[0,yt*Kt,-Ze*Kt,yt,-Ze,yt],[2*Ze-Ce,0],[-Ze*Kt,0,-Ze,-yt*Kt,-Ze,-yt],[0,2*yt-Be],[0,-yt*Kt,Ze*Kt,-yt,Ze,-yt]],U+Ze,ue,[1,1],_t,!0),this},g.__private__.ellipse=g.ellipse=function(U,ue,Ce,Be,Ze){if(isNaN(U)||isNaN(ue)||isNaN(Ce)||isNaN(Be)||!xn(Ze))throw new Error("Invalid arguments passed to jsPDF.ellipse");var yt=4/3*(Math.SQRT2-1)*Ce,_t=4/3*(Math.SQRT2-1)*Be;return hc(U+Ce,ue),yi(U+Ce,ue-_t,U+yt,ue-Be,U,ue-Be),yi(U-yt,ue-Be,U-Ce,ue-_t,U-Ce,ue),yi(U-Ce,ue+_t,U-yt,ue+Be,U,ue+Be),yi(U+yt,ue+Be,U+Ce,ue+_t,U+Ce,ue),Fi(Ze),this},g.__private__.circle=g.circle=function(U,ue,Ce,Be){if(isNaN(U)||isNaN(ue)||isNaN(Ce)||!xn(Be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(U,ue,Ce,Ce,Be)},g.setFont=function(U,ue,Ce){return Ce&&(ue=A(ue,Ce)),xt=Zn(U,ue,{disableWarning:!1}),this};var Tr=g.__private__.getFont=g.getFont=function(){return Te[Zn.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var U,ue,Ce={};for(U in Ve)if(Ve.hasOwnProperty(U))for(ue in Ce[U]=[],Ve[U])Ve[U].hasOwnProperty(ue)&&Ce[U].push(ue);return Ce},g.addFont=function(U,ue,Ce,Be,Ze){var yt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&yt.indexOf(arguments[3])!==-1?Ze=arguments[3]:arguments[3]&&yt.indexOf(arguments[3])==-1&&(Ce=A(Ce,Be)),Dn.call(this,U,ue,Ce,Ze=Ze||"Identity-H")};var Mn,bi=t.lineWidth||.200025,ma=g.__private__.getLineWidth=g.getLineWidth=function(){return bi},Oo=g.__private__.setLineWidth=g.setLineWidth=function(U){return bi=U,ae(M(L(U))+" w"),this};g.__private__.setLineDash=ia.API.setLineDash=ia.API.setLineDashPattern=function(U,ue){if(U=U||[],ue=ue||0,isNaN(ue)||!Array.isArray(U))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return U=U.map(function(Ce){return M(L(Ce))}).join(" "),ue=M(L(ue)),ae("["+U+"] "+ue+" d"),this};var xc=g.__private__.getLineHeight=g.getLineHeight=function(){return ye*Mn};g.__private__.getLineHeight=g.getLineHeight=function(){return ye*Mn};var Ql=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(U){return typeof(U=U||1.15)=="number"&&(Mn=U),this},ei=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Mn};Ql(t.lineHeight);var ti=g.__private__.getHorizontalCoordinate=function(U){return L(U)},pn=g.__private__.getVerticalCoordinate=function(U){return R===k?U:Bt[G].mediaBox.topRightY-Bt[G].mediaBox.bottomLeftY-L(U)},vi=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(U){return M(ti(U))},fc=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(U){return M(pn(U))},qi=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return dr(qi)},g.__private__.setStrokeColor=g.setDrawColor=function(U,ue,Ce,Be){return qi=Er({ch1:U,ch2:ue,ch3:Ce,ch4:Be,pdfColorType:"draw",precision:2}),ae(qi),this};var Lo=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return dr(Lo)},g.__private__.setFillColor=g.setFillColor=function(U,ue,Ce,Be){return Lo=Er({ch1:U,ch2:ue,ch3:Ce,ch4:Be,pdfColorType:"fill",precision:2}),ae(Lo),this};var Pe=t.textColor||"0 g",Ct=g.__private__.getTextColor=g.getTextColor=function(){return dr(Pe)};g.__private__.setTextColor=g.setTextColor=function(U,ue,Ce,Be){return Pe=Er({ch1:U,ch2:ue,ch3:Ce,ch4:Be,pdfColorType:"text",precision:3}),this};var wa=t.charSpace,Ya=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(wa||0)};g.__private__.setCharSpace=g.setCharSpace=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return wa=U,this};var ai=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(U){var ue=g.CapJoinStyles[U];if(ue===void 0)throw new Error("Line cap style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ai=ue,ae(ue+" J"),this};var hl=0;g.__private__.setLineJoin=g.setLineJoin=function(U){var ue=g.CapJoinStyles[U];if(ue===void 0)throw new Error("Line join style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return hl=ue,ae(ue+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(U){if(U=U||0,isNaN(U))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ae(M(L(U))+" M"),this},g.GState=ry,g.setGState=function(U){(U=typeof U=="string"?Ge[lt[U]]:ri(null,U)).equals(Dt)||(ae("/"+U.id+" gs"),Dt=U)};var ri=function(U,ue){if(!U||!lt[U]){var Ce=!1;for(var Be in Ge)if(Ge.hasOwnProperty(Be)&&Ge[Be].equals(ue)){Ce=!0;break}if(Ce)ue=Ge[Be];else{var Ze="GS"+(Object.keys(Ge).length+1).toString(10);Ge[Ze]=ue,ue.id=Ze}return U&&(lt[U]=ue.id),ze.publish("addGState",ue),ue}};g.addGState=function(U,ue){return ri(U,ue),this},g.saveGraphicsState=function(){return ae("q"),qe.push({key:xt,size:ye,color:Pe}),this},g.restoreGraphicsState=function(){ae("Q");var U=qe.pop();return xt=U.key,ye=U.size,Pe=U.color,Dt=null,this},g.setCurrentTransformationMatrix=function(U){return ae(U.toString()+" cm"),this},g.comment=function(U){return ae("#"+U),this};var pc=function(U,ue){var Ce=U||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ce},set:function(yt){isNaN(yt)||(Ce=parseFloat(yt))}});var Be=ue||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Be},set:function(yt){isNaN(yt)||(Be=parseFloat(yt))}});var Ze="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ze},set:function(yt){Ze=yt.toString()}}),this},gc=function(U,ue,Ce,Be){pc.call(this,U,ue),this.type="rect";var Ze=Ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ze},set:function(_t){isNaN(_t)||(Ze=parseFloat(_t))}});var yt=Be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return yt},set:function(_t){isNaN(_t)||(yt=parseFloat(_t))}}),this},Mo=function(){this.page=It,this.currentPage=G,this.pages=pe.slice(0),this.pagesContext=Bt.slice(0),this.x=Ie,this.y=dt,this.matrix=ut,this.width=ud(G),this.height=si(G),this.outputDestination=ke,this.id="",this.objectNumber=-1};Mo.prototype.restore=function(){It=this.page,G=this.currentPage,Bt=this.pagesContext,pe=this.pages,Ie=this.x,dt=this.y,ut=this.matrix,ju(G,this.width),fl(G,this.height),ke=this.outputDestination};var eo=function(U,ue,Ce,Be,Ze){Ka.push(new Mo),It=G=0,pe=[],Ie=U,dt=ue,ut=Ze,os([Ce,Be])};for(var xl in g.beginFormObject=function(U,ue,Ce,Be,Ze){return eo(U,ue,Ce,Be,Ze),this},g.endFormObject=function(U){return function(ue){if(ca[ue])Ka.pop().restore();else{var Ce=new Mo,Be="Xo"+(Object.keys(oa).length+1).toString(10);Ce.id=Be,ca[ue]=Be,oa[Be]=Ce,ze.publish("addFormObject",Ce),Ka.pop().restore()}}(U),this},g.doFormObject=function(U,ue){var Ce=oa[ca[U]];return ae("q"),ae(ue.toString()+" cm"),ae("/"+Ce.id+" Do"),ae("Q"),this},g.getFormObject=function(U){var ue=oa[ca[U]];return{x:ue.x,y:ue.y,width:ue.width,height:ue.height,matrix:ue.matrix}},g.save=function(U,ue){return U=U||"generated.pdf",(ue=ue||{}).returnPromise=ue.returnPromise||!1,ue.returnPromise===!1?(Vu(Ln(Lr()),U),typeof Vu.unload=="function"&&ja.setTimeout&&setTimeout(Vu.unload,911),this):new Promise(function(Ce,Be){try{var Ze=Vu(Ln(Lr()),U);typeof Vu.unload=="function"&&ja.setTimeout&&setTimeout(Vu.unload,911),Ce(Ze)}catch(yt){Be(yt.message)}})},ia.API)ia.API.hasOwnProperty(xl)&&(xl==="events"&&ia.API.events.length?function(U,ue){var Ce,Be,Ze;for(Ze=ue.length-1;Ze!==-1;Ze--)Ce=ue[Ze][0],Be=ue[Ze][1],U.subscribe.apply(U,[Ce].concat(typeof Be=="function"?[Be]:Be))}(ze,ia.API.events):g[xl]=ia.API[xl]);var ud=g.getPageWidth=function(U){return(Bt[U=U||G].mediaBox.topRightX-Bt[U].mediaBox.bottomLeftX)/we},ju=g.setPageWidth=function(U,ue){Bt[U].mediaBox.topRightX=ue*we+Bt[U].mediaBox.bottomLeftX},si=g.getPageHeight=function(U){return(Bt[U=U||G].mediaBox.topRightY-Bt[U].mediaBox.bottomLeftY)/we},fl=g.setPageHeight=function(U,ue){Bt[U].mediaBox.topRightY=ue*we+Bt[U].mediaBox.bottomLeftY};return g.internal={pdfEscape:Os,getStyle:mc,getFont:Tr,getFontSize:Ke,getCharSpace:Ya,getTextColor:Ct,getLineHeight:xc,getLineHeightFactor:ei,getLineWidth:ma,write:Ne,getHorizontalCoordinate:ti,getVerticalCoordinate:pn,getCoordinateString:vi,getVerticalCoordinateString:fc,collections:{},newObject:zt,newAdditionalObject:qt,newObjectDeferred:it,newObjectDeferredBegin:Tt,getFilters:ls,putStream:gr,events:ze,scaleFactor:we,pageSize:{getWidth:function(){return ud(G)},setWidth:function(U){ju(G,U)},getHeight:function(){return si(G)},setHeight:function(U){fl(G,U)}},encryptionOptions:h,encryption:$t,getEncryptor:function(U){return h!==null?$t.encryptor(U,0):function(ue){return ue}},output:Ls,getNumberOfPages:$i,pages:pe,out:ae,f2:D,f3:C,getPageInfo:ft,getPageInfoByObjId:Ca,getCurrentPageInfo:dl,getPDFVersion:N,Point:pc,Rectangle:gc,Matrix:Yt,hasHotfix:Ot},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return ud(G)},set:function(U){ju(G,U)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return si(G)},set:function(U){fl(G,U)},enumerable:!0,configurable:!0}),(function(U){for(var ue=0,Ce=De.length;ue<Ce;ue++){var Be=Dn.call(this,U[ue][0],U[ue][1],U[ue][2],De[ue][3],!0);p===!1&&(y[Be]=!0);var Ze=U[ue][0].split("-");Jl({id:Be,fontName:Ze[0],fontStyle:Ze[1]||""})}ze.publish("addFonts",{fonts:Te,dictionary:Ve})}).call(g,De),xt="F1",tn(n,r),ze.publish("initialized"),g}hh.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},hh.prototype.toHexString=function(t){return t.split("").map(function(a){return("0"+(255&a.charCodeAt(0)).toString(16)).slice(-2)}).join("")},hh.prototype.hexToBytes=function(t){for(var a=[],r=0;r<t.length;r+=2)a.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return a.join("")},hh.prototype.processOwnerPassword=function(t,a){return NN(jN(a).substr(0,5),t)},hh.prototype.encryptor=function(t,a){var r=jN(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&a,a>>8&255)).substr(0,10);return function(s){return NN(r,s)}},ry.prototype.equals=function(t){var a,r="id,objectNumber,equals";if(!t||fr(t)!==fr(this))return!1;var s=0;for(a in this)if(!(r.indexOf(a)>=0)){if(this.hasOwnProperty(a)&&!t.hasOwnProperty(a)||this[a]!==t[a])return!1;s++}for(a in t)t.hasOwnProperty(a)&&r.indexOf(a)<0&&s--;return s===0},ia.API={events:[]},ia.version="3.0.2";var xs=ia.API,J3=1,Tm=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},uh=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},_a=function(t){return t.toFixed(2)},Hd=function(t){return t.toFixed(5)};xs.__acroform__={};var zi=function(t,a){t.prototype=Object.create(a.prototype),t.prototype.constructor=t},g7=function(t){return t*J3},Zo=function(t){var a=new hL,r=Zt.internal.getHeight(t)||0,s=Zt.internal.getWidth(t)||0;return a.BBox=[0,0,Number(_a(s)),Number(_a(r))],a},Dde=xs.__acroform__.setBit=function(t,a){if(t=t||0,a=a||0,isNaN(t)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<a},Ode=xs.__acroform__.clearBit=function(t,a){if(t=t||0,a=a||0,isNaN(t)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<a)},Lde=xs.__acroform__.getBit=function(t,a){if(isNaN(t)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<a?1:0},Cs=xs.__acroform__.getBitForPdf=function(t,a){if(isNaN(t)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Lde(t,a-1)},ks=xs.__acroform__.setBitForPdf=function(t,a){if(isNaN(t)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Dde(t,a-1)},As=xs.__acroform__.clearBitForPdf=function(t,a){if(isNaN(t)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Ode(t,a-1)},Mde=xs.__acroform__.calculateCoordinates=function(t,a){var r=a.internal.getHorizontalCoordinate,s=a.internal.getVerticalCoordinate,n=t[0],i=t[1],o=t[2],c=t[3],u={};return u.lowerLeft_X=r(n)||0,u.lowerLeft_Y=s(i+c)||0,u.upperRight_X=r(n+o)||0,u.upperRight_Y=s(i)||0,[Number(_a(u.lowerLeft_X)),Number(_a(u.lowerLeft_Y)),Number(_a(u.upperRight_X)),Number(_a(u.upperRight_Y))]},Rde=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var a=[],r=t._V||t.DV,s=wN(t,r),n=t.scope.internal.getFont(t.fontName,t.fontStyle).id;a.push("/Tx BMC"),a.push("q"),a.push("BT"),a.push(t.scope.__private__.encodeColorString(t.color)),a.push("/"+n+" "+_a(s.fontSize)+" Tf"),a.push("1 0 0 1 0 0 Tm"),a.push(s.text),a.push("ET"),a.push("Q"),a.push("EMC");var i=Zo(t);return i.scope=t.scope,i.stream=a.join(`
`),i}},wN=function(t,a){var r=t.fontSize===0?t.maxFontSize:t.fontSize,s={text:"",fontSize:""},n=(a=(a=a.substr(0,1)=="("?a.substr(1):a).substr(a.length-1)==")"?a.substr(0,a.length-1):a).split(" ");n=t.multiline?n.map(function(D){return D.split(`
`)}):n.map(function(D){return[D]});var i=r,o=Zt.internal.getHeight(t)||0;o=o<0?-o:o;var c=Zt.internal.getWidth(t)||0;c=c<0?-c:c;var u=function(D,C,L){if(D+1<n.length){var H=C+" "+n[D+1][0];return q0(H,t,L).width<=c-4}return!1};i++;e:for(;i>0;){a="",i--;var m,h,p=q0("3",t,i).height,y=t.multiline?o-i:(o-p)/2,g=y+=2,v=0,N=0,w=0;if(i<=0){a=`(...) Tj
`,a+="% Width of Text: "+q0(a,t,i=12).width+", FieldWidth:"+c+`
`;break}for(var j="",T=0,k=0;k<n.length;k++)if(n.hasOwnProperty(k)){var R=!1;if(n[k].length!==1&&w!==n[k].length-1){if((p+2)*(T+2)+2>o)continue e;j+=n[k][w],R=!0,N=k,k--}else{j=(j+=n[k][w]+" ").substr(j.length-1)==" "?j.substr(0,j.length-1):j;var P=parseInt(k),$=u(P,j,i),A=k>=n.length-1;if($&&!A){j+=" ",w=0;continue}if($||A){if(A)N=P;else if(t.multiline&&(p+2)*(T+2)+2>o)continue e}else{if(!t.multiline||(p+2)*(T+2)+2>o)continue e;N=P}}for(var M="",_=v;_<=N;_++){var B=n[_];if(t.multiline){if(_===N){M+=B[w]+" ",w=(w+1)%B.length;continue}if(_===v){M+=B[B.length-1]+" ";continue}}M+=B[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,h=q0(M,t,i).width,t.textAlign){case"right":m=c-h-2;break;case"center":m=(c-h)/2;break;default:m=2}a+=_a(m)+" "+_a(g)+` Td
`,a+="("+Tm(M)+`) Tj
`,a+=-_a(m)+` 0 Td
`,g=-(i+2),h=0,v=R?N:N+1,T++,j=""}break}return s.text=a,s.fontSize=i,s},q0=function(t,a,r){var s=a.scope.internal.getFont(a.fontName,a.fontStyle),n=a.scope.getStringUnitWidth(t,{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:a.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:n}},Ide={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},zde=function(t,a){var r={type:"reference",object:t};a.internal.getPageInfo(t.page).pageContext.annotations.find(function(s){return s.type===r.type&&s.object===r.object})===void 0&&a.internal.getPageInfo(t.page).pageContext.annotations.push(r)},$de=function(t,a){if(a.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(To.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Ide)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");J3=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new xL,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in s)if(s.hasOwnProperty(n)){var i=s[n];i.objId=void 0,i.hasAnnotation&&zde(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(s,n){var i=!s;for(var o in s||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(o)){var c=s[o],u=[],m=c.Rect;if(c.Rect&&(c.Rect=Mde(c.Rect,n)),n.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Zt.createDefaultAppearanceStream(c),fr(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(u=c.getKeyValueListForStream()),c.Rect=m,c.hasAppearanceStream&&!c.appearanceStreamContent){var h=Rde(c);u.push({key:"AP",value:"<</N "+h+">>"}),n.internal.acroformPlugin.xForms.push(h)}if(c.appearanceStreamContent){var p="";for(var y in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(y)){var g=c.appearanceStreamContent[y];if(p+="/"+y+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var v=g[o];typeof v=="function"&&(v=v.call(n,c)),p+="/"+o+" "+v+" ",n.internal.acroformPlugin.xForms.indexOf(v)>=0||n.internal.acroformPlugin.xForms.push(v)}}else typeof(v=g)=="function"&&(v=v.call(n,c)),p+="/"+o+" "+v,n.internal.acroformPlugin.xForms.indexOf(v)>=0||n.internal.acroformPlugin.xForms.push(v);p+=">>"}u.push({key:"AP",value:`<<
`+p+">>"})}n.internal.putStream({additionalKeyValues:u,objectId:c.objId}),n.internal.out("endobj")}i&&function(N,w){for(var j in N)if(N.hasOwnProperty(j)){var T=j,k=N[j];w.internal.newObjectDeferredBegin(k.objId,!0),fr(k)==="object"&&typeof k.putStream=="function"&&k.putStream(),delete N[T]}}(n.internal.acroformPlugin.xForms,n)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},mL=xs.__acroform__.arrayToPdfArray=function(t,a,r){var s=function(o){return o};if(Array.isArray(t)){for(var n="[",i=0;i<t.length;i++)switch(i!==0&&(n+=" "),fr(t[i])){case"boolean":case"number":case"object":n+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(a!==void 0&&r&&(s=r.internal.getEncryptor(a)),n+="("+Tm(s(t[i].toString()))+")"):n+=t[i].toString()}return n+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},I2=function(t,a,r){var s=function(n){return n};return a!==void 0&&r&&(s=r.internal.getEncryptor(a)),(t=t||"").toString(),"("+Tm(s(t))+")"},ac=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ac.prototype.toString=function(){return this.objId+" 0 R"},ac.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ac.prototype.getKeyValueListForStream=function(){var t=[],a=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in a)if(Object.getOwnPropertyDescriptor(this,a[r]).configurable===!1){var s=a[r],n=this[s];n&&(Array.isArray(n)?t.push({key:s,value:mL(n,this.objId,this.scope)}):n instanceof ac?(n.scope=this.scope,t.push({key:s,value:n.objId+" 0 R"})):typeof n!="function"&&t.push({key:s,value:n}))}return t};var hL=function(){ac.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,a=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return a},set:function(r){a=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};zi(hL,ac);var xL=function(){ac.call(this);var t,a=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return a.length>0?a:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return a}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(s){return s};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Tm(r(t))+")"}},set:function(r){t=r}})};zi(xL,ac);var To=function t(){ac.call(this);var a=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return a},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');a=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Cs(a,3)},set:function(j){j?this.F=ks(a,3):this.F=As(a,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');r=j}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(j){s=j!==void 0?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(j){s[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(j){s[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(j){s[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(j){s[3]=j}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof sy)return;i="FieldObject"+t.FieldNum++}var j=function(T){return T};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+Tm(j(i))+")"},set:function(j){i=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(j){i=j}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(j){o=j}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(j){c=j}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(j){u=j}});var m=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return m===void 0?50/J3:m},set:function(j){m=j}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(j){h=j}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof sy||this instanceof dm))return I2(p,this.objId,this.scope)},set:function(j){j=j.toString(),p=j}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof dn==0?I2(y,this.objId,this.scope):y},set:function(j){j=j.toString(),y=this instanceof dn==0?j.substr(0,1)==="("?uh(j.substr(1,j.length-2)):uh(j):j}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof dn==1?uh(y.substr(1,y.length-1)):y},set:function(j){j=j.toString(),y=this instanceof dn==1?"/"+j:j}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof dn==0?I2(g,this.objId,this.scope):g},set:function(j){j=j.toString(),g=this instanceof dn==0?j.substr(0,1)==="("?uh(j.substr(1,j.length-2)):uh(j):j}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof dn==1?uh(g.substr(1,g.length-1)):g},set:function(j){j=j.toString(),g=this instanceof dn==1?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(j){j=!!j,N=j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(j){v=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,1)},set:function(j){j?this.Ff=ks(this.Ff,1):this.Ff=As(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,2)},set:function(j){j?this.Ff=ks(this.Ff,2):this.Ff=As(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,3)},set:function(j){j?this.Ff=ks(this.Ff,3):this.Ff=As(this.Ff,3)}});var w=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(w!==null)return w},set:function(j){if([0,1,2].indexOf(j)===-1)throw new Error('Invalid value "'+j+'" for attribute Q supplied.');w=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch(w){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:w=2;break;case"center":case 1:w=1;break;default:w=0}}})};zi(To,ac);var _h=function(){To.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var a=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return mL(a,this.objId,this.scope)},set:function(r){var s,n;n=[],typeof(s=r)=="string"&&(n=function(i,o,c){c||(c=1);for(var u,m=[];u=o.exec(i);)m.push(u[c]);return m}(s,/\((.*?)\)/g)),a=n}}),this.getOptions=function(){return a},this.setOptions=function(r){a=r,this.sort&&a.sort()},this.addOption=function(r){r=(r=r||"").toString(),a.push(r),this.sort&&a.sort()},this.removeOption=function(r,s){for(s=s||!1,r=(r=r||"").toString();a.indexOf(r)!==-1&&(a.splice(a.indexOf(r),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,18)},set:function(r){r?this.Ff=ks(this.Ff,18):this.Ff=As(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ks(this.Ff,19):this.Ff=As(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,20)},set:function(r){r?(this.Ff=ks(this.Ff,20),a.sort()):this.Ff=As(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,22)},set:function(r){r?this.Ff=ks(this.Ff,22):this.Ff=As(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,23)},set:function(r){r?this.Ff=ks(this.Ff,23):this.Ff=As(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,27)},set:function(r){r?this.Ff=ks(this.Ff,27):this.Ff=As(this.Ff,27)}}),this.hasAppearanceStream=!1};zi(_h,To);var Ch=function(){_h.call(this),this.fontName="helvetica",this.combo=!1};zi(Ch,_h);var kh=function(){Ch.call(this),this.combo=!0};zi(kh,Ch);var rg=function(){kh.call(this),this.edit=!0};zi(rg,kh);var dn=function(){To.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,15)},set:function(r){r?this.Ff=ks(this.Ff,15):this.Ff=As(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,16)},set:function(r){r?this.Ff=ks(this.Ff,16):this.Ff=As(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,17)},set:function(r){r?this.Ff=ks(this.Ff,17):this.Ff=As(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,26)},set:function(r){r?this.Ff=ks(this.Ff,26):this.Ff=As(this.Ff,26)}});var t,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(a).length!==0){var s,n=[];for(s in n.push("<<"),a)n.push("/"+s+" ("+Tm(r(a[s]))+")");return n.push(">>"),n.join(`
`)}},set:function(r){fr(r)==="object"&&(a=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(r){typeof r=="string"&&(a.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};zi(dn,To);var sg=function(){dn.call(this),this.pushButton=!0};zi(sg,dn);var Ah=function(){dn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(a){t=a!==void 0?a:[]}})};zi(Ah,dn);var sy=function(){var t,a;To.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return a},set:function(n){a=n}});var r,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(c){return c};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),s)o.push("/"+i+" ("+Tm(n(s[i]))+")");return o.push(">>"),o.join(`
`)},set:function(n){fr(n)==="object"&&(s=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(n){typeof n=="string"&&(s.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(n){r="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Zt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};zi(sy,To),Ah.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var a in this.Kids)if(this.Kids.hasOwnProperty(a)){var r=this.Kids[a];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Ah.prototype.createOption=function(t){var a=new sy;return a.Parent=this,a.optionName=t,this.Kids.push(a),Bde.call(this.scope,a),a};var ng=function(){dn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Zt.CheckBox.createAppearanceStream()};zi(ng,dn);var dm=function(){To.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,13)},set:function(a){a?this.Ff=ks(this.Ff,13):this.Ff=As(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,21)},set:function(a){a?this.Ff=ks(this.Ff,21):this.Ff=As(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,23)},set:function(a){a?this.Ff=ks(this.Ff,23):this.Ff=As(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,24)},set:function(a){a?this.Ff=ks(this.Ff,24):this.Ff=As(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,25)},set:function(a){a?this.Ff=ks(this.Ff,25):this.Ff=As(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,26)},set:function(a){a?this.Ff=ks(this.Ff,26):this.Ff=As(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(a){Number.isInteger(a)&&(t=a)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};zi(dm,To);var ig=function(){dm.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Cs(this.Ff,14)},set:function(t){t?this.Ff=ks(this.Ff,14):this.Ff=As(this.Ff,14)}}),this.password=!0};zi(ig,dm);var Zt={CheckBox:{createAppearanceStream:function(){return{N:{On:Zt.CheckBox.YesNormal},D:{On:Zt.CheckBox.YesPushDown,Off:Zt.CheckBox.OffPushDown}}},YesPushDown:function(t){var a=Zo(t);a.scope=t.scope;var r=[],s=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=wN(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+_a(Zt.internal.getWidth(t))+" "+_a(Zt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+s+" "+_a(i.fontSize)+" Tf "+n),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),a.stream=r.join(`
`),a},YesNormal:function(t){var a=Zo(t);a.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),n=[],i=Zt.internal.getHeight(t),o=Zt.internal.getWidth(t),c=wN(t,t.caption);return n.push("1 g"),n.push("0 0 "+_a(o)+" "+_a(i)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+_a(o-1)+" "+_a(i-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+r+" "+_a(c.fontSize)+" Tf "+s),n.push(c.text),n.push("ET"),n.push("Q"),a.stream=n.join(`
`),a},OffPushDown:function(t){var a=Zo(t);a.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+_a(Zt.internal.getWidth(t))+" "+_a(Zt.internal.getHeight(t))+" re"),r.push("f"),a.stream=r.join(`
`),a}},RadioButton:{Circle:{createAppearanceStream:function(t){var a={D:{Off:Zt.RadioButton.Circle.OffPushDown},N:{}};return a.N[t]=Zt.RadioButton.Circle.YesNormal,a.D[t]=Zt.RadioButton.Circle.YesPushDown,a},getCA:function(){return"l"},YesNormal:function(t){var a=Zo(t);a.scope=t.scope;var r=[],s=Zt.internal.getWidth(t)<=Zt.internal.getHeight(t)?Zt.internal.getWidth(t)/4:Zt.internal.getHeight(t)/4;s=Number((.9*s).toFixed(5));var n=Zt.internal.Bezier_C,i=Number((s*n).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Hd(Zt.internal.getWidth(t)/2)+" "+Hd(Zt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),a.stream=r.join(`
`),a},YesPushDown:function(t){var a=Zo(t);a.scope=t.scope;var r=[],s=Zt.internal.getWidth(t)<=Zt.internal.getHeight(t)?Zt.internal.getWidth(t)/4:Zt.internal.getHeight(t)/4;s=Number((.9*s).toFixed(5));var n=Number((2*s).toFixed(5)),i=Number((n*Zt.internal.Bezier_C).toFixed(5)),o=Number((s*Zt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Hd(Zt.internal.getWidth(t)/2)+" "+Hd(Zt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Hd(Zt.internal.getWidth(t)/2)+" "+Hd(Zt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),r.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),r.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),r.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),r.push("f"),r.push("Q"),a.stream=r.join(`
`),a},OffPushDown:function(t){var a=Zo(t);a.scope=t.scope;var r=[],s=Zt.internal.getWidth(t)<=Zt.internal.getHeight(t)?Zt.internal.getWidth(t)/4:Zt.internal.getHeight(t)/4;s=Number((.9*s).toFixed(5));var n=Number((2*s).toFixed(5)),i=Number((n*Zt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Hd(Zt.internal.getWidth(t)/2)+" "+Hd(Zt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),a.stream=r.join(`
`),a}},Cross:{createAppearanceStream:function(t){var a={D:{Off:Zt.RadioButton.Cross.OffPushDown},N:{}};return a.N[t]=Zt.RadioButton.Cross.YesNormal,a.D[t]=Zt.RadioButton.Cross.YesPushDown,a},getCA:function(){return"8"},YesNormal:function(t){var a=Zo(t);a.scope=t.scope;var r=[],s=Zt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+_a(Zt.internal.getWidth(t)-2)+" "+_a(Zt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(_a(s.x1.x)+" "+_a(s.x1.y)+" m"),r.push(_a(s.x2.x)+" "+_a(s.x2.y)+" l"),r.push(_a(s.x4.x)+" "+_a(s.x4.y)+" m"),r.push(_a(s.x3.x)+" "+_a(s.x3.y)+" l"),r.push("s"),r.push("Q"),a.stream=r.join(`
`),a},YesPushDown:function(t){var a=Zo(t);a.scope=t.scope;var r=Zt.internal.calculateCross(t),s=[];return s.push("0.749023 g"),s.push("0 0 "+_a(Zt.internal.getWidth(t))+" "+_a(Zt.internal.getHeight(t))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+_a(Zt.internal.getWidth(t)-2)+" "+_a(Zt.internal.getHeight(t)-2)+" re"),s.push("W"),s.push("n"),s.push(_a(r.x1.x)+" "+_a(r.x1.y)+" m"),s.push(_a(r.x2.x)+" "+_a(r.x2.y)+" l"),s.push(_a(r.x4.x)+" "+_a(r.x4.y)+" m"),s.push(_a(r.x3.x)+" "+_a(r.x3.y)+" l"),s.push("s"),s.push("Q"),a.stream=s.join(`
`),a},OffPushDown:function(t){var a=Zo(t);a.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+_a(Zt.internal.getWidth(t))+" "+_a(Zt.internal.getHeight(t))+" re"),r.push("f"),a.stream=r.join(`
`),a}}},createDefaultAppearanceStream:function(t){var a=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+a+" "+t.fontSize+" Tf "+r}};Zt.internal={Bezier_C:.551915024494,calculateCross:function(t){var a=Zt.internal.getWidth(t),r=Zt.internal.getHeight(t),s=Math.min(a,r);return{x1:{x:(a-s)/2,y:(r-s)/2+s},x2:{x:(a-s)/2+s,y:(r-s)/2},x3:{x:(a-s)/2,y:(r-s)/2},x4:{x:(a-s)/2+s,y:(r-s)/2+s}}}},Zt.internal.getWidth=function(t){var a=0;return fr(t)==="object"&&(a=g7(t.Rect[2])),a},Zt.internal.getHeight=function(t){var a=0;return fr(t)==="object"&&(a=g7(t.Rect[3])),a};var Bde=xs.addField=function(t){if($de(this,t),!(t instanceof To))throw new Error("Invalid argument passed to jsPDF.addField.");var a;return(a=t).scope.internal.acroformPlugin.printedOut&&(a.scope.internal.acroformPlugin.printedOut=!1,a.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),a.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(a),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};xs.AcroFormChoiceField=_h,xs.AcroFormListBox=Ch,xs.AcroFormComboBox=kh,xs.AcroFormEditBox=rg,xs.AcroFormButton=dn,xs.AcroFormPushButton=sg,xs.AcroFormRadioButton=Ah,xs.AcroFormCheckBox=ng,xs.AcroFormTextField=dm,xs.AcroFormPasswordField=ig,xs.AcroFormAppearance=Zt,xs.AcroForm={ChoiceField:_h,ListBox:Ch,ComboBox:kh,EditBox:rg,Button:dn,PushButton:sg,RadioButton:Ah,CheckBox:ng,TextField:dm,PasswordField:ig,Appearance:Zt},ia.AcroForm={ChoiceField:_h,ListBox:Ch,ComboBox:kh,EditBox:rg,Button:dn,PushButton:sg,RadioButton:Ah,CheckBox:ng,TextField:dm,PasswordField:ig,Appearance:Zt};ia.AcroForm;function fL(t){return t.reduce(function(a,r,s){return a[r]=s,a},{})}(function(t){var a="addImage_";t.__addimage__={};var r="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(D,C){var L,H,V,Y,J,W=r;if((C=C||r)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if($(D))for(J in s)for(V=s[J],L=0;L<V.length;L+=1){for(Y=!0,H=0;H<V[L].length;H+=1)if(V[L][H]!==void 0&&V[L][H]!==D[H]){Y=!1;break}if(Y===!0){W=J;break}}else for(J in s)for(V=s[J],L=0;L<V.length;L+=1){for(Y=!0,H=0;H<V[L].length;H+=1)if(V[L][H]!==void 0&&V[L][H]!==D.charCodeAt(H)){Y=!1;break}if(Y===!0){W=J;break}}return W===r&&C!==r&&(W=C),W},i=function D(C){for(var L=this.internal.write,H=this.internal.putStream,V=(0,this.internal.getFilters)();V.indexOf("FlateEncode")!==-1;)V.splice(V.indexOf("FlateEncode"),1);C.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:C.width}),Y.push({key:"Height",value:C.height}),C.colorSpace===j.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(C.palette.length/3-1)+" "+("sMask"in C&&C.sMask!==void 0?C.objectId+2:C.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+C.colorSpace}),C.colorSpace===j.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:C.bitsPerComponent}),"decodeParameters"in C&&C.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+C.decodeParameters+">>"}),"transparency"in C&&Array.isArray(C.transparency)){for(var J="",W=0,X=C.transparency.length;W<X;W++)J+=C.transparency[W]+" "+C.transparency[W]+" ";Y.push({key:"Mask",value:"["+J+"]"})}C.sMask!==void 0&&Y.push({key:"SMask",value:C.objectId+1+" 0 R"});var te=C.filter!==void 0?["/"+C.filter]:void 0;if(H({data:C.data,additionalKeyValues:Y,alreadyAppliedFilters:te,objectId:C.objectId}),L("endobj"),"sMask"in C&&C.sMask!==void 0){var oe=(C.predictor!=null?"/Predictor "+C.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+C.width,q={width:C.width,height:C.height,colorSpace:"DeviceGray",bitsPerComponent:C.bitsPerComponent,decodeParameters:oe,data:C.sMask};"filter"in C&&(q.filter=C.filter),D.call(this,q)}if(C.colorSpace===j.INDEXED){var G=this.internal.newObject();H({data:M(new Uint8Array(C.palette)),objectId:G}),L("endobj")}},o=function(){var D=this.internal.collections[a+"images"];for(var C in D)i.call(this,D[C])},c=function(){var D,C=this.internal.collections[a+"images"],L=this.internal.write;for(var H in C)L("/I"+(D=C[H]).index,D.objectId,"0","R")},u=function(){this.internal.collections[a+"images"]||(this.internal.collections[a+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",c))},m=function(){var D=this.internal.collections[a+"images"];return u.call(this),D},h=function(){return Object.keys(this.internal.collections[a+"images"]).length},p=function(D){return typeof t["process"+D.toUpperCase()]=="function"},y=function(D){return fr(D)==="object"&&D.nodeType===1},g=function(D,C){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var L=""+D.getAttribute("src");if(L.indexOf("data:image/")===0)return ag(unescape(L).split("base64,").pop());var H=t.loadFile(L,!0);if(H!==void 0)return H}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var V;switch(C){case"PNG":V="image/png";break;case"WEBP":V="image/webp";break;default:V="image/jpeg"}return ag(D.toDataURL(V,1).split("base64,").pop())}},v=function(D){var C=this.internal.collections[a+"images"];if(C){for(var L in C)if(D===C[L].alias)return C[L]}},N=function(D,C,L){return D||C||(D=-96,C=-96),D<0&&(D=-1*L.width*72/D/this.internal.scaleFactor),C<0&&(C=-1*L.height*72/C/this.internal.scaleFactor),D===0&&(D=C*L.width/L.height),C===0&&(C=D*L.height/L.width),[D,C]},w=function(D,C,L,H,V,Y){var J=N.call(this,L,H,V),W=this.internal.getCoordinateString,X=this.internal.getVerticalCoordinateString,te=m.call(this);if(L=J[0],H=J[1],te[V.index]=V,Y){Y*=Math.PI/180;var oe=Math.cos(Y),q=Math.sin(Y),G=function(Z){return Z.toFixed(4)},z=[G(oe),G(q),G(-1*q),G(oe),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,W(D),X(C+H),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([W(L),"0","0",W(H),"0","0","cm"].join(" "))):this.internal.write([W(L),"0","0",W(H),W(D),X(C+H),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+V.index+" Do"),this.internal.write("Q")},j=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var T=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=t.__addimage__.sHashCode=function(D){var C,L,H=0;if(typeof D=="string")for(L=D.length,C=0;C<L;C++)H=(H<<5)-H+D.charCodeAt(C),H|=0;else if($(D))for(L=D.byteLength/2,C=0;C<L;C++)H=(H<<5)-H+D[C],H|=0;return H},R=t.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var C=!0;return D.length===0&&(C=!1),D.length%4!=0&&(C=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(C=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(C=!1),C},P=t.__addimage__.extractImageFromDataUrl=function(D){if(D==null||!(D=D.trim()).startsWith("data:"))return null;var C=D.indexOf(",");return C<0?null:D.substring(0,C).trim().endsWith("base64")?D.substring(C+1):null};t.__addimage__.isArrayBuffer=function(D){return D instanceof ArrayBuffer};var $=t.__addimage__.isArrayBufferView=function(D){return D instanceof Int8Array||D instanceof Uint8Array||D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array},A=t.__addimage__.binaryStringToUint8Array=function(D){for(var C=D.length,L=new Uint8Array(C),H=0;H<C;H++)L[H]=D.charCodeAt(H);return L},M=t.__addimage__.arrayBufferToBinaryString=function(D){for(var C="",L=$(D)?D:new Uint8Array(D),H=0;H<L.length;H+=8192)C+=String.fromCharCode.apply(null,L.subarray(H,H+8192));return C};t.addImage=function(){var D,C,L,H,V,Y,J,W,X;if(typeof arguments[1]=="number"?(C=r,L=arguments[1],H=arguments[2],V=arguments[3],Y=arguments[4],J=arguments[5],W=arguments[6],X=arguments[7]):(C=arguments[1],L=arguments[2],H=arguments[3],V=arguments[4],Y=arguments[5],J=arguments[6],W=arguments[7],X=arguments[8]),fr(D=arguments[0])==="object"&&!y(D)&&"imageData"in D){var te=D;D=te.imageData,C=te.format||C||r,L=te.x||L||0,H=te.y||H||0,V=te.w||te.width||V,Y=te.h||te.height||Y,J=te.alias||J,W=te.compression||W,X=te.rotation||te.angle||X}var oe=this.internal.getFilters();if(W===void 0&&oe.indexOf("FlateEncode")!==-1&&(W="SLOW"),isNaN(L)||isNaN(H))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var q=_.call(this,D,C,J,W);return w.call(this,L,H,V,Y,q,X),this};var _=function(D,C,L,H){var V,Y,J;if(typeof D=="string"&&n(D)===r){D=unescape(D);var W=B(D,!1);(W!==""||(W=t.loadFile(D,!0))!==void 0)&&(D=W)}if(y(D)&&(D=g(D,C)),C=n(D,C),!p(C))throw new Error("addImage does not support files of type '"+C+"', please ensure that a plugin for '"+C+"' support is added.");if(((J=L)==null||J.length===0)&&(L=function(X){return typeof X=="string"||$(X)?k(X):$(X.data)?k(X.data):null}(D)),(V=v.call(this,L))||(D instanceof Uint8Array||C==="RGBA"||(Y=D,D=A(D)),V=this["process"+C.toUpperCase()](D,h.call(this),L,function(X){return X&&typeof X=="string"&&(X=X.toUpperCase()),X in t.image_compression?X:T.NONE}(H),Y)),!V)throw new Error("An unknown error occurred whilst processing the image.");return V},B=t.__addimage__.convertBase64ToBinaryString=function(D,C){C=typeof C!="boolean"||C;var L,H="";if(typeof D=="string"){var V;L=(V=P(D))!==null&&V!==void 0?V:D;try{H=ag(L)}catch(Y){if(C)throw R(L)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return H};t.getImageProperties=function(D){var C,L,H="";if(y(D)&&(D=g(D)),typeof D=="string"&&n(D)===r&&((H=B(D,!1))===""&&(H=t.loadFile(D)||""),D=H),L=n(D),!p(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(D instanceof Uint8Array||(D=A(D)),!(C=this["process"+L.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return C.fileType=L,C}})(ia.API),function(t){var a=function(r){if(r!==void 0&&r!="")return!0};ia.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var s,n,i,o=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(r.objId),m=r.pageContext.annotations,h=!1,p=0;p<m.length&&!h;p++)switch((s=m[p]).type){case"link":(a(s.options.url)||a(s.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var y=0;y<m.length;y++){s=m[y];var g=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),w=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(N.objId),T=s.title||"Note";i="<</Type /Annot /Subtype /Text "+(n="/Rect ["+o(s.bounds.x)+" "+c(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w)+" "+c(s.bounds.y)+"] ")+"/Contents ("+g(j(s.contents))+")",i+=" /Popup "+w.objId+" 0 R",i+=" /P "+u.objId+" 0 R",i+=" /T ("+g(j(T))+") >>",N.content=i;var k=N.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+o(s.bounds.x+30)+" "+c(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w+30)+" "+c(s.bounds.y)+"] ")+" /Parent "+k,s.open&&(i+=" /Open true"),i+=" >>",w.content=i,this.internal.write(N.objId,"0 R",w.objId,"0 R");break;case"freetext":n="/Rect ["+o(s.bounds.x)+" "+c(s.bounds.y)+" "+o(s.bounds.x+s.bounds.w)+" "+c(s.bounds.y+s.bounds.h)+"] ";var R=s.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+g(v(s.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+R+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(s.options.name){var P=this.annotations._nameMap[s.options.name];s.options.pageNumber=P.page,s.options.top=P.y}else s.options.top||(s.options.top=0);if(n="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",i="",s.options.url)i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+g(v(s.options.url))+") >>";else if(s.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,i+=" /FitV "+s.options.left+"]";break;default:var $=c(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),i+=" /XYZ "+s.options.left+" "+$+" "+s.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var s=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":s.pageContext.annotations.push(r)}},t.link=function(r,s,n,i,o){var c=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:u(r),y:m(s),w:u(r+n),h:m(s+i)},options:o,type:"link"})},t.textWithLink=function(r,s,n,i){var o,c,u=this.getTextWidth(r),m=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){c=i.maxWidth;var h=this.splitTextToSize(r,c).length;o=Math.ceil(m*h)}else c=u,o=m;return this.text(r,s,n,i),n+=.2*m,i.align==="center"&&(s-=u/2),i.align==="right"&&(s-=u),this.link(s,n-m,c,o,i),u},t.getTextWidth=function(r){var s=this.internal.getFontSize();return this.getStringUnitWidth(r)*s/this.internal.scaleFactor}}(ia.API),function(t){var a={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(N){return a[N.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},c=t.__arabicParser__.isArabicEndLetter=function(N){return o(N)&&i(N)&&a[N.charCodeAt(0)].length<=2},u=t.__arabicParser__.isArabicAlfLetter=function(N){return o(N)&&n.indexOf(N.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return o(N)&&i(N)&&a[N.charCodeAt(0)].length>=1};var m=t.__arabicParser__.arabicLetterHasFinalForm=function(N){return o(N)&&i(N)&&a[N.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(N){return o(N)&&i(N)&&a[N.charCodeAt(0)].length>=3};var h=t.__arabicParser__.arabicLetterHasMedialForm=function(N){return o(N)&&i(N)&&a[N.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(N){var w=0,j=r,T="",k=0;for(w=0;w<N.length;w+=1)j[N.charCodeAt(w)]!==void 0?(k++,typeof(j=j[N.charCodeAt(w)])=="number"&&(T+=String.fromCharCode(j),j=r,k=0),w===N.length-1&&(j=r,T+=N.charAt(w-(k-1)),w-=k-1,k=0)):(j=r,T+=N.charAt(w-k),w-=k,k=0);return T};t.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&s[N.charCodeAt(0)]!==void 0};var y=t.__arabicParser__.getCorrectForm=function(N,w,j){return o(N)?i(N)===!1?-1:!m(N)||!o(w)&&!o(j)||!o(j)&&c(w)||c(N)&&!o(w)||c(N)&&u(w)||c(N)&&c(w)?0:h(N)&&o(w)&&!c(w)&&o(j)&&m(j)?3:c(N)||!o(j)?1:2:-1},g=function(N){var w=0,j=0,T=0,k="",R="",P="",$=(N=N||"").split("\\s+"),A=[];for(w=0;w<$.length;w+=1){for(A.push(""),j=0;j<$[w].length;j+=1)k=$[w][j],R=$[w][j-1],P=$[w][j+1],o(k)?(T=y(k,R,P),A[w]+=T!==-1?String.fromCharCode(a[k.charCodeAt(0)][T]):k):A[w]+=k;A[w]=p(A[w])}return A.join(" ")},v=t.__arabicParser__.processArabic=t.processArabic=function(){var N,w=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,j=[];if(Array.isArray(w)){var T=0;for(j=[],T=0;T<w.length;T+=1)Array.isArray(w[T])?j.push([g(w[T][0]),w[T][1],w[T][2]]):j.push([g(w[T])]);N=j}else N=g(w);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};t.events.push(["preProcessText",v])}(ia.API),ia.API.autoPrint=function(t){var a;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){a=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+a+" 0 R")})),this},function(t){var a=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(c){r=c}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(c){s=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(c){n=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(c){i=c}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(c){o=c}}),Object.defineProperty(this,"parentNode",{})};a.prototype.getContext=function(r,s){var n;if((r=r||"2d")!=="2d")return null;for(n in s)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=s[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},a.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new a,this.canvas.pdf=this}])}(ia.API),function(t){var a={left:0,top:0,bottom:0,right:0},r=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},a),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(N){u=N}});var m=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return m},set:function(N){m=N}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(N){h=N}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(N){p=N}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(N){y=N}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(N){g=N}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(N){v=N}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(u){return s.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},t.getTextDimensions=function(u,m){s.call(this);var h=(m=m||{}).fontSize||this.getFontSize(),p=m.font||this.getFont(),y=m.scaleFactor||this.internal.scaleFactor,g=0,v=0,N=0,w=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var j=m.maxWidth;j>0?typeof u=="string"?u=this.splitTextToSize(u,j):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(k,R){return k.concat(w.splitTextToSize(R,j))},[])):u=Array.isArray(u)?u:[u];for(var T=0;T<u.length;T++)g<(N=this.getStringUnitWidth(u[T],{font:p})*h)&&(g=N);return g!==0&&(v=u.length),{w:g/=y,h:Math.max((v*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/y,0)}},t.cellAddPage=function(){s.call(this),this.addPage();var u=this.internal.__cell__.margins||a;return this.internal.__cell__.lastCell=new i(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var u;u=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var m=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,p=this.internal.__cell__.margins||a,y=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return m.lineNumber!==void 0&&(m.lineNumber===u.lineNumber?(u.x=(m.x||0)+(m.width||0),u.y=m.y||0):m.y+m.height+u.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=p.top,g&&y&&(this.printHeaderRow(u.lineNumber,!0),u.y+=y[0].height)):u.y=m.y+m.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,r===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-h,u.y+h,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+h,{align:"center",baseline:"top",maxWidth:u.width-h-h}):this.text(u.text,u.x+h,u.y+h,{align:"left",baseline:"top",maxWidth:u.width-h-h})),this.internal.__cell__.lastCell=u,this};t.table=function(u,m,h,p,y){if(s.call(this),!h)throw new Error("No data for PDF table.");var g,v,N,w,j=[],T=[],k=[],R={},P={},$=[],A=[],M=(y=y||{}).autoSize||!1,_=y.printHeaders!==!1,B=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,D=y.margins||Object.assign({width:this.getPageWidth()},a),C=typeof y.padding=="number"?y.padding:3,L=y.headerBackgroundColor||"#c8c8c8",H=y.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=_,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=B,this.internal.__cell__.padding=C,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=H,this.setFontSize(B),p==null)T=j=Object.keys(h[0]),k=j.map(function(){return"left"});else if(Array.isArray(p)&&fr(p[0])==="object")for(j=p.map(function(te){return te.name}),T=p.map(function(te){return te.prompt||te.name||""}),k=p.map(function(te){return te.align||"left"}),g=0;g<p.length;g+=1)P[p[g].name]=.7499990551181103*p[g].width;else Array.isArray(p)&&typeof p[0]=="string"&&(T=j=p,k=j.map(function(){return"left"}));if(M||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<j.length;g+=1){for(R[w=j[g]]=h.map(function(te){return te[w]}),this.setFont(void 0,"bold"),$.push(this.getTextDimensions(T[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=R[w],this.setFont(void 0,"normal"),N=0;N<v.length;N+=1)$.push(this.getTextDimensions(v[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[w]=Math.max.apply(null,$)+C+C,$=[]}if(_){var V={};for(g=0;g<j.length;g+=1)V[j[g]]={},V[j[g]].text=T[g],V[j[g]].align=k[g];var Y=c.call(this,V,P);A=j.map(function(te){return new i(u,m,P[te],Y,V[te].text,void 0,V[te].align)}),this.setTableHeaderRow(A),this.printHeaderRow(1,!1)}var J=p.reduce(function(te,oe){return te[oe.name]=oe.align,te},{});for(g=0;g<h.length;g+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:g,data:h[g]},this);var W=c.call(this,h[g],P);for(N=0;N<j.length;N+=1){var X=h[g][j[N]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:g,col:N,data:X},this),o.call(this,new i(u,m,P[j[N]],W,X,g+2,J[j[N]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=m,this};var c=function(u,m){var h=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(u).map(function(g){var v=u[g];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,m[g]-h-h)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/y+h+h},this).reduce(function(g,v){return Math.max(g,v)},0)};t.setTableHeaderRow=function(u){s.call(this),this.internal.__cell__.tableHeaderRow=u},t.printHeaderRow=function(u,m){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){h=this.internal.__cell__.tableHeaderRow[g].clone(),m&&(h.y=this.internal.__cell__.margins.top||0,y.push(h)),h.lineNumber=u;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(v)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),r=!1}}(ia.API);var pL={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},gL=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],SN=fL(gL),yL=[100,200,300,400,500,600,700,800,900],Fde=fL(yL);function z2(t){var a=t.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return pL[i=i||"normal"]?i:"normal"}(t.style),s=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(t.weight),n=function(i){return typeof SN[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:a,style:r,weight:s,stretch:n,src:t.src||[],ref:t.ref||{name:a,style:[n,r,s].join(" ")}}}function y7(t,a,r,s){var n;for(n=r;n>=0&&n<a.length;n+=s)if(t[a[n]])return t[a[n]];for(n=r;n>=0&&n<a.length;n-=s)if(t[a[n]])return t[a[n]]}var qde={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},b7={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function v7(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function j7(t){return t.trimLeft()}function Ude(t,a){for(var r=0;r<t.length;){if(t.charAt(r)===a)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Wde(t){var a=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return a===null?null:[a[0],t.substring(a[0].length)]}var U0,N7,w7,mh,W0,S7,_7,C7,$2=["times"];function k7(t,a,r,s){var n=4,i=E7;switch(s){case ia.API.image_compression.FAST:n=1,i=A7;break;case ia.API.image_compression.MEDIUM:n=6,i=T7;break;case ia.API.image_compression.SLOW:n=9,i=P7}t=function(c,u,m,h){for(var p,y=c.length/u,g=new Uint8Array(c.length+y),v=[Hde,A7,E7,T7,P7],N=0;N<y;N+=1){var w=N*u,j=c.subarray(w,w+u);if(h)g.set(h(j,m,p),w+N);else{for(var T=v.length,k=[],R=0;R<T;R+=1)k[R]=v[R](j,m,p);var P=Gde(k.concat());g.set(k[P],w+N)}p=j}return g}(t,a,r,i);var o=gN(t,{level:n});return ia.API.__addimage__.arrayBufferToBinaryString(o)}function Hde(t){var a=Array.apply([],t);return a.unshift(0),a}function A7(t,a){var r=t.length,s=[];s[0]=1;for(var n=0;n<r;n+=1){var i=t[n-a]||0;s[n+1]=t[n]-i+256&255}return s}function E7(t,a,r){var s=t.length,n=[];n[0]=2;for(var i=0;i<s;i+=1){var o=r&&r[i]||0;n[i+1]=t[i]-o+256&255}return n}function T7(t,a,r){var s=t.length,n=[];n[0]=3;for(var i=0;i<s;i+=1){var o=t[i-a]||0,c=r&&r[i]||0;n[i+1]=t[i]+256-(o+c>>>1)&255}return n}function P7(t,a,r){var s=t.length,n=[];n[0]=4;for(var i=0;i<s;i+=1){var o=Yde(t[i-a]||0,r&&r[i]||0,r&&r[i-a]||0);n[i+1]=t[i]-o+256&255}return n}function Yde(t,a,r){if(t===a&&a===r)return t;var s=Math.abs(a-r),n=Math.abs(t-r),i=Math.abs(t+a-r-r);return s<=n&&s<=i?t:n<=i?a:r}function Gde(t){var a=t.map(function(r){return r.reduce(function(s,n){return s+Math.abs(n)},0)});return a.indexOf(Math.min.apply(null,a))}function B2(t,a,r){var s=a*r,n=Math.floor(s/8),i=16-(s-8*n+r),o=(1<<r)-1;return bL(t,n)>>i&o}function D7(t,a,r,s){var n=r*s,i=Math.floor(n/8),o=16-(n-8*i+s),c=(1<<s)-1,u=(a&c)<<o;(function(m,h,p){if(h+1<m.byteLength)m.setUint16(h,p,!1);else{var y=p>>8&255;m.setUint8(h,y)}})(t,i,bL(t,i)&~(c<<o)&65535|u)}function bL(t,a){return a+1<t.byteLength?t.getUint16(a,!1):t.getUint8(a)<<8}function Vde(t){var a=0;if(t[a++]!==71||t[a++]!==73||t[a++]!==70||t[a++]!==56||(t[a++]+1&253)!=56||t[a++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[a++]|t[a++]<<8,s=t[a++]|t[a++]<<8,n=t[a++],i=n>>7,o=1<<1+(7&n);t[a++],t[a++];var c=null,u=null;i&&(c=a,u=o,a+=3*o);var m=!0,h=[],p=0,y=null,g=0,v=null;for(this.width=r,this.height=s;m&&a<t.length;)switch(t[a++]){case 33:switch(t[a++]){case 255:if(t[a]!==11||t[a+1]==78&&t[a+2]==69&&t[a+3]==84&&t[a+4]==83&&t[a+5]==67&&t[a+6]==65&&t[a+7]==80&&t[a+8]==69&&t[a+9]==50&&t[a+10]==46&&t[a+11]==48&&t[a+12]==3&&t[a+13]==1&&t[a+16]==0)a+=14,v=t[a++]|t[a++]<<8,a++;else for(a+=12;;){if(!((D=t[a++])>=0))throw Error("Invalid block size");if(D===0)break;a+=D}break;case 249:if(t[a++]!==4||t[a+4]!==0)throw new Error("Invalid graphics extension block.");var N=t[a++];p=t[a++]|t[a++]<<8,y=t[a++],1&N||(y=null),g=N>>2&7,a++;break;case 254:for(;;){if(!((D=t[a++])>=0))throw Error("Invalid block size");if(D===0)break;a+=D}break;default:throw new Error("Unknown graphic control label: 0x"+t[a-1].toString(16))}break;case 44:var w=t[a++]|t[a++]<<8,j=t[a++]|t[a++]<<8,T=t[a++]|t[a++]<<8,k=t[a++]|t[a++]<<8,R=t[a++],P=R>>6&1,$=1<<1+(7&R),A=c,M=u,_=!1;R>>7&&(_=!0,A=a,M=$,a+=3*$);var B=a;for(a++;;){var D;if(!((D=t[a++])>=0))throw Error("Invalid block size");if(D===0)break;a+=D}h.push({x:w,y:j,width:T,height:k,has_local_palette:_,palette_offset:A,palette_size:M,data_offset:B,data_length:a-B,transparent_index:y,interlaced:!!P,delay:p,disposal:g});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+t[a-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return v},this.frameInfo=function(C){if(C<0||C>=h.length)throw new Error("Frame index out of range.");return h[C]},this.decodeAndBlitFrameBGRA=function(C,L){var H=this.frameInfo(C),V=H.width*H.height,Y=new Uint8Array(V);O7(t,H.data_offset,Y,V);var J=H.palette_offset,W=H.transparent_index;W===null&&(W=256);var X=H.width,te=r-X,oe=X,q=4*(H.y*r+H.x),G=4*((H.y+H.height)*r+H.x),z=q,Z=4*te;H.interlaced===!0&&(Z+=4*r*7);for(var Q=8,fe=0,he=Y.length;fe<he;++fe){var ne=Y[fe];if(oe===0&&(oe=X,(z+=Z)>=G&&(Z=4*te+4*r*(Q-1),z=q+(X+te)*(Q<<1),Q>>=1)),ne===W)z+=4;else{var me=t[J+3*ne],pe=t[J+3*ne+1],ie=t[J+3*ne+2];L[z++]=ie,L[z++]=pe,L[z++]=me,L[z++]=255}--oe}},this.decodeAndBlitFrameRGBA=function(C,L){var H=this.frameInfo(C),V=H.width*H.height,Y=new Uint8Array(V);O7(t,H.data_offset,Y,V);var J=H.palette_offset,W=H.transparent_index;W===null&&(W=256);var X=H.width,te=r-X,oe=X,q=4*(H.y*r+H.x),G=4*((H.y+H.height)*r+H.x),z=q,Z=4*te;H.interlaced===!0&&(Z+=4*r*7);for(var Q=8,fe=0,he=Y.length;fe<he;++fe){var ne=Y[fe];if(oe===0&&(oe=X,(z+=Z)>=G&&(Z=4*te+4*r*(Q-1),z=q+(X+te)*(Q<<1),Q>>=1)),ne===W)z+=4;else{var me=t[J+3*ne],pe=t[J+3*ne+1],ie=t[J+3*ne+2];L[z++]=me,L[z++]=pe,L[z++]=ie,L[z++]=255}--oe}}}function O7(t,a,r,s){for(var n=t[a++],i=1<<n,o=i+1,c=o+1,u=n+1,m=(1<<u)-1,h=0,p=0,y=0,g=t[a++],v=new Int32Array(4096),N=null;;){for(;h<16&&g!==0;)p|=t[a++]<<h,h+=8,g===1?g=t[a++]:--g;if(h<u)break;var w=p&m;if(p>>=u,h-=u,w!==i){if(w===o)break;for(var j=w<c?w:N,T=0,k=j;k>i;)k=v[k]>>8,++T;var R=k;if(y+T+(j!==w?1:0)>s)return void _r.log("Warning, gif stream longer than expected.");r[y++]=R;var P=y+=T;for(j!==w&&(r[y++]=R),k=j;T--;)k=v[k],r[--P]=255&k,k>>=8;N!==null&&c<4096&&(v[c++]=N<<8|R,c>=m+1&&u<12&&(++u,m=m<<1|1)),N=w}else c=o+1,m=(1<<(u=n+1))-1,N=null}return y!==s&&_r.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function F2(t){var a,r,s,n,i,o=Math.floor,c=new Array(64),u=new Array(64),m=new Array(64),h=new Array(64),p=new Array(65535),y=new Array(65535),g=new Array(64),v=new Array(64),N=[],w=0,j=7,T=new Array(64),k=new Array(64),R=new Array(64),P=new Array(256),$=new Array(2048),A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],_=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],C=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],V=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(q,G){for(var z=0,Z=0,Q=new Array,fe=1;fe<=16;fe++){for(var he=1;he<=q[fe];he++)Q[G[Z]]=[],Q[G[Z]][0]=z,Q[G[Z]][1]=fe,Z++,z++;z*=2}return Q}function J(q){for(var G=q[0],z=q[1]-1;z>=0;)G&1<<z&&(w|=1<<j),z--,--j<0&&(w==255?(W(255),W(0)):W(w),j=7,w=0)}function W(q){N.push(q)}function X(q){W(q>>8&255),W(255&q)}function te(q,G,z,Z,Q){for(var fe,he=Q[0],ne=Q[240],me=function(ye,Ee){var Ke,Re,Le,Oe,$e,ct,Nt,jt,xt,we,Ie=0;for(xt=0;xt<8;++xt){Ke=ye[Ie],Re=ye[Ie+1],Le=ye[Ie+2],Oe=ye[Ie+3],$e=ye[Ie+4],ct=ye[Ie+5],Nt=ye[Ie+6];var dt=Ke+(jt=ye[Ie+7]),ut=Ke-jt,Te=Re+Nt,Ve=Re-Nt,qe=Le+ct,Xe=Le-ct,We=Oe+$e,Ge=Oe-$e,lt=dt+We,Dt=dt-We,It=Te+qe,Bt=Te-qe;ye[Ie]=lt+It,ye[Ie+4]=lt-It;var ze=.707106781*(Bt+Dt);ye[Ie+2]=Dt+ze,ye[Ie+6]=Dt-ze;var Mt=.382683433*((lt=Ge+Xe)-(Bt=Ve+ut)),oa=.5411961*lt+Mt,ca=1.306562965*Bt+Mt,Ka=.707106781*(It=Xe+Ve),Yt=ut+Ka,er=ut-Ka;ye[Ie+5]=er+oa,ye[Ie+3]=er-oa,ye[Ie+1]=Yt+ca,ye[Ie+7]=Yt-ca,Ie+=8}for(Ie=0,xt=0;xt<8;++xt){Ke=ye[Ie],Re=ye[Ie+8],Le=ye[Ie+16],Oe=ye[Ie+24],$e=ye[Ie+32],ct=ye[Ie+40],Nt=ye[Ie+48];var Ye=Ke+(jt=ye[Ie+56]),Et=Ke-jt,na=Re+Nt,zt=Re-Nt,it=Le+ct,Tt=Le-ct,qt=Oe+$e,aa=Oe-$e,Ar=Ye+qt,dr=Ye-qt,Er=na+it,ls=na-it;ye[Ie]=Ar+Er,ye[Ie+32]=Ar-Er;var gr=.707106781*(ls+dr);ye[Ie+16]=dr+gr,ye[Ie+48]=dr-gr;var Ra=.382683433*((Ar=aa+Tt)-(ls=zt+Et)),Ps=.5411961*Ar+Ra,Xn=1.306562965*ls+Ra,Us=.707106781*(Er=Tt+zt),Ds=Et+Us,Jn=Et-Us;ye[Ie+40]=Jn+Ps,ye[Ie+24]=Jn-Ps,ye[Ie+8]=Ds+Xn,ye[Ie+56]=Ds-Xn,Ie++}for(xt=0;xt<64;++xt)we=ye[xt]*Ee[xt],g[xt]=we>0?we+.5|0:we-.5|0;return g}(q,G),pe=0;pe<64;++pe)v[A[pe]]=me[pe];var ie=v[0]-z;z=v[0],ie==0?J(Z[0]):(J(Z[y[fe=32767+ie]]),J(p[fe]));for(var ke=63;ke>0&&v[ke]==0;)ke--;if(ke==0)return J(he),z;for(var Ae,ae=1;ae<=ke;){for(var Ne=ae;v[ae]==0&&ae<=ke;)++ae;var ce=ae-Ne;if(ce>=16){Ae=ce>>4;for(var De=1;De<=Ae;++De)J(ne);ce&=15}fe=32767+v[ae],J(Q[(ce<<4)+y[fe]]),J(p[fe]),ae++}return ke!=63&&J(he),z}function oe(q){q=Math.min(Math.max(q,1),100),i!=q&&(function(G){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var Q=o((z[Z]*G+50)/100);Q=Math.min(Math.max(Q,1),255),c[A[Z]]=Q}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var ne=o((fe[he]*G+50)/100);ne=Math.min(Math.max(ne,1),255),u[A[he]]=ne}for(var me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],pe=0,ie=0;ie<8;ie++)for(var ke=0;ke<8;ke++)m[pe]=1/(c[A[pe]]*me[ie]*me[ke]*8),h[pe]=1/(u[A[pe]]*me[ie]*me[ke]*8),pe++}(q<50?Math.floor(5e3/q):Math.floor(200-2*q)),i=q)}this.encode=function(q,G){G&&oe(G),N=new Array,w=0,j=7,X(65496),X(65504),X(16),W(74),W(70),W(73),W(70),W(0),W(1),W(1),W(0),X(1),X(1),W(0),W(0),function(){X(65499),X(132),W(0);for(var Re=0;Re<64;Re++)W(c[Re]);W(1);for(var Le=0;Le<64;Le++)W(u[Le])}(),function(Re,Le){X(65472),X(17),W(8),X(Le),X(Re),W(3),W(1),W(17),W(0),W(2),W(17),W(1),W(3),W(17),W(1)}(q.width,q.height),function(){X(65476),X(418),W(0);for(var Re=0;Re<16;Re++)W(M[Re+1]);for(var Le=0;Le<=11;Le++)W(_[Le]);W(16);for(var Oe=0;Oe<16;Oe++)W(B[Oe+1]);for(var $e=0;$e<=161;$e++)W(D[$e]);W(1);for(var ct=0;ct<16;ct++)W(C[ct+1]);for(var Nt=0;Nt<=11;Nt++)W(L[Nt]);W(17);for(var jt=0;jt<16;jt++)W(H[jt+1]);for(var xt=0;xt<=161;xt++)W(V[xt])}(),X(65498),X(12),W(3),W(1),W(0),W(2),W(17),W(3),W(17),W(0),W(63),W(0);var z=0,Z=0,Q=0;w=0,j=7,this.encode.displayName="_encode_";for(var fe,he,ne,me,pe,ie,ke,Ae,ae,Ne=q.data,ce=q.width,De=q.height,ye=4*ce,Ee=0;Ee<De;){for(fe=0;fe<ye;){for(pe=ye*Ee+fe,ke=-1,Ae=0,ae=0;ae<64;ae++)ie=pe+(Ae=ae>>3)*ye+(ke=4*(7&ae)),Ee+Ae>=De&&(ie-=ye*(Ee+1+Ae-De)),fe+ke>=ye&&(ie-=fe+ke-ye+4),he=Ne[ie++],ne=Ne[ie++],me=Ne[ie++],T[ae]=($[he]+$[ne+256|0]+$[me+512|0]>>16)-128,k[ae]=($[he+768|0]+$[ne+1024|0]+$[me+1280|0]>>16)-128,R[ae]=($[he+1280|0]+$[ne+1536|0]+$[me+1792|0]>>16)-128;z=te(T,m,z,a,s),Z=te(k,h,Z,r,n),Q=te(R,h,Q,r,n),fe+=32}Ee+=8}if(j>=0){var Ke=[];Ke[1]=j+1,Ke[0]=(1<<j+1)-1,J(Ke)}return X(65497),new Uint8Array(N)},t=t||50,function(){for(var q=String.fromCharCode,G=0;G<256;G++)P[G]=q(G)}(),a=Y(M,_),r=Y(C,L),s=Y(B,D),n=Y(H,V),function(){for(var q=1,G=2,z=1;z<=15;z++){for(var Z=q;Z<G;Z++)y[32767+Z]=z,p[32767+Z]=[],p[32767+Z][1]=z,p[32767+Z][0]=Z;for(var Q=-(G-1);Q<=-q;Q++)y[32767+Q]=z,p[32767+Q]=[],p[32767+Q][1]=z,p[32767+Q][0]=G-1+Q;q<<=1,G<<=1}}(),function(){for(var q=0;q<256;q++)$[q]=19595*q,$[q+256|0]=38470*q,$[q+512|0]=7471*q+32768,$[q+768|0]=-11059*q,$[q+1024|0]=-21709*q,$[q+1280|0]=32768*q+8421375,$[q+1536|0]=-27439*q,$[q+1792|0]=-5329*q}(),oe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function bo(t,a){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!a,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function L7(t){function a(_){if(!_)throw Error("assert :P")}function r(_,B,D){for(var C=0;4>C;C++)if(_[B+C]!=D.charCodeAt(C))return!0;return!1}function s(_,B,D,C,L){for(var H=0;H<L;H++)_[B+H]=D[C+H]}function n(_,B,D,C){for(var L=0;L<C;L++)_[B+L]=D}function i(_){return new Int32Array(_)}function o(_,B){for(var D=[],C=0;C<_;C++)D.push(new B);return D}function c(_,B){var D=[];return function C(L,H,V){for(var Y=V[H],J=0;J<Y&&(L.push(V.length>H+1?[]:new B),!(V.length<H+1));J++)C(L[J],H+1,V)}(D,0,_),D}var u=function(){var _=this;function B(S,O){for(var K=1<<O-1>>>0;S&K;)K>>>=1;return K?(S&K-1)+K:S}function D(S,O,K,ee,de){a(!(ee%K));do S[O+(ee-=K)]=de;while(0<ee)}function C(S,O,K,ee,de){if(a(2328>=de),512>=de)var xe=i(512);else if((xe=i(de))==null)return 0;return function(ge,ve,je,_e,Fe,at){var Se,He,Qe=ve,ht=1<<je,tt=i(16),gt=i(16);for(a(Fe!=0),a(_e!=null),a(ge!=null),a(0<je),He=0;He<Fe;++He){if(15<_e[He])return 0;++tt[_e[He]]}if(tt[0]==Fe)return 0;for(gt[1]=0,Se=1;15>Se;++Se){if(tt[Se]>1<<Se)return 0;gt[Se+1]=gt[Se]+tt[Se]}for(He=0;He<Fe;++He)Se=_e[He],0<_e[He]&&(at[gt[Se]++]=He);if(gt[15]==1)return(_e=new L).g=0,_e.value=at[0],D(ge,Qe,1,ht,_e),ht;var pt,kt=-1,wt=ht-1,ea=0,Ft=1,ba=1,Ut=1<<je;for(He=0,Se=1,Fe=2;Se<=je;++Se,Fe<<=1){if(Ft+=ba<<=1,0>(ba-=tt[Se]))return 0;for(;0<tt[Se];--tt[Se])(_e=new L).g=Se,_e.value=at[He++],D(ge,Qe+ea,Fe,Ut,_e),ea=B(ea,Se)}for(Se=je+1,Fe=2;15>=Se;++Se,Fe<<=1){if(Ft+=ba<<=1,0>(ba-=tt[Se]))return 0;for(;0<tt[Se];--tt[Se]){if(_e=new L,(ea&wt)!=kt){for(Qe+=Ut,pt=1<<(kt=Se)-je;15>kt&&!(0>=(pt-=tt[kt]));)++kt,pt<<=1;ht+=Ut=1<<(pt=kt-je),ge[ve+(kt=ea&wt)].g=pt+je,ge[ve+kt].value=Qe-ve-kt}_e.g=Se-je,_e.value=at[He++],D(ge,Qe+(ea>>je),Fe,Ut,_e),ea=B(ea,Se)}}return Ft!=2*gt[15]-1?0:ht}(S,O,K,ee,de,xe)}function L(){this.value=this.g=0}function H(){this.value=this.g=0}function V(){this.G=o(5,L),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(wi,H)}function Y(S,O,K,ee){a(S!=null),a(O!=null),a(2147483648>ee),S.Ca=254,S.I=0,S.b=-8,S.Ka=0,S.oa=O,S.pa=K,S.Jd=O,S.Yc=K+ee,S.Zc=4<=ee?K+ee-4+1:K,he(S)}function J(S,O){for(var K=0;0<O--;)K|=me(S,128)<<O;return K}function W(S,O){var K=J(S,O);return ne(S)?-K:K}function X(S,O,K,ee){var de,xe=0;for(a(S!=null),a(O!=null),a(4294967288>ee),S.Sb=ee,S.Ra=0,S.u=0,S.h=0,4<ee&&(ee=4),de=0;de<ee;++de)xe+=O[K+de]<<8*de;S.Ra=xe,S.bb=ee,S.oa=O,S.pa=K}function te(S){for(;8<=S.u&&S.bb<S.Sb;)S.Ra>>>=8,S.Ra+=S.oa[S.pa+S.bb]<<so-8>>>0,++S.bb,S.u-=8;Z(S)&&(S.h=1,S.u=0)}function oe(S,O){if(a(0<=O),!S.h&&O<=pd){var K=z(S)&yl[O];return S.u+=O,te(S),K}return S.h=1,S.u=0}function q(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(S){return S.Ra>>>(S.u&so-1)>>>0}function Z(S){return a(S.bb<=S.Sb),S.h||S.bb==S.Sb&&S.u>so}function Q(S,O){S.u=O,S.h=Z(S)}function fe(S){S.u>=qr&&(a(S.u>=qr),te(S))}function he(S){a(S!=null&&S.oa!=null),S.pa<S.Zc?(S.I=(S.oa[S.pa++]|S.I<<8)>>>0,S.b+=8):(a(S!=null&&S.oa!=null),S.pa<S.Yc?(S.b+=8,S.I=S.oa[S.pa++]|S.I<<8):S.Ka?S.b=0:(S.I<<=8,S.b+=8,S.Ka=1))}function ne(S){return J(S,1)}function me(S,O){var K=S.Ca;0>S.b&&he(S);var ee=S.b,de=K*O>>>8,xe=(S.I>>>ee>de)+0;for(xe?(K-=de,S.I-=de+1<<ee>>>0):K=de+1,ee=K,de=0;256<=ee;)de+=8,ee>>=8;return ee=7^de+lx[ee],S.b-=ee,S.Ca=(K<<ee)-1,xe}function pe(S,O,K){S[O+0]=K>>24&255,S[O+1]=K>>16&255,S[O+2]=K>>8&255,S[O+3]=255&K}function ie(S,O){return S[O+0]|S[O+1]<<8}function ke(S,O){return ie(S,O)|S[O+2]<<16}function Ae(S,O){return ie(S,O)|ie(S,O+2)<<16}function ae(S,O){var K=1<<O;return a(S!=null),a(0<O),S.X=i(K),S.X==null?0:(S.Mb=32-O,S.Xa=O,1)}function Ne(S,O){a(S!=null),a(O!=null),a(S.Xa==O.Xa),s(O.X,0,S.X,0,1<<O.Xa)}function ce(){this.X=[],this.Xa=this.Mb=0}function De(S,O,K,ee){a(K!=null),a(ee!=null);var de=K[0],xe=ee[0];return de==0&&(de=(S*xe+O/2)/O),xe==0&&(xe=(O*de+S/2)/S),0>=de||0>=xe?0:(K[0]=de,ee[0]=xe,1)}function ye(S,O){return S+(1<<O)-1>>>O}function Ee(S,O){return((4278255360&S)+(4278255360&O)>>>0&4278255360)+((16711935&S)+(16711935&O)>>>0&16711935)>>>0}function Ke(S,O){_[O]=function(K,ee,de,xe,ge,ve,je){var _e;for(_e=0;_e<ge;++_e){var Fe=_[S](ve[je+_e-1],de,xe+_e);ve[je+_e]=Ee(K[ee+_e],Fe)}}}function Re(){this.ud=this.hd=this.jd=0}function Le(S,O){return((4278124286&(S^O))>>>1)+(S&O)>>>0}function Oe(S){return 0<=S&&256>S?S:0>S?0:255<S?255:void 0}function $e(S,O){return Oe(S+(S-O+.5>>1))}function ct(S,O,K){return Math.abs(O-K)-Math.abs(S-K)}function Nt(S,O,K,ee,de,xe,ge){for(ee=xe[ge-1],K=0;K<de;++K)xe[ge+K]=ee=Ee(S[O+K],ee)}function jt(S,O,K,ee,de){var xe;for(xe=0;xe<K;++xe){var ge=S[O+xe],ve=ge>>8&255,je=16711935&(je=(je=16711935&ge)+((ve<<16)+ve));ee[de+xe]=(4278255360&ge)+je>>>0}}function xt(S,O){O.jd=255&S,O.hd=S>>8&255,O.ud=S>>16&255}function we(S,O,K,ee,de,xe){var ge;for(ge=0;ge<ee;++ge){var ve=O[K+ge],je=ve>>>8,_e=ve,Fe=255&(Fe=(Fe=ve>>>16)+((S.jd<<24>>24)*(je<<24>>24)>>>5));_e=255&(_e=(_e+=(S.hd<<24>>24)*(je<<24>>24)>>>5)+((S.ud<<24>>24)*(Fe<<24>>24)>>>5)),de[xe+ge]=(4278255360&ve)+(Fe<<16)+_e}}function Ie(S,O,K,ee,de){_[O]=function(xe,ge,ve,je,_e,Fe,at,Se,He){for(je=at;je<Se;++je)for(at=0;at<He;++at)_e[Fe++]=de(ve[ee(xe[ge++])])},_[S]=function(xe,ge,ve,je,_e,Fe,at){var Se=8>>xe.b,He=xe.Ea,Qe=xe.K[0],ht=xe.w;if(8>Se)for(xe=(1<<xe.b)-1,ht=(1<<Se)-1;ge<ve;++ge){var tt,gt=0;for(tt=0;tt<He;++tt)tt&xe||(gt=ee(je[_e++])),Fe[at++]=de(Qe[gt&ht]),gt>>=Se}else _["VP8LMapColor"+K](je,_e,Qe,ht,Fe,at,ge,ve,He)}}function dt(S,O,K,ee,de){for(K=O+K;O<K;){var xe=S[O++];ee[de++]=xe>>16&255,ee[de++]=xe>>8&255,ee[de++]=255&xe}}function ut(S,O,K,ee,de){for(K=O+K;O<K;){var xe=S[O++];ee[de++]=xe>>16&255,ee[de++]=xe>>8&255,ee[de++]=255&xe,ee[de++]=xe>>24&255}}function Te(S,O,K,ee,de){for(K=O+K;O<K;){var xe=(ge=S[O++])>>16&240|ge>>12&15,ge=240&ge|ge>>28&15;ee[de++]=xe,ee[de++]=ge}}function Ve(S,O,K,ee,de){for(K=O+K;O<K;){var xe=(ge=S[O++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;ee[de++]=xe,ee[de++]=ge}}function qe(S,O,K,ee,de){for(K=O+K;O<K;){var xe=S[O++];ee[de++]=255&xe,ee[de++]=xe>>8&255,ee[de++]=xe>>16&255}}function Xe(S,O,K,ee,de,xe){if(xe==0)for(K=O+K;O<K;)pe(ee,((xe=S[O++])[0]>>24|xe[1]>>8&65280|xe[2]<<8&16711680|xe[3]<<24)>>>0),de+=32;else s(ee,de,S,O,K)}function We(S,O){_[O][0]=_[S+"0"],_[O][1]=_[S+"1"],_[O][2]=_[S+"2"],_[O][3]=_[S+"3"],_[O][4]=_[S+"4"],_[O][5]=_[S+"5"],_[O][6]=_[S+"6"],_[O][7]=_[S+"7"],_[O][8]=_[S+"8"],_[O][9]=_[S+"9"],_[O][10]=_[S+"10"],_[O][11]=_[S+"11"],_[O][12]=_[S+"12"],_[O][13]=_[S+"13"],_[O][14]=_[S+"0"],_[O][15]=_[S+"0"]}function Ge(S){return S==ku||S==qo||S==io||S==jd}function lt(){this.eb=[],this.size=this.A=this.fb=0}function Dt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function It(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new lt,this.f.kb=new Dt,this.sd=null}function Bt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ze(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Mt(S){return alert("todo:WebPSamplerProcessPlane"),S.T}function oa(S,O){var K=S.T,ee=O.ba.f.RGBA,de=ee.eb,xe=ee.fb+S.ka*ee.A,ge=zs[O.ba.S],ve=S.y,je=S.O,_e=S.f,Fe=S.N,at=S.ea,Se=S.W,He=O.cc,Qe=O.dc,ht=O.Mc,tt=O.Nc,gt=S.ka,pt=S.ka+S.T,kt=S.U,wt=kt+1>>1;for(gt==0?ge(ve,je,null,null,_e,Fe,at,Se,_e,Fe,at,Se,de,xe,null,null,kt):(ge(O.ec,O.fc,ve,je,He,Qe,ht,tt,_e,Fe,at,Se,de,xe-ee.A,de,xe,kt),++K);gt+2<pt;gt+=2)He=_e,Qe=Fe,ht=at,tt=Se,Fe+=S.Rc,Se+=S.Rc,xe+=2*ee.A,ge(ve,(je+=2*S.fa)-S.fa,ve,je,He,Qe,ht,tt,_e,Fe,at,Se,de,xe-ee.A,de,xe,kt);return je+=S.fa,S.j+pt<S.o?(s(O.ec,O.fc,ve,je,kt),s(O.cc,O.dc,_e,Fe,wt),s(O.Mc,O.Nc,at,Se,wt),K--):1&pt||ge(ve,je,null,null,_e,Fe,at,Se,_e,Fe,at,Se,de,xe+ee.A,null,null,kt),K}function ca(S,O,K){var ee=S.F,de=[S.J];if(ee!=null){var xe=S.U,ge=O.ba.S,ve=ge==Sc||ge==io;O=O.ba.f.RGBA;var je=[0],_e=S.ka;je[0]=S.T,S.Kb&&(_e==0?--je[0]:(--_e,de[0]-=S.width),S.j+S.ka+S.T==S.o&&(je[0]=S.o-S.j-_e));var Fe=O.eb;_e=O.fb+_e*O.A,S=li(ee,de[0],S.width,xe,je,Fe,_e+(ve?0:3),O.A),a(K==je),S&&Ge(ge)&&bd(Fe,_e,ve,xe,je,O.A)}return 0}function Ka(S){var O=S.ma,K=O.ba.S,ee=11>K,de=K==vd||K==Cu||K==Sc||K==no||K==12||Ge(K);if(O.memory=null,O.Ib=null,O.Jb=null,O.Nd=null,!Ys(O.Oa,S,de?11:12))return 0;if(de&&Ge(K)&&Nu(),S.da)alert("todo:use_scaling");else{if(ee){if(O.Ib=Mt,S.Kb){if(K=S.U+1>>1,O.memory=i(S.U+2*K),O.memory==null)return 0;O.ec=O.memory,O.fc=0,O.cc=O.ec,O.dc=O.fc+S.U,O.Mc=O.cc,O.Nc=O.dc+K,O.Ib=oa,Nu()}}else alert("todo:EmitYUV");de&&(O.Jb=ca,ee&&yc())}if(ee&&!Sp){for(S=0;256>S;++S)xb[S]=89858*(S-128)+bs>>El,Tu[S]=-22014*(S-128)+bs,fx[S]=-45773*(S-128),vs[S]=113618*(S-128)+bs>>El;for(S=Ho;S<qm;++S)O=76283*(S-16)+bs>>El,Pu[S-Ho]=gs(O,255),px[S-Ho]=gs(O+8>>4,15);Sp=1}return 1}function Yt(S){var O=S.ma,K=S.U,ee=S.T;return a(!(1&S.ka)),0>=K||0>=ee?0:(K=O.Ib(S,O),O.Jb!=null&&O.Jb(S,O,K),O.Dc+=K,1)}function er(S){S.ma.memory=null}function Ye(S,O,K,ee){return oe(S,8)!=47?0:(O[0]=oe(S,14)+1,K[0]=oe(S,14)+1,ee[0]=oe(S,1),oe(S,3)!=0?0:!S.h)}function Et(S,O){if(4>S)return S+1;var K=S-2>>1;return(2+(1&S)<<K)+oe(O,K)+1}function na(S,O){return 120<O?O-120:1<=(K=((K=oo[O-1])>>4)*S+(8-(15&K)))?K:1;var K}function zt(S,O,K){var ee=z(K),de=S[O+=255&ee].g-8;return 0<de&&(Q(K,K.u+8),ee=z(K),O+=S[O].value,O+=ee&(1<<de)-1),Q(K,K.u+S[O].g),S[O].value}function it(S,O,K){return K.g+=S.g,K.value+=S.value<<O>>>0,a(8>=K.g),S.g}function Tt(S,O,K){var ee=S.xc;return a((O=ee==0?0:S.vc[S.md*(K>>ee)+(O>>ee)])<S.Wb),S.Ya[O]}function qt(S,O,K,ee){var de=S.ab,xe=S.c*O,ge=S.C;O=ge+O;var ve=K,je=ee;for(ee=S.Ta,K=S.Ua;0<de--;){var _e=S.gc[de],Fe=ge,at=O,Se=ve,He=je,Qe=(je=ee,ve=K,_e.Ea);switch(a(Fe<at),a(at<=_e.nc),_e.hc){case 2:gd(Se,He,(at-Fe)*Qe,je,ve);break;case 0:var ht=Fe,tt=at,gt=je,pt=ve,kt=(Ut=_e).Ea;ht==0&&(bl(Se,He,null,null,1,gt,pt),Nt(Se,He+1,0,0,kt-1,gt,pt+1),He+=kt,pt+=kt,++ht);for(var wt=1<<Ut.b,ea=wt-1,Ft=ye(kt,Ut.b),ba=Ut.K,Ut=Ut.w+(ht>>Ut.b)*Ft;ht<tt;){var Ia=ba,ms=Ut,ga=1;for(vl(Se,He,gt,pt-kt,1,gt,pt);ga<kt;){var Gt=(ga&~ea)+wt;Gt>kt&&(Gt=kt),(0,Bo[Ia[ms++]>>8&15])(Se,He+ +ga,gt,pt+ga-kt,Gt-ga,gt,pt+ga),ga=Gt}He+=kt,pt+=kt,++ht&ea||(Ut+=Ft)}at!=_e.nc&&s(je,ve-Qe,je,ve+(at-Fe-1)*Qe,Qe);break;case 1:for(Qe=Se,tt=He,kt=(Se=_e.Ea)-(pt=Se&~(gt=(He=1<<_e.b)-1)),ht=ye(Se,_e.b),wt=_e.K,_e=_e.w+(Fe>>_e.b)*ht;Fe<at;){for(ea=wt,Ft=_e,ba=new Re,Ut=tt+pt,Ia=tt+Se;tt<Ut;)xt(ea[Ft++],ba),Nl(ba,Qe,tt,He,je,ve),tt+=He,ve+=He;tt<Ia&&(xt(ea[Ft++],ba),Nl(ba,Qe,tt,kt,je,ve),tt+=kt,ve+=kt),++Fe&gt||(_e+=ht)}break;case 3:if(Se==je&&He==ve&&0<_e.b){for(tt=je,Se=Qe=ve+(at-Fe)*Qe-(pt=(at-Fe)*ye(_e.Ea,_e.b)),He=je,gt=ve,ht=[],pt=(kt=pt)-1;0<=pt;--pt)ht[pt]=He[gt+pt];for(pt=kt-1;0<=pt;--pt)tt[Se+pt]=ht[pt];wu(_e,Fe,at,je,Qe,je,ve)}else wu(_e,Fe,at,Se,He,je,ve)}ve=ee,je=K}je!=K&&s(ee,K,ve,je,xe)}function aa(S,O){var K=S.V,ee=S.Ba+S.c*S.C,de=O-S.C;if(a(O<=S.l.o),a(16>=de),0<de){var xe=S.l,ge=S.Ta,ve=S.Ua,je=xe.width;if(qt(S,de,K,ee),de=ve=[ve],a((K=S.C)<(ee=O)),a(xe.v<xe.va),ee>xe.o&&(ee=xe.o),K<xe.j){var _e=xe.j-K;K=xe.j,de[0]+=_e*je}if(K>=ee?K=0:(de[0]+=4*xe.v,xe.ka=K-xe.j,xe.U=xe.va-xe.v,xe.T=ee-K,K=1),K){if(ve=ve[0],11>(K=S.ca).S){var Fe=K.f.RGBA,at=(ee=K.S,de=xe.U,xe=xe.T,_e=Fe.eb,Fe.A),Se=xe;for(Fe=Fe.fb+S.Ma*Fe.A;0<Se--;){var He=ge,Qe=ve,ht=de,tt=_e,gt=Fe;switch(ee){case rn:yd(He,Qe,ht,tt,gt);break;case vd:yn(He,Qe,ht,tt,gt);break;case ku:yn(He,Qe,ht,tt,gt),bd(tt,gt,0,ht,1,0);break;case _l:lr(He,Qe,ht,tt,gt);break;case Cu:Xe(He,Qe,ht,tt,gt,1);break;case qo:Xe(He,Qe,ht,tt,gt,1),bd(tt,gt,0,ht,1,0);break;case Sc:Xe(He,Qe,ht,tt,gt,0);break;case io:Xe(He,Qe,ht,tt,gt,0),bd(tt,gt,1,ht,1,0);break;case no:wl(He,Qe,ht,tt,gt);break;case jd:wl(He,Qe,ht,tt,gt),ii(tt,gt,ht,1,0);break;case Im:tr(He,Qe,ht,tt,gt);break;default:a(0)}ve+=je,Fe+=at}S.Ma+=xe}else alert("todo:EmitRescaledRowsYUVA");a(S.Ma<=K.height)}}S.C=O,a(S.C<=S.i)}function Ar(S){var O;if(0<S.ua)return 0;for(O=0;O<S.Wb;++O){var K=S.Ya[O].G,ee=S.Ya[O].H;if(0<K[1][ee[1]+0].g||0<K[2][ee[2]+0].g||0<K[3][ee[3]+0].g)return 0}return 1}function dr(S,O,K,ee,de,xe){if(S.Z!=0){var ge=S.qd,ve=S.rd;for(a(kl[S.Z]!=null);O<K;++O)kl[S.Z](ge,ve,ee,de,ee,de,xe),ge=ee,ve=de,de+=xe;S.qd=ge,S.rd=ve}}function Er(S,O){var K=S.l.ma,ee=K.Z==0||K.Z==1?S.l.j:S.C;if(ee=S.C<ee?ee:S.C,a(O<=S.l.o),O>ee){var de=S.l.width,xe=K.ca,ge=K.tb+de*ee,ve=S.V,je=S.Ba+S.c*ee,_e=S.gc;a(S.ab==1),a(_e[0].hc==3),jl(_e[0],ee,O,ve,je,xe,ge),dr(K,ee,O,xe,ge,de)}S.C=S.Ma=O}function ls(S,O,K,ee,de,xe,ge){var ve=S.$/ee,je=S.$%ee,_e=S.m,Fe=S.s,at=K+S.$,Se=at;de=K+ee*de;var He=K+ee*xe,Qe=280+Fe.ua,ht=S.Pb?ve:16777216,tt=0<Fe.ua?Fe.Wa:null,gt=Fe.wc,pt=at<He?Tt(Fe,je,ve):null;a(S.C<xe),a(He<=de);var kt=!1;e:for(;;){for(;kt||at<He;){var wt=0;if(ve>=ht){var ea=at-K;a((ht=S).Pb),ht.wd=ht.m,ht.xd=ea,0<ht.s.ua&&Ne(ht.s.Wa,ht.s.vb),ht=ve+jp}if(je&gt||(pt=Tt(Fe,je,ve)),a(pt!=null),pt.Qb&&(O[at]=pt.qb,kt=!0),!kt)if(fe(_e),pt.jc){wt=_e,ea=O;var Ft=at,ba=pt.pd[z(wt)&wi-1];a(pt.jc),256>ba.g?(Q(wt,wt.u+ba.g),ea[Ft]=ba.value,wt=0):(Q(wt,wt.u+ba.g-256),a(256<=ba.value),wt=ba.value),wt==0&&(kt=!0)}else wt=zt(pt.G[0],pt.H[0],_e);if(_e.h)break;if(kt||256>wt){if(!kt)if(pt.nd)O[at]=(pt.qb|wt<<8)>>>0;else{if(fe(_e),kt=zt(pt.G[1],pt.H[1],_e),fe(_e),ea=zt(pt.G[2],pt.H[2],_e),Ft=zt(pt.G[3],pt.H[3],_e),_e.h)break;O[at]=(Ft<<24|kt<<16|wt<<8|ea)>>>0}if(kt=!1,++at,++je>=ee&&(je=0,++ve,ge!=null&&ve<=xe&&!(ve%16)&&ge(S,ve),tt!=null))for(;Se<at;)wt=O[Se++],tt.X[(506832829*wt&4294967295)>>>tt.Mb]=wt}else if(280>wt){if(wt=Et(wt-256,_e),ea=zt(pt.G[4],pt.H[4],_e),fe(_e),ea=na(ee,ea=Et(ea,_e)),_e.h)break;if(at-K<ea||de-at<wt)break e;for(Ft=0;Ft<wt;++Ft)O[at+Ft]=O[at+Ft-ea];for(at+=wt,je+=wt;je>=ee;)je-=ee,++ve,ge!=null&&ve<=xe&&!(ve%16)&&ge(S,ve);if(a(at<=de),je&gt&&(pt=Tt(Fe,je,ve)),tt!=null)for(;Se<at;)wt=O[Se++],tt.X[(506832829*wt&4294967295)>>>tt.Mb]=wt}else{if(!(wt<Qe))break e;for(kt=wt-280,a(tt!=null);Se<at;)wt=O[Se++],tt.X[(506832829*wt&4294967295)>>>tt.Mb]=wt;wt=at,a(!(kt>>>(ea=tt).Xa)),O[wt]=ea.X[kt],kt=!0}kt||a(_e.h==Z(_e))}if(S.Pb&&_e.h&&at<de)a(S.m.h),S.a=5,S.m=S.wd,S.$=S.xd,0<S.s.ua&&Ne(S.s.vb,S.s.Wa);else{if(_e.h)break e;ge?.(S,ve>xe?xe:ve),S.a=0,S.$=at-K}return 1}return S.a=3,0}function gr(S){a(S!=null),S.vc=null,S.yc=null,S.Ya=null;var O=S.Wa;O!=null&&(O.X=null),S.vb=null,a(S!=null)}function Ra(){var S=new Mr;return S==null?null:(S.a=0,S.xb=Nd,We("Predictor","VP8LPredictors"),We("Predictor","VP8LPredictors_C"),We("PredictorAdd","VP8LPredictorsAdd"),We("PredictorAdd","VP8LPredictorsAdd_C"),gd=jt,Nl=we,yd=dt,yn=ut,wl=Te,tr=Ve,lr=qe,_.VP8LMapColor32b=Rs,_.VP8LMapColor8b=$o,S)}function Ps(S,O,K,ee,de){var xe=1,ge=[S],ve=[O],je=ee.m,_e=ee.s,Fe=null,at=0;e:for(;;){if(K)for(;xe&&oe(je,1);){var Se=ge,He=ve,Qe=ee,ht=1,tt=Qe.m,gt=Qe.gc[Qe.ab],pt=oe(tt,2);if(Qe.Oc&1<<pt)xe=0;else{switch(Qe.Oc|=1<<pt,gt.hc=pt,gt.Ea=Se[0],gt.nc=He[0],gt.K=[null],++Qe.ab,a(4>=Qe.ab),pt){case 0:case 1:gt.b=oe(tt,3)+2,ht=Ps(ye(gt.Ea,gt.b),ye(gt.nc,gt.b),0,Qe,gt.K),gt.K=gt.K[0];break;case 3:var kt,wt=oe(tt,8)+1,ea=16<wt?0:4<wt?1:2<wt?2:3;if(Se[0]=ye(gt.Ea,ea),gt.b=ea,kt=ht=Ps(wt,1,0,Qe,gt.K)){var Ft,ba=wt,Ut=gt,Ia=1<<(8>>Ut.b),ms=i(Ia);if(ms==null)kt=0;else{var ga=Ut.K[0],Gt=Ut.w;for(ms[0]=Ut.K[0][0],Ft=1;Ft<1*ba;++Ft)ms[Ft]=Ee(ga[Gt+Ft],ms[Ft-1]);for(;Ft<4*Ia;++Ft)ms[Ft]=0;Ut.K[0]=null,Ut.K[0]=ms,kt=1}}ht=kt;break;case 2:break;default:a(0)}xe=ht}}if(ge=ge[0],ve=ve[0],xe&&oe(je,1)&&!(xe=1<=(at=oe(je,4))&&11>=at)){ee.a=3;break e}var Rt;if(Rt=xe)t:{var Ir,va,ka,Xt=ee,Na=ge,Wa=ve,wr=at,Zr=K,Qr=Xt.m,Wr=Xt.s,Oa=[null],Ha=1,Hr=0,ha=Cc[wr];a:for(;;){if(Zr&&oe(Qr,1)){var js=oe(Qr,3)+2,di=ye(Na,js),Yr=ye(Wa,js),jn=di*Yr;if(!Ps(di,Yr,0,Xt,Oa))break a;for(Oa=Oa[0],Wr.xc=js,Ir=0;Ir<jn;++Ir){var ur=Oa[Ir]>>8&65535;Oa[Ir]=ur,ur>=Ha&&(Ha=ur+1)}}if(Qr.h)break a;for(va=0;5>va;++va){var es=oi[va];!va&&0<wr&&(es+=1<<wr),Hr<es&&(Hr=es)}var Nn=o(Ha*ha,L),Gs=Ha,yr=o(Gs,V);if(yr==null)var Xa=null;else a(65536>=Gs),Xa=yr;var sn=i(Hr);if(Xa==null||sn==null||Nn==null){Xt.a=1;break a}var Vs=Nn;for(Ir=ka=0;Ir<Ha;++Ir){var nr=Xa[Ir],wn=nr.G,Ns=nr.H,Tl=0,Wi=1,ws=0;for(va=0;5>va;++va){es=oi[va],wn[va]=Vs,Ns[va]=ka,!va&&0<wr&&(es+=1<<wr);s:{var Du,Um=es,Ou=Xt,Sd=sn,kp=Vs,Ap=ka,Lu=0,ho=Ou.m,pb=oe(ho,1);if(n(Sd,0,0,Um),pb){var Ep=oe(ho,1)+1,Tp=oe(ho,1),gx=oe(ho,Tp==0?1:8);Sd[gx]=1,Ep==2&&(Sd[gx=oe(ho,8)]=1);var _d=1}else{var yx=i(19),bx=oe(ho,4)+4;if(19<bx){Ou.a=3;var Mu=0;break s}for(Du=0;Du<bx;++Du)yx[lo[Du]]=oe(ho,3);var Wm=void 0,Cd=void 0,Pp=Ou,Dp=yx,xo=Um,Ru=Sd,Hm=0,Hi=Pp.m,kd=8,vx=o(128,L);r:for(;C(vx,0,7,Dp,19);){if(oe(Hi,1)){var Op=2+2*oe(Hi,3);if((Wm=2+oe(Hi,Op))>xo)break r}else Wm=xo;for(Cd=0;Cd<xo&&Wm--;){fe(Hi);var jx=vx[0+(127&z(Hi))];Q(Hi,Hi.u+jx.g);var Ec=jx.value;if(16>Ec)Ru[Cd++]=Ec,Ec!=0&&(kd=Ec);else{var Lp=Ec==16,Nx=Ec-16,wx=ki[Nx],Sx=oe(Hi,zm[Nx])+wx;if(Cd+Sx>xo)break r;for(var Mp=Lp?kd:0;0<Sx--;)Ru[Cd++]=Mp}}Hm=1;break r}Hm||(Pp.a=3),_d=Hm}(_d=_d&&!ho.h)&&(Lu=C(kp,Ap,8,Sd,Um)),_d&&Lu!=0?Mu=Lu:(Ou.a=3,Mu=0)}if(Mu==0)break a;if(Wi&&_c[va]==1&&(Wi=Vs[ka].g==0),Tl+=Vs[ka].g,ka+=Mu,3>=va){var Tc,Ym=sn[0];for(Tc=1;Tc<es;++Tc)sn[Tc]>Ym&&(Ym=sn[Tc]);ws+=Ym}}if(nr.nd=Wi,nr.Qb=0,Wi&&(nr.qb=(wn[3][Ns[3]+0].value<<24|wn[1][Ns[1]+0].value<<16|wn[2][Ns[2]+0].value)>>>0,Tl==0&&256>wn[0][Ns[0]+0].value&&(nr.Qb=1,nr.qb+=wn[0][Ns[0]+0].value<<8)),nr.jc=!nr.Qb&&6>ws,nr.jc){var Iu,fo=nr;for(Iu=0;Iu<wi;++Iu){var Pl=Iu,po=fo.pd[Pl],zu=fo.G[0][fo.H[0]+Pl];256<=zu.value?(po.g=zu.g+256,po.value=zu.value):(po.g=0,po.value=0,Pl>>=it(zu,8,po),Pl>>=it(fo.G[1][fo.H[1]+Pl],16,po),Pl>>=it(fo.G[2][fo.H[2]+Pl],0,po),it(fo.G[3][fo.H[3]+Pl],24,po))}}}Wr.vc=Oa,Wr.Wb=Ha,Wr.Ya=Xa,Wr.yc=Nn,Rt=1;break t}Rt=0}if(!(xe=Rt)){ee.a=3;break e}if(0<at){if(_e.ua=1<<at,!ae(_e.Wa,at)){ee.a=1,xe=0;break e}}else _e.ua=0;var $u=ee,_x=ge,Rp=ve,Cx=$u.s,kx=Cx.xc;if($u.c=_x,$u.i=Rp,Cx.md=ye(_x,kx),Cx.wc=kx==0?-1:(1<<kx)-1,K){ee.xb=wp;break e}if((Fe=i(ge*ve))==null){ee.a=1,xe=0;break e}xe=(xe=ls(ee,Fe,0,ge,ve,ve,null))&&!je.h;break e}return xe?(de!=null?de[0]=Fe:(a(Fe==null),a(K)),ee.$=0,K||gr(_e)):gr(_e),xe}function Xn(S,O){var K=S.c*S.i,ee=K+O+16*O;return a(S.c<=O),S.V=i(ee),S.V==null?(S.Ta=null,S.Ua=0,S.a=1,0):(S.Ta=S.V,S.Ua=S.Ba+K+O,1)}function Us(S,O){var K=S.C,ee=O-K,de=S.V,xe=S.Ba+S.c*K;for(a(O<=S.l.o);0<ee;){var ge=16<ee?16:ee,ve=S.l.ma,je=S.l.width,_e=je*ge,Fe=ve.ca,at=ve.tb+je*K,Se=S.Ta,He=S.Ua;qt(S,ge,de,xe),jc(Se,He,Fe,at,_e),dr(ve,K,K+ge,Fe,at,je),ee-=ge,de+=ge*S.c,K+=ge}a(K==O),S.C=S.Ma=O}function Ds(){this.ub=this.yd=this.td=this.Rb=0}function Jn(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Xl(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Pn(){this.Yb=function(){var S=[];return function O(K,ee,de){for(var xe=de[ee],ge=0;ge<xe&&(K.push(de.length>ee+1?[]:0),!(de.length<ee+1));ge++)O(K[ge],ee+1,de)}(S,0,[3,11]),S}()}function Jl(){this.jb=i(3),this.Wc=c([4,8],Pn),this.Xc=c([4,17],Pn)}function Dn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Os(){this.ld=this.La=this.dd=this.tc=0}function os(){this.Na=this.la=0}function tn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function pi(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ws(){this.uc=this.M=this.Nb=0,this.wa=Array(new Os),this.Y=0,this.ya=Array(new pi),this.aa=0,this.l=new cl}function $i(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Zn(){this.cb=this.a=0,this.sc="",this.m=new q,this.Od=new Ds,this.Kc=new Jn,this.ed=new Dn,this.Qa=new Xl,this.Ic=this.$c=this.Aa=0,this.D=new Ws,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,q),this.ia=0,this.pb=o(4,tn),this.Pa=new Jl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new $i),this.Hd=0,this.rb=Array(new os),this.sb=0,this.wa=Array(new Os),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new pi),this.L=this.aa=0,this.gd=c([4,2],Os),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function cl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Bi(){var S=new Zn;return S!=null&&(S.a=0,S.sc="OK",S.cb=0,S.Xb=0,ys||(ys=Lr)),S}function $a(S,O,K){return S.a==0&&(S.a=O,S.sc=K,S.cb=0),0}function gi(S,O,K){return 3<=K&&S[O+0]==157&&S[O+1]==1&&S[O+2]==42}function On(S,O){if(S==null)return 0;if(S.a=0,S.sc="OK",O==null)return $a(S,2,"null VP8Io passed to VP8GetHeaders()");var K=O.data,ee=O.w,de=O.ha;if(4>de)return $a(S,7,"Truncated header.");var xe=K[ee+0]|K[ee+1]<<8|K[ee+2]<<16,ge=S.Od;if(ge.Rb=!(1&xe),ge.td=xe>>1&7,ge.yd=xe>>4&1,ge.ub=xe>>5,3<ge.td)return $a(S,3,"Incorrect keyframe parameters.");if(!ge.yd)return $a(S,4,"Frame not displayable.");ee+=3,de-=3;var ve=S.Kc;if(ge.Rb){if(7>de)return $a(S,7,"cannot parse picture header");if(!gi(K,ee,de))return $a(S,3,"Bad code word");ve.c=16383&(K[ee+4]<<8|K[ee+3]),ve.Td=K[ee+4]>>6,ve.i=16383&(K[ee+6]<<8|K[ee+5]),ve.Ud=K[ee+6]>>6,ee+=7,de-=7,S.za=ve.c+15>>4,S.Ub=ve.i+15>>4,O.width=ve.c,O.height=ve.i,O.Da=0,O.j=0,O.v=0,O.va=O.width,O.o=O.height,O.da=0,O.ib=O.width,O.hb=O.height,O.U=O.width,O.T=O.height,n((xe=S.Pa).jb,0,255,xe.jb.length),a((xe=S.Qa)!=null),xe.Cb=0,xe.Bb=0,xe.Fb=1,n(xe.Zb,0,0,xe.Zb.length),n(xe.Lb,0,0,xe.Lb)}if(ge.ub>de)return $a(S,7,"bad partition length");Y(xe=S.m,K,ee,ge.ub),ee+=ge.ub,de-=ge.ub,ge.Rb&&(ve.Ld=ne(xe),ve.Kd=ne(xe)),ve=S.Qa;var je,_e=S.Pa;if(a(xe!=null),a(ve!=null),ve.Cb=ne(xe),ve.Cb){if(ve.Bb=ne(xe),ne(xe)){for(ve.Fb=ne(xe),je=0;4>je;++je)ve.Zb[je]=ne(xe)?W(xe,7):0;for(je=0;4>je;++je)ve.Lb[je]=ne(xe)?W(xe,6):0}if(ve.Bb)for(je=0;3>je;++je)_e.jb[je]=ne(xe)?J(xe,8):255}else ve.Bb=0;if(xe.Ka)return $a(S,3,"cannot parse segment header");if((ve=S.ed).zd=ne(xe),ve.Tb=J(xe,6),ve.wb=J(xe,3),ve.Pc=ne(xe),ve.Pc&&ne(xe)){for(_e=0;4>_e;++_e)ne(xe)&&(ve.vd[_e]=W(xe,6));for(_e=0;4>_e;++_e)ne(xe)&&(ve.od[_e]=W(xe,6))}if(S.L=ve.Tb==0?0:ve.zd?1:2,xe.Ka)return $a(S,3,"cannot parse filter header");var Fe=de;if(de=je=ee,ee=je+Fe,ve=Fe,S.Xb=(1<<J(S.m,2))-1,Fe<3*(_e=S.Xb))K=7;else{for(je+=3*_e,ve-=3*_e,Fe=0;Fe<_e;++Fe){var at=K[de+0]|K[de+1]<<8|K[de+2]<<16;at>ve&&(at=ve),Y(S.Jc[+Fe],K,je,at),je+=at,ve-=at,de+=3}Y(S.Jc[+_e],K,je,ve),K=je<ee?0:5}if(K!=0)return $a(S,K,"cannot parse partitions");for(K=J(je=S.m,7),de=ne(je)?W(je,4):0,ee=ne(je)?W(je,4):0,ve=ne(je)?W(je,4):0,_e=ne(je)?W(je,4):0,je=ne(je)?W(je,4):0,Fe=S.Qa,at=0;4>at;++at){if(Fe.Cb){var Se=Fe.Zb[at];Fe.Fb||(Se+=K)}else{if(0<at){S.pb[at]=S.pb[0];continue}Se=K}var He=S.pb[at];He.Sc[0]=Au[gs(Se+de,127)],He.Sc[1]=Eu[gs(Se+0,127)],He.Eb[0]=2*Au[gs(Se+ee,127)],He.Eb[1]=101581*Eu[gs(Se+ve,127)]>>16,8>He.Eb[1]&&(He.Eb[1]=8),He.Qc[0]=Au[gs(Se+_e,117)],He.Qc[1]=Eu[gs(Se+je,127)],He.lc=Se+je}if(!ge.Rb)return $a(S,4,"Not a key frame.");for(ne(xe),ge=S.Pa,K=0;4>K;++K){for(de=0;8>de;++de)for(ee=0;3>ee;++ee)for(ve=0;11>ve;++ve)_e=me(xe,kc[K][de][ee][ve])?J(xe,8):Cl[K][de][ee][ve],ge.Wc[K][de].Yb[ee][ve]=_e;for(de=0;17>de;++de)ge.Xc[K][de]=ge.Wc[K][Np[de]]}return S.kc=ne(xe),S.kc&&(S.Bd=J(xe,8)),S.cb=1}function Lr(S,O,K,ee,de,xe,ge){var ve=O[de].Yb[K];for(K=0;16>de;++de){if(!me(S,ve[K+0]))return de;for(;!me(S,ve[K+1]);)if(ve=O[++de].Yb[0],K=0,de==16)return 16;var je=O[de+1].Yb;if(me(S,ve[K+2])){var _e=S,Fe=0;if(me(_e,(Se=ve)[(at=K)+3]))if(me(_e,Se[at+6])){for(ve=0,at=2*(Fe=me(_e,Se[at+8]))+(Se=me(_e,Se[at+9+Fe])),Fe=0,Se=Ur[at];Se[ve];++ve)Fe+=Fe+me(_e,Se[ve]);Fe+=3+(8<<at)}else me(_e,Se[at+7])?(Fe=7+2*me(_e,165),Fe+=me(_e,145)):Fe=5+me(_e,159);else Fe=me(_e,Se[at+4])?3+me(_e,Se[at+5]):2;ve=je[2]}else Fe=1,ve=je[1];je=ge+ar[de],0>(_e=S).b&&he(_e);var at,Se=_e.b,He=(at=_e.Ca>>1)-(_e.I>>Se)>>31;--_e.b,_e.Ca+=He,_e.Ca|=1,_e.I-=(at+1&He)<<Se,xe[je]=((Fe^He)-He)*ee[(0<de)+0]}return 16}function Ln(S){var O=S.rb[S.sb-1];O.la=0,O.Na=0,n(S.zc,0,0,S.zc.length),S.ja=0}function Ls(S,O,K,ee,de){de=S[O+K+32*ee]+(de>>3),S[O+K+32*ee]=-256&de?0>de?0:255:de}function Ot(S,O,K,ee,de,xe){Ls(S,O,0,K,ee+de),Ls(S,O,1,K,ee+xe),Ls(S,O,2,K,ee-xe),Ls(S,O,3,K,ee-de)}function $t(S){return(20091*S>>16)+S}function ft(S,O,K,ee){var de,xe=0,ge=i(16);for(de=0;4>de;++de){var ve=S[O+0]+S[O+8],je=S[O+0]-S[O+8],_e=(35468*S[O+4]>>16)-$t(S[O+12]),Fe=$t(S[O+4])+(35468*S[O+12]>>16);ge[xe+0]=ve+Fe,ge[xe+1]=je+_e,ge[xe+2]=je-_e,ge[xe+3]=ve-Fe,xe+=4,O++}for(de=xe=0;4>de;++de)ve=(S=ge[xe+0]+4)+ge[xe+8],je=S-ge[xe+8],_e=(35468*ge[xe+4]>>16)-$t(ge[xe+12]),Ls(K,ee,0,0,ve+(Fe=$t(ge[xe+4])+(35468*ge[xe+12]>>16))),Ls(K,ee,1,0,je+_e),Ls(K,ee,2,0,je-_e),Ls(K,ee,3,0,ve-Fe),xe++,ee+=32}function Ca(S,O,K,ee){var de=S[O+0]+4,xe=35468*S[O+4]>>16,ge=$t(S[O+4]),ve=35468*S[O+1]>>16;Ot(K,ee,0,de+ge,S=$t(S[O+1]),ve),Ot(K,ee,1,de+xe,S,ve),Ot(K,ee,2,de-xe,S,ve),Ot(K,ee,3,de-ge,S,ve)}function dl(S,O,K,ee,de){ft(S,O,K,ee),de&&ft(S,O+16,K,ee+4)}function ul(S,O,K,ee){Rr(S,O+0,K,ee,1),Rr(S,O+32,K,ee+128,1)}function xn(S,O,K,ee){var de;for(S=S[O+0]+4,de=0;4>de;++de)for(O=0;4>O;++O)Ls(K,ee,O,de,S)}function mc(S,O,K,ee){S[O+0]&&bn(S,O+0,K,ee),S[O+16]&&bn(S,O+16,K,ee+4),S[O+32]&&bn(S,O+32,K,ee+128),S[O+48]&&bn(S,O+48,K,ee+128+4)}function Qn(S,O,K,ee){var de,xe=i(16);for(de=0;4>de;++de){var ge=S[O+0+de]+S[O+12+de],ve=S[O+4+de]+S[O+8+de],je=S[O+4+de]-S[O+8+de],_e=S[O+0+de]-S[O+12+de];xe[0+de]=ge+ve,xe[8+de]=ge-ve,xe[4+de]=_e+je,xe[12+de]=_e-je}for(de=0;4>de;++de)ge=(S=xe[0+4*de]+3)+xe[3+4*de],ve=xe[1+4*de]+xe[2+4*de],je=xe[1+4*de]-xe[2+4*de],_e=S-xe[3+4*de],K[ee+0]=ge+ve>>3,K[ee+16]=_e+je>>3,K[ee+32]=ge-ve>>3,K[ee+48]=_e-je>>3,ee+=64}function ml(S,O,K){var ee,de=O-32,xe=Is,ge=255-S[de-1];for(ee=0;ee<K;++ee){var ve,je=xe,_e=ge+S[O-1];for(ve=0;ve<K;++ve)S[O+ve]=je[_e+S[de+ve]];O+=32}}function Fi(S,O){ml(S,O,4)}function Zl(S,O){ml(S,O,8)}function Do(S,O){ml(S,O,16)}function vu(S,O){var K;for(K=0;16>K;++K)s(S,O+32*K,S,O-32,16)}function hc(S,O){var K;for(K=16;0<K;--K)n(S,O,S[O-1],16),O+=32}function fn(S,O,K){var ee;for(ee=0;16>ee;++ee)n(O,K+32*ee,S,16)}function yi(S,O){var K,ee=16;for(K=0;16>K;++K)ee+=S[O-1+32*K]+S[O+K-32];fn(ee>>5,S,O)}function Tr(S,O){var K,ee=8;for(K=0;16>K;++K)ee+=S[O-1+32*K];fn(ee>>4,S,O)}function Mn(S,O){var K,ee=8;for(K=0;16>K;++K)ee+=S[O+K-32];fn(ee>>4,S,O)}function bi(S,O){fn(128,S,O)}function ma(S,O,K){return S+2*O+K+2>>2}function Oo(S,O){var K,ee=O-32;for(ee=new Uint8Array([ma(S[ee-1],S[ee+0],S[ee+1]),ma(S[ee+0],S[ee+1],S[ee+2]),ma(S[ee+1],S[ee+2],S[ee+3]),ma(S[ee+2],S[ee+3],S[ee+4])]),K=0;4>K;++K)s(S,O+32*K,ee,0,ee.length)}function xc(S,O){var K=S[O-1],ee=S[O-1+32],de=S[O-1+64],xe=S[O-1+96];pe(S,O+0,16843009*ma(S[O-1-32],K,ee)),pe(S,O+32,16843009*ma(K,ee,de)),pe(S,O+64,16843009*ma(ee,de,xe)),pe(S,O+96,16843009*ma(de,xe,xe))}function Ql(S,O){var K,ee=4;for(K=0;4>K;++K)ee+=S[O+K-32]+S[O-1+32*K];for(ee>>=3,K=0;4>K;++K)n(S,O+32*K,ee,4)}function ei(S,O){var K=S[O-1+0],ee=S[O-1+32],de=S[O-1+64],xe=S[O-1-32],ge=S[O+0-32],ve=S[O+1-32],je=S[O+2-32],_e=S[O+3-32];S[O+0+96]=ma(ee,de,S[O-1+96]),S[O+1+96]=S[O+0+64]=ma(K,ee,de),S[O+2+96]=S[O+1+64]=S[O+0+32]=ma(xe,K,ee),S[O+3+96]=S[O+2+64]=S[O+1+32]=S[O+0+0]=ma(ge,xe,K),S[O+3+64]=S[O+2+32]=S[O+1+0]=ma(ve,ge,xe),S[O+3+32]=S[O+2+0]=ma(je,ve,ge),S[O+3+0]=ma(_e,je,ve)}function ti(S,O){var K=S[O+1-32],ee=S[O+2-32],de=S[O+3-32],xe=S[O+4-32],ge=S[O+5-32],ve=S[O+6-32],je=S[O+7-32];S[O+0+0]=ma(S[O+0-32],K,ee),S[O+1+0]=S[O+0+32]=ma(K,ee,de),S[O+2+0]=S[O+1+32]=S[O+0+64]=ma(ee,de,xe),S[O+3+0]=S[O+2+32]=S[O+1+64]=S[O+0+96]=ma(de,xe,ge),S[O+3+32]=S[O+2+64]=S[O+1+96]=ma(xe,ge,ve),S[O+3+64]=S[O+2+96]=ma(ge,ve,je),S[O+3+96]=ma(ve,je,je)}function pn(S,O){var K=S[O-1+0],ee=S[O-1+32],de=S[O-1+64],xe=S[O-1-32],ge=S[O+0-32],ve=S[O+1-32],je=S[O+2-32],_e=S[O+3-32];S[O+0+0]=S[O+1+64]=xe+ge+1>>1,S[O+1+0]=S[O+2+64]=ge+ve+1>>1,S[O+2+0]=S[O+3+64]=ve+je+1>>1,S[O+3+0]=je+_e+1>>1,S[O+0+96]=ma(de,ee,K),S[O+0+64]=ma(ee,K,xe),S[O+0+32]=S[O+1+96]=ma(K,xe,ge),S[O+1+32]=S[O+2+96]=ma(xe,ge,ve),S[O+2+32]=S[O+3+96]=ma(ge,ve,je),S[O+3+32]=ma(ve,je,_e)}function vi(S,O){var K=S[O+0-32],ee=S[O+1-32],de=S[O+2-32],xe=S[O+3-32],ge=S[O+4-32],ve=S[O+5-32],je=S[O+6-32],_e=S[O+7-32];S[O+0+0]=K+ee+1>>1,S[O+1+0]=S[O+0+64]=ee+de+1>>1,S[O+2+0]=S[O+1+64]=de+xe+1>>1,S[O+3+0]=S[O+2+64]=xe+ge+1>>1,S[O+0+32]=ma(K,ee,de),S[O+1+32]=S[O+0+96]=ma(ee,de,xe),S[O+2+32]=S[O+1+96]=ma(de,xe,ge),S[O+3+32]=S[O+2+96]=ma(xe,ge,ve),S[O+3+64]=ma(ge,ve,je),S[O+3+96]=ma(ve,je,_e)}function fc(S,O){var K=S[O-1+0],ee=S[O-1+32],de=S[O-1+64],xe=S[O-1+96];S[O+0+0]=K+ee+1>>1,S[O+2+0]=S[O+0+32]=ee+de+1>>1,S[O+2+32]=S[O+0+64]=de+xe+1>>1,S[O+1+0]=ma(K,ee,de),S[O+3+0]=S[O+1+32]=ma(ee,de,xe),S[O+3+32]=S[O+1+64]=ma(de,xe,xe),S[O+3+64]=S[O+2+64]=S[O+0+96]=S[O+1+96]=S[O+2+96]=S[O+3+96]=xe}function qi(S,O){var K=S[O-1+0],ee=S[O-1+32],de=S[O-1+64],xe=S[O-1+96],ge=S[O-1-32],ve=S[O+0-32],je=S[O+1-32],_e=S[O+2-32];S[O+0+0]=S[O+2+32]=K+ge+1>>1,S[O+0+32]=S[O+2+64]=ee+K+1>>1,S[O+0+64]=S[O+2+96]=de+ee+1>>1,S[O+0+96]=xe+de+1>>1,S[O+3+0]=ma(ve,je,_e),S[O+2+0]=ma(ge,ve,je),S[O+1+0]=S[O+3+32]=ma(K,ge,ve),S[O+1+32]=S[O+3+64]=ma(ee,K,ge),S[O+1+64]=S[O+3+96]=ma(de,ee,K),S[O+1+96]=ma(xe,de,ee)}function Lo(S,O){var K;for(K=0;8>K;++K)s(S,O+32*K,S,O-32,8)}function Pe(S,O){var K;for(K=0;8>K;++K)n(S,O,S[O-1],8),O+=32}function Ct(S,O,K){var ee;for(ee=0;8>ee;++ee)n(O,K+32*ee,S,8)}function wa(S,O){var K,ee=8;for(K=0;8>K;++K)ee+=S[O+K-32]+S[O-1+32*K];Ct(ee>>4,S,O)}function Ya(S,O){var K,ee=4;for(K=0;8>K;++K)ee+=S[O+K-32];Ct(ee>>3,S,O)}function ai(S,O){var K,ee=4;for(K=0;8>K;++K)ee+=S[O-1+32*K];Ct(ee>>3,S,O)}function hl(S,O){Ct(128,S,O)}function ri(S,O,K){var ee=S[O-K],de=S[O+0],xe=3*(de-ee)+Rm[1020+S[O-2*K]-S[O+K]],ge=wc[112+(xe+4>>3)];S[O-K]=Is[255+ee+wc[112+(xe+3>>3)]],S[O+0]=Is[255+de-ge]}function pc(S,O,K,ee){var de=S[O+0],xe=S[O+K];return Ci[255+S[O-2*K]-S[O-K]]>ee||Ci[255+xe-de]>ee}function gc(S,O,K,ee){return 4*Ci[255+S[O-K]-S[O+0]]+Ci[255+S[O-2*K]-S[O+K]]<=ee}function Mo(S,O,K,ee,de){var xe=S[O-3*K],ge=S[O-2*K],ve=S[O-K],je=S[O+0],_e=S[O+K],Fe=S[O+2*K],at=S[O+3*K];return 4*Ci[255+ve-je]+Ci[255+ge-_e]>ee?0:Ci[255+S[O-4*K]-xe]<=de&&Ci[255+xe-ge]<=de&&Ci[255+ge-ve]<=de&&Ci[255+at-Fe]<=de&&Ci[255+Fe-_e]<=de&&Ci[255+_e-je]<=de}function eo(S,O,K,ee){var de=2*ee+1;for(ee=0;16>ee;++ee)gc(S,O+ee,K,de)&&ri(S,O+ee,K)}function xl(S,O,K,ee){var de=2*ee+1;for(ee=0;16>ee;++ee)gc(S,O+ee*K,1,de)&&ri(S,O+ee*K,1)}function ud(S,O,K,ee){var de;for(de=3;0<de;--de)eo(S,O+=4*K,K,ee)}function ju(S,O,K,ee){var de;for(de=3;0<de;--de)xl(S,O+=4,K,ee)}function si(S,O,K,ee,de,xe,ge,ve){for(xe=2*xe+1;0<de--;){if(Mo(S,O,K,xe,ge))if(pc(S,O,K,ve))ri(S,O,K);else{var je=S,_e=O,Fe=K,at=je[_e-2*Fe],Se=je[_e-Fe],He=je[_e+0],Qe=je[_e+Fe],ht=je[_e+2*Fe],tt=27*(pt=Rm[1020+3*(He-Se)+Rm[1020+at-Qe]])+63>>7,gt=18*pt+63>>7,pt=9*pt+63>>7;je[_e-3*Fe]=Is[255+je[_e-3*Fe]+pt],je[_e-2*Fe]=Is[255+at+gt],je[_e-Fe]=Is[255+Se+tt],je[_e+0]=Is[255+He-tt],je[_e+Fe]=Is[255+Qe-gt],je[_e+2*Fe]=Is[255+ht-pt]}O+=ee}}function fl(S,O,K,ee,de,xe,ge,ve){for(xe=2*xe+1;0<de--;){if(Mo(S,O,K,xe,ge))if(pc(S,O,K,ve))ri(S,O,K);else{var je=S,_e=O,Fe=K,at=je[_e-Fe],Se=je[_e+0],He=je[_e+Fe],Qe=wc[112+(4+(ht=3*(Se-at))>>3)],ht=wc[112+(ht+3>>3)],tt=Qe+1>>1;je[_e-2*Fe]=Is[255+je[_e-2*Fe]+tt],je[_e-Fe]=Is[255+at+ht],je[_e+0]=Is[255+Se-Qe],je[_e+Fe]=Is[255+He-tt]}O+=ee}}function U(S,O,K,ee,de,xe){si(S,O,K,1,16,ee,de,xe)}function ue(S,O,K,ee,de,xe){si(S,O,1,K,16,ee,de,xe)}function Ce(S,O,K,ee,de,xe){var ge;for(ge=3;0<ge;--ge)fl(S,O+=4*K,K,1,16,ee,de,xe)}function Be(S,O,K,ee,de,xe){var ge;for(ge=3;0<ge;--ge)fl(S,O+=4,1,K,16,ee,de,xe)}function Ze(S,O,K,ee,de,xe,ge,ve){si(S,O,de,1,8,xe,ge,ve),si(K,ee,de,1,8,xe,ge,ve)}function yt(S,O,K,ee,de,xe,ge,ve){si(S,O,1,de,8,xe,ge,ve),si(K,ee,1,de,8,xe,ge,ve)}function _t(S,O,K,ee,de,xe,ge,ve){fl(S,O+4*de,de,1,8,xe,ge,ve),fl(K,ee+4*de,de,1,8,xe,ge,ve)}function Kt(S,O,K,ee,de,xe,ge,ve){fl(S,O+4,1,de,8,xe,ge,ve),fl(K,ee+4,1,de,8,xe,ge,ve)}function ra(){this.ba=new It,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ze,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function pa(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Sa(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ga(){this.ua=0,this.Wa=new ce,this.vb=new ce,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new L}function Mr(){this.xb=this.a=0,this.l=new cl,this.ca=new It,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ga,this.ab=0,this.gc=o(4,Sa),this.Oc=0}function cs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new cl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ir(S,O,K,ee,de,xe,ge){for(S=S==null?0:S[O+0],O=0;O<ge;++O)de[xe+O]=S+K[ee+O]&255,S=de[xe+O]}function ds(S,O,K,ee,de,xe,ge){var ve;if(S==null)ir(null,null,K,ee,de,xe,ge);else for(ve=0;ve<ge;++ve)de[xe+ve]=S[O+ve]+K[ee+ve]&255}function us(S,O,K,ee,de,xe,ge){if(S==null)ir(null,null,K,ee,de,xe,ge);else{var ve,je=S[O+0],_e=je,Fe=je;for(ve=0;ve<ge;++ve)_e=Fe+(je=S[O+ve])-_e,Fe=K[ee+ve]+(-256&_e?0>_e?0:255:_e)&255,_e=je,de[xe+ve]=Fe}}function Hs(S,O,K,ee){var de=O.width,xe=O.o;if(a(S!=null&&O!=null),0>K||0>=ee||K+ee>xe)return null;if(!S.Cc){if(S.ga==null){var ge;if(S.ga=new cs,(ge=S.ga==null)||(ge=O.width*O.o,a(S.Gb.length==0),S.Gb=i(ge),S.Uc=0,S.Gb==null?ge=0:(S.mb=S.Gb,S.nb=S.Uc,S.rc=null,ge=1),ge=!ge),!ge){ge=S.ga;var ve=S.Fa,je=S.P,_e=S.qc,Fe=S.mb,at=S.nb,Se=je+1,He=_e-1,Qe=ge.l;if(a(ve!=null&&Fe!=null&&O!=null),kl[0]=null,kl[1]=ir,kl[2]=ds,kl[3]=us,ge.ca=Fe,ge.tb=at,ge.c=O.width,ge.i=O.height,a(0<ge.c&&0<ge.i),1>=_e)O=0;else if(ge.$a=3&ve[je+0],ge.Z=ve[je+0]>>2&3,ge.Lc=ve[je+0]>>4&3,je=ve[je+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||je)O=0;else if(Qe.put=Yt,Qe.ac=Ka,Qe.bc=er,Qe.ma=ge,Qe.width=O.width,Qe.height=O.height,Qe.Da=O.Da,Qe.v=O.v,Qe.va=O.va,Qe.j=O.j,Qe.o=O.o,ge.$a)e:{a(ge.$a==1),O=Ra();t:for(;;){if(O==null){O=0;break e}if(a(ge!=null),ge.mc=O,O.c=ge.c,O.i=ge.i,O.l=ge.l,O.l.ma=ge,O.l.width=ge.c,O.l.height=ge.i,O.a=0,X(O.m,ve,Se,He),!Ps(ge.c,ge.i,1,O,null)||(O.ab==1&&O.gc[0].hc==3&&Ar(O.s)?(ge.ic=1,ve=O.c*O.i,O.Ta=null,O.Ua=0,O.V=i(ve),O.Ba=0,O.V==null?(O.a=1,O=0):O=1):(ge.ic=0,O=Xn(O,ge.c)),!O))break t;O=1;break e}ge.mc=null,O=0}else O=He>=ge.c*ge.i;ge=!O}if(ge)return null;S.ga.Lc!=1?S.Ga=0:ee=xe-K}a(S.ga!=null),a(K+ee<=xe);e:{if(O=(ve=S.ga).c,xe=ve.l.o,ve.$a==0){if(Se=S.rc,He=S.Vc,Qe=S.Fa,je=S.P+1+K*O,_e=S.mb,Fe=S.nb+K*O,a(je<=S.P+S.qc),ve.Z!=0)for(a(kl[ve.Z]!=null),ge=0;ge<ee;++ge)kl[ve.Z](Se,He,Qe,je,_e,Fe,O),Se=_e,He=Fe,Fe+=O,je+=O;else for(ge=0;ge<ee;++ge)s(_e,Fe,Qe,je,O),Se=_e,He=Fe,Fe+=O,je+=O;S.rc=Se,S.Vc=He}else{if(a(ve.mc!=null),O=K+ee,a((ge=ve.mc)!=null),a(O<=ge.i),ge.C>=O)O=1;else if(ve.ic||yc(),ve.ic){ve=ge.V,Se=ge.Ba,He=ge.c;var ht=ge.i,tt=(Qe=1,je=ge.$/He,_e=ge.$%He,Fe=ge.m,at=ge.s,ge.$),gt=He*ht,pt=He*O,kt=at.wc,wt=tt<pt?Tt(at,_e,je):null;a(tt<=gt),a(O<=ht),a(Ar(at));t:for(;;){for(;!Fe.h&&tt<pt;){if(_e&kt||(wt=Tt(at,_e,je)),a(wt!=null),fe(Fe),256>(ht=zt(wt.G[0],wt.H[0],Fe)))ve[Se+tt]=ht,++tt,++_e>=He&&(_e=0,++je<=O&&!(je%16)&&Er(ge,je));else{if(!(280>ht)){Qe=0;break t}ht=Et(ht-256,Fe);var ea,Ft=zt(wt.G[4],wt.H[4],Fe);if(fe(Fe),!(tt>=(Ft=na(He,Ft=Et(Ft,Fe)))&&gt-tt>=ht)){Qe=0;break t}for(ea=0;ea<ht;++ea)ve[Se+tt+ea]=ve[Se+tt+ea-Ft];for(tt+=ht,_e+=ht;_e>=He;)_e-=He,++je<=O&&!(je%16)&&Er(ge,je);tt<pt&&_e&kt&&(wt=Tt(at,_e,je))}a(Fe.h==Z(Fe))}Er(ge,je>O?O:je);break t}!Qe||Fe.h&&tt<gt?(Qe=0,ge.a=Fe.h?5:3):ge.$=tt,O=Qe}else O=ls(ge,ge.V,ge.Ba,ge.c,ge.i,O,Us);if(!O){ee=0;break e}}K+ee>=xe&&(S.Cc=1),ee=1}if(!ee)return null;if(S.Cc&&((ee=S.ga)!=null&&(ee.mc=null),S.ga=null,0<S.Ga))return alert("todo:WebPDequantizeLevels"),null}return S.nb+K*de}function to(S,O,K,ee,de,xe){for(;0<de--;){var ge,ve=S,je=O+(K?1:0),_e=S,Fe=O+(K?0:3);for(ge=0;ge<ee;++ge){var at=_e[Fe+4*ge];at!=255&&(at*=32897,ve[je+4*ge+0]=ve[je+4*ge+0]*at>>23,ve[je+4*ge+1]=ve[je+4*ge+1]*at>>23,ve[je+4*ge+2]=ve[je+4*ge+2]*at>>23)}O+=xe}}function Ro(S,O,K,ee,de){for(;0<ee--;){var xe;for(xe=0;xe<K;++xe){var ge=S[O+2*xe+0],ve=15&(_e=S[O+2*xe+1]),je=4369*ve,_e=(240&_e|_e>>4)*je>>16;S[O+2*xe+0]=(240&ge|ge>>4)*je>>16&240|(15&ge|ge<<4)*je>>16>>4&15,S[O+2*xe+1]=240&_e|ve}O+=de}}function ix(S,O,K,ee,de,xe,ge,ve){var je,_e,Fe=255;for(_e=0;_e<de;++_e){for(je=0;je<ee;++je){var at=S[O+je];xe[ge+4*je]=at,Fe&=at}O+=K,ge+=ve}return Fe!=255}function Pm(S,O,K,ee,de){var xe;for(xe=0;xe<de;++xe)K[ee+xe]=S[O+xe]>>8}function yc(){bd=to,ii=Ro,li=ix,jc=Pm}function Ui(S,O,K){_[S]=function(ee,de,xe,ge,ve,je,_e,Fe,at,Se,He,Qe,ht,tt,gt,pt,kt){var wt,ea=kt-1>>1,Ft=ve[je+0]|_e[Fe+0]<<16,ba=at[Se+0]|He[Qe+0]<<16;a(ee!=null);var Ut=3*Ft+ba+131074>>2;for(O(ee[de+0],255&Ut,Ut>>16,ht,tt),xe!=null&&(Ut=3*ba+Ft+131074>>2,O(xe[ge+0],255&Ut,Ut>>16,gt,pt)),wt=1;wt<=ea;++wt){var Ia=ve[je+wt]|_e[Fe+wt]<<16,ms=at[Se+wt]|He[Qe+wt]<<16,ga=Ft+Ia+ba+ms+524296,Gt=ga+2*(Ia+ba)>>3;Ut=Gt+Ft>>1,Ft=(ga=ga+2*(Ft+ms)>>3)+Ia>>1,O(ee[de+2*wt-1],255&Ut,Ut>>16,ht,tt+(2*wt-1)*K),O(ee[de+2*wt-0],255&Ft,Ft>>16,ht,tt+(2*wt-0)*K),xe!=null&&(Ut=ga+ba>>1,Ft=Gt+ms>>1,O(xe[ge+2*wt-1],255&Ut,Ut>>16,gt,pt+(2*wt-1)*K),O(xe[ge+2*wt+0],255&Ft,Ft>>16,gt,pt+(2*wt+0)*K)),Ft=Ia,ba=ms}1&kt||(Ut=3*Ft+ba+131074>>2,O(ee[de+kt-1],255&Ut,Ut>>16,ht,tt+(kt-1)*K),xe!=null&&(Ut=3*ba+Ft+131074>>2,O(xe[ge+kt-1],255&Ut,Ut>>16,gt,pt+(kt-1)*K)))}}function Nu(){zs[rn]=uo,zs[vd]=Al,zs[_l]=Wo,zs[Cu]=$m,zs[Sc]=Bm,zs[no]=wd,zs[Im]=Fm,zs[ku]=Al,zs[qo]=$m,zs[io]=Bm,zs[jd]=wd}function Io(S){return S&-16384?0>S?0:255:S>>hb}function ji(S,O){return Io((19077*S>>8)+(26149*O>>8)-14234)}function Ms(S,O,K){return Io((19077*S>>8)-(6419*O>>8)-(13320*K>>8)+8708)}function pl(S,O){return Io((19077*S>>8)+(33050*O>>8)-17685)}function gl(S,O,K,ee,de){ee[de+0]=ji(S,K),ee[de+1]=Ms(S,O,K),ee[de+2]=pl(S,O)}function bc(S,O,K,ee,de){ee[de+0]=pl(S,O),ee[de+1]=Ms(S,O,K),ee[de+2]=ji(S,K)}function md(S,O,K,ee,de){var xe=Ms(S,O,K);O=xe<<3&224|pl(S,O)>>3,ee[de+0]=248&ji(S,K)|xe>>5,ee[de+1]=O}function an(S,O,K,ee,de){var xe=240&pl(S,O)|15;ee[de+0]=240&ji(S,K)|Ms(S,O,K)>>4,ee[de+1]=xe}function ao(S,O,K,ee,de){ee[de+0]=255,gl(S,O,K,ee,de+1)}function hd(S,O,K,ee,de){bc(S,O,K,ee,de),ee[de+3]=255}function Dm(S,O,K,ee,de){gl(S,O,K,ee,de),ee[de+3]=255}function gs(S,O){return 0>S?0:S>O?O:S}function ni(S,O,K){_[S]=function(ee,de,xe,ge,ve,je,_e,Fe,at){for(var Se=Fe+(-2&at)*K;Fe!=Se;)O(ee[de+0],xe[ge+0],ve[je+0],_e,Fe),O(ee[de+1],xe[ge+0],ve[je+0],_e,Fe+K),de+=2,++ge,++je,Fe+=2*K;1&at&&O(ee[de+0],xe[ge+0],ve[je+0],_e,Fe)}}function xd(S,O,K){return K==0?S==0?O==0?6:5:O==0?4:0:K}function ro(S,O,K,ee,de){switch(S>>>30){case 3:Rr(O,K,ee,de,0);break;case 2:Sl(O,K,ee,de);break;case 1:bn(O,K,ee,de)}}function Ni(S,O){var K,ee,de=O.M,xe=O.Nb,ge=S.oc,ve=S.pc+40,je=S.oc,_e=S.pc+584,Fe=S.oc,at=S.pc+600;for(K=0;16>K;++K)ge[ve+32*K-1]=129;for(K=0;8>K;++K)je[_e+32*K-1]=129,Fe[at+32*K-1]=129;for(0<de?ge[ve-1-32]=je[_e-1-32]=Fe[at-1-32]=129:(n(ge,ve-32-1,127,21),n(je,_e-32-1,127,9),n(Fe,at-32-1,127,9)),ee=0;ee<S.za;++ee){var Se=O.ya[O.aa+ee];if(0<ee){for(K=-1;16>K;++K)s(ge,ve+32*K-4,ge,ve+32*K+12,4);for(K=-1;8>K;++K)s(je,_e+32*K-4,je,_e+32*K+4,4),s(Fe,at+32*K-4,Fe,at+32*K+4,4)}var He=S.Gd,Qe=S.Hd+ee,ht=Se.ad,tt=Se.Hc;if(0<de&&(s(ge,ve-32,He[Qe].y,0,16),s(je,_e-32,He[Qe].f,0,8),s(Fe,at-32,He[Qe].ea,0,8)),Se.Za){var gt=ge,pt=ve-32+16;for(0<de&&(ee>=S.za-1?n(gt,pt,He[Qe].y[15],4):s(gt,pt,He[Qe+1].y,0,4)),K=0;4>K;K++)gt[pt+128+K]=gt[pt+256+K]=gt[pt+384+K]=gt[pt+0+K];for(K=0;16>K;++K,tt<<=2)gt=ge,pt=ve+Ac[K],vn[Se.Ob[K]](gt,pt),ro(tt,ht,16*+K,gt,pt)}else if(gt=xd(ee,de,Se.Ob[0]),co[gt](ge,ve),tt!=0)for(K=0;16>K;++K,tt<<=2)ro(tt,ht,16*+K,ge,ve+Ac[K]);for(K=Se.Gc,gt=xd(ee,de,Se.Dd),ci[gt](je,_e),ci[gt](Fe,at),tt=ht,gt=je,pt=_e,255&(Se=0|K)&&(170&Se?Si(tt,256,gt,pt):vc(tt,256,gt,pt)),Se=Fe,tt=at,255&(K>>=8)&&(170&K?Si(ht,320,Se,tt):vc(ht,320,Se,tt)),de<S.Ub-1&&(s(He[Qe].y,0,ge,ve+480,16),s(He[Qe].f,0,je,_e+224,8),s(He[Qe].ea,0,Fe,at+224,8)),K=8*xe*S.B,He=S.sa,Qe=S.ta+16*ee+16*xe*S.R,ht=S.qa,Se=S.ra+8*ee+K,tt=S.Ha,gt=S.Ia+8*ee+K,K=0;16>K;++K)s(He,Qe+K*S.R,ge,ve+32*K,16);for(K=0;8>K;++K)s(ht,Se+K*S.B,je,_e+32*K,8),s(tt,gt+K*S.B,Fe,at+32*K,8)}}function fd(S,O,K,ee,de,xe,ge,ve,je){var _e=[0],Fe=[0],at=0,Se=je!=null?je.kd:0,He=je??new pa;if(S==null||12>K)return 7;He.data=S,He.w=O,He.ha=K,O=[O],K=[K],He.gb=[He.gb];e:{var Qe=O,ht=K,tt=He.gb;if(a(S!=null),a(ht!=null),a(tt!=null),tt[0]=0,12<=ht[0]&&!r(S,Qe[0],"RIFF")){if(r(S,Qe[0]+8,"WEBP")){tt=3;break e}var gt=Ae(S,Qe[0]+4);if(12>gt||4294967286<gt){tt=3;break e}if(Se&&gt>ht[0]-8){tt=7;break e}tt[0]=gt,Qe[0]+=12,ht[0]-=12}tt=0}if(tt!=0)return tt;for(gt=0<He.gb[0],K=K[0];;){e:{var pt=S;ht=O,tt=K;var kt=_e,wt=Fe,ea=Qe=[0];if((Ut=at=[at])[0]=0,8>tt[0])tt=7;else{if(!r(pt,ht[0],"VP8X")){if(Ae(pt,ht[0]+4)!=10){tt=3;break e}if(18>tt[0]){tt=7;break e}var Ft=Ae(pt,ht[0]+8),ba=1+ke(pt,ht[0]+12);if(2147483648<=ba*(pt=1+ke(pt,ht[0]+15))){tt=3;break e}ea!=null&&(ea[0]=Ft),kt!=null&&(kt[0]=ba),wt!=null&&(wt[0]=pt),ht[0]+=18,tt[0]-=18,Ut[0]=1}tt=0}}if(at=at[0],Qe=Qe[0],tt!=0)return tt;if(ht=!!(2&Qe),!gt&&at)return 3;if(xe!=null&&(xe[0]=!!(16&Qe)),ge!=null&&(ge[0]=ht),ve!=null&&(ve[0]=0),ge=_e[0],Qe=Fe[0],at&&ht&&je==null){tt=0;break}if(4>K){tt=7;break}if(gt&&at||!gt&&!at&&!r(S,O[0],"ALPH")){K=[K],He.na=[He.na],He.P=[He.P],He.Sa=[He.Sa];e:{Ft=S,tt=O,gt=K;var Ut=He.gb;kt=He.na,wt=He.P,ea=He.Sa,ba=22,a(Ft!=null),a(gt!=null),pt=tt[0];var Ia=gt[0];for(a(kt!=null),a(ea!=null),kt[0]=null,wt[0]=null,ea[0]=0;;){if(tt[0]=pt,gt[0]=Ia,8>Ia){tt=7;break e}var ms=Ae(Ft,pt+4);if(4294967286<ms){tt=3;break e}var ga=8+ms+1&-2;if(ba+=ga,0<Ut&&ba>Ut){tt=3;break e}if(!r(Ft,pt,"VP8 ")||!r(Ft,pt,"VP8L")){tt=0;break e}if(Ia[0]<ga){tt=7;break e}r(Ft,pt,"ALPH")||(kt[0]=Ft,wt[0]=pt+8,ea[0]=ms),pt+=ga,Ia-=ga}}if(K=K[0],He.na=He.na[0],He.P=He.P[0],He.Sa=He.Sa[0],tt!=0)break}K=[K],He.Ja=[He.Ja],He.xa=[He.xa];e:if(Ut=S,tt=O,gt=K,kt=He.gb[0],wt=He.Ja,ea=He.xa,Ft=tt[0],pt=!r(Ut,Ft,"VP8 "),ba=!r(Ut,Ft,"VP8L"),a(Ut!=null),a(gt!=null),a(wt!=null),a(ea!=null),8>gt[0])tt=7;else{if(pt||ba){if(Ut=Ae(Ut,Ft+4),12<=kt&&Ut>kt-12){tt=3;break e}if(Se&&Ut>gt[0]-8){tt=7;break e}wt[0]=Ut,tt[0]+=8,gt[0]-=8,ea[0]=ba}else ea[0]=5<=gt[0]&&Ut[Ft+0]==47&&!(Ut[Ft+4]>>5),wt[0]=gt[0];tt=0}if(K=K[0],He.Ja=He.Ja[0],He.xa=He.xa[0],O=O[0],tt!=0)break;if(4294967286<He.Ja)return 3;if(ve==null||ht||(ve[0]=He.xa?2:1),ge=[ge],Qe=[Qe],He.xa){if(5>K){tt=7;break}ve=ge,Se=Qe,ht=xe,S==null||5>K?S=0:5<=K&&S[O+0]==47&&!(S[O+4]>>5)?(gt=[0],Ut=[0],kt=[0],X(wt=new G,S,O,K),Ye(wt,gt,Ut,kt)?(ve!=null&&(ve[0]=gt[0]),Se!=null&&(Se[0]=Ut[0]),ht!=null&&(ht[0]=kt[0]),S=1):S=0):S=0}else{if(10>K){tt=7;break}ve=Qe,S==null||10>K||!gi(S,O+3,K-3)?S=0:(Se=S[O+0]|S[O+1]<<8|S[O+2]<<16,ht=16383&(S[O+7]<<8|S[O+6]),S=16383&(S[O+9]<<8|S[O+8]),1&Se||3<(Se>>1&7)||!(Se>>4&1)||Se>>5>=He.Ja||!ht||!S?S=0:(ge&&(ge[0]=ht),ve&&(ve[0]=S),S=1))}if(!S||(ge=ge[0],Qe=Qe[0],at&&(_e[0]!=ge||Fe[0]!=Qe)))return 3;je!=null&&(je[0]=He,je.offset=O-je.w,a(4294967286>O-je.w),a(je.offset==je.ha-K));break}return tt==0||tt==7&&at&&je==null?(xe!=null&&(xe[0]|=He.na!=null&&0<He.na.length),ee!=null&&(ee[0]=ge),de!=null&&(de[0]=Qe),0):tt}function Ys(S,O,K){var ee=O.width,de=O.height,xe=0,ge=0,ve=ee,je=de;if(O.Da=S!=null&&0<S.Da,O.Da&&(ve=S.cd,je=S.bd,xe=S.v,ge=S.j,11>K||(xe&=-2,ge&=-2),0>xe||0>ge||0>=ve||0>=je||xe+ve>ee||ge+je>de))return 0;if(O.v=xe,O.j=ge,O.va=xe+ve,O.o=ge+je,O.U=ve,O.T=je,O.da=S!=null&&0<S.da,O.da){if(!De(ve,je,K=[S.ib],xe=[S.hb]))return 0;O.ib=K[0],O.hb=xe[0]}return O.ob=S!=null&&S.ob,O.Kb=S==null||!S.Sd,O.da&&(O.ob=O.ib<3*ee/4&&O.hb<3*de/4,O.Kb=0),1}function gn(S){if(S==null)return 2;if(11>S.S){var O=S.f.RGBA;O.fb+=(S.height-1)*O.A,O.A=-O.A}else O=S.f.kb,S=S.height,O.O+=(S-1)*O.fa,O.fa=-O.fa,O.N+=(S-1>>1)*O.Ab,O.Ab=-O.Ab,O.W+=(S-1>>1)*O.Db,O.Db=-O.Db,O.F!=null&&(O.J+=(S-1)*O.lb,O.lb=-O.lb);return 0}function zo(S,O,K,ee){if(ee==null||0>=S||0>=O)return 2;if(K!=null){if(K.Da){var de=K.cd,xe=K.bd,ge=-2&K.v,ve=-2&K.j;if(0>ge||0>ve||0>=de||0>=xe||ge+de>S||ve+xe>O)return 2;S=de,O=xe}if(K.da){if(!De(S,O,de=[K.ib],xe=[K.hb]))return 2;S=de[0],O=xe[0]}}ee.width=S,ee.height=O;e:{var je=ee.width,_e=ee.height;if(S=ee.S,0>=je||0>=_e||!(S>=rn&&13>S))S=2;else{if(0>=ee.Rd&&ee.sd==null){ge=xe=de=O=0;var Fe=(ve=je*Cp[S])*_e;if(11>S||(xe=(_e+1)/2*(O=(je+1)/2),S==12&&(ge=(de=je)*_e)),(_e=i(Fe+2*xe+ge))==null){S=1;break e}ee.sd=_e,11>S?((je=ee.f.RGBA).eb=_e,je.fb=0,je.A=ve,je.size=Fe):((je=ee.f.kb).y=_e,je.O=0,je.fa=ve,je.Fd=Fe,je.f=_e,je.N=0+Fe,je.Ab=O,je.Cd=xe,je.ea=_e,je.W=0+Fe+xe,je.Db=O,je.Ed=xe,S==12&&(je.F=_e,je.J=0+Fe+2*xe),je.Tc=ge,je.lb=de)}if(O=1,de=ee.S,xe=ee.width,ge=ee.height,de>=rn&&13>de)if(11>de)S=ee.f.RGBA,O&=(ve=Math.abs(S.A))*(ge-1)+xe<=S.size,O&=ve>=xe*Cp[de],O&=S.eb!=null;else{S=ee.f.kb,ve=(xe+1)/2,Fe=(ge+1)/2,je=Math.abs(S.fa),_e=Math.abs(S.Ab);var at=Math.abs(S.Db),Se=Math.abs(S.lb),He=Se*(ge-1)+xe;O&=je*(ge-1)+xe<=S.Fd,O&=_e*(Fe-1)+ve<=S.Cd,O=(O&=at*(Fe-1)+ve<=S.Ed)&je>=xe&_e>=ve&at>=ve,O&=S.y!=null,O&=S.f!=null,O&=S.ea!=null,de==12&&(O&=Se>=xe,O&=He<=S.Tc,O&=S.F!=null)}else O=0;S=O?0:2}}return S!=0||K!=null&&K.fd&&(S=gn(ee)),S}var wi=64,yl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],pd=24,so=32,qr=8,lx=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ke("Predictor0","PredictorAdd0"),_.Predictor0=function(){return 4278190080},_.Predictor1=function(S){return S},_.Predictor2=function(S,O,K){return O[K+0]},_.Predictor3=function(S,O,K){return O[K+1]},_.Predictor4=function(S,O,K){return O[K-1]},_.Predictor5=function(S,O,K){return Le(Le(S,O[K+1]),O[K+0])},_.Predictor6=function(S,O,K){return Le(S,O[K-1])},_.Predictor7=function(S,O,K){return Le(S,O[K+0])},_.Predictor8=function(S,O,K){return Le(O[K-1],O[K+0])},_.Predictor9=function(S,O,K){return Le(O[K+0],O[K+1])},_.Predictor10=function(S,O,K){return Le(Le(S,O[K-1]),Le(O[K+0],O[K+1]))},_.Predictor11=function(S,O,K){var ee=O[K+0];return 0>=ct(ee>>24&255,S>>24&255,(O=O[K-1])>>24&255)+ct(ee>>16&255,S>>16&255,O>>16&255)+ct(ee>>8&255,S>>8&255,O>>8&255)+ct(255&ee,255&S,255&O)?ee:S},_.Predictor12=function(S,O,K){var ee=O[K+0];return(Oe((S>>24&255)+(ee>>24&255)-((O=O[K-1])>>24&255))<<24|Oe((S>>16&255)+(ee>>16&255)-(O>>16&255))<<16|Oe((S>>8&255)+(ee>>8&255)-(O>>8&255))<<8|Oe((255&S)+(255&ee)-(255&O)))>>>0},_.Predictor13=function(S,O,K){var ee=O[K-1];return($e((S=Le(S,O[K+0]))>>24&255,ee>>24&255)<<24|$e(S>>16&255,ee>>16&255)<<16|$e(S>>8&255,ee>>8&255)<<8|$e(255&S,255&ee))>>>0};var bl=_.PredictorAdd0;_.PredictorAdd1=Nt,Ke("Predictor2","PredictorAdd2"),Ke("Predictor3","PredictorAdd3"),Ke("Predictor4","PredictorAdd4"),Ke("Predictor5","PredictorAdd5"),Ke("Predictor6","PredictorAdd6"),Ke("Predictor7","PredictorAdd7"),Ke("Predictor8","PredictorAdd8"),Ke("Predictor9","PredictorAdd9"),Ke("Predictor10","PredictorAdd10"),Ke("Predictor11","PredictorAdd11"),Ke("Predictor12","PredictorAdd12"),Ke("Predictor13","PredictorAdd13");var vl=_.PredictorAdd2;Ie("ColorIndexInverseTransform","MapARGB","32b",function(S){return S>>8&255},function(S){return S}),Ie("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(S){return S},function(S){return S>>8&255});var gd,wu=_.ColorIndexInverseTransform,Rs=_.MapARGB,jl=_.VP8LColorIndexInverseTransformAlpha,$o=_.MapAlpha,Bo=_.VP8LPredictorsAdd=[];Bo.length=16,(_.VP8LPredictors=[]).length=16,(_.VP8LPredictorsAdd_C=[]).length=16,(_.VP8LPredictors_C=[]).length=16;var Nl,yd,yn,wl,tr,lr,Nr,Rr,Sl,Si,bn,vc,ox,Fo,cx,dx,ux,yp,bp,vp,mx,hx,Om,_i,bd,ii,li,jc,Lm=i(511),Su=i(2041),_u=i(225),Mm=i(767),Nc=0,Rm=Su,wc=_u,Is=Mm,Ci=Lm,rn=0,vd=1,_l=2,Cu=3,Sc=4,no=5,Im=6,ku=7,qo=8,io=9,jd=10,zm=[2,3,7],ki=[3,3,11],oi=[280,256,256,256,40],_c=[0,1,1,1,0],lo=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],oo=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Cc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],jp=8,Au=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Eu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ys=null,Ur=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ar=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Uo=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Cl=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],xx=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],kc=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Np=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],co=[],vn=[],ci=[],wp=1,Nd=2,kl=[],zs=[];Ui("UpsampleRgbLinePair",gl,3),Ui("UpsampleBgrLinePair",bc,3),Ui("UpsampleRgbaLinePair",Dm,4),Ui("UpsampleBgraLinePair",hd,4),Ui("UpsampleArgbLinePair",ao,4),Ui("UpsampleRgba4444LinePair",an,2),Ui("UpsampleRgb565LinePair",md,2);var uo=_.UpsampleRgbLinePair,Wo=_.UpsampleBgrLinePair,Al=_.UpsampleRgbaLinePair,$m=_.UpsampleBgraLinePair,Bm=_.UpsampleArgbLinePair,wd=_.UpsampleRgba4444LinePair,Fm=_.UpsampleRgb565LinePair,El=16,bs=1<<El-1,Ho=-227,qm=482,hb=6,Sp=0,xb=i(256),vs=i(256),fx=i(256),Tu=i(256),Pu=i(qm-Ho),px=i(qm-Ho);ni("YuvToRgbRow",gl,3),ni("YuvToBgrRow",bc,3),ni("YuvToRgbaRow",Dm,4),ni("YuvToBgraRow",hd,4),ni("YuvToArgbRow",ao,4),ni("YuvToRgba4444Row",an,2),ni("YuvToRgb565Row",md,2);var Ac=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],mo=[0,2,8],fb=[8,7,6,4,4,2,2,2,1,1,1,1],_p=1;this.WebPDecodeRGBA=function(S,O,K,ee,de){var xe=vd,ge=new ra,ve=new It;ge.ba=ve,ve.S=xe,ve.width=[ve.width],ve.height=[ve.height];var je=ve.width,_e=ve.height,Fe=new Bt;if(Fe==null||S==null)var at=2;else a(Fe!=null),at=fd(S,O,K,Fe.width,Fe.height,Fe.Pd,Fe.Qd,Fe.format,null);if(at!=0?je=0:(je!=null&&(je[0]=Fe.width[0]),_e!=null&&(_e[0]=Fe.height[0]),je=1),je){ve.width=ve.width[0],ve.height=ve.height[0],ee!=null&&(ee[0]=ve.width),de!=null&&(de[0]=ve.height);e:{if(ee=new cl,(de=new pa).data=S,de.w=O,de.ha=K,de.kd=1,O=[0],a(de!=null),((S=fd(de.data,de.w,de.ha,null,null,null,O,null,de))==0||S==7)&&O[0]&&(S=4),(O=S)==0){if(a(ge!=null),ee.data=de.data,ee.w=de.w+de.offset,ee.ha=de.ha-de.offset,ee.put=Yt,ee.ac=Ka,ee.bc=er,ee.ma=ge,de.xa){if((S=Ra())==null){ge=1;break e}if(function(Se,He){var Qe=[0],ht=[0],tt=[0];t:for(;;){if(Se==null)return 0;if(He==null)return Se.a=2,0;if(Se.l=He,Se.a=0,X(Se.m,He.data,He.w,He.ha),!Ye(Se.m,Qe,ht,tt)){Se.a=3;break t}if(Se.xb=Nd,He.width=Qe[0],He.height=ht[0],!Ps(Qe[0],ht[0],1,Se,null))break t;return 1}return a(Se.a!=0),0}(S,ee)){if(ee=(O=zo(ee.width,ee.height,ge.Oa,ge.ba))==0){t:{ee=S;a:for(;;){if(ee==null){ee=0;break t}if(a(ee.s.yc!=null),a(ee.s.Ya!=null),a(0<ee.s.Wb),a((K=ee.l)!=null),a((de=K.ma)!=null),ee.xb!=0){if(ee.ca=de.ba,ee.tb=de.tb,a(ee.ca!=null),!Ys(de.Oa,K,Cu)){ee.a=2;break a}if(!Xn(ee,K.width)||K.da)break a;if((K.da||Ge(ee.ca.S))&&yc(),11>ee.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ee.ca.f.kb.F!=null&&yc()),ee.Pb&&0<ee.s.ua&&ee.s.vb.X==null&&!ae(ee.s.vb,ee.s.Wa.Xa)){ee.a=1;break a}ee.xb=0}if(!ls(ee,ee.V,ee.Ba,ee.c,ee.i,K.o,aa))break a;de.Dc=ee.Ma,ee=1;break t}a(ee.a!=0),ee=0}ee=!ee}ee&&(O=S.a)}else O=S.a}else{if((S=new Bi)==null){ge=1;break e}if(S.Fa=de.na,S.P=de.P,S.qc=de.Sa,On(S,ee)){if((O=zo(ee.width,ee.height,ge.Oa,ge.ba))==0){if(S.Aa=0,K=ge.Oa,a((de=S)!=null),K!=null){if(0<(je=0>(je=K.Md)?0:100<je?255:255*je/100)){for(_e=Fe=0;4>_e;++_e)12>(at=de.pb[_e]).lc&&(at.ia=je*fb[0>at.lc?0:at.lc]>>3),Fe|=at.ia;Fe&&(alert("todo:VP8InitRandom"),de.ia=1)}de.Ga=K.Id,100<de.Ga?de.Ga=100:0>de.Ga&&(de.Ga=0)}(function(Se,He){if(Se==null)return 0;if(He==null)return $a(Se,2,"NULL VP8Io parameter in VP8Decode().");if(!Se.cb&&!On(Se,He))return 0;if(a(Se.cb),He.ac==null||He.ac(He)){He.ob&&(Se.L=0);var Qe=mo[Se.L];if(Se.L==2?(Se.yb=0,Se.zb=0):(Se.yb=He.v-Qe>>4,Se.zb=He.j-Qe>>4,0>Se.yb&&(Se.yb=0),0>Se.zb&&(Se.zb=0)),Se.Va=He.o+15+Qe>>4,Se.Hb=He.va+15+Qe>>4,Se.Hb>Se.za&&(Se.Hb=Se.za),Se.Va>Se.Ub&&(Se.Va=Se.Ub),0<Se.L){var ht=Se.ed;for(Qe=0;4>Qe;++Qe){var tt;if(Se.Qa.Cb){var gt=Se.Qa.Lb[Qe];Se.Qa.Fb||(gt+=ht.Tb)}else gt=ht.Tb;for(tt=0;1>=tt;++tt){var pt=Se.gd[Qe][tt],kt=gt;if(ht.Pc&&(kt+=ht.vd[0],tt&&(kt+=ht.od[0])),0<(kt=0>kt?0:63<kt?63:kt)){var wt=kt;0<ht.wb&&(wt=4<ht.wb?wt>>2:wt>>1)>9-ht.wb&&(wt=9-ht.wb),1>wt&&(wt=1),pt.dd=wt,pt.tc=2*kt+wt,pt.ld=40<=kt?2:15<=kt?1:0}else pt.tc=0;pt.La=tt}}}Qe=0}else $a(Se,6,"Frame setup failed"),Qe=Se.a;if(Qe=Qe==0){if(Qe){Se.$c=0,0<Se.Aa||(Se.Ic=_p);t:{Qe=Se.Ic,ht=4*(wt=Se.za);var ea=32*wt,Ft=wt+1,ba=0<Se.L?wt*(0<Se.Aa?2:1):0,Ut=(Se.Aa==2?2:1)*wt;if((pt=ht+832+(tt=3*(16*Qe+mo[Se.L])/2*ea)+(gt=Se.Fa!=null&&0<Se.Fa.length?Se.Kc.c*Se.Kc.i:0))!=pt)Qe=0;else{if(pt>Se.Vb){if(Se.Vb=0,Se.Ec=i(pt),Se.Fc=0,Se.Ec==null){Qe=$a(Se,1,"no memory during frame initialization.");break t}Se.Vb=pt}pt=Se.Ec,kt=Se.Fc,Se.Ac=pt,Se.Bc=kt,kt+=ht,Se.Gd=o(ea,$i),Se.Hd=0,Se.rb=o(Ft+1,os),Se.sb=1,Se.wa=ba?o(ba,Os):null,Se.Y=0,Se.D.Nb=0,Se.D.wa=Se.wa,Se.D.Y=Se.Y,0<Se.Aa&&(Se.D.Y+=wt),a(!0),Se.oc=pt,Se.pc=kt,kt+=832,Se.ya=o(Ut,pi),Se.aa=0,Se.D.ya=Se.ya,Se.D.aa=Se.aa,Se.Aa==2&&(Se.D.aa+=wt),Se.R=16*wt,Se.B=8*wt,wt=(ea=mo[Se.L])*Se.R,ea=ea/2*Se.B,Se.sa=pt,Se.ta=kt+wt,Se.qa=Se.sa,Se.ra=Se.ta+16*Qe*Se.R+ea,Se.Ha=Se.qa,Se.Ia=Se.ra+8*Qe*Se.B+ea,Se.$c=0,kt+=tt,Se.mb=gt?pt:null,Se.nb=gt?kt:null,a(kt+gt<=Se.Fc+Se.Vb),Ln(Se),n(Se.Ac,Se.Bc,0,ht),Qe=1}}if(Qe){if(He.ka=0,He.y=Se.sa,He.O=Se.ta,He.f=Se.qa,He.N=Se.ra,He.ea=Se.Ha,He.Vd=Se.Ia,He.fa=Se.R,He.Rc=Se.B,He.F=null,He.J=0,!Nc){for(Qe=-255;255>=Qe;++Qe)Lm[255+Qe]=0>Qe?-Qe:Qe;for(Qe=-1020;1020>=Qe;++Qe)Su[1020+Qe]=-128>Qe?-128:127<Qe?127:Qe;for(Qe=-112;112>=Qe;++Qe)_u[112+Qe]=-16>Qe?-16:15<Qe?15:Qe;for(Qe=-255;510>=Qe;++Qe)Mm[255+Qe]=0>Qe?0:255<Qe?255:Qe;Nc=1}Nr=Qn,Rr=dl,Si=ul,bn=xn,vc=mc,Sl=Ca,ox=U,Fo=ue,cx=Ze,dx=yt,ux=Ce,yp=Be,bp=_t,vp=Kt,mx=eo,hx=xl,Om=ud,_i=ju,vn[0]=Ql,vn[1]=Fi,vn[2]=Oo,vn[3]=xc,vn[4]=ei,vn[5]=pn,vn[6]=ti,vn[7]=vi,vn[8]=qi,vn[9]=fc,co[0]=yi,co[1]=Do,co[2]=vu,co[3]=hc,co[4]=Tr,co[5]=Mn,co[6]=bi,ci[0]=wa,ci[1]=Zl,ci[2]=Lo,ci[3]=Pe,ci[4]=ai,ci[5]=Ya,ci[6]=hl,Qe=1}else Qe=0}Qe&&(Qe=function(Ia,ms){for(Ia.M=0;Ia.M<Ia.Va;++Ia.M){var ga,Gt=Ia.Jc[Ia.M&Ia.Xb],Rt=Ia.m,Ir=Ia;for(ga=0;ga<Ir.za;++ga){var va=Rt,ka=Ir,Xt=ka.Ac,Na=ka.Bc+4*ga,Wa=ka.zc,wr=ka.ya[ka.aa+ga];if(ka.Qa.Bb?wr.$b=me(va,ka.Pa.jb[0])?2+me(va,ka.Pa.jb[2]):me(va,ka.Pa.jb[1]):wr.$b=0,ka.kc&&(wr.Ad=me(va,ka.Bd)),wr.Za=!me(va,145)+0,wr.Za){var Zr=wr.Ob,Qr=0;for(ka=0;4>ka;++ka){var Wr,Oa=Wa[0+ka];for(Wr=0;4>Wr;++Wr){Oa=xx[Xt[Na+Wr]][Oa];for(var Ha=Uo[me(va,Oa[0])];0<Ha;)Ha=Uo[2*Ha+me(va,Oa[Ha])];Oa=-Ha,Xt[Na+Wr]=Oa}s(Zr,Qr,Xt,Na,4),Qr+=4,Wa[0+ka]=Oa}}else Oa=me(va,156)?me(va,128)?1:3:me(va,163)?2:0,wr.Ob[0]=Oa,n(Xt,Na,Oa,4),n(Wa,0,Oa,4);wr.Dd=me(va,142)?me(va,114)?me(va,183)?1:3:2:0}if(Ir.m.Ka)return $a(Ia,7,"Premature end-of-partition0 encountered.");for(;Ia.ja<Ia.za;++Ia.ja){if(Ir=Gt,va=(Rt=Ia).rb[Rt.sb-1],Xt=Rt.rb[Rt.sb+Rt.ja],ga=Rt.ya[Rt.aa+Rt.ja],Na=Rt.kc?ga.Ad:0)va.la=Xt.la=0,ga.Za||(va.Na=Xt.Na=0),ga.Hc=0,ga.Gc=0,ga.ia=0;else{var Hr,ha;if(va=Xt,Xt=Ir,Na=Rt.Pa.Xc,Wa=Rt.ya[Rt.aa+Rt.ja],wr=Rt.pb[Wa.$b],ka=Wa.ad,Zr=0,Qr=Rt.rb[Rt.sb-1],Oa=Wr=0,n(ka,Zr,0,384),Wa.Za)var js=0,di=Na[3];else{Ha=i(16);var Yr=va.Na+Qr.Na;if(Yr=ys(Xt,Na[1],Yr,wr.Eb,0,Ha,0),va.Na=Qr.Na=(0<Yr)+0,1<Yr)Nr(Ha,0,ka,Zr);else{var jn=Ha[0]+3>>3;for(Ha=0;256>Ha;Ha+=16)ka[Zr+Ha]=jn}js=1,di=Na[0]}var ur=15&va.la,es=15&Qr.la;for(Ha=0;4>Ha;++Ha){var Nn=1&es;for(jn=ha=0;4>jn;++jn)ur=ur>>1|(Nn=(Yr=ys(Xt,di,Yr=Nn+(1&ur),wr.Sc,js,ka,Zr))>js)<<7,ha=ha<<2|(3<Yr?3:1<Yr?2:ka[Zr+0]!=0),Zr+=16;ur>>=4,es=es>>1|Nn<<7,Wr=(Wr<<8|ha)>>>0}for(di=ur,js=es>>4,Hr=0;4>Hr;Hr+=2){for(ha=0,ur=va.la>>4+Hr,es=Qr.la>>4+Hr,Ha=0;2>Ha;++Ha){for(Nn=1&es,jn=0;2>jn;++jn)Yr=Nn+(1&ur),ur=ur>>1|(Nn=0<(Yr=ys(Xt,Na[2],Yr,wr.Qc,0,ka,Zr)))<<3,ha=ha<<2|(3<Yr?3:1<Yr?2:ka[Zr+0]!=0),Zr+=16;ur>>=2,es=es>>1|Nn<<5}Oa|=ha<<4*Hr,di|=ur<<4<<Hr,js|=(240&es)<<Hr}va.la=di,Qr.la=js,Wa.Hc=Wr,Wa.Gc=Oa,Wa.ia=43690&Oa?0:wr.ia,Na=!(Wr|Oa)}if(0<Rt.L&&(Rt.wa[Rt.Y+Rt.ja]=Rt.gd[ga.$b][ga.Za],Rt.wa[Rt.Y+Rt.ja].La|=!Na),Ir.Ka)return $a(Ia,7,"Premature end-of-file encountered.")}if(Ln(Ia),Rt=ms,Ir=1,ga=(Gt=Ia).D,va=0<Gt.L&&Gt.M>=Gt.zb&&Gt.M<=Gt.Va,Gt.Aa==0)t:{if(ga.M=Gt.M,ga.uc=va,Ni(Gt,ga),Ir=1,ga=(ha=Gt.D).Nb,va=(Oa=mo[Gt.L])*Gt.R,Xt=Oa/2*Gt.B,Ha=16*ga*Gt.R,jn=8*ga*Gt.B,Na=Gt.sa,Wa=Gt.ta-va+Ha,wr=Gt.qa,ka=Gt.ra-Xt+jn,Zr=Gt.Ha,Qr=Gt.Ia-Xt+jn,es=(ur=ha.M)==0,Wr=ur>=Gt.Va-1,Gt.Aa==2&&Ni(Gt,ha),ha.uc)for(Nn=(Yr=Gt).D.M,a(Yr.D.uc),ha=Yr.yb;ha<Yr.Hb;++ha){js=ha,di=Nn;var Gs=(yr=(ws=Yr).D).Nb;Hr=ws.R;var yr=yr.wa[yr.Y+js],Xa=ws.sa,sn=ws.ta+16*Gs*Hr+16*js,Vs=yr.dd,nr=yr.tc;if(nr!=0)if(a(3<=nr),ws.L==1)0<js&&hx(Xa,sn,Hr,nr+4),yr.La&&_i(Xa,sn,Hr,nr),0<di&&mx(Xa,sn,Hr,nr+4),yr.La&&Om(Xa,sn,Hr,nr);else{var wn=ws.B,Ns=ws.qa,Tl=ws.ra+8*Gs*wn+8*js,Wi=ws.Ha,ws=ws.Ia+8*Gs*wn+8*js;Gs=yr.ld,0<js&&(Fo(Xa,sn,Hr,nr+4,Vs,Gs),dx(Ns,Tl,Wi,ws,wn,nr+4,Vs,Gs)),yr.La&&(yp(Xa,sn,Hr,nr,Vs,Gs),vp(Ns,Tl,Wi,ws,wn,nr,Vs,Gs)),0<di&&(ox(Xa,sn,Hr,nr+4,Vs,Gs),cx(Ns,Tl,Wi,ws,wn,nr+4,Vs,Gs)),yr.La&&(ux(Xa,sn,Hr,nr,Vs,Gs),bp(Ns,Tl,Wi,ws,wn,nr,Vs,Gs))}}if(Gt.ia&&alert("todo:DitherRow"),Rt.put!=null){if(ha=16*ur,ur=16*(ur+1),es?(Rt.y=Gt.sa,Rt.O=Gt.ta+Ha,Rt.f=Gt.qa,Rt.N=Gt.ra+jn,Rt.ea=Gt.Ha,Rt.W=Gt.Ia+jn):(ha-=Oa,Rt.y=Na,Rt.O=Wa,Rt.f=wr,Rt.N=ka,Rt.ea=Zr,Rt.W=Qr),Wr||(ur-=Oa),ur>Rt.o&&(ur=Rt.o),Rt.F=null,Rt.J=null,Gt.Fa!=null&&0<Gt.Fa.length&&ha<ur&&(Rt.J=Hs(Gt,Rt,ha,ur-ha),Rt.F=Gt.mb,Rt.F==null&&Rt.F.length==0)){Ir=$a(Gt,3,"Could not decode alpha data.");break t}ha<Rt.j&&(Oa=Rt.j-ha,ha=Rt.j,a(!(1&Oa)),Rt.O+=Gt.R*Oa,Rt.N+=Gt.B*(Oa>>1),Rt.W+=Gt.B*(Oa>>1),Rt.F!=null&&(Rt.J+=Rt.width*Oa)),ha<ur&&(Rt.O+=Rt.v,Rt.N+=Rt.v>>1,Rt.W+=Rt.v>>1,Rt.F!=null&&(Rt.J+=Rt.v),Rt.ka=ha-Rt.j,Rt.U=Rt.va-Rt.v,Rt.T=ur-ha,Ir=Rt.put(Rt))}ga+1!=Gt.Ic||Wr||(s(Gt.sa,Gt.ta-va,Na,Wa+16*Gt.R,va),s(Gt.qa,Gt.ra-Xt,wr,ka+8*Gt.B,Xt),s(Gt.Ha,Gt.Ia-Xt,Zr,Qr+8*Gt.B,Xt))}if(!Ir)return $a(Ia,6,"Output aborted.")}return 1}(Se,He)),He.bc!=null&&He.bc(He),Qe&=1}return Qe?(Se.cb=0,Qe):0})(S,ee)||(O=S.a)}}else O=S.a}O==0&&ge.Oa!=null&&ge.Oa.fd&&(O=gn(ge.ba))}ge=O}xe=ge!=0?null:11>xe?ve.f.RGBA.eb:ve.f.kb.y}else xe=null;return xe};var Cp=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function m(_,B){for(var D="",C=0;C<4;C++)D+=String.fromCharCode(_[B++]);return D}function h(_,B){return _[B+0]|_[B+1]<<8}function p(_,B){return(_[B+0]|_[B+1]<<8|_[B+2]<<16)>>>0}function y(_,B){return(_[B+0]|_[B+1]<<8|_[B+2]<<16|_[B+3]<<24)>>>0}new u;var g=[0],v=[0],N=[],w=new u,j=t,T=function(_,B){var D={},C=0,L=!1,H=0,V=0;if(D.frames=[],!function(q,G){for(var z=0;z<4;z++)if(q[G+z]!="RIFF".charCodeAt(z))return!0;return!1}(_,B)){for(y(_,B+=4),B+=8;B<_.length;){var Y=m(_,B),J=y(_,B+=4);B+=4;var W=J+(1&J);switch(Y){case"VP8 ":case"VP8L":D.frames[C]===void 0&&(D.frames[C]={}),(oe=D.frames[C]).src_off=L?V:B-8,oe.src_size=H+J+8,C++,L&&(L=!1,H=0,V=0);break;case"VP8X":(oe=D.header={}).feature_flags=_[B];var X=B+4;oe.canvas_width=1+p(_,X),X+=3,oe.canvas_height=1+p(_,X),X+=3;break;case"ALPH":L=!0,H=W+8,V=B-8;break;case"ANIM":(oe=D.header).bgcolor=y(_,B),X=B+4,oe.loop_count=h(_,X),X+=2;break;case"ANMF":var te,oe;(oe=D.frames[C]={}).offset_x=2*p(_,B),B+=3,oe.offset_y=2*p(_,B),B+=3,oe.width=1+p(_,B),B+=3,oe.height=1+p(_,B),B+=3,oe.duration=p(_,B),B+=3,te=_[B++],oe.dispose=1&te,oe.blend=te>>1&1}Y!="ANMF"&&(B+=W)}return D}}(j,0);T.response=j,T.rgbaoutput=!0,T.dataurl=!1;var k=T.header?T.header:null,R=T.frames?T.frames:null;if(k){k.loop_counter=k.loop_count,g=[k.canvas_height],v=[k.canvas_width];for(var P=0;P<R.length&&R[P].blend!=0;P++);}var $=R[0],A=w.WebPDecodeRGBA(j,$.src_off,$.src_size,v,g);$.rgba=A,$.imgwidth=v[0],$.imgheight=g[0];for(var M=0;M<v[0]*g[0]*4;M++)N[M]=A[M];return this.width=v,this.height=g,this.data=N,this}(function(t){var a,r,s,n,i,o,c,u,m,h=function(q){return q=q||{},this.isStrokeTransparent=q.isStrokeTransparent||!1,this.strokeOpacity=q.strokeOpacity||1,this.strokeStyle=q.strokeStyle||"#000000",this.fillStyle=q.fillStyle||"#000000",this.isFillTransparent=q.isFillTransparent||!1,this.fillOpacity=q.fillOpacity||1,this.font=q.font||"10px sans-serif",this.textBaseline=q.textBaseline||"alphabetic",this.textAlign=q.textAlign||"left",this.lineWidth=q.lineWidth||1,this.lineJoin=q.lineJoin||"miter",this.lineCap=q.lineCap||"butt",this.path=q.path||[],this.transform=q.transform!==void 0?q.transform.clone():new u,this.globalCompositeOperation=q.globalCompositeOperation||"normal",this.globalAlpha=q.globalAlpha||1,this.clip_path=q.clip_path||[],this.currentPoint=q.currentPoint||new o,this.miterLimit=q.miterLimit||10,this.lastPoint=q.lastPoint||new o,this.lineDashOffset=q.lineDashOffset||0,this.lineDash=q.lineDash||[],this.margin=q.margin||[0,0,0,0],this.prevPageLastElemOffset=q.prevPageLastElemOffset||0,this.ignoreClearRect=typeof q.ignoreClearRect!="boolean"||q.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),a=this.internal.f2,r=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,c=this.internal.Rectangle,u=this.internal.Matrix,m=new h}]);var p=function(q){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=q;Object.defineProperty(this,"pdf",{get:function(){return G}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(Ae){z=!!Ae}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(Ae){Z=!!Ae}});var Q=0;Object.defineProperty(this,"posX",{get:function(){return Q},set:function(Ae){isNaN(Ae)||(Q=Ae)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function(Ae){isNaN(Ae)||(fe=Ae)}}),Object.defineProperty(this,"margin",{get:function(){return m.margin},set:function(Ae){var ae;typeof Ae=="number"?ae=[Ae,Ae,Ae,Ae]:((ae=new Array(4))[0]=Ae[0],ae[1]=Ae.length>=2?Ae[1]:ae[0],ae[2]=Ae.length>=3?Ae[2]:ae[0],ae[3]=Ae.length>=4?Ae[3]:ae[1]),m.margin=ae}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(Ae){he=Ae}});var ne=0;Object.defineProperty(this,"lastBreak",{get:function(){return ne},set:function(Ae){ne=Ae}});var me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return me},set:function(Ae){me=Ae}}),Object.defineProperty(this,"ctx",{get:function(){return m},set:function(Ae){Ae instanceof h&&(m=Ae)}}),Object.defineProperty(this,"path",{get:function(){return m.path},set:function(Ae){m.path=Ae}});var pe=[];Object.defineProperty(this,"ctxStack",{get:function(){return pe},set:function(Ae){pe=Ae}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ae){var ae;ae=y(Ae),this.ctx.fillStyle=ae.style,this.ctx.isFillTransparent=ae.a===0,this.ctx.fillOpacity=ae.a,this.pdf.setFillColor(ae.r,ae.g,ae.b,{a:ae.a}),this.pdf.setTextColor(ae.r,ae.g,ae.b,{a:ae.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ae){var ae=y(Ae);this.ctx.strokeStyle=ae.style,this.ctx.isStrokeTransparent=ae.a===0,this.ctx.strokeOpacity=ae.a,ae.a===0?this.pdf.setDrawColor(255,255,255):(ae.a,this.pdf.setDrawColor(ae.r,ae.g,ae.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ae){["butt","round","square"].indexOf(Ae)!==-1&&(this.ctx.lineCap=Ae,this.pdf.setLineCap(Ae))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ae){isNaN(Ae)||(this.ctx.lineWidth=Ae,this.pdf.setLineWidth(Ae))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ae){["bevel","round","miter"].indexOf(Ae)!==-1&&(this.ctx.lineJoin=Ae,this.pdf.setLineJoin(Ae))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ae){isNaN(Ae)||(this.ctx.miterLimit=Ae,this.pdf.setMiterLimit(Ae))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ae){this.ctx.textBaseline=Ae}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ae){["right","end","center","left","start"].indexOf(Ae)!==-1&&(this.ctx.textAlign=Ae)}});var ie=null,ke=null;Object.defineProperty(this,"fontFaces",{get:function(){return ke},set:function(Ae){ie=null,ke=Ae}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ae){var ae;if(this.ctx.font=Ae,(ae=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ae))!==null){var Ne=ae[1];ae[2];var ce=ae[3],De=ae[4];ae[5];var ye=ae[6],Ee=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(De)[2];De=Math.floor(Ee==="px"?parseFloat(De)*this.pdf.internal.scaleFactor:Ee==="em"?parseFloat(De)*this.pdf.getFontSize():parseFloat(De)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(De);var Ke=function(we){var Ie,dt,ut=[],Te=we.trim();if(Te==="")return $2;if(Te in b7)return[b7[Te]];for(;Te!=="";){switch(dt=null,Ie=(Te=j7(Te)).charAt(0)){case'"':case"'":dt=Ude(Te.substring(1),Ie);break;default:dt=Wde(Te)}if(dt===null||(ut.push(dt[0]),(Te=j7(dt[1]))!==""&&Te.charAt(0)!==","))return $2;Te=Te.replace(/^,/,"")}return ut}(ye);if(this.fontFaces){var Re=function(we,Ie){if(ie===null){var dt=function(ut){var Te=[];return Object.keys(ut).forEach(function(Ve){ut[Ve].forEach(function(qe){var Xe=null;switch(qe){case"bold":Xe={family:Ve,weight:"bold"};break;case"italic":Xe={family:Ve,style:"italic"};break;case"bolditalic":Xe={family:Ve,weight:"bold",style:"italic"};break;case"":case"normal":Xe={family:Ve}}Xe!==null&&(Xe.ref={name:Ve,style:qe},Te.push(Xe))})}),Te}(we.getFontList());ie=function(ut){for(var Te={},Ve=0;Ve<ut.length;++Ve){var qe=z2(ut[Ve]),Xe=qe.family,We=qe.stretch,Ge=qe.style,lt=qe.weight;Te[Xe]=Te[Xe]||{},Te[Xe][We]=Te[Xe][We]||{},Te[Xe][We][Ge]=Te[Xe][We][Ge]||{},Te[Xe][We][Ge][lt]=qe}return Te}(dt.concat(Ie))}return ie}(this.pdf,this.fontFaces),Le=Ke.map(function(we){return{family:we,stretch:"normal",weight:ce,style:Ne}}),Oe=function(we,Ie,dt){for(var ut=(dt=dt||{}).defaultFontFamily||"times",Te=Object.assign({},qde,dt.genericFontFamilies||{}),Ve=null,qe=null,Xe=0;Xe<Ie.length;++Xe)if(Te[(Ve=z2(Ie[Xe])).family]&&(Ve.family=Te[Ve.family]),we.hasOwnProperty(Ve.family)){qe=we[Ve.family];break}if(!(qe=qe||we[ut]))throw new Error("Could not find a font-family for the rule '"+v7(Ve)+"' and default family '"+ut+"'.");if(qe=function(We,Ge){if(Ge[We])return Ge[We];var lt=SN[We],Dt=lt<=SN.normal?-1:1,It=y7(Ge,gL,lt,Dt);if(!It)throw new Error("Could not find a matching font-stretch value for "+We);return It}(Ve.stretch,qe),qe=function(We,Ge){if(Ge[We])return Ge[We];for(var lt=pL[We],Dt=0;Dt<lt.length;++Dt)if(Ge[lt[Dt]])return Ge[lt[Dt]];throw new Error("Could not find a matching font-style for "+We)}(Ve.style,qe),!(qe=function(We,Ge){if(Ge[We])return Ge[We];if(We===400&&Ge[500])return Ge[500];if(We===500&&Ge[400])return Ge[400];var lt=Fde[We],Dt=y7(Ge,yL,lt,We<400?-1:1);if(!Dt)throw new Error("Could not find a matching font-weight for value "+We);return Dt}(Ve.weight,qe)))throw new Error("Failed to resolve a font for the rule '"+v7(Ve)+"'.");return qe}(Re,Le);this.pdf.setFont(Oe.ref.name,Oe.ref.style)}else{var $e="";(ce==="bold"||parseInt(ce,10)>=700||Ne==="bold")&&($e="bold"),Ne==="italic"&&($e+="italic"),$e.length===0&&($e="normal");for(var ct="",Nt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},jt=0;jt<Ke.length;jt++){if(this.pdf.internal.getFont(Ke[jt],$e,{noFallback:!0,disableWarning:!0})!==void 0){ct=Ke[jt];break}if($e==="bolditalic"&&this.pdf.internal.getFont(Ke[jt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ct=Ke[jt],$e="bold";else if(this.pdf.internal.getFont(Ke[jt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ct=Ke[jt],$e="normal";break}}if(ct===""){for(var xt=0;xt<Ke.length;xt++)if(Nt[Ke[xt]]){ct=Nt[Ke[xt]];break}}ct=ct===""?"Times":ct,this.pdf.setFont(ct,$e)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ae){this.ctx.globalCompositeOperation=Ae}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ae){this.ctx.globalAlpha=Ae}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ae){this.ctx.lineDashOffset=Ae,oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ae){this.ctx.lineDash=Ae,oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ae){this.ctx.ignoreClearRect=!!Ae}})};p.prototype.setLineDash=function(q){this.lineDash=q},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){R.call(this,"fill",!1)},p.prototype.stroke=function(){R.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(q,G){if(isNaN(q)||isNaN(G))throw _r.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new o(q,G));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(q,G)},p.prototype.closePath=function(){var q=new o(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&fr(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){q=new o(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(q.x,q.y)},p.prototype.lineTo=function(q,G){if(isNaN(q)||isNaN(G))throw _r.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new o(q,G));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(z.x,z.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),R.call(this,null,!0)},p.prototype.quadraticCurveTo=function(q,G,z,Z){if(isNaN(z)||isNaN(Z)||isNaN(q)||isNaN(G))throw _r.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Q=this.ctx.transform.applyToPoint(new o(z,Z)),fe=this.ctx.transform.applyToPoint(new o(q,G));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:Q.x,y:Q.y}),this.ctx.lastPoint=new o(Q.x,Q.y)},p.prototype.bezierCurveTo=function(q,G,z,Z,Q,fe){if(isNaN(Q)||isNaN(fe)||isNaN(q)||isNaN(G)||isNaN(z)||isNaN(Z))throw _r.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new o(Q,fe)),ne=this.ctx.transform.applyToPoint(new o(q,G)),me=this.ctx.transform.applyToPoint(new o(z,Z));this.path.push({type:"bct",x1:ne.x,y1:ne.y,x2:me.x,y2:me.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},p.prototype.arc=function(q,G,z,Z,Q,fe){if(isNaN(q)||isNaN(G)||isNaN(z)||isNaN(Z)||isNaN(Q))throw _r.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new o(q,G));q=he.x,G=he.y;var ne=this.ctx.transform.applyToPoint(new o(0,z)),me=this.ctx.transform.applyToPoint(new o(0,0));z=Math.sqrt(Math.pow(ne.x-me.x,2)+Math.pow(ne.y-me.y,2))}Math.abs(Q-Z)>=2*Math.PI&&(Z=0,Q=2*Math.PI),this.path.push({type:"arc",x:q,y:G,radius:z,startAngle:Z,endAngle:Q,counterclockwise:fe})},p.prototype.arcTo=function(q,G,z,Z,Q){throw new Error("arcTo not implemented.")},p.prototype.rect=function(q,G,z,Z){if(isNaN(q)||isNaN(G)||isNaN(z)||isNaN(Z))throw _r.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(q,G),this.lineTo(q+z,G),this.lineTo(q+z,G+Z),this.lineTo(q,G+Z),this.lineTo(q,G),this.lineTo(q+z,G),this.lineTo(q,G)},p.prototype.fillRect=function(q,G,z,Z){if(isNaN(q)||isNaN(G)||isNaN(z)||isNaN(Z))throw _r.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var Q={};this.lineCap!=="butt"&&(Q.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Q.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(q,G,z,Z),this.fill(),Q.hasOwnProperty("lineCap")&&(this.lineCap=Q.lineCap),Q.hasOwnProperty("lineJoin")&&(this.lineJoin=Q.lineJoin)}},p.prototype.strokeRect=function(q,G,z,Z){if(isNaN(q)||isNaN(G)||isNaN(z)||isNaN(Z))throw _r.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(q,G,z,Z),this.stroke())},p.prototype.clearRect=function(q,G,z,Z){if(isNaN(q)||isNaN(G)||isNaN(z)||isNaN(Z))throw _r.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(q,G,z,Z))},p.prototype.save=function(q){q=typeof q!="boolean"||q;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),q){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},p.prototype.restore=function(q){q=typeof q!="boolean"||q;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(G),q&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(q){var G,z,Z,Q;if(q.isCanvasGradient===!0&&(q=q.getColor()),!q)return{r:0,g:0,b:0,a:0,style:q};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(q))G=0,z=0,Z=0,Q=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(q);if(fe!==null)G=parseInt(fe[1]),z=parseInt(fe[2]),Z=parseInt(fe[3]),Q=1;else if((fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(q))!==null)G=parseInt(fe[1]),z=parseInt(fe[2]),Z=parseInt(fe[3]),Q=parseFloat(fe[4]);else{if(Q=1,typeof q=="string"&&q.charAt(0)!=="#"){var he=new cL(q);q=he.ok?he.toHex():"#000000"}q.length===4?(G=q.substring(1,2),G+=G,z=q.substring(2,3),z+=z,Z=q.substring(3,4),Z+=Z):(G=q.substring(1,3),z=q.substring(3,5),Z=q.substring(5,7)),G=parseInt(G,16),z=parseInt(z,16),Z=parseInt(Z,16)}}return{r:G,g:z,b:Z,a:Q,style:q}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(q,G,z,Z){if(isNaN(G)||isNaN(z)||typeof q!="string")throw _r.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!g.call(this)){var Q=W(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;C.call(this,{text:q,x:G,y:z,scale:fe,angle:Q,align:this.textAlign,maxWidth:Z})}},p.prototype.strokeText=function(q,G,z,Z){if(isNaN(G)||isNaN(z)||typeof q!="string")throw _r.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){Z=isNaN(Z)?void 0:Z;var Q=W(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;C.call(this,{text:q,x:G,y:z,scale:fe,renderingMode:"stroke",angle:Q,align:this.textAlign,maxWidth:Z})}},p.prototype.measureText=function(q){if(typeof q!="string")throw _r.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,z=this.pdf.internal.scaleFactor,Z=G.internal.getFontSize(),Q=G.getStringUnitWidth(q)*Z/G.internal.scaleFactor;return new function(fe){var he=(fe=fe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this}({width:Q*=Math.round(96*z/72*1e4)/1e4})},p.prototype.scale=function(q,G){if(isNaN(q)||isNaN(G))throw _r.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new u(q,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},p.prototype.rotate=function(q){if(isNaN(q))throw _r.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new u(Math.cos(q),Math.sin(q),-Math.sin(q),Math.cos(q),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},p.prototype.translate=function(q,G){if(isNaN(q)||isNaN(G))throw _r.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new u(1,0,0,1,q,G);this.ctx.transform=this.ctx.transform.multiply(z)},p.prototype.transform=function(q,G,z,Z,Q,fe){if(isNaN(q)||isNaN(G)||isNaN(z)||isNaN(Z)||isNaN(Q)||isNaN(fe))throw _r.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new u(q,G,z,Z,Q,fe);this.ctx.transform=this.ctx.transform.multiply(he)},p.prototype.setTransform=function(q,G,z,Z,Q,fe){q=isNaN(q)?1:q,G=isNaN(G)?0:G,z=isNaN(z)?0:z,Z=isNaN(Z)?1:Z,Q=isNaN(Q)?0:Q,fe=isNaN(fe)?0:fe,this.ctx.transform=new u(q,G,z,Z,Q,fe)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(q,G,z,Z,Q,fe,he,ne,me){var pe=this.pdf.getImageProperties(q),ie=1,ke=1,Ae=1,ae=1;Z!==void 0&&ne!==void 0&&(Ae=ne/Z,ae=me/Q,ie=pe.width/Z*ne/Z,ke=pe.height/Q*me/Q),fe===void 0&&(fe=G,he=z,G=0,z=0),Z!==void 0&&ne===void 0&&(ne=Z,me=Q),Z===void 0&&ne===void 0&&(ne=pe.width,me=pe.height);for(var Ne,ce=this.ctx.transform.decompose(),De=W(ce.rotate.shx),ye=new u,Ee=(ye=(ye=(ye=ye.multiply(ce.translate)).multiply(ce.skew)).multiply(ce.scale)).applyToRectangle(new c(fe-G*Ae,he-z*ae,Z*ie,Q*ke)),Ke=w.call(this,Ee),Re=[],Le=0;Le<Ke.length;Le+=1)Re.indexOf(Ke[Le])===-1&&Re.push(Ke[Le]);if(k(Re),this.autoPaging)for(var Oe=Re[0],$e=Re[Re.length-1],ct=Oe;ct<$e+1;ct++){this.pdf.setPage(ct);var Nt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],jt=ct===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],we=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ie=ct===1?0:xt+(ct-2)*we;if(this.ctx.clip_path.length!==0){var dt=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(Ne,this.posX+this.margin[3],-Ie+jt+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=dt}var ut=JSON.parse(JSON.stringify(Ee));ut=T([ut],this.posX+this.margin[3],-Ie+jt+this.ctx.prevPageLastElemOffset)[0];var Te=(ct>Oe||ct<$e)&&N.call(this);Te&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Nt,we,null).clip().discardPath()),this.pdf.addImage(q,"JPEG",ut.x,ut.y,ut.w,ut.h,null,null,De),Te&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(q,"JPEG",Ee.x,Ee.y,Ee.w,Ee.h,null,null,De)};var w=function(q,G,z){var Z=[];G=G||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Q=this.posY+this.ctx.prevPageLastElemOffset;switch(q.type){default:case"mt":case"lt":Z.push(Math.floor((q.y+Q)/z)+1);break;case"arc":Z.push(Math.floor((q.y+Q-q.radius)/z)+1),Z.push(Math.floor((q.y+Q+q.radius)/z)+1);break;case"qct":var fe=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x,q.y);Z.push(Math.floor((fe.y+Q)/z)+1),Z.push(Math.floor((fe.y+fe.h+Q)/z)+1);break;case"bct":var he=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x2,q.y2,q.x,q.y);Z.push(Math.floor((he.y+Q)/z)+1),Z.push(Math.floor((he.y+he.h+Q)/z)+1);break;case"rect":Z.push(Math.floor((q.y+Q)/z)+1),Z.push(Math.floor((q.y+q.h+Q)/z)+1)}for(var ne=0;ne<Z.length;ne+=1)for(;this.pdf.internal.getNumberOfPages()<Z[ne];)j.call(this);return Z},j=function(){var q=this.fillStyle,G=this.strokeStyle,z=this.font,Z=this.lineCap,Q=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=q,this.strokeStyle=G,this.font=z,this.lineCap=Z,this.lineWidth=Q,this.lineJoin=fe},T=function(q,G,z){for(var Z=0;Z<q.length;Z++)switch(q[Z].type){case"bct":q[Z].x2+=G,q[Z].y2+=z;case"qct":q[Z].x1+=G,q[Z].y1+=z;default:q[Z].x+=G,q[Z].y+=z}return q},k=function(q){return q.sort(function(G,z){return G-z})},R=function(q,G){for(var z,Z,Q=this.fillStyle,fe=this.strokeStyle,he=this.lineCap,ne=this.lineWidth,me=Math.abs(ne*this.ctx.transform.scaleX),pe=this.lineJoin,ie=JSON.parse(JSON.stringify(this.path)),ke=JSON.parse(JSON.stringify(this.path)),Ae=[],ae=0;ae<ke.length;ae++)if(ke[ae].x!==void 0)for(var Ne=w.call(this,ke[ae]),ce=0;ce<Ne.length;ce+=1)Ae.indexOf(Ne[ce])===-1&&Ae.push(Ne[ce]);for(var De=0;De<Ae.length;De++)for(;this.pdf.internal.getNumberOfPages()<Ae[De];)j.call(this);if(k(Ae),this.autoPaging)for(var ye=Ae[0],Ee=Ae[Ae.length-1],Ke=ye;Ke<Ee+1;Ke++){this.pdf.setPage(Ke),this.fillStyle=Q,this.strokeStyle=fe,this.lineCap=he,this.lineWidth=me,this.lineJoin=pe;var Re=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Le=Ke===1?this.posY+this.margin[0]:this.margin[0],Oe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ct=Ke===1?0:Oe+(Ke-2)*$e;if(this.ctx.clip_path.length!==0){var Nt=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(z,this.posX+this.margin[3],-ct+Le+this.ctx.prevPageLastElemOffset),P.call(this,q,!0),this.path=Nt}if(Z=JSON.parse(JSON.stringify(ie)),this.path=T(Z,this.posX+this.margin[3],-ct+Le+this.ctx.prevPageLastElemOffset),G===!1||Ke===0){var jt=(Ke>ye||Ke<Ee)&&N.call(this);jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Re,$e,null).clip().discardPath()),P.call(this,q,G),jt&&this.pdf.restoreGraphicsState()}this.lineWidth=ne}else this.lineWidth=me,P.call(this,q,G),this.lineWidth=ne;this.path=ie},P=function(q,G){if((q!=="stroke"||G||!v.call(this))&&(q==="stroke"||G||!g.call(this))){for(var z,Z,Q=[],fe=this.path,he=0;he<fe.length;he++){var ne=fe[he];switch(ne.type){case"begin":Q.push({begin:!0});break;case"close":Q.push({close:!0});break;case"mt":Q.push({start:ne,deltas:[],abs:[]});break;case"lt":var me=Q.length;if(fe[he-1]&&!isNaN(fe[he-1].x)&&(z=[ne.x-fe[he-1].x,ne.y-fe[he-1].y],me>0)){for(;me>=0;me--)if(Q[me-1].close!==!0&&Q[me-1].begin!==!0){Q[me-1].deltas.push(z),Q[me-1].abs.push(ne);break}}break;case"bct":z=[ne.x1-fe[he-1].x,ne.y1-fe[he-1].y,ne.x2-fe[he-1].x,ne.y2-fe[he-1].y,ne.x-fe[he-1].x,ne.y-fe[he-1].y],Q[Q.length-1].deltas.push(z);break;case"qct":var pe=fe[he-1].x+2/3*(ne.x1-fe[he-1].x),ie=fe[he-1].y+2/3*(ne.y1-fe[he-1].y),ke=ne.x+2/3*(ne.x1-ne.x),Ae=ne.y+2/3*(ne.y1-ne.y),ae=ne.x,Ne=ne.y;z=[pe-fe[he-1].x,ie-fe[he-1].y,ke-fe[he-1].x,Ae-fe[he-1].y,ae-fe[he-1].x,Ne-fe[he-1].y],Q[Q.length-1].deltas.push(z);break;case"arc":Q.push({deltas:[],abs:[],arc:!0}),Array.isArray(Q[Q.length-1].abs)&&Q[Q.length-1].abs.push(ne)}}Z=G?null:q==="stroke"?"stroke":"fill";for(var ce=!1,De=0;De<Q.length;De++)if(Q[De].arc)for(var ye=Q[De].abs,Ee=0;Ee<ye.length;Ee++){var Ke=ye[Ee];Ke.type==="arc"?M.call(this,Ke.x,Ke.y,Ke.radius,Ke.startAngle,Ke.endAngle,Ke.counterclockwise,void 0,G,!ce):L.call(this,Ke.x,Ke.y),ce=!0}else if(Q[De].close===!0)this.pdf.internal.out("h"),ce=!1;else if(Q[De].begin!==!0){var Re=Q[De].start.x,Le=Q[De].start.y;H.call(this,Q[De].deltas,Re,Le),ce=!0}Z&&_.call(this,Z),G&&B.call(this)}},$=function(q){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return q-z;case"top":return q+G-z;case"hanging":return q+G-2*z;case"middle":return q+G/2-z;default:return q}},A=function(q){return q+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var q=function(){};return q.colorStops=[],q.addColorStop=function(G,z){this.colorStops.push([G,z])},q.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},q.isCanvasGradient=!0,q},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(q,G,z,Z,Q,fe,he,ne,me){for(var pe=Y.call(this,z,Z,Q,fe),ie=0;ie<pe.length;ie++){var ke=pe[ie];ie===0&&(me?D.call(this,ke.x1+q,ke.y1+G):L.call(this,ke.x1+q,ke.y1+G)),V.call(this,q,G,ke.x2,ke.y2,ke.x3,ke.y3,ke.x4,ke.y4)}ne?B.call(this):_.call(this,he)},_=function(q){switch(q){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},B=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(q,G){this.pdf.internal.out(r(q)+" "+s(G)+" m")},C=function(q){var G;switch(q.align){case"right":case"end":G="right";break;case"center":G="center";break;default:G="left"}var z=this.pdf.getTextDimensions(q.text),Z=$.call(this,q.y),Q=A.call(this,Z)-z.h,fe=this.ctx.transform.applyToPoint(new o(q.x,Z)),he=this.ctx.transform.decompose(),ne=new u;ne=(ne=(ne=ne.multiply(he.translate)).multiply(he.skew)).multiply(he.scale);for(var me,pe,ie,ke=this.ctx.transform.applyToRectangle(new c(q.x,Z,z.w,z.h)),Ae=ne.applyToRectangle(new c(q.x,Q,z.w,z.h)),ae=w.call(this,Ae),Ne=[],ce=0;ce<ae.length;ce+=1)Ne.indexOf(ae[ce])===-1&&Ne.push(ae[ce]);if(k(Ne),this.autoPaging)for(var De=Ne[0],ye=Ne[Ne.length-1],Ee=De;Ee<ye+1;Ee++){this.pdf.setPage(Ee);var Ke=Ee===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Le=this.pdf.internal.pageSize.height-this.margin[2],Oe=Le-this.margin[0],$e=this.pdf.internal.pageSize.width-this.margin[1],ct=$e-this.margin[3],Nt=Ee===1?0:Re+(Ee-2)*Oe;if(this.ctx.clip_path.length!==0){var jt=this.path;me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(me,this.posX+this.margin[3],-1*Nt+Ke),P.call(this,"fill",!0),this.path=jt}var xt=T([JSON.parse(JSON.stringify(Ae))],this.posX+this.margin[3],-Nt+Ke+this.ctx.prevPageLastElemOffset)[0];q.scale>=.01&&(pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(pe*q.scale),ie=this.lineWidth,this.lineWidth=ie*q.scale);var we=this.autoPaging!=="text";if(we||xt.y+xt.h<=Le){if(we||xt.y>=Ke&&xt.x<=$e){var Ie=we?q.text:this.pdf.splitTextToSize(q.text,q.maxWidth||$e-xt.x)[0],dt=T([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-Nt+Ke+this.ctx.prevPageLastElemOffset)[0],ut=we&&(Ee>De||Ee<ye)&&N.call(this);ut&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,Oe,null).clip().discardPath()),this.pdf.text(Ie,dt.x,dt.y,{angle:q.angle,align:G,renderingMode:q.renderingMode}),ut&&this.pdf.restoreGraphicsState()}}else xt.y<Le&&(this.ctx.prevPageLastElemOffset+=Le-xt.y);q.scale>=.01&&(this.pdf.setFontSize(pe),this.lineWidth=ie)}else q.scale>=.01&&(pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(pe*q.scale),ie=this.lineWidth,this.lineWidth=ie*q.scale),this.pdf.text(q.text,fe.x+this.posX,fe.y+this.posY,{angle:q.angle,align:G,renderingMode:q.renderingMode,maxWidth:q.maxWidth}),q.scale>=.01&&(this.pdf.setFontSize(pe),this.lineWidth=ie)},L=function(q,G,z,Z){z=z||0,Z=Z||0,this.pdf.internal.out(r(q+z)+" "+s(G+Z)+" l")},H=function(q,G,z){return this.pdf.lines(q,G,z,null,null)},V=function(q,G,z,Z,Q,fe,he,ne){this.pdf.internal.out([a(n(z+q)),a(i(Z+G)),a(n(Q+q)),a(i(fe+G)),a(n(he+q)),a(i(ne+G)),"c"].join(" "))},Y=function(q,G,z,Z){for(var Q=2*Math.PI,fe=Math.PI/2;G>z;)G-=Q;var he=Math.abs(z-G);he<Q&&Z&&(he=Q-he);for(var ne=[],me=Z?-1:1,pe=G;he>1e-5;){var ie=pe+me*Math.min(he,fe);ne.push(J.call(this,q,pe,ie)),he-=Math.abs(ie-pe),pe=ie}return ne},J=function(q,G,z){var Z=(z-G)/2,Q=q*Math.cos(Z),fe=q*Math.sin(Z),he=Q,ne=-fe,me=he*he+ne*ne,pe=me+he*Q+ne*fe,ie=4/3*(Math.sqrt(2*me*pe)-pe)/(he*fe-ne*Q),ke=he-ie*ne,Ae=ne+ie*he,ae=ke,Ne=-Ae,ce=Z+G,De=Math.cos(ce),ye=Math.sin(ce);return{x1:q*Math.cos(G),y1:q*Math.sin(G),x2:ke*De-Ae*ye,y2:ke*ye+Ae*De,x3:ae*De-Ne*ye,y3:ae*ye+Ne*De,x4:q*Math.cos(z),y4:q*Math.sin(z)}},W=function(q){return 180*q/Math.PI},X=function(q,G,z,Z,Q,fe){var he=q+.5*(z-q),ne=G+.5*(Z-G),me=Q+.5*(z-Q),pe=fe+.5*(Z-fe),ie=Math.min(q,Q,he,me),ke=Math.max(q,Q,he,me),Ae=Math.min(G,fe,ne,pe),ae=Math.max(G,fe,ne,pe);return new c(ie,Ae,ke-ie,ae-Ae)},te=function(q,G,z,Z,Q,fe,he,ne){var me,pe,ie,ke,Ae,ae,Ne,ce,De,ye,Ee,Ke,Re,Le,Oe=z-q,$e=Z-G,ct=Q-z,Nt=fe-Z,jt=he-Q,xt=ne-fe;for(pe=0;pe<41;pe++)De=(Ne=(ie=q+(me=pe/40)*Oe)+me*((Ae=z+me*ct)-ie))+me*(Ae+me*(Q+me*jt-Ae)-Ne),ye=(ce=(ke=G+me*$e)+me*((ae=Z+me*Nt)-ke))+me*(ae+me*(fe+me*xt-ae)-ce),pe==0?(Ee=De,Ke=ye,Re=De,Le=ye):(Ee=Math.min(Ee,De),Ke=Math.min(Ke,ye),Re=Math.max(Re,De),Le=Math.max(Le,ye));return new c(Math.round(Ee),Math.round(Ke),Math.round(Re-Ee),Math.round(Le-Ke))},oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var q,G,z=(q=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:q,lineDashOffset:G}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})(ia.API),function(t){var a=function(o){var c,u,m,h,p,y,g,v,N,w;for(u=[],m=0,h=(o+=c="\0\0\0\0".slice(o.length%4||4)).length;h>m;m+=4)(p=(o.charCodeAt(m)<<24)+(o.charCodeAt(m+1)<<16)+(o.charCodeAt(m+2)<<8)+o.charCodeAt(m+3))!==0?(y=(p=((p=((p=((p=(p-(w=p%85))/85)-(N=p%85))/85)-(v=p%85))/85)-(g=p%85))/85)%85,u.push(y+33,g+33,v+33,N+33,w+33)):u.push(122);return function(j,T){for(var k=T;k>0;k--)j.pop()}(u,c.length),String.fromCharCode.apply(String,u)+"~>"},r=function(o){var c,u,m,h,p,y=String,g="length",v=255,N="charCodeAt",w="slice",j="replace";for(o[w](-2),o=o[w](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),m=[],h=0,p=(o+=c="uuuuu"[w](o[g]%5||5))[g];p>h;h+=5)u=52200625*(o[N](h)-33)+614125*(o[N](h+1)-33)+7225*(o[N](h+2)-33)+85*(o[N](h+3)-33)+(o[N](h+4)-33),m.push(v&u>>24,v&u>>16,v&u>>8,v&u);return function(T,k){for(var R=k;R>0;R--)T.pop()}(m,c[g]),y.fromCharCode.apply(y,m)},s=function(o){return o.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},n=function(o){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),c.test(o)===!1)return"";for(var u="",m=0;m<o.length;m+=2)u+=String.fromCharCode("0x"+(o[m]+o[m+1]));return u},i=function(o){for(var c=new Uint8Array(o.length),u=o.length;u--;)c[u]=o.charCodeAt(u);return(c=gN(c)).reduce(function(m,h){return m+String.fromCharCode(h)},"")};t.processDataByFilters=function(o,c){var u=0,m=o||"",h=[];for(typeof(c=c||[])=="string"&&(c=[c]),u=0;u<c.length;u+=1)switch(c[u]){case"ASCII85Decode":case"/ASCII85Decode":m=r(m),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=a(m),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=n(m),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=s(m),h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=i(m),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[u]+'" is not implemented')}return{data:m,reverseChain:h.reverse().join(" ")}}}(ia.API),function(t){t.loadFile=function(a,r,s){return function(n,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var c=void 0;try{c=function(u,m,h){var p=new XMLHttpRequest,y=0,g=function(v){var N=v.length,w=[],j=String.fromCharCode;for(y=0;y<N;y+=1)w.push(j(255&v.charCodeAt(y)));return w.join("")};if(p.open("GET",u,!m),p.overrideMimeType("text/plain; charset=x-user-defined"),m===!1&&(p.onload=function(){p.status===200?h(g(this.responseText)):h(void 0)}),p.send(null),m&&p.status===200)return g(p.responseText)}(n,i,o)}catch{}return c}(a,r,s)},t.loadImageFile=t.loadFile}(ia.API),function(t){function a(){return(ja.html2canvas?Promise.resolve(ja.html2canvas):v2(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function r(){return(ja.DOMPurify?Promise.resolve(ja.DOMPurify):v2(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var s=function(c){var u=fr(c);return u==="undefined"?"undefined":u==="string"||c instanceof String?"string":u==="number"||c instanceof Number?"number":u==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":u==="object"?"object":"unknown"},n=function(c,u){var m=document.createElement(c);for(var h in u.className&&(m.className=u.className),u.innerHTML&&u.dompurify&&(m.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)m.style[h]=u.style[h];return m},i=function c(u,m){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),p=u.firstChild;p;p=p.nextSibling)m!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||h.appendChild(c(p,m));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h},o=function c(u){var m=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),h=c.convert(Promise.resolve(),m);return(h=h.setProgress(1,c,1,[c])).set(u)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(c,u){return c.__proto__=u||o.prototype,c},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(c,u){return this.then(function(){switch(u=u||function(m){switch(s(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c),u){case"string":return this.then(r).then(function(m){return this.set({src:n("div",{innerHTML:c,dompurify:m})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},o.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(a).then(function(u){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,u(this.prop.container,m)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(a).then(function(u){var m=this.opt.jsPDF,h=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=h,h)for(var g=0;g<h.length;++g){var v=h[g],N=v.src.find(function(w){return w.format==="truetype"});N&&m.addFont(N.url,v.ref.name,v.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,m.context2d.save(!0),u(this.prop.container,y)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(c,u,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(c,u):this.outputPdf(c,u)},o.prototype.outputPdf=function(c,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,u)})},o.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},o.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(c){if(s(c)!=="object")return this;var u=Object.keys(c||{}).map(function(m){if(m in o.template.prop)return function(){this.prop[m]=c[m]};switch(m){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[m]=c[m]}}},this);return this.then(function(){return this.thenList(u)})},o.prototype.get=function(c,u){return this.then(function(){var m=c in o.template.prop?this.prop[c]:this.opt[c];return u?u(m):m})},o.prototype.setMargin=function(c){return this.then(function(){switch(s(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},o.prototype.setPageSize=function(c){function u(m,h){return Math.floor(m*h/72*96)}return this.then(function(){(c=c||ia.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:u(c.inner.width,c.k),height:u(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},o.prototype.setProgress=function(c,u,m,h){return c!=null&&(this.progress.val=c),u!=null&&(this.progress.state=u),m!=null&&(this.progress.n=m),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(c,u,m,h){return this.setProgress(c?this.progress.val+c:null,u||null,m?this.progress.n+m:null,h?this.progress.stack.concat(h):null)},o.prototype.then=function(c,u){var m=this;return this.thenCore(c,u,function(h,p){return m.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(y){return m.updateProgress(null,h),y}).then(h,p).then(function(y){return m.updateProgress(1),y})})},o.prototype.thenCore=function(c,u,m){m=m||Promise.prototype.then;var h=this;c&&(c=c.bind(h)),u&&(u=u.bind(h));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?h:o.convert(Object.assign({},h),Promise.prototype),y=m.call(p,c,u);return o.convert(y,h.__proto__)},o.prototype.thenExternal=function(c,u){return Promise.prototype.then.call(this,c,u)},o.prototype.thenList=function(c){var u=this;return c.forEach(function(m){u=u.thenCore(m)}),u},o.prototype.catch=function(c){c&&(c=c.bind(this));var u=Promise.prototype.catch.call(this,c);return o.convert(u,this)},o.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},o.prototype.error=function(c){return this.then(function(){throw new Error(c)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,ia.getPageSize=function(c,u,m){if(fr(c)==="object"){var h=c;c=h.orientation,u=h.unit||u,m=h.format||m}u=u||"mm",m=m||"a4",c=(""+(c||"P")).toLowerCase();var p,y=(""+m).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+u}var v,N=0,w=0;if(g.hasOwnProperty(y))N=g[y][1]/p,w=g[y][0]/p;else try{N=m[1],w=m[0]}catch{throw new Error("Invalid format: "+m)}if(c==="p"||c==="portrait")c="p",w>N&&(v=w,w=N,N=v);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",N>w&&(v=w,w=N,N=v)}return{width:w,height:N,unit:u,k:p,orientation:c}},t.html=function(c,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(z2):null;var m=new o(u);return u.worker?m:m.from(c).doCallback()}}(ia.API),ia.API.addJS=function(t){return w7=t,this.internal.events.subscribe("postPutResources",function(){U0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(U0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),N7=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+w7+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){U0!==void 0&&N7!==void 0&&this.internal.out("/Names <</JavaScript "+U0+" 0 R>>")}),this},function(t){var a;t.events.push(["postPutResources",function(){var r=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=r.outline.render().split(/\r\n/),i=0;i<n.length;i++){var o=n[i],c=s.exec(o);if(c!=null){var u=c[1];r.internal.newObjectDeferredBegin(u,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var m=this.internal.pages.length,h=[];for(i=0;i<m;i++){var p=r.internal.newObject();h.push(p);var y=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<h.length;i++)r.internal.write("(page_"+(i+1)+")"+h[i]+" 0 R");r.internal.write(" ] >>","endobj"),a=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+a+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(s,n,i){var o={title:n,options:i,children:[]};return s==null&&(s=this.root),s.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(s){s.id=r.internal.newObjectDeferred();for(var n=0;n<s.children.length;n++)this.genIds_r(s.children[n])},r.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},r.outline.renderItems=function(s){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<s.children.length;i++){var o=s.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(s)),i>0&&this.line("/Prev "+this.makeRef(s.children[i-1])),i<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var c=this.count=this.count_r({count:0},o);if(c>0&&this.line("/Count "+c),o.options&&o.options.pageNumber){var u=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var m=0;m<s.children.length;m++)this.renderItems(s.children[m])},r.outline.line=function(s){this.ctx.val+=s+`\r
`},r.outline.makeRef=function(s){return s.id+" 0 R"},r.outline.makeString=function(s){return"("+r.internal.pdfEscape(s)+")"},r.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(s,n){for(var i=0;i<n.children.length;i++)s.count++,this.count_r(s,n.children[i]);return s.count}}])}(ia.API),function(t){var a=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,s,n,i,o,c){var u,m=this.decode.DCT_DECODE,h=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,u=function(p){for(var y,g=256*p.charCodeAt(4)+p.charCodeAt(5),v=p.length,N={width:0,height:0,numcomponents:1},w=4;w<v;w+=2){if(w+=g,a.indexOf(p.charCodeAt(w+1))!==-1){y=256*p.charCodeAt(w+5)+p.charCodeAt(w+6),N={width:256*p.charCodeAt(w+7)+p.charCodeAt(w+8),height:y,numcomponents:p.charCodeAt(w+9)};break}g=256*p.charCodeAt(w+2)+p.charCodeAt(w+3)}return N}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),u.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}h={data:r,width:u.width,height:u.height,colorSpace:c,bitsPerComponent:8,filter:m,index:s,alias:n}}return h}}(ia.API),ia.API.processPNG=function(t,a,r,s){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var n,i=kde(t,{checkCrc:!0}),o=i.width,c=i.height,u=i.channels,m=i.palette,h=i.depth;n=m&&u===1?function(A){for(var M=A.width,_=A.height,B=A.data,D=A.palette,C=A.depth,L=!1,H=[],V=[],Y=void 0,J=!1,W=0,X=0;X<D.length;X++){var te=kk(D[X],4),oe=te[0],q=te[1],G=te[2],z=te[3];H.push(oe,q,G),z!=null&&(z===0?(W++,V.length<1&&V.push(X)):z<255&&(J=!0))}if(J||W>1){L=!0,V=void 0;var Z=M*_;Y=new Uint8Array(Z);for(var Q=new DataView(B.buffer),fe=0;fe<Z;fe++){var he=B2(Q,fe,C),ne=kk(D[he],4)[3];Y[fe]=ne}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:B,alphaBytes:Y,needSMask:L,palette:H,mask:V}}(i):u===2||u===4?function(A){for(var M=A.data,_=A.width,B=A.height,D=A.channels,C=A.depth,L=D===2?"DeviceGray":"DeviceRGB",H=D-1,V=_*B,Y=H,J=V*Y,W=1*V,X=Math.ceil(J*C/8),te=Math.ceil(W*C/8),oe=new Uint8Array(X),q=new Uint8Array(te),G=new DataView(M.buffer),z=new DataView(oe.buffer),Z=new DataView(q.buffer),Q=!1,fe=0;fe<V;fe++){for(var he=fe*D,ne=0;ne<Y;ne++)D7(z,B2(G,he+ne,C),fe*Y+ne,C);var me=B2(G,he+Y,C);me<(1<<C)-1&&(Q=!0),D7(Z,me,1*fe,C)}return{colorSpace:L,colorsPerPixel:H,colorBytes:oe,alphaBytes:q,needSMask:Q}}(i):function(A){var M=A.data,_=A.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:_,colorsPerPixel:_==="DeviceGray"?1:3,colorBytes:M instanceof Uint8Array?M:new Uint8Array(M.buffer),needSMask:!1}}(i);var p,y,g,v=n,N=v.colorSpace,w=v.colorsPerPixel,j=v.colorBytes,T=v.alphaBytes,k=v.needSMask,R=v.palette,P=v.mask,$=null;return s!==ia.API.image_compression.NONE&&typeof gN=="function"?($=function(A){var M;switch(A){case ia.API.image_compression.FAST:M=11;break;case ia.API.image_compression.MEDIUM:M=13;break;case ia.API.image_compression.SLOW:M=14;break;default:M=12}return M}(s),p=this.decode.FLATE_DECODE,y="/Predictor ".concat($," "),t=k7(j,o*w,w,s),k&&(g=k7(T,o,1,s))):(p=void 0,y="",t=j,k&&(g=T)),y+="/Colors ".concat(w," /BitsPerComponent ").concat(h," /Columns ").concat(o),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:r,data:t,index:a,filter:p,decodeParameters:y,transparency:P,palette:R,sMask:g,predictor:$,width:o,height:c,bitsPerComponent:h,colorSpace:N}}},function(t){t.processGIF89A=function(a,r,s,n){var i=new Vde(a),o=i.width,c=i.height,u=[];i.decodeAndBlitFrameRGBA(0,u);var m={data:u,width:o,height:c},h=new F2(100).encode(m,100);return t.processJPEG.call(this,h,r,s,n)},t.processGIF87A=t.processGIF89A}(ia.API),bo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var a=0;a<t;a++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[a]={red:n,green:s,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},bo.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,a=this.width*this.height*4;this.data=new Uint8Array(a),this[t]()}catch(r){_r.log("bit decode error:"+r)}},bo.prototype.bit1=function(){var t,a=Math.ceil(this.width/8),r=a%4;for(t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,n=0;n<a;n++)for(var i=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+8*n*4,c=0;c<8&&8*n+c<this.width;c++){var u=this.palette[i>>7-c&1];this.data[o+4*c]=u.blue,this.data[o+4*c+1]=u.green,this.data[o+4*c+2]=u.red,this.data[o+4*c+3]=255}r!==0&&(this.pos+=4-r)}},bo.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),a=t%4,r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,n=0;n<t;n++){var i=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+2*n*4,c=i>>4,u=15&i,m=this.palette[c];if(this.data[o]=m.blue,this.data[o+1]=m.green,this.data[o+2]=m.red,this.data[o+3]=255,2*n+1>=this.width)break;m=this.palette[u],this.data[o+4]=m.blue,this.data[o+4+1]=m.green,this.data[o+4+2]=m.red,this.data[o+4+3]=255}a!==0&&(this.pos+=4-a)}},bo.prototype.bit8=function(){for(var t=this.width%4,a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,s=0;s<this.width;s++){var n=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*s;if(n<this.palette.length){var o=this.palette[n];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},bo.prototype.bit15=function(){for(var t=this.width%3,a=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,n=0;n<this.width;n++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&a)/a*255|0,c=(i>>5&a)/a*255|0,u=(i>>10&a)/a*255|0,m=i>>15?255:0,h=s*this.width*4+4*n;this.data[h]=u,this.data[h+1]=c,this.data[h+2]=o,this.data[h+3]=m}this.pos+=t}},bo.prototype.bit16=function(){for(var t=this.width%3,a=parseInt("11111",2),r=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(o&a)/a*255|0,u=(o>>5&r)/r*255|0,m=(o>>11)/a*255|0,h=n*this.width*4+4*i;this.data[h]=m,this.data[h+1]=u,this.data[h+2]=c,this.data[h+3]=255}this.pos+=t}},bo.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var a=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+4*r;this.data[o]=i,this.data[o+1]=n,this.data[o+2]=s,this.data[o+3]=255}this.pos+=this.width%4}},bo.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var a=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=a*this.width*4+4*r;this.data[c]=i,this.data[c+1]=n,this.data[c+2]=s,this.data[c+3]=o}},bo.prototype.getData=function(){return this.data},function(t){t.processBMP=function(a,r,s,n){var i=new bo(a,!1),o=i.width,c=i.height,u={data:i.getData(),width:o,height:c},m=new F2(100).encode(u,100);return t.processJPEG.call(this,m,r,s,n)}}(ia.API),L7.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(a,r,s,n){var i=new L7(a),o=i.width,c=i.height,u={data:i.getData(),width:o,height:c},m=new F2(100).encode(u,100);return t.processJPEG.call(this,m,r,s,n)}}(ia.API),ia.API.processRGBA=function(t,a,r){for(var s=t.data,n=s.length,i=new Uint8Array(n/4*3),o=new Uint8Array(n/4),c=0,u=0,m=0;m<n;m+=4){var h=s[m],p=s[m+1],y=s[m+2],g=s[m+3];i[c++]=h,i[c++]=p,i[c++]=y,o[u++]=g}var v=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:a,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ia.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},mh=ia.API,W0=mh.getCharWidthsArray=function(t,a){var r,s,n=(a=a||{}).font||this.internal.getFont(),i=a.fontSize||this.internal.getFontSize(),o=a.charSpace||this.internal.getCharSpace(),c=a.widths?a.widths:n.metadata.Unicode.widths,u=c.fof?c.fof:1,m=a.kerning?a.kerning:n.metadata.Unicode.kerning,h=m.fof?m.fof:1,p=a.doKerning!==!1,y=0,g=t.length,v=0,N=c[0]||u,w=[];for(r=0;r<g;r++)s=t.charCodeAt(r),typeof n.metadata.widthOfString=="function"?w.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(s))+o*(1e3/i)||0)/1e3):(y=p&&fr(m[s])==="object"&&!isNaN(parseInt(m[s][v],10))?m[s][v]/h:0,w.push((c[s]||N)/u+y)),v=s;return w},S7=mh.getStringUnitWidth=function(t,a){var r=(a=a||{}).fontSize||this.internal.getFontSize(),s=a.font||this.internal.getFont(),n=a.charSpace||this.internal.getCharSpace();return mh.processArabic&&(t=mh.processArabic(t)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(t,r,n)/r:W0.apply(this,arguments).reduce(function(i,o){return i+o},0)},_7=function(t,a,r,s){for(var n=[],i=0,o=t.length,c=0;i!==o&&c+a[i]<r;)c+=a[i],i++;n.push(t.slice(0,i));var u=i;for(c=0;i!==o;)c+a[i]>s&&(n.push(t.slice(u,i)),c=0,u=i),c+=a[i],i++;return u!==i&&n.push(t.slice(u,i)),n},C7=function(t,a,r){r||(r={});var s,n,i,o,c,u,m,h=[],p=[h],y=r.textIndent||0,g=0,v=0,N=t.split(" "),w=W0.apply(this,[" ",r])[0];if(u=r.lineIndent===-1?N[0].length+2:r.lineIndent||0){var j=Array(u).join(" "),T=[];N.map(function(R){(R=R.split(/\s*\n/)).length>1?T=T.concat(R.map(function(P,$){return($&&P.length?`
`:"")+P})):T.push(R[0])}),N=T,u=S7.apply(this,[j,r])}for(i=0,o=N.length;i<o;i++){var k=0;if(s=N[i],u&&s[0]==`
`&&(s=s.substr(1),k=1),y+g+(v=(n=W0.apply(this,[s,r])).reduce(function(R,P){return R+P},0))>a||k){if(v>a){for(c=_7.apply(this,[s,n,a-(y+g),a]),h.push(c.shift()),h=[c.pop()];c.length;)p.push([c.shift()]);v=n.slice(s.length-(h[0]?h[0].length:0)).reduce(function(R,P){return R+P},0)}else h=[s];p.push(h),y=v+u,g=w}else h.push(s),y+=g+v,g=w}return m=u?function(R,P){return(P?j:"")+R.join(" ")}:function(R){return R.join(" ")},p.map(m)},mh.splitTextToSize=function(t,a,r){var s,n=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var p=this.internal.getFont(h.fontName,h.fontStyle),y="Unicode";return p.metadata[y]?{widths:p.metadata[y].widths||{0:1},kerning:p.metadata[y].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);s=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*a/n;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/n:0,i.lineIndent=r.lineIndent;var c,u,m=[];for(c=0,u=s.length;c<u;c++)m=m.concat(C7.apply(this,[s[c],o,i]));return m},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var a="0123456789abcdef",r="klmnopqrstuvwxyz",s={},n={},i=0;i<16;i++)s[r[i]]=a[i],n[a[i]]=r[i];var o=function(y){return"0x"+parseInt(y,10).toString(16)},c=t.__fontmetrics__.compress=function(y){var g,v,N,w,j=["{"];for(var T in y){if(g=y[T],isNaN(parseInt(T,10))?v="'"+T+"'":(T=parseInt(T,10),v=(v=o(T).slice(2)).slice(0,-1)+n[v.slice(-1)]),typeof g=="number")g<0?(N=o(g).slice(3),w="-"):(N=o(g).slice(2),w=""),N=w+N.slice(0,-1)+n[N.slice(-1)];else{if(fr(g)!=="object")throw new Error("Don't know what to do with value type "+fr(g)+".");N=c(g)}j.push(v+N)}return j.push("}"),j.join("")},u=t.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,v,N,w,j={},T=1,k=j,R=[],P="",$="",A=y.length-1,M=1;M<A;M+=1)(w=y[M])=="'"?g?(N=g.join(""),g=void 0):g=[]:g?g.push(w):w=="{"?(R.push([k,N]),k={},N=void 0):w=="}"?((v=R.pop())[0][v[1]]=k,N=void 0,k=v[0]):w=="-"?T=-1:N===void 0?s.hasOwnProperty(w)?(P+=s[w],N=parseInt(P,16)*T,T=1,P=""):P+=w:s.hasOwnProperty(w)?($+=s[w],k[N]=parseInt($,16)*T,T=1,N=void 0,$=""):$+=w;return j},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},p={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(y){var g=y.font,v=p.Unicode[g.postScriptName];v&&(g.metadata.Unicode={},g.metadata.Unicode.widths=v.widths,g.metadata.Unicode.kerning=v.kerning);var N=h.Unicode[g.postScriptName];N&&(g.metadata.Unicode.encoding=N,g.encoding=N.codePages[0])}])}(ia.API),function(t){var a=function(r){for(var s=r.length,n=new Uint8Array(s),i=0;i<s;i++)n[i]=r.charCodeAt(i);return n};t.API.events.push(["addFont",function(r){var s=void 0,n=r.font,i=r.instance;if(!n.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(s=i.existsFileInVFS(n.postScriptName)===!1?i.loadFile(n.postScriptName):i.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(o,c){c=/^\x00\x01\x00\x00/.test(c)?a(c):a(ag(c)),o.metadata=t.API.TTFFont.open(c),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(n,s)}}])}(ia),ia.API.addSvgAsImage=function(t,a,r,s,n,i,o,c){if(isNaN(a)||isNaN(r))throw _r.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(n))throw _r.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=s,u.height=n;var m=u.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(ja.canvg?Promise.resolve(ja.canvg):v2(()=>import("./index.es-Bxv_UYrd.js"),[])).catch(function(y){return Promise.reject(new Error("Could not load canvg: "+y))}).then(function(y){return y.default?y.default:y}).then(function(y){return y.fromString(m,t,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(h)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),a,r,s,n,o,c)})},ia.API.putTotalPages=function(t){var a,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(a=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(a=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var n=0;n<this.internal.pages[s].length;n++)this.internal.pages[s][n]=this.internal.pages[s][n].replace(a,r);return this},ia.API.viewerPreferences=function(t,a){var r;t=t||{},a=a||!1;var s,n,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(o),u=[],m=0,h=0,p=0;function y(v,N){var w,j=!1;for(w=0;w<v.length;w+=1)v[w]===N&&(j=!0);return j}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||a===!0){var g=c.length;for(p=0;p<g;p+=1)r[c[p]].value=r[c[p]].defaultValue,r[c[p]].explicitSet=!1}if(fr(t)==="object"){for(n in t)if(i=t[n],y(c,n)&&i!==void 0){if(r[n].type==="boolean"&&typeof i=="boolean")r[n].value=i;else if(r[n].type==="name"&&y(r[n].valueSet,i))r[n].value=i;else if(r[n].type==="integer"&&Number.isInteger(i))r[n].value=i;else if(r[n].type==="array"){for(m=0;m<i.length;m+=1)if(s=!0,i[m].length===1&&typeof i[m][0]=="number")u.push(String(i[m]-1));else if(i[m].length>1){for(h=0;h<i[m].length;h+=1)typeof i[m][h]!="number"&&(s=!1);s===!0&&u.push([i[m][0]-1,i[m][1]-1].join(" "))}r[n].value="["+u.join(" ")+"]"}else r[n].value=r[n].defaultValue;r[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,N=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?N.push("/"+v+" /"+r[v].value):N.push("/"+v+" "+r[v].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var a=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',n=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(s)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),m=i.length+o.length+c.length+n.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+m+" >>"),this.internal.write("stream"),this.internal.write(n+i+o+c+u),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(s,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",a)),this}}(ia.API),function(t){var a=t.API,r=a.pdfEscape16=function(i,o){for(var c,u=o.metadata.Unicode.widths,m=["","0","00","000","0000"],h=[""],p=0,y=i.length;p<y;++p){if(c=o.metadata.characterToGlyph(i.charCodeAt(p)),o.metadata.glyIdsUsed.push(c),o.metadata.toUnicode[c]=i.charCodeAt(p),u.indexOf(c)==-1&&(u.push(c),u.push([parseInt(o.metadata.widthOfGlyph(c),10)])),c=="0")return h.join("");c=c.toString(16),h.push(m[4-c.length],c)}return h.join("")},s=function(i){var o,c,u,m,h,p,y;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],p=0,y=(c=Object.keys(i).sort(function(g,v){return g-v})).length;p<y;p++)o=c[p],u.length>=100&&(h+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(m=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),u.push("<"+o+"><"+m+">"));return u.length&&(h+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),h+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};a.events.push(["putFont",function(i){(function(o){var c=o.font,u=o.out,m=o.newObject,h=o.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="Identity-H"){for(var p=c.metadata.Unicode.widths,y=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),g="",v=0;v<y.length;v++)g+=String.fromCharCode(y[v]);var N=m();h({data:g,addLength1:!0,objectId:N}),u("endobj");var w=m();h({data:s(c.metadata.toUnicode),addLength1:!0,objectId:w}),u("endobj");var j=m();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+xh(c.fontName)),u("/FontFile2 "+N+" 0 R"),u("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),u("/Flags "+c.metadata.flags),u("/StemV "+c.metadata.stemV),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u(">>"),u("endobj");var T=m();u("<<"),u("/Type /Font"),u("/BaseFont /"+xh(c.fontName)),u("/FontDescriptor "+j+" 0 R"),u("/W "+t.API.PDFObject.convert(p)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+c.encoding+")"),u(">>"),u(">>"),u("endobj"),c.objectNumber=m(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+w+" 0 R"),u("/BaseFont /"+xh(c.fontName)),u("/Encoding /"+c.encoding),u("/DescendantFonts ["+T+" 0 R]"),u(">>"),u("endobj"),c.isAlreadyPutted=!0}})(i)}]),a.events.push(["putFont",function(i){(function(o){var c=o.font,u=o.out,m=o.newObject,h=o.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var p=c.metadata.rawData,y="",g=0;g<p.length;g++)y+=String.fromCharCode(p[g]);var v=m();h({data:y,addLength1:!0,objectId:v}),u("endobj");var N=m();h({data:s(c.metadata.toUnicode),addLength1:!0,objectId:N}),u("endobj");var w=m();u("<<"),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u("/StemV "+c.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+v+" 0 R"),u("/Flags 96"),u("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),u("/FontName /"+xh(c.fontName)),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u(">>"),u("endobj"),c.objectNumber=m();for(var j=0;j<c.metadata.hmtx.widths.length;j++)c.metadata.hmtx.widths[j]=parseInt(c.metadata.hmtx.widths[j]*(1e3/c.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+xh(c.fontName)+"/FontDescriptor "+w+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),u("endobj"),c.isAlreadyPutted=!0}})(i)}]);var n=function(i){var o,c=i.text||"",u=i.x,m=i.y,h=i.options||{},p=i.mutex||{},y=p.pdfEscape,g=p.activeFontKey,v=p.fonts,N=g,w="",j=0,T="",k=v[N].encoding;if(v[N].encoding!=="Identity-H")return{text:c,x:u,y:m,options:h,mutex:p};for(T=c,N=g,Array.isArray(c)&&(T=c[0]),j=0;j<T.length;j+=1)v[N].metadata.hasOwnProperty("cmap")&&(o=v[N].metadata.cmap.unicode.codeMap[T[j].charCodeAt(0)]),o||T[j].charCodeAt(0)<256&&v[N].metadata.hasOwnProperty("Unicode")?w+=T[j]:w+="";var R="";return parseInt(N.slice(1))<14||k==="WinAnsiEncoding"?R=y(w,N).split("").map(function(P){return P.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(R=r(w,v[N])),p.isHex=!0,{text:R,x:u,y:m,options:h,mutex:p}};a.events.push(["postProcessText",function(i){var o=i.text||"",c=[],u={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var m=0;for(m=0;m<o.length;m+=1)Array.isArray(o[m])&&o[m].length===3?c.push([n(Object.assign({},u,{text:o[m][0]})).text,o[m][1],o[m][2]]):c.push(n(Object.assign({},u,{text:o[m]})).text);i.text=c}else i.text=n(Object.assign({},u,{text:o})).text}])}(ia),function(t){var a=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return a.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,s){return a.call(this),this.internal.vFS[r]=s,this},t.getFileFromVFS=function(r){return a.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(ia.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(s){var n,i,o,c,u,m,h,p=a,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},w=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),T=!1,k=0;this.__bidiEngine__={};var R=function(D){var C=D.charCodeAt(),L=C>>8,H=N[L];return H!==void 0?p[256*H+(255&C)]:L===252||L===253?"AL":j.test(L)?"L":L===8?"R":"N"},P=function(D){for(var C,L=0;L<D.length;L++){if((C=R(D.charAt(L)))==="L")return!1;if(C==="R")return!0}return!1},$=function(D,C,L,H){var V,Y,J,W,X=C[H];switch(X){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":T=!1;break;case"N":case"AN":break;case"EN":T&&(X="AN");break;case"AL":T=!0,X="R";break;case"WS":case"BN":X="N";break;case"CS":H<1||H+1>=C.length||(V=L[H-1])!=="EN"&&V!=="AN"||(Y=C[H+1])!=="EN"&&Y!=="AN"?X="N":T&&(Y="AN"),X=Y===V?Y:"N";break;case"ES":X=(V=H>0?L[H-1]:"B")==="EN"&&H+1<C.length&&C[H+1]==="EN"?"EN":"N";break;case"ET":if(H>0&&L[H-1]==="EN"){X="EN";break}if(T){X="N";break}for(J=H+1,W=C.length;J<W&&C[J]==="ET";)J++;X=J<W&&C[J]==="EN"?"EN":"N";break;case"NSM":if(o&&!c){for(W=C.length,J=H+1;J<W&&C[J]==="NSM";)J++;if(J<W){var te=D[H],oe=te>=1425&&te<=2303||te===64286;if(V=C[J],oe&&(V==="R"||V==="AL")){X="R";break}}}X=H<1||(V=C[H-1])==="B"?"N":L[H-1];break;case"B":T=!1,n=!0,X=k;break;case"S":i=!0,X="N"}return X},A=function(D,C,L){var H=D.split("");return L&&M(H,L,{hiLevel:k}),H.reverse(),C&&C.reverse(),H.join("")},M=function(D,C,L){var H,V,Y,J,W,X=-1,te=D.length,oe=0,q=[],G=k?g:y,z=[];for(T=!1,n=!1,i=!1,V=0;V<te;V++)z[V]=R(D[V]);for(Y=0;Y<te;Y++){if(W=oe,q[Y]=$(D,z,q,Y),H=240&(oe=G[W][v[q[Y]]]),oe&=15,C[Y]=J=G[oe][5],H>0)if(H===16){for(V=X;V<Y;V++)C[V]=1;X=-1}else X=-1;if(G[oe][6])X===-1&&(X=Y);else if(X>-1){for(V=X;V<Y;V++)C[V]=J;X=-1}z[Y]==="B"&&(C[Y]=0),L.hiLevel|=J}i&&function(Z,Q,fe){for(var he=0;he<fe;he++)if(Z[he]==="S"){Q[he]=k;for(var ne=he-1;ne>=0&&Z[ne]==="WS";ne--)Q[ne]=k}}(z,C,te)},_=function(D,C,L,H,V){if(!(V.hiLevel<D)){if(D===1&&k===1&&!n)return C.reverse(),void(L&&L.reverse());for(var Y,J,W,X,te=C.length,oe=0;oe<te;){if(H[oe]>=D){for(W=oe+1;W<te&&H[W]>=D;)W++;for(X=oe,J=W-1;X<J;X++,J--)Y=C[X],C[X]=C[J],C[J]=Y,L&&(Y=L[X],L[X]=L[J],L[J]=Y);oe=W}oe++}}},B=function(D,C,L){var H=D.split(""),V={hiLevel:k};return L||(L=[]),M(H,L,V),function(Y,J,W){if(W.hiLevel!==0&&h)for(var X,te=0;te<Y.length;te++)J[te]===1&&(X=w.indexOf(Y[te]))>=0&&(Y[te]=w[X+1])}(H,L,V),_(2,H,C,L,V),_(1,H,C,L,V),H.join("")};return this.__bidiEngine__.doBidiReorder=function(D,C,L){if(function(V,Y){if(Y)for(var J=0;J<V.length;J++)Y[J]=J;c===void 0&&(c=P(V)),m===void 0&&(m=P(V))}(D,C),o||!u||m)if(o&&u&&c^m)k=c?1:0,D=A(D,C,L);else if(!o&&u&&m)k=c?1:0,D=B(D,C,L),D=A(D,C);else if(!o||c||u||m){if(o&&!u&&c^m)D=A(D,C),c?(k=0,D=B(D,C,L)):(k=1,D=B(D,C,L),D=A(D,C));else if(o&&c&&!u&&m)k=1,D=B(D,C,L),D=A(D,C);else if(!o&&!u&&c^m){var H=h;c?(k=1,D=B(D,C,L),k=0,h=!1,D=B(D,C,L),h=H):(k=0,D=B(D,C,L),D=A(D,C),k=1,h=!1,D=B(D,C,L),h=H,D=A(D,C))}}else k=0,D=B(D,C,L);else k=c?1:0,D=B(D,C,L);return D},this.__bidiEngine__.setOptions=function(D){D&&(o=D.isInputVisual,u=D.isOutputVisual,c=D.isInputRtl,m=D.isOutputRtl,h=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var a=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(s){var n=s.text;s.x,s.y;var i=s.options||{};s.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(n)==="[object Array]"){var c=0;for(o=[],c=0;c<n.length;c+=1)Object.prototype.toString.call(n[c])==="[object Array]"?o.push([r.doBidiReorder(n[c][0]),n[c][1],n[c][2]]):o.push([r.doBidiReorder(n[c])]);s.text=o}else s.text=r.doBidiReorder(n);r.setOptions({isInputVisual:!0})}])}(ia),ia.API.TTFFont=function(){function t(a){var r;if(this.rawData=a,r=this.contents=new uu(a),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new cue(this),this.registerTTF()}return t.open=function(a){return new t(a)},t.prototype.parse=function(){return this.directory=new Kde(this.contents),this.head=new Jde(this),this.name=new aue(this),this.cmap=new vL(this),this.toUnicode={},this.hhea=new Zde(this),this.maxp=new rue(this),this.hmtx=new sue(this),this.post=new eue(this),this.os2=new Qde(this),this.loca=new oue(this),this.glyf=new nue(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var a,r,s,n,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,c,u,m;for(m=[],o=0,c=(u=this.bbox).length;o<c;o++)a=u[o],m.push(Math.round(a*this.scaleFactor));return m}).call(this),this.stemV=0,this.post.exists?(s=255&(n=this.post.italic_angle),32768&(r=n>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(a){var r;return((r=this.cmap.unicode)!=null?r.codeMap[a]:void 0)||0},t.prototype.widthOfGlyph=function(a){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(a).advance*r},t.prototype.widthOfString=function(a,r,s){var n,i,o,c;for(o=0,i=0,c=(a=""+a).length;0<=c?i<c:i>c;i=0<=c?++i:--i)n=a.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(n))+s*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(a,r){var s;return r==null&&(r=!1),s=r?this.lineGap:0,(this.ascender+s-this.decender)/1e3*a},t}();var Po,uu=function(){function t(a){this.data=a??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(a){return this.data[this.pos++]=a},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(a){return this.writeByte(a>>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},t.prototype.readInt32=function(){var a;return(a=this.readUInt32())>=2147483648?a-4294967296:a},t.prototype.writeInt32=function(a){return a<0&&(a+=4294967296),this.writeUInt32(a)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(a){return this.writeByte(a>>8&255),this.writeByte(255&a)},t.prototype.readInt16=function(){var a;return(a=this.readUInt16())>=32768?a-65536:a},t.prototype.writeInt16=function(a){return a<0&&(a+=65536),this.writeUInt16(a)},t.prototype.readString=function(a){var r,s;for(s=[],r=0;0<=a?r<a:r>a;r=0<=a?++r:--r)s[r]=String.fromCharCode(this.readByte());return s.join("")},t.prototype.writeString=function(a){var r,s,n;for(n=[],r=0,s=a.length;0<=s?r<s:r>s;r=0<=s?++r:--r)n.push(this.writeByte(a.charCodeAt(r)));return n},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(a){return this.writeInt16(a)},t.prototype.readLongLong=function(){var a,r,s,n,i,o,c,u;return a=this.readByte(),r=this.readByte(),s=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),c=this.readByte(),u=this.readByte(),128&a?-1*(72057594037927940*(255^a)+281474976710656*(255^r)+1099511627776*(255^s)+4294967296*(255^n)+16777216*(255^i)+65536*(255^o)+256*(255^c)+(255^u)+1):72057594037927940*a+281474976710656*r+1099511627776*s+4294967296*n+16777216*i+65536*o+256*c+u},t.prototype.writeLongLong=function(a){var r,s;return r=Math.floor(a/4294967296),s=4294967295&a,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(a){return this.writeInt32(a)},t.prototype.read=function(a){var r,s;for(r=[],s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)r.push(this.readByte());return r},t.prototype.write=function(a){var r,s,n,i;for(i=[],s=0,n=a.length;s<n;s++)r=a[s],i.push(this.writeByte(r));return i},t}(),Kde=function(){var t;function a(r){var s,n,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:n>i;n=0<=i?++n:--n)s={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[s.tag]=s}return a.prototype.encode=function(r){var s,n,i,o,c,u,m,h,p,y,g,v,N;for(N in g=Object.keys(r).length,u=Math.log(2),p=16*Math.floor(Math.log(g)/u),o=Math.floor(p/u),h=16*g-p,(n=new uu).writeInt(this.scalarType),n.writeShort(g),n.writeShort(p),n.writeShort(o),n.writeShort(h),i=16*g,m=n.pos+i,c=null,v=[],r)for(y=r[N],n.writeString(N),n.writeInt(t(y)),n.writeInt(m),n.writeInt(y.length),v=v.concat(y),N==="head"&&(c=m),m+=y.length;m%4;)v.push(0),m++;return n.write(v),s=2981146554-t(n.data),n.pos=c+8,n.writeUInt32(s),n.data},t=function(r){var s,n,i,o;for(r=jL.call(r);r.length%4;)r.push(0);for(i=new uu(r),n=0,s=0,o=r.length;s<o;s=s+=4)n+=i.readUInt32();return 4294967295&n},a}(),Xde={}.hasOwnProperty,uc=function(t,a){for(var r in a)Xde.call(a,r)&&(t[r]=a[r]);function s(){this.constructor=t}return s.prototype=a.prototype,t.prototype=new s,t.__super__=a.prototype,t};Po=function(){function t(a){var r;this.file=a,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Jde=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Po),t.prototype.tag="head",t.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.revision=a.readInt(),this.checkSumAdjustment=a.readInt(),this.magicNumber=a.readInt(),this.flags=a.readShort(),this.unitsPerEm=a.readShort(),this.created=a.readLongLong(),this.modified=a.readLongLong(),this.xMin=a.readShort(),this.yMin=a.readShort(),this.xMax=a.readShort(),this.yMax=a.readShort(),this.macStyle=a.readShort(),this.lowestRecPPEM=a.readShort(),this.fontDirectionHint=a.readShort(),this.indexToLocFormat=a.readShort(),this.glyphDataFormat=a.readShort()},t.prototype.encode=function(a){var r;return(r=new uu).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(a),r.writeShort(this.glyphDataFormat),r.data},t}(),M7=function(){function t(a,r){var s,n,i,o,c,u,m,h,p,y,g,v,N,w,j,T,k;switch(this.platformID=a.readUInt16(),this.encodingID=a.readShort(),this.offset=r+a.readInt(),p=a.pos,a.pos=this.offset,this.format=a.readUInt16(),this.length=a.readUInt16(),this.language=a.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=a.readByte();break;case 4:for(g=a.readUInt16(),y=g/2,a.pos+=6,i=function(){var R,P;for(P=[],u=R=0;0<=y?R<y:R>y;u=0<=y?++R:--R)P.push(a.readUInt16());return P}(),a.pos+=2,N=function(){var R,P;for(P=[],u=R=0;0<=y?R<y:R>y;u=0<=y?++R:--R)P.push(a.readUInt16());return P}(),m=function(){var R,P;for(P=[],u=R=0;0<=y?R<y:R>y;u=0<=y?++R:--R)P.push(a.readUInt16());return P}(),h=function(){var R,P;for(P=[],u=R=0;0<=y?R<y:R>y;u=0<=y?++R:--R)P.push(a.readUInt16());return P}(),n=(this.length-a.pos+this.offset)/2,c=function(){var R,P;for(P=[],u=R=0;0<=n?R<n:R>n;u=0<=n?++R:--R)P.push(a.readUInt16());return P}(),u=j=0,k=i.length;j<k;u=++j)for(w=i[u],s=T=v=N[u];v<=w?T<=w:T>=w;s=v<=w?++T:--T)h[u]===0?o=s+m[u]:(o=c[h[u]/2+(s-v)-(y-u)]||0)!==0&&(o+=m[u]),this.codeMap[s]=65535&o}a.pos=p}return t.encode=function(a,r){var s,n,i,o,c,u,m,h,p,y,g,v,N,w,j,T,k,R,P,$,A,M,_,B,D,C,L,H,V,Y,J,W,X,te,oe,q,G,z,Z,Q,fe,he,ne,me,pe,ie;switch(H=new uu,o=Object.keys(a).sort(function(ke,Ae){return ke-Ae}),r){case"macroman":for(N=0,w=function(){var ke=[];for(v=0;v<256;++v)ke.push(0);return ke}(),T={0:0},i={},V=0,X=o.length;V<X;V++)T[ne=a[n=o[V]]]==null&&(T[ne]=++N),i[n]={old:a[n],new:T[a[n]]},w[n]=T[a[n]];return H.writeUInt16(1),H.writeUInt16(0),H.writeUInt32(12),H.writeUInt16(0),H.writeUInt16(262),H.writeUInt16(0),H.write(w),{charMap:i,subtable:H.data,maxGlyphID:N+1};case"unicode":for(C=[],p=[],k=0,T={},s={},j=m=null,Y=0,te=o.length;Y<te;Y++)T[P=a[n=o[Y]]]==null&&(T[P]=++k),s[n]={old:P,new:T[P]},c=T[P]-n,j!=null&&c===m||(j&&p.push(j),C.push(n),m=c),j=n;for(j&&p.push(j),p.push(65535),C.push(65535),B=2*(_=C.length),M=2*Math.pow(Math.log(_)/Math.LN2,2),y=Math.log(M/2)/Math.LN2,A=2*_-M,u=[],$=[],g=[],v=J=0,oe=C.length;J<oe;v=++J){if(D=C[v],h=p[v],D===65535){u.push(0),$.push(0);break}if(D-(L=s[D].new)>=32768)for(u.push(0),$.push(2*(g.length+_-v)),n=W=D;D<=h?W<=h:W>=h;n=D<=h?++W:--W)g.push(s[n].new);else u.push(L-D),$.push(0)}for(H.writeUInt16(3),H.writeUInt16(1),H.writeUInt32(12),H.writeUInt16(4),H.writeUInt16(16+8*_+2*g.length),H.writeUInt16(0),H.writeUInt16(B),H.writeUInt16(M),H.writeUInt16(y),H.writeUInt16(A),fe=0,q=p.length;fe<q;fe++)n=p[fe],H.writeUInt16(n);for(H.writeUInt16(0),he=0,G=C.length;he<G;he++)n=C[he],H.writeUInt16(n);for(me=0,z=u.length;me<z;me++)c=u[me],H.writeUInt16(c);for(pe=0,Z=$.length;pe<Z;pe++)R=$[pe],H.writeUInt16(R);for(ie=0,Q=g.length;ie<Q;ie++)N=g[ie],H.writeUInt16(N);return{charMap:s,subtable:H.data,maxGlyphID:k+1}}},t}(),vL=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Po),t.prototype.tag="cmap",t.prototype.parse=function(a){var r,s,n;for(a.pos=this.offset,this.version=a.readUInt16(),n=a.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)r=new M7(a,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(a,r){var s,n;return r==null&&(r="macroman"),s=M7.encode(a,r),(n=new uu).writeUInt16(0),n.writeUInt16(1),s.table=n.data.concat(s.subtable),s},t}(),Zde=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Po),t.prototype.tag="hhea",t.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.ascender=a.readShort(),this.decender=a.readShort(),this.lineGap=a.readShort(),this.advanceWidthMax=a.readShort(),this.minLeftSideBearing=a.readShort(),this.minRightSideBearing=a.readShort(),this.xMaxExtent=a.readShort(),this.caretSlopeRise=a.readShort(),this.caretSlopeRun=a.readShort(),this.caretOffset=a.readShort(),a.pos+=8,this.metricDataFormat=a.readShort(),this.numberOfMetrics=a.readUInt16()},t}(),Qde=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Po),t.prototype.tag="OS/2",t.prototype.parse=function(a){if(a.pos=this.offset,this.version=a.readUInt16(),this.averageCharWidth=a.readShort(),this.weightClass=a.readUInt16(),this.widthClass=a.readUInt16(),this.type=a.readShort(),this.ySubscriptXSize=a.readShort(),this.ySubscriptYSize=a.readShort(),this.ySubscriptXOffset=a.readShort(),this.ySubscriptYOffset=a.readShort(),this.ySuperscriptXSize=a.readShort(),this.ySuperscriptYSize=a.readShort(),this.ySuperscriptXOffset=a.readShort(),this.ySuperscriptYOffset=a.readShort(),this.yStrikeoutSize=a.readShort(),this.yStrikeoutPosition=a.readShort(),this.familyClass=a.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(a.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(a.readInt());return s}(),this.vendorID=a.readString(4),this.selection=a.readShort(),this.firstCharIndex=a.readShort(),this.lastCharIndex=a.readShort(),this.version>0&&(this.ascent=a.readShort(),this.descent=a.readShort(),this.lineGap=a.readShort(),this.winAscent=a.readShort(),this.winDescent=a.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(a.readInt());return s}(),this.version>1))return this.xHeight=a.readShort(),this.capHeight=a.readShort(),this.defaultChar=a.readShort(),this.breakChar=a.readShort(),this.maxContext=a.readShort()},t}(),eue=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Po),t.prototype.tag="post",t.prototype.parse=function(a){var r,s,n;switch(a.pos=this.offset,this.format=a.readInt(),this.italicAngle=a.readInt(),this.underlinePosition=a.readShort(),this.underlineThickness=a.readShort(),this.isFixedPitch=a.readInt(),this.minMemType42=a.readInt(),this.maxMemType42=a.readInt(),this.minMemType1=a.readInt(),this.maxMemType1=a.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(s=a.readUInt16(),this.glyphNameIndex=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)this.glyphNameIndex.push(a.readUInt16());for(this.names=[],n=[];a.pos<this.offset+this.length;)r=a.readByte(),n.push(this.names.push(a.readString(r)));return n;case 151552:return s=a.readUInt16(),this.offsets=a.read(s);case 262144:return this.map=(function(){var o,c,u;for(u=[],i=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;i=0<=c?++o:--o)u.push(a.readUInt32());return u}).call(this)}},t}(),tue=function(t,a){this.raw=t,this.length=t.length,this.platformID=a.platformID,this.encodingID=a.encodingID,this.languageID=a.languageID},aue=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Po),t.prototype.tag="name",t.prototype.parse=function(a){var r,s,n,i,o,c,u,m,h,p,y;for(a.pos=this.offset,a.readShort(),r=a.readShort(),c=a.readShort(),s=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)s.push({platformID:a.readShort(),encodingID:a.readShort(),languageID:a.readShort(),nameID:a.readShort(),length:a.readShort(),offset:this.offset+c+a.readShort()});for(u={},i=h=0,p=s.length;h<p;i=++h)n=s[i],a.pos=n.offset,m=a.readString(n.length),o=new tue(m,n),u[y=n.nameID]==null&&(u[y]=[]),u[n.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),rue=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Po),t.prototype.tag="maxp",t.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.numGlyphs=a.readUInt16(),this.maxPoints=a.readUInt16(),this.maxContours=a.readUInt16(),this.maxCompositePoints=a.readUInt16(),this.maxComponentContours=a.readUInt16(),this.maxZones=a.readUInt16(),this.maxTwilightPoints=a.readUInt16(),this.maxStorage=a.readUInt16(),this.maxFunctionDefs=a.readUInt16(),this.maxInstructionDefs=a.readUInt16(),this.maxStackElements=a.readUInt16(),this.maxSizeOfInstructions=a.readUInt16(),this.maxComponentElements=a.readUInt16(),this.maxComponentDepth=a.readUInt16()},t}(),sue=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Po),t.prototype.tag="hmtx",t.prototype.parse=function(a){var r,s,n,i,o,c,u;for(a.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:a.readUInt16(),lsb:a.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var m,h;for(h=[],r=m=0;0<=n?m<n:m>n;r=0<=n?++m:--m)h.push(a.readInt16());return h}(),this.widths=(function(){var m,h,p,y;for(y=[],m=0,h=(p=this.metrics).length;m<h;m++)i=p[m],y.push(i.advance);return y}).call(this),s=this.widths[this.widths.length-1],u=[],r=o=0;0<=n?o<n:o>n;r=0<=n?++o:--o)u.push(this.widths.push(s));return u},t.prototype.forGlyph=function(a){return a in this.metrics?this.metrics[a]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[a-this.metrics.length]}},t}(),jL=[].slice,nue=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Po),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(a){var r,s,n,i,o,c,u,m,h,p;return a in this.cache?this.cache[a]:(i=this.file.loca,r=this.file.contents,s=i.indexOf(a),(n=i.lengthOf(a))===0?this.cache[a]=null:(r.pos=this.offset+s,o=(c=new uu(r.read(n))).readShort(),m=c.readShort(),p=c.readShort(),u=c.readShort(),h=c.readShort(),this.cache[a]=o===-1?new lue(c,m,p,u,h):new iue(c,o,m,p,u,h),this.cache[a]))},t.prototype.encode=function(a,r,s){var n,i,o,c,u;for(o=[],i=[],c=0,u=r.length;c<u;c++)n=a[r[c]],i.push(o.length),n&&(o=o.concat(n.encode(s)));return i.push(o.length),{table:o,offsets:i}},t}(),iue=function(){function t(a,r,s,n,i,o){this.raw=a,this.numberOfContours=r,this.xMin=s,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),lue=function(){function t(a,r,s,n,i){var o,c;for(this.raw=a,this.xMin=r,this.yMin=s,this.xMax=n,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;c=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&c;)o.pos+=1&c?4:2,128&c?o.pos+=8:64&c?o.pos+=4:8&c&&(o.pos+=2)}return t.prototype.encode=function(){var a,r,s;for(r=new uu(jL.call(this.raw.data)),a=0,s=this.glyphIDs.length;a<s;++a)r.pos=this.glyphOffsets[a];return r.data},t}(),oue=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return uc(t,Po),t.prototype.tag="loca",t.prototype.parse=function(a){var r,s;return a.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var n,i;for(i=[],s=0,n=this.length;s<n;s+=2)i.push(2*a.readUInt16());return i}).call(this):(function(){var n,i;for(i=[],s=0,n=this.length;s<n;s+=4)i.push(a.readUInt32());return i}).call(this)},t.prototype.indexOf=function(a){return this.offsets[a]},t.prototype.lengthOf=function(a){return this.offsets[a+1]-this.offsets[a]},t.prototype.encode=function(a,r){for(var s=new Uint32Array(this.offsets.length),n=0,i=0,o=0;o<s.length;++o)if(s[o]=n,i<r.length&&r[i]==o){++i,s[o]=n;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(n+=u)}for(var m=new Array(4*s.length),h=0;h<s.length;++h)m[4*h+3]=255&s[h],m[4*h+2]=(65280&s[h])>>8,m[4*h+1]=(16711680&s[h])>>16,m[4*h]=(4278190080&s[h])>>24;return m},t}(),cue=function(){function t(a){this.font=a,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var a,r,s,n,i;for(r in n=this.font.cmap.tables[0].codeMap,a={},i=this.subset)s=i[r],a[r]=n[s];return a},t.prototype.glyphsFor=function(a){var r,s,n,i,o,c,u;for(n={},o=0,c=a.length;o<c;o++)n[i=a[o]]=this.font.glyf.glyphFor(i);for(i in r=[],n)(s=n[i])!=null&&s.compound&&r.push.apply(r,s.glyphIDs);if(r.length>0)for(i in u=this.glyphsFor(r))s=u[i],n[i]=s;return n},t.prototype.encode=function(a,r){var s,n,i,o,c,u,m,h,p,y,g,v,N,w,j;for(n in s=vL.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(a),g={0:0},j=s.charMap)g[(u=j[n]).old]=u.new;for(v in y=s.maxGlyphID,o)v in g||(g[v]=y++);return h=function(T){var k,R;for(k in R={},T)R[T[k]]=k;return R}(g),p=Object.keys(h).sort(function(T,k){return T-k}),N=function(){var T,k,R;for(R=[],T=0,k=p.length;T<k;T++)c=p[T],R.push(h[c]);return R}(),i=this.font.glyf.encode(o,N,g),m=this.font.loca.encode(i.offsets,N),w={cmap:this.font.cmap.raw(),glyf:i.table,loca:m,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(w["OS/2"]=this.font.os2.raw()),this.font.directory.encode(w)},t}();ia.API.PDFObject=function(){var t;function a(){}return t=function(r,s){return(Array(s+1).join("0")+r).slice(-s)},a.convert=function(r){var s,n,i,o;if(Array.isArray(r))return"["+function(){var c,u,m;for(m=[],c=0,u=r.length;c<u;c++)s=r[c],m.push(a.convert(s));return m}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(n in i=["<<"],r)o=r[n],i.push("/"+n+" "+a.convert(o));return i.push(">>"),i.join(`
`)}return""+r},a}();const ny=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState(""),[i,o]=x.useState(null),[c,u]=x.useState([]),[m,h]=x.useState([]),[p,y]=x.useState([]),[g]=x.useState([{id:"cash",name:"Cash"},{id:"bank_transfer",name:"Bank Transfer"},{id:"cheque",name:"Cheque"},{id:"mobile_money",name:"Mobile Money"},{id:"other",name:"Other"}]),[v,N]=x.useState([]),[w,j]=x.useState(null),[T,k]=x.useState(!1),[R,P]=x.useState(!1),[$,A]=x.useState(null),[M,_]=x.useState({student_reg_number:"",gradelevel_class_id:"",term:"",academic_year:"",invoice_structure_id:"",amount:"",currency_id:"",payment_method_id:"",payment_date:new Date().toISOString().split("T")[0],reference_number:"",notes:""}),[B,D]=x.useState(!1),[C,L]=x.useState(!1),[H,V]=x.useState(""),[Y,J]=x.useState("");x.useEffect(()=>{W(),X()},[]),x.useEffect(()=>{M.gradelevel_class_id&&M.term&&M.academic_year&&te()},[M.gradelevel_class_id,M.term,M.academic_year]);const W=async()=>{try{console.log(" Fetching classes from:",`${se}/classes/gradelevel-classes`);const ne=await re.get(`${se}/classes/gradelevel-classes`,{headers:{Authorization:`Bearer ${t}`}});console.log(" Classes response:",ne.data),h(ne.data.data||[]),console.log(" Classes set:",ne.data.data||[])}catch(ne){console.error("Error fetching classes:",ne),ne.response&&console.error("Error response:",ne.response.data)}},X=async()=>{try{const ne=await re.get(`${se}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}});y(ne.data.data||[])}catch(ne){console.error("Error fetching currencies:",ne)}},te=async()=>{try{const ne=await re.get(`${se}/fees/invoice-structures/class/${M.gradelevel_class_id}?term=${M.term}&academic_year=${M.academic_year}`,{headers:{Authorization:`Bearer ${t}`}});N(ne.data.data||[])}catch(ne){console.error("Error fetching invoice structures:",ne),N([])}},oe=async()=>{if(s.trim()){r(!0);try{const ne=await re.get(`${se}/students/search?query=${s}`,{headers:{Authorization:`Bearer ${t}`}});u(ne.data.data||[])}catch(ne){console.error("Error searching students:",ne),u([])}finally{r(!1)}}},q=ne=>{o(ne),_(me=>({...me,student_reg_number:ne.RegNumber})),u([]),n("")},G=ne=>{j(ne),_(me=>({...me,invoice_structure_id:ne.id,currency_id:ne.currency_id}))},z=()=>{const ne=Date.now(),me=Math.floor(Math.random()*1e3);return`INV-${ne}-${me}`},Z=async ne=>{if(ne.preventDefault(),!i){J("Please select a student"),L(!0);return}if(!M.amount||!M.currency_id||!M.payment_method_id){J("Please fill in all required fields"),L(!0);return}if(!M.reference_number.trim()){J("Please enter a reference number"),L(!0);return}k(!0)},Q=async()=>{r(!0),J("");try{const ne={student_reg_number:i.RegNumber,payment_amount:parseFloat(M.amount),payment_currency:M.currency_id,payment_method:g.find(pe=>pe.id===M.payment_method_id)?.name||"Cash",payment_date:M.payment_date,reference_number:M.reference_number,notes:M.notes&&M.notes.trim()||(M.invoice_structure_id?null:"Payment for outstanding debt (no invoice)"),fee_type:"tuition"};M.invoice_structure_id&&(ne.invoice_structure_id=M.invoice_structure_id);const me=await re.post(`${se}/fees/payments`,ne,{headers:{Authorization:`Bearer ${t}`}});if(me.data.success){const pe={receipt_number:me.data.data.receipt_number,student_name:`${i.Name} ${i.Surname}`,student_reg:i.RegNumber,amount:M.amount,currency:p.find(ie=>ie.id===M.currency_id)?.symbol||"",payment_date:M.payment_date,payment_method:g.find(ie=>ie.id===M.payment_method_id)?.name||"Cash",fee_type:"tuition",reference_number:M.reference_number,class_name:w?.class_name||"N/A",term:w?.term||"N/A",academic_year:w?.academic_year||"N/A",notes:M.notes||""};A(pe),k(!1),P(!0),V("Payment processed successfully"),D(!0),_({student_reg_number:"",gradelevel_class_id:"",term:"",academic_year:"",invoice_structure_id:"",amount:"",currency_id:"",payment_method_id:"",payment_date:new Date().toISOString().split("T")[0],reference_number:"",notes:""}),o(null),j(null)}}catch(ne){console.error("Error processing payment:",ne),ne.response&&ne.response.data&&ne.response.data.message?J(ne.response.data.message):J("Failed to process payment"),L(!0),k(!1)}finally{r(!1)}},fe=()=>{k(!1),J("")},he=()=>{if(!$)return;const ne=new ia;ne.setFont("helvetica"),ne.setFontSize(16),ne.text("PAYMENT RECEIPT",105,20,{align:"center"}),ne.setLineWidth(.5),ne.line(20,25,190,25),ne.setFontSize(10),ne.text("Receipt Number:",20,40),ne.text($.receipt_number,60,40),ne.text("Date:",20,50),ne.text($.payment_date,60,50),ne.setFontSize(12),ne.text("Student Information:",20,70),ne.setFontSize(10),ne.text("Name:",20,80),ne.text($.student_name,60,80),ne.text("Registration:",20,90),ne.text($.student_reg,60,90),ne.setFontSize(12),ne.text("Payment Details:",20,110),ne.setFontSize(10),ne.text("Amount:",20,120),ne.text(`${$.amount} ${$.currency}`,60,120),ne.text("Payment Method:",20,130),ne.text($.payment_method,60,130),ne.text("Reference Number:",20,140),ne.text($.reference_number,60,140),ne.text("Fee Type:",20,150),ne.text($.fee_type,60,150),$.class_name!=="N/A"?(ne.text("Class:",20,160),ne.text($.class_name,60,160),ne.text("Term:",20,170),ne.text(`${$.term} ${$.academic_year}`,60,170)):(ne.text("Payment Type:",20,160),ne.text("General Payment (No Invoice)",60,160)),$.notes&&(ne.text("Notes:",20,180),ne.text($.notes.substring(0,50),60,180)),ne.setLineWidth(.5),ne.line(20,190,190,190),ne.setFontSize(10),ne.text("Thank you for your payment!",105,200,{align:"center"}),ne.text(`Generated on: ${new Date().toLocaleString()}`,105,210,{align:"center"}),ne.save(`receipt-${$.receipt_number}.pdf`)};return e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("form",{onSubmit:Z,className:"modal-form",children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:as,style:{color:"#2563eb"}}),"Student Information"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",marginBottom:"16px"},children:e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsxs("label",{className:"form-label",children:["Search Student ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("div",{style:{position:"relative",flex:1,display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:ua,style:{position:"absolute",left:"8px",color:"var(--text-secondary)",fontSize:"0.75rem"}}),e.jsx("input",{type:"text",value:s,onChange:ne=>n(ne.target.value),placeholder:"Enter student name or registration number...",className:"form-control",style:{paddingLeft:"28px"}})]}),e.jsx("button",{type:"button",onClick:oe,className:"modal-btn",style:{background:"#6b7280",color:"white",padding:"6px 12px",whiteSpace:"nowrap",fontSize:"0.7rem"},children:"Search"})]})]})}),c.length>0&&e.jsxs("div",{style:{border:"1px solid var(--border-color)",maxHeight:"120px",overflowY:"auto",marginBottom:"16px",borderRadius:"4px"},children:[e.jsx("div",{style:{background:"#eff6ff",padding:"8px 12px",borderBottom:"1px solid var(--border-color)",fontSize:"0.7rem",color:"#1e40af",fontWeight:500},children:e.jsx("p",{children:"Click on a student below to select:"})}),c.map(ne=>e.jsxs("div",{onClick:()=>q(ne),style:{padding:"8px 12px",cursor:"pointer",borderBottom:"1px solid #f3f4f6",fontSize:"0.75rem"},onMouseEnter:me=>me.currentTarget.style.background="#f9fafb",onMouseLeave:me=>me.currentTarget.style.background="transparent",children:[e.jsxs("div",{style:{fontWeight:500,color:"var(--text-primary)",marginBottom:"4px"},children:[ne.Name," ",ne.Surname]}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:["Reg: ",ne.RegNumber," | Class: ",ne.Class||"N/A"]})]},ne.RegNumber))]}),i&&e.jsxs("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",padding:"12px",borderRadius:"4px",fontSize:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx(I,{icon:Hn,style:{color:"#059669",marginRight:"8px",fontSize:"0.75rem"}}),e.jsx("span",{style:{fontWeight:500,color:"#065f46"},children:"Student Selected Successfully"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-secondary)"},children:"Name:"}),e.jsxs("span",{style:{marginLeft:"8px",fontWeight:500,color:"var(--text-primary)"},children:[i.Name," ",i.Surname]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-secondary)"},children:"Registration No:"}),e.jsx("span",{style:{marginLeft:"8px",fontWeight:500,color:"var(--text-primary)"},children:i.RegNumber})]})]})]})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:fy,style:{color:"#10b981"}}),"Invoice Structure ",e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:400,color:"var(--text-secondary)"},children:"(Optional)"})]}),e.jsx("p",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginBottom:"16px"},children:" You can skip this section to record payments for outstanding debts without a specific invoice"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Class (",m.length," loaded)"]}),e.jsxs("select",{value:M.gradelevel_class_id,onChange:ne=>_(me=>({...me,gradelevel_class_id:ne.target.value,term:"",academic_year:"",invoice_structure_id:""})),className:"form-control",children:[e.jsx("option",{value:"",children:"Select Class (Optional)"}),m.map(ne=>(console.log(" Class item:",ne),e.jsxs("option",{value:ne.id,children:[ne.name," - ",ne.stream_name]},ne.id)))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Term"}),e.jsxs("select",{value:M.term,onChange:ne=>_(me=>({...me,term:ne.target.value,academic_year:"",invoice_structure_id:""})),className:"form-control",disabled:!M.gradelevel_class_id,children:[e.jsx("option",{value:"",children:"Select Term (Optional)"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Academic Year"}),e.jsx("input",{type:"text",value:M.academic_year,onChange:ne=>_(me=>({...me,academic_year:ne.target.value,invoice_structure_id:""})),placeholder:"e.g., 2025 (Optional)",className:"form-control",disabled:!M.gradelevel_class_id||!M.term})]})]}),v.length>0&&e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsx("div",{style:{background:"#eff6ff",padding:"8px 12px",border:"1px solid var(--border-color)",marginBottom:"8px",borderRadius:"4px",fontSize:"0.7rem",color:"#1e40af",fontWeight:500},children:e.jsx("p",{children:"Click on an invoice structure below to select (optional):"})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:v.map(ne=>e.jsx("div",{onClick:()=>G(ne),style:{padding:"12px",border:`1px solid ${w?.id===ne.id?"#6b7280":"var(--border-color)"}`,cursor:"pointer",borderRadius:"4px",background:w?.id===ne.id?"#f9fafb":"transparent",fontSize:"0.75rem"},onMouseEnter:me=>{w?.id!==ne.id&&(me.currentTarget.style.borderColor="#d1d5db")},onMouseLeave:me=>{w?.id!==ne.id&&(me.currentTarget.style.borderColor="var(--border-color)")},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:500,color:"var(--text-primary)",marginBottom:"4px"},children:[ne.class_name," - ",ne.term," ",ne.academic_year]}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:[ne.invoice_items?.length||0," items"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:500,color:"var(--text-primary)"},children:[ne.total_amount," ",ne.currency_symbol]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:ne.is_active?"Active":"Inactive"})]})]})},ne.id))})]}),w&&e.jsxs("div",{style:{marginTop:"16px",background:"#d1fae5",border:"1px solid #6ee7b7",padding:"12px",borderRadius:"4px",fontSize:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:Hn,style:{color:"#059669",marginRight:"8px",fontSize:"0.75rem"}}),e.jsx("span",{style:{fontWeight:500,color:"#065f46"},children:"Invoice Structure Selected"})]}),e.jsx("button",{type:"button",onClick:()=>{j(null),_(ne=>({...ne,invoice_structure_id:""}))},style:{fontSize:"0.7rem",color:"var(--text-secondary)",background:"transparent",border:"none",cursor:"pointer",padding:"4px 8px"},children:"Clear"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-secondary)"},children:"Selected:"}),e.jsxs("span",{style:{marginLeft:"8px",fontWeight:500,color:"var(--text-primary)"},children:[w.class_name," - ",w.term," ",w.academic_year]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-secondary)"},children:"Total Amount:"}),e.jsxs("span",{style:{marginLeft:"8px",fontWeight:500,color:"var(--text-primary)"},children:[w.total_amount," ",w.currency_symbol]})]}),e.jsx("div",{style:{gridColumn:"1 / -1"},children:e.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Note: Please enter the payment amount manually below"})})]})]}),M.gradelevel_class_id&&M.term&&M.academic_year&&v.length===0&&e.jsx("div",{style:{marginTop:"16px",background:"#fef3c7",border:"1px solid #fcd34d",padding:"12px",borderRadius:"4px",fontSize:"0.75rem",color:"#92400e"},children:e.jsx("p",{children:" No invoice structures found for this class/term/year. You can still proceed with the payment without selecting an invoice."})})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Za,style:{color:"#10b981"}}),"Payment Details"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Amount ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:M.amount,onChange:ne=>_(me=>({...me,amount:ne.target.value})),placeholder:"0.00",className:"form-control",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{value:M.currency_id,onChange:ne=>_(me=>({...me,currency_id:ne.target.value})),className:"form-control",required:!0,children:[e.jsx("option",{value:"",children:"Select Currency"}),p.map(ne=>e.jsxs("option",{value:ne.id,children:[ne.name," (",ne.symbol,")"]},ne.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Payment Method ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{value:M.payment_method_id,onChange:ne=>_(me=>({...me,payment_method_id:ne.target.value})),className:"form-control",required:!0,children:[e.jsx("option",{value:"",children:"Select Payment Method"}),g.map(ne=>e.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Payment Date ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"date",value:M.payment_date,onChange:ne=>_(me=>({...me,payment_date:ne.target.value})),className:"form-control",required:!0})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsxs("label",{className:"form-label",children:["Reference Number ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",value:M.reference_number,onChange:ne=>_(me=>({...me,reference_number:ne.target.value})),placeholder:"Enter reference number",className:"form-control",style:{flex:1},required:!0}),e.jsx("button",{type:"button",onClick:()=>_(ne=>({...ne,reference_number:z()})),className:"modal-btn",style:{background:"#6b7280",color:"white",padding:"6px 12px",whiteSpace:"nowrap",fontSize:"0.7rem"},children:"Auto"})]})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{value:M.notes,onChange:ne=>_(me=>({...me,notes:ne.target.value})),placeholder:"Additional notes...",className:"form-control",rows:"2"})]})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:e.jsx("button",{type:"submit",disabled:a,className:"modal-btn modal-btn-confirm",style:{minWidth:"120px"},children:a?"Processing...":"Process Payment"})})]}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-sm md:text-base font-bold text-gray-900",children:"Confirm Payment"}),e.jsx("button",{onClick:fe,className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt,className:"text-xs"})})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Student:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[i?.Name," ",i?.Surname]})]}),w&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Class:"}),e.jsx("span",{className:"font-medium text-gray-900",children:w?.class_name})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Term:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[w?.term," ",w?.academic_year]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Amount:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[M.amount," ",p.find(ne=>ne.id==M.currency_id)?.symbol]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Reference:"}),e.jsx("span",{className:"font-medium text-gray-900",children:M.reference_number})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[e.jsx("button",{onClick:fe,className:"px-3 py-1.5 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50 w-full sm:w-auto",children:"Cancel"}),e.jsx("button",{onClick:Q,disabled:a,className:"px-3 py-1.5 bg-gray-900 text-white rounded text-xs hover:bg-gray-800 disabled:opacity-50 w-full sm:w-auto",children:a?"Processing...":"Confirm Payment"})]})]})}),R&&$&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-2xl max-h-[90vh] overflow-y-auto mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Payment Receipt"}),e.jsx("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt,className:"text-xs"})})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Receipt Number"}),e.jsx("p",{className:"text-xs text-gray-900 font-medium",children:$.receipt_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("p",{className:"text-xs text-gray-900 font-medium",children:$.payment_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Student"}),e.jsx("p",{className:"text-xs text-gray-900 font-medium",children:$.student_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Amount"}),e.jsxs("p",{className:"text-xs text-gray-900 font-medium",children:[$.amount," ",$.currency]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reference"}),e.jsx("p",{className:"text-xs text-gray-900 font-medium",children:$.reference_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Payment Method"}),e.jsx("p",{className:"text-xs text-gray-900 font-medium",children:$.payment_method})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx("button",{onClick:he,className:"px-3 py-1.5 bg-gray-900 text-white rounded text-xs hover:bg-gray-800",children:"Download PDF"}),e.jsx("button",{onClick:()=>P(!1),className:"px-3 py-1.5 border border-gray-300 text-gray-700 rounded text-xs hover:bg-gray-50",children:"Close"})]})]})}),e.jsx(Am,{isOpen:B,onClose:()=>D(!1),message:H}),e.jsx(dd,{isOpen:C,onClose:()=>L(!1),message:Y})]})},NL=({onPaymentSuccess:t})=>{const[a,r]=x.useState(""),[s,n]=x.useState(null),[i,o]=x.useState(!1),[c,u]=x.useState(""),[m,h]=x.useState(""),[p,y]=x.useState([]),[g,v]=x.useState([]),[N,w]=x.useState(!1),[j,T]=x.useState(!1),[k,R]=x.useState(!1),[P,$]=x.useState(null),[A,M]=x.useState({fee_type:"boarding",academic_year:new Date().getFullYear().toString(),term:"1",hostel_id:"",amount_paid:"",currency_id:"",payment_method:"Cash",payment_date:new Date().toISOString().split("T")[0],reference_number:"",notes:""}),{token:_}=At();x.useEffect(()=>{B(),D()},[]);const B=async()=>{try{const G=await re.get(`${se}/accounting/currencies`,{headers:{Authorization:`Bearer ${_}`}});if(G.data&&Array.isArray(G.data.data)){y(G.data.data);const z=G.data.data.find(Z=>Z.is_base_currency)||G.data.data[0];z&&M(Z=>({...Z,currency_id:z.id}))}}catch(G){console.error("Error fetching currencies:",G)}},D=async()=>{try{const G=await re.get(`${se}/boarding/hostels`,{headers:{Authorization:`Bearer ${_}`}});G.data&&Array.isArray(G.data.data)&&v(G.data.data)}catch(G){console.error("Error fetching hostels:",G)}},C=()=>{const G=Date.now(),z=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`INV-${G}-${z}`},L=()=>{M(G=>({...G,reference_number:C()}))},H=async()=>{if(!a.trim()){u("Please enter a student registration number");return}o(!0),u("");try{const G=await re.get(`${se}/students/search?query=${a}`,{headers:{Authorization:`Bearer ${_}`}});if(G.data&&G.data.data&&G.data.data.length>0){const z=G.data.data[0];n(z),h("Student found successfully!")}else u("Student not found with this registration number"),n(null)}catch(G){console.error("Error searching for student:",G),u("Failed to search for student")}finally{o(!1)}},V=async G=>{if(G.preventDefault(),w(!0),!s){u("Please search for a student first");return}if(!A.amount_paid||!A.currency_id||!A.academic_year||!A.term){u("Please fill in all required fields");return}if(!A.hostel_id){u("Please select a hostel for boarding fees");return}if(!A.reference_number.trim()){u("Please enter a reference number");return}T(!0),u("")},Y=async()=>{o(!0),u("");try{const G={student_reg_number:s.RegNumber,academic_year:A.academic_year,term:A.term,hostel_id:A.hostel_id,amount_paid:parseFloat(A.amount_paid),currency_id:A.currency_id,payment_method:A.payment_method,payment_date:A.payment_date,reference_number:A.reference_number,notes:A.notes,fee_type:A.fee_type},z=await re.post(`${se}/boarding/payments`,G,{headers:{Authorization:`Bearer ${_}`}});if(z.data.success){const Z={receipt_number:z.data.data.receipt_number,student_name:`${s.Name} ${s.Surname}`,student_reg:s.RegNumber,amount:A.amount_paid,currency:p.find(Q=>Q.id===A.currency_id)?.symbol||"",payment_date:A.payment_date,payment_method:A.payment_method,fee_type:A.fee_type,reference_number:A.reference_number,hostel_name:g.find(Q=>Q.id===A.hostel_id)?.name||""};$(Z),T(!1),R(!0),t(Z)}}catch(G){console.error("Error processing payment:",G),G.response&&G.response.data&&G.response.data.message?u(G.response.data.message):u("Failed to process payment")}finally{o(!1)}},J=()=>{T(!1),u("")},W=()=>{r(""),n(null),w(!1),T(!1),R(!1),$(null),M({fee_type:"boarding",academic_year:new Date().getFullYear().toString(),term:"1",hostel_id:"",amount_paid:"",currency_id:A.currency_id||"",payment_method:"Cash",payment_date:new Date().toISOString().split("T")[0],reference_number:"",notes:""}),u(""),h("")},X=()=>{if(!P)return;const G=window.open("","_blank");G.document.write(`
      <html>
        <head>
          <title>Boarding Fees Payment Receipt</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            .receipt { border: 2px solid #000; padding: 20px; max-width: 400px; }
            .header { text-align: center; border-bottom: 1px solid #000; padding-bottom: 10px; margin-bottom: 20px; }
            .row { display: flex; justify-content: space-between; margin: 5px 0; }
            .total { border-top: 1px solid #000; padding-top: 10px; margin-top: 20px; font-weight: bold; }
          </style>
        </head>
        <body>
          <div class="receipt">
            <div class="header">
              <h2>SCHOOL MANAGEMENT SYSTEM</h2>
              <h3>BOARDING FEES PAYMENT RECEIPT</h3>
            </div>
            <div class="row">
              <span>Receipt No:</span>
              <span>${P.receipt_number}</span>
            </div>
            <div class="row">
              <span>Reference No:</span>
              <span>${P.reference_number}</span>
            </div>
            <div class="row">
              <span>Date:</span>
              <span>${P.payment_date}</span>
            </div>
            <div class="row">
              <span>Student:</span>
              <span>${P.student_name}</span>
            </div>
            <div class="row">
              <span>Reg No:</span>
              <span>${P.student_reg}</span>
            </div>
            <div class="row">
              <span>Hostel:</span>
              <span>${P.hostel_name}</span>
            </div>
            <div class="row">
              <span>Payment Method:</span>
              <span>${P.payment_method}</span>
            </div>
            <div class="total">
              <div class="row">
                <span>Amount Paid:</span>
                <span>${P.currency}${P.amount}</span>
              </div>
            </div>
            <div style="text-align: center; margin-top: 30px;">
              <p>Thank you for your payment!</p>
            </div>
          </div>
        </body>
      </html>
    `),G.document.close(),G.print()},te=async()=>{if(P)try{const G={receipt_number:P.receipt_number,reference_number:P.reference_number,payment_date:P.payment_date,student_name:P.student_name,student_reg:P.student_reg,hostel_name:P.hostel_name,payment_method:P.payment_method,amount:P.amount,currency:P.currency},z=await re.post(`${se}/boarding/payments/download-receipt`,G,{headers:{Authorization:`Bearer ${_}`},responseType:"blob"}),Z=window.URL.createObjectURL(new Blob([z.data])),Q=document.createElement("a");Q.href=Z,Q.setAttribute("download",`receipt-${P.receipt_number}.pdf`),document.body.appendChild(Q),Q.click(),Q.remove(),window.URL.revokeObjectURL(Z)}catch(G){console.error("Error downloading PDF:",G);const z=`
SCHOOL MANAGEMENT SYSTEM
BOARDING FEES PAYMENT RECEIPT

Receipt No: ${P.receipt_number}
Reference No: ${P.reference_number}
Date: ${P.payment_date}
Student: ${P.student_name}
Registration No: ${P.student_reg}
Hostel: ${P.hostel_name}
Payment Method: ${P.payment_method}
Amount Paid: ${P.currency}${P.amount}

Thank you for your payment!
      `,Z=new Blob([z],{type:"text/plain"}),Q=window.URL.createObjectURL(Z),fe=document.createElement("a");fe.href=Q,fe.download=`receipt-${P.receipt_number}.txt`,document.body.appendChild(fe),fe.click(),window.URL.revokeObjectURL(Q),document.body.removeChild(fe)}},oe=()=>{const G=g.find(z=>z.id===A.hostel_id);return G?G.name:""},q=()=>{const G=p.find(z=>z.id===A.currency_id);return G?G.symbol:""};return k&&P?e.jsx("div",{className:"modal-overlay",onClick:W,children:e.jsxs("div",{className:"modal-dialog",onClick:G=>G.stopPropagation(),style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Payment Successful!"}),e.jsx("button",{className:"modal-close-btn",onClick:W,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[e.jsx(I,{icon:cr,style:{fontSize:"3rem",color:"#10b981",marginBottom:"12px"}}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Your boarding fees payment has been processed successfully."})]}),e.jsxs("div",{style:{padding:"12px",background:"#f9fafb",border:"1px solid var(--border-color)",borderRadius:"4px",marginBottom:"20px"},children:[e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",textAlign:"center"},children:"Payment Receipt"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px 30px",fontSize:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Receipt No"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:500},children:P.receipt_number})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Reference No"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:500},children:P.reference_number})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Student Name"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:P.student_name})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Registration No"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:P.student_reg})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Hostel"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:P.hostel_name})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Payment Date"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:P.payment_date})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Payment Method"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:P.payment_method})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Amount Paid"}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#10b981",fontWeight:600},children:[P.currency,P.amount]})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:W,children:"New Payment"}),e.jsxs("button",{className:"modal-btn",onClick:X,style:{background:"#6b7280",color:"white"},children:[e.jsx(I,{icon:Mi,style:{marginRight:"4px"}}),"Print"]}),e.jsxs("button",{className:"modal-btn modal-btn-confirm",onClick:te,children:[e.jsx(I,{icon:fi,style:{marginRight:"4px"}}),"Download PDF"]})]})]})}):j?e.jsx("div",{className:"modal-overlay",onClick:J,children:e.jsxs("div",{className:"modal-dialog",onClick:G=>G.stopPropagation(),style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Confirm Payment"}),e.jsx("button",{className:"modal-close-btn",onClick:J,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{padding:"12px",background:"#eff6ff",border:"1px solid #bfdbfe",borderRadius:"4px",marginBottom:"20px",fontSize:"0.75rem"},children:[e.jsxs("div",{style:{marginBottom:"4px"},children:[e.jsx("strong",{children:"Student:"})," ",s?.Name," ",s?.Surname," (",s?.RegNumber,")"]}),e.jsxs("div",{style:{marginBottom:"4px"},children:[e.jsx("strong",{children:"Hostel:"})," ",oe()]}),e.jsxs("div",{style:{marginBottom:"4px"},children:[e.jsx("strong",{children:"Academic Year:"})," ",A.academic_year," | ",e.jsx("strong",{children:"Term:"})," Term ",A.term]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Amount:"})," ",q(),A.amount_paid]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px 30px",fontSize:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Payment Method"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:A.payment_method})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Payment Date"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:A.payment_date})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Reference Number"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:A.reference_number})]}),A.notes&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("div",{style:{fontSize:"0.7rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Notes"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:A.notes})]})]}),c&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginTop:"16px",borderRadius:"4px"},children:c})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:J,disabled:i,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:Y,disabled:i,children:i?"Processing...":"Confirm Payment"})]})]})}):e.jsx("div",{style:{width:"100%"},children:e.jsxs("form",{onSubmit:V,className:"modal-form",children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:ua,style:{color:"#2563eb"}}),"Student Information"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",marginBottom:"16px"},children:e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsxs("label",{className:"form-label",children:["Student Registration Number ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",value:a,onChange:G=>r(G.target.value),placeholder:"Enter student registration number",className:"form-control",style:{flex:1}}),e.jsx("button",{type:"button",onClick:H,disabled:i,className:"modal-btn",style:{background:"#6b7280",color:"white",padding:"6px 12px",whiteSpace:"nowrap",fontSize:"0.7rem"},children:i?"Searching...":e.jsxs(e.Fragment,{children:[e.jsx(I,{icon:ua,style:{marginRight:"4px"}}),"Search"]})})]})]})}),s&&e.jsxs("div",{style:{background:"#d1fae5",border:"1px solid #6ee7b7",padding:"12px",borderRadius:"4px",fontSize:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx(I,{icon:cr,style:{color:"#059669",marginRight:"8px",fontSize:"0.75rem"}}),e.jsx("span",{style:{fontWeight:500,color:"#065f46"},children:"Student Found Successfully"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-secondary)"},children:"Name:"}),e.jsxs("span",{style:{marginLeft:"8px",fontWeight:500,color:"var(--text-primary)"},children:[s.Name," ",s.Surname]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-secondary)"},children:"Registration No:"}),e.jsx("span",{style:{marginLeft:"8px",fontWeight:500,color:"var(--text-primary)"},children:s.RegNumber})]})]})]})]}),c&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px",border:"1px solid #fecaca"},children:c}),m&&e.jsx("div",{style:{padding:"10px",background:"#d1fae5",color:"#065f46",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px",border:"1px solid #6ee7b7"},children:m}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:ql,style:{color:"#10b981"}}),"Payment Details"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Academic Year ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",value:A.academic_year,onChange:G=>M({...A,academic_year:G.target.value}),placeholder:"e.g., 2025",className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Term ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{value:A.term,onChange:G=>M({...A,term:G.target.value}),className:"form-control",children:[e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsxs("label",{className:"form-label",children:["Hostel ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{value:A.hostel_id,onChange:G=>M({...A,hostel_id:G.target.value}),className:"form-control",children:[e.jsx("option",{value:"",children:"Select a hostel"}),g.map(G=>e.jsx("option",{value:G.id,children:G.name},G.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Amount ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:A.amount_paid,onChange:G=>M({...A,amount_paid:G.target.value}),placeholder:"0.00",className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{value:A.currency_id,onChange:G=>M({...A,currency_id:G.target.value}),className:"form-control",children:[e.jsx("option",{value:"",children:"Select currency"}),p.map(G=>e.jsxs("option",{value:G.id,children:[G.name," (",G.symbol,")"]},G.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Payment Method ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{value:A.payment_method,onChange:G=>M({...A,payment_method:G.target.value}),className:"form-control",children:[e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Cheque",children:"Cheque"}),e.jsx("option",{value:"Mobile Money",children:"Mobile Money"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Payment Date ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"date",value:A.payment_date,onChange:G=>M({...A,payment_date:G.target.value}),className:"form-control"})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsxs("label",{className:"form-label",children:["Reference Number ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",value:A.reference_number,onChange:G=>M({...A,reference_number:G.target.value}),placeholder:"Enter reference number or auto-generate",className:"form-control",style:{flex:1}}),e.jsxs("button",{type:"button",onClick:L,className:"modal-btn",style:{background:"#2563eb",color:"white",padding:"6px 12px",whiteSpace:"nowrap",fontSize:"0.7rem"},title:"Auto-generate reference number",children:[e.jsx(I,{icon:mE,style:{marginRight:"4px"}}),"Auto"]})]})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Notes (Optional)"}),e.jsx("textarea",{value:A.notes,onChange:G=>M({...A,notes:G.target.value}),rows:"2",placeholder:"Additional notes about this payment",className:"form-control"})]})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:e.jsx("button",{type:"submit",disabled:i||!s,className:"modal-btn modal-btn-confirm",style:{minWidth:"120px"},children:i?"Processing...":e.jsxs(e.Fragment,{children:[e.jsx(I,{icon:ql,style:{marginRight:"4px"}}),"Process Payment"]})})})]})})},due=()=>{const{token:t}=At(),[a,r]=x.useState(""),[s,n]=x.useState([]),[i,o]=x.useState(null),[c,u]=x.useState([]),[m,h]=x.useState([]),[p,y]=x.useState(!1),[g,v]=x.useState(!1),[N,w]=x.useState(!1),[j,T]=x.useState([]),[k,R]=x.useState({amount:"",payment_method:"Cash",payment_date:new Date().toISOString().split("T")[0],currency_id:"",reference_number:"",notes:""}),P=()=>{const V=new Date,Y=V.toISOString().slice(0,10).replace(/-/g,""),J=V.toTimeString().slice(0,8).replace(/:/g,"");return`AF${Y}${J}`};x.useEffect(()=>{$(),A()},[]);const $=async()=>{try{const Y=await(await fetch(`${se}/additional-fees/structures`,{headers:{Authorization:`Bearer ${t}`}})).json();Y.success&&u(Y.data)}catch(V){console.error("Error loading available fees:",V)}},A=async()=>{try{const Y=await(await fetch(`${se}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}})).json();Y.success&&h(Y.data)}catch(V){console.error("Error loading currencies:",V)}},M=async()=>{if(a.trim())try{y(!0);const Y=await(await fetch(`${se}/students/search?query=${encodeURIComponent(a)}`,{headers:{Authorization:`Bearer ${t}`}})).json();Y.success&&n(Y.data)}catch(V){console.error("Error searching students:",V)}finally{y(!1)}},_=V=>{o(V),T([]),R({amount:"",payment_method:"Cash",payment_date:new Date().toISOString().split("T")[0],currency_id:"",reference_number:"",notes:""})},B=V=>{T(Y=>Y.find(W=>W.id===V.id)?Y.filter(W=>W.id!==V.id):[...Y,V])},D=V=>{if(V.preventDefault(),j.length===0){alert("Please select at least one fee to pay for");return}if(!k.amount||parseFloat(k.amount)<=0){alert("Please enter a valid payment amount");return}if(!k.currency_id){alert("Please select a currency");return}if(!k.reference_number.trim()){alert("Please enter a reference number");return}v(!0)},C=async()=>{if(!(!i||j.length===0))try{y(!0);const V=k.reference_number,Y=parseFloat(k.amount)/j.length;let J=!0;const W=[];for(const X of j){console.log(" Processing payment for fee:",X),console.log(" Processing payment for fee:",X.id,"student:",i.RegNumber),console.log(" Payment method being sent:",k.payment_method,"Type:",typeof k.payment_method);const te=await fetch(`${se}/additional-fees/payments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({fee_structure_id:X.id,student_reg_number:i.RegNumber,amount:Y,payment_method:k.payment_method,currency_id:k.currency_id,exchange_rate:1,receipt_number:k.reference_number,reference_number:k.reference_number,academic_year:new Date().getFullYear().toString()})});if(te.ok){const oe=await te.json();console.log(" Payment response:",oe)}else{console.error(` Failed to process payment for fee ${X.id}`,te.status);const oe=await te.json();console.error(" Payment error:",oe),J=!1,W.push(`Fee ${X.fee_name}: ${oe.message||"Payment failed"}`)}}if(!J){alert(`Payment failed for some fees:
${W.join(`
`)}`);return}w(!0),v(!1),T([]),o(null),R({amount:"",payment_method:"Cash",payment_date:new Date().toISOString().split("T")[0],currency_id:"",reference_number:"",notes:""}),r(""),n([]),alert("Payment processed successfully!")}catch(V){console.error("Error processing payment:",V),alert("Error processing payment")}finally{y(!1)}},L=()=>{v(!1)},H=V=>V==="annual"?Zc:Wl;return e.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[e.jsx("h2",{className:"text-base font-medium text-gray-900 mb-4",children:"Additional Fees Payment"}),e.jsxs("form",{onSubmit:D,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"Student Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Search Student ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(I,{icon:ua,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",value:a,onChange:V=>r(V.target.value),placeholder:"Enter student name or registration number...",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsx("button",{type:"button",onClick:M,className:"bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800",children:"Search"})]})]}),s.length>0&&e.jsxs("div",{className:"border border-gray-200 max-h-32 overflow-y-auto",children:[e.jsx("div",{className:"bg-blue-50 p-2 border-b border-gray-200",children:e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"Click on a student below to select:"})}),s.map(V=>e.jsxs("div",{onClick:()=>_(V),className:"p-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"font-medium text-gray-900 text-xs",children:[V.Name||V.FirstName," ",V.Surname||V.LastName]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Reg: ",V.RegNumber," | Class: ",V.Class||"N/A"]})]},V.RegNumber))]}),i&&e.jsxs("div",{className:"bg-green-50 border border-green-200 p-3",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(I,{icon:Hn,className:"text-green-600 text-xs mr-2"}),e.jsx("span",{className:"text-xs font-medium text-green-800",children:"Student Selected Successfully"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[i.Name||i.FirstName," ",i.Surname||i.LastName]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Registration No:"}),e.jsx("span",{className:"ml-1 font-medium",children:i.RegNumber})]})]})]})]})]}),i&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"Select Fees to Pay For"}),e.jsxs("div",{className:"border border-gray-200 max-h-40 overflow-y-auto",children:[e.jsx("div",{className:"bg-blue-50 p-2 border-b border-gray-200",children:e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"Click on fees below to select:"})}),c.map(V=>{const Y=j.find(J=>J.id===V.id);return e.jsx("div",{onClick:()=>B(V),className:`p-2 cursor-pointer transition-colors border-b border-gray-100 last:border-b-0 ${Y?"border-gray-500 bg-gray-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:H(V.fee_type),className:"text-gray-400 text-xs"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 text-xs",children:V.fee_name}),e.jsx("div",{className:"text-xs text-gray-500",children:V.description}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Type: ",V.fee_type," | Amount: $",(parseFloat(V.amount)||0).toFixed(2)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium text-gray-900 text-xs",children:["$",(parseFloat(V.amount)||0).toFixed(2)]}),e.jsx("div",{className:"text-xs text-gray-500",children:V.fee_type}),Y&&e.jsx(I,{icon:Hn,className:"text-green-600 text-xs mt-1"})]})]})},V.id)})]}),j.length>0&&e.jsxs("div",{className:"mt-3 bg-green-50 border border-green-200 p-3",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(I,{icon:Hn,className:"text-green-600 text-xs mr-2"}),e.jsx("span",{className:"text-xs font-medium text-green-800",children:"Fees Selected Successfully"})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:j.length})," fee(s) selected"]})]})]}),i&&j.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"Payment Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:k.amount,onChange:V=>R(Y=>({...Y,amount:V.target.value})),placeholder:"0.00",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Currency ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:k.currency_id,onChange:V=>R(Y=>({...Y,currency_id:V.target.value})),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Currency"}),m.map(V=>e.jsxs("option",{value:V.id,children:[V.symbol," - ",V.name]},V.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Payment Method ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:k.payment_method,onChange:V=>R(Y=>({...Y,payment_method:V.target.value})),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Mobile Money",children:"Mobile Money"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Payment Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:k.payment_date,onChange:V=>R(Y=>({...Y,payment_date:V.target.value})),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Reference Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:k.reference_number,onChange:V=>R(Y=>({...Y,reference_number:V.target.value})),placeholder:"Enter reference number...",className:"flex-1 border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0}),e.jsx("button",{type:"button",onClick:()=>R(V=>({...V,reference_number:P()})),className:"px-2 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 border border-gray-300",title:"Generate reference number",children:"Auto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("input",{type:"text",value:k.notes,onChange:V=>R(Y=>({...Y,notes:V.target.value})),placeholder:"Optional notes...",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]})]}),i&&j.length>0&&e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{o(null),T([]),R({amount:"",payment_method:"Cash",payment_date:new Date().toISOString().split("T")[0],currency_id:"",reference_number:"",notes:""}),r(""),n([])},className:"px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:!k.amount||parseFloat(k.amount)<=0||!k.currency_id||!k.reference_number.trim(),className:"px-3 py-1.5 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50",children:"Process Payment"})]})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white border border-gray-200 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Confirm Payment"}),e.jsx("button",{onClick:L,className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-3",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["Student: ",i?.Name||i?.FirstName," ",i?.Surname||i?.LastName]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Amount: ",m.find(V=>V.id===k.currency_id)?.symbol||"$",(parseFloat(k.amount)||0).toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Method: ",k.payment_method]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Currency: ",m.find(V=>V.id===k.currency_id)?.name||"N/A"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Reference: ",k.reference_number]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Selected Fees: ",j.length]})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("p",{children:"This will:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 mt-2",children:[e.jsx("li",{children:"Create fee assignments for the selected fees"}),e.jsx("li",{children:"Split the payment amount equally among selected fees"}),e.jsx("li",{children:"Update student balance and create transaction records"})]})]})]}),e.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end space-x-2",children:[e.jsx("button",{onClick:L,className:"px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{onClick:C,disabled:p,className:"px-3 py-1.5 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50",children:p?"Processing...":"Confirm Payment"})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-6 max-w-md w-full mx-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"All payments have been processed successfully. The student's balance has been updated and transactions have been recorded."}),e.jsx("button",{onClick:()=>w(!1),className:"w-full bg-green-600 text-white px-4 py-2 text-sm font-medium hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Close"})]})})})]})},uue=()=>{const[t,a]=x.useState("tuition"),r=[{id:"tuition",name:"Tuition Fee Payments",icon:qN},{id:"boarding",name:"Boarding Fee Payments",icon:yy},{id:"other",name:"Other Payments",icon:RB}],s=i=>{console.log("Payment successful:",i)},n=()=>{switch(t){case"tuition":return e.jsx(ny,{});case"boarding":return e.jsx(NL,{onPaymentSuccess:s});case"other":return e.jsx(due,{});default:return e.jsx(ny,{})}};return e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Fees Payment"}),e.jsx("p",{className:"report-subtitle",children:"Process student fee payments."})]}),e.jsx("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"}})]}),e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsx("div",{className:"report-filters-left",children:e.jsx("div",{className:"filter-group",style:{display:"flex",gap:"8px",alignItems:"center"},children:r.map(i=>e.jsxs("button",{onClick:()=>a(i.id),style:{padding:"6px 12px",fontSize:"0.75rem",fontWeight:500,border:`1px solid ${t===i.id?"#2563eb":"var(--border-color)"}`,borderRadius:"4px",background:t===i.id?"#2563eb":"transparent",color:t===i.id?"white":"var(--text-primary)",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},onMouseEnter:o=>{t!==i.id&&(o.currentTarget.style.background="#f3f4f6",o.currentTarget.style.borderColor="#d1d5db")},onMouseLeave:o=>{t!==i.id&&(o.currentTarget.style.background="transparent",o.currentTarget.style.borderColor="var(--border-color)")},children:[e.jsx(I,{icon:i.icon,style:{fontSize:"0.7rem"}}),e.jsx("span",{children:i.name})]},i.id))})})}),e.jsx("div",{className:"report-content-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:"20px 30px"},children:n()})]})},mue=({payment:t,currencies:a,onUpdate:r,onClose:s})=>{const[n,i]=x.useState({amount_paid:"",currency_id:"",payment_method:"",payment_date:"",reference_number:"",notes:""}),[o,c]=x.useState(!1);x.useEffect(()=>{t&&(console.log("Payment data in edit modal:",t),console.log("Currencies in edit modal:",a),console.log("Payment currency_id:",t.currency_id,"Type:",typeof t.currency_id),i({amount_paid:t.amount_paid||"",currency_id:t.currency_id?t.currency_id.toString():"",payment_method:t.payment_method||"",payment_date:t.payment_date?t.payment_date.split("T")[0]:"",reference_number:t.reference_number||"",notes:t.notes||""}),console.log("Form data set:",{amount_paid:t.amount_paid||"",currency_id:t.currency_id?t.currency_id.toString():"",payment_method:t.payment_method||"",payment_date:t.payment_date?t.payment_date.split("T")[0]:"",reference_number:t.reference_number||"",notes:t.notes||""}))},[t,a]);const u=async h=>{h.preventDefault(),c(!0);try{await r(n)}catch(p){console.error("Error updating payment:",p)}finally{c(!1)}},m=(h,p)=>{i(y=>({...y,[h]:p}))};return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-10 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Payment"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt})})]}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 p-3 rounded",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[t?.student_name," ",t?.student_surname]}),e.jsx("div",{className:"text-gray-600",children:t?.student_reg_number}),e.jsx("div",{className:"text-gray-600",children:t?.hostel_name})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:n.amount_paid,onChange:h=>m("amount_paid",h.target.value),className:"w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Currency ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:n.currency_id,onChange:h=>m("currency_id",h.target.value),className:"w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"",children:"Select currency"}),a&&a.length>0?a.map(h=>e.jsxs("option",{value:h.id.toString(),children:[h.name," (",h.symbol,")"]},h.id)):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"1",children:"US Dollar ($)"}),e.jsx("option",{value:"2",children:"Zimbabwe Dollar (ZWL)"})]})]}),a&&a.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Using default currencies"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Payment Method ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:n.payment_method,onChange:h=>m("payment_method",h.target.value),className:"w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"",children:"Select payment method"}),e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Cheque",children:"Cheque"}),e.jsx("option",{value:"Mobile Money",children:"Mobile Money"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Payment Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:n.payment_date,onChange:h=>m("payment_date",h.target.value),className:"w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Reference Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:n.reference_number,onChange:h=>m("reference_number",h.target.value),className:"w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:n.notes,onChange:h=>m("notes",h.target.value),rows:"3",className:"w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 text-xs hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:o,className:"flex-1 bg-gray-900 text-white px-4 py-2 text-xs hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:o?"Updating...":e.jsxs(e.Fragment,{children:[e.jsx(I,{icon:ns,className:"mr-1"}),"Update Payment"]})})]})]})]})})})},hue=({isOpen:t,message:a,onClose:r})=>t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:e.jsx(I,{icon:cr,className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Success!"}),e.jsx("div",{className:"mt-2 px-7 py-3",children:e.jsx("p",{className:"text-sm text-gray-500",children:a})}),e.jsx("div",{className:"items-center px-4 py-3",children:e.jsx("button",{onClick:r,className:"px-4 py-2 bg-green-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-300",children:"OK"})})]})})}):null,xue=({isOpen:t,message:a,onClose:r})=>t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx(I,{icon:Ma,className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error"}),e.jsx("div",{className:"mt-2 px-7 py-3",children:e.jsx("p",{className:"text-sm text-gray-500",children:a})}),e.jsx("div",{className:"items-center px-4 py-3",children:e.jsx("button",{onClick:r,className:"px-4 py-2 bg-red-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-300",children:"OK"})})]})})}):null,fue=()=>{const[t,a]=x.useState([]),[r,s]=x.useState(!0),[n,i]=x.useState(""),[o,c]=x.useState({current_page:1,total_pages:1,total_items:0,items_per_page:10,has_next:!1,has_prev:!1}),[u,m]=x.useState({search:"",academic_year:"",term:"",hostel_id:""}),[h,p]=x.useState([]),[y,g]=x.useState(!1),[v,N]=x.useState(!1),[w,j]=x.useState(!1),[T,k]=x.useState(null),[R,P]=x.useState([]),[$,A]=x.useState(!1),[M,_]=x.useState(!1),[B,D]=x.useState(""),[C,L]=x.useState(""),{token:H}=At();x.useEffect(()=>{V(),Y(),J()},[o.current_page,u]);const V=async()=>{try{const pe=await re.get(`${se}/boarding/hostels`,{headers:{Authorization:`Bearer ${H}`}});pe.data&&Array.isArray(pe.data.data)&&p(pe.data.data)}catch(pe){console.error("Error fetching hostels:",pe)}},Y=async()=>{try{const pe=await re.get(`${se}/accounting/currencies`,{headers:{Authorization:`Bearer ${H}`}});console.log("Currencies response:",pe.data),pe.data&&Array.isArray(pe.data.data)&&(P(pe.data.data),console.log("Currencies set:",pe.data.data))}catch(pe){console.error("Error fetching currencies:",pe),P([{id:1,name:"US Dollar",symbol:"$"},{id:2,name:"Zimbabwe Dollar",symbol:"ZWL"}])}},J=async()=>{s(!0),i("");try{const pe=new URLSearchParams({page:o.current_page,limit:o.items_per_page,...u});console.log("Frontend params being sent:",{page:o.current_page,limit:o.items_per_page,filters:u,fullParams:pe.toString()});const ie=await re.get(`${se}/boarding/payments?${pe}`,{headers:{Authorization:`Bearer ${H}`}});ie.data.success&&(a(ie.data.data),c(ie.data.pagination))}catch(pe){console.error("Error fetching payments:",pe),i("Failed to fetch payments")}finally{s(!1)}},W=(pe,ie)=>{m(ke=>({...ke,[pe]:ie})),c(ke=>({...ke,current_page:1}))},X=pe=>{c(ie=>({...ie,current_page:pe}))},te=()=>{c(pe=>({...pe,current_page:1}))},oe=()=>{m({search:"",academic_year:"",term:"",hostel_id:""}),c(pe=>({...pe,current_page:1}))},q=pe=>new Date(pe).toLocaleDateString("en-GB"),G=(pe,ie)=>`${ie}${parseFloat(pe).toFixed(2)}`,z=pe=>`${pe.student_name||""} ${pe.student_surname||""}`.trim()||"N/A",Z=async pe=>{try{s(!0);const ie=await re.get(`${se}/boarding/payments/${pe.id}`,{headers:{Authorization:`Bearer ${H}`}});ie.data&&ie.data.success&&ie.data.data?(k(ie.data.data),N(!0)):(L("Invalid response from server"),_(!0))}catch(ie){console.error("Error fetching payment details:",ie);const ke=ie.response?.data?.message||ie.response?.data?.error||ie.message||"Failed to fetch payment details";L(ke),_(!0)}finally{s(!1)}},Q=async pe=>{try{s(!0);const ie=await re.get(`${se}/boarding/payments/${pe.id}`,{headers:{Authorization:`Bearer ${H}`}});ie.data&&ie.data.success&&ie.data.data?(console.log("Payment details for edit:",ie.data.data),console.log("Available currencies:",R),k(ie.data.data),j(!0)):(L("Invalid response from server"),_(!0))}catch(ie){console.error("Error fetching payment details:",ie);const ke=ie.response?.data?.message||ie.response?.data?.error||ie.message||"Failed to fetch payment details";L(ke),_(!0)}finally{s(!1)}},fe=async pe=>{if(window.confirm("Are you sure you want to delete this payment? This will also delete all related accounting entries."))try{const ie=await re.delete(`${se}/boarding/payments/${pe.id}`,{headers:{Authorization:`Bearer ${H}`}});ie.data.success&&(D(ie.data.message||"Payment and related accounting entries deleted successfully!"),A(!0),J())}catch(ie){console.error("Error deleting payment:",ie);const ke=ie.response?.data?.message||"Failed to delete payment";L(ke),_(!0)}},he=async pe=>{try{const ie={receipt_number:pe.receipt_number,reference_number:pe.reference_number,payment_date:pe.payment_date,student_name:z(pe),student_reg:pe.student_reg_number,hostel_name:pe.hostel_name,payment_method:pe.payment_method,amount:pe.amount_paid,currency:pe.currency_symbol},ke=`
SCHOOL MANAGEMENT SYSTEM
BOARDING FEES PAYMENT RECEIPT

Receipt No: ${ie.receipt_number}
Reference No: ${ie.reference_number}
Date: ${ie.payment_date}
Student: ${ie.student_name}
Registration No: ${ie.student_reg}
Hostel: ${ie.hostel_name}
Payment Method: ${ie.payment_method}
Amount Paid: ${ie.currency}${ie.amount}

Thank you for your payment!
      `,Ae=new Blob([ke],{type:"text/plain"}),ae=window.URL.createObjectURL(Ae),Ne=document.createElement("a");Ne.href=ae,Ne.download=`receipt-${ie.receipt_number}.txt`,document.body.appendChild(Ne),Ne.click(),window.URL.revokeObjectURL(ae),document.body.removeChild(Ne)}catch(ie){console.error("Error downloading receipt:",ie),L("Failed to download receipt"),_(!0)}},ne=async pe=>{try{const ie=await re.put(`${se}/boarding/payments/${T.id}`,pe,{headers:{Authorization:`Bearer ${H}`}});ie.data.success&&(D(ie.data.message||"Payment and related accounting entries updated successfully!"),A(!0),j(!1),k(null),J())}catch(ie){console.error("Error updating payment:",ie);const ke=ie.response?.data?.message||"Failed to update payment";L(ke),_(!0)}},me=pe=>{const ie={receipt_number:pe.receipt_number,reference_number:pe.reference_number,payment_date:pe.payment_date,student_name:z(pe),student_reg:pe.student_reg_number,hostel_name:pe.hostel_name,payment_method:pe.payment_method,amount:pe.amount_paid,currency:pe.currency_symbol},ke=window.open("","_blank");ke.document.write(`
      <html>
        <head>
          <title>Boarding Fees Payment Receipt</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            .receipt { border: 2px solid #000; padding: 20px; max-width: 400px; }
            .header { text-align: center; border-bottom: 1px solid #000; padding-bottom: 10px; margin-bottom: 20px; }
            .row { display: flex; justify-content: space-between; margin: 5px 0; }
            .total { border-top: 1px solid #000; padding-top: 10px; margin-top: 20px; font-weight: bold; }
          </style>
        </head>
        <body>
          <div class="receipt">
            <div class="header">
              <h2>SCHOOL MANAGEMENT SYSTEM</h2>
              <h3>BOARDING FEES PAYMENT RECEIPT</h3>
            </div>
            <div class="row">
              <span>Receipt No:</span>
              <span>${ie.receipt_number}</span>
            </div>
            <div class="row">
              <span>Reference No:</span>
              <span>${ie.reference_number}</span>
            </div>
            <div class="row">
              <span>Date:</span>
              <span>${ie.payment_date}</span>
            </div>
            <div class="row">
              <span>Student:</span>
              <span>${ie.student_name}</span>
            </div>
            <div class="row">
              <span>Reg No:</span>
              <span>${ie.student_reg}</span>
            </div>
            <div class="row">
              <span>Hostel:</span>
              <span>${ie.hostel_name}</span>
            </div>
            <div class="row">
              <span>Payment Method:</span>
              <span>${ie.payment_method}</span>
            </div>
            <div class="total">
              <div class="row">
                <span>Amount Paid:</span>
                <span>${ie.currency}${ie.amount}</span>
              </div>
            </div>
            <div style="text-align: center; margin-top: 30px;">
              <p>Thank you for your payment!</p>
            </div>
          </div>
        </body>
      </html>
    `),ke.document.close(),ke.print()};return e.jsxs("div",{className:"min-h-screen bg-gray-50 py-6",children:[e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"All Boarding Fees Payments"}),e.jsx("p",{className:"text-xs text-gray-600",children:"View and manage all boarding fees payments"})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by student name or registration number...",value:u.search,onChange:pe=>W("search",pe.target.value),className:"w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"}),e.jsx("button",{onClick:te,className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:ua})})]})}),e.jsxs("button",{onClick:()=>g(!y),className:"bg-gray-900 text-white px-4 py-2 text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(I,{icon:Es,className:"mr-1"}),"Filters"]})]}),y&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Academic Year"}),e.jsx("input",{type:"text",placeholder:"e.g., 2025",value:u.academic_year,onChange:pe=>W("academic_year",pe.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Term"}),e.jsxs("select",{value:u.term,onChange:pe=>W("term",pe.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Terms"}),e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Hostel"}),e.jsxs("select",{value:u.hostel_id,onChange:pe=>W("hostel_id",pe.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Hostels"}),h.map(pe=>e.jsx("option",{value:pe.id,children:pe.name},pe.id))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:oe,className:"w-full bg-gray-200 text-gray-700 px-4 py-1.5 text-xs hover:bg-gray-300",children:"Clear Filters"})})]})})]}),n&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 text-xs rounded",children:n}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:r?e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Loading payments..."})}):t.length===0?e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-sm text-gray-600",children:"No payments found"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receipt No"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hostel"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academic Year"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Term"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Method"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(pe=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:z(pe)}),e.jsx("div",{className:"text-gray-500",children:pe.student_reg_number})]})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:pe.receipt_number}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:pe.hostel_name||"N/A"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:pe.academic_year}),e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:["Term ",pe.term]}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:G(pe.amount_paid,pe.currency_symbol)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:pe.payment_method}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:q(pe.payment_date)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>Z(pe),className:"text-blue-600 hover:text-blue-900",title:"View Details",children:e.jsx(I,{icon:qa})}),e.jsx("button",{onClick:()=>me(pe),className:"text-gray-600 hover:text-gray-900",title:"Print Receipt",children:e.jsx(I,{icon:Mi})}),e.jsx("button",{onClick:()=>he(pe),className:"text-green-600 hover:text-green-900",title:"Download Receipt",children:e.jsx(I,{icon:fi})}),e.jsx("button",{onClick:()=>Q(pe),className:"text-yellow-600 hover:text-yellow-900",title:"Edit Payment",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>fe(pe),className:"text-red-600 hover:text-red-900",title:"Delete Payment",children:e.jsx(I,{icon:sa})})]})})]},pe.id))})]})}),o.total_pages>1&&e.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>X(o.current_page-1),disabled:!o.has_prev,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>X(o.current_page+1),disabled:!o.has_next,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-xs text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(o.current_page-1)*o.items_per_page+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(o.current_page*o.items_per_page,o.total_items)})," ","of"," ",e.jsx("span",{className:"font-medium",children:o.total_items})," ","results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>X(o.current_page-1),disabled:!o.has_prev,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-xs font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:Math.min(5,o.total_pages)},(pe,ie)=>{const ke=ie+1;return e.jsx("button",{onClick:()=>X(ke),className:`relative inline-flex items-center px-3 py-2 border text-xs font-medium ${ke===o.current_page?"z-10 bg-gray-900 border-gray-900 text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:ke},ke)}),e.jsx("button",{onClick:()=>X(o.current_page+1),disabled:!o.has_next,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-xs font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]})})]})})]}),v&&T&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Payment Details"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Receipt No:"}),e.jsx("span",{children:T.receipt_number})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Reference No:"}),e.jsx("span",{children:T.reference_number})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Student:"}),e.jsx("span",{children:z(T)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Registration No:"}),e.jsx("span",{children:T.student_reg_number})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Hostel:"}),e.jsx("span",{children:T.hostel_name||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Academic Year:"}),e.jsx("span",{children:T.academic_year})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Term:"}),e.jsxs("span",{children:["Term ",T.term]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Amount:"}),e.jsx("span",{children:G(T.amount_paid,T.currency_symbol)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Payment Method:"}),e.jsx("span",{children:T.payment_method})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Payment Date:"}),e.jsx("span",{children:q(T.payment_date)})]}),T.notes&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Notes:"}),e.jsx("span",{children:T.notes})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:()=>{N(!1),k(null)},className:"bg-gray-500 text-white px-4 py-2 text-xs hover:bg-gray-600",children:"Close"})})]})})}),w&&T&&e.jsx(mue,{payment:T,currencies:R,onUpdate:ne,onClose:()=>{j(!1),k(null)}}),e.jsx(hue,{isOpen:$,message:B,onClose:()=>{A(!1),D("")}}),e.jsx(xue,{isOpen:M,message:C,onClose:()=>{_(!1),L("")}})]})},wL=()=>{const{token:t}=At(),[a,r]=x.useState([]),[s,n]=x.useState([]),[i,o]=x.useState([]),[c,u]=x.useState(!1),[m,h]=x.useState(null),[p,y]=x.useState(""),[g,v]=x.useState(""),[N,w]=x.useState(""),[j,T]=x.useState(""),[k,R]=x.useState(!1),[P,$]=x.useState(!1),[A,M]=x.useState(!1),[_,B]=x.useState(!1),[D,C]=x.useState(!1),[L,H]=x.useState(null),[V,Y]=x.useState({gradelevel_class_id:"",term:"",academic_year:"",currency_id:"",invoice_items:[{item_name:"",amount:""}]}),[J,W]=x.useState(!1),[X,te]=x.useState(!1),[oe,q]=x.useState(""),[G,z]=x.useState("");x.useEffect(()=>{Q(),fe()},[]),x.useEffect(()=>{k&&Z()},[k,g]);const Z=async()=>{u(!0);try{const ye=await re.get(`${se}/fees/invoice-structures?${g?`search=${g}`:""}`,{headers:{Authorization:`Bearer ${t}`}});r(ye.data.data||[])}catch(ye){console.error("Error fetching invoice structures:",ye),h("Failed to fetch invoice structures")}finally{u(!1)}},Q=async()=>{try{const ye=await re.get(`${se}/classes/gradelevel-classes`,{headers:{Authorization:`Bearer ${t}`}});n(ye.data.data||[])}catch(ye){console.error("Error fetching classes:",ye)}},fe=async()=>{try{const ye=await re.get(`${se}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}});o(ye.data.data||[])}catch(ye){console.error("Error fetching currencies:",ye)}},he=()=>{v(""),R(!0)},ne=()=>{Y(ye=>({...ye,invoice_items:[...ye.invoice_items,{item_name:"",amount:""}]}))},me=ye=>{Y(Ee=>({...Ee,invoice_items:Ee.invoice_items.filter((Ke,Re)=>Re!==ye)}))},pe=(ye,Ee,Ke)=>{Y(Re=>({...Re,invoice_items:Re.invoice_items.map((Le,Oe)=>Oe===ye?{...Le,[Ee]:Ke}:Le)}))},ie=()=>V.invoice_items.reduce((ye,Ee)=>ye+(parseFloat(Ee.amount)||0),0),ke=async ye=>{ye.preventDefault();const Ee=V.invoice_items.filter(Re=>Re.item_name&&Re.amount),Ke={...V,total_amount:ie(),invoice_items:Ee};try{L?(await re.put(`${se}/fees/invoice-structures/${L.id}`,Ke,{headers:{Authorization:`Bearer ${t}`}}),q("Invoice structure updated successfully")):(await re.post(`${se}/fees/invoice-structures`,Ke,{headers:{Authorization:`Bearer ${t}`}}),q("Invoice structure created successfully")),W(!0),$(!1),B(!1),ce(),Z()}catch(Re){console.error("Error saving invoice structure:",Re),z(Re.response?.data?.message||"Failed to save invoice structure"),te(!0)}},Ae=ye=>{H(ye),M(!0)},ae=ye=>{H(ye),Y({gradelevel_class_id:ye.gradelevel_class_id,term:ye.term,academic_year:ye.academic_year,currency_id:ye.currency_id,invoice_items:ye.invoice_items?.length>0?ye.invoice_items:[{item_name:"",amount:""}]}),B(!0)},Ne=async()=>{try{await re.delete(`${se}/fees/invoice-structures/${L.id}`,{headers:{Authorization:`Bearer ${t}`}}),q("Invoice structure deleted successfully"),W(!0),C(!1),Z()}catch(ye){console.error("Error deleting invoice structure:",ye),z(ye.response?.data?.message||"Failed to delete invoice structure"),te(!0)}},ce=()=>{Y({gradelevel_class_id:"",term:"",academic_year:"",currency_id:"",invoice_items:[{item_name:"",amount:""}]}),H(null)},De=a.filter(ye=>{const Ee=g.toLowerCase(),Ke=!g||ye.class_name?.toLowerCase().includes(Ee)||ye.term?.toLowerCase().includes(Ee)||ye.academic_year?.toLowerCase().includes(Ee),Re=!N||ye.academic_year===N,Le=!j||ye.term===j;return Ke&&Re&&Le});return e.jsxs("div",{className:"p-2 md:p-6",children:[e.jsx("div",{className:"mb-4 md:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg md:text-xl font-bold text-gray-900",children:"Invoice Structures"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:"Manage tuition fee structures with itemized breakdowns"})]}),e.jsxs("button",{onClick:()=>{ce(),$(!0)},className:"btn-checklist",children:[e.jsx(I,{icon:Ht}),"Add Invoice Structure"]})]})}),e.jsx("div",{className:"mb-4 md:mb-6 space-y-3 md:space-y-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Enter Year (e.g., 2025)",value:N,onChange:ye=>w(ye.target.value),className:"w-full px-3 py-2 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("select",{value:j,onChange:ye=>T(ye.target.value),className:"w-full px-3 py-2 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})}),e.jsx("button",{onClick:he,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 w-full sm:w-auto justify-center",children:"Filter"})]})}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"Class"}),e.jsx("th",{style:{padding:"6px 10px"},children:"Term"}),e.jsx("th",{style:{padding:"6px 10px"},children:"Year"}),e.jsx("th",{style:{padding:"6px 10px"},children:"Total Amount"}),e.jsx("th",{style:{padding:"6px 10px"},children:"Actions"})]})}),e.jsx("tbody",{children:c?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",style:{padding:"20px",textAlign:"center",color:"#64748b"},children:"Loading..."})}):De.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",style:{padding:"20px",textAlign:"center",color:"#64748b"},children:"No invoice structures found"})}):De.map((ye,Ee)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:Ee%2===0?"#fafafa":"#f3f4f6"},children:[e.jsxs("td",{style:{padding:"4px 10px"},children:[e.jsx("div",{style:{fontWeight:500,color:"#111827"},children:ye.class_name}),e.jsxs("div",{className:"sm:hidden",style:{color:"#6b7280"},children:[ye.term,"  ",ye.academic_year]})]}),e.jsx("td",{style:{padding:"4px 10px"},className:"hidden sm:table-cell",children:e.jsx("div",{style:{fontWeight:500,color:"#111827"},children:ye.term})}),e.jsx("td",{style:{padding:"4px 10px"},className:"hidden md:table-cell",children:e.jsx("div",{style:{fontWeight:500,color:"#111827"},children:ye.academic_year})}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{fontWeight:500,color:"#111827"},children:[ye.total_amount," ",ye.currency_symbol]})}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>Ae(ye),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0},title:"View",children:e.jsx(I,{icon:qa})}),e.jsx("button",{onClick:()=>ae(ye),style:{color:"#6366f1",background:"none",border:"none",cursor:"pointer",padding:0},title:"Edit",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>{H(ye),C(!0)},style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:0},title:"Delete",children:e.jsx(I,{icon:sa})})]})})]},ye.id))})]})})}),(P||_)&&e.jsx("div",{className:"modal-overlay",onClick:()=>{$(!1),B(!1),ce()},children:e.jsxs("div",{className:"modal-dialog",onClick:ye=>ye.stopPropagation(),style:{maxWidth:"800px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:L?"Edit Invoice Structure":"Add Invoice Structure"}),e.jsx("button",{className:"modal-close-btn",onClick:()=>{$(!1),B(!1),ce()},children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:ke,className:"modal-form",children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:fy,style:{color:"#2563eb"}}),"Structure Details"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Class ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{value:V.gradelevel_class_id,onChange:ye=>Y(Ee=>({...Ee,gradelevel_class_id:ye.target.value})),className:"form-control",required:!0,children:[e.jsx("option",{value:"",children:"Select Class"}),s.map(ye=>e.jsx("option",{value:ye.id,children:ye.name},ye.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Term ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{value:V.term,onChange:ye=>Y(Ee=>({...Ee,term:ye.target.value})),className:"form-control",required:!0,children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Academic Year ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",value:V.academic_year,onChange:ye=>Y(Ee=>({...Ee,academic_year:ye.target.value})),placeholder:"e.g., 2025",className:"form-control",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{value:V.currency_id,onChange:ye=>Y(Ee=>({...Ee,currency_id:ye.target.value})),className:"form-control",required:!0,children:[e.jsx("option",{value:"",children:"Select Currency"}),i.map(ye=>e.jsxs("option",{value:ye.id,children:[ye.name," (",ye.symbol,")"]},ye.id))]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Za,style:{color:"#10b981"}}),"Invoice Items"]}),e.jsx("button",{type:"button",onClick:ne,className:"modal-btn",style:{background:"#eff6ff",color:"#2563eb",fontSize:"0.75rem",padding:"6px 12px",border:"1px solid #bfdbfe"},children:"+ Add Item"})]}),e.jsx("div",{className:"space-y-3",children:V.invoice_items.map((ye,Ee)=>e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-start"},children:[e.jsx("div",{style:{flex:1},children:e.jsx("input",{type:"text",value:ye.item_name,onChange:Ke=>pe(Ee,"item_name",Ke.target.value),placeholder:"Item name (e.g., Levy)",className:"form-control",required:!0})}),e.jsx("div",{style:{width:"150px"},children:e.jsx("input",{type:"number",step:"0.01",value:ye.amount,onChange:Ke=>pe(Ee,"amount",Ke.target.value),placeholder:"Amount",className:"form-control",required:!0})}),V.invoice_items.length>1&&e.jsx("button",{type:"button",onClick:()=>me(Ee),style:{color:"#ef4444",padding:"8px",background:"transparent",border:"none",cursor:"pointer"},title:"Remove item",children:e.jsx(I,{icon:sa})})]},Ee))}),e.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"#f9fafb",borderRadius:"6px",border:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("label",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-secondary)"},children:"Total Amount"}),e.jsx("span",{style:{fontSize:"1.125rem",fontWeight:700,color:"var(--text-primary)"},children:ie().toFixed(2)})]})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:()=>{$(!1),B(!1),ce()},children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:ke,children:L?"Update Structure":"Create Structure"})]})]})}),A&&L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white border border-gray-200 p-3 md:p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-sm md:text-base font-bold mb-3 md:mb-4",children:"Invoice Structure Details"}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Class"}),e.jsx("p",{className:"text-xs text-gray-900",children:L.class_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Term"}),e.jsx("p",{className:"text-xs text-gray-900",children:L.term})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Academic Year"}),e.jsx("p",{className:"text-xs text-gray-900",children:L.academic_year})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Total Amount"}),e.jsxs("p",{className:"text-xs text-gray-900",children:[L.total_amount," ",L.currency_symbol]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold ${L.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:L.is_active?"Active":"Inactive"})]})]}),L.invoice_items&&L.invoice_items.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Invoice Items"}),e.jsx("div",{className:"border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.invoice_items.map((ye,Ee)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:ye.item_name}),e.jsxs("td",{className:"px-4 py-2 text-xs text-gray-900",children:[ye.amount," ",L.currency_symbol]})]},Ee))})]})})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:()=>M(!1),className:"inline-flex items-center px-3 py-2 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 w-full sm:w-auto justify-center",children:"Close"})})]})}),D&&L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white border border-gray-200 p-3 md:p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-sm md:text-base font-bold mb-3 md:mb-4",children:"Delete Invoice Structure"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Are you sure you want to delete the invoice structure for ",L.class_name," - ",L.term," ",L.academic_year,"?"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-3",children:[e.jsx("button",{onClick:()=>C(!1),className:"inline-flex items-center px-3 py-2 border border-gray-300 text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 w-full sm:w-auto justify-center",children:"Cancel"}),e.jsx("button",{onClick:Ne,className:"inline-flex items-center px-3 py-2 border border-transparent text-xs font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 w-full sm:w-auto justify-center",children:"Delete"})]})]})}),e.jsx(Am,{isOpen:J,onClose:()=>W(!1),message:oe}),e.jsx(dd,{isOpen:X,onClose:()=>te(!1),message:G})]})},pue=()=>{const{token:t}=At(),[a,r]=x.useState([]),[s,n]=x.useState([]),[i,o]=x.useState(!1),[c,u]=x.useState(null),[m,h]=x.useState(!1),[p,y]=x.useState(!1),[g,v]=x.useState(null),[N,w]=x.useState({term:"",academic_year:"",start_date:"",end_date:""}),[j,T]=x.useState(!1),[k,R]=x.useState(!1),[P,$]=x.useState(""),[A,M]=x.useState("");x.useEffect(()=>{B(),_()},[]);const _=async()=>{o(!0);try{console.log("Fetching all class term years..."),console.log("URL:",`${se}/classes/class-term-years`);const H=await re.get(`${se}/classes/class-term-years`,{headers:{Authorization:`Bearer ${t}`}});console.log("Response:",H.data),r(H.data.data||[])}catch(H){console.error("Error fetching class term years:",H),console.error("Error response:",H.response),console.error("Error status:",H.response?.status),console.error("Error data:",H.response?.data),console.error("Error message:",H.message),u("Failed to fetch class term years")}finally{o(!1)}},B=async()=>{try{console.log("Fetching classes..."),console.log("URL:",`${se}/classes/gradelevel-classes`);const H=await re.get(`${se}/classes/gradelevel-classes`,{headers:{Authorization:`Bearer ${t}`}});console.log("Classes response:",H.data),n(H.data.data||[])}catch(H){console.error("Error fetching classes:",H),console.error("Error response:",H.response),console.error("Error status:",H.response?.status),console.error("Error data:",H.response?.data),console.error("Error message:",H.message)}},D=async H=>{H.preventDefault();try{console.log("Bulk populate data:",N),console.log("URL:",`${se}/classes/class-term-years/bulk-populate`);const V=await re.post(`${se}/classes/class-term-years/bulk-populate`,N,{headers:{Authorization:`Bearer ${t}`}});console.log("Bulk populate response:",V.data),$(V.data.message),T(!0),y(!1),L(),_()}catch(V){console.error("Error bulk populating class term years:",V),console.error("Error response:",V.response),console.error("Error status:",V.response?.status),console.error("Error data:",V.response?.data),console.error("Error message:",V.message),M(V.response?.data?.message||"Failed to bulk populate class term years"),R(!0)}},C=H=>{v(H),h(!0)},L=()=>{w({term:"",academic_year:"",start_date:"",end_date:""})};return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold text-gray-900",children:"Class Term Year Management"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage class assignments for terms and academic years"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>y(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(I,{icon:Dh,className:"mr-1"}),"Bulk Populate"]})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Term"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"End Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"No class term year records found"})}):a.map(H=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:H.class_name}),e.jsx("div",{className:"text-xs text-gray-500",children:H.stream_name})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-medium text-gray-900",children:H.term})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-medium text-gray-900",children:H.academic_year})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-medium text-gray-900",children:H.start_date||"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-xs font-medium text-gray-900",children:H.end_date||"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${H.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:H.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs font-medium",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>C(H),className:"text-blue-600 hover:text-blue-900",children:e.jsx(I,{icon:qa})})})})]},H.id))})]})})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white border border-gray-200 p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-sm font-bold mb-4",children:"Bulk Populate Class Term Years"}),e.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"This will create class term year records for all active classes for the specified term and academic year."}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Term *"}),e.jsxs("select",{value:N.term,onChange:H=>w(V=>({...V,term:H.target.value})),className:"w-full border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Academic Year *"}),e.jsx("input",{type:"text",value:N.academic_year,onChange:H=>w(V=>({...V,academic_year:H.target.value})),placeholder:"e.g., 2025",className:"w-full border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:N.start_date,onChange:H=>w(V=>({...V,start_date:H.target.value})),className:"w-full border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:N.end_date,onChange:H=>w(V=>({...V,end_date:H.target.value})),className:"w-full border border-gray-300 px-3 py-2 focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{y(!1),L()},className:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Populate All Classes"})]})]})]})}),m&&g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white border border-gray-200 p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-sm font-bold mb-4",children:"Class Term Year Details"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Class"}),e.jsx("p",{className:"text-xs text-gray-900",children:g.class_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Stream"}),e.jsx("p",{className:"text-xs text-gray-900",children:g.stream_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Term"}),e.jsx("p",{className:"text-xs text-gray-900",children:g.term})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Academic Year"}),e.jsx("p",{className:"text-xs text-gray-900",children:g.academic_year})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Start Date"}),e.jsx("p",{className:"text-xs text-gray-900",children:g.start_date||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"End Date"}),e.jsx("p",{className:"text-xs text-gray-900",children:g.end_date||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold ${g.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.is_active?"Active":"Inactive"})]})]})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:()=>h(!1),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Close"})})]})}),e.jsx(Am,{isOpen:j,onClose:()=>T(!1),message:P}),e.jsx(dd,{isOpen:k,onClose:()=>R(!1),message:A})]})},gue=()=>{const{token:t}=At(),[a,r]=x.useState({name:"",stage:""}),[s,n]=x.useState(!1),[i,o]=x.useState(""),[c,u]=x.useState(""),[m,h]=x.useState([]),[p,y]=x.useState(!1),[g,v]=x.useState(""),[N,w]=x.useState(null),[j,T]=x.useState({name:"",stage:""}),[k,R]=x.useState(!1),[P,$]=x.useState(null),[A,M]=x.useState({code:"",name:"",syllabus:""}),[_,B]=x.useState(!1),[D,C]=x.useState(""),[L,H]=x.useState(""),[V,Y]=x.useState([]),[J,W]=x.useState(!1),[X,te]=x.useState("");x.useEffect(()=>{oe()},[]);const oe=async()=>{y(!0),v("");try{const ie=await re.get(`${se}/classes/streams`,{headers:{Authorization:`Bearer ${t}`}});ie.data.success?h(ie.data.data||[]):v("Failed to load streams.")}catch{v("Failed to load streams.")}finally{y(!1)}},q=ie=>{const{name:ke,value:Ae}=ie.target;r(ae=>({...ae,[ke]:Ae}))},G=async ie=>{if(ie.preventDefault(),o(""),u(""),!a.name.trim()||!a.stage.trim()){o("Both name and stage are required.");return}try{n(!0);const ke=await re.post(`${se}/classes/streams`,a,{headers:{Authorization:`Bearer ${t}`}});ke.data.success?(u("Stream added successfully!"),r({name:"",stage:""}),oe()):o(ke.data.message||"Failed to add stream.")}catch(ke){o(ke.response?.data?.message||"Failed to add stream.")}finally{n(!1)}},z=ie=>{w(ie.id),T({name:ie.name,stage:ie.stage})},Z=()=>{w(null),T({name:"",stage:""})},Q=async ie=>{if(!j.name.trim()||!j.stage.trim()){v("Both name and stage are required.");return}try{R(!0),v("");const ke=await re.put(`${se}/classes/streams/${ie}`,j,{headers:{Authorization:`Bearer ${t}`}});ke.data.success?(w(null),T({name:"",stage:""}),oe()):v(ke.data.message||"Failed to update stream.")}catch(ke){v(ke.response?.data?.message||"Failed to update stream.")}finally{R(!1)}},fe=async ie=>{if(window.confirm("Are you sure you want to delete this stream? This action cannot be undone."))try{$(ie),v("");const ke=await re.delete(`${se}/classes/streams/${ie}`,{headers:{Authorization:`Bearer ${t}`}});ke.data.success?oe():v(ke.data.message||"Failed to delete stream.")}catch(ke){v(ke.response?.data?.message||"Failed to delete stream.")}finally{$(null)}};x.useEffect(()=>{he()},[]);const he=async()=>{W(!0),te("");try{const ie=await re.get(`${se}/classes/subjects`,{headers:{Authorization:`Bearer ${t}`}});ie.data.success?Y(ie.data.data||[]):te("Failed to load subjects.")}catch{te("Failed to load subjects.")}finally{W(!1)}},ne=ie=>{const{name:ke,value:Ae}=ie.target;M(ae=>({...ae,[ke]:Ae}))},me=async ie=>{if(ie.preventDefault(),C(""),H(""),!A.code.trim()||!A.name.trim()){C("Both code and name are required.");return}try{B(!0);const ke=await re.post(`${se}/classes/subjects`,A,{headers:{Authorization:`Bearer ${t}`}});ke.data.success?(H("Subject added successfully!"),M({code:"",name:"",syllabus:""}),he()):C(ke.data.message||"Failed to add subject.")}catch(ke){console.log("Error adding subject:",ke),C(ke.response?.data?.message||"Failed to add subject.")}finally{B(!1)}},pe=()=>{const ie=Math.floor(1e3+Math.random()*9e3);M(ke=>({...ke,code:`SUBJ${ie}`}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-6 mb-6",children:[e.jsxs("h2",{className:" font-semibold text-gray-900 mb-2 flex items-center",children:[e.jsx(I,{icon:Cr,className:"mr-2 h-5 w-5 text-gray-400"}),"Add New Stream"]}),e.jsxs("form",{onSubmit:G,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Stream Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:q,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Grade 1, Form 2, ECD A",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Stage ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"stage",value:a.stage,onChange:q,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Primary, Secondary, ECD",required:!0})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:s,className:`px-6 py-2 text-xs font-medium text-white ${s?"bg-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-800"} w-full`,children:s?"Adding...":"Add Stream"})})]}),(i||c)&&e.jsx("div",{className:`mt-3 text-xs ${i?"text-red-600":"text-green-600"}`,children:i||c})]}),e.jsxs("div",{className:"p-6 mb-6",children:[e.jsxs("h2",{className:" font-semibold text-gray-900 mb-2 flex items-center",children:[e.jsx(I,{icon:Zc,className:"mr-2 h-5 w-5 text-gray-400"}),"Add New Subject"]}),e.jsxs("form",{onSubmit:me,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Subject Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",name:"code",value:A.code,onChange:ne,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., ENG101",required:!0}),e.jsx("button",{type:"button",onClick:pe,className:"mt-1 px-2 py-1 text-xs bg-gray-200 hover:bg-gray-300 text-gray-700 border border-gray-300 rounded",children:"Auto"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-600",children:["Subject Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:A.name,onChange:ne,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., English Language",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Syllabus"}),e.jsx("input",{type:"text",name:"syllabus",value:A.syllabus,onChange:ne,className:"mt-1 block w-full border border-gray-300 px-3 py-2 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., ZIMSEC, Cambridge"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:_,className:`px-6 py-2 text-xs font-medium text-white ${_?"bg-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-800"} w-full`,children:_?"Adding...":"Add Subject"})})]}),(D||L)&&e.jsx("div",{className:`mt-3 text-xs ${D?"text-red-600":"text-green-600"}`,children:D||L})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:" font-semibold text-gray-900 mb-2",children:"Existing Streams"}),g&&e.jsx("div",{className:"mb-3 text-xs text-red-600 bg-red-50 p-2 rounded",children:g}),p?e.jsx("div",{className:"text-xs text-gray-500",children:"Loading streams..."}):m.length===0?e.jsx("div",{className:"text-xs text-gray-500",children:"No streams found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Stream Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Stage"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(ie=>e.jsx("tr",{children:N===ie.id?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("input",{type:"text",value:j.name,onChange:ke=>T(Ae=>({...Ae,name:ke.target.value})),className:"w-full px-2 py-1 border border-gray-300 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Stream Name"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("input",{type:"text",value:j.stage,onChange:ke=>T(Ae=>({...Ae,stage:ke.target.value})),className:"w-full px-2 py-1 border border-gray-300 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Stage"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Q(ie.id),disabled:k,className:"px-2 py-1 text-xs bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 flex items-center",title:"Save",children:e.jsx(I,{icon:ns,className:"h-3 w-3"})}),e.jsx("button",{onClick:Z,disabled:k,className:"px-2 py-1 text-xs bg-gray-500 text-white hover:bg-gray-600 disabled:opacity-50 flex items-center",title:"Cancel",children:e.jsx(I,{icon:Wt,className:"h-3 w-3"})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ie.name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ie.stage}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>z(ie),className:"px-2 py-1 text-xs bg-blue-600 text-white hover:bg-blue-700 flex items-center",title:"Edit",children:e.jsx(I,{icon:Aa,className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>fe(ie.id),disabled:P===ie.id,className:"px-2 py-1 text-xs bg-red-600 text-white hover:bg-red-700 disabled:opacity-50 flex items-center",title:"Delete",children:e.jsx(I,{icon:sa,className:"h-3 w-3"})})]})})]})},ie.id))})]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:" font-semibold text-gray-900 mb-2",children:"Existing Subjects"}),J?e.jsx("div",{className:"text-xs text-gray-500",children:"Loading subjects..."}):X?e.jsx("div",{className:"text-xs text-red-600",children:X}):V.length===0?e.jsx("div",{className:"text-xs text-gray-500",children:"No subjects found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 text-xs",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Subject Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Code"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium tracking-wider",children:"Syllabus"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.map(ie=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ie.name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ie.code}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ie.syllabus||"-"})]},ie.id))})]})})]})]})},yue=()=>{const{token:t}=At(),[a,r]=x.useState(""),[s,n]=x.useState(null),[i,o]=x.useState(null),[c,u]=x.useState([]),[m,h]=x.useState(!1),[p,y]=x.useState(""),[g,v]=x.useState({start_date:"",end_date:"",page:1,limit:50}),[N,w]=x.useState({}),j=async()=>{if(console.log(" Starting student search for:",a),!a.trim()){y("Please enter a student registration number");return}h(!0),y("");try{console.log(" Making API call to:",`${se}/students/search?query=${a}`),console.log(" Making balance API call to:",`${se}/student-balances/${a}`);const _=await re.get(`${se}/students/search?query=${a}`,{headers:{Authorization:`Bearer ${t}`}});console.log(" Student response:",_.data),n(_.data.data[0]);const B=await re.get(`${se}/student-balances/${a}`,{headers:{Authorization:`Bearer ${t}`}});console.log(" Balance response:",B.data),o(B.data.data),await T()}catch(_){console.error("Error searching student:",_),console.error("Error response:",_.response),console.error("Error status:",_.response?.status),console.error("Error data:",_.response?.data);let B="Failed to find student";_.response?.status===403?B="Access denied. You may not have permission to view student information.":_.response?.status===404?B="Student not found. Please check the registration number.":_.response?.data?.message&&(B=_.response.data.message),y(B),n(null),o(null),u([])}finally{h(!1)}},T=async()=>{if(a)try{const _=new URLSearchParams({page:g.page,limit:g.limit,...g.start_date&&{start_date:g.start_date},...g.end_date&&{end_date:g.end_date}}),B=await re.get(`${se}/student-balances/${a}/statement?${_}`,{headers:{Authorization:`Bearer ${t}`}});u(B.data.data.transactions),w(B.data.data.pagination)}catch(_){console.error("Error fetching statement:",_),y("Failed to fetch student statement")}},k=(_,B)=>{v(D=>({...D,[_]:B,page:1}))},R=()=>{T()},P=_=>{v(B=>({...B,page:_}))},$=(_,B)=>{const D=parseFloat(_).toFixed(2),C=B==="CREDIT"?"text-green-600":"text-red-600",L=B==="CREDIT"?Ht:V0;return e.jsxs("span",{className:`font-semibold ${C} flex items-center gap-1`,children:[e.jsx(I,{icon:L,className:"text-xs"}),"$",D]})},A=_=>new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),M=_=>_==="CREDIT"?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200";return x.useEffect(()=>{a&&s&&T()},[g.page,g.limit]),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Student Statement"}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex gap-4 items-end",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Student Registration Number"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:_=>r(_.target.value),placeholder:"Enter registration number",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("button",{onClick:j,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:[e.jsx(I,{icon:ua,className:"mr-2"}),m?"Searching...":"Search"]})]})]})})}),p&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:p}),s&&i&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Student Information"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",s.Name," ",s.Surname]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Reg No:"})," ",s.RegNumber]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Gender:"})," ",s.Gender]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Current Balance"}),e.jsxs("div",{className:`text-2xl font-bold ${i.current_balance>=0?"text-green-600":"text-red-600"}`,children:["$",parseFloat(i.current_balance).toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-500",children:i.current_balance>=0?"Credit Balance":"Outstanding Balance"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Last updated: ",A(i.last_updated)]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{className:"w-full px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:[e.jsx(I,{icon:fi,className:"mr-1"}),"Download Statement"]}),e.jsxs("button",{className:"w-full px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:[e.jsx(I,{icon:Mi,className:"mr-1"}),"Print Statement"]})]})]})]})}),s&&e.jsxs("div",{className:"mb-6 bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Filter Transactions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:g.start_date,onChange:_=>k("start_date",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:g.end_date,onChange:_=>k("end_date",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Records per page"}),e.jsxs("select",{value:g.limit,onChange:_=>k("limit",_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:R,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx(I,{icon:Es,className:"mr-2"}),"Apply Filters"]})})]})]}),s&&c.length>0&&e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Term/Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class/Hostel"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:A(_.transaction_date)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${M(_.transaction_type)}`,children:_.transaction_type})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:$(_.amount,_.transaction_type)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 max-w-xs truncate",children:_.description}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:_.term&&_.academic_year?`${_.term} ${_.academic_year}`:"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:_.class_name||_.hostel_name||"-"})]},_.id))})]}),N.totalPages>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(N.page-1)*N.limit+1," to ",Math.min(N.page*N.limit,N.total)," of ",N.total," results"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>P(N.page-1),disabled:N.page<=1,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),e.jsxs("span",{className:"px-3 py-1 text-sm text-gray-700",children:["Page ",N.page," of ",N.totalPages]}),e.jsx("button",{onClick:()=>P(N.page+1),disabled:N.page>=N.totalPages,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]}),s&&c.length===0&&!m&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:qa,className:"text-4xl text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No transactions found for this student."})]})]})})},SL=()=>{const{token:t}=At(),[a,r]=x.useState([]),[s,n]=x.useState(null),[i,o]=x.useState(!0),[c,u]=x.useState(""),[m,h]=x.useState(""),[p,y]=x.useState(""),[g,v]=x.useState({currentPage:1,totalPages:1,totalStudents:0,limit:25,hasNextPage:!1,hasPreviousPage:!1});x.useEffect(()=>{N(),w()},[g.currentPage,p]);const N=async()=>{try{o(!0),u("");const D=new URLSearchParams({page:g.currentPage,limit:g.limit,...p&&{search:p.trim()}}),C=await re.get(`${se}/students/balances/outstanding?${D}`,{headers:{Authorization:`Bearer ${t}`}});C.data.success&&(r(C.data.data),v(C.data.pagination))}catch(D){console.error("Error fetching student balances:",D),u("Failed to fetch student balances")}finally{o(!1)}},w=async()=>{try{const D=await re.get(`${se}/students/balances/summary`,{headers:{Authorization:`Bearer ${t}`}});D.data.success&&n(D.data.data)}catch(D){console.error("Error fetching summary:",D)}},j=D=>{D&&D.preventDefault(),y(m),v(C=>({...C,currentPage:1}))},T=()=>{h(""),y(""),v(D=>({...D,currentPage:1}))},k=D=>{v(C=>({...C,currentPage:D}))},R=D=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(D)),P=D=>D?new Date(D).toLocaleDateString("en-GB"):"N/A",$=()=>{N(),w()},A=()=>{const D=[["Registration Number","Name","Surname","Outstanding Balance","Last Transaction Date"],...a.map(V=>[V.RegNumber,V.Name,V.Surname,Math.abs(V.current_balance).toFixed(2),V.last_transaction_date?P(V.last_transaction_date):"N/A"])].map(V=>V.join(",")).join(`
`),C=new Blob([D],{type:"text/csv"}),L=window.URL.createObjectURL(C),H=document.createElement("a");H.href=L,H.download=`outstanding-balances-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(H),H.click(),window.URL.revokeObjectURL(L),document.body.removeChild(H)},M=()=>{const D=window.open("","_blank");D.document.write(`
      <html>
        <head>
          <title>Outstanding Student Balances</title>
          <style>
            body { font-family: 'Nunito', sans-serif; margin: 20px; }
            .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 10px; margin-bottom: 20px; }
            .summary { background: #f5f5f5; padding: 15px; margin-bottom: 20px; border: 1px solid #ddd; }
            table { width: 100%; border-collapse: collapse; margin-top: 10px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; font-size: 12px; }
            th { background-color: #f2f2f2; text-transform: uppercase; }
            .amount { text-align: right; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>OUTSTANDING STUDENT BALANCES</h1>
            <p>Generated on ${new Date().toLocaleDateString()}</p>
          </div>
          <div class="summary">
            <h3>Summary</h3>
            <p><strong>Total Students with Debt:</strong> ${s?.total_students_with_debt||0}</p>
            <p><strong>Total Outstanding:</strong> ${R(s?.total_outstanding_debt||0)}</p>
          </div>
          <table>
            <thead>
              <tr>
                <th>Registration No</th>
                <th>Name</th>
                <th>Surname</th>
                <th class="amount">Outstanding Balance</th>
                <th>Last Transaction</th>
              </tr>
            </thead>
            <tbody>
              ${a.map(C=>`
                <tr>
                  <td>${C.RegNumber}</td>
                  <td>${C.Name}</td>
                  <td>${C.Surname}</td>
                  <td class="amount">${R(C.current_balance)}</td>
                  <td>${C.last_transaction_date?P(C.last_transaction_date):"N/A"}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
        </body>
      </html>
    `),D.document.close(),D.print()},_=a.length>0?(g.currentPage-1)*g.limit+1:0,B=Math.min(g.currentPage*g.limit,g.totalStudents);return e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Outstanding Student Balances"}),e.jsx("p",{className:"report-subtitle",children:"Students with outstanding debts and payment obligations."})]}),e.jsxs("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsxs("button",{onClick:$,className:"btn-checklist",style:{backgroundColor:"#475569"},children:[e.jsx(I,{icon:uE}),"Refresh"]}),e.jsxs("button",{onClick:A,className:"btn-checklist",style:{backgroundColor:"#059669"},children:[e.jsx(I,{icon:fi}),"Export"]}),e.jsxs("button",{onClick:M,className:"btn-checklist",children:[e.jsx(I,{icon:Mi}),"Print"]})]})]}),e.jsx("div",{className:"report-filters",style:{flexShrink:0,padding:"10px 30px",background:"#f8fafc",borderBottom:"1px solid var(--border-color)",gap:"24px"},children:s&&e.jsxs(am.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"6px",background:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(I,{icon:Ma,style:{color:"#dc2626",fontSize:"0.85rem"}})}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontSize:"0.65rem",color:"#64748b",fontWeight:700,textTransform:"uppercase"},children:"Students with Debt"}),e.jsx("p",{style:{margin:0,fontSize:"0.9rem",fontWeight:700,color:"#1e293b"},children:s.total_students_with_debt})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"6px",background:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(I,{icon:Za,style:{color:"#dc2626",fontSize:"0.85rem"}})}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontSize:"0.65rem",color:"#64748b",fontWeight:700,textTransform:"uppercase"},children:"Total Outstanding"}),e.jsx("p",{style:{margin:0,fontSize:"0.9rem",fontWeight:700,color:"#1e293b"},children:R(s.total_outstanding_debt)})]})]})]})}),e.jsx("div",{className:"report-filters",style:{flexShrink:0,borderTop:"none"},children:e.jsx("div",{className:"report-filters-left",children:e.jsx("form",{onSubmit:j,className:"filter-group",children:e.jsxs("div",{className:"search-input-wrapper",style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:ua,className:"search-icon"}),e.jsx("input",{type:"text",value:m,onChange:D=>h(D.target.value),placeholder:"Search by name or reg number...",className:"filter-input search-input",style:{width:"300px"}}),m&&e.jsx("button",{type:"button",onClick:T,style:{position:"absolute",right:"8px",padding:"4px 6px",background:"transparent",border:"none",cursor:"pointer",fontSize:"1rem",color:"var(--text-secondary)"},children:""})]})})})}),c&&e.jsx("div",{style:{padding:"10px 30px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem"},children:c}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:i&&a.length===0?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading outstanding balances..."}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"STUDENT"}),e.jsx("th",{style:{padding:"6px 10px"},children:"REG NUMBER"}),e.jsx("th",{style:{padding:"6px 10px",textAlign:"right"},children:"OUTSTANDING BALANCE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"LAST TRANSACTION"})]})}),e.jsxs("tbody",{children:[a.map((D,C)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:C%2===0?"#fafafa":"#f3f4f6"},children:[e.jsxs("td",{style:{padding:"4px 10px",fontWeight:600},children:[D.Name," ",D.Surname]}),e.jsx("td",{style:{padding:"4px 10px"},children:D.RegNumber}),e.jsx("td",{style:{padding:"4px 10px",textAlign:"right",color:"#dc2626",fontWeight:700},children:R(D.current_balance)}),e.jsx("td",{style:{padding:"4px 10px"},children:D.last_transaction_date?P(D.last_transaction_date):"N/A"})]},D.RegNumber)),Array.from({length:Math.max(0,25-a.length)}).map((D,C)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(a.length+C)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${C}`))]})]})}),e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",_," to ",B," of ",g.totalStudents||0," results."]}),e.jsx("div",{className:"table-footer-right",children:g.totalPages>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>k(g.currentPage-1),disabled:!g.hasPreviousPage,children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",g.currentPage," of ",g.totalPages]}),e.jsx("button",{className:"pagination-btn",onClick:()=>k(g.currentPage+1),disabled:!g.hasNextPage,children:"Next"})]})})]})]})},bue=()=>{const{token:t}=At(),[a,r]=x.useState(""),[s,n]=x.useState(null),[i,o]=x.useState(null),[c,u]=x.useState([]),[m,h]=x.useState(!1),[p,y]=x.useState(""),[g,v]=x.useState(""),[N,w]=x.useState(!1),[j,T]=x.useState(!1),[k,R]=x.useState({payment_amount:"",payment_currency:"",exchange_rate:1,payment_method:"Cash",payment_date:new Date().toISOString().split("T")[0],reference_number:"",notes:""}),[P,$]=x.useState(null);x.useEffect(()=>{A()},[]);const A=async()=>{try{const L=await re.get(`${se}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}});u(L.data.data)}catch(L){console.error("Error fetching currencies:",L)}},M=async()=>{if(console.log(" Starting student search for:",a),!a.trim()){y("Please enter a student registration number"),T(!0);return}h(!0),y("");try{console.log(" Making API call to:",`${se}/students/search?query=${a}`);const L=await re.get(`${se}/students/search?query=${a}`,{headers:{Authorization:`Bearer ${t}`}});console.log(" Student response:",L.data),n(L.data.data[0]),console.log(" Making balance API call to:",`${se}/student-balances/${a}`);const H=await re.get(`${se}/student-balances/${a}`,{headers:{Authorization:`Bearer ${t}`}});console.log(" Balance response:",H.data),o(H.data.data)}catch(L){console.error("Error searching student:",L),console.error("Error response:",L.response),console.error("Error status:",L.response?.status),console.error("Error data:",L.response?.data);let H="Failed to find student";L.response?.status===403?H="Access denied. You may not have permission to view student information.":L.response?.status===404?H="Student not found. Please check the registration number.":L.response?.data?.message&&(H=L.response.data.message),y(H),T(!0),n(null),o(null)}finally{h(!1)}},_=(L,H)=>{if(R(V=>({...V,[L]:H})),L==="payment_currency"){const V=c.find(Y=>Y.id==H);V&&R(Y=>({...Y,exchange_rate:V.exchange_rate||1}))}},B=()=>{const L=parseFloat(k.payment_amount)||0,H=parseFloat(k.exchange_rate)||1;return(L*H).toFixed(2)},D=async()=>{if(!s){y("Please search for a student first"),T(!0);return}if(!k.payment_amount||!k.payment_currency||!k.payment_method){y("Please fill in all required fields"),T(!0);return}h(!0),y("");try{const L={student_reg_number:a,...k,base_currency_amount:B()},H=await re.post(`${se}/fees/payments`,L,{headers:{Authorization:`Bearer ${t}`}});if($(H.data.data),v("Payment processed successfully!"),w(!0),R({payment_amount:"",payment_currency:"",exchange_rate:1,payment_method:"Cash",payment_date:new Date().toISOString().split("T")[0],reference_number:"",notes:""}),s){const V=await re.get(`${se}/student-balances/${a}`,{headers:{Authorization:`Bearer ${t}`}});o(V.data.data)}}catch(L){console.error("Error processing payment:",L),y(L.response?.data?.message||"Failed to process payment"),T(!0)}finally{h(!1)}},C=()=>{if(P){const L=window.open("","_blank");L.document.write(`
                <html>
                    <head>
                        <title>Payment Receipt</title>
                        <style>
                            body { font-family: Arial, sans-serif; margin: 20px; }
                            .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px; }
                            .receipt-details { margin-bottom: 20px; }
                            .receipt-details table { width: 100%; border-collapse: collapse; }
                            .receipt-details td { padding: 5px; border-bottom: 1px solid #ddd; }
                            .amount { font-size: 18px; font-weight: bold; color: #2563eb; }
                            .footer { margin-top: 30px; text-align: center; font-size: 12px; color: #666; }
                        </style>
                    </head>
                    <body>
                        <div class="header">
                            <h1>Payment Receipt</h1>
                            <p>Receipt #: ${P.receipt_number}</p>
                        </div>
                        <div class="receipt-details">
                            <table>
                                <tr><td><strong>Student:</strong></td><td>${s?.Name} ${s?.Surname}</td></tr>
                                <tr><td><strong>Registration No:</strong></td><td>${s?.RegNumber}</td></tr>
                                <tr><td><strong>Payment Date:</strong></td><td>${k.payment_date}</td></tr>
                                <tr><td><strong>Payment Method:</strong></td><td>${k.payment_method}</td></tr>
                                <tr><td><strong>Amount:</strong></td><td class="amount">$${B()}</td></tr>
                                ${k.reference_number?`<tr><td><strong>Reference:</strong></td><td>${k.reference_number}</td></tr>`:""}
                                ${k.notes?`<tr><td><strong>Notes:</strong></td><td>${k.notes}</td></tr>`:""}
                            </table>
                        </div>
                        <div class="footer">
                            <p>Thank you for your payment!</p>
                            <p>Generated on: ${new Date().toLocaleString()}</p>
                        </div>
                    </body>
                </html>
            `),L.document.close(),L.print()}};return e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Fee Payment"}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex gap-4 items-end",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Student Registration Number"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:L=>r(L.target.value),placeholder:"Enter registration number",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("button",{onClick:M,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:[e.jsx(I,{icon:ua,className:"mr-2"}),m?"Searching...":"Search"]})]})]})})}),s&&i&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-blue-800 mb-2 flex items-center",children:[e.jsx(I,{icon:Js,className:"mr-2"}),"Student Information"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",s.Name," ",s.Surname]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Reg No:"})," ",s.RegNumber]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Gender:"})," ",s.Gender]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[e.jsx(I,{icon:Za,className:"mr-2"}),"Current Balance"]}),e.jsxs("div",{className:`text-2xl font-bold ${i.current_balance>=0?"text-green-600":"text-red-600"}`,children:["$",parseFloat(i.current_balance).toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-500",children:i.current_balance>=0?"Credit Balance":"Outstanding Balance"})]})]})}),s&&e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(I,{icon:ql,className:"mr-2"}),"Payment Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Amount *"}),e.jsx("input",{type:"number",step:"0.01",value:k.payment_amount,onChange:L=>_("payment_amount",L.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency *"}),e.jsxs("select",{value:k.payment_currency,onChange:L=>_("payment_currency",L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Currency"}),c.map(L=>e.jsxs("option",{value:L.id,children:[L.name," (",L.code,")"]},L.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exchange Rate"}),e.jsx("input",{type:"number",step:"0.000001",value:k.exchange_rate,onChange:L=>_("exchange_rate",L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method *"}),e.jsxs("select",{value:k.payment_method,onChange:L=>_("payment_method",L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Cheque",children:"Cheque"}),e.jsx("option",{value:"Mobile Money",children:"Mobile Money"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Date"}),e.jsx("input",{type:"date",value:k.payment_date,onChange:L=>_("payment_date",L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reference Number"}),e.jsx("input",{type:"text",value:k.reference_number,onChange:L=>_("reference_number",L.target.value),placeholder:"Transaction reference",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{value:k.notes,onChange:L=>_("notes",L.target.value),placeholder:"Additional notes...",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),k.payment_amount&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Base Currency Amount:"}),e.jsxs("span",{className:"ml-2 text-lg font-bold text-blue-600",children:["$",B()]})]})}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:D,disabled:m||!k.payment_amount||!k.payment_currency,className:"w-full px-6 py-3 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(I,{icon:Hn,className:"mr-2"}),m?"Processing Payment...":"Process Payment"]})})]}),P&&e.jsxs("div",{className:"mt-6 bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-3",children:"Payment Successful!"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Receipt #: ",e.jsx("span",{className:"font-medium",children:P.receipt_number})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:C,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx(I,{icon:Mi,className:"mr-2"}),"Print Receipt"]}),e.jsxs("button",{onClick:()=>$(null),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500",children:[e.jsx(I,{icon:Wt,className:"mr-2"}),"Close"]})]})]})]}),e.jsx(Am,{isOpen:N,onClose:()=>w(!1),title:"Payment Successful",message:g}),e.jsx(dd,{isOpen:j,onClose:()=>T(!1),title:"Payment Error",message:p})]})},vue=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState(""),[i,o]=x.useState(null),[c,u]=x.useState([]),[m,h]=x.useState(null),[p,y]=x.useState([]),[g,v]=x.useState(!1),[N,w]=x.useState("");x.useEffect(()=>{i&&k()},[i]);const j=async()=>{if(s.trim()){r(!0);try{const A=await re.get(`${se}/students/search?query=${s}`,{headers:{Authorization:`Bearer ${t}`}});u(A.data.data||[])}catch(A){console.error("Error searching students:",A),u([]),w("Failed to search students"),v(!0)}finally{r(!1)}}},T=A=>{o(A),u([]),n(""),h(null),y([])},k=async()=>{if(i){r(!0);try{const A=await re.get(`${se}/student-financial-records/${i.RegNumber}/summary`,{headers:{Authorization:`Bearer ${t}`}}),M=await re.get(`${se}/student-financial-records/${i.RegNumber}/transactions`,{headers:{Authorization:`Bearer ${t}`}});if(console.log("Financial Summary:",A.data.data),console.log("Transactions:",M.data.data),M.data.data&&Array.isArray(M.data.data)){const _=M.data.data.filter(B=>B.fee_type==="boarding");console.log("Boarding transactions found:",_.length),_.forEach((B,D)=>{console.log(`Boarding transaction ${D+1}:`,{id:B.id,amount:B.amount,transaction_type:B.transaction_type,notes:B.notes,fee_type:B.fee_type})})}if(M.data.data&&Array.isArray(M.data.data)){console.log("=== DETAILED TRANSACTION ANALYSIS ==="),console.log("Total transactions received:",M.data.data.length),M.data.data.forEach((L,H)=>{console.log(`Transaction ${H+1}:`,{id:L.id,transaction_type:L.transaction_type,amount:L.amount,fee_type:L.fee_type,notes:L.notes,payment_date:L.payment_date,running_balance:L.running_balance})});const _=M.data.data.every(L=>L.transaction_type!==void 0);console.log("All transactions have transaction_type field:",_);const B=M.data.data.reduce((L,H)=>(L[H.transaction_type]=(L[H.transaction_type]||0)+1,L),{});console.log("Transaction type counts:",B);const D=M.data.data.filter(L=>L.transaction_type==="DEBIT"),C=M.data.data.filter(L=>L.transaction_type==="CREDIT");console.log("DEBIT transactions count:",D.length),console.log("CREDIT transactions count:",C.length),console.log("=== END ANALYSIS ===")}else console.log("No transactions data or not an array:",M.data.data);h(A.data.data||{}),y(M.data.data||[])}catch(A){console.error("Error fetching financial data:",A),console.error("Error response:",A.response?.data),console.error("Error status:",A.response?.status),console.error("Error URL:",A.config?.url),w(`Failed to fetch financial data: ${A.response?.data?.message||A.message}`),v(!0)}finally{r(!1)}}},R=(A,M="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:M}).format(A),P=A=>{switch(A){case"tuition":return uF;case"boarding":return as;case"other":return pf;default:return Za}},$=A=>{switch(A){case"tuition":return"text-blue-600";case"boarding":return"text-green-600";case"other":return"text-purple-600";default:return"text-gray-600"}};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          @media print {
            body { margin: 0; }
            .print-break { page-break-before: always; }
            table { page-break-inside: avoid; }
            .print-header { display: block !important; }
            .print-hidden { display: none !important; }
          }
        `}),e.jsxs("div",{className:"bg-white border border-gray-200 p-4 print:p-0",children:[e.jsxs("div",{className:"hidden print:block mb-6 border-b border-gray-300 pb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Student Financial Statement"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Generated on ",new Date().toLocaleDateString()]})]}),i&&e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Student:"})," ",i.Name," ",i.Surname]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Registration No:"})," ",i.RegNumber]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Class:"})," ",i.ClassName||"Not Assigned"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Academic Year:"})," 2025"]})]})]}),e.jsx("h2",{className:"text-sm font-medium text-gray-900 mb-4 print:text-base print:hidden",children:"Student Financial Record"}),e.jsxs("div",{className:"mb-6 print:hidden",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-2",children:"Search Student"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(I,{icon:ua,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",value:s,onChange:A=>n(A.target.value),placeholder:"Enter student name or registration number...",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsx("button",{type:"button",onClick:j,disabled:a,className:"bg-gray-600 text-white px-3 py-1.5 text-xs hover:bg-gray-700 disabled:opacity-50",children:a?"Searching...":"Search"})]}),c.length>0&&e.jsx("div",{className:"mt-2 border border-gray-200 max-h-32 overflow-y-auto",children:c.map(A=>e.jsxs("div",{onClick:()=>T(A),className:"p-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"font-medium text-gray-900 text-xs",children:[A.Name," ",A.Surname]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Reg: ",A.RegNumber," | Class: ",A.ClassName||"Not Assigned"]})]},A.RegNumber))}),i&&e.jsx("div",{className:"mt-3 bg-gray-50 p-3 border border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[i.Name," ",i.Surname]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Registration No:"}),e.jsx("span",{className:"ml-1 font-medium",children:i.RegNumber})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Class:"}),e.jsx("span",{className:"ml-1 font-medium",children:i.ClassName||"Not Assigned"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Academic Year:"}),e.jsx("span",{className:"ml-1 font-medium",children:"2025"})]})]})})]}),m&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-gray-50 p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Current Balance"}),e.jsx("div",{className:`text-lg font-bold ${(m.balance||0)>=0?"text-green-900":"text-red-900"}`,children:R(m.balance||0)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-600",children:m.balance>=0?"CR":"DR"}),e.jsx("div",{className:"text-xs font-medium text-gray-900",children:m.balance>=0?"Credit Balance":"Debit Balance"})]})]})})}),i&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-medium text-gray-900 mb-3",children:["Financial Statement (",p.length," records)"]}),a?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"Loading transactions..."})}):p.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border border-gray-200",children:"Date"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border border-gray-200",children:"Type"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border border-gray-200",children:"Description"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider border border-gray-200",children:"DR"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider border border-gray-200",children:"CR"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider border border-gray-200",children:"Balance"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map((A,M)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900 border border-gray-200",children:new Date(A.payment_date).toLocaleDateString()}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap border border-gray-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:P(A.fee_type),className:`text-xs mr-1 ${$(A.fee_type)}`}),e.jsx("span",{className:`text-xs font-medium capitalize ${$(A.fee_type)}`,children:A.fee_type})]})}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-900 border border-gray-200",children:A.notes||`${A.fee_type} payment`}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right border border-gray-200",children:(console.log("Rendering DR column for transaction:",{id:A.id,transaction_type:A.transaction_type,amount:A.amount,isDebit:A.transaction_type==="DEBIT"}),A.transaction_type==="DEBIT"?e.jsx("span",{className:"text-red-600 font-medium",children:R(Math.abs(A.amount),A.currency_symbol)}):e.jsx("span",{className:"text-gray-400",children:"-"}))}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right border border-gray-200",children:(console.log("Rendering CR column for transaction:",{id:A.id,transaction_type:A.transaction_type,amount:A.amount,isCredit:A.transaction_type==="CREDIT"}),A.transaction_type==="CREDIT"?e.jsx("span",{className:"text-green-600 font-medium",children:R(Math.abs(A.amount),A.currency_symbol)}):e.jsx("span",{className:"text-gray-400",children:"-"}))}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-right font-medium border border-gray-200",children:e.jsx("span",{className:A.running_balance>=0?"text-green-600":"text-red-600",children:R(A.running_balance||0,A.currency_symbol)})})]},A.id||M))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:hE,className:"text-gray-400 text-2xl mb-2"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"No transactions found"})]})]}),e.jsx(dd,{isOpen:g,onClose:()=>v(!1),message:N})]})]})},_L=()=>e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Student Financial Record"}),e.jsx("p",{className:"text-xs text-gray-600",children:"View and manage student financial statements"})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx("div",{children:e.jsx(vue,{})})})]})}),jue=()=>{const{token:t}=At(),[a,r]=x.useState("journal"),[s,n]=x.useState(!1),[i,o]=x.useState(null),[c,u]=x.useState([]),[m,h]=x.useState({current_page:1,total_pages:1,total_records:0,limit:20}),[p,y]=x.useState({search:"",startDate:"",endDate:"",transactionType:""}),[g,v]=x.useState([]),[N,w]=x.useState([]),[j,T]=x.useState(""),[k,R]=x.useState({summary:[],totals:{total_debits:0,total_credits:0,net_amount:0}});x.useEffect(()=>{a==="journal"?P():a==="balances"?$():a==="summary"&&A()},[a,p,m.current_page,j]),x.useEffect(()=>{M()},[]);const P=async()=>{try{n(!0),o(null);const X={page:m.current_page,limit:m.limit,...p},oe=(await re.get(`${se}/accounting/general-ledger`,{params:X,headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data;u(oe.data||[]),h(oe.pagination||m)}catch(X){console.error("Error fetching journal entries:",X),o(X.response?.data?.message||"Failed to fetch journal entries")}finally{n(!1)}},$=async()=>{try{n(!0),o(null);const X={};j&&(X.currency_id=j);const te=await re.get(`${se}/accounting/general-ledger/account-balances`,{params:X,headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});v(te.data.data||[])}catch(X){console.error("Error fetching account balances:",X),o(X.response?.data?.message||"Failed to fetch account balances")}finally{n(!1)}},A=async()=>{try{n(!0),o(null);const X={};p.startDate&&(X.startDate=p.startDate),p.endDate&&(X.endDate=p.endDate);const te=await re.get(`${se}/accounting/general-ledger/transaction-summary`,{params:X,headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});R(te.data.data||{summary:[],totals:{total_debits:0,total_credits:0,net_amount:0}})}catch(X){console.error("Error fetching transaction summary:",X),o(X.response?.data?.message||"Failed to fetch transaction summary")}finally{n(!1)}},M=async()=>{try{const X=await re.get(`${se}/accounting/general-ledger/currencies`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});w(X.data.data||[])}catch(X){console.error("Error fetching currencies:",X)}},_=(X,te)=>{y(oe=>({...oe,[X]:te})),h(oe=>({...oe,current_page:1}))},B=X=>{h(te=>({...te,current_page:X}))},D=X=>new Date(X).toLocaleDateString(),C=(X,te="$")=>`${te}${parseFloat(X||0).toFixed(2)}`,L=X=>X==="CREDIT"?"text-green-600":"text-red-600",H=X=>X==="CREDIT"?ql:pf,V=X=>X==="fee_payment"?Za:Js,Y=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsx("input",{type:"text",value:p.search,onChange:X=>_("search",X.target.value),placeholder:"Search transactions...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:p.startDate,onChange:X=>_("startDate",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:p.endDate,onChange:X=>_("endDate",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:p.transactionType,onChange:X=>_("transactionType",X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"DEBIT",children:"Debit"}),e.jsx("option",{value:"CREDIT",children:"Credit"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Journal Entries"}),e.jsx("p",{className:"text-sm text-gray-500",children:"All financial transactions recorded in the system"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created By"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(X=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D(X.transaction_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:X.student_reg_number}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:V(X.source),className:"mr-2 text-gray-400 h-4 w-4"}),X.description]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${L(X.transaction_type)}`,children:[e.jsx(I,{icon:H(X.transaction_type),className:"mr-1 h-3 w-3"}),X.transaction_type]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium",children:e.jsx("span",{className:L(X.transaction_type),children:C(X.amount)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:X.receipt_number||X.reference_number||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:X.created_by})]},`${X.source}-${X.id}`))})]})}),!s&&c.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(I,{icon:Wl,className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No journal entries found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:p.search||p.startDate||p.endDate?"Try adjusting your filters.":"No transactions have been recorded yet."})]}),s&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading journal entries..."})]})]}),m.total_pages>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing page ",m.current_page," of ",m.total_pages,"(",m.total_records," total entries)"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>B(m.current_page-1),disabled:m.current_page===1,className:"px-3 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md",children:"Previous"}),e.jsx("button",{onClick:()=>B(m.current_page+1),disabled:m.current_page===m.total_pages,className:"px-3 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-md",children:"Next"})]})]})]}),J=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Currency:"}),e.jsxs("select",{value:j,onChange:X=>T(X.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"All Currencies"}),N.map(X=>e.jsxs("option",{value:X.id,children:[X.code," - ",X.name]},X.id))]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Account Balances"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Current balances for all chart of accounts"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Account Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parent Account"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Currency"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"As of Date"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(X=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:X.code}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:X.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:X.type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:X.parent_account_name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium",children:X.balance?C(X.balance,X.currency_symbol):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:X.currency_code||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:X.as_of_date?D(X.as_of_date):"-"})]},X.id))})]})}),!s&&g.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(I,{icon:Za,className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No account balances found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No account balances have been recorded yet."})]}),s&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading account balances..."})]})]})]}),W=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(I,{icon:pf,className:"h-8 w-8 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Debits"}),e.jsx("p",{className:"text-2xl font-semibold text-red-600",children:C(k.totals.total_debits)})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(I,{icon:ql,className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Credits"}),e.jsx("p",{className:"text-2xl font-semibold text-green-600",children:C(k.totals.total_credits)})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(I,{icon:Za,className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Net Amount"}),e.jsx("p",{className:`text-2xl font-semibold ${k.totals.net_amount>=0?"text-green-600":"text-red-600"}`,children:C(k.totals.net_amount)})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transaction Summary"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Summary of all transactions by type"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction Type"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction Count"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.summary.map(X=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${L(X.transaction_type)}`,children:[e.jsx(I,{icon:H(X.transaction_type),className:"mr-1 h-3 w-3"}),X.transaction_type]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium",children:e.jsx("span",{className:L(X.transaction_type),children:C(X.total_amount)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-500",children:X.transaction_count})]},X.transaction_type))})]})}),!s&&k.summary.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(I,{icon:Wl,className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No transaction summary available"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No transactions have been recorded yet."})]}),s&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading transaction summary..."})]})]})]});return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"General Ledger"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View journal entries, account balances, and financial summaries"})]}),i&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("div",{className:"text-sm text-red-600",children:i})}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>r("journal"),className:`py-2 px-1 border-b-2 font-medium text-sm ${a==="journal"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(I,{icon:Wl,className:"mr-2"}),"Journal Entries"]}),e.jsxs("button",{onClick:()=>r("balances"),className:`py-2 px-1 border-b-2 font-medium text-sm ${a==="balances"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(I,{icon:Za,className:"mr-2"}),"Account Balances"]}),e.jsxs("button",{onClick:()=>r("summary"),className:`py-2 px-1 border-b-2 font-medium text-sm ${a==="summary"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(I,{icon:pf,className:"mr-2"}),"Transaction Summary"]})]})}),a==="journal"&&Y(),a==="balances"&&J(),a==="summary"&&W()]})},Nue=()=>{const{token:t}=At(),[a,r]=x.useState("2025-01"),[s,n]=x.useState("all"),[i,o]=x.useState(""),[c,u]=x.useState(!1),[m,h]=x.useState(!1),[p,y]=x.useState(null),[g,v]=x.useState([]),[N,w]=x.useState([]),[j,T]=x.useState(!0),[k,R]=x.useState(null),[P,$]=x.useState({bank_account_id:"",reconciliation_date:new Date().toISOString().split("T")[0],bank_balance:"",book_balance:"",description:""}),A=t?{Authorization:`Bearer ${t}`}:{};x.useEffect(()=>{M(),_()},[]);const M=async()=>{try{T(!0);const fe=await re.get(`${se}/accounting/bank-reconciliation`,{headers:A});v(fe.data)}catch(fe){console.error("Error loading reconciliations:",fe),R("Failed to load bank reconciliations")}finally{T(!1)}},_=async()=>{try{const fe=await re.get(`${se}/accounting/bank-reconciliation/accounts`,{headers:A});w(fe.data)}catch(fe){console.error("Error loading bank accounts:",fe),R("Failed to load bank accounts")}},B=async()=>{try{if(!P.bank_account_id||!P.bank_balance){R("Please fill in required fields");return}const fe=await re.post(`${se}/accounting/bank-reconciliation`,P,{headers:A});v([fe.data,...g]),h(!1),$({bank_account_id:"",reconciliation_date:new Date().toISOString().split("T")[0],bank_balance:"",book_balance:"",description:""}),R(null)}catch(fe){console.error("Error creating reconciliation:",fe),R(fe.response?.data?.error||"Failed to create reconciliation")}},D=fe=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(fe),[C,L]=x.useState(""),[H,V]=x.useState(null),[Y,J]=x.useState([]),[W,X]=x.useState([]);x.useEffect(()=>{(async()=>{if(!C){V(null),J([]),X([]);return}try{T(!0);const he=await re.get(`${se}/accounting/bank-reconciliation/${C}`,{headers:A});V(he.data.reconciliation);const ne=(he.data.bank_statements||[]).map(pe=>({id:pe.id,date:pe.transaction_date,description:pe.description,reference:pe.reference,debit:parseFloat(pe.amount)<0?Math.abs(parseFloat(pe.amount)):0,credit:parseFloat(pe.amount)>0?parseFloat(pe.amount):0,balance:null,status:pe.is_reconciled?"reconciled":"unreconciled",reconciled_date:pe.reconciled_at||null}));J(ne);const me=(he.data.book_transactions||[]).map(pe=>({id:pe.id,date:pe.transaction_date||pe.entry_date,description:pe.description,reference:pe.reference,amount:parseFloat(pe.amount||pe.debit||pe.credit||0),type:parseFloat(pe.amount||0)>=0||parseFloat(pe.credit||0)>0?"credit":"debit",status:pe.is_reconciled?"reconciled":"unreconciled"}));X(me)}catch(he){console.error("Error loading reconciliation details:",he),R("Failed to load reconciliation details")}finally{T(!1)}})()},[C]);const te=Y.filter(fe=>{const he=s==="all"||fe.bank_id===parseInt(s),ne=fe.description.toLowerCase().includes(i.toLowerCase())||fe.reference.toLowerCase().includes(i.toLowerCase());return he&&ne}),oe=W.filter(fe=>fe.description.toLowerCase().includes(i.toLowerCase())||fe.reference.toLowerCase().includes(i.toLowerCase())),q=g.filter(fe=>fe.status==="completed").length,G=g.filter(fe=>fe.status==="open").length,z=N.reduce((fe,he)=>fe+parseFloat(he.balance||0),0),Z=fe=>{y(fe),u(!0)},Q=()=>{console.log("Reconciling transaction:",p),u(!1),y(null)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-medium text-gray-900",children:"Bank Reconciliation"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Reconcile bank statements with system transactions"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-600 text-white px-3 py-1.5 text-xs hover:bg-blue-700 flex items-center space-x-1",children:[e.jsx(I,{icon:Ht,className:"text-xs"}),e.jsx("span",{children:"New Reconciliation"})]}),e.jsxs("button",{onClick:M,className:"bg-gray-600 text-white px-3 py-1.5 text-xs hover:bg-gray-700 flex items-center space-x-1",children:[e.jsx(I,{icon:mE,className:"text-xs"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{className:"bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 flex items-center space-x-1",children:[e.jsx(I,{icon:fi,className:"text-xs"}),e.jsx("span",{children:"Export"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(I,{icon:Hn,className:"text-green-600 text-xs"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Reconciled"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:q})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(I,{icon:Wt,className:"text-yellow-600 text-xs"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Unreconciled"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:G})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(I,{icon:Bl,className:"text-blue-600 text-xs"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total Balance"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:D(z)})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(I,{icon:Ri,className:"text-purple-600 text-xs"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Banks"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:N.length})]})]})})]}),e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reconciliation"}),e.jsxs("select",{value:C,onChange:fe=>L(fe.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Reconciliation"}),g.map(fe=>e.jsxs("option",{value:fe.id,children:[fe.reconciliation_date," - ",fe.account_name||fe.bank_account_id," (",fe.status,")"]},fe.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Bank"}),e.jsxs("select",{value:s,onChange:fe=>n(fe.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"all",children:"All Banks"}),N.map(fe=>e.jsx("option",{value:fe.id,children:fe.name},fe.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:ua,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",value:i,onChange:fe=>o(fe.target.value),placeholder:"Search transactions...",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{className:"bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 flex items-center space-x-1",children:[e.jsx(I,{icon:Es,className:"text-xs"}),e.jsx("span",{children:"Filter"})]})})]})}),e.jsxs("div",{className:"bg-white border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"Bank Statement Transactions"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Reference"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Debit"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Credit"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Balance"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:te.map(fe=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:fe.date}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:fe.description}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:fe.reference}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:fe.debit>0?`KES ${fe.debit.toLocaleString()}`:"-"}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:fe.credit>0?`KES ${fe.credit.toLocaleString()}`:"-"}),e.jsxs("td",{className:"px-4 py-2 text-xs text-gray-900",children:["KES ",fe.balance.toLocaleString()]}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${fe.status==="reconciled"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:fe.status==="reconciled"?"Reconciled":"Unreconciled"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("div",{className:"flex space-x-1",children:e.jsx("button",{onClick:()=>Z(fe),className:"text-blue-600 hover:text-blue-800 text-xs",children:e.jsx(I,{icon:qa})})})})]},fe.id))})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h2",{className:"text-sm font-medium text-gray-900",children:"System Transactions"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Reference"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:oe.map(fe=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:fe.date}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:fe.description}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:fe.reference}),e.jsxs("td",{className:"px-4 py-2 text-xs text-gray-900",children:["KES ",fe.amount.toLocaleString()]}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${fe.type==="credit"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:fe.type==="credit"?"Credit":"Debit"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${fe.status==="reconciled"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:fe.status==="reconciled"?"Reconciled":"Unreconciled"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("div",{className:"flex space-x-1",children:e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-xs",children:e.jsx(I,{icon:qa})})})})]},fe.id))})]})})]}),k&&e.jsx("div",{className:"bg-red-50 border border-red-200 p-3 mb-4 text-xs text-red-700",children:k}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"New Bank Reconciliation"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt,className:"text-xs"})})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Bank Account *"}),e.jsxs("select",{value:P.bank_account_id,onChange:fe=>$({...P,bank_account_id:fe.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Bank Account"}),N.map(fe=>e.jsxs("option",{value:fe.id,children:[fe.name," (",fe.code,")"]},fe.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reconciliation Date *"}),e.jsx("input",{type:"date",value:P.reconciliation_date,onChange:fe=>$({...P,reconciliation_date:fe.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Bank Balance *"}),e.jsx("input",{type:"number",step:"0.01",value:P.bank_balance,onChange:fe=>$({...P,bank_balance:fe.target.value}),placeholder:"0.00",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Book Balance"}),e.jsx("input",{type:"number",step:"0.01",value:P.book_balance,onChange:fe=>$({...P,book_balance:fe.target.value}),placeholder:"0.00",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:P.description,onChange:fe=>$({...P,description:fe.target.value}),placeholder:"Optional description...",rows:2,className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>h(!1),className:"px-3 py-1.5 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:B,className:"px-3 py-1.5 bg-blue-600 text-white text-xs hover:bg-blue-700",children:"Create Reconciliation"})]})]})}),c&&p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Reconcile Transaction"}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt,className:"text-xs"})})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("p",{className:"text-xs text-gray-900",children:p.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reference"}),e.jsx("p",{className:"text-xs text-gray-900",children:p.reference})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Amount"}),e.jsx("p",{className:"text-xs text-gray-900",children:p.debit>0?`KES ${p.debit.toLocaleString()}`:p.credit>0?`KES ${p.credit.toLocaleString()}`:"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("p",{className:"text-xs text-gray-900",children:p.date})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>u(!1),className:"px-3 py-1.5 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:Q,className:"px-3 py-1.5 bg-gray-900 text-white text-xs hover:bg-gray-800",children:"Reconcile"})]})]})})]})},wue=()=>{const{token:t}=At(),a=Da(),[r,s]=x.useState(null),[n,i]=x.useState(!1),[o,c]=x.useState(!1),[u,m]=x.useState(!1),[h,p]=x.useState(null),[y,g]=x.useState([]),[v,N]=x.useState(null),[w,j]=x.useState(new Date().getFullYear()),[T,k]=x.useState(new Date().getMonth()+1);x.useEffect(()=>{R()},[]),x.useEffect(()=>{r&&_()},[r]);const R=async()=>{try{const C=await re.get(`${se}/accounting/periods`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});g(C.data)}catch(C){console.error("Error fetching periods:",C),p("Failed to fetch periods")}},P=C=>C==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(C),$=()=>{const C=new Date().getFullYear(),L=[];for(let H=C;H>=C-5;H--)L.push(H);return L},A=()=>[{value:1,name:"January"},{value:2,name:"February"},{value:3,name:"March"},{value:4,name:"April"},{value:5,name:"May"},{value:6,name:"June"},{value:7,name:"July"},{value:8,name:"August"},{value:9,name:"September"},{value:10,name:"October"},{value:11,name:"November"},{value:12,name:"December"}],M=async()=>{try{m(!0),p(null);const L=(await re.get(`${se}/accounting/periods`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data.find(H=>{const V=new Date(H.start_date);return V.getMonth()+1===T&&V.getFullYear()===w});L?(s(L.id),i(L.status==="closed")):(s(null),N(null),p(`No period found for ${A().find(H=>H.value===T)?.name} ${w}`))}catch(C){console.error("Error fetching period data:",C),p("Failed to fetch period data")}finally{m(!1)}},_=async()=>{if(r)try{m(!0),p(null);const C={Authorization:`Bearer ${t}`,"Content-Type":"application/json"},L=await re.get(`${se}/accounting/period-closing/preview/${r}`,{headers:C});N(L.data.data)}catch(C){console.error("Error fetching closing preview:",C),p("Failed to fetch closing preview")}finally{m(!1)}},B=()=>{c(!0)},D=async()=>{try{m(!0);const C=await re.post(`${se}/accounting/period-closing/close/${r}`,{closed_by:"admin"},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});i(!0),c(!1),await M(),alert(`Period closed successfully!

Net Income: ${P(C.data.data.net_income)}
Revenue Accounts Closed: ${C.data.data.revenue_accounts_closed}
Expense Accounts Closed: ${C.data.data.expense_accounts_closed}`)}catch(C){console.error("Error closing period:",C),alert(C.response?.data?.error||C.response?.data?.details||"Failed to close period")}finally{m(!1)}};return e.jsxs("div",{className:"p-4 md:p-6 space-y-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Period Management"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Close accounting periods and manage financial period transitions"})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:()=>a("/dashboard/reports/income-statement"),className:"bg-blue-600 text-white px-3 py-1.5 text-xs hover:bg-blue-700 flex items-center space-x-1",children:[e.jsx(I,{icon:Qc}),e.jsx("span",{children:"View Financial Reports"})]})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[e.jsx(I,{icon:Pa,className:"mr-1"}),"Year"]}),e.jsx("select",{value:w,onChange:C=>j(parseInt(C.target.value)),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",children:$().map(C=>e.jsx("option",{value:C,children:C},C))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Month"}),e.jsx("select",{value:T,onChange:C=>k(parseInt(C.target.value)),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",children:A().map(C=>e.jsx("option",{value:C.value,children:C.name},C.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Period Status"}),e.jsx("div",{className:"text-xs text-gray-900 py-1.5 px-2 border border-gray-300 bg-gray-50",children:v?.period?.status?.toUpperCase()||"NOT SELECTED"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:M,className:"w-full bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800",children:[e.jsx(I,{icon:qa,className:"mr-1"}),"Load Period"]})})]})}),h&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2",children:[e.jsx(I,{icon:Ma,className:"mr-2 text-xs"}),e.jsx("span",{className:"text-xs",children:h})]}),v&&e.jsxs("div",{className:"bg-white border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Closing Preview - ",v.period?.period_name]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:v.is_closed?"Period is already closed":"Preview of what will happen when period is closed"})]}),!v.is_closed&&e.jsxs("button",{onClick:B,disabled:u,className:"bg-red-600 text-white px-3 py-1.5 text-xs hover:bg-red-700 disabled:opacity-50",children:[e.jsx(I,{icon:UN,className:"mr-1"}),"Close Period"]})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 border border-gray-200",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-900 mb-2",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Revenue:"}),e.jsx("span",{className:"ml-2 font-medium text-green-600",children:P(v.summary?.total_revenue||0)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Expenses:"}),e.jsx("span",{className:"ml-2 font-medium text-red-600",children:P(v.summary?.total_expenses||0)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Net Income:"}),e.jsx("span",{className:"ml-2 font-medium text-blue-600",children:P(v.summary?.net_income||0)})]})]})]}),v.revenue_accounts&&v.revenue_accounts.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-xs font-semibold text-gray-900 mb-2",children:["Revenue Accounts to Close (",v.summary?.revenue_accounts_count||0,")"]}),e.jsx("div",{className:"space-y-1",children:v.revenue_accounts.map((C,L)=>e.jsxs("div",{className:"flex justify-between text-xs py-1 px-2 bg-green-50",children:[e.jsxs("span",{className:"text-gray-700",children:[C.code," - ",C.name]}),e.jsx("span",{className:"text-green-600 font-medium",children:P(C.balance)})]},L))})]}),v.expense_accounts&&v.expense_accounts.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-xs font-semibold text-gray-900 mb-2",children:["Expense Accounts to Close (",v.summary?.expense_accounts_count||0,")"]}),e.jsx("div",{className:"space-y-1",children:v.expense_accounts.map((C,L)=>e.jsxs("div",{className:"flex justify-between text-xs py-1 px-2 bg-red-50",children:[e.jsxs("span",{className:"text-gray-700",children:[C.code," - ",C.name]}),e.jsx("span",{className:"text-red-600 font-medium",children:P(C.balance)})]},L))})]}),(!v.revenue_accounts||v.revenue_accounts.length===0)&&(!v.expense_accounts||v.expense_accounts.length===0)&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"No transactions found for this period"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"This period has no activity yet. You can still close it to create opening balances for the next period."})]})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Close Period"}),e.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt,className:"text-xs"})})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("p",{className:"text-xs text-gray-600",children:["Are you sure you want to close the period ",e.jsx("strong",{children:v?.period?.period_name}),"?"]}),e.jsx("p",{className:"text-xs text-gray-600",children:"This action will:"}),e.jsxs("ul",{className:"text-xs text-gray-600 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Close all revenue accounts to Income Summary"}),e.jsx("li",{children:"Close all expense accounts to Income Summary"}),e.jsx("li",{children:"Transfer Net Income to Retained Earnings"}),e.jsx("li",{children:"Lock the period for further transactions"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:D,disabled:u,className:"px-3 py-1.5 bg-red-600 text-white text-xs hover:bg-red-700 disabled:opacity-50",children:u?"Closing...":"Close Period"})]})]})})]})},Sue=()=>{const{token:t}=At(),[a,r]=x.useState([]),[s,n]=x.useState(!1),[i,o]=x.useState(null),[c,u]=x.useState(null),[m,h]=x.useState(!1),[p,y]=x.useState(!1),[g,v]=x.useState(!1),[N,w]=x.useState(!1),[j,T]=x.useState({period_name:"",period_type:"monthly",start_date:"",end_date:""}),[k,R]=x.useState(null),[P,$]=x.useState(null),[A,M]=x.useState(new Date().getFullYear());x.useEffect(()=>{_()},[]);const _=async()=>{try{n(!0);const W=await re.get(`${se}/accounting/periods`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});r(W.data)}catch(W){console.error("Error fetching periods:",W),o("Failed to fetch periods")}finally{n(!1)}},B=async W=>{W.preventDefault();try{n(!0),await re.post(`${se}/accounting/periods`,j,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),u("Period created successfully"),h(!1),T({period_name:"",period_type:"monthly",start_date:"",end_date:""}),_()}catch(X){console.error("Error creating period:",X),o(X.response?.data?.error||"Failed to create period")}finally{n(!1)}},D=async W=>{W.preventDefault();try{n(!0),await re.put(`${se}/accounting/periods/${k.id}`,j,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),u("Period updated successfully"),y(!1),R(null),_()}catch(X){console.error("Error updating period:",X),o(X.response?.data?.error||"Failed to update period")}finally{n(!1)}},C=async()=>{try{n(!0),await re.delete(`${se}/accounting/periods/${P.id}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),u("Period deleted successfully"),v(!1),$(null),_()}catch(W){console.error("Error deleting period:",W),o(W.response?.data?.error||"Failed to delete period")}finally{n(!1)}},L=async()=>{try{n(!0);const W=await re.post(`${se}/accounting/periods/generate-yearly`,{year:A},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});u(W.data.message),w(!1),_()}catch(W){console.error("Error generating periods:",W),o(W.response?.data?.error||"Failed to generate periods")}finally{n(!1)}},H=W=>{R(W),T({period_name:W.period_name,period_type:W.period_type,start_date:W.start_date.split("T")[0],end_date:W.end_date.split("T")[0]}),y(!0)},V=W=>{$(W),v(!0)},Y=W=>new Date(W).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),J=W=>W==="closed"?e.jsxs("span",{className:"px-2 py-0.5 text-xs bg-red-100 text-red-700 border border-red-200",children:[e.jsx(I,{icon:UN,className:"mr-1"}),"Closed"]}):e.jsxs("span",{className:"px-2 py-0.5 text-xs bg-green-100 text-green-700 border border-green-200",children:[e.jsx(I,{icon:FB,className:"mr-1"}),"Open"]});return e.jsxs("div",{className:"p-4 md:p-6 space-y-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Accounting Periods"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Manage accounting periods for financial reporting"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>w(!0),className:"bg-blue-600 text-white px-3 py-1.5 text-xs hover:bg-blue-700 flex items-center space-x-1",children:[e.jsx(I,{icon:Pa}),e.jsx("span",{children:"Generate Year"})]}),e.jsxs("button",{onClick:()=>h(!0),className:"bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 flex items-center space-x-1",children:[e.jsx(I,{icon:Ht}),e.jsx("span",{children:"Add Period"})]})]})]})}),c&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-3 py-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:Hn,className:"mr-2 text-xs"}),e.jsx("span",{className:"text-xs",children:c})]}),e.jsx("button",{onClick:()=>u(null),className:"text-green-700 hover:text-green-900",children:e.jsx(I,{icon:Wt,className:"text-xs"})})]}),i&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:Ma,className:"mr-2 text-xs"}),e.jsx("span",{className:"text-xs",children:i})]}),e.jsx("button",{onClick:()=>o(null),className:"text-red-700 hover:text-red-900",children:e.jsx(I,{icon:Wt,className:"text-xs"})})]}),e.jsx("div",{className:"bg-white border border-gray-200",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Period Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Start Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"End Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s&&a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-xs text-gray-500",children:"Loading periods..."})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-xs text-gray-500",children:'No accounting periods found. Click "Generate Year" to create periods for a year.'})}):a.map(W=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:W.period_name}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900 capitalize",children:W.period_type}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:Y(W.start_date)}),e.jsx("td",{className:"px-4 py-2 text-xs text-gray-900",children:Y(W.end_date)}),e.jsx("td",{className:"px-4 py-2 text-xs",children:J(W.status)}),e.jsx("td",{className:"px-4 py-2 text-xs",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>H(W),className:"text-blue-600 hover:text-blue-800",title:"Edit Period",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>V(W),className:"text-red-600 hover:text-red-800",title:"Delete Period",disabled:W.status==="closed",children:e.jsx(I,{icon:sa})})]})})]},W.id))})]})})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Add Accounting Period"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt,className:"text-xs"})})]}),e.jsxs("form",{onSubmit:B,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Period Name"}),e.jsx("input",{type:"text",value:j.period_name,onChange:W=>T({...j,period_name:W.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",placeholder:"e.g., January 2025",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Period Type"}),e.jsxs("select",{value:j.period_type,onChange:W=>T({...j,period_type:W.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:j.start_date,onChange:W=>T({...j,start_date:W.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:j.end_date,onChange:W=>T({...j,end_date:W.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-3 py-1.5 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s,className:"px-3 py-1.5 bg-gray-900 text-white text-xs hover:bg-gray-800 disabled:opacity-50",children:s?"Creating...":"Create Period"})]})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Edit Accounting Period"}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt,className:"text-xs"})})]}),e.jsxs("form",{onSubmit:D,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Period Name"}),e.jsx("input",{type:"text",value:j.period_name,onChange:W=>T({...j,period_name:W.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Period Type"}),e.jsxs("select",{value:j.period_type,onChange:W=>T({...j,period_type:W.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:j.start_date,onChange:W=>T({...j,start_date:W.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:j.end_date,onChange:W=>T({...j,end_date:W.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-3 py-1.5 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s,className:"px-3 py-1.5 bg-gray-900 text-white text-xs hover:bg-gray-800 disabled:opacity-50",children:s?"Updating...":"Update Period"})]})]})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Delete Period"}),e.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt,className:"text-xs"})})]}),e.jsxs("p",{className:"text-xs text-gray-600 mb-4",children:["Are you sure you want to delete the period ",e.jsx("strong",{children:P?.period_name}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-3 py-1.5 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:C,disabled:s,className:"px-3 py-1.5 bg-red-600 text-white text-xs hover:bg-red-700 disabled:opacity-50",children:s?"Deleting...":"Delete"})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Generate Yearly Periods"}),e.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt,className:"text-xs"})})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"This will create 12 monthly periods for the selected year. Existing periods will not be duplicated."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Year"}),e.jsx("input",{type:"number",value:A,onChange:W=>M(parseInt(W.target.value)),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",min:"2020",max:"2050"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>w(!1),className:"px-3 py-1.5 border border-gray-300 text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:L,disabled:s,className:"px-3 py-1.5 bg-blue-600 text-white text-xs hover:bg-blue-700 disabled:opacity-50",children:s?"Generating...":"Generate Periods"})]})]})})]})},_ue=()=>{const{token:t}=At(),[a,r]=x.useState(new Date().getMonth()+1),[s,n]=x.useState(new Date().getFullYear()),[i,o]=x.useState("monthly"),[c,u]=x.useState(1),[m,h]=x.useState(""),[p,y]=x.useState(""),[g,v]=x.useState(!1),[N,w]=x.useState(null),[j,T]=x.useState(""),[k,R]=x.useState(null),[P,$]=x.useState([]),[A,M]=x.useState(!1),[_,B]=x.useState(!1),[D,C]=x.useState(!1),[L,H]=x.useState(""),[V,Y]=x.useState(""),[J,W]=x.useState(""),[X,te]=x.useState([]),[oe,q]=x.useState(!1),[G,z]=x.useState([]),[Z,Q]=x.useState(null),[fe,he]=x.useState(!1);x.useEffect(()=>{pe()},[]);const ne=t?{Authorization:`Bearer ${t}`}:{},me=()=>{i==="monthly"?ie():i==="quarterly"?ke():i==="ytd"?Ae():i==="custom"&&ae()},pe=async()=>{try{const Oe=await re.get(`${se}/accounting/income-statement/periods`,{headers:ne});$(Oe.data)}catch(Oe){console.error("Error fetching periods:",Oe)}},ie=async()=>{v(!0),w(null),R(null);try{const Oe=await re.get(`${se}/accounting/income-statement/month/${a}/year/${s}`,{headers:ne});R(Oe.data)}catch(Oe){console.error("Error fetching income statement:",Oe),w("Failed to load income statement data"),R(null)}finally{v(!1)}},ke=async()=>{v(!0),w(null),R(null);try{const Oe=await re.get(`${se}/accounting/income-statement/year/${s}/quarter/${c}`,{headers:ne});R(Oe.data)}catch(Oe){console.error("Error fetching quarterly income statement:",Oe),w("Failed to load quarterly income statement data"),R(null)}finally{v(!1)}},Ae=async()=>{v(!0),w(null),R(null);try{const Oe=await re.get(`${se}/accounting/income-statement/year/${s}/ytd`,{headers:ne});R(Oe.data)}catch(Oe){console.error("Error fetching year-to-date income statement:",Oe),w("Failed to load year-to-date income statement data"),R(null)}finally{v(!1)}},ae=async()=>{v(!0),w(null),R(null);try{if(!m||!p)throw new Error("Please select start and end dates");const Oe=new URLSearchParams({start:m,end:p}).toString(),$e=await re.get(`${se}/accounting/income-statement/range?${Oe}`,{headers:ne});R($e.data)}catch(Oe){console.error("Error fetching custom range income statement:",Oe),w(Oe.response?.data?.error||"Failed to load custom range income statement"),R(null)}finally{v(!1)}},Ne=Oe=>Oe?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Oe):"$0.00",ce=async()=>{if(!k){w("Please generate an income statement first");return}M(!0);let Oe="";i==="monthly"?Oe=`Income Statement - ${new Date(s,a-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}`:i==="quarterly"?Oe=`Income Statement - Q${c} ${s}`:i==="ytd"?Oe=`Income Statement - ${s} YTD`:Oe=`Income Statement - ${m} to ${p}`,H(Oe)},De=async()=>{if(!L.trim()){w("Please enter a report name");return}try{v(!0),await re.post(`${se}/accounting/saved-reports`,{report_type:"income_statement",report_name:L,report_description:V,period_start_date:i==="custom"?m:null,period_end_date:i==="custom"?p:null,report_data:k,report_summary:{total_revenue:k.totals?.total_revenue,total_expenses:k.totals?.total_expenses,net_income:k.totals?.net_income},tags:J},{headers:ne}),T("Report saved successfully!"),M(!1),H(""),Y(""),W(""),setTimeout(()=>T(""),3e3)}catch(Oe){console.error("Error saving report:",Oe),w(Oe.response?.data?.error||"Failed to save report")}finally{v(!1)}},ye=async()=>{q(!0),w(null);try{const Oe=await re.get(`${se}/accounting/saved-reports`,{params:{report_type:"income_statement"},headers:ne});te(Oe.data.data.reports),B(!0)}catch(Oe){console.error("Error loading saved reports:",Oe),w(Oe.response?.data?.error||"Failed to load saved reports")}finally{q(!1)}},Ee=async Oe=>{try{v(!0);const ct=(await re.get(`${se}/accounting/saved-reports/${Oe}`,{headers:ne})).data.data;R(ct.report_data),B(!1),he(!1),T(`Loaded: ${ct.report_name}`),setTimeout(()=>T(""),3e3)}catch($e){console.error("Error loading report:",$e),w("Failed to load report")}finally{v(!1)}},Ke=async()=>{q(!0),w(null);try{const Oe=await re.get(`${se}/accounting/saved-reports`,{params:{report_type:"income_statement"},headers:ne});te(Oe.data.data.reports),z([]),C(!0)}catch(Oe){console.error("Error loading saved reports:",Oe),w(Oe.response?.data?.error||"Failed to load saved reports")}finally{q(!1)}},Re=Oe=>{z($e=>$e.includes(Oe)?$e.filter(ct=>ct!==Oe):$e.length>=5?(w("You can only compare up to 5 reports at once"),setTimeout(()=>w(null),3e3),$e):[...$e,Oe])},Le=async()=>{if(G.length<2){w("Please select at least 2 reports to compare");return}try{v(!0),w(null);const Oe=G.map(xt=>re.get(`${se}/accounting/saved-reports/${xt}`,{headers:ne})),ct=(await Promise.all(Oe)).map(xt=>xt.data.data),Nt=new Map,jt=new Map;ct.forEach((xt,we)=>{xt.report_data.revenue.forEach(Ie=>{Nt.has(Ie.account_code)||Nt.set(Ie.account_code,{account_code:Ie.account_code,account_name:Ie.account_name,amounts:[]}),Nt.get(Ie.account_code).amounts[we]=Ie.amount||0}),xt.report_data.expenses.forEach(Ie=>{jt.has(Ie.account_code)||jt.set(Ie.account_code,{account_code:Ie.account_code,account_name:Ie.account_name,amounts:[]}),jt.get(Ie.account_code).amounts[we]=Ie.amount||0})}),Nt.forEach(xt=>{for(let we=0;we<ct.length;we++)xt.amounts[we]||(xt.amounts[we]=0)}),jt.forEach(xt=>{for(let we=0;we<ct.length;we++)xt.amounts[we]||(xt.amounts[we]=0)}),Q({reports:ct.map(xt=>({id:xt.id,name:xt.report_name,date:xt.period_start_date||"N/A",totals:xt.report_data.totals})),revenue:Array.from(Nt.values()),expenses:Array.from(jt.values())}),C(!1),he(!0),T(`Comparing ${ct.length} income statements`),setTimeout(()=>T(""),3e3)}catch(Oe){console.error("Error comparing reports:",Oe),w("Failed to load reports for comparison")}finally{v(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-2 md:px-4 lg:px-6 py-3 md:py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg md:text-xl font-semibold text-gray-900",children:"Income Statement"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Profit & Loss Report"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-wrap gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:ce,disabled:!k,className:"bg-blue-600 text-white px-2 md:px-3 py-1.5 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-1 md:space-x-2 text-xs font-medium justify-center",children:[e.jsx(I,{icon:ns}),e.jsx("span",{children:"Save"})]}),e.jsxs("button",{onClick:ye,disabled:oe,className:"bg-purple-600 text-white px-2 md:px-3 py-1.5 hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-1 md:space-x-2 text-xs font-medium justify-center",children:[e.jsx(I,{icon:iu}),e.jsx("span",{children:"Load"})]}),e.jsxs("button",{onClick:Ke,disabled:oe,className:"bg-orange-600 text-white px-2 md:px-3 py-1.5 hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-1 md:space-x-2 text-xs font-medium justify-center",children:[e.jsx(I,{icon:al}),e.jsx("span",{children:"Compare"})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-2 md:px-4 lg:px-6 py-3",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 md:gap-4 lg:gap-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 md:gap-3 flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Es,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Report Type:"}),e.jsxs("select",{value:i,onChange:Oe=>o(Oe.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"ytd",children:"Year-to-Date"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),i==="monthly"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Pa,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Month:"}),e.jsxs("select",{value:a,onChange:Oe=>r(parseInt(Oe.target.value)),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:1,children:"January"}),e.jsx("option",{value:2,children:"February"}),e.jsx("option",{value:3,children:"March"}),e.jsx("option",{value:4,children:"April"}),e.jsx("option",{value:5,children:"May"}),e.jsx("option",{value:6,children:"June"}),e.jsx("option",{value:7,children:"July"}),e.jsx("option",{value:8,children:"August"}),e.jsx("option",{value:9,children:"September"}),e.jsx("option",{value:10,children:"October"}),e.jsx("option",{value:11,children:"November"}),e.jsx("option",{value:12,children:"December"})]})]}),i==="quarterly"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Pa,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Quarter:"}),e.jsxs("select",{value:c,onChange:Oe=>u(parseInt(Oe.target.value)),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:1,children:"Q1 (Jan - Mar)"}),e.jsx("option",{value:2,children:"Q2 (Apr - Jun)"}),e.jsx("option",{value:3,children:"Q3 (Jul - Sep)"}),e.jsx("option",{value:4,children:"Q4 (Oct - Dec)"})]})]}),i!=="custom"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Pa,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Year:"}),e.jsxs("select",{value:s,onChange:Oe=>n(parseInt(Oe.target.value)),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:2025,children:"2025"}),e.jsx("option",{value:2024,children:"2024"}),e.jsx("option",{value:2023,children:"2023"})]})]}),i==="custom"&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Pa,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Start:"}),e.jsx("input",{type:"date",value:m,onChange:Oe=>h(Oe.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"End:"}),e.jsx("input",{type:"date",value:p,onChange:Oe=>y(Oe.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto"})]})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("button",{onClick:me,disabled:g,className:"bg-gray-900 text-white px-3 md:px-4 py-1.5 hover:bg-gray-800 disabled:opacity-50 flex items-center space-x-2 text-xs font-medium w-full sm:w-auto justify-center",children:[e.jsx(I,{icon:Es}),e.jsx("span",{children:g?"Loading...":"Search"})]})})]})})}),e.jsxs("div",{className:"p-2 md:p-4 lg:p-6",children:[g&&e.jsxs("div",{className:"flex items-center justify-center py-6 md:py-8",children:[e.jsx(I,{icon:fs,className:"text-blue-500 text-xl md:text-2xl animate-spin mr-2"}),e.jsx("span",{className:"text-gray-600 text-xs md:text-sm",children:"Loading income statement..."})]}),N&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 md:p-4 mb-4 md:mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:Ma,className:"text-red-400 mr-2 text-xs"}),e.jsx("span",{className:"text-red-800 text-xs md:text-sm",children:N})]})}),j&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-3 md:p-4 mb-4 md:mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:cr,className:"text-green-400 mr-2 text-xs"}),e.jsx("span",{className:"text-green-800 text-xs md:text-sm",children:j})]})}),fe&&Z&&!g&&e.jsxs("div",{className:"bg-white border border-gray-200 mb-6",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Income Statement Comparison (",Z.reports.length," Reports)"]}),e.jsxs("button",{onClick:()=>he(!1),className:"text-xs px-3 py-1 text-gray-600 hover:text-gray-900 border border-gray-300 hover:bg-gray-50",children:[e.jsx(I,{icon:Wt,className:"mr-1"}),"Close Comparison"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-xs",children:[e.jsx("thead",{className:"bg-gray-50 border-b-2 border-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 border-r border-gray-300 w-24",children:"Code"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 border-r border-gray-300",children:"Account Name"}),Z.reports.map((Oe,$e)=>e.jsxs("th",{className:"px-4 py-3 text-right font-semibold text-gray-700 border-l border-gray-300 bg-gray-100 min-w-[140px]",children:[e.jsx("div",{className:"font-bold text-sm",children:Oe.name}),e.jsx("div",{className:"text-xs font-normal text-gray-600 mt-1",children:Oe.date!=="N/A"?new Date(Oe.date).toLocaleDateString():Oe.date})]},$e))]})}),e.jsxs("tbody",{className:"bg-white",children:[e.jsx("tr",{className:"bg-gray-100",children:e.jsx("td",{colSpan:2+Z.reports.length,className:"px-3 py-2 font-bold text-gray-900 text-sm border-t border-b border-gray-300",children:"Revenue"})}),Z.revenue.map((Oe,$e)=>e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-gray-700 border-r border-gray-200",children:Oe.account_code}),e.jsx("td",{className:"px-3 py-2 text-gray-700 border-r border-gray-200",children:Oe.account_name}),Oe.amounts.map((ct,Nt)=>e.jsx("td",{className:"px-4 py-2 text-right tabular-nums border-l border-gray-200 text-gray-900",children:Ne(ct)},Nt))]},$e)),e.jsxs("tr",{className:"bg-gray-50 font-semibold border-t border-gray-300",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-2.5 text-gray-900 border-r border-gray-300",children:"Total Revenue"}),Z.reports.map((Oe,$e)=>e.jsx("td",{className:"px-4 py-2.5 text-right tabular-nums border-l border-gray-300 text-gray-900",children:Ne(Oe.totals.total_revenue)},$e))]}),e.jsx("tr",{className:"bg-gray-100",children:e.jsx("td",{colSpan:2+Z.reports.length,className:"px-3 py-2 font-bold text-gray-900 text-sm border-t-2 border-b border-gray-300",children:"Expenses"})}),Z.expenses.map((Oe,$e)=>e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-gray-700 border-r border-gray-200",children:Oe.account_code}),e.jsx("td",{className:"px-3 py-2 text-gray-700 border-r border-gray-200",children:Oe.account_name}),Oe.amounts.map((ct,Nt)=>e.jsx("td",{className:"px-4 py-2 text-right tabular-nums border-l border-gray-200 text-red-600",children:Ne(ct)},Nt))]},$e)),e.jsxs("tr",{className:"bg-gray-50 font-semibold border-t border-gray-300",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-2.5 text-gray-900 border-r border-gray-300",children:"Total Expenses"}),Z.reports.map((Oe,$e)=>e.jsx("td",{className:"px-4 py-2.5 text-right tabular-nums border-l border-gray-300 text-red-600",children:Ne(Oe.totals.total_expenses)},$e))]}),e.jsxs("tr",{className:"bg-gray-100 font-bold border-t-2 border-gray-400",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-3 text-gray-900 text-sm border-r border-gray-300",children:"Net Income"}),Z.reports.map((Oe,$e)=>e.jsx("td",{className:`px-4 py-3 text-right tabular-nums text-sm border-l border-gray-300 ${Oe.totals.net_income>=0?"text-gray-900":"text-red-600"}`,children:Ne(Oe.totals.net_income)},$e))]})]})]})})]}),!g&&!N&&k&&!fe&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4 mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-3 md:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-sm md:text-lg font-semibold text-gray-900",children:Ne(k.totals?.total_revenue)})]}),e.jsx("div",{className:"bg-gray-100 p-2",children:e.jsx(I,{icon:gf,className:"text-gray-600 text-xs md:text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-3 md:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Expenses"}),e.jsx("p",{className:"text-sm md:text-lg font-semibold text-red-600",children:Ne(k.totals?.total_expenses)})]}),e.jsx("div",{className:"bg-red-100 p-2",children:e.jsx(I,{icon:bf,className:"text-red-600 text-xs md:text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-3 md:p-4 sm:col-span-2 lg:col-span-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Net Income"}),e.jsx("p",{className:`text-sm md:text-lg font-semibold ${(k.totals?.net_income||0)>=0?"text-gray-900":"text-red-600"}`,children:Ne(k.totals?.net_income)})]}),e.jsx("div",{className:`p-2 ${(k.totals?.net_income||0)>=0?"bg-gray-100":"bg-red-100"}`,children:e.jsx(I,{icon:(k.totals?.net_income||0)>=0?gf:bf,className:`text-xs md:text-sm ${(k.totals?.net_income||0)>=0?"text-gray-600":"text-red-600"}`})})]})})]}),!g&&!N&&k&&!fe&&e.jsxs("div",{className:"bg-white border border-gray-200",children:[e.jsxs("div",{className:"px-3 md:px-6 py-3 border-b border-gray-200",children:[e.jsx("h2",{className:"text-sm md:text-base font-semibold text-gray-900",children:"Income Statement"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[i==="monthly"&&`${new Date(s,a-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}`,i==="quarterly"&&`Q${c} ${s}`,i==="ytd"&&`${s} Year-to-Date`,i==="custom"&&`${m||"Start"} to ${p||"End"}`]})]}),e.jsxs("div",{className:"p-3 md:p-6",children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h3",{className:"text-xs md:text-sm font-semibold text-gray-900 mb-2 md:mb-3",children:"Revenue"}),e.jsx("div",{className:"space-y-0",children:k.revenue&&k.revenue.length>0?e.jsxs(e.Fragment,{children:[k.revenue.map((Oe,$e)=>e.jsxs("div",{className:`flex justify-between items-center py-1.5 px-2 ${$e%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-xs text-gray-700 block truncate",children:Oe.account_name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",Oe.account_code,")"]})]}),e.jsx("div",{className:"text-right flex-shrink-0 ml-2",children:e.jsx("span",{className:`text-xs font-medium ${parseFloat(Oe.amount||0)>0?"text-gray-900":"text-gray-400"}`,children:Ne(Oe.amount)})})]},$e)),e.jsxs("div",{className:"flex justify-between items-center py-2 px-2 border-t border-gray-200 bg-gray-100",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"Total Revenue"}),e.jsx("span",{className:"text-xs font-bold text-gray-900",children:Ne(k.totals?.total_revenue)})]})]}):e.jsx("div",{className:"text-center py-4 text-gray-500 text-xs",children:"No revenue accounts configured"})})]}),e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h3",{className:"text-xs md:text-sm font-semibold text-gray-900 mb-2 md:mb-3",children:"Expenses"}),e.jsx("div",{className:"space-y-0",children:k.expenses&&k.expenses.length>0?e.jsxs(e.Fragment,{children:[k.expenses.map((Oe,$e)=>e.jsxs("div",{className:`flex justify-between items-center py-1.5 px-2 ${$e%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-xs text-gray-700 block truncate",children:Oe.account_name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",Oe.account_code,")"]})]}),e.jsx("div",{className:"text-right flex-shrink-0 ml-2",children:e.jsx("span",{className:`text-xs font-medium ${parseFloat(Oe.amount||0)>0?"text-red-600":"text-gray-400"}`,children:Ne(Oe.amount)})})]},$e)),e.jsxs("div",{className:"flex justify-between items-center py-2 px-2 border-t border-gray-200 bg-gray-100",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"Total Expenses"}),e.jsx("span",{className:"text-xs font-bold text-red-600",children:Ne(k.totals?.total_expenses)})]})]}):e.jsx("div",{className:"text-center py-4 text-gray-500 text-xs",children:"No expense accounts configured"})})]}),e.jsxs("div",{className:"border-t border-gray-300 pt-3 md:pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 md:py-3 px-2 md:px-3 bg-gray-100 border-b border-gray-300",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"Net Income"}),e.jsx("span",{className:`text-xs font-bold ${(k.totals?.net_income||0)>=0?"text-gray-900":"text-red-600"}`,children:Ne(k.totals?.net_income)})]}),e.jsx("div",{className:"border-b-2 border-gray-500"})]})]})]}),!g&&!N&&!k&&!fe&&e.jsxs("div",{className:"bg-white border border-gray-200 p-6 md:p-8 text-center",children:[e.jsx(I,{icon:Qc,className:"text-gray-400 text-3xl md:text-4xl mb-3 md:mb-4"}),e.jsx("h3",{className:"text-base md:text-lg font-medium text-gray-900 mb-2",children:"No Income Statement Data"}),e.jsx("p",{className:"text-gray-500 text-xs md:text-sm",children:"Select a period to view the income statement data."})]})]}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Save Income Statement"}),e.jsx("button",{onClick:()=>M(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Report Name *"}),e.jsx("input",{type:"text",value:L,onChange:Oe=>H(Oe.target.value),placeholder:"e.g., Income Statement - October 2024",className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{value:V,onChange:Oe=>Y(Oe.target.value),placeholder:"Add any notes or description...",rows:3,className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tags (Optional)"}),e.jsx("input",{type:"text",value:J,onChange:Oe=>W(Oe.target.value),placeholder:"e.g., monthly, approved, october",className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate tags with commas"})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>M(!1),className:"flex-1 px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:De,disabled:g||!L.trim(),className:"flex-1 px-4 py-2 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400",children:[e.jsx(I,{icon:ns,className:"mr-1"}),"Save Report"]})]})]})]})}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Load Saved Income Statement"}),e.jsx("button",{onClick:()=>B(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt})})]}),X.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:iu,className:"text-4xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No saved income statements found"})]}):e.jsx("div",{className:"space-y-2",children:X.map(Oe=>e.jsx("div",{className:"border border-gray-200 p-3 hover:bg-gray-50 cursor-pointer",onClick:()=>Ee(Oe.id),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:Oe.report_name}),Oe.report_description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:Oe.report_description}),e.jsxs("div",{className:"flex gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Saved: ",new Date(Oe.saved_at).toLocaleDateString()]}),Oe.report_summary&&e.jsxs("span",{className:Oe.report_summary.net_income>=0?"text-green-600":"text-red-600",children:["Net Income: ",Ne(Oe.report_summary.net_income)]})]}),Oe.tags&&e.jsx("div",{className:"mt-2",children:Oe.tags.split(",").map(($e,ct)=>e.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 text-xs px-2 py-0.5 mr-1",children:$e.trim()},ct))})]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-xs font-medium ml-4",children:"Load "})]})},Oe.id))}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>B(!1),className:"w-full px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Close"})})]})}),D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Compare Income Statements"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Select 2-5 reports to compare (",G.length," selected)"]})]}),e.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt})})]}),X.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:al,className:"text-4xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No saved income statements found"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto mb-4",children:X.map(Oe=>e.jsx("div",{className:`border p-3 cursor-pointer transition-all ${G.includes(Oe.id)?"border-orange-500 bg-orange-50":"border-gray-200 hover:bg-gray-50"}`,onClick:()=>Re(Oe.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"checkbox",checked:G.includes(Oe.id),onChange:()=>{},className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:Oe.report_name}),Oe.report_description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:Oe.report_description}),e.jsxs("div",{className:"flex gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Saved: ",new Date(Oe.saved_at).toLocaleDateString()]}),Oe.report_summary&&e.jsxs("span",{className:Oe.report_summary.net_income>=0?"text-green-600":"text-red-600",children:["Net Income: ",Ne(Oe.report_summary.net_income)]})]})]})]})},Oe.id))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>C(!1),className:"flex-1 px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:Le,disabled:G.length<2,className:"flex-1 px-4 py-2 text-xs font-medium text-white bg-orange-600 hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(I,{icon:al,className:"mr-1"}),"Compare ",G.length," Reports"]})]})]})]})})]})},Cue=()=>{const{token:t}=At(),[a,r]=x.useState("monthly"),[s,n]=x.useState(new Date().getMonth()+1),[i,o]=x.useState(new Date().getFullYear()),[c,u]=x.useState(""),[m,h]=x.useState(!1),[p,y]=x.useState(null),[g,v]=x.useState(""),[N,w]=x.useState(null),[j,T]=x.useState(!1),[k,R]=x.useState(!1),[P,$]=x.useState(!1),[A,M]=x.useState(""),[_,B]=x.useState(""),[D,C]=x.useState(""),[L,H]=x.useState([]),[V,Y]=x.useState(!1),[J,W]=x.useState([]),[X,te]=x.useState(null),[oe,q]=x.useState(!1),G=t?{Authorization:`Bearer ${t}`}:{},z=ae=>{if(ae==null)return"$0.00";const Ne=Math.abs(ae),ce=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Ne);return ae<0?`(${ce})`:ce},Z=async()=>{try{if(h(!0),y(null),w(null),a==="monthly"){const ae=await re.get(`${se}/accounting/balance-sheet/month/${s}/year/${i}`,{headers:G});w(ae.data)}else if(a==="custom"){if(!c){y("Please select an as-of end date"),h(!1);return}const ae=new URLSearchParams({end:c}).toString(),Ne=await re.get(`${se}/accounting/balance-sheet/range?${ae}`,{headers:G});w(Ne.data)}}catch(ae){console.error("Error loading balance sheet:",ae),y(ae.response?.data?.error||"Failed to load balance sheet")}finally{h(!1)}},Q=N?.totals||{total_assets:0,total_liabilities:0,total_equity:0},fe=(Q.total_liabilities||0)+(Q.total_equity||0),he=async()=>{if(!N){y("Please generate a balance sheet first");return}T(!0);let ae="";a==="monthly"?ae=`Balance Sheet - ${new Date(i,s-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}`:ae=`Balance Sheet - As of ${c}`,M(ae)},ne=async()=>{if(!A.trim()){y("Please enter a report name");return}try{h(!0),await re.post(`${se}/accounting/saved-reports`,{report_type:"balance_sheet",report_name:A,report_description:_,period_start_date:a==="custom"?c:null,period_end_date:a==="custom"?c:null,report_data:N,report_summary:{total_assets:Q.total_assets,total_liabilities:Q.total_liabilities,total_equity:Q.total_equity,is_balanced:Math.abs((Q.total_assets||0)-fe)<.01},tags:D},{headers:G}),v("Report saved successfully!"),T(!1),M(""),B(""),C(""),setTimeout(()=>v(""),3e3)}catch(ae){console.error("Error saving report:",ae),y(ae.response?.data?.error||"Failed to save report")}finally{h(!1)}},me=async()=>{Y(!0),y(null);try{const ae=await re.get(`${se}/accounting/saved-reports`,{params:{report_type:"balance_sheet"},headers:G});H(ae.data.data.reports),R(!0)}catch(ae){console.error("Error loading saved reports:",ae),y(ae.response?.data?.error||"Failed to load saved reports")}finally{Y(!1)}},pe=async ae=>{try{h(!0);const ce=(await re.get(`${se}/accounting/saved-reports/${ae}`,{headers:G})).data.data;w(ce.report_data),R(!1),q(!1),v(`Loaded: ${ce.report_name}`),setTimeout(()=>v(""),3e3)}catch(Ne){console.error("Error loading report:",Ne),y("Failed to load report")}finally{h(!1)}},ie=async()=>{Y(!0),y(null);try{const ae=await re.get(`${se}/accounting/saved-reports`,{params:{report_type:"balance_sheet"},headers:G});H(ae.data.data.reports),W([]),$(!0)}catch(ae){console.error("Error loading saved reports:",ae),y(ae.response?.data?.error||"Failed to load saved reports")}finally{Y(!1)}},ke=ae=>{W(Ne=>Ne.includes(ae)?Ne.filter(ce=>ce!==ae):Ne.length>=5?(y("You can only compare up to 5 reports at once"),setTimeout(()=>y(null),3e3),Ne):[...Ne,ae])},Ae=async()=>{if(J.length<2){y("Please select at least 2 reports to compare");return}try{h(!0),y(null);const ae=J.map(Ke=>re.get(`${se}/accounting/saved-reports/${Ke}`,{headers:G})),ce=(await Promise.all(ae)).map(Ke=>Ke.data.data),De=new Map,ye=new Map,Ee=new Map;ce.forEach((Ke,Re)=>{["current_assets","fixed_assets","other_assets"].forEach(Le=>{Ke.report_data[Le]&&Ke.report_data[Le].forEach(Oe=>{De.has(Oe.account_code)||De.set(Oe.account_code,{account_code:Oe.account_code,account_name:Oe.account_name,category:Le,amounts:[]}),De.get(Oe.account_code).amounts[Re]=Oe.balance||0})}),["current_liabilities","long_term_liabilities"].forEach(Le=>{Ke.report_data[Le]&&Ke.report_data[Le].forEach(Oe=>{ye.has(Oe.account_code)||ye.set(Oe.account_code,{account_code:Oe.account_code,account_name:Oe.account_name,category:Le,amounts:[]}),ye.get(Oe.account_code).amounts[Re]=Oe.balance||0})}),Ke.report_data.equity&&Ke.report_data.equity.forEach(Le=>{Ee.has(Le.account_code)||Ee.set(Le.account_code,{account_code:Le.account_code,account_name:Le.account_name,amounts:[]}),Ee.get(Le.account_code).amounts[Re]=Le.balance||0})}),[De,ye,Ee].forEach(Ke=>{Ke.forEach(Re=>{for(let Le=0;Le<ce.length;Le++)Re.amounts[Le]||(Re.amounts[Le]=0)})}),te({reports:ce.map(Ke=>({id:Ke.id,name:Ke.report_name,date:Ke.period_start_date||"N/A",totals:Ke.report_data.totals})),assets:Array.from(De.values()),liabilities:Array.from(ye.values()),equity:Array.from(Ee.values())}),$(!1),q(!0),v(`Comparing ${ce.length} balance sheets`),setTimeout(()=>v(""),3e3)}catch(ae){console.error("Error comparing reports:",ae),y("Failed to load reports for comparison")}finally{h(!1)}};return e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Balance Sheet"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Financial Position Report"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-wrap gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:he,disabled:!N,className:"bg-blue-600 text-white px-3 py-1.5 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-1 text-xs font-medium justify-center",children:[e.jsx(I,{icon:ns}),e.jsx("span",{children:"Save"})]}),e.jsxs("button",{onClick:me,disabled:V,className:"bg-purple-600 text-white px-3 py-1.5 hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-1 text-xs font-medium justify-center",children:[e.jsx(I,{icon:iu}),e.jsx("span",{children:"Load"})]}),e.jsxs("button",{onClick:ie,disabled:V,className:"bg-orange-600 text-white px-3 py-1.5 hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-1 text-xs font-medium justify-center",children:[e.jsx(I,{icon:al}),e.jsx("span",{children:"Compare"})]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 mb-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 items-start lg:items-end",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1 w-full",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[e.jsx(I,{icon:Es,className:"mr-1"}),"Report Type"]}),e.jsxs("select",{value:a,onChange:ae=>r(ae.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"custom",children:"Custom (As of Date)"})]})]}),a==="monthly"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[e.jsx(I,{icon:Pa,className:"mr-1"}),"Month"]}),e.jsxs("select",{value:s,onChange:ae=>n(parseInt(ae.target.value)),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",children:[e.jsx("option",{value:1,children:"January"}),e.jsx("option",{value:2,children:"February"}),e.jsx("option",{value:3,children:"March"}),e.jsx("option",{value:4,children:"April"}),e.jsx("option",{value:5,children:"May"}),e.jsx("option",{value:6,children:"June"}),e.jsx("option",{value:7,children:"July"}),e.jsx("option",{value:8,children:"August"}),e.jsx("option",{value:9,children:"September"}),e.jsx("option",{value:10,children:"October"}),e.jsx("option",{value:11,children:"November"}),e.jsx("option",{value:12,children:"December"})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[e.jsx(I,{icon:Pa,className:"mr-1"}),"Year"]}),e.jsxs("select",{value:i,onChange:ae=>o(parseInt(ae.target.value)),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900",children:[e.jsx("option",{value:2025,children:"2025"}),e.jsx("option",{value:2024,children:"2024"}),e.jsx("option",{value:2023,children:"2023"})]})]})]}),a==="custom"&&e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[e.jsx(I,{icon:Pa,className:"mr-1"}),"As of Date"]}),e.jsx("input",{type:"date",value:c,onChange:ae=>u(ae.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-900"})]})]}),e.jsx("div",{children:e.jsxs("button",{onClick:Z,disabled:m,className:"w-full sm:w-auto bg-gray-900 text-white px-4 py-1.5 hover:bg-gray-800 disabled:opacity-50 text-xs font-medium",children:[e.jsx(I,{icon:Es,className:"mr-1"}),m?"Loading...":"Generate Report"]})})]})}),p&&e.jsxs("div",{className:"bg-red-50 border border-red-200 p-3 mb-4 text-xs text-red-700",children:[e.jsx(I,{icon:Ma,className:"mr-2"}),p]}),g&&e.jsxs("div",{className:"bg-green-50 border border-green-200 p-3 mb-4 text-xs text-green-700",children:[e.jsx(I,{icon:cr,className:"mr-2"}),g]}),m&&e.jsxs("div",{className:"text-center py-8 text-gray-600 text-xs",children:[e.jsx(I,{icon:fs,spin:!0,className:"mr-2"}),"Loading balance sheet..."]}),oe&&X&&!m&&e.jsxs("div",{className:"bg-white border border-gray-200 mb-6",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Balance Sheet Comparison (",X.reports.length," Reports)"]}),e.jsxs("button",{onClick:()=>q(!1),className:"text-xs px-3 py-1 text-gray-600 hover:text-gray-900 border border-gray-300 hover:bg-gray-50",children:[e.jsx(I,{icon:Wt,className:"mr-1"}),"Close Comparison"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-xs",children:[e.jsx("thead",{className:"bg-gray-50 border-b-2 border-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 border-r border-gray-300 w-24",children:"Code"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 border-r border-gray-300",children:"Account Name"}),X.reports.map((ae,Ne)=>e.jsxs("th",{className:"px-4 py-3 text-right font-semibold text-gray-700 border-l border-gray-300 bg-gray-100 min-w-[140px]",children:[e.jsx("div",{className:"font-bold text-sm",children:ae.name}),e.jsx("div",{className:"text-xs font-normal text-gray-600 mt-1",children:ae.date!=="N/A"?new Date(ae.date).toLocaleDateString():ae.date})]},Ne))]})}),e.jsxs("tbody",{className:"bg-white",children:[e.jsx("tr",{className:"bg-gray-100",children:e.jsx("td",{colSpan:2+X.reports.length,className:"px-3 py-2 font-bold text-gray-900 text-sm border-t border-b border-gray-300",children:"ASSETS"})}),X.assets.map((ae,Ne)=>e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-gray-700 border-r border-gray-200",children:ae.account_code}),e.jsx("td",{className:"px-3 py-2 text-gray-700 border-r border-gray-200",children:ae.account_name}),ae.amounts.map((ce,De)=>e.jsx("td",{className:"px-4 py-2 text-right tabular-nums border-l border-gray-200 text-gray-900",children:z(ce)},De))]},Ne)),e.jsxs("tr",{className:"bg-gray-50 font-semibold border-t border-gray-300",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-2.5 text-gray-900 border-r border-gray-300",children:"Total Assets"}),X.reports.map((ae,Ne)=>e.jsx("td",{className:"px-4 py-2.5 text-right tabular-nums border-l border-gray-300 text-gray-900",children:z(ae.totals.total_assets)},Ne))]}),e.jsx("tr",{className:"bg-gray-100",children:e.jsx("td",{colSpan:2+X.reports.length,className:"px-3 py-2 font-bold text-gray-900 text-sm border-t-2 border-b border-gray-300",children:"LIABILITIES"})}),X.liabilities.map((ae,Ne)=>e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-gray-700 border-r border-gray-200",children:ae.account_code}),e.jsx("td",{className:"px-3 py-2 text-gray-700 border-r border-gray-200",children:ae.account_name}),ae.amounts.map((ce,De)=>e.jsx("td",{className:"px-4 py-2 text-right tabular-nums border-l border-gray-200 text-gray-900",children:z(ce)},De))]},Ne)),e.jsxs("tr",{className:"bg-gray-50 font-semibold border-t border-gray-300",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-2.5 text-gray-900 border-r border-gray-300",children:"Total Liabilities"}),X.reports.map((ae,Ne)=>e.jsx("td",{className:"px-4 py-2.5 text-right tabular-nums border-l border-gray-300 text-gray-900",children:z(ae.totals.total_liabilities)},Ne))]}),e.jsx("tr",{className:"bg-gray-100",children:e.jsx("td",{colSpan:2+X.reports.length,className:"px-3 py-2 font-bold text-gray-900 text-sm border-t-2 border-b border-gray-300",children:"EQUITY"})}),X.equity.map((ae,Ne)=>e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-gray-700 border-r border-gray-200",children:ae.account_code}),e.jsx("td",{className:"px-3 py-2 text-gray-700 border-r border-gray-200",children:ae.account_name}),ae.amounts.map((ce,De)=>e.jsx("td",{className:"px-4 py-2 text-right tabular-nums border-l border-gray-200 text-gray-900",children:z(ce)},De))]},Ne)),e.jsxs("tr",{className:"bg-gray-50 font-semibold border-t border-gray-300",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-2.5 text-gray-900 border-r border-gray-300",children:"Total Equity"}),X.reports.map((ae,Ne)=>e.jsx("td",{className:"px-4 py-2.5 text-right tabular-nums border-l border-gray-300 text-gray-900",children:z(ae.totals.total_equity)},Ne))]}),e.jsxs("tr",{className:"bg-gray-100 font-bold border-t-2 border-gray-400",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-3 text-gray-900 text-sm border-r border-gray-300",children:"Total Liabilities & Equity"}),X.reports.map((ae,Ne)=>e.jsx("td",{className:"px-4 py-3 text-right tabular-nums text-sm border-l border-gray-300 text-gray-900",children:z((ae.totals.total_liabilities||0)+(ae.totals.total_equity||0))},Ne))]})]})]})})]}),!m&&!N&&!p&&!oe&&e.jsxs("div",{className:"bg-white border border-gray-200 p-8 text-center",children:[e.jsx(I,{icon:al,className:"text-gray-400 text-4xl mb-3"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"No Balance Sheet Data"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Choose filters and click Generate Report."})]}),!m&&!p&&N&&!oe&&e.jsxs("div",{className:"bg-white border border-gray-200 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center py-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:"BALANCE SHEET"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:N.period?.period_name?`${N.period.period_name} (As of ${N.period.end_date})`:N.as_of_date?`As of ${N.as_of_date}`:""}),N.period&&e.jsx("div",{className:"mt-2",children:N.period.is_closed?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-gray-600 text-white",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Period Closed"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-300",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),"Period Open"]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-gray-100 px-3 py-1.5 mb-2",children:e.jsx("h3",{className:"text-xs font-bold text-gray-900",children:"ASSETS"})}),N.current_assets&&N.current_assets.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Current Assets"}),N.current_assets.map((ae,Ne)=>e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 hover:bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600",children:ae.account_name}),e.jsx("span",{className:"text-xs text-gray-900",children:z(ae.balance)})]},Ne)),e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 border-t border-gray-300 mt-1",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:"Total Current Assets"}),e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:z(Q.total_current_assets||0)})]})]}),N.fixed_assets&&N.fixed_assets.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Fixed Assets"}),N.fixed_assets.map((ae,Ne)=>e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 hover:bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600",children:ae.account_name}),e.jsx("span",{className:"text-xs text-gray-900",children:z(ae.balance)})]},Ne)),e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 border-t border-gray-300 mt-1",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:"Total Fixed Assets"}),e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:z(Q.total_fixed_assets||0)})]})]}),N.other_assets&&N.other_assets.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Other Assets"}),N.other_assets.map((ae,Ne)=>e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 hover:bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600",children:ae.account_name}),e.jsx("span",{className:"text-xs text-gray-900",children:z(ae.balance)})]},Ne)),e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 border-t border-gray-300 mt-1",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:"Total Other Assets"}),e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:z(Q.total_other_assets||0)})]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-200 border-y border-gray-300",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"TOTAL ASSETS"}),e.jsx("span",{className:"text-xs font-bold text-gray-900",children:z(Q.total_assets)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-gray-100 px-3 py-1.5 mb-2",children:e.jsx("h3",{className:"text-xs font-bold text-gray-900",children:"LIABILITIES"})}),N.current_liabilities&&N.current_liabilities.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Current Liabilities"}),N.current_liabilities.map((ae,Ne)=>e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 hover:bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600",children:ae.account_name}),e.jsx("span",{className:"text-xs text-gray-900",children:z(ae.balance)})]},Ne)),e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 border-t border-gray-300 mt-1",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:"Total Current Liabilities"}),e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:z(Q.total_current_liabilities||0)})]})]}),N.long_term_liabilities&&N.long_term_liabilities.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Long-term Liabilities"}),N.long_term_liabilities.map((ae,Ne)=>e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 hover:bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600",children:ae.account_name}),e.jsx("span",{className:"text-xs text-gray-900",children:z(ae.balance)})]},Ne)),e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 border-t border-gray-300 mt-1",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:"Total Long-term Liabilities"}),e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:z(Q.total_long_term_liabilities||0)})]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-200 border-y border-gray-300",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"TOTAL LIABILITIES"}),e.jsx("span",{className:"text-xs font-bold text-gray-900",children:z(Q.total_liabilities)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-gray-100 px-3 py-1.5 mb-2",children:e.jsx("h3",{className:"text-xs font-bold text-gray-900",children:"EQUITY"})}),(N.equity||[]).map((ae,Ne)=>e.jsxs("div",{className:"flex justify-between items-center py-1 px-3 hover:bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-600",children:ae.account_name}),e.jsx("span",{className:"text-xs text-gray-900",children:z(ae.balance)})]},Ne)),e.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-200 border-y border-gray-300 mt-2",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"TOTAL EQUITY"}),e.jsx("span",{className:"text-xs font-bold text-gray-900",children:z(Q.total_equity)})]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-300 border-y-2 border-gray-400",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"TOTAL LIABILITIES & EQUITY"}),e.jsx("span",{className:"text-xs font-bold text-gray-900",children:z(fe)})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:Math.abs(Q.total_assets-fe)<.01?e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-600",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-xs font-medium",children:"Balance Sheet is Balanced"})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-red-600",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("span",{className:"text-xs font-medium",children:["Out of Balance: ",z(Math.abs(Q.total_assets-fe))," difference"]})]})})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Save Balance Sheet"}),e.jsx("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Report Name *"}),e.jsx("input",{type:"text",value:A,onChange:ae=>M(ae.target.value),placeholder:"e.g., Balance Sheet - October 2024",className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{value:_,onChange:ae=>B(ae.target.value),placeholder:"Add any notes or description...",rows:3,className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tags (Optional)"}),e.jsx("input",{type:"text",value:D,onChange:ae=>C(ae.target.value),placeholder:"e.g., monthly, approved, october",className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate tags with commas"})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>T(!1),className:"flex-1 px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:ne,disabled:m||!A.trim(),className:"flex-1 px-4 py-2 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400",children:[e.jsx(I,{icon:ns,className:"mr-1"}),"Save Report"]})]})]})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Load Saved Balance Sheet"}),e.jsx("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt})})]}),L.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:iu,className:"text-4xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No saved balance sheets found"})]}):e.jsx("div",{className:"space-y-2",children:L.map(ae=>e.jsx("div",{className:"border border-gray-200 p-3 hover:bg-gray-50 cursor-pointer",onClick:()=>pe(ae.id),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:ae.report_name}),ae.report_description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:ae.report_description}),e.jsxs("div",{className:"flex gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Saved: ",new Date(ae.saved_at).toLocaleDateString()]}),ae.report_summary&&e.jsx("span",{className:ae.report_summary.is_balanced?"text-green-600":"text-red-600",children:ae.report_summary.is_balanced?" Balanced":" Out of Balance"})]}),ae.tags&&e.jsx("div",{className:"mt-2",children:ae.tags.split(",").map((Ne,ce)=>e.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 text-xs px-2 py-0.5 mr-1",children:Ne.trim()},ce))})]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-xs font-medium ml-4",children:"Load "})]})},ae.id))}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>R(!1),className:"w-full px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Close"})})]})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Compare Balance Sheets"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Select 2-5 reports to compare (",J.length," selected)"]})]}),e.jsx("button",{onClick:()=>$(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt})})]}),L.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:al,className:"text-4xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No saved balance sheets found"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto mb-4",children:L.map(ae=>e.jsx("div",{className:`border p-3 cursor-pointer transition-all ${J.includes(ae.id)?"border-orange-500 bg-orange-50":"border-gray-200 hover:bg-gray-50"}`,onClick:()=>ke(ae.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"checkbox",checked:J.includes(ae.id),onChange:()=>{},className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:ae.report_name}),ae.report_description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:ae.report_description}),e.jsxs("div",{className:"flex gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Saved: ",new Date(ae.saved_at).toLocaleDateString()]}),ae.report_summary&&e.jsx("span",{className:ae.report_summary.is_balanced?"text-green-600":"text-red-600",children:ae.report_summary.is_balanced?" Balanced":" Out of Balance"})]})]})]})},ae.id))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>$(!1),className:"flex-1 px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:Ae,disabled:J.length<2,className:"flex-1 px-4 py-2 text-xs font-medium text-white bg-orange-600 hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(I,{icon:al,className:"mr-1"}),"Compare ",J.length," Reports"]})]})]})]})})]})},kue=()=>{const{token:t}=At(),[a,r]=x.useState("comparison"),[s,n]=x.useState("monthly"),[i,o]=x.useState(new Date().getMonth()+1),[c,u]=x.useState(new Date().getFullYear()),[m,h]=x.useState(""),[p,y]=x.useState(""),[g,v]=x.useState(1),[N,w]=x.useState(new Date().getFullYear()),[j,T]=x.useState(new Date().getMonth()+1),[k,R]=x.useState(new Date().getFullYear()),[P,$]=x.useState(!1),[A,M]=x.useState(null),[_,B]=x.useState(""),[D,C]=x.useState(null),[L,H]=x.useState(null),[V,Y]=x.useState(!1),[J,W]=x.useState(!1),[X,te]=x.useState(!1),[oe,q]=x.useState(!1),[G,z]=x.useState(""),[Z,Q]=x.useState(""),[fe,he]=x.useState(""),[ne,me]=x.useState([]),[pe,ie]=x.useState(!1),[ke,Ae]=x.useState([]),[ae,Ne]=x.useState(null),[ce,De]=x.useState(!1),ye=t?{Authorization:`Bearer ${t}`}:{},Ee=we=>we==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(we),Ke=async()=>{try{if($(!0),M(null),C(null),H(null),a==="comparison"){const we=new URLSearchParams({startMonth:g.toString(),startYear:N.toString(),endMonth:j.toString(),endYear:k.toString()}).toString(),Ie=await re.get(`${se}/accounting/cash-flow/multi-month?${we}`,{headers:ye});H(Ie.data)}else if(s==="monthly"){const we=await re.get(`${se}/accounting/cash-flow/month/${i}/year/${c}`,{headers:ye});C(we.data)}else if(s==="custom"){if(!m||!p){M("Please select both start and end dates"),$(!1);return}const we=new URLSearchParams({start:m,end:p}).toString(),Ie=await re.get(`${se}/accounting/cash-flow/range?${we}`,{headers:ye});C(Ie.data)}}catch(we){console.error("Error loading cash flow:",we),M(we.response?.data?.error||"Failed to load cash flow statement")}finally{$(!1)}},Re=D?.totals||{total_inflows:0,total_outflows:0,net_cash_flow:0,beginning_cash:0,ending_cash:0},Le=async()=>{if(!D){M("Please generate a cash flow statement first");return}W(!0);let we="";s==="monthly"?we=`Cash Flow - ${new Date(c,i-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})}`:we=`Cash Flow - ${m} to ${p}`,z(we)},Oe=async()=>{if(!G.trim()){M("Please enter a report name");return}try{$(!0),await re.post(`${se}/accounting/saved-reports`,{report_type:"cash_flow_statement",report_name:G,report_description:Z,period_start_date:s==="custom"?m:null,period_end_date:s==="custom"?p:null,report_data:D,report_summary:{total_inflows:Re.total_inflows,total_outflows:Re.total_outflows,net_cash_flow:Re.net_cash_flow,beginning_cash:Re.beginning_cash,ending_cash:Re.ending_cash},tags:fe},{headers:ye}),B("Report saved successfully!"),W(!1),z(""),Q(""),he(""),setTimeout(()=>B(""),3e3)}catch(we){console.error("Error saving report:",we),M(we.response?.data?.error||"Failed to save report")}finally{$(!1)}},$e=async()=>{ie(!0),M(null);try{const we=await re.get(`${se}/accounting/saved-reports`,{params:{report_type:"cash_flow_statement"},headers:ye});me(we.data.data.reports),te(!0)}catch(we){console.error("Error loading saved reports:",we),M(we.response?.data?.error||"Failed to load saved reports")}finally{ie(!1)}},ct=async we=>{try{$(!0);const dt=(await re.get(`${se}/accounting/saved-reports/${we}`,{headers:ye})).data.data;C(dt.report_data),te(!1),De(!1),B(`Loaded: ${dt.report_name}`),setTimeout(()=>B(""),3e3)}catch(Ie){console.error("Error loading report:",Ie),M("Failed to load report")}finally{$(!1)}},Nt=async()=>{ie(!0),M(null);try{const we=await re.get(`${se}/accounting/saved-reports`,{params:{report_type:"cash_flow_statement"},headers:ye});me(we.data.data.reports),Ae([]),q(!0)}catch(we){console.error("Error loading saved reports:",we),M(we.response?.data?.error||"Failed to load saved reports")}finally{ie(!1)}},jt=we=>{Ae(Ie=>Ie.includes(we)?Ie.filter(dt=>dt!==we):Ie.length>=5?(M("You can only compare up to 5 reports at once"),setTimeout(()=>M(null),3e3),Ie):[...Ie,we])},xt=async()=>{if(ke.length<2){M("Please select at least 2 reports to compare");return}try{$(!0),M(null);const we=ke.map(Ve=>re.get(`${se}/accounting/saved-reports/${Ve}`,{headers:ye})),dt=(await Promise.all(we)).map(Ve=>Ve.data.data),ut=new Map,Te=new Map;dt.forEach((Ve,qe)=>{Ve.report_data.cash_inflows&&Ve.report_data.cash_inflows.forEach(Xe=>{ut.has(Xe.account_code)||ut.set(Xe.account_code,{account_code:Xe.account_code,account_name:Xe.account_name,amounts:[]}),ut.get(Xe.account_code).amounts[qe]=Xe.amount||0}),Ve.report_data.cash_outflows&&Ve.report_data.cash_outflows.forEach(Xe=>{Te.has(Xe.account_code)||Te.set(Xe.account_code,{account_code:Xe.account_code,account_name:Xe.account_name,amounts:[]}),Te.get(Xe.account_code).amounts[qe]=Xe.amount||0})}),[ut,Te].forEach(Ve=>{Ve.forEach(qe=>{for(let Xe=0;Xe<dt.length;Xe++)qe.amounts[Xe]||(qe.amounts[Xe]=0)})}),Ne({reports:dt.map(Ve=>({id:Ve.id,name:Ve.report_name,period:Ve.period_start_date&&Ve.period_end_date?`${Ve.period_start_date} to ${Ve.period_end_date}`:"N/A",totals:Ve.report_data.totals})),inflows:Array.from(ut.values()),outflows:Array.from(Te.values())}),q(!1),De(!0),B(`Comparing ${dt.length} cash flow statements`),setTimeout(()=>B(""),3e3)}catch(we){console.error("Error comparing reports:",we),M("Failed to load reports for comparison")}finally{$(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("style",{children:`
          @media print {
            body * {
              visibility: hidden;
            }
            .printable-area, .printable-area * {
              visibility: visible;
            }
            .printable-area {
              position: absolute;
              left: 0;
              top: 0;
              width: 100%;
            }
            .no-print {
              display: none !important;
            }
            .bg-gray-50 {
              background-color: white !important;
            }
          }
        `}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-2 md:px-4 lg:px-6 py-3 md:py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-base md:text-lg font-semibold text-gray-900",children:"Cash Flow Statement"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Cash In & Cash Out Report"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-wrap gap-2 w-full sm:w-auto no-print",children:[e.jsxs("button",{onClick:Le,disabled:!D,className:"bg-blue-600 text-white px-2 md:px-3 py-1.5 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-1 md:space-x-2 text-xs font-medium justify-center",children:[e.jsx(I,{icon:ns}),e.jsx("span",{children:"Save"})]}),e.jsxs("button",{onClick:$e,disabled:pe,className:"bg-purple-600 text-white px-2 md:px-3 py-1.5 hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-1 md:space-x-2 text-xs font-medium justify-center",children:[e.jsx(I,{icon:iu}),e.jsx("span",{children:"Load"})]}),e.jsxs("button",{onClick:Nt,disabled:pe,className:"bg-orange-600 text-white px-2 md:px-3 py-1.5 hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-1 md:space-x-2 text-xs font-medium justify-center",children:[e.jsx(I,{icon:Bl}),e.jsx("span",{children:"Compare"})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200 no-print",children:e.jsx("div",{className:"px-2 md:px-4 lg:px-6 py-3",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 md:gap-4 lg:gap-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 md:gap-3 flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Es,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"View:"}),e.jsxs("select",{value:a,onChange:we=>r(we.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:"comparison",children:"Monthly Comparison"}),e.jsx("option",{value:"single",children:"Single Period"})]})]}),a==="comparison"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"From:"}),e.jsxs("select",{value:g,onChange:we=>v(parseInt(we.target.value)),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:1,children:"January"}),e.jsx("option",{value:2,children:"February"}),e.jsx("option",{value:3,children:"March"}),e.jsx("option",{value:4,children:"April"}),e.jsx("option",{value:5,children:"May"}),e.jsx("option",{value:6,children:"June"}),e.jsx("option",{value:7,children:"July"}),e.jsx("option",{value:8,children:"August"}),e.jsx("option",{value:9,children:"September"}),e.jsx("option",{value:10,children:"October"}),e.jsx("option",{value:11,children:"November"}),e.jsx("option",{value:12,children:"December"})]}),e.jsxs("select",{value:N,onChange:we=>w(parseInt(we.target.value)),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:2025,children:"2025"}),e.jsx("option",{value:2024,children:"2024"}),e.jsx("option",{value:2023,children:"2023"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"To:"}),e.jsxs("select",{value:j,onChange:we=>T(parseInt(we.target.value)),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:1,children:"January"}),e.jsx("option",{value:2,children:"February"}),e.jsx("option",{value:3,children:"March"}),e.jsx("option",{value:4,children:"April"}),e.jsx("option",{value:5,children:"May"}),e.jsx("option",{value:6,children:"June"}),e.jsx("option",{value:7,children:"July"}),e.jsx("option",{value:8,children:"August"}),e.jsx("option",{value:9,children:"September"}),e.jsx("option",{value:10,children:"October"}),e.jsx("option",{value:11,children:"November"}),e.jsx("option",{value:12,children:"December"})]}),e.jsxs("select",{value:k,onChange:we=>R(parseInt(we.target.value)),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:2025,children:"2025"}),e.jsx("option",{value:2024,children:"2024"}),e.jsx("option",{value:2023,children:"2023"})]})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Es,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Report Type:"}),e.jsxs("select",{value:s,onChange:we=>n(we.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"custom",children:"Custom Range"})]})]})}),a==="single"&&s==="monthly"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Pa,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Month:"}),e.jsxs("select",{value:i,onChange:we=>o(parseInt(we.target.value)),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:1,children:"January"}),e.jsx("option",{value:2,children:"February"}),e.jsx("option",{value:3,children:"March"}),e.jsx("option",{value:4,children:"April"}),e.jsx("option",{value:5,children:"May"}),e.jsx("option",{value:6,children:"June"}),e.jsx("option",{value:7,children:"July"}),e.jsx("option",{value:8,children:"August"}),e.jsx("option",{value:9,children:"September"}),e.jsx("option",{value:10,children:"October"}),e.jsx("option",{value:11,children:"November"}),e.jsx("option",{value:12,children:"December"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Pa,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Year:"}),e.jsxs("select",{value:c,onChange:we=>u(parseInt(we.target.value)),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto",children:[e.jsx("option",{value:2025,children:"2025"}),e.jsx("option",{value:2024,children:"2024"}),e.jsx("option",{value:2023,children:"2023"})]})]})]}),a==="single"&&s==="custom"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Pa,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Start Date:"}),e.jsx("input",{type:"date",value:m,onChange:we=>h(we.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Pa,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"End Date:"}),e.jsx("input",{type:"date",value:p,onChange:we=>y(we.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 w-full sm:w-auto"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-xs text-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:V,onChange:we=>Y(we.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{children:"Hide rows without data"})]}),e.jsxs("button",{onClick:Ke,disabled:P,className:"bg-gray-900 text-white px-3 md:px-4 py-1.5 hover:bg-gray-800 disabled:opacity-50 flex items-center space-x-2 text-xs font-medium w-full sm:w-auto justify-center",children:[e.jsx(I,{icon:Es}),e.jsx("span",{children:P?"Loading...":"Search"})]})]})]})})}),e.jsxs("div",{className:"p-2 md:p-4 lg:p-6",children:[A&&e.jsxs("div",{className:"bg-red-50 border border-red-200 p-3 mb-4 text-xs text-red-700 no-print",children:[e.jsx(I,{icon:Ma,className:"mr-2"}),A]}),_&&e.jsxs("div",{className:"bg-green-50 border border-green-200 p-3 mb-4 text-xs text-green-700 no-print",children:[e.jsx(I,{icon:cr,className:"mr-2"}),_]}),P&&e.jsxs("div",{className:"text-center py-6 md:py-8 text-gray-600 text-xs md:text-sm no-print",children:[e.jsx(I,{icon:fs,spin:!0,className:"mr-2"}),"Loading cash flow statement..."]}),!P&&!D&&!L&&!A&&e.jsxs("div",{className:"bg-white border border-gray-200 p-6 md:p-8 text-center no-print",children:[e.jsx(I,{icon:Bl,className:"text-gray-400 text-3xl md:text-4xl mb-3 md:mb-4"}),e.jsx("h3",{className:"text-base md:text-lg font-medium text-gray-900 mb-2",children:"No Cash Flow Data"}),e.jsx("p",{className:"text-gray-500 text-xs md:text-sm",children:"Choose filters and click Search."})]}),!P&&!A&&L&&a==="comparison"&&e.jsxs("div",{className:"bg-white border border-gray-200 printable-area overflow-x-auto",children:[e.jsxs("div",{className:"px-3 md:px-6 py-3 border-b border-gray-200",children:[e.jsx("h2",{className:"text-base md:text-lg font-semibold text-gray-900",children:"Cash Flow Statement"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Monthly Comparison - ",L.fiscalYear]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-xs border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b-2 border-gray-300",children:[e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 border-r border-gray-300 sticky left-0 bg-gray-50 z-10 min-w-[200px]",children:"Account"}),L.months.map((we,Ie)=>e.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-700 border-r border-gray-300 min-w-[100px]",children:we.label},Ie)),e.jsxs("th",{className:"px-3 py-2 text-center font-semibold text-gray-700 bg-gray-100 min-w-[100px]",children:["FY-",L.fiscalYear.split("-")[0].slice(-2)]})]})}),e.jsxs("tbody",{children:[e.jsx("tr",{className:"bg-blue-50",children:e.jsx("td",{colSpan:L.months.length+2,className:"px-3 py-2 font-bold text-gray-900 border-b border-gray-300",children:"Cash Flows from Operating Activities"})}),(()=>{const we=(L.fiscalYearTotals?.categorizedInflows?.Revenue||[]).sort((Ie,dt)=>Ie.account_code.localeCompare(dt.account_code));return we.length===0?e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-1.5 text-gray-500 italic border-r border-gray-200 sticky left-0 bg-white",children:"No revenue accounts"}),L.monthlyData.map((Ie,dt)=>e.jsx("td",{className:"px-3 py-1.5 text-right border-r border-gray-200",children:"-"},dt)),e.jsx("td",{className:"px-3 py-1.5 text-right bg-gray-50",children:"-"})]}):we.filter(Ie=>{if(!V)return!0;const dt=(Ie.amount||0)!==0,ut=L.monthlyData.some(Te=>(Te.categorizedInflows?.Revenue?.find(qe=>qe.account_code===Ie.account_code)?.amount||0)!==0);return dt||ut}).map((Ie,dt)=>e.jsxs("tr",{children:[e.jsx("td",{className:`px-3 py-1.5 text-gray-700 border-r border-gray-200 sticky left-0 ${dt%2===0?"bg-white":"bg-gray-50"}`,children:Ie.account_name}),L.monthlyData.map((ut,Te)=>{const qe=ut.categorizedInflows?.Revenue?.find(Xe=>Xe.account_code===Ie.account_code)?.amount||0;return e.jsx("td",{className:`px-3 py-1.5 text-right border-r border-gray-200 ${dt%2===0?"bg-white":"bg-gray-50"}`,children:qe!==0?Ee(qe):"-"},Te)}),e.jsx("td",{className:`px-3 py-1.5 text-right font-semibold ${dt%2===0?"bg-gray-50":"bg-gray-100"}`,children:Ee(Ie.amount||0)})]},Ie.account_code))})(),(()=>{const we=(L.fiscalYearTotals?.categorizedInflows?.Asset||[]).sort((Ie,dt)=>Ie.account_code.localeCompare(dt.account_code));return we.length>0&&we.some(Ie=>(Ie.amount||0)!==0)?e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"bg-green-50",children:e.jsx("td",{colSpan:L.months.length+2,className:"px-3 py-2 font-bold text-gray-900 border-t-2 border-b border-gray-300",children:"Collections from Accounts Receivable & Other Assets (Operating)"})}),we.map((Ie,dt)=>L.monthlyData.some(Te=>(Te.categorizedInflows?.Asset?.find(qe=>qe.account_code===Ie.account_code)?.amount||0)!==0)||(Ie.amount||0)!==0?e.jsxs("tr",{children:[e.jsx("td",{className:`px-3 py-1.5 text-gray-700 border-r border-gray-200 sticky left-0 ${dt%2===0?"bg-white":"bg-gray-50"}`,children:Ie.account_name}),L.monthlyData.map((Te,Ve)=>{const Xe=Te.categorizedInflows?.Asset?.find(We=>We.account_code===Ie.account_code)?.amount||0;return e.jsx("td",{className:`px-3 py-1.5 text-right border-r border-gray-200 ${dt%2===0?"bg-white":"bg-gray-50"}`,children:Xe!==0?Ee(Xe):"-"},Ve)}),e.jsx("td",{className:`px-3 py-1.5 text-right font-semibold ${dt%2===0?"bg-gray-50":"bg-gray-100"}`,children:Ee(Ie.amount||0)})]},Ie.account_code):null)]}):null})(),e.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900 border-r border-gray-300 sticky left-0 bg-gray-100",children:"Total Cash Flows from Operating Activities (Income)"}),L.monthlyData.map((we,Ie)=>{const dt=we.categorizedInflows?.Revenue?.reduce((Ve,qe)=>Ve+(qe.amount||0),0)||0,ut=we.categorizedInflows?.Asset?.reduce((Ve,qe)=>Ve+(qe.amount||0),0)||0,Te=dt+ut;return e.jsx("td",{className:"px-3 py-2 text-right border-r border-gray-300",children:Ee(Te)},Ie)}),e.jsx("td",{className:"px-3 py-2 text-right font-bold bg-gray-200",children:Ee((L.fiscalYearTotals?.categorizedInflows?.Revenue?.reduce((we,Ie)=>we+(Ie.amount||0),0)||0)+(L.fiscalYearTotals?.categorizedInflows?.Asset?.reduce((we,Ie)=>we+(Ie.amount||0),0)||0))})]}),e.jsx("tr",{className:"bg-red-50",children:e.jsx("td",{colSpan:L.months.length+2,className:"px-3 py-2 font-bold text-gray-900 border-t-2 border-b border-gray-300",children:"Operating Activities (Expense Section)"})}),(()=>{const we=(L.fiscalYearTotals?.categorizedOutflows?.Expense||[]).sort((Ie,dt)=>Ie.account_code.localeCompare(dt.account_code));return we.length===0?e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-1.5 text-gray-500 italic border-r border-gray-200 sticky left-0 bg-white",children:"No expense accounts"}),L.monthlyData.map((Ie,dt)=>e.jsx("td",{className:"px-3 py-1.5 text-right border-r border-gray-200",children:"-"},dt)),e.jsx("td",{className:"px-3 py-1.5 text-right bg-gray-50",children:"-"})]}):we.filter(Ie=>{if(!V)return!0;const dt=(Ie.amount||0)!==0,ut=L.monthlyData.some(Te=>(Te.categorizedOutflows?.Expense?.find(qe=>qe.account_code===Ie.account_code)?.amount||0)!==0);return dt||ut}).map((Ie,dt)=>e.jsxs("tr",{children:[e.jsx("td",{className:`px-3 py-1.5 text-gray-700 border-r border-gray-200 sticky left-0 ${dt%2===0?"bg-white":"bg-gray-50"}`,children:Ie.account_name}),L.monthlyData.map((ut,Te)=>{const qe=ut.categorizedOutflows?.Expense?.find(Xe=>Xe.account_code===Ie.account_code)?.amount||0;return e.jsx("td",{className:`px-3 py-1.5 text-right border-r border-gray-200 ${dt%2===0?"bg-white":"bg-gray-50"}`,children:qe!==0?Ee(qe):"-"},Te)}),e.jsx("td",{className:`px-3 py-1.5 text-right font-semibold ${dt%2===0?"bg-gray-50":"bg-gray-100"}`,children:Ee(Ie.amount||0)})]},Ie.account_code))})(),e.jsxs("tr",{className:"bg-red-100 font-semibold",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900 border-r border-gray-300 sticky left-0 bg-red-100",children:"Total Operating Expenses"}),L.monthlyData.map((we,Ie)=>{const dt=we.categorizedOutflows?.Expense?.reduce((ut,Te)=>ut+(Te.amount||0),0)||0;return e.jsx("td",{className:"px-3 py-2 text-right border-r border-gray-300",children:Ee(dt)},Ie)}),e.jsx("td",{className:"px-3 py-2 text-right font-bold bg-red-200",children:Ee(L.fiscalYearTotals?.categorizedOutflows?.Expense?.reduce((we,Ie)=>we+(Ie.amount||0),0)||0)})]}),e.jsxs("tr",{className:"bg-gray-200 font-bold border-t-2 border-gray-400",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900 border-r border-gray-300 sticky left-0 bg-gray-200",children:"Total Cash Flows from Operating Activities"}),L.monthlyData.map((we,Ie)=>{const dt=we.categorizedInflows?.Revenue?.reduce((qe,Xe)=>qe+(Xe.amount||0),0)||0,ut=we.categorizedInflows?.Asset?.reduce((qe,Xe)=>qe+(Xe.amount||0),0)||0,Te=we.categorizedOutflows?.Expense?.reduce((qe,Xe)=>qe+(Xe.amount||0),0)||0,Ve=dt+ut-Te;return e.jsx("td",{className:`px-3 py-2 text-right border-r border-gray-300 ${Ve<0?"text-red-600":"text-green-600"}`,children:Ee(Ve)},Ie)}),e.jsx("td",{className:`px-3 py-2 text-right font-bold bg-gray-300 ${(()=>{const we=L.fiscalYearTotals?.categorizedInflows?.Revenue?.reduce((Te,Ve)=>Te+(Ve.amount||0),0)||0,Ie=L.fiscalYearTotals?.categorizedInflows?.Asset?.reduce((Te,Ve)=>Te+(Ve.amount||0),0)||0,dt=L.fiscalYearTotals?.categorizedOutflows?.Expense?.reduce((Te,Ve)=>Te+(Ve.amount||0),0)||0;return we+Ie-dt<0?"text-red-600":"text-green-600"})()}`,children:(()=>{const we=L.fiscalYearTotals?.categorizedInflows?.Revenue?.reduce((Te,Ve)=>Te+(Ve.amount||0),0)||0,Ie=L.fiscalYearTotals?.categorizedInflows?.Asset?.reduce((Te,Ve)=>Te+(Ve.amount||0),0)||0,dt=L.fiscalYearTotals?.categorizedOutflows?.Expense?.reduce((Te,Ve)=>Te+(Ve.amount||0),0)||0,ut=we+Ie-dt;return Ee(ut)})()})]}),e.jsx("tr",{className:"bg-purple-50",children:e.jsx("td",{colSpan:L.months.length+2,className:"px-3 py-2 font-bold text-gray-900 border-t-2 border-b border-gray-300",children:"Cash Flows From Investing Activities"})}),(()=>{const we=(L.fiscalYearTotals?.categorizedOutflows?.Asset||[]).sort((Ie,dt)=>Ie.account_code.localeCompare(dt.account_code));return we.length===0?e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-1.5 text-gray-500 italic border-r border-gray-200 sticky left-0 bg-white",children:"No investing activities"}),L.monthlyData.map((Ie,dt)=>e.jsx("td",{className:"px-3 py-1.5 text-right border-r border-gray-200",children:"-"},dt)),e.jsx("td",{className:"px-3 py-1.5 text-right bg-gray-50",children:"-"})]}):we.filter(Ie=>{if(!V)return!0;const dt=(Ie.amount||0)!==0,ut=L.monthlyData.some(Te=>(Te.categorizedOutflows?.Asset?.find(qe=>qe.account_code===Ie.account_code)?.amount||0)!==0);return dt||ut}).map((Ie,dt)=>e.jsxs("tr",{children:[e.jsx("td",{className:`px-3 py-1.5 text-gray-700 border-r border-gray-200 sticky left-0 ${dt%2===0?"bg-white":"bg-gray-50"}`,children:Ie.account_name}),L.monthlyData.map((ut,Te)=>{const qe=ut.categorizedOutflows?.Asset?.find(Xe=>Xe.account_code===Ie.account_code)?.amount||0;return e.jsx("td",{className:`px-3 py-1.5 text-right border-r border-gray-200 ${dt%2===0?"bg-white":"bg-gray-50"}`,children:qe!==0?Ee(qe):"-"},Te)}),e.jsx("td",{className:`px-3 py-1.5 text-right font-semibold ${dt%2===0?"bg-gray-50":"bg-gray-100"}`,children:Ee(Ie.amount||0)})]},Ie.account_code))})(),e.jsxs("tr",{className:"bg-purple-100 font-semibold",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900 border-r border-gray-300 sticky left-0 bg-purple-100",children:"Total Cash Flows From Investing Activities"}),L.monthlyData.map((we,Ie)=>{const dt=we.categorizedOutflows?.Asset?.reduce((ut,Te)=>ut+(Te.amount||0),0)||0;return e.jsx("td",{className:"px-3 py-2 text-right border-r border-gray-300",children:Ee(dt)},Ie)}),e.jsx("td",{className:"px-3 py-2 text-right font-bold bg-purple-200",children:Ee(L.fiscalYearTotals?.categorizedOutflows?.Asset?.reduce((we,Ie)=>we+(Ie.amount||0),0)||0)})]}),e.jsx("tr",{className:"bg-indigo-50",children:e.jsx("td",{colSpan:L.months.length+2,className:"px-3 py-2 font-bold text-gray-900 border-t-2 border-b border-gray-300",children:"Cash Flows From Financing Activities"})}),(()=>{const we=(L.fiscalYearTotals?.categorizedOutflows?.Liability||[]).map(ut=>({...ut,account_type:"Liability"})),Ie=(L.fiscalYearTotals?.categorizedOutflows?.Equity||[]).map(ut=>({...ut,account_type:"Equity"})),dt=[...we,...Ie].sort((ut,Te)=>ut.account_code.localeCompare(Te.account_code));return dt.length===0?e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-1.5 text-gray-500 italic border-r border-gray-200 sticky left-0 bg-white",children:"No financing activities"}),L.monthlyData.map((ut,Te)=>e.jsx("td",{className:"px-3 py-1.5 text-right border-r border-gray-200",children:"-"},Te)),e.jsx("td",{className:"px-3 py-1.5 text-right bg-gray-50",children:"-"})]}):dt.filter(ut=>{if(!V)return!0;const Te=(ut.amount||0)!==0,Ve=L.monthlyData.some(qe=>(qe.categorizedOutflows?.[ut.account_type]?.find(We=>We.account_code===ut.account_code)?.amount||0)!==0);return Te||Ve}).map((ut,Te)=>e.jsxs("tr",{children:[e.jsx("td",{className:`px-3 py-1.5 text-gray-700 border-r border-gray-200 sticky left-0 ${Te%2===0?"bg-white":"bg-gray-50"}`,children:ut.account_name}),L.monthlyData.map((Ve,qe)=>{const We=Ve.categorizedOutflows?.[ut.account_type]?.find(Ge=>Ge.account_code===ut.account_code)?.amount||0;return e.jsx("td",{className:`px-3 py-1.5 text-right border-r border-gray-200 ${Te%2===0?"bg-white":"bg-gray-50"}`,children:We!==0?Ee(We):"-"},qe)}),e.jsx("td",{className:`px-3 py-1.5 text-right font-semibold ${Te%2===0?"bg-gray-50":"bg-gray-100"}`,children:Ee(ut.amount||0)})]},ut.account_code))})(),e.jsxs("tr",{className:"bg-indigo-100 font-semibold",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900 border-r border-gray-300 sticky left-0 bg-indigo-100",children:"Total Cash Flows From Financing Activities"}),L.monthlyData.map((we,Ie)=>{const dt=we.categorizedOutflows?.Liability?.reduce((Ve,qe)=>Ve+(qe.amount||0),0)||0,ut=we.categorizedOutflows?.Equity?.reduce((Ve,qe)=>Ve+(qe.amount||0),0)||0,Te=dt+ut;return e.jsx("td",{className:"px-3 py-2 text-right border-r border-gray-300",children:Te!==0?Ee(Te):"-"},Ie)}),e.jsx("td",{className:"px-3 py-2 text-right font-bold bg-indigo-200",children:Ee((L.fiscalYearTotals?.categorizedOutflows?.Liability?.reduce((we,Ie)=>we+(Ie.amount||0),0)||0)+(L.fiscalYearTotals?.categorizedOutflows?.Equity?.reduce((we,Ie)=>we+(Ie.amount||0),0)||0))})]}),e.jsxs("tr",{className:"bg-gray-300 font-bold border-t-2 border-gray-500",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900 border-r border-gray-400 sticky left-0 bg-gray-300",children:"Net increase in cash and cash equivalents"}),L.monthlyData.map((we,Ie)=>{const dt=we.categorizedInflows?.Revenue?.reduce((Dt,It)=>Dt+(It.amount||0),0)||0,ut=we.categorizedInflows?.Asset?.reduce((Dt,It)=>Dt+(It.amount||0),0)||0,Te=we.categorizedOutflows?.Expense?.reduce((Dt,It)=>Dt+(It.amount||0),0)||0,Ve=dt+ut-Te,qe=we.categorizedOutflows?.Asset?.reduce((Dt,It)=>Dt+(It.amount||0),0)||0,Xe=we.categorizedOutflows?.Liability?.reduce((Dt,It)=>Dt+(It.amount||0),0)||0,We=we.categorizedOutflows?.Equity?.reduce((Dt,It)=>Dt+(It.amount||0),0)||0,Ge=Xe+We,lt=Ve-qe-Ge;return e.jsx("td",{className:`px-3 py-2 text-right border-r border-gray-400 ${lt<0?"text-red-600":"text-green-600"}`,children:Ee(lt)},Ie)}),e.jsx("td",{className:`px-3 py-2 text-right font-bold bg-gray-400 ${(()=>{const we=L.fiscalYearTotals?.categorizedInflows?.Revenue?.reduce((Ge,lt)=>Ge+(lt.amount||0),0)||0,Ie=L.fiscalYearTotals?.categorizedInflows?.Asset?.reduce((Ge,lt)=>Ge+(lt.amount||0),0)||0,dt=L.fiscalYearTotals?.categorizedOutflows?.Expense?.reduce((Ge,lt)=>Ge+(lt.amount||0),0)||0,ut=we+Ie-dt,Te=L.fiscalYearTotals?.categorizedOutflows?.Asset?.reduce((Ge,lt)=>Ge+(lt.amount||0),0)||0,Ve=L.fiscalYearTotals?.categorizedOutflows?.Liability?.reduce((Ge,lt)=>Ge+(lt.amount||0),0)||0,qe=L.fiscalYearTotals?.categorizedOutflows?.Equity?.reduce((Ge,lt)=>Ge+(lt.amount||0),0)||0,Xe=Ve+qe;return ut-Te-Xe<0?"text-red-600":"text-green-600"})()}`,children:(()=>{const we=L.fiscalYearTotals?.categorizedInflows?.Revenue?.reduce((Ge,lt)=>Ge+(lt.amount||0),0)||0,Ie=L.fiscalYearTotals?.categorizedInflows?.Asset?.reduce((Ge,lt)=>Ge+(lt.amount||0),0)||0,dt=L.fiscalYearTotals?.categorizedOutflows?.Expense?.reduce((Ge,lt)=>Ge+(lt.amount||0),0)||0,ut=we+Ie-dt,Te=L.fiscalYearTotals?.categorizedOutflows?.Asset?.reduce((Ge,lt)=>Ge+(lt.amount||0),0)||0,Ve=L.fiscalYearTotals?.categorizedOutflows?.Liability?.reduce((Ge,lt)=>Ge+(lt.amount||0),0)||0,qe=L.fiscalYearTotals?.categorizedOutflows?.Equity?.reduce((Ge,lt)=>Ge+(lt.amount||0),0)||0,Xe=Ve+qe,We=ut-Te-Xe;return Ee(We)})()})]}),e.jsxs("tr",{className:"bg-gray-900 text-white font-bold",children:[e.jsx("td",{className:"px-3 py-2 border-r border-gray-700 sticky left-0 bg-gray-900",children:"Cash and cash equivalents at end of period"}),(()=>{let we=L.monthlyData[0]?.totals?.beginning_cash||0;return L.monthlyData.map((Ie,dt)=>{const ut=Ie.categorizedInflows?.Revenue?.reduce((It,Bt)=>It+(Bt.amount||0),0)||0,Te=Ie.categorizedInflows?.Asset?.reduce((It,Bt)=>It+(Bt.amount||0),0)||0,Ve=Ie.categorizedOutflows?.Expense?.reduce((It,Bt)=>It+(Bt.amount||0),0)||0,qe=ut+Te-Ve,Xe=Ie.categorizedOutflows?.Asset?.reduce((It,Bt)=>It+(Bt.amount||0),0)||0,We=Ie.categorizedOutflows?.Liability?.reduce((It,Bt)=>It+(Bt.amount||0),0)||0,Ge=Ie.categorizedOutflows?.Equity?.reduce((It,Bt)=>It+(Bt.amount||0),0)||0,lt=We+Ge,Dt=qe-Xe-lt;return we+=Dt,e.jsx("td",{className:"px-3 py-2 text-right border-r border-gray-700",children:Ee(we)},dt)})})(),e.jsx("td",{className:"px-3 py-2 text-right font-bold bg-black",children:(()=>{const we=L.monthlyData[0]?.totals?.beginning_cash||0,Ie=L.fiscalYearTotals?.categorizedInflows?.Revenue?.reduce((lt,Dt)=>lt+(Dt.amount||0),0)||0,dt=L.fiscalYearTotals?.categorizedInflows?.Asset?.reduce((lt,Dt)=>lt+(Dt.amount||0),0)||0,ut=L.fiscalYearTotals?.categorizedOutflows?.Expense?.reduce((lt,Dt)=>lt+(Dt.amount||0),0)||0,Te=Ie+dt-ut,Ve=L.fiscalYearTotals?.categorizedOutflows?.Asset?.reduce((lt,Dt)=>lt+(Dt.amount||0),0)||0,qe=L.fiscalYearTotals?.categorizedOutflows?.Liability?.reduce((lt,Dt)=>lt+(Dt.amount||0),0)||0,Xe=L.fiscalYearTotals?.categorizedOutflows?.Equity?.reduce((lt,Dt)=>lt+(Dt.amount||0),0)||0,We=qe+Xe,Ge=Te-Ve-We;return Ee(we+Ge)})()})]})]})]})})]}),!P&&!A&&D&&a==="single"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 md:gap-3 mb-3 md:mb-4 no-print",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-2.5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Total Inflows"}),e.jsx("p",{className:"text-base font-semibold text-green-600",children:Ee(Re.total_inflows)})]}),e.jsx("div",{className:"bg-green-100 p-1.5",children:e.jsx(I,{icon:bf,className:"text-green-600 text-xs"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-2.5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Total Outflows"}),e.jsx("p",{className:"text-base font-semibold text-red-600",children:Ee(Re.total_outflows)})]}),e.jsx("div",{className:"bg-red-100 p-1.5",children:e.jsx(I,{icon:gf,className:"text-red-600 text-xs"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-2.5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Net Cash Flow"}),e.jsx("p",{className:`text-base font-semibold ${Re.net_cash_flow>=0?"text-green-600":"text-red-600"}`,children:Ee(Re.net_cash_flow)})]}),e.jsx("div",{className:"bg-gray-100 p-1.5",children:e.jsx(I,{icon:Qc,className:"text-gray-600 text-xs"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-2.5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Current Cash Position"}),e.jsx("p",{className:"text-base font-semibold text-gray-900",children:Ee(Re.ending_cash)})]}),e.jsx("div",{className:"bg-gray-100 p-1.5",children:e.jsx(I,{icon:Bl,className:"text-gray-600 text-xs"})})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 printable-area",children:[e.jsxs("div",{className:"px-3 md:px-6 py-3 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900",children:"Cash Flow Statement"}),e.jsx("p",{className:"text-xs text-gray-600",children:D.period?.period_name?D.period.period_name:D.start_date&&D.end_date?`${D.start_date} to ${D.end_date}`:""})]}),e.jsxs("div",{className:"p-3 md:p-6",children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsxs("h3",{className:"text-xs font-semibold text-gray-700 mb-2 flex items-center",children:[e.jsx(I,{icon:bf,className:"mr-2"}),"Cash In"]}),e.jsxs("div",{className:"space-y-0",children:[(D.cash_inflows||[]).length===0?e.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-500 italic",children:"No cash inflows in this period"}),e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"$0.00"})]}):(D.cash_inflows||[]).filter(we=>!V||(we.amount||0)!==0).map((we,Ie)=>e.jsxs("div",{className:`flex justify-between items-center py-1.5 px-2 ${Ie%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsxs("span",{className:"text-xs text-gray-700",children:[we.account_code," - ",we.account_name]}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:Ee(we.amount)})]},Ie)),e.jsxs("div",{className:"flex justify-between items-center py-2 px-2 border-t border-gray-200 bg-gray-100",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"Total Cash In"}),e.jsx("span",{className:"text-xs font-bold text-gray-900",children:Ee(Re.total_inflows)})]})]})]}),e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsxs("h3",{className:"text-xs font-semibold text-gray-700 mb-2 flex items-center",children:[e.jsx(I,{icon:gf,className:"mr-2"}),"Cash Out"]}),e.jsxs("div",{className:"space-y-0",children:[(D.cash_outflows||[]).length===0?e.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-gray-50",children:[e.jsx("span",{className:"text-xs text-gray-500 italic",children:"No cash outflows in this period"}),e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"$0.00"})]}):(D.cash_outflows||[]).filter(we=>!V||(we.amount||0)!==0).map((we,Ie)=>e.jsxs("div",{className:`flex justify-between items-center py-1.5 px-2 ${Ie%2===0?"bg-white":"bg-gray-50"}`,children:[e.jsxs("span",{className:"text-xs text-gray-700",children:[we.account_code," - ",we.account_name]}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:Ee(we.amount)})]},Ie)),e.jsxs("div",{className:"flex justify-between items-center py-2 px-2 border-t border-gray-200 bg-gray-100",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"Total Cash Out"}),e.jsx("span",{className:"text-xs font-bold text-gray-900",children:Ee(Re.total_outflows)})]})]})]}),e.jsxs("div",{className:"border-t-2 border-gray-300 pt-3 md:pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 md:py-2.5 px-2 md:px-3 bg-gray-100 mb-1",children:[e.jsx("span",{className:"text-xs font-bold text-gray-900",children:"Net Cash Flow"}),e.jsx("span",{className:`text-xs font-bold ${Re.net_cash_flow>=0?"text-green-600":"text-red-600"}`,children:Ee(Re.net_cash_flow)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 md:py-2.5 px-2 md:px-3 bg-gray-50 mb-1",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Beginning Cash & Bank Balance"}),e.jsx("span",{className:"text-xs font-semibold text-gray-700",children:Ee(Re.beginning_cash)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 md:py-2.5 px-2 md:px-3 bg-gray-900 text-white",children:[e.jsx("span",{className:"text-xs font-bold",children:"Current Cash & Bank Position"}),e.jsx("span",{className:"text-xs font-bold",children:Ee(Re.ending_cash)})]})]})]})]})]}),ce&&ae&&!P&&e.jsxs("div",{className:"bg-white border border-gray-200 mb-6 no-print",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Cash Flow Comparison (",ae.reports.length," Reports)"]}),e.jsxs("button",{onClick:()=>De(!1),className:"text-xs px-3 py-1 text-gray-600 hover:text-gray-900 border border-gray-300 hover:bg-gray-50",children:[e.jsx(I,{icon:Wt,className:"mr-1"}),"Close Comparison"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-xs",children:[e.jsx("thead",{className:"bg-gray-50 border-b-2 border-gray-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 border-r border-gray-300 w-24",children:"Code"}),e.jsx("th",{className:"px-3 py-3 text-left font-semibold text-gray-700 border-r border-gray-300",children:"Account Name"}),ae.reports.map((we,Ie)=>e.jsxs("th",{className:"px-4 py-3 text-right font-semibold text-gray-700 border-l border-gray-300 bg-gray-100 min-w-[140px]",children:[e.jsx("div",{className:"font-bold text-sm",children:we.name}),e.jsx("div",{className:"text-xs font-normal text-gray-600 mt-1",children:we.period})]},Ie))]})}),e.jsxs("tbody",{className:"bg-white",children:[e.jsx("tr",{className:"bg-green-50",children:e.jsxs("td",{colSpan:2+ae.reports.length,className:"px-3 py-2 font-bold text-gray-900 text-sm border-t border-b border-gray-300",children:[e.jsx(I,{icon:bf,className:"mr-2"}),"CASH IN"]})}),ae.inflows.map((we,Ie)=>e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-gray-700 border-r border-gray-200",children:we.account_code}),e.jsx("td",{className:"px-3 py-2 text-gray-700 border-r border-gray-200",children:we.account_name}),we.amounts.map((dt,ut)=>e.jsx("td",{className:"px-4 py-2 text-right tabular-nums border-l border-gray-200 text-gray-900",children:Ee(dt)},ut))]},Ie)),e.jsxs("tr",{className:"bg-green-100 font-semibold border-t border-gray-300",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-2.5 text-gray-900 border-r border-gray-300",children:"Total Cash In"}),ae.reports.map((we,Ie)=>e.jsx("td",{className:"px-4 py-2.5 text-right tabular-nums border-l border-gray-300 text-gray-900",children:Ee(we.totals.total_inflows)},Ie))]}),e.jsx("tr",{className:"bg-red-50",children:e.jsxs("td",{colSpan:2+ae.reports.length,className:"px-3 py-2 font-bold text-gray-900 text-sm border-t-2 border-b border-gray-300",children:[e.jsx(I,{icon:gf,className:"mr-2"}),"CASH OUT"]})}),ae.outflows.map((we,Ie)=>e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-gray-700 border-r border-gray-200",children:we.account_code}),e.jsx("td",{className:"px-3 py-2 text-gray-700 border-r border-gray-200",children:we.account_name}),we.amounts.map((dt,ut)=>e.jsx("td",{className:"px-4 py-2 text-right tabular-nums border-l border-gray-200 text-gray-900",children:Ee(dt)},ut))]},Ie)),e.jsxs("tr",{className:"bg-red-100 font-semibold border-t border-gray-300",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-2.5 text-gray-900 border-r border-gray-300",children:"Total Cash Out"}),ae.reports.map((we,Ie)=>e.jsx("td",{className:"px-4 py-2.5 text-right tabular-nums border-l border-gray-300 text-gray-900",children:Ee(we.totals.total_outflows)},Ie))]}),e.jsxs("tr",{className:"bg-gray-100 font-bold border-t-2 border-gray-400",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-3 text-gray-900 text-sm border-r border-gray-300",children:"Net Cash Flow"}),ae.reports.map((we,Ie)=>e.jsx("td",{className:`px-4 py-3 text-right tabular-nums text-sm border-l border-gray-300 font-bold ${we.totals.net_cash_flow>=0?"text-green-600":"text-red-600"}`,children:Ee(we.totals.net_cash_flow)},Ie))]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-2.5 text-gray-700 border-r border-gray-200",children:"Beginning Cash"}),ae.reports.map((we,Ie)=>e.jsx("td",{className:"px-4 py-2.5 text-right tabular-nums border-l border-gray-200 text-gray-900",children:Ee(we.totals.beginning_cash)},Ie))]}),e.jsxs("tr",{className:"bg-gray-900 text-white font-bold",children:[e.jsx("td",{colSpan:"2",className:"px-3 py-3 text-sm border-r border-gray-700",children:"Ending Cash"}),ae.reports.map((we,Ie)=>e.jsx("td",{className:"px-4 py-3 text-right tabular-nums text-sm border-l border-gray-700",children:Ee(we.totals.ending_cash)},Ie))]})]})]})})]})]}),J&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Save Cash Flow Statement"}),e.jsx("button",{onClick:()=>W(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Report Name *"}),e.jsx("input",{type:"text",value:G,onChange:we=>z(we.target.value),placeholder:"e.g., Cash Flow - October 2024",className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{value:Z,onChange:we=>Q(we.target.value),placeholder:"Add any notes or description...",rows:3,className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tags (Optional)"}),e.jsx("input",{type:"text",value:fe,onChange:we=>he(we.target.value),placeholder:"e.g., monthly, approved, october",className:"w-full px-3 py-2 text-xs border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate tags with commas"})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>W(!1),className:"flex-1 px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:Oe,disabled:P||!G.trim(),className:"flex-1 px-4 py-2 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400",children:[e.jsx(I,{icon:ns,className:"mr-1"}),"Save Report"]})]})]})]})}),X&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Load Saved Cash Flow Statement"}),e.jsx("button",{onClick:()=>te(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt})})]}),ne.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:iu,className:"text-4xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No saved cash flow statements found"})]}):e.jsx("div",{className:"space-y-2",children:ne.map(we=>e.jsx("div",{className:"border border-gray-200 p-3 hover:bg-gray-50 cursor-pointer",onClick:()=>ct(we.id),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:we.report_name}),we.report_description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:we.report_description}),e.jsxs("div",{className:"flex gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Saved: ",new Date(we.saved_at).toLocaleDateString()]}),we.report_summary&&e.jsxs("span",{className:we.report_summary.net_cash_flow>=0?"text-green-600":"text-red-600",children:["Net: ",Ee(we.report_summary.net_cash_flow)]})]}),we.tags&&e.jsx("div",{className:"mt-2",children:we.tags.split(",").map((Ie,dt)=>e.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 text-xs px-2 py-0.5 mr-1",children:Ie.trim()},dt))})]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-xs font-medium ml-4",children:"Load "})]})},we.id))}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>te(!1),className:"w-full px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Close"})})]})}),oe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Compare Cash Flow Statements"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Select 2-5 reports to compare (",ke.length," selected)"]})]}),e.jsx("button",{onClick:()=>q(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt})})]}),ne.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:Bl,className:"text-4xl text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No saved cash flow statements found"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto mb-4",children:ne.map(we=>e.jsx("div",{className:`border p-3 cursor-pointer transition-all ${ke.includes(we.id)?"border-orange-500 bg-orange-50":"border-gray-200 hover:bg-gray-50"}`,onClick:()=>jt(we.id),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"checkbox",checked:ke.includes(we.id),onChange:()=>{},className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:we.report_name}),we.report_description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:we.report_description}),e.jsxs("div",{className:"flex gap-3 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["Saved: ",new Date(we.saved_at).toLocaleDateString()]}),we.report_summary&&e.jsxs("span",{className:we.report_summary.net_cash_flow>=0?"text-green-600":"text-red-600",children:["Net: ",Ee(we.report_summary.net_cash_flow)]})]})]})]})},we.id))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>q(!1),className:"flex-1 px-4 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsxs("button",{onClick:xt,disabled:ke.length<2,className:"flex-1 px-4 py-2 text-xs font-medium text-white bg-orange-600 hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(I,{icon:Bl,className:"mr-1"}),"Compare ",ke.length," Reports"]})]})]})]})})]})},Aue=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState(null),[i,o]=x.useState("breakdown"),[c,u]=x.useState({year:new Date().getFullYear(),month:new Date().getMonth()+1,start_date:"",end_date:"",period:"monthly"}),[m,h]=x.useState(null),[p,y]=x.useState(null),[g,v]=x.useState(null),N=t?{Authorization:`Bearer ${t}`}:{},w=async()=>{try{r(!0);const _=new URLSearchParams;c.start_date&&c.end_date?(_.append("start_date",c.start_date),_.append("end_date",c.end_date)):c.year&&c.month?(_.append("year",c.year),_.append("month",c.month)):c.year&&_.append("year",c.year);const B=await re.get(`${se}/analytics/expenses/monthly-breakdown?${_}`,{headers:N});h(B.data.data)}catch(_){n("Failed to fetch expense breakdown"),console.error("Error fetching expense breakdown:",_)}finally{r(!1)}},j=async()=>{try{r(!0);const _=new URLSearchParams;c.start_date&&c.end_date?(_.append("start_date",c.start_date),_.append("end_date",c.end_date)):c.year&&c.term?(_.append("year",c.year),_.append("term",c.term)):c.year&&_.append("year",c.year);const B=await re.get(`${se}/analytics/expenses/cost-per-student?${_}`,{headers:N});y(B.data.data)}catch(_){n("Failed to fetch cost per student analysis"),console.error("Error fetching cost per student analysis:",_)}finally{r(!1)}},T=async()=>{try{r(!0);const _=new URLSearchParams;_.append("period",c.period),c.start_date&&c.end_date?(_.append("start_date",c.start_date),_.append("end_date",c.end_date)):c.year&&_.append("year",c.year);const B=await re.get(`${se}/analytics/expenses/trends?${_}`,{headers:N});v(B.data.data)}catch(_){n("Failed to fetch expense trends"),console.error("Error fetching expense trends:",_)}finally{r(!1)}},k=(_,B)=>{u(D=>({...D,[_]:B}))},R=()=>{i==="breakdown"?w():i==="cost-per-student"?j():i==="trends"&&T()},P=_=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(_),$=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"],A=({active:_,payload:B,label:D})=>_&&B&&B.length?e.jsxs("div",{className:"bg-white p-3 border border-gray-200 shadow-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:D}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Amount: ",P(B[0].value)]})]}):null,M=[{id:"breakdown",name:"Expense Breakdown",icon:py},{id:"cost-per-student",name:"Cost Per Student",icon:Cr},{id:"trends",name:"Expense Trends",icon:Qc}];return e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Expense Analysis"}),e.jsx("p",{className:"report-subtitle",children:"Analyze and track expense trends and breakdowns."})]}),e.jsxs("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsxs("button",{className:"btn-checklist",style:{fontSize:"0.7rem",padding:"6px 12px"},children:[e.jsx(I,{icon:fi,style:{marginRight:"4px",fontSize:"0.7rem"}}),"Export"]}),e.jsxs("button",{className:"btn-checklist",style:{fontSize:"0.7rem",padding:"6px 12px"},children:[e.jsx(I,{icon:Mi,style:{marginRight:"4px",fontSize:"0.7rem"}}),"Print"]})]})]}),e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsxs("div",{className:"report-filters-left",style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[e.jsx("div",{className:"filter-group",style:{display:"flex",gap:"8px",alignItems:"center"},children:M.map(_=>e.jsxs("button",{onClick:()=>o(_.id),style:{padding:"6px 12px",fontSize:"0.75rem",fontWeight:500,border:`1px solid ${i===_.id?"#2563eb":"var(--border-color)"}`,borderRadius:"4px",background:i===_.id?"#2563eb":"transparent",color:i===_.id?"white":"var(--text-primary)",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},onMouseEnter:B=>{i!==_.id&&(B.currentTarget.style.background="#f3f4f6",B.currentTarget.style.borderColor="#d1d5db")},onMouseLeave:B=>{i!==_.id&&(B.currentTarget.style.background="transparent",B.currentTarget.style.borderColor="var(--border-color)")},children:[e.jsx(I,{icon:_.icon,style:{fontSize:"0.7rem"}}),e.jsx("span",{children:_.name})]},_.id))}),e.jsxs("div",{className:"filter-group",style:{display:"flex",gap:"8px",alignItems:"center",marginLeft:"auto"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(I,{icon:Es,style:{color:"var(--text-secondary)",fontSize:"0.7rem"}}),e.jsx("span",{style:{fontSize:"0.7rem",fontWeight:500,color:"var(--text-primary)"},children:"Year:"}),e.jsx("input",{type:"number",value:c.year,onChange:_=>k("year",parseInt(_.target.value)||new Date().getFullYear()),style:{width:"80px",padding:"4px 8px",fontSize:"0.7rem",border:"1px solid var(--border-color)",borderRadius:"4px",outline:"none"},placeholder:"2024",min:"2000",max:"2100"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"0.7rem",fontWeight:500,color:"var(--text-primary)"},children:"Month:"}),e.jsx("select",{value:c.month,onChange:_=>k("month",_.target.value),style:{padding:"4px 8px",fontSize:"0.7rem",border:"1px solid var(--border-color)",borderRadius:"4px",outline:"none",minWidth:"120px"},children:Array.from({length:12},(_,B)=>B+1).map(_=>e.jsx("option",{value:_,children:new Date(0,_-1).toLocaleString("default",{month:"long"})},_))})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"0.7rem",fontWeight:500,color:"var(--text-primary)"},children:"Period:"}),e.jsxs("select",{value:c.period,onChange:_=>k("period",_.target.value),style:{padding:"4px 8px",fontSize:"0.7rem",border:"1px solid var(--border-color)",borderRadius:"4px",outline:"none",minWidth:"100px"},children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"})]})]}),e.jsxs("button",{onClick:R,disabled:a,className:"btn-checklist",style:{fontSize:"0.7rem",padding:"6px 12px",whiteSpace:"nowrap"},children:[a?e.jsx(I,{icon:fs,className:"animate-spin",style:{marginRight:"4px",fontSize:"0.7rem"}}):e.jsx(I,{icon:Pa,style:{marginRight:"4px",fontSize:"0.7rem"}}),"Search"]})]})]})}),e.jsxs("div",{className:"report-content-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:"20px 30px"},children:[s&&e.jsxs("div",{style:{padding:"10px",background:"#fee2e2",border:"1px solid #fecaca",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Ma,style:{fontSize:"0.7rem"}}),s]}),i==="breakdown"&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:m?e.jsx(e.Fragment,{children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"24px"},children:[e.jsxs("div",{style:{background:"#f9fafb",padding:"16px",borderRadius:"4px",border:"1px solid var(--border-color)"},children:[e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px"},children:"Expenses by Category"}),e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(cm,{children:[e.jsx(au,{data:m.expenses,cx:"50%",cy:"50%",labelLine:!1,label:({category_name:_,percent:B})=>`${_} ${(B*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"total_amount",children:m.expenses.map((_,B)=>e.jsx(wo,{fill:$[B%$.length]},`cell-${B}`))}),e.jsx($s,{formatter:_=>P(_)})]})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{background:"#eff6ff",padding:"16px",borderRadius:"4px",border:"1px solid #bfdbfe"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,color:"#1e40af"},children:"Total Expenses"}),e.jsx("span",{style:{fontSize:"1.125rem",fontWeight:700,color:"#1e40af"},children:P(m.total_expenses)})]}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"#1e3a8a",marginTop:"4px"},children:["Period: ",m.period]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)"},children:"Top Categories"}),m.expenses.slice(0,5).map((_,B)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0"},children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:_.category_name}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:500,color:"var(--text-primary)"},children:P(_.total_amount)}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginLeft:"8px"},children:["(",_.percentage,"%)"]})]})]},_.category_name))]})]})]})}):e.jsx("div",{style:{textAlign:"center",padding:"32px",color:"var(--text-secondary)",fontSize:"0.75rem"},children:'Click "Search" to load expense breakdown data'})}),i==="cost-per-student"&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[e.jsxs("div",{style:{background:"#eff6ff",padding:"16px",borderRadius:"4px",border:"1px solid #bfdbfe"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,color:"#1e40af"},children:"Total Expenses"}),e.jsx(I,{icon:Za,style:{color:"#2563eb",fontSize:"0.875rem"}})]}),e.jsx("div",{style:{fontSize:"1.125rem",fontWeight:700,color:"#1e40af",marginTop:"4px"},children:P(p.total_expenses)})]}),e.jsxs("div",{style:{background:"#f0fdf4",padding:"16px",borderRadius:"4px",border:"1px solid #bbf7d0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,color:"#166534"},children:"Active Students"}),e.jsx(I,{icon:Cr,style:{color:"#10b981",fontSize:"0.875rem"}})]}),e.jsx("div",{style:{fontSize:"1.125rem",fontWeight:700,color:"#166534",marginTop:"4px"},children:p.active_students})]}),e.jsxs("div",{style:{background:"#faf5ff",padding:"16px",borderRadius:"4px",border:"1px solid #e9d5ff"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,color:"#6b21a8"},children:"Cost Per Student"}),e.jsx(I,{icon:Za,style:{color:"#8b5cf6",fontSize:"0.875rem"}})]}),e.jsx("div",{style:{fontSize:"1.125rem",fontWeight:700,color:"#6b21a8",marginTop:"4px"},children:P(p.cost_per_student)})]})]}),e.jsxs("div",{style:{background:"#f9fafb",padding:"16px",borderRadius:"4px",border:"1px solid var(--border-color)"},children:[e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px"},children:"Cost Per Student by Category"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:p.expenses_by_category.map((_,B)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:B<p.expenses_by_category.length-1?"1px solid var(--border-color)":"none"},children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:_.category_name}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:500,color:"var(--text-primary)"},children:[P(_.cost_per_student)," per student"]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:["Total: ",P(_.total_amount)]})]})]},_.category_name))})]})]}):e.jsx("div",{style:{textAlign:"center",padding:"32px",color:"var(--text-secondary)",fontSize:"0.75rem"},children:'Click "Search" to load cost per student analysis'})}),i==="trends"&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{background:"#f9fafb",padding:"16px",borderRadius:"4px",border:"1px solid var(--border-color)"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px"},children:["Expense Trends (",g.period_type,")"]}),e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(db,{data:g.trends,children:[e.jsx(Pi,{strokeDasharray:"3 3"}),e.jsx(mi,{dataKey:"period_label",tick:{fontSize:12},height:40}),e.jsx(hi,{tick:{fontSize:12},tickFormatter:_=>`$${_}`}),e.jsx($s,{content:e.jsx(A,{})}),e.jsx(pp,{type:"monotone",dataKey:"total_expenses",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2,r:4}})]})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)"},children:"Trend Data"}),g.trends.map((_,B)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:B<g.trends.length-1?"1px solid var(--border-color)":"none"},children:[e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:_.period_label}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:500,color:"var(--text-primary)"},children:P(_.total_expenses)}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:[_.transaction_count," transactions"]})]})]},B))]})]}):e.jsx("div",{style:{textAlign:"center",padding:"32px",color:"var(--text-secondary)",fontSize:"0.75rem"},children:'Click "Search" to load expense trends'})})]})]})},Eue=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState(null),[i,o]=x.useState("trends"),[c,u]=x.useState({year:new Date().getFullYear(),start_date:"",end_date:"",period:"monthly"}),[m,h]=x.useState(null),[p,y]=x.useState(null),[g,v]=x.useState(null),[N,w]=x.useState(null),j=t?{Authorization:`Bearer ${t}`}:{},T=async()=>{try{r(!0);const D=new URLSearchParams;D.append("period",c.period),c.start_date&&c.end_date?(D.append("start_date",c.start_date),D.append("end_date",c.end_date)):c.year&&D.append("year",c.year);const C=await re.get(`${se}/analytics/revenue/trends?${D}`,{headers:j});h(C.data.data)}catch(D){n("Failed to fetch revenue trends"),console.error("Error fetching revenue trends:",D)}finally{r(!1)}},k=async()=>{try{r(!0);const D=new URLSearchParams;c.start_date&&c.end_date?(D.append("start_date",c.start_date),D.append("end_date",c.end_date)):c.year&&D.append("year",c.year);const C=await re.get(`${se}/analytics/revenue/fee-collection-trends?${D}`,{headers:j});y(C.data.data)}catch(D){n("Failed to fetch fee collection trends"),console.error("Error fetching fee collection trends:",D)}finally{r(!1)}},R=async()=>{try{r(!0);const D=new URLSearchParams;c.start_date&&c.end_date?(D.append("start_date",c.start_date),D.append("end_date",c.end_date)):c.year&&D.append("year",c.year);const C=await re.get(`${se}/analytics/revenue/breakdown?${D}`,{headers:j});v(C.data.data)}catch(D){n("Failed to fetch revenue breakdown"),console.error("Error fetching revenue breakdown:",D)}finally{r(!1)}},P=async()=>{try{r(!0);const D=new URLSearchParams;c.start_date&&c.end_date?(D.append("start_date",c.start_date),D.append("end_date",c.end_date)):c.year&&D.append("year",c.year);const C=await re.get(`${se}/analytics/revenue/payment-methods?${D}`,{headers:j});w(C.data.data)}catch(D){n("Failed to fetch payment methods"),console.error("Error fetching payment methods:",D)}finally{r(!1)}},$=(D,C)=>{u(L=>({...L,[D]:C}))},A=()=>{i==="trends"?T():i==="fee-collection"?k():i==="breakdown"?R():i==="payment-methods"&&P()},M=D=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(D),_=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"],B=({active:D,payload:C,label:L})=>D&&C&&C.length?e.jsxs("div",{className:"bg-white p-3 border border-gray-200 shadow-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:L}),C.map((H,V)=>e.jsxs("p",{className:"text-sm text-gray-600",children:[H.dataKey,": ",M(H.value)]},V))]}):null;return e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"bg-white border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Qc,className:"text-gray-600 text-sm"}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Revenue Analysis"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 hover:bg-gray-200",children:[e.jsx(I,{icon:fi,className:"mr-1"}),"Export"]}),e.jsxs("button",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 hover:bg-gray-200",children:[e.jsx(I,{icon:Mi,className:"mr-1"}),"Print"]})]})]})}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Es,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Year:"}),e.jsx("input",{type:"number",value:c.year,onChange:D=>$("year",parseInt(D.target.value)||new Date().getFullYear()),className:"border border-gray-300 px-2 py-1 text-xs w-20 focus:outline-none focus:border-gray-400",placeholder:"2024",min:"2000",max:"2100"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Period:"}),e.jsxs("select",{value:c.period,onChange:D=>$("period",D.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400",children:[e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"})]})]}),e.jsxs("button",{onClick:A,disabled:a,className:"px-4 py-1 text-xs bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:[a?e.jsx(I,{icon:fs,className:"animate-spin mr-1"}):e.jsx(I,{icon:Pa,className:"mr-1"}),"Search"]})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-4",children:[{id:"trends",label:"Revenue Trends",icon:Qc},{id:"fee-collection",label:"Fee Collection",icon:Za},{id:"breakdown",label:"Revenue Breakdown",icon:py},{id:"payment-methods",label:"Payment Methods",icon:ql}].map(D=>e.jsxs("button",{onClick:()=>o(D.id),className:`py-3 px-1 border-b-2 text-xs font-medium ${i===D.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(I,{icon:D.icon,className:"mr-1"}),D.label]},D.id))})}),e.jsxs("div",{className:"p-4",children:[s&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 text-xs",children:[e.jsx(I,{icon:Ma,className:"mr-1"}),s]}),i==="trends"&&e.jsx("div",{className:"space-y-6",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:["Revenue Trends (",m.period_type,")"]}),e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(db,{data:m.trends,children:[e.jsx(Pi,{strokeDasharray:"3 3"}),e.jsx(mi,{dataKey:"period_label",tick:{fontSize:12},height:40}),e.jsx(hi,{tick:{fontSize:12},tickFormatter:D=>`$${D}`}),e.jsx($s,{content:e.jsx(B,{})}),e.jsx(pp,{type:"monotone",dataKey:"total_revenue",stroke:"#10b981",strokeWidth:2,dot:{fill:"#10b981",strokeWidth:2,r:4}})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Trend Data"}),m.trends.map((D,C)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[e.jsx("span",{className:"text-xs text-gray-700",children:D.period_label}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:M(D.total_revenue)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[D.transaction_count," transactions"]})]})]},C))]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load revenue trends'})}),i==="fee-collection"&&e.jsx("div",{className:"space-y-6",children:p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Fee Collection Trends by Type"}),e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(Zd,{data:p.trends,children:[e.jsx(Pi,{strokeDasharray:"3 3"}),e.jsx(mi,{dataKey:"period_label",tick:{fontSize:12},height:40}),e.jsx(hi,{tick:{fontSize:12},tickFormatter:D=>`$${D}`}),e.jsx($s,{content:e.jsx(B,{})}),e.jsx(Fl,{dataKey:"tuition",stackId:"a",fill:"#3b82f6",name:"Tuition"}),e.jsx(Fl,{dataKey:"boarding",stackId:"a",fill:"#10b981",name:"Boarding"}),e.jsx(Fl,{dataKey:"transport",stackId:"a",fill:"#f59e0b",name:"Transport"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Collection Data"}),p.trends.map((D,C)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[e.jsx("span",{className:"text-xs text-gray-700",children:D.period_label}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-900",children:["Total: ",M(D.total)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["T: ",M(D.tuition)," | B: ",M(D.boarding)," | Tr: ",M(D.transport)]})]})]},C))]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load fee collection trends'})}),i==="breakdown"&&e.jsx("div",{className:"space-y-6",children:g?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Revenue by Source"}),e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(cm,{children:[e.jsx(au,{data:g.revenue_sources,cx:"50%",cy:"50%",labelLine:!1,label:({source_name:D,percent:C})=>`${D} ${(C*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"total_amount",children:g.revenue_sources.map((D,C)=>e.jsx(wo,{fill:_[C%_.length]},`cell-${C}`))}),e.jsx($s,{formatter:D=>M(D)})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Total Revenue"}),e.jsx("span",{className:"text-lg font-bold text-green-900",children:M(g.total_revenue)})]}),e.jsxs("div",{className:"text-xs text-green-700 mt-1",children:["Period: ",g.period]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Revenue Sources"}),g.revenue_sources.map((D,C)=>e.jsxs("div",{className:"flex justify-between items-center py-1",children:[e.jsx("span",{className:"text-xs text-gray-700",children:D.source_name}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs font-medium text-gray-900",children:M(D.total_amount)}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",D.percentage,"%)"]})]})]},D.source_name))]})]})]})}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load revenue breakdown'})}),i==="payment-methods"&&e.jsx("div",{className:"space-y-6",children:N?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Payment Methods Distribution"}),e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(cm,{children:[e.jsx(au,{data:N.payment_methods,cx:"50%",cy:"50%",labelLine:!1,label:({payment_method:D,percent:C})=>`${D} ${(C*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"total_amount",children:N.payment_methods.map((D,C)=>e.jsx(wo,{fill:_[C%_.length]},`cell-${C}`))}),e.jsx($s,{formatter:D=>M(D)})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Collected"}),e.jsx("span",{className:"text-lg font-bold text-blue-900",children:M(N.total_amount)})]}),e.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:["Period: ",N.period]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Payment Methods"}),N.payment_methods.map((D,C)=>e.jsxs("div",{className:"flex justify-between items-center py-1",children:[e.jsx("span",{className:"text-xs text-gray-700 capitalize",children:D.payment_method}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-xs font-medium text-gray-900",children:M(D.total_amount)}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",D.percentage,"%)"]})]})]},D.payment_method))]})]})]})}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load payment methods analysis'})})]})]})})},Tue=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState(null),[i,o]=x.useState("outstanding-balances"),[c,u]=x.useState({year:new Date().getFullYear(),term:"",start_date:"",end_date:""}),[m,h]=x.useState(null),[p,y]=x.useState(null),[g,v]=x.useState(null),[N,w]=x.useState(null),j=t?{Authorization:`Bearer ${t}`}:{},T=async()=>{try{r(!0);const C=new URLSearchParams;c.year&&C.append("year",c.year),c.term&&C.append("term",c.term);const L=await re.get(`${se}/analytics/student-financial/outstanding-balances?${C}`,{headers:j});h(L.data.data)}catch(C){n("Failed to fetch outstanding balances"),console.error("Error fetching outstanding balances:",C)}finally{r(!1)}},k=async()=>{try{r(!0);const C=new URLSearchParams;c.start_date&&c.end_date?(C.append("start_date",c.start_date),C.append("end_date",c.end_date)):c.year&&c.term?(C.append("year",c.year),C.append("term",c.term)):c.year&&C.append("year",c.year);const L=await re.get(`${se}/analytics/student-financial/payment-completion-rates?${C}`,{headers:j});y(L.data.data)}catch(C){n("Failed to fetch payment completion rates"),console.error("Error fetching payment completion rates:",C)}finally{r(!1)}},R=async()=>{try{r(!0);const C=new URLSearchParams;c.start_date&&c.end_date?(C.append("start_date",c.start_date),C.append("end_date",c.end_date)):c.year&&c.term?(C.append("year",c.year),C.append("term",c.term)):c.year&&C.append("year",c.year);const L=await re.get(`${se}/analytics/student-financial/efficiency-metrics?${C}`,{headers:j});v(L.data.data)}catch(C){n("Failed to fetch efficiency metrics"),console.error("Error fetching efficiency metrics:",C)}finally{r(!1)}},P=async()=>{try{r(!0);const C=await re.get(`${se}/analytics/student-financial/health-summary`,{headers:j});w(C.data.data)}catch(C){n("Failed to fetch health summary"),console.error("Error fetching health summary:",C)}finally{r(!1)}},$=(C,L)=>{u(H=>({...H,[C]:L}))},A=()=>{i==="outstanding-balances"?T():i==="completion-rates"?k():i==="efficiency"?R():i==="health-summary"&&P()},M=C=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(C),_=({active:C,payload:L,label:H})=>C&&L&&L.length?e.jsxs("div",{className:"bg-white p-3 border border-gray-200 shadow-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:H}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Outstanding: ",M(L[0].value)]})]}):null,B=C=>C>=90?"text-green-600":C>=70?"text-yellow-600":"text-red-600",D=C=>C>=90?cr:C>=70?K0:hm;return e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"bg-white border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Cr,className:"text-gray-600 text-sm"}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Student Financial Analytics"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 hover:bg-gray-200",children:[e.jsx(I,{icon:fi,className:"mr-1"}),"Export"]}),e.jsxs("button",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 hover:bg-gray-200",children:[e.jsx(I,{icon:Mi,className:"mr-1"}),"Print"]})]})]})}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Es,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Year:"}),e.jsx("input",{type:"number",value:c.year,onChange:C=>$("year",parseInt(C.target.value)||new Date().getFullYear()),className:"border border-gray-300 px-2 py-1 text-xs w-20 focus:outline-none focus:border-gray-400",placeholder:"2024",min:"2000",max:"2100"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Term:"}),e.jsxs("select",{value:c.term,onChange:C=>$("term",C.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400",children:[e.jsx("option",{value:"",children:"All Terms"}),e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]})]}),e.jsxs("button",{onClick:A,disabled:a,className:"px-4 py-1 text-xs bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:[a?e.jsx(I,{icon:fs,className:"animate-spin mr-1"}):e.jsx(I,{icon:Pa,className:"mr-1"}),"Search"]})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-4",children:[{id:"outstanding-balances",label:"Outstanding Balances",icon:Za},{id:"completion-rates",label:"Completion Rates",icon:Iv},{id:"efficiency",label:"Efficiency Metrics",icon:Oh},{id:"health-summary",label:"Health Summary",icon:Cr}].map(C=>e.jsxs("button",{onClick:()=>o(C.id),className:`py-3 px-1 border-b-2 text-xs font-medium ${i===C.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(I,{icon:C.icon,className:"mr-1"}),C.label]},C.id))})}),e.jsxs("div",{className:"p-4",children:[s&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 text-xs",children:[e.jsx(I,{icon:Ma,className:"mr-1"}),s]}),i==="outstanding-balances"&&e.jsx("div",{className:"space-y-6",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-red-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-red-900",children:"Total Outstanding"}),e.jsx(I,{icon:Za,className:"text-red-600"})]}),e.jsx("div",{className:"text-lg font-bold text-red-900 mt-1",children:M(m.total_outstanding_amount)})]}),e.jsxs("div",{className:"bg-orange-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-orange-900",children:"Students with Balances"}),e.jsx(I,{icon:Cr,className:"text-orange-600"})]}),e.jsx("div",{className:"text-lg font-bold text-orange-900 mt-1",children:m.total_students_with_balances})]}),e.jsxs("div",{className:"bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Average Outstanding"}),e.jsx(I,{icon:Za,className:"text-blue-600"})]}),e.jsx("div",{className:"text-lg font-bold text-blue-900 mt-1",children:M(m.total_outstanding_amount/Math.max(m.total_students_with_balances,1))})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Outstanding Balances by Class"}),e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(Zd,{data:m.balances_by_class,children:[e.jsx(Pi,{strokeDasharray:"3 3"}),e.jsx(mi,{dataKey:"class_name",tick:{fontSize:12},height:40}),e.jsx(hi,{tick:{fontSize:12},tickFormatter:C=>`$${C}`}),e.jsx($s,{content:e.jsx(_,{})}),e.jsx(Fl,{dataKey:"total_outstanding",fill:"#ef4444",radius:[2,2,0,0]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Class Details"}),m.balances_by_class.map((C,L)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-900",children:C.class_name}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",C.stream_name,")"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900",children:M(C.total_outstanding)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[C.student_count," students"]})]})]},L))]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load outstanding balances'})}),i==="completion-rates"&&e.jsx("div",{className:"space-y-6",children:p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-green-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Completion Rate"}),e.jsx(I,{icon:Iv,className:"text-green-600"})]}),e.jsxs("div",{className:"text-lg font-bold text-green-900 mt-1",children:[p.overall_completion_rate,"%"]})]}),e.jsxs("div",{className:"bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Charged"}),e.jsx(I,{icon:Za,className:"text-blue-600"})]}),e.jsx("div",{className:"text-lg font-bold text-blue-900 mt-1",children:M(p.total_charged)})]}),e.jsxs("div",{className:"bg-green-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Total Paid"}),e.jsx(I,{icon:Za,className:"text-green-600"})]}),e.jsx("div",{className:"text-lg font-bold text-green-900 mt-1",children:M(p.total_paid)})]}),e.jsxs("div",{className:"bg-red-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-red-900",children:"Outstanding"}),e.jsx(I,{icon:Za,className:"text-red-600"})]}),e.jsx("div",{className:"text-lg font-bold text-red-900 mt-1",children:M(p.outstanding_amount)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Completion by Class"}),p.completion_by_class.map((C,L)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-900",children:C.class_name}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",C.stream_name,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-900",children:[C.completion_rate,"% complete"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[C.students_paid_up,"/",C.total_students," students"]})]}),e.jsx(I,{icon:D(parseFloat(C.completion_rate)),className:`text-sm ${B(parseFloat(C.completion_rate))}`})]})]},L))]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load payment completion rates'})}),i==="efficiency"&&e.jsx("div",{className:"space-y-6",children:g?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Collection Rate"}),e.jsx(I,{icon:Iv,className:"text-blue-600"})]}),e.jsxs("div",{className:"text-lg font-bold text-blue-900 mt-1",children:[g.efficiency_metrics.collection_rate,"%"]})]}),e.jsxs("div",{className:"bg-green-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Success Rate"}),e.jsx(I,{icon:cr,className:"text-green-600"})]}),e.jsxs("div",{className:"text-lg font-bold text-green-900 mt-1",children:[g.efficiency_metrics.success_rate,"%"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Avg Payment/Student"}),e.jsx(I,{icon:Za,className:"text-purple-600"})]}),e.jsx("div",{className:"text-lg font-bold text-purple-900 mt-1",children:M(g.efficiency_metrics.average_payment_per_student)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Payment Methods"}),e.jsx("div",{className:"space-y-2",children:Object.entries(g.payment_methods).map(([C,L])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-700 capitalize",children:C.replace("_"," ")}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:L})]},C))})]}),e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Payment Status"}),e.jsx("div",{className:"space-y-2",children:Object.entries(g.payment_status).map(([C,L])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-700 capitalize",children:C}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:L})]},C))})]})]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load efficiency metrics'})}),i==="health-summary"&&e.jsx("div",{className:"space-y-6",children:N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Students"}),e.jsx(I,{icon:Cr,className:"text-blue-600"})]}),e.jsx("div",{className:"text-lg font-bold text-blue-900 mt-1",children:N.total_students})]}),e.jsxs("div",{className:"bg-green-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Paid Up"}),e.jsx(I,{icon:cr,className:"text-green-600"})]}),e.jsx("div",{className:"text-lg font-bold text-green-900 mt-1",children:N.students_paid_up})]}),e.jsxs("div",{className:"bg-red-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-red-900",children:"Total Outstanding"}),e.jsx(I,{icon:Za,className:"text-red-600"})]}),e.jsx("div",{className:"text-lg font-bold text-red-900 mt-1",children:M(N.total_outstanding)})]}),e.jsxs("div",{className:"bg-purple-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Avg Outstanding"}),e.jsx(I,{icon:Za,className:"text-purple-600"})]}),e.jsx("div",{className:"text-lg font-bold text-purple-900 mt-1",children:M(N.average_outstanding)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-yellow-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-yellow-900",children:"Small Balance"}),e.jsx(I,{icon:K0,className:"text-yellow-600"})]}),e.jsx("div",{className:"text-lg font-bold text-yellow-900 mt-1",children:N.students_small_balance}),e.jsx("div",{className:"text-xs text-yellow-700",children:"$0 - $100"})]}),e.jsxs("div",{className:"bg-orange-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-orange-900",children:"Medium Balance"}),e.jsx(I,{icon:K0,className:"text-orange-600"})]}),e.jsx("div",{className:"text-lg font-bold text-orange-900 mt-1",children:N.students_medium_balance}),e.jsx("div",{className:"text-xs text-orange-700",children:"$100 - $500"})]}),e.jsxs("div",{className:"bg-red-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-red-900",children:"Large Balance"}),e.jsx(I,{icon:hm,className:"text-red-600"})]}),e.jsx("div",{className:"text-lg font-bold text-red-900 mt-1",children:N.students_large_balance}),e.jsx("div",{className:"text-xs text-red-700",children:"$500+"})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Recent Activity (Last 30 Days)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-700",children:"Payments Made"}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:N.recent_activity.payments_last_30_days})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-700",children:"Amount Collected"}),e.jsx("span",{className:"text-xs font-medium text-gray-900",children:M(N.recent_activity.amount_last_30_days)})]})]})]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load health summary'})})]})]})})},Pue=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState(null),[i,o]=x.useState("overview"),[c,u]=x.useState({year:new Date().getFullYear(),term:"",class_id:"",subject_id:""}),[m,h]=x.useState(null),[p,y]=x.useState(null),[g,v]=x.useState(null),[N,w]=x.useState(null),[j,T]=x.useState([]),[k,R]=x.useState([]),P=t?{Authorization:`Bearer ${t}`}:{},$=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316","#84cc16"],A=async()=>{try{r(!0);const V=new URLSearchParams;c.year&&V.append("year",c.year),c.term&&V.append("term",c.term),c.class_id&&V.append("class_id",c.class_id),c.subject_id&&V.append("subject_id",c.subject_id);const Y=await re.get(`${se}/analytics/student-results/academic-performance?${V}`,{headers:P});h(Y.data.data)}catch(V){n("Failed to fetch academic performance overview"),console.error("Error fetching academic performance overview:",V)}finally{r(!1)}},M=async()=>{try{r(!0);const V=new URLSearchParams;c.year&&V.append("year",c.year),c.term&&V.append("term",c.term),c.class_id&&V.append("class_id",c.class_id),c.subject_id&&V.append("subject_id",c.subject_id);const Y=await re.get(`${se}/analytics/student-results/grade-distribution?${V}`,{headers:P});y(Y.data.data)}catch(V){n("Failed to fetch grade distribution"),console.error("Error fetching grade distribution:",V)}finally{r(!1)}},_=async()=>{try{r(!0);const V=new URLSearchParams;c.year&&V.append("year",c.year),c.class_id&&V.append("class_id",c.class_id),c.subject_id&&V.append("subject_id",c.subject_id),V.append("period","monthly");const Y=await re.get(`${se}/analytics/student-results/performance-trends?${V}`,{headers:P});v(Y.data.data)}catch(V){n("Failed to fetch performance trends"),console.error("Error fetching performance trends:",V)}finally{r(!1)}},B=async()=>{try{r(!0);const V=new URLSearchParams;c.year&&V.append("year",c.year),c.term&&V.append("term",c.term),c.class_id&&V.append("class_id",c.class_id),c.subject_id&&V.append("subject_id",c.subject_id);const Y=await re.get(`${se}/analytics/student-results/top-bottom-performers?${V}`,{headers:P});w(Y.data.data)}catch(V){n("Failed to fetch top and bottom performers"),console.error("Error fetching top and bottom performers:",V)}finally{r(!1)}},D=async()=>{try{const[V,Y]=await Promise.all([re.get(`${se}/classes/gradelevel-classes`,{headers:P}),re.get(`${se}/classes/subjects`,{headers:P})]);T(V.data.data||[]),R(Y.data.data||[])}catch(V){console.error("Error fetching filter data:",V)}},C=(V,Y)=>{u(J=>({...J,[V]:Y}))},L=()=>{i==="overview"?A():i==="grade-distribution"?M():i==="trends"?_():i==="performers"&&B()},H=({active:V,payload:Y,label:J})=>V&&Y&&Y.length?e.jsxs("div",{className:"bg-white p-3 border border-gray-200 shadow-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:J}),Y.map((W,X)=>e.jsxs("p",{className:"text-sm text-gray-600",children:[W.dataKey,": ",W.value]},X))]}):null;return x.useEffect(()=>{D()},[]),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"bg-white border border-gray-200",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:qN,className:"text-gray-600 text-sm"}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Student Results Analytics"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 hover:bg-gray-200",children:[e.jsx(I,{icon:fi,className:"mr-1"}),"Export"]}),e.jsxs("button",{className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 hover:bg-gray-200",children:[e.jsx(I,{icon:Mi,className:"mr-1"}),"Print"]})]})]})}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Es,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Year:"}),e.jsx("input",{type:"number",value:c.year,onChange:V=>C("year",parseInt(V.target.value)||new Date().getFullYear()),className:"border border-gray-300 px-2 py-1 text-xs w-20 focus:outline-none focus:border-gray-400",placeholder:"2024",min:"2000",max:"2100"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Term:"}),e.jsxs("select",{value:c.term,onChange:V=>C("term",V.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400",children:[e.jsx("option",{value:"",children:"All Terms"}),e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Class:"}),e.jsxs("select",{value:c.class_id,onChange:V=>C("class_id",V.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400",children:[e.jsx("option",{value:"",children:"All Classes"}),j.map(V=>e.jsx("option",{value:V.id,children:V.name},V.id))]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Subject:"}),e.jsxs("select",{value:c.subject_id,onChange:V=>C("subject_id",V.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400",children:[e.jsx("option",{value:"",children:"All Subjects"}),k.map(V=>e.jsx("option",{value:V.id,children:V.name},V.id))]})]}),e.jsxs("button",{onClick:L,disabled:a,className:"px-4 py-1 text-xs bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:[a?e.jsx(I,{icon:fs,className:"animate-spin mr-1"}):e.jsx(I,{icon:Pa,className:"mr-1"}),"Search"]})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-4",children:[{id:"overview",label:"Academic Overview",icon:Oh},{id:"grade-distribution",label:"Grade Distribution",icon:gF},{id:"trends",label:"Performance Trends",icon:Qc},{id:"performers",label:"Top/Bottom Performers",icon:Jc}].map(V=>e.jsxs("button",{onClick:()=>o(V.id),className:`py-3 px-1 border-b-2 text-xs font-medium ${i===V.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(I,{icon:V.icon,className:"mr-1"}),V.label]},V.id))})}),e.jsxs("div",{className:"p-4",children:[s&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 text-xs",children:[e.jsx(I,{icon:Ma,className:"mr-1"}),s]}),i==="overview"&&e.jsx("div",{className:"space-y-6",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Total Students"}),e.jsx(I,{icon:as,className:"text-blue-600"})]}),e.jsx("div",{className:"text-lg font-bold text-blue-900 mt-1",children:m.overview.total_students})]}),e.jsxs("div",{className:"bg-green-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Average Marks"}),e.jsx(I,{icon:TF,className:"text-green-600"})]}),e.jsxs("div",{className:"text-lg font-bold text-green-900 mt-1",children:[m.overview.average_marks,"%"]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-yellow-900",children:"Highest Marks"}),e.jsx(I,{icon:Jc,className:"text-yellow-600"})]}),e.jsxs("div",{className:"text-lg font-bold text-yellow-900 mt-1",children:[m.overview.highest_marks,"%"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Exam Records"}),e.jsx(I,{icon:Oh,className:"text-purple-600"})]}),e.jsx("div",{className:"text-lg font-bold text-purple-900 mt-1",children:m.overview.total_exam_records})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Performance Distribution"}),e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(cm,{children:[e.jsx(au,{data:[{name:"Excellent (80%+)",value:parseFloat(m.overview.performance_distribution.excellent)},{name:"Good (60-79%)",value:parseFloat(m.overview.performance_distribution.good)},{name:"Average (40-59%)",value:parseFloat(m.overview.performance_distribution.average)},{name:"Poor (<40%)",value:parseFloat(m.overview.performance_distribution.poor)}],cx:"50%",cy:"50%",labelLine:!1,label:({name:V,percent:Y})=>`${V} ${(Y*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[0,1,2,3].map((V,Y)=>e.jsx(wo,{fill:$[Y%$.length]},`cell-${Y}`))}),e.jsx($s,{formatter:V=>`${V}%`})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Performance by Class"}),e.jsx("div",{className:"bg-gray-50 p-4",children:e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(Zd,{data:m.performance_by_class,children:[e.jsx(Pi,{strokeDasharray:"3 3"}),e.jsx(mi,{dataKey:"class_name",tick:{fontSize:12},height:40}),e.jsx(hi,{tick:{fontSize:12},tickFormatter:V=>`${V}%`}),e.jsx($s,{content:e.jsx(H,{})}),e.jsx(Fl,{dataKey:"average_marks",fill:"#3b82f6",radius:[2,2,0,0]})]})})})]})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load academic performance overview'})}),i==="grade-distribution"&&e.jsx("div",{className:"space-y-6",children:p&&p.grade_distribution&&p.grade_distribution.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Grade Distribution"}),e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(Zd,{data:p.grade_distribution,children:[e.jsx(Pi,{strokeDasharray:"3 3"}),e.jsx(mi,{dataKey:"grade",tick:{fontSize:12},height:40}),e.jsx(hi,{tick:{fontSize:12}}),e.jsx($s,{content:e.jsx(H,{})}),e.jsx(Fl,{dataKey:"count",fill:"#10b981",radius:[2,2,0,0]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Grade Details"}),p.grade_distribution.map((V,Y)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[e.jsx("span",{className:"text-xs font-medium text-gray-900",children:V.grade}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-900",children:[V.count," students"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[V.percentage,"%"]})]})]},Y))]})]}):p&&p.grade_distribution&&p.grade_distribution.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No grade distribution data found for the selected filters"}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load grade distribution'})}),i==="trends"&&e.jsx("div",{className:"space-y-6",children:g?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Performance Trends"}),e.jsx(Bs,{width:"100%",height:300,children:e.jsxs(db,{data:g.trends,children:[e.jsx(Pi,{strokeDasharray:"3 3"}),e.jsx(mi,{dataKey:"period_label",tick:{fontSize:12},height:40}),e.jsx(hi,{tick:{fontSize:12},tickFormatter:V=>`${V}%`}),e.jsx($s,{content:e.jsx(H,{})}),e.jsx(pp,{type:"monotone",dataKey:"average_marks",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2,r:4}})]})})]})}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load performance trends'})}),i==="performers"&&e.jsx("div",{className:"space-y-6",children:N?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Top Performers"}),e.jsx("div",{className:"space-y-2",children:N.top_performers.map((V,Y)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-900",children:V.full_name}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",V.class_name,")"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-900",children:[V.average_marks,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[V.exam_count," exams"]})]})]},Y))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Bottom Performers"}),e.jsx("div",{className:"space-y-2",children:N.bottom_performers.map((V,Y)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-900",children:V.full_name}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",V.class_name,")"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-900",children:[V.average_marks,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[V.exam_count," exams"]})]})]},Y))})]})]})}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Click "Search" to load top and bottom performers'})})]})]})})},Due=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState(""),[i,o]=x.useState(""),[c,u]=x.useState(!1),[m,h]=x.useState(!1),[p,y]=x.useState([]),[g,v]=x.useState(""),[N,w]=x.useState(""),[j,T]=x.useState(""),[k,R]=x.useState(""),[P,$]=x.useState(""),[A,M]=x.useState(1),[_]=x.useState(25),[B,D]=x.useState(0),C=async()=>{if(!t){n("Authentication required"),r(!1);return}r(!0),n("");try{const oe={page:A,limit:_};N&&(oe.search=N),j&&(oe.status=j),k&&(oe.start_date=k),P&&(oe.end_date=P);const q=await re.get(`${se}/procurement/purchase-requests`,{params:oe,headers:{Authorization:`Bearer ${t}`}});if(q.data.success!==!1){const G=q.data.data||q.data,z=q.data.total||q.data.pagination?.total||(Array.isArray(G)?G.length:0),Z=Array.isArray(G)?G:G?.requests||G?.purchase_requests||[];y(Z),D(z)}else n(q.data.message||"Failed to fetch purchase requests"),y([]),D(0)}catch(oe){console.error("Error fetching purchase requests:",oe),console.error("Error details:",{message:oe.message,response:oe.response?.data,status:oe.response?.status,url:oe.config?.url});let q="Failed to fetch purchase requests";oe.response?q=oe.response.data?.message||oe.response.data?.error||`Server error (${oe.response.status})`:oe.request?q="No response from server. Please check your connection.":q=oe.message||"Failed to fetch purchase requests",n(q),y([]),D(0)}finally{r(!1)}};x.useEffect(()=>{C()},[A,N,j,k,P]);const L=oe=>{oe.preventDefault(),w(g),M(1)},H=async oe=>{if(window.confirm("Are you sure you want to delete this purchase request?"))try{await re.delete(`${se}/procurement/purchase-requests/${oe}`,{headers:{Authorization:`Bearer ${t}`}}),o("Purchase request deleted successfully"),u(!0),C()}catch(q){console.error("Error deleting purchase request:",q),n(q.response?.data?.message||"Failed to delete purchase request"),h(!0)}},V=oe=>{switch(oe){case"pending":return Wn;case"approved":return cr;case"delivered":return faTruck;case"rejected":return Ma;default:return Ma}},Y=oe=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(oe),J=oe=>new Date(oe).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),W=Math.ceil(B/_),X=p.length>0?(A-1)*_+1:0,te=Math.min(A*_,B);return e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Purchase Requests"}),e.jsx("p",{className:"report-subtitle",children:"Manage and track purchase requests."})]}),e.jsx("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"},children:e.jsxs(ss,{to:"/dashboard/procurement/purchase-requests/new",className:"btn-checklist",style:{textDecoration:"none"},children:[e.jsx(I,{icon:Ht}),"Add Purchase Request"]})})]}),s&&e.jsx("div",{style:{padding:"10px 30px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",flexShrink:0},children:s}),e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsxs("div",{className:"report-filters-left",children:[e.jsx("form",{onSubmit:L,className:"filter-group",children:e.jsxs("div",{className:"search-input-wrapper",style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:ua,className:"search-icon"}),e.jsx("input",{type:"text",value:g,onChange:oe=>v(oe.target.value),placeholder:"Search by title, requester, department...",className:"filter-input search-input"}),g&&e.jsx("button",{onClick:()=>{v(""),w(""),M(1)},style:{position:"absolute",right:"8px",padding:"4px 6px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},title:"Clear search",children:""})]})}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Status:"}),e.jsxs("select",{value:j,onChange:oe=>{M(1),T(oe.target.value)},className:"filter-input",style:{minWidth:"150px",width:"150px"},children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),j&&e.jsx("button",{onClick:()=>{M(1),T("")},style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear status filter",children:""})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Start Date:"}),e.jsx("input",{type:"date",value:k,onChange:oe=>{M(1),R(oe.target.value)},className:"filter-input",style:{minWidth:"150px",width:"150px"}}),k&&e.jsx("button",{onClick:()=>{M(1),R("")},style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear start date",children:""})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"End Date:"}),e.jsx("input",{type:"date",value:P,onChange:oe=>{M(1),$(oe.target.value)},className:"filter-input",style:{minWidth:"150px",width:"150px"}}),P&&e.jsx("button",{onClick:()=>{M(1),$("")},style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear end date",children:""})]})]})}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:a?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading purchase requests..."}):s?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#dc2626",fontSize:"0.75rem"},children:s}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"REQUEST"}),e.jsx("th",{style:{padding:"6px 10px"},children:"REQUESTER"}),e.jsx("th",{style:{padding:"6px 10px"},children:"DEPARTMENT"}),e.jsx("th",{style:{padding:"6px 10px"},children:"AMOUNT"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STATUS"}),e.jsx("th",{style:{padding:"6px 10px"},children:"DATE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[p.map((oe,q)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:q%2===0?"#fafafa":"#f3f4f6"},children:[e.jsxs("td",{style:{padding:"4px 10px"},children:[e.jsx("div",{style:{fontWeight:500},children:oe.title}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:["#",oe.id]})]}),e.jsx("td",{style:{padding:"4px 10px"},children:oe.requester||"-"}),e.jsx("td",{style:{padding:"4px 10px"},children:oe.department||"-"}),e.jsx("td",{style:{padding:"4px 10px"},children:Y(oe.amount||0)}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",padding:"2px 8px",fontSize:"0.7rem",fontWeight:500,borderRadius:"4px",...oe.status==="pending"?{color:"#d97706",background:"#fef3c7"}:oe.status==="approved"?{color:"#2563eb",background:"#dbeafe"}:oe.status==="delivered"?{color:"#059669",background:"#d1fae5"}:oe.status==="rejected"?{color:"#dc2626",background:"#fee2e2"}:{color:"#6b7280",background:"#f3f4f6"}},children:[e.jsx(I,{icon:V(oe.status),style:{marginRight:"4px",fontSize:"0.7rem"}}),oe.status?oe.status.charAt(0).toUpperCase()+oe.status.slice(1):"-"]})}),e.jsx("td",{style:{padding:"4px 10px"},children:J(oe.created_at)}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx(ss,{to:`/dashboard/procurement/purchase-requests/${oe.id}`,style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0,textDecoration:"none"},title:"View",children:e.jsx(I,{icon:qa})}),e.jsx(ss,{to:`/dashboard/procurement/purchase-requests/${oe.id}/edit`,style:{color:"#6366f1",background:"none",border:"none",cursor:"pointer",padding:0,textDecoration:"none"},title:"Edit",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>H(oe.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:0},title:"Delete",children:e.jsx(I,{icon:sa})})]})})]},oe.id)),Array.from({length:Math.max(0,25-p.length)}).map((oe,q)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(p.length+q)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${q}`))]})]})}),e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",X," to ",te," of ",B||0," results."]}),e.jsxs("div",{className:"table-footer-right",children:[W>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>M(Math.max(1,A-1)),disabled:A===1,children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",A," of ",W]}),e.jsx("button",{className:"pagination-btn",onClick:()=>M(Math.min(W,A+1)),disabled:A===W,children:"Next"})]}),W<=1&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"All data displayed"})]})]}),e.jsx(Am,{isOpen:c,onClose:()=>u(!1),title:"Success",message:i}),e.jsx(dd,{isOpen:m,onClose:()=>h(!1),title:"Error",message:s})]})},Oue=()=>{const[t,a]=x.useState(""),[r,s]=x.useState("all"),[n,i]=x.useState("all"),o=[{id:1,title:"Office Supplies",requester:"John Doe",department:"Administration",amount:2500,status:"pending",date:"2025-01-15",priority:"medium",description:"Office supplies including paper, pens, and other stationery items"},{id:2,title:"Computer Equipment",requester:"Jane Smith",department:"IT",amount:15e3,status:"approved",date:"2025-01-14",priority:"high",description:"New computers and peripherals for IT department"},{id:3,title:"Laboratory Materials",requester:"Dr. Johnson",department:"Science",amount:8500,status:"delivered",date:"2025-01-13",priority:"high",description:"Laboratory equipment and chemicals for science department"},{id:4,title:"Library Books",requester:"Mary Wilson",department:"Library",amount:3200,status:"pending",date:"2025-01-12",priority:"low",description:"New books for library collection"},{id:5,title:"Sports Equipment",requester:"Coach Brown",department:"Physical Education",amount:4500,status:"approved",date:"2025-01-11",priority:"medium",description:"Sports equipment for physical education classes"},{id:6,title:"Maintenance Tools",requester:"Mike Davis",department:"Facilities",amount:1800,status:"delivered",date:"2025-01-10",priority:"medium",description:"Tools and equipment for facility maintenance"}],c=["Administration","IT","Science","Library","Physical Education","Facilities"],u=["pending","approved","delivered","rejected"],m=v=>{switch(v){case"pending":return"text-yellow-600 bg-yellow-100";case"approved":return"text-blue-600 bg-blue-100";case"delivered":return"text-green-600 bg-green-100";case"rejected":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},h=v=>{switch(v){case"pending":return Wn;case"approved":return cr;case"delivered":return hg;case"rejected":return Ma;default:return Ma}},p=v=>{switch(v){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},y=v=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(v),g=o.filter(v=>{const N=v.title.toLowerCase().includes(t.toLowerCase())||v.requester.toLowerCase().includes(t.toLowerCase())||v.description.toLowerCase().includes(t.toLowerCase()),w=r==="all"||v.status===r,j=n==="all"||v.department===n;return N&&w&&j});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Purchase Requests"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Manage and track purchase requests"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{className:"bg-gray-600 text-white px-3 py-1.5 hover:bg-gray-700 flex items-center space-x-2 text-xs font-medium",children:[e.jsx(I,{icon:fi}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{className:"bg-gray-600 text-white px-3 py-1.5 hover:bg-gray-700 flex items-center space-x-2 text-xs font-medium",children:[e.jsx(I,{icon:Mi}),e.jsx("span",{children:"Print"})]}),e.jsxs(ss,{to:"/dashboard/procurement/purchase-requests/new",className:"bg-blue-600 text-white px-4 py-2 hover:bg-blue-700 flex items-center space-x-2 text-sm font-medium rounded-md",children:[e.jsx(I,{icon:Ht}),e.jsx("span",{children:"New Request"})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(I,{icon:ua,className:"text-gray-400 text-xs"})}),e.jsx("input",{type:"text",placeholder:"Search requests...",value:t,onChange:v=>a(v.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Es,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Status:"}),e.jsxs("select",{value:r,onChange:v=>s(v.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 rounded",children:[e.jsx("option",{value:"all",children:"All Status"}),u.map(v=>e.jsx("option",{value:v,children:v.charAt(0).toUpperCase()+v.slice(1)},v))]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Es,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Department:"}),e.jsxs("select",{value:n,onChange:v=>i(v.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 rounded",children:[e.jsx("option",{value:"all",children:"All Departments"}),c.map(v=>e.jsx("option",{value:v,children:v},v))]})]})]})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Requests"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.length})]}),e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsx(I,{icon:Wn,className:"text-blue-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-lg font-semibold text-yellow-600",children:o.filter(v=>v.status==="pending").length})]}),e.jsx("div",{className:"bg-yellow-100 p-2 rounded",children:e.jsx(I,{icon:Wn,className:"text-yellow-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Approved"}),e.jsx("p",{className:"text-lg font-semibold text-blue-600",children:o.filter(v=>v.status==="approved").length})]}),e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsx(I,{icon:cr,className:"text-blue-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Delivered"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:o.filter(v=>v.status==="delivered").length})]}),e.jsx("div",{className:"bg-green-100 p-2 rounded",children:e.jsx(I,{icon:hg,className:"text-green-600 text-sm"})})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-base font-semibold text-gray-900",children:["Purchase Requests (",g.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Request"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requester"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(v=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.title}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:v.description})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:v.requester})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:v.department})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:y(v.amount)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p(v.priority)}`,children:v.priority.charAt(0).toUpperCase()+v.priority.slice(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m(v.status)}`,children:[e.jsx(I,{icon:h(v.status),className:"mr-1"}),v.status.charAt(0).toUpperCase()+v.status.slice(1)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:new Date(v.date).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{to:`/dashboard/procurement/purchase-requests/${v.id}`,className:"text-blue-600 hover:text-blue-900",title:"View Details",children:e.jsx(I,{icon:qa})}),e.jsx(ss,{to:`/dashboard/procurement/purchase-requests/${v.id}/edit`,className:"text-green-600 hover:text-green-900",title:"Edit Request",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",title:"Delete Request",children:e.jsx(I,{icon:sa})})]})})]},v.id))})]})}),g.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:ua,className:"text-gray-400 text-4xl mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No requests found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your search criteria or filters."})]})]})]})]})},Lue=()=>{const[t,a]=x.useState(""),[r,s]=x.useState("all"),[n,i]=x.useState("all"),o=[{id:1,name:"ABC Office Supplies",contactPerson:"John Smith",email:"john.smith@abcoffice.com",phone:"+1 (555) 123-4567",address:"123 Business St, City, State 12345",website:"www.abcoffice.com",category:"Office Supplies",status:"active",rating:4.5,totalOrders:45,totalSpent:125e3,lastOrder:"2025-01-10"},{id:2,name:"Tech Solutions Inc",contactPerson:"Sarah Johnson",email:"sarah.johnson@techsolutions.com",phone:"+1 (555) 234-5678",address:"456 Tech Ave, City, State 12345",website:"www.techsolutions.com",category:"Technology",status:"active",rating:4.8,totalOrders:32,totalSpent:89e3,lastOrder:"2025-01-12"},{id:3,name:"Lab Equipment Pro",contactPerson:"Dr. Michael Brown",email:"michael.brown@labequipment.com",phone:"+1 (555) 345-6789",address:"789 Science Blvd, City, State 12345",website:"www.labequipment.com",category:"Laboratory",status:"active",rating:4.2,totalOrders:18,totalSpent:67e3,lastOrder:"2025-01-08"},{id:4,name:"Book World Publishers",contactPerson:"Emily Davis",email:"emily.davis@bookworld.com",phone:"+1 (555) 456-7890",address:"321 Library Lane, City, State 12345",website:"www.bookworld.com",category:"Books",status:"inactive",rating:3.9,totalOrders:25,totalSpent:45e3,lastOrder:"2024-12-15"},{id:5,name:"Sports Equipment Co",contactPerson:"Coach Wilson",email:"coach.wilson@sportsequipment.com",phone:"+1 (555) 567-8901",address:"654 Sports Way, City, State 12345",website:"www.sportsequipment.com",category:"Sports",status:"active",rating:4.6,totalOrders:12,totalSpent:28e3,lastOrder:"2025-01-05"},{id:6,name:"Maintenance Tools Ltd",contactPerson:"Robert Garcia",email:"robert.garcia@maintools.com",phone:"+1 (555) 678-9012",address:"987 Tool Street, City, State 12345",website:"www.maintools.com",category:"Tools",status:"active",rating:4.3,totalOrders:28,totalSpent:52e3,lastOrder:"2025-01-09"}],c=["Office Supplies","Technology","Laboratory","Books","Sports","Tools"],u=["active","inactive"],m=v=>{switch(v){case"active":return"text-green-600 bg-green-100";case"inactive":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},h=v=>({"Office Supplies":"text-blue-600 bg-blue-100",Technology:"text-purple-600 bg-purple-100",Laboratory:"text-green-600 bg-green-100",Books:"text-orange-600 bg-orange-100",Sports:"text-red-600 bg-red-100",Tools:"text-gray-600 bg-gray-100"})[v]||"text-gray-600 bg-gray-100",p=v=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(v),y=v=>{const N=[],w=Math.floor(v),j=v%1!==0;for(let k=0;k<w;k++)N.push(e.jsx(I,{icon:jh,className:"text-yellow-400 text-xs"},k));j&&N.push(e.jsx(I,{icon:jh,className:"text-yellow-400 text-xs opacity-50"},"half"));const T=5-Math.ceil(v);for(let k=0;k<T;k++)N.push(e.jsx(I,{icon:jh,className:"text-gray-300 text-xs"},`empty-${k}`));return N},g=o.filter(v=>{const N=v.name.toLowerCase().includes(t.toLowerCase())||v.contactPerson.toLowerCase().includes(t.toLowerCase())||v.email.toLowerCase().includes(t.toLowerCase()),w=r==="all"||v.category===r,j=n==="all"||v.status===n;return N&&w&&j});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Suppliers"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Manage vendor relationships and supplier information"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{className:"bg-gray-600 text-white px-3 py-1.5 hover:bg-gray-700 flex items-center space-x-2 text-xs font-medium",children:[e.jsx(I,{icon:fi}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{className:"bg-gray-600 text-white px-3 py-1.5 hover:bg-gray-700 flex items-center space-x-2 text-xs font-medium",children:[e.jsx(I,{icon:Mi}),e.jsx("span",{children:"Print"})]}),e.jsxs(ss,{to:"/dashboard/procurement/suppliers/new",className:"bg-blue-600 text-white px-4 py-2 hover:bg-blue-700 flex items-center space-x-2 text-sm font-medium rounded-md",children:[e.jsx(I,{icon:Ht}),e.jsx("span",{children:"Add Supplier"})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(I,{icon:ua,className:"text-gray-400 text-xs"})}),e.jsx("input",{type:"text",placeholder:"Search suppliers...",value:t,onChange:v=>a(v.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Es,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Category:"}),e.jsxs("select",{value:r,onChange:v=>s(v.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 rounded",children:[e.jsx("option",{value:"all",children:"All Categories"}),c.map(v=>e.jsx("option",{value:v,children:v},v))]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Es,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Status:"}),e.jsxs("select",{value:n,onChange:v=>i(v.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 rounded",children:[e.jsx("option",{value:"all",children:"All Status"}),u.map(v=>e.jsx("option",{value:v,children:v.charAt(0).toUpperCase()+v.slice(1)},v))]})]})]})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Suppliers"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.length})]}),e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsx(I,{icon:Ri,className:"text-blue-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Active Suppliers"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:o.filter(v=>v.status==="active").length})]}),e.jsx("div",{className:"bg-green-100 p-2 rounded",children:e.jsx(I,{icon:cr,className:"text-green-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-lg font-semibold text-blue-600",children:o.reduce((v,N)=>v+N.totalOrders,0)})]}),e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsx(I,{icon:lE,className:"text-blue-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Spent"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:p(o.reduce((v,N)=>v+N.totalSpent,0))})]}),e.jsx("div",{className:"bg-green-100 p-2 rounded",children:e.jsx(I,{icon:Oh,className:"text-green-600 text-sm"})})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(v=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:v.name}),e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${h(v.category)}`,children:v.category}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m(v.status)}`,children:v.status.charAt(0).toUpperCase()+v.status.slice(1)})]}),e.jsxs("div",{className:"flex items-center mb-2",children:[y(v.rating),e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",v.rating,")"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{to:`/dashboard/procurement/suppliers/${v.id}`,className:"text-blue-600 hover:text-blue-900",title:"View Details",children:e.jsx(I,{icon:qa})}),e.jsx(ss,{to:`/dashboard/procurement/suppliers/${v.id}/edit`,className:"text-green-600 hover:text-green-900",title:"Edit Supplier",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",title:"Delete Supplier",children:e.jsx(I,{icon:sa})})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(I,{icon:Js,className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{children:v.contactPerson})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(I,{icon:nE,className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{children:v.email})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(I,{icon:$N,className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{children:v.phone})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(I,{icon:lu,className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{className:"truncate",children:v.address})]}),v.website&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(I,{icon:wF,className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{children:v.website})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Total Orders"}),e.jsx("p",{className:"font-medium text-gray-900",children:v.totalOrders})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Total Spent"}),e.jsx("p",{className:"font-medium text-gray-900",children:p(v.totalSpent)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Last Order"}),e.jsx("p",{className:"font-medium text-gray-900",children:new Date(v.lastOrder).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Rating"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[v.rating,"/5"]})]})]})})]},v.id))}),g.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:ua,className:"text-gray-400 text-4xl mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No suppliers found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your search criteria or filters."})]})]})]})},Mue=()=>{const[t,a]=x.useState(""),[r,s]=x.useState("all"),[n,i]=x.useState("all"),o=[{id:"PO-2025-001",supplier:"ABC Office Supplies",contactPerson:"John Smith",orderDate:"2025-01-10",expectedDelivery:"2025-01-20",actualDelivery:"2025-01-18",status:"delivered",totalAmount:2500,items:[{name:"Printer Paper",quantity:50,unitPrice:25,total:1250},{name:"Pens",quantity:200,unitPrice:2.5,total:500},{name:"Notebooks",quantity:100,unitPrice:7.5,total:750}],notes:"Delivered 2 days early. All items in good condition."},{id:"PO-2025-002",supplier:"Tech Solutions Inc",contactPerson:"Sarah Johnson",orderDate:"2025-01-12",expectedDelivery:"2025-01-25",actualDelivery:null,status:"in_transit",totalAmount:15e3,items:[{name:"Laptops",quantity:10,unitPrice:1200,total:12e3},{name:"Monitors",quantity:10,unitPrice:300,total:3e3}],notes:"Order confirmed. Items being prepared for shipment."},{id:"PO-2025-003",supplier:"Lab Equipment Pro",contactPerson:"Dr. Michael Brown",orderDate:"2025-01-08",expectedDelivery:"2025-01-15",actualDelivery:"2025-01-15",status:"delivered",totalAmount:8500,items:[{name:"Microscopes",quantity:5,unitPrice:1200,total:6e3},{name:"Test Tubes",quantity:500,unitPrice:5,total:2500}],notes:"Delivered on time. Equipment tested and working properly."},{id:"PO-2025-004",supplier:"Sports Equipment Co",contactPerson:"Coach Wilson",orderDate:"2025-01-05",expectedDelivery:"2025-01-12",actualDelivery:null,status:"pending",totalAmount:4500,items:[{name:"Basketballs",quantity:20,unitPrice:50,total:1e3},{name:"Soccer Balls",quantity:15,unitPrice:40,total:600},{name:"Volleyball Nets",quantity:4,unitPrice:200,total:800},{name:"Tennis Rackets",quantity:30,unitPrice:70,total:2100}],notes:"Order submitted. Awaiting supplier confirmation."},{id:"PO-2025-005",supplier:"Maintenance Tools Ltd",contactPerson:"Robert Garcia",orderDate:"2025-01-09",expectedDelivery:"2025-01-16",actualDelivery:"2025-01-14",status:"delivered",totalAmount:1800,items:[{name:"Power Drills",quantity:3,unitPrice:300,total:900},{name:"Tool Sets",quantity:5,unitPrice:180,total:900}],notes:"Delivered early. All tools in excellent condition."},{id:"PO-2025-006",supplier:"Book World Publishers",contactPerson:"Emily Davis",orderDate:"2025-01-11",expectedDelivery:"2025-01-22",actualDelivery:null,status:"confirmed",totalAmount:3200,items:[{name:"Textbooks",quantity:100,unitPrice:25,total:2500},{name:"Reference Books",quantity:20,unitPrice:35,total:700}],notes:"Order confirmed by supplier. Processing for shipment."}],c=["ABC Office Supplies","Tech Solutions Inc","Lab Equipment Pro","Sports Equipment Co","Maintenance Tools Ltd","Book World Publishers"],u=["pending","confirmed","in_transit","delivered","cancelled"],m=v=>{switch(v){case"pending":return"text-yellow-600 bg-yellow-100";case"confirmed":return"text-blue-600 bg-blue-100";case"in_transit":return"text-purple-600 bg-purple-100";case"delivered":return"text-green-600 bg-green-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},h=v=>{switch(v){case"pending":return Wn;case"confirmed":return cr;case"in_transit":return hg;case"delivered":return cr;case"cancelled":return Ma;default:return Ma}},p=v=>{switch(v){case"pending":return"Pending";case"confirmed":return"Confirmed";case"in_transit":return"In Transit";case"delivered":return"Delivered";case"cancelled":return"Cancelled";default:return v}},y=v=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(v),g=o.filter(v=>{const N=v.id.toLowerCase().includes(t.toLowerCase())||v.supplier.toLowerCase().includes(t.toLowerCase())||v.contactPerson.toLowerCase().includes(t.toLowerCase()),w=r==="all"||v.status===r,j=n==="all"||v.supplier===n;return N&&w&&j});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Purchase Orders"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Track orders and deliveries"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{className:"bg-gray-600 text-white px-3 py-1.5 hover:bg-gray-700 flex items-center space-x-2 text-xs font-medium",children:[e.jsx(I,{icon:fi}),e.jsx("span",{children:"Export"})]}),e.jsxs("button",{className:"bg-gray-600 text-white px-3 py-1.5 hover:bg-gray-700 flex items-center space-x-2 text-xs font-medium",children:[e.jsx(I,{icon:Mi}),e.jsx("span",{children:"Print"})]}),e.jsxs(ss,{to:"/dashboard/procurement/purchase-orders/new",className:"bg-blue-600 text-white px-4 py-2 hover:bg-blue-700 flex items-center space-x-2 text-sm font-medium rounded-md",children:[e.jsx(I,{icon:Ht}),e.jsx("span",{children:"New Order"})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-6 py-3",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(I,{icon:ua,className:"text-gray-400 text-xs"})}),e.jsx("input",{type:"text",placeholder:"Search orders...",value:t,onChange:v=>a(v.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Es,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Status:"}),e.jsxs("select",{value:r,onChange:v=>s(v.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 rounded",children:[e.jsx("option",{value:"all",children:"All Status"}),u.map(v=>e.jsx("option",{value:v,children:p(v)},v))]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{icon:Es,className:"text-gray-400 text-xs"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Supplier:"}),e.jsxs("select",{value:n,onChange:v=>i(v.target.value),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:border-gray-400 rounded",children:[e.jsx("option",{value:"all",children:"All Suppliers"}),c.map(v=>e.jsx("option",{value:v,children:v},v))]})]})]})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Orders"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.length})]}),e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsx(I,{icon:BN,className:"text-blue-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-lg font-semibold text-yellow-600",children:o.filter(v=>v.status==="pending").length})]}),e.jsx("div",{className:"bg-yellow-100 p-2 rounded",children:e.jsx(I,{icon:Wn,className:"text-yellow-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"In Transit"}),e.jsx("p",{className:"text-lg font-semibold text-purple-600",children:o.filter(v=>v.status==="in_transit").length})]}),e.jsx("div",{className:"bg-purple-100 p-2 rounded",children:e.jsx(I,{icon:hg,className:"text-purple-600 text-sm"})})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Delivered"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:o.filter(v=>v.status==="delivered").length})]}),e.jsx("div",{className:"bg-green-100 p-2 rounded",children:e.jsx(I,{icon:cr,className:"text-green-600 text-sm"})})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-base font-semibold text-gray-900",children:["Purchase Orders (",g.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expected Delivery"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(v=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.id})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.supplier}),e.jsx("div",{className:"text-sm text-gray-500",children:v.contactPerson})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:new Date(v.orderDate).toLocaleDateString()})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:new Date(v.expectedDelivery).toLocaleDateString()}),v.actualDelivery&&e.jsxs("div",{className:"text-xs text-green-600",children:["Delivered: ",new Date(v.actualDelivery).toLocaleDateString()]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:y(v.totalAmount)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m(v.status)}`,children:[e.jsx(I,{icon:h(v.status),className:"mr-1"}),p(v.status)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{to:`/dashboard/procurement/purchase-orders/${v.id}`,className:"text-blue-600 hover:text-blue-900",title:"View Details",children:e.jsx(I,{icon:qa})}),e.jsx(ss,{to:`/dashboard/procurement/purchase-orders/${v.id}/edit`,className:"text-green-600 hover:text-green-900",title:"Edit Order",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",title:"Cancel Order",children:e.jsx(I,{icon:sa})})]})})]},v.id))})]})}),g.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:ua,className:"text-gray-400 text-4xl mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your search criteria or filters."})]})]})]})]})},Rue=()=>{const{token:t}=At(),a=Da(),[r,s]=x.useState(!1),[n,i]=x.useState(null),[o,c]=x.useState({total_employees:0,current_month_payroll:0,pending_payslips:0,processed_payslips:0}),[u,m]=x.useState([]),[h,p]=x.useState(!1),[y,g]=x.useState(!1),[v,N]=x.useState(null),[w,j]=x.useState(!1),[T,k]=x.useState(!1),[R,P]=x.useState(null),[$,A]=x.useState([]),[M,_]=x.useState([]),[B,D]=x.useState(!1),[C,L]=x.useState({bank_name:"",account_number:"",currency:"KES"}),[H,V]=x.useState({employee_id:"",pay_period:new Date().toISOString().slice(0,7),pay_date:new Date().toISOString().split("T")[0],currency:"KES",payment_method:"bank",bank_account_id:"",notes:""}),[Y,J]=x.useState([{id:1,label:"Basic Salary",amount:"",currency:"KES"}]),[W,X]=x.useState([{id:1,label:"PAYE Tax",amount:"",currency:"KES"}]),[te,oe]=x.useState(""),[q,G]=x.useState(""),[z,Z]=x.useState(""),[Q,fe]=x.useState(1),[he,ne]=x.useState(1),[me,pe]=x.useState(0),[ie]=x.useState(25),[ke,Ae]=x.useState({pay_period:new Date().toISOString().slice(0,7),pay_date:new Date().toISOString().split("T")[0],bank_account_id:"",payment_method:"Bank Transfer",reference:"",notes:""}),ae=()=>{const ze=new Date,Mt=ze.getFullYear(),oa=String(ze.getMonth()+1).padStart(2,"0"),ca=String(ze.getDate()).padStart(2,"0"),Ka=String(ze.getHours()).padStart(2,"0")+String(ze.getMinutes()).padStart(2,"0");return`PAY-${Mt}${oa}${ca}-${Ka}`},[Ne,ce]=x.useState([]),[De,ye]=x.useState([]),[Ee,Ke]=x.useState([]),Re=t?{Authorization:`Bearer ${t}`}:{};x.useEffect(()=>{Le(),Oe(),$e()},[]),x.useEffect(()=>{H.employee_id&&w?ct(H.employee_id):_([])},[H.employee_id,w]),x.useEffect(()=>{Xe()},[Q,q,z]);const Le=async()=>{try{s(!0),i(null);const ze=await re.get(`${se}/payroll/summary`,{headers:Re});ze.data.success?(c({total_employees:ze.data.data.total_employees,current_month_payroll:ze.data.data.current_month_payroll,pending_payslips:ze.data.data.pending_payslips,processed_payslips:ze.data.data.processed_payslips}),m(ze.data.data.recent_payrolls||[]),Ke(ze.data.data.currencies||[])):i("Failed to load payroll data")}catch(ze){console.error("Error loading payroll data:",ze),i("Failed to load payroll data")}finally{s(!1)}},Oe=async()=>{try{const ze=await re.get(`${se}/payroll/bank-accounts`,{headers:Re});ze.data.success?ce(ze.data.data):i("Failed to load bank accounts")}catch(ze){console.error("Error loading bank accounts:",ze),i("Failed to load bank accounts")}},$e=async()=>{try{const ze=await re.get(`${se}/employees`,{headers:Re});ze.data.success&&A(ze.data.data||[])}catch(ze){console.error("Error loading employees:",ze)}},ct=async ze=>{try{if(!ze){_([]),D(!1);return}const Mt=await re.get(`${se}/employees/${ze}/bank-accounts`,{headers:Re});Mt.data.success?(_(Mt.data.data.bankAccounts||[]),D((Mt.data.data.bankAccounts||[]).length===0)):(_([]),D(!0))}catch(Mt){console.error("Error loading employee bank accounts:",Mt),_([]),D(!0)}},Nt=async()=>{try{if(!C.bank_name||!C.account_number){P("Bank name and account number are required");return}k(!0),P(null);const ze=await re.post(`${se}/employees/${H.employee_id}/bank-accounts`,{bankName:C.bank_name,accountNumber:C.account_number,currency:C.currency,isPrimary:!0},{headers:Re});ze.data.success?(await ct(H.employee_id),V({...H,bank_account_id:ze.data.data.id}),L({bank_name:"",account_number:"",currency:"KES"}),D(!1)):P(ze.data.error||"Failed to add bank account")}catch(ze){console.error("Error adding bank account:",ze),P(ze.response?.data?.error||"Failed to add bank account")}finally{k(!1)}},jt=()=>{const ze=Math.max(...Y.map(Mt=>Mt.id),0)+1;J([...Y,{id:ze,label:"",amount:"",currency:H.currency}])},xt=ze=>{Y.length>1&&J(Y.filter(Mt=>Mt.id!==ze))},we=(ze,Mt,oa)=>{J(Y.map(ca=>ca.id===ze?{...ca,[Mt]:oa}:ca))},Ie=()=>{const ze=Math.max(...W.map(Mt=>Mt.id),0)+1;X([...W,{id:ze,label:"",amount:"",currency:H.currency}])},dt=ze=>{W.length>1&&X(W.filter(Mt=>Mt.id!==ze))},ut=(ze,Mt,oa)=>{X(W.map(ca=>ca.id===ze?{...ca,[Mt]:oa}:ca))},Te=()=>{const ze=Y.filter(oa=>oa.label.trim()&&oa.amount).reduce((oa,ca)=>oa+(parseFloat(ca.amount)||0),0),Mt=W.filter(oa=>oa.label.trim()&&oa.amount).reduce((oa,ca)=>oa+(parseFloat(ca.amount)||0),0);return ze-Mt},Ve=async()=>{try{if(!H.employee_id){P("Employee is required");return}if(H.payment_method==="bank"&&!H.bank_account_id){P("Bank account is required for bank transfer");return}const ze=Y.filter(ca=>ca.label.trim()&&ca.amount);if(ze.length===0){P("At least one earning item is required");return}k(!0),P(null);const Mt={...H,earnings:ze,deductions:W.filter(ca=>ca.label.trim()&&ca.amount)},oa=await re.post(`${se}/payroll/payslips`,Mt,{headers:Re});oa.data.success?(j(!1),Xe(),V({employee_id:"",pay_period:new Date().toISOString().slice(0,7),pay_date:new Date().toISOString().split("T")[0],currency:"KES",payment_method:"bank",bank_account_id:"",notes:""}),J([{id:1,label:"Basic Salary",amount:"",currency:"KES"}]),X([{id:1,label:"PAYE Tax",amount:"",currency:"KES"}]),_([]),D(!1),L({bank_name:"",account_number:"",currency:"KES"})):P(oa.data.message||"Failed to create payslip")}catch(ze){console.error("Error creating payslip:",ze),P(ze.response?.data?.message||"Failed to create payslip")}finally{k(!1)}},qe=()=>{j(!1),P(null),V({employee_id:"",pay_period:new Date().toISOString().slice(0,7),pay_date:new Date().toISOString().split("T")[0],currency:"KES",payment_method:"bank",bank_account_id:"",notes:""}),J([{id:1,label:"Basic Salary",amount:"",currency:"KES"}]),X([{id:1,label:"PAYE Tax",amount:"",currency:"KES"}]),_([]),D(!1)},Xe=async()=>{try{const ze=new URLSearchParams({page:Q,limit:ie});q&&ze.append("search",q),z&&ze.append("status",z);const Mt=await re.get(`${se}/payroll/payslips?${ze}`,{headers:Re});Mt.data.success?(ye(Mt.data.data||[]),Mt.data.pagination?(ne(Mt.data.pagination.pages||1),pe(Mt.data.pagination.total||0)):(pe(Mt.data.data?.length||0),ne(1))):i("Failed to load payslips")}catch(ze){console.error("Error loading payslips:",ze),i("Failed to load payslips")}},We=ze=>{ze.preventDefault(),G(te),fe(1)},Ge=async()=>{try{if(!ke.bank_account_id){i("Please select a bank account");return}s(!0),i(null);const ze=await re.post(`${se}/payroll/runs/run`,ke,{headers:Re});ze.data.success?(p(!1),N(ze.data.data),g(!0),Le(),Xe()):i(ze.data.message||"Failed to run payroll")}catch(ze){console.error("Error running payroll:",ze),i("Failed to run payroll")}finally{s(!1)}},lt=(ze,Mt="USD")=>{if(!Ee.find(Ka=>Ka.code===Mt))return new Intl.NumberFormat("en-US",{style:"currency",currency:Mt,minimumFractionDigits:0}).format(ze);let ca="en-US";return Mt==="USD"?ca="en-US":Mt==="EUR"?ca="en-EU":Mt==="GBP"?ca="en-GB":Mt==="KES"&&(ca="en-KE"),new Intl.NumberFormat(ca,{style:"currency",currency:Mt,minimumFractionDigits:0}).format(ze)},Dt=ze=>new Date(ze).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),It=De.length>0?(Q-1)*ie+1:0,Bt=Math.min(Q*ie,me);return r&&De.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading payslips..."})}):e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Payroll Management"}),e.jsx("p",{className:"report-subtitle",children:"Manage employee payslips and process payroll."})]}),e.jsxs("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsxs("button",{onClick:()=>{Ae(ze=>({...ze,reference:ae()})),p(!0)},style:{background:"#10b981",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",fontSize:"0.75rem",fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Dh}),"Run Payroll"]}),e.jsxs("button",{onClick:()=>j(!0),style:{background:"#2563eb",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",fontSize:"0.75rem",fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Ht}),"Create Payslip"]})]})]}),e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsxs("div",{className:"report-filters-left",children:[e.jsx("form",{onSubmit:We,className:"filter-group",children:e.jsxs("div",{className:"search-input-wrapper",style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:ua,className:"search-icon"}),e.jsx("input",{type:"text",value:te,onChange:ze=>oe(ze.target.value),placeholder:"Search by employee name or ID...",className:"filter-input search-input"}),te&&e.jsx("button",{onClick:()=>{oe(""),G(""),fe(1)},style:{position:"absolute",right:"8px",padding:"4px 6px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},title:"Clear search",children:""})]})}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Status:"}),e.jsxs("select",{value:z,onChange:ze=>{Z(ze.target.value),fe(1)},className:"filter-input",style:{minWidth:"120px",width:"120px"},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processed",children:"Processed"})]}),z&&e.jsx("button",{onClick:()=>{Z(""),fe(1)},style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear status filter",children:""})]})]})}),n&&e.jsx("div",{style:{padding:"10px 30px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem"},children:n}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:r&&De.length===0?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading payslips..."}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"EMPLOYEE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"PAY PERIOD"}),e.jsx("th",{style:{padding:"6px 10px"},children:"GROSS PAY"}),e.jsx("th",{style:{padding:"6px 10px"},children:"DEDUCTIONS"}),e.jsx("th",{style:{padding:"6px 10px"},children:"NET PAY"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STATUS"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[De.map((ze,Mt)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:Mt%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:ze.employee_name}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:ze.employee_id})]})}),e.jsx("td",{style:{padding:"4px 10px"},children:ze.pay_period}),e.jsx("td",{style:{padding:"4px 10px"},children:lt(ze.total_earnings,ze.currency)}),e.jsx("td",{style:{padding:"4px 10px",color:"#dc2626"},children:lt(ze.total_deductions,ze.currency)}),e.jsx("td",{style:{padding:"4px 10px",fontWeight:600,color:"#10b981"},children:lt(ze.net_pay,ze.currency)}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsx("span",{style:{padding:"2px 8px",fontSize:"0.7rem",fontWeight:500,borderRadius:"4px",backgroundColor:ze.status==="processed"?"#d1fae5":"#fef3c7",color:ze.status==="processed"?"#065f46":"#92400e"},children:ze.status==="processed"?"Processed":"Pending"})}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsx("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:e.jsx("button",{onClick:()=>a(`/dashboard/payroll/payslips/${ze.id}`),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0},title:"View",children:e.jsx(I,{icon:qa})})})})]},ze.id)),Array.from({length:Math.max(0,25-De.length)}).map((ze,Mt)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(De.length+Mt)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${Mt}`))]})]})}),e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",It," to ",Bt," of ",me||0," results."]}),e.jsxs("div",{className:"table-footer-right",children:[!q&&he>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>fe(Math.max(1,Q-1)),disabled:Q===1,children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",Q," of ",he]}),e.jsx("button",{className:"pagination-btn",onClick:()=>fe(Math.min(he,Q+1)),disabled:Q===he,children:"Next"})]}),!q&&he<=1&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"All data displayed"})]})]}),w&&e.jsx("div",{className:"modal-overlay",onClick:qe,children:e.jsxs("div",{className:"modal-dialog",onClick:ze=>ze.stopPropagation(),style:{maxWidth:"900px",width:"90vw",maxHeight:"95vh"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Create Payslip"}),e.jsx("button",{className:"modal-close-btn",onClick:qe,children:e.jsx(I,{icon:Wt})})]}),e.jsxs("div",{className:"modal-body",style:{maxHeight:"85vh",overflowY:"auto"},children:[R&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:R}),e.jsxs("form",{onSubmit:ze=>{ze.preventDefault(),Ve()},className:"modal-form",children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Cr,style:{color:"#2563eb"}}),"Employee & Pay Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Employee ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{className:"form-control",value:H.employee_id,onChange:ze=>V({...H,employee_id:ze.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Employee"}),$.map(ze=>e.jsxs("option",{value:ze.id,children:[ze.name||ze.Name," - ",ze.employee_id||ze.EmployeeID||ze.id]},ze.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Pay Period ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"month",className:"form-control",value:H.pay_period,onChange:ze=>V({...H,pay_period:ze.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Pay Date ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"date",className:"form-control",value:H.pay_date,onChange:ze=>V({...H,pay_date:ze.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("select",{className:"form-control",value:H.currency,onChange:ze=>{V({...H,currency:ze.target.value}),J(Y.map(Mt=>({...Mt,currency:Mt.target.value}))),X(W.map(Mt=>({...Mt,currency:ze.target.value})))},required:!0,children:Ee.map(ze=>e.jsxs("option",{value:ze.code,children:[ze.code," - ",ze.name]},ze.code))})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Payment Method ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{className:"form-control",value:H.payment_method,onChange:ze=>V({...H,payment_method:ze.target.value}),required:!0,children:[e.jsx("option",{value:"bank",children:"Bank Transfer"}),e.jsx("option",{value:"cash",children:"Cash"})]})]}),H.payment_method==="bank"&&e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Bank Account ",e.jsx("span",{className:"required",children:"*"})]}),M.length>0?e.jsxs("select",{className:"form-control",value:H.bank_account_id,onChange:ze=>V({...H,bank_account_id:ze.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Bank Account"}),M.map(ze=>e.jsxs("option",{value:ze.id,children:[ze.bankName," - ",ze.accountNumber]},ze.id))]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"No bank accounts found. Add one below:"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr auto",gap:"8px",alignItems:"end"},children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Bank Name",value:C.bank_name,onChange:ze=>L({...C,bank_name:ze.target.value})}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Account Number",value:C.account_number,onChange:ze=>L({...C,account_number:ze.target.value})}),e.jsx("select",{className:"form-control",value:C.currency,onChange:ze=>L({...C,currency:ze.target.value}),children:Ee.map(ze=>e.jsx("option",{value:ze.code,children:ze.code},ze.code))}),e.jsx("button",{type:"button",onClick:Nt,disabled:T,className:"modal-btn",style:{background:"#10b981",color:"white",padding:"6px 12px",whiteSpace:"nowrap"},children:"Add"})]})]})]})]})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Bl,style:{color:"#10b981"}}),"Earnings"]}),e.jsxs("button",{type:"button",onClick:jt,className:"modal-btn",style:{background:"#10b981",color:"white",padding:"6px 12px",fontSize:"0.7rem"},children:[e.jsx(I,{icon:Ht,style:{marginRight:"4px"}}),"Add Earning"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:Y.map(ze=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr auto",gap:"12px",alignItems:"center"},children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Earning description",value:ze.label,onChange:Mt=>we(ze.id,"label",Mt.target.value)}),e.jsx("input",{type:"number",className:"form-control",placeholder:"Amount",value:ze.amount,onChange:Mt=>we(ze.id,"amount",Mt.target.value),step:"0.01",min:"0"}),e.jsx("button",{type:"button",onClick:()=>xt(ze.id),disabled:Y.length===1,style:{background:Y.length===1?"#e5e7eb":"#dc2626",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:Y.length===1?"not-allowed":"pointer",fontSize:"0.7rem"},children:e.jsx(I,{icon:sa})})]},ze.id))})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:sE,style:{color:"#dc2626"}}),"Deductions"]}),e.jsxs("button",{type:"button",onClick:Ie,className:"modal-btn",style:{background:"#dc2626",color:"white",padding:"6px 12px",fontSize:"0.7rem"},children:[e.jsx(I,{icon:Ht,style:{marginRight:"4px"}}),"Add Deduction"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:W.map(ze=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr auto",gap:"12px",alignItems:"center"},children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Deduction description",value:ze.label,onChange:Mt=>ut(ze.id,"label",Mt.target.value)}),e.jsx("input",{type:"number",className:"form-control",placeholder:"Amount",value:ze.amount,onChange:Mt=>ut(ze.id,"amount",Mt.target.value),step:"0.01",min:"0"}),e.jsx("button",{type:"button",onClick:()=>dt(ze.id),disabled:W.length===1,style:{background:W.length===1?"#e5e7eb":"#dc2626",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:W.length===1?"not-allowed":"pointer",fontSize:"0.7rem"},children:e.jsx(I,{icon:sa})})]},ze.id))})]}),e.jsx("div",{style:{marginBottom:"24px",padding:"16px",background:"#f3f4f6",borderRadius:"4px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)"},children:"Net Pay:"}),e.jsx("span",{style:{fontSize:"1rem",fontWeight:700,color:"#10b981"},children:lt(Te(),H.currency)})]})}),e.jsxs("div",{className:"form-group",style:{marginBottom:"24px"},children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{className:"form-control",rows:"3",placeholder:"Additional notes...",value:H.notes,onChange:ze=>V({...H,notes:ze.target.value})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:qe,className:"modal-btn modal-btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:T,className:"modal-btn modal-btn-primary",style:{background:"#2563eb",color:"white",border:"none"},children:T?"Creating...":"Create Payslip"})]})]})]})]})}),h&&e.jsx("div",{className:"modal-overlay",onClick:()=>p(!1),children:e.jsxs("div",{className:"modal-dialog",onClick:ze=>ze.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Run Payroll"}),e.jsx("button",{className:"modal-close-btn",onClick:()=>p(!1),children:e.jsx(I,{icon:Wt})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{style:{background:"#fef3c7",border:"1px solid #fbbf24",padding:"12px",borderRadius:"4px",marginBottom:"16px"},children:e.jsxs("p",{style:{fontSize:"0.75rem",color:"#92400e"},children:[e.jsx("strong",{children:"Warning:"})," This will process all pending payslips, create bank transactions, and update accounting entries. This action cannot be undone."]})}),e.jsxs("form",{className:"modal-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Pay Period"}),e.jsx("input",{type:"month",value:ke.pay_period,onChange:ze=>Ae({...ke,pay_period:ze.target.value}),className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Pay Date"}),e.jsx("input",{type:"date",value:ke.pay_date,onChange:ze=>Ae({...ke,pay_date:ze.target.value}),className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Bank Account *"}),e.jsxs("select",{value:ke.bank_account_id,onChange:ze=>Ae({...ke,bank_account_id:ze.target.value}),className:"form-control",children:[e.jsx("option",{value:"",children:"Select Bank Account"}),Ne.map(ze=>e.jsxs("option",{value:ze.id,children:[ze.name," - ",lt(ze.balance,ze.currency)]},ze.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Payment Method"}),e.jsxs("select",{value:ke.payment_method,onChange:ze=>Ae({...ke,payment_method:ze.target.value}),className:"form-control",children:[e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Cheque",children:"Cheque"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Reference (Auto-generated)"}),e.jsx("input",{type:"text",value:ke.reference,onChange:ze=>Ae({...ke,reference:ze.target.value}),placeholder:"Auto-generated reference",className:"form-control",style:{background:"#f9fafb"},readOnly:!0}),e.jsx("p",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginTop:"4px"},children:"Reference is automatically generated for tracking"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{value:ke.notes,onChange:ze=>Ae({...ke,notes:ze.target.value}),rows:"3",className:"form-control"})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:()=>p(!1),className:"modal-btn modal-btn-secondary",children:"Cancel"}),e.jsx("button",{type:"button",onClick:Ge,disabled:r,className:"modal-btn modal-btn-primary",style:{background:"#10b981",color:"white",border:"none"},children:r?"Processing...":"Run Payroll"})]})]})]})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-6 w-full max-w-md mx-4 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:e.jsx(I,{icon:Hn,className:"text-green-600 text-lg"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Payroll Processed Successfully!"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-2 mb-6",children:[v&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Payroll Run ID:"})," #",v.payroll_run_id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payslips Processed:"})," ",v.payslips_processed]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Amount:"})," ",lt(v.total_amount,"USD")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pay Period:"})," ",v.pay_period]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pay Date:"})," ",Dt(v.pay_date)]})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 p-3 rounded mt-4",children:e.jsxs("p",{className:"text-xs text-green-800",children:[e.jsx("strong",{children:""})," Bank transactions created",e.jsx("br",{}),e.jsx("strong",{children:""})," Accounting entries updated",e.jsx("br",{}),e.jsx("strong",{children:""})," Account balances updated",e.jsx("br",{}),e.jsx("strong",{children:""})," Payslips marked as processed"]})})]}),e.jsx("button",{onClick:()=>g(!1),className:"w-full bg-green-600 text-white px-4 py-2 text-sm font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Continue"})]})})})]})},Iue=()=>{const{token:t}=At(),a=Da(),[r]=Z7(),[s,n]=x.useState(!1),[i,o]=x.useState(null),[c,u]=x.useState([]),[m,h]=x.useState(""),[p,y]=x.useState(""),[g,v]=x.useState(r.get("period")||""),[N,w]=x.useState("all"),[j,T]=x.useState(!1),[k,R]=x.useState(null),[P,$]=x.useState([]),[A,M]=x.useState(1),[_,B]=x.useState(1),[D,C]=x.useState(0),[L]=x.useState(25),H=t?{Authorization:`Bearer ${t}`}:{};x.useEffect(()=>{J()},[]),x.useEffect(()=>{V()},[A,p,g,N]);const V=async()=>{try{n(!0),o(null);const Z=new URLSearchParams({page:A,limit:L});p&&Z.append("search",p),g&&Z.append("pay_period",g),N&&N!=="all"&&Z.append("department",N);const Q=await re.get(`${se}/payroll/payslips?${Z}`,{headers:H});Q.data.success?(u(Q.data.data||[]),Q.data.pagination?(B(Q.data.pagination.pages||1),C(Q.data.pagination.total||0)):(C(Q.data.data?.length||0),B(1))):o("Failed to load payslips")}catch{o("Failed to load payslips")}finally{n(!1)}},Y=Z=>{Z.preventDefault(),y(m),M(1)},J=async()=>{try{const Z=await re.get(`${se}/accounting/currencies`,{headers:H});Z.data.success?$(Z.data.data):o("Failed to load currencies")}catch(Z){console.error("Error loading currencies:",Z),o("Failed to load currencies")}},W=c.length>0?(A-1)*L+1:0,X=Math.min(A*L,D),te=async Z=>{try{n(!0);const Q=await re.get(`${se}/payroll/payslips/${Z.id}`,{headers:H});Q.data.success?(R(Q.data.data),T(!0)):o("Failed to load payslip details")}catch(Q){console.error("Error loading payslip details:",Q),o("Failed to load payslip details")}finally{n(!1)}},oe=async Z=>{try{const Q=new ia;Q.setFont("helvetica"),Q.setFontSize(12);const fe=new Image;fe.src=hj,Q.addImage(fe,"PNG",20,15,25,18),Q.setFontSize(10),Q.setFont("helvetica","bold"),Q.text(Z.employee_name,20,38),Q.setFont("helvetica","normal"),Q.text(`Employee ID: ${Z.employee_id}`,20,44),Q.text(`Department: ${Z.department_name||"No Department"}`,20,50),Q.text(`Job Title: ${Z.job_title||"No Job Title"}`,20,56),Q.setFontSize(9),Q.setFont("helvetica","bold"),Q.text("PAY DATE",140,38),Q.setFont("helvetica","normal"),Q.setFontSize(8),Q.text(z(Z.pay_date),140,44),Q.setFont("helvetica","bold"),Q.setFontSize(9),Q.text("PAY PERIOD",140,50),Q.setFont("helvetica","normal"),Q.setFontSize(8),Q.text(Z.pay_period,140,56),Q.setFont("helvetica","bold"),Q.setFontSize(9),Q.text("PAYSLIP #",140,62),Q.setFont("helvetica","normal"),Q.setFontSize(8),Q.text(Z.id.toString(),140,68);let he=75;Q.setFontSize(10),Q.setFont("helvetica","bold"),Q.setFillColor(75,85,99),Q.rect(20,he,170,8,"F"),Q.setTextColor(255,255,255),Q.text("EARNINGS",25,he+6),Q.setTextColor(0,0,0),he+=15,Q.setFillColor(229,231,235),Q.rect(20,he,170,8,"F"),Q.setFont("helvetica","bold"),Q.text("DESCRIPTION",25,he+6),Q.text("AMOUNT",150,he+6),he+=15,Q.setFont("helvetica","normal"),Z.earnings&&Z.earnings.length>0?(Z.earnings.forEach((ne,me)=>{Q.text(ne.label,25,he+6),Q.text(G(ne.amount,ne.currency),150,he+6),he+=10}),Q.setFillColor(243,244,246),Q.rect(20,he,170,8,"F"),Q.setFont("helvetica","bold"),Q.text("TOTAL EARNINGS",25,he+6),Q.text(G(Z.total_earnings,Z.currency),150,he+6),Q.setFont("helvetica","normal")):Q.text("No earnings recorded",25,he+6),he+=15,Q.setFontSize(10),Q.setFont("helvetica","bold"),Q.setFillColor(75,85,99),Q.rect(20,he,170,8,"F"),Q.setTextColor(255,255,255),Q.text("DEDUCTIONS",25,he+6),Q.setTextColor(0,0,0),he+=15,Q.setFillColor(229,231,235),Q.rect(20,he,170,8,"F"),Q.setFont("helvetica","bold"),Q.text("DESCRIPTION",25,he+6),Q.text("AMOUNT",150,he+6),he+=15,Q.setFont("helvetica","normal"),Z.deductions&&Z.deductions.length>0?(Z.deductions.forEach((ne,me)=>{Q.text(ne.label,25,he+6),Q.text(G(ne.amount,ne.currency),150,he+6),he+=10}),Q.setFillColor(243,244,246),Q.rect(20,he,170,8,"F"),Q.setFont("helvetica","bold"),Q.text("TOTAL DEDUCTIONS",25,he+6),Q.text(G(Z.total_deductions,Z.currency),150,he+6),Q.setFont("helvetica","normal")):Q.text("No deductions recorded",25,he+6),he+=15,Q.setFillColor(55,65,81),Q.rect(20,he,170,12,"F"),Q.setTextColor(255,255,255),Q.setFontSize(12),Q.setFont("helvetica","bold"),Q.text("NET PAY",25,he+8),Q.text(G(Z.net_pay,Z.currency),150,he+8),Q.setTextColor(0,0,0),Z.notes&&(he+=20,Q.setFillColor(249,250,251),Q.rect(20,he,170,15,"F"),Q.setFontSize(10),Q.setFont("helvetica","bold"),Q.text("Notes",25,he+6),Q.setFont("helvetica","normal"),Q.setFontSize(9),Q.text(Z.notes,25,he+15)),he+=25,Q.setFontSize(8),Q.text("If you have any questions about this payslip, please contact your HR department.",105,he,{align:"center"}),Q.text(`Generated on: ${new Date().toLocaleString()}`,105,he+10,{align:"center"}),Q.save(`payslip-${Z.employee_id}-${Z.pay_period}.pdf`)}catch(Q){console.error("Error generating PDF:",Q),o("Failed to generate PDF")}},q=Z=>{window.print()},G=(Z,Q="KES")=>P.find(he=>he.code===Q)?new Intl.NumberFormat("en-KE",{style:"currency",currency:Q,minimumFractionDigits:0}).format(Z):new Intl.NumberFormat("en-KE",{style:"currency",currency:Q,minimumFractionDigits:0}).format(Z),z=Z=>new Date(Z).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return s&&c.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading payslips..."})}):e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Employee Payslips"}),e.jsx("p",{className:"report-subtitle",children:"View and manage employee payslips."})]}),e.jsx("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"},children:e.jsx("button",{onClick:()=>a("/dashboard/payroll"),style:{background:"transparent",color:"var(--text-secondary)",border:"1px solid var(--border-color)",padding:"8px 16px",borderRadius:"4px",fontSize:"0.75rem",fontWeight:500,cursor:"pointer"},children:"Back to Payroll"})})]}),e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsxs("div",{className:"report-filters-left",children:[e.jsx("form",{onSubmit:Y,className:"filter-group",children:e.jsxs("div",{className:"search-input-wrapper",style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:ua,className:"search-icon"}),e.jsx("input",{type:"text",value:m,onChange:Z=>h(Z.target.value),placeholder:"Search by employee name or ID...",className:"filter-input search-input"}),m&&e.jsx("button",{onClick:()=>{h(""),y(""),M(1)},style:{position:"absolute",right:"8px",padding:"4px 6px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},title:"Clear search",children:""})]})}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Period:"}),e.jsx("input",{type:"month",value:g,onChange:Z=>{v(Z.target.value),M(1)},className:"filter-input",style:{minWidth:"150px",width:"150px"}}),g&&e.jsx("button",{onClick:()=>{v(""),M(1)},style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear period filter",children:""})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Department:"}),e.jsxs("select",{value:N,onChange:Z=>{w(Z.target.value),M(1)},className:"filter-input",style:{minWidth:"150px",width:"150px"},children:[e.jsx("option",{value:"all",children:"All Departments"}),e.jsx("option",{value:"Teaching",children:"Teaching Staff"}),e.jsx("option",{value:"Administration",children:"Administration"}),e.jsx("option",{value:"Support",children:"Support Staff"})]}),N!=="all"&&e.jsx("button",{onClick:()=>{w("all"),M(1)},style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear department filter",children:""})]})]})}),i&&e.jsx("div",{style:{padding:"10px 30px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem"},children:i}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:s&&c.length===0?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading payslips..."}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"EMPLOYEE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"DEPARTMENT"}),e.jsx("th",{style:{padding:"6px 10px"},children:"PAY PERIOD"}),e.jsx("th",{style:{padding:"6px 10px"},children:"GROSS PAY"}),e.jsx("th",{style:{padding:"6px 10px"},children:"DEDUCTIONS"}),e.jsx("th",{style:{padding:"6px 10px"},children:"NET PAY"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STATUS"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[c.map((Z,Q)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:Q%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:Z.employee_name}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:Z.employee_id})]})}),e.jsx("td",{style:{padding:"4px 10px"},children:Z.department_name||"No Department"}),e.jsx("td",{style:{padding:"4px 10px"},children:Z.pay_period}),e.jsx("td",{style:{padding:"4px 10px"},children:G(Z.total_earnings,Z.currency)}),e.jsx("td",{style:{padding:"4px 10px",color:"#dc2626"},children:G(Z.total_deductions,Z.currency)}),e.jsx("td",{style:{padding:"4px 10px",fontWeight:600,color:"#10b981"},children:G(Z.net_pay,Z.currency)}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsx("span",{style:{padding:"2px 8px",fontSize:"0.7rem",fontWeight:500,borderRadius:"4px",backgroundColor:Z.status==="processed"?"#d1fae5":"#fef3c7",color:Z.status==="processed"?"#065f46":"#92400e"},children:Z.status==="processed"?"Processed":"Pending"})}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>te(Z),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0},title:"View",children:e.jsx(I,{icon:qa})}),e.jsx("button",{onClick:()=>oe(Z),style:{color:"#10b981",background:"none",border:"none",cursor:"pointer",padding:0},title:"Download",children:e.jsx(I,{icon:fi})}),e.jsx("button",{onClick:()=>q(),style:{color:"#8b5cf6",background:"none",border:"none",cursor:"pointer",padding:0},title:"Print",children:e.jsx(I,{icon:Mi})})]})})]},Z.id)),Array.from({length:Math.max(0,25-c.length)}).map((Z,Q)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(c.length+Q)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${Q}`))]})]})}),e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",W," to ",X," of ",D||0," results."]}),e.jsxs("div",{className:"table-footer-right",children:[!p&&_>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>M(Math.max(1,A-1)),disabled:A===1,children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",A," of ",_]}),e.jsx("button",{className:"pagination-btn",onClick:()=>M(Math.min(_,A+1)),disabled:A===_,children:"Next"})]}),!p&&_<=1&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"All data displayed"})]})]}),j&&k&&e.jsx("div",{className:"modal-overlay",onClick:()=>T(!1),children:e.jsxs("div",{className:"modal-dialog",style:{maxWidth:"90vw",width:"90vw",maxHeight:"95vh"},onClick:Z=>Z.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Payslip Details"}),e.jsx("button",{className:"modal-close-btn",onClick:()=>T(!1),children:e.jsx(I,{icon:Wt})})]}),e.jsxs("div",{className:"modal-body",style:{maxHeight:"80vh",overflowY:"auto"},children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("img",{src:hj,alt:"Company Logo",className:"h-8 mb-2"}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:k.employee_name}),e.jsxs("div",{children:["Employee ID: ",k.employee_id]}),e.jsxs("div",{children:["Department: ",k.department_name||"No Department"]}),e.jsxs("div",{children:["Job Title: ",k.job_title||"No Job Title"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"PAY DATE"}),e.jsx("div",{children:z(k.pay_date)})]}),e.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"PAY PERIOD"}),e.jsx("div",{children:k.pay_period})]}),e.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:"PAYSLIP #"}),e.jsx("div",{children:k.id})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-gray-600 text-white font-bold p-2",children:"EARNINGS"}),e.jsxs("div",{className:"border border-gray-300",children:[e.jsxs("div",{className:"bg-gray-200 p-2 grid grid-cols-2 gap-4 font-semibold text-xs",children:[e.jsx("div",{children:"DESCRIPTION"}),e.jsx("div",{className:"text-right",children:"AMOUNT"})]}),k.earnings&&k.earnings.length>0?e.jsxs(e.Fragment,{children:[k.earnings.map((Z,Q)=>e.jsxs("div",{className:"p-2 border-b border-gray-200 grid grid-cols-2 gap-4 text-xs",children:[e.jsx("div",{children:Z.label}),e.jsx("div",{className:"text-right",children:G(Z.amount,Z.currency)})]},Q)),e.jsxs("div",{className:"bg-gray-100 p-2 grid grid-cols-2 gap-4 font-bold text-xs",children:[e.jsx("div",{children:"TOTAL EARNINGS"}),e.jsx("div",{className:"text-right",children:G(k.total_earnings,k.currency)})]})]}):e.jsx("div",{className:"p-2 text-xs text-gray-500",children:"No earnings recorded"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"bg-gray-600 text-white font-bold p-2",children:"DEDUCTIONS"}),e.jsxs("div",{className:"border border-gray-300",children:[e.jsxs("div",{className:"bg-gray-200 p-2 grid grid-cols-2 gap-4 font-semibold text-xs",children:[e.jsx("div",{children:"DESCRIPTION"}),e.jsx("div",{className:"text-right",children:"AMOUNT"})]}),k.deductions&&k.deductions.length>0?e.jsxs(e.Fragment,{children:[k.deductions.map((Z,Q)=>e.jsxs("div",{className:"p-2 border-b border-gray-200 grid grid-cols-2 gap-4 text-xs",children:[e.jsx("div",{children:Z.label}),e.jsx("div",{className:"text-right",children:G(Z.amount,Z.currency)})]},Q)),e.jsxs("div",{className:"bg-gray-100 p-2 grid grid-cols-2 gap-4 font-bold text-xs",children:[e.jsx("div",{children:"TOTAL DEDUCTIONS"}),e.jsx("div",{className:"text-right",children:G(k.total_deductions,k.currency)})]})]}):e.jsx("div",{className:"p-2 text-xs text-gray-500",children:"No deductions recorded"})]})]}),e.jsx("div",{className:"bg-gray-700 text-white font-bold p-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm",children:"NET PAY"}),e.jsx("div",{className:"text-sm",children:G(k.net_pay,k.currency)})]})}),k.notes&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-900 mb-1",children:"Notes"}),e.jsx("p",{className:"text-xs text-gray-600",children:k.notes})]}),e.jsx("div",{className:"mt-6 text-center text-xs text-gray-600",children:e.jsx("p",{children:"If you have any questions about this payslip, please contact your HR department."})}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-4 pt-3 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>oe(k),className:"px-3 py-1.5 bg-blue-600 text-white text-xs hover:bg-blue-700 flex items-center space-x-1",children:[e.jsx(I,{icon:fi}),e.jsx("span",{children:"Download Payslip"})]}),e.jsxs("button",{onClick:()=>q(),className:"px-3 py-1.5 bg-gray-600 text-white text-xs hover:bg-gray-700 flex items-center space-x-1",children:[e.jsx(I,{icon:Mi}),e.jsx("span",{children:"Print"})]})]})]})]})})]})},zue=()=>{const{token:t}=At(),a=Da(),[r,s]=x.useState(!1),[n,i]=x.useState(null),[o,c]=x.useState(null),[u,m]=x.useState({employee_id:"",pay_period:new Date().toISOString().slice(0,7),pay_date:new Date().toISOString().split("T")[0],currency:"KES",payment_method:"bank",bank_account_id:"",notes:""}),[h,p]=x.useState([{id:1,label:"Basic Salary",amount:"",currency:"KES"}]),[y,g]=x.useState([{id:1,label:"PAYE Tax",amount:"",currency:"KES"}]),[v,N]=x.useState([]),[w,j]=x.useState([]),[T,k]=x.useState(!1),[R,P]=x.useState([]),[$,A]=x.useState({bank_name:"",account_number:"",currency:"KES"}),M=t?{Authorization:`Bearer ${t}`}:{};x.useEffect(()=>{_(),B()},[]),x.useEffect(()=>{u.employee_id?D(u.employee_id):j([])},[u.employee_id]);const _=async()=>{try{const q=await re.get(`${se}/employees`,{headers:M});q.data.success?N(q.data.data):N([{id:1,name:"John Doe",employee_id:"EMP001",department:"Teaching",job_title:"Mathematics Teacher"},{id:2,name:"Jane Smith",employee_id:"EMP002",department:"Teaching",job_title:"English Teacher"},{id:3,name:"Mary Johnson",employee_id:"EMP003",department:"Administration",job_title:"Accountant"},{id:4,name:"Peter Wilson",employee_id:"EMP004",department:"Support",job_title:"IT Support"},{id:5,name:"Sarah Brown",employee_id:"EMP005",department:"Teaching",job_title:"Science Teacher"}])}catch(q){console.error("Error loading employees:",q),i("Failed to load employees")}},B=async()=>{try{const q=await re.get(`${se}/accounting/currencies`,{headers:M});q.data.success?P(q.data.data):i("Failed to load currencies")}catch(q){console.error("Error loading currencies:",q),i("Failed to load currencies")}},D=async q=>{try{if(!q){j([]),k(!1);return}const G=await re.get(`${se}/employees/${q}/bank-accounts`,{headers:M});G.data.success?(j(G.data.data.bankAccounts),k(G.data.data.bankAccounts.length===0)):(j([]),k(!0))}catch(G){console.error("Error loading employee bank accounts:",G),j([]),k(!0)}},C=async()=>{try{if(!$.bank_name||!$.account_number){i("Bank name and account number are required");return}s(!0),i(null);const q=await re.post(`${se}/employees/${u.employee_id}/bank-accounts`,{bankName:$.bank_name,accountNumber:$.account_number,currency:$.currency,isPrimary:!0},{headers:M});q.data.success?(await D(u.employee_id),m({...u,bank_account_id:q.data.data.id}),A({bank_name:"",account_number:"",currency:"KES"}),k(!1),c("Bank account added successfully!"),setTimeout(()=>{c(null)},3e3)):i(q.data.error||"Failed to add bank account")}catch(q){console.error("Error adding bank account:",q),i(q.response?.data?.error||"Failed to add bank account")}finally{s(!1)}},L=()=>{const q=Math.max(...h.map(G=>G.id),0)+1;p([...h,{id:q,label:"",amount:"",currency:"KES"}])},H=q=>{h.length>1&&p(h.filter(G=>G.id!==q))},V=(q,G,z)=>{p(h.map(Z=>Z.id===q?{...Z,[G]:z}:Z))},Y=()=>{const q=Math.max(...y.map(G=>G.id),0)+1;g([...y,{id:q,label:"",amount:"",currency:"KES"}])},J=q=>{y.length>1&&g(y.filter(G=>G.id!==q))},W=(q,G,z)=>{g(y.map(Z=>Z.id===q?{...Z,[G]:z}:Z))},X=async()=>{try{if(!u.employee_id){i("Employee is required");return}if(!u.payment_method){i("Payment method is required");return}if(u.payment_method==="bank"&&!u.bank_account_id){i("Bank account is required for bank transfer");return}const q=h.filter(Z=>Z.label.trim()&&Z.amount);if(q.length===0){i("At least one earning item is required");return}s(!0),i(null);const G={...u,earnings:q,deductions:y.filter(Z=>Z.label.trim()&&Z.amount)},z=await re.post(`${se}/payroll/payslips`,G,{headers:M});z.data.success?(c("Payslip created successfully!"),m({employee_id:"",pay_period:new Date().toISOString().slice(0,7),pay_date:new Date().toISOString().split("T")[0],currency:"KES",payment_method:"bank",bank_account_id:"",notes:""}),j([]),k(!1),A({bank_name:"",account_number:"",currency:"KES"}),p([{id:1,label:"Basic Salary",amount:"",currency:"KES"}]),g([{id:1,label:"PAYE Tax",amount:"",currency:"KES"}]),setTimeout(()=>{a("/dashboard/payroll")},2e3)):i(z.data.message||"Failed to create payslip")}catch(q){console.error("Error creating payslip:",q),i(q.response?.data?.message||"Failed to create payslip")}finally{s(!1)}},te=()=>{const q=h.filter(z=>z.label.trim()&&z.amount).reduce((z,Z)=>z+(parseFloat(Z.amount)||0),0),G=y.filter(z=>z.label.trim()&&z.amount).reduce((z,Z)=>z+(parseFloat(Z.amount)||0),0);return q-G},oe=(q,G)=>R.find(Z=>Z.code===G)?new Intl.NumberFormat("en-KE",{style:"currency",currency:G,minimumFractionDigits:0}).format(q):q;return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-medium text-gray-900",children:"Create Payslip"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter employee details and salary components"})]})})}),o&&e.jsx("div",{className:"bg-green-50 border border-green-200 p-3 text-xs text-green-700",children:o}),n&&e.jsx("div",{className:"bg-red-50 border border-red-200 p-3 text-xs text-red-700",children:n}),e.jsx("div",{className:"bg-white border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Basic Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Employee *"}),e.jsxs("select",{value:u.employee_id,onChange:q=>m({...u,employee_id:q.target.value}),className:"w-full border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Employee"}),v.map(q=>e.jsxs("option",{value:q.id,children:[q.full_name," - ",q.employee_id," (",q.department_name||"No Department",")"]},q.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Pay Period *"}),e.jsx("input",{type:"month",value:u.pay_period,onChange:q=>m({...u,pay_period:q.target.value}),className:"w-full border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Pay Date *"}),e.jsx("input",{type:"date",value:u.pay_date,onChange:q=>m({...u,pay_date:q.target.value}),className:"w-full border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Default Currency"}),e.jsx("select",{value:u.currency,onChange:q=>m({...u,currency:q.target.value}),className:"w-full border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:R.map(q=>e.jsxs("option",{value:q.code,children:[q.code," - ",q.name]},q.code))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Payment Method *"}),e.jsxs("select",{value:u.payment_method,onChange:q=>{m({...u,payment_method:q.target.value,bank_account_id:q.target.value==="cash"?"":u.bank_account_id})},className:"w-full border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"bank",children:"Bank Transfer"}),e.jsx("option",{value:"cash",children:"Cash Payment"})]})]}),u.payment_method==="bank"&&u.employee_id&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Bank Account *"}),w.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("select",{value:u.bank_account_id,onChange:q=>m({...u,bank_account_id:q.target.value}),className:"w-full border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Bank Account"}),w.map(q=>e.jsxs("option",{value:q.id,children:[q.bank_name," - ",q.account_number," (",q.currency,")"]},q.id))]}),e.jsxs("button",{onClick:()=>k(!0),className:"text-blue-600 hover:text-blue-800 text-xs flex items-center space-x-1",children:[e.jsx(I,{icon:Ht,className:"text-xs"}),e.jsx("span",{children:"Add New Bank Account"})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"No bank accounts found for this employee. Add a new one:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx("input",{type:"text",value:$.bank_name,onChange:q=>A({...$,bank_name:q.target.value}),placeholder:"Bank Name",className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})}),e.jsx("div",{children:e.jsx("input",{type:"text",value:$.account_number,onChange:q=>A({...$,account_number:q.target.value}),placeholder:"Account Number",className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("select",{value:$.currency,onChange:q=>A({...$,currency:q.target.value}),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:R.map(q=>e.jsx("option",{value:q.code,children:q.code},q.code))}),e.jsx("button",{onClick:C,disabled:r||!$.bank_name||!$.account_number,className:"px-3 py-1 bg-blue-600 text-white text-xs hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Adding...":"Add Account"})]})]}),T&&w.length>0&&e.jsxs("div",{className:"mt-3 p-3 border border-gray-200 rounded bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-700",children:"Add New Bank Account"}),e.jsx("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-gray-700 text-xs",children:e.jsx(I,{icon:Wt})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx("input",{type:"text",value:$.bank_name,onChange:q=>A({...$,bank_name:q.target.value}),placeholder:"Bank Name",className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})}),e.jsx("div",{children:e.jsx("input",{type:"text",value:$.account_number,onChange:q=>A({...$,account_number:q.target.value}),placeholder:"Account Number",className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx("select",{value:$.currency,onChange:q=>A({...$,currency:q.target.value}),className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:R.map(q=>e.jsx("option",{value:q.code,children:q.code},q.code))}),e.jsx("button",{onClick:C,disabled:r||!$.bank_name||!$.account_number,className:"px-3 py-1 bg-blue-600 text-white text-xs hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Adding...":"Add Account"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Earnings"}),e.jsxs("button",{onClick:L,className:"text-blue-600 hover:text-blue-800 text-xs flex items-center space-x-1",children:[e.jsx(I,{icon:Ht,className:"text-xs"}),e.jsx("span",{children:"Add Earning"})]})]}),e.jsx("div",{className:"space-y-3",children:h.map((q,G)=>e.jsxs("div",{className:"flex items-center space-x-2 p-3 border border-gray-200 rounded",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:q.label,onChange:z=>V(q.id,"label",z.target.value),placeholder:"Earning description",className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})}),e.jsx("div",{className:"w-24",children:e.jsx("select",{value:q.currency,onChange:z=>V(q.id,"currency",z.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:R.map(z=>e.jsx("option",{value:z.code,children:z.code},z.code))})}),e.jsx("div",{className:"w-32",children:e.jsx("input",{type:"number",value:q.amount,onChange:z=>V(q.id,"amount",z.target.value),placeholder:"0",className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})}),h.length>1&&e.jsx("button",{onClick:()=>H(q.id),className:"text-red-600 hover:text-red-800 text-xs",children:e.jsx(I,{icon:sa})})]},q.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Deductions"}),e.jsxs("button",{onClick:Y,className:"text-red-600 hover:text-red-800 text-xs flex items-center space-x-1",children:[e.jsx(I,{icon:Ht,className:"text-xs"}),e.jsx("span",{children:"Add Deduction"})]})]}),e.jsx("div",{className:"space-y-3",children:y.map((q,G)=>e.jsxs("div",{className:"flex items-center space-x-2 p-3 border border-gray-200 rounded",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:q.label,onChange:z=>W(q.id,"label",z.target.value),placeholder:"Deduction description",className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})}),e.jsx("div",{className:"w-24",children:e.jsx("select",{value:q.currency,onChange:z=>W(q.id,"currency",z.target.value),className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:R.map(z=>e.jsx("option",{value:z.code,children:z.code},z.code))})}),e.jsx("div",{className:"w-32",children:e.jsx("input",{type:"number",value:q.amount,onChange:z=>W(q.id,"amount",z.target.value),placeholder:"0",className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})}),y.length>1&&e.jsx("button",{onClick:()=>J(q.id),className:"text-red-600 hover:text-red-800 text-xs",children:e.jsx(I,{icon:sa})})]},q.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Summary"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Earnings:"}),e.jsx("span",{className:"font-medium",children:oe(h.filter(q=>q.label.trim()&&q.amount).reduce((q,G)=>q+(parseFloat(G.amount)||0),0),u.currency)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Deductions:"}),e.jsx("span",{className:"font-medium text-red-600",children:oe(y.filter(q=>q.label.trim()&&q.amount).reduce((q,G)=>q+(parseFloat(G.amount)||0),0),u.currency)})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-3",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Net Pay:"}),e.jsx("span",{className:"font-bold text-green-600 text-lg",children:oe(te(),u.currency)})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Notes"}),e.jsx("textarea",{value:u.notes,onChange:q=>m({...u,notes:q.target.value}),rows:"4",className:"w-full border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter any additional notes or comments..."})]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>a("/dashboard/payroll"),className:"px-4 py-2 border border-gray-300 text-gray-700 text-sm hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{onClick:X,disabled:r,className:"px-4 py-2 bg-gray-600 text-white text-sm hover:bg-gray-700 disabled:opacity-50 flex items-center space-x-2",children:[e.jsx(I,{icon:ns,className:"text-sm"}),e.jsx("span",{children:r?"Creating...":"Create Payslip"})]})]})})]})},$ue=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState(null),[i,o]=x.useState(null),[c,u]=x.useState([]),[m,h]=x.useState({page:1,limit:25,total:0,pages:0}),[p,y]=x.useState(""),[g,v]=x.useState(""),[N,w]=x.useState(!1),[j,T]=x.useState(null),[k,R]=x.useState({route_name:"",route_code:"",pickup_point:"",dropoff_point:"",weekly_fee:"",currency:"USD"}),P=t?{Authorization:`Bearer ${t}`}:{};x.useEffect(()=>{$()},[]),x.useEffect(()=>{$()},[m.page,p,g]);const $=async()=>{try{r(!0),n(null);const W=new URLSearchParams({page:m.page,limit:m.limit});p&&W.append("search",p),g!==""&&W.append("is_active",g==="active");const X=await re.get(`${se}/transport/routes?${W}`,{headers:P});X.data.success&&(u(X.data.data),h(X.data.pagination))}catch(W){console.error("Error loading routes:",W),n("Failed to load routes")}finally{r(!1)}},A=W=>{const{name:X,value:te}=W.target;R(oe=>({...oe,[X]:te}))},M=()=>{R({route_name:"",route_code:"",pickup_point:"",dropoff_point:"",weekly_fee:"",currency:"USD"}),T(null)},_=(W=null)=>{W?(T(W),R({route_name:W.route_name,route_code:W.route_code,pickup_point:W.pickup_point,dropoff_point:W.dropoff_point,weekly_fee:W.weekly_fee,currency:W.currency})):M(),w(!0)},B=()=>{w(!1),M()},D=async W=>{W.preventDefault();try{r(!0),n(null),j?(await re.put(`${se}/transport/routes/${j.id}`,k,{headers:P}),o("Route updated successfully")):(await re.post(`${se}/transport/routes`,k,{headers:P}),o("Route created successfully")),B(),$()}catch(X){console.error("Error saving route:",X),n(X.response?.data?.message||"Failed to save route")}finally{r(!1)}},C=async W=>{if(window.confirm("Are you sure you want to delete this route?"))try{r(!0),n(null),await re.delete(`${se}/transport/routes/${W}`,{headers:P}),o("Route deleted successfully"),$()}catch(X){console.error("Error deleting route:",X),n(X.response?.data?.message||"Failed to delete route")}finally{r(!1)}},L=async(W,X)=>{try{r(!0),n(null),await re.put(`${se}/transport/routes/${W}`,{is_active:!X},{headers:P}),o(`Route ${X?"deactivated":"activated"} successfully`),$()}catch(te){console.error("Error toggling route status:",te),n(te.response?.data?.message||"Failed to toggle route status")}finally{r(!1)}},H=(W,X="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:X,minimumFractionDigits:2}).format(W),V=W=>e.jsx("span",{style:{padding:"2px 8px",fontSize:"0.7rem",fontWeight:500,borderRadius:"4px",backgroundColor:W?"#d1fae5":"#fee2e2",color:W?"#065f46":"#991b1b"},children:W?"Active":"Inactive"});if(a&&c.length===0)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading routes..."})});const Y=c.length>0?(m.page-1)*m.limit+1:0,J=Math.min(m.page*m.limit,m.total);return e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Transport Routes"}),e.jsx("p",{className:"report-subtitle",children:"Manage transport routes for student pickup and dropoff."})]}),e.jsx("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"},children:e.jsxs("button",{onClick:()=>_(),style:{background:"#2563eb",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",fontSize:"0.75rem",fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"background-color 0.2s"},onMouseEnter:W=>W.target.style.background="#1d4ed8",onMouseLeave:W=>W.target.style.background="#2563eb",children:[e.jsx(I,{icon:Ht}),"Add Route"]})})]}),e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsxs("div",{className:"report-filters-left",children:[e.jsx("form",{onSubmit:W=>{W.preventDefault(),$()},className:"filter-group",children:e.jsxs("div",{className:"search-input-wrapper",style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:ua,className:"search-icon"}),e.jsx("input",{type:"text",value:p,onChange:W=>y(W.target.value),placeholder:"Search routes...",className:"filter-input search-input"}),p&&e.jsx("button",{onClick:()=>{y(""),h(W=>({...W,page:1}))},style:{position:"absolute",right:"8px",padding:"4px 6px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},title:"Clear search",children:""})]})}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Status:"}),e.jsxs("select",{value:g,onChange:W=>{v(W.target.value),h(X=>({...X,page:1}))},className:"filter-input",style:{minWidth:"120px",width:"120px"},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]}),g&&e.jsx("button",{onClick:()=>{v(""),h(W=>({...W,page:1}))},style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear status filter",children:""})]})]})}),s&&e.jsx("div",{style:{padding:"10px 30px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem"},children:s}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:a&&c.length===0?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading routes..."}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"ROUTE NAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ROUTE CODE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"PICKUP POINT"}),e.jsx("th",{style:{padding:"6px 10px"},children:"DROPOFF POINT"}),e.jsx("th",{style:{padding:"6px 10px"},children:"WEEKLY FEE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STATUS"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[c.map((W,X)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:X%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:W.route_name}),e.jsx("td",{style:{padding:"4px 10px"},children:W.route_code}),e.jsx("td",{style:{padding:"4px 10px"},children:W.pickup_point}),e.jsx("td",{style:{padding:"4px 10px"},children:W.dropoff_point}),e.jsx("td",{style:{padding:"4px 10px"},children:H(W.weekly_fee,W.currency)}),e.jsx("td",{style:{padding:"4px 10px"},children:V(W.is_active)}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>_(W),style:{color:"#6366f1",background:"none",border:"none",cursor:"pointer",padding:0},title:"Edit",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>L(W.id,W.is_active),style:{color:W.is_active?"#f59e0b":"#10b981",background:"none",border:"none",cursor:"pointer",padding:0,fontSize:"0.7rem"},title:W.is_active?"Deactivate":"Activate",children:W.is_active?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>C(W.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:0},title:"Delete",children:e.jsx(I,{icon:sa})})]})})]},W.id)),Array.from({length:Math.max(0,25-c.length)}).map((W,X)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(c.length+X)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${X}`))]})]})}),e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",Y," to ",J," of ",m.total||0," results."]}),e.jsxs("div",{className:"table-footer-right",children:[m.pages>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>h(W=>({...W,page:Math.max(1,W.page-1)})),disabled:m.page===1,children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",m.page," of ",m.pages]}),e.jsx("button",{className:"pagination-btn",onClick:()=>h(W=>({...W,page:Math.min(m.pages,W.page+1)})),disabled:m.page===m.pages,children:"Next"})]}),m.pages<=1&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"All data displayed"})]})]}),N&&e.jsx("div",{className:"modal-overlay",onClick:B,children:e.jsxs("div",{className:"modal-dialog",onClick:W=>W.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:j?"Edit Route":"Add New Route"}),e.jsx("button",{className:"modal-close-btn",onClick:B,children:e.jsx(I,{icon:Wt})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:D,className:"modal-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Route Name"}),e.jsx("input",{type:"text",name:"route_name",value:k.route_name,onChange:A,required:!0,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Route Code"}),e.jsx("input",{type:"text",name:"route_code",value:k.route_code,onChange:A,required:!0,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Pickup Point"}),e.jsx("input",{type:"text",name:"pickup_point",value:k.pickup_point,onChange:A,required:!0,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Dropoff Point"}),e.jsx("input",{type:"text",name:"dropoff_point",value:k.dropoff_point,onChange:A,required:!0,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Weekly Fee"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"number",name:"weekly_fee",value:k.weekly_fee,onChange:A,step:"0.01",min:"0",required:!0,className:"form-control",style:{paddingRight:"50px"}}),e.jsx("span",{style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)",fontSize:"0.75rem"},children:k.currency})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Currency"}),e.jsxs("select",{name:"currency",value:k.currency,onChange:A,className:"form-control",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"GBP",children:"GBP"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:B,className:"modal-btn modal-btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"modal-btn modal-btn-primary",style:{background:"#2563eb",color:"white",border:"none"},children:a?"Saving...":j?"Update Route":"Create Route"})]})]})})]})}),i&&e.jsx("div",{style:{position:"fixed",bottom:"20px",right:"20px",background:"#10b981",color:"white",padding:"12px 20px",borderRadius:"4px",fontSize:"0.75rem",zIndex:1e3,boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:i})]})},Bue=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState(null),[i,o]=x.useState(null),[c,u]=x.useState([]),[m,h]=x.useState([]),[p,y]=x.useState([]),[g,v]=x.useState({page:1,limit:10,total:0,pages:0}),[N,w]=x.useState(""),[j,T]=x.useState(""),[k,R]=x.useState(""),P=t?{Authorization:`Bearer ${t}`}:{};x.useEffect(()=>{$(),A(),M()},[]),x.useEffect(()=>{M()},[g.page,N,j,k]);const $=async()=>{try{const L=await re.get(`${se}/transport/routes?limit=100`,{headers:P});L.data.success&&h(L.data.data)}catch(L){console.error("Error loading routes:",L)}},A=async()=>{try{const L=await re.get(`${se}/students?limit=1000`,{headers:P});L.data.success&&y(L.data.data)}catch(L){console.error("Error loading students:",L)}},M=async()=>{try{r(!0),n(null);const L=new URLSearchParams({page:g.page,limit:g.limit});N&&L.append("search",N),j&&L.append("route_id",j),k&&L.append("status",k);const H=await re.get(`${se}/transport/registrations?${L}`,{headers:P});H.data.success&&(u(H.data.data),v(H.data.pagination))}catch(L){console.error("Error loading registrations:",L),n("Failed to load registrations")}finally{r(!1)}},_=async L=>{if(window.confirm("Are you sure you want to delete this registration? This action cannot be undone."))try{r(!0),await re.delete(`${se}/transport/registrations/${L}`,{headers:P}),o("Registration deleted successfully"),M()}catch(H){console.error("Error deleting registration:",H),n(H.response?.data?.message||"Failed to delete registration")}finally{r(!1)}},B=(L,H="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:H}).format(L),D=L=>new Date(L).toLocaleDateString(),C=L=>e.jsx("span",{className:`px-2 py-1 text-xs font-medium ${L?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:L?"Active":"Inactive"});return e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Student Transport Registration"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Register students for transport pickup and dropoff"})]}),e.jsxs(ss,{to:"/dashboard/transport/registrations/add",className:"bg-gray-900 text-white px-4 py-2 text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(I,{icon:Ht,className:"mr-2"}),"Register Student"]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by student name or registration number...",value:N,onChange:L=>w(L.target.value),className:"w-full px-3 py-2 pl-10 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"}),e.jsx(I,{icon:ua,className:"absolute left-3 top-3 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route"}),e.jsxs("select",{value:j,onChange:L=>T(L.target.value),className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Routes"}),m.filter(L=>L.is_active).map(L=>e.jsx("option",{value:L.id,children:L.route_name},L.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:k,onChange:L=>R(L.target.value),className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{w(""),T(""),R("")},className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 text-xs",children:"Clear Filters"})})]})}),e.jsxs("div",{className:"bg-white border border-gray-200",children:[a?e.jsx("div",{className:"p-8 text-center",children:e.jsx("div",{className:"text-gray-500",children:"Loading registrations..."})}):c.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(I,{icon:Js,className:"text-4xl text-gray-300 mb-4"}),e.jsx("div",{className:"text-gray-500",children:"No registrations found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pickup/Dropoff"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Weekly Fee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(L=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:L.student_name}),e.jsxs("div",{className:"text-gray-500 text-xs",children:["Reg: ",L.student_reg_number]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L.route_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["From: ",L.pickup_point]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["To: ",L.dropoff_point]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D(L.start_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:B(L.weekly_fee,L.currency)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C(L.is_active)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>_(L.id),className:"text-red-600 hover:text-red-900",title:"Delete Registration",children:e.jsx(I,{icon:sa})})})})]},L.id))})]})}),g.pages>1&&e.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>v(L=>({...L,page:L.page-1})),disabled:g.page===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>v(L=>({...L,page:L.page+1})),disabled:g.page===g.pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(g.page-1)*g.limit+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(g.page*g.limit,g.total)})," ","of ",e.jsx("span",{className:"font-medium",children:g.total})," results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>v(L=>({...L,page:L.page-1})),disabled:g.page===1,className:"relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),Array.from({length:g.pages},(L,H)=>H+1).map(L=>e.jsx("button",{onClick:()=>v(H=>({...H,page:L})),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${L===g.page?"z-10 bg-gray-900 border-gray-900 text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:L},L)),e.jsx("button",{onClick:()=>v(L=>({...L,page:L.page+1})),disabled:g.page===g.pages,className:"relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]})})]}),i&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 shadow-lg z-50",children:i}),s&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 shadow-lg z-50",children:s})]})})},Fue=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState(null),[i,o]=x.useState(null),[c,u]=x.useState([]),[m,h]=x.useState([]),[p,y]=x.useState({page:1,limit:10,total:0,pages:0}),[g,v]=x.useState(""),[N,w]=x.useState(""),[j,T]=x.useState(""),[k,R]=x.useState(""),[P,$]=x.useState(!1),[A,M]=x.useState(!1),[_,B]=x.useState(null),[D,C]=x.useState({week_start_date:"",week_end_date:""}),[L,H]=x.useState({payment_date:"",amount:"",payment_method:"Cash",notes:""}),V=t?{Authorization:`Bearer ${t}`}:{};x.useEffect(()=>{Y(),J()},[]),x.useEffect(()=>{J()},[p.page,g,N,j,k]);const Y=async()=>{try{const z=await re.get(`${se}/transport/routes?limit=100`,{headers:V});z.data.success&&h(z.data.data)}catch(z){console.error("Error loading routes:",z)}},J=async()=>{try{r(!0),n(null);const z=new URLSearchParams({page:p.page,limit:p.limit});g&&z.append("search",g),N&&z.append("status",N),j&&z.append("route_id",j),k&&z.append("week_start",k);const Z=await re.get(`${se}/transport/fees?${z}`,{headers:V});Z.data.success&&(console.log(" Fees received from API:",Z.data.data),Z.data.data.length>0&&(console.log(" First fee structure:",Z.data.data[0]),console.log(" student_reg_number field:",Z.data.data[0].student_reg_number)),u(Z.data.data),y(Z.data.pagination))}catch(z){console.error("Error loading fees:",z),n("Failed to load fees")}finally{r(!1)}},W=async z=>{z.preventDefault();try{r(!0),n(null);const Z=await re.post(`${se}/transport/fees/generate`,D,{headers:V});Z.data.success&&(o(`Weekly fees generated successfully! ${Z.data.data.fees_created} fees created, ${Z.data.data.fees_skipped} skipped.`),$(!1),C({week_start_date:"",week_end_date:""}),J())}catch(Z){console.error("Error generating fees:",Z),n(Z.response?.data?.message||"Failed to generate weekly fees")}finally{r(!1)}},X=async z=>{z.preventDefault();try{r(!0),n(null);const Z={...L,transport_fee_id:_.id,student_reg_number:_.student_reg_number||_.student_number,currency:_.currency};console.log(" Payment data being sent:",Z),console.log(" Selected fee:",_),console.log(" Selected fee keys:",Object.keys(_)),console.log(" student_reg_number value:",_.student_reg_number),console.log(" student_number value:",_.student_number),console.log(" Final student_reg_number:",_.student_reg_number||_.student_number);const Q=await re.post(`${se}/transport/payments`,Z,{headers:V});Q.data.success&&(o(`Payment recorded successfully! Reference: ${Q.data.data.reference_number}`),M(!1),B(null),H({payment_date:"",amount:"",payment_method:"Cash",notes:""}),J())}catch(Z){console.error("Error recording payment:",Z),n(Z.response?.data?.message||"Failed to record payment")}finally{r(!1)}},te=z=>{console.log(" Fee data for payment:",z),B(z),H({payment_date:new Date().toISOString().split("T")[0],amount:z.amount.toString(),payment_method:"Cash",notes:""}),M(!0)},oe=(z,Z="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:Z,minimumFractionDigits:2}).format(z),q=z=>new Date(z).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),G=z=>{switch(z){case"Paid":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(I,{icon:cr,className:"mr-1"}),"Paid"]});case"Pending":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(I,{icon:Ma,className:"mr-1"}),"Pending"]});case"Overdue":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(I,{icon:hm,className:"mr-1"}),"Overdue"]});default:return e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800",children:"Unknown"})}};return a&&c.length===0?e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin h-12 w-12 border-b-2 border-gray-600"})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Weekly Transport Fees"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Manage weekly transport fees and payments"})]}),e.jsxs("button",{onClick:()=>$(!0),className:"bg-gray-900 text-white px-4 py-2 text-xs hover:bg-gray-800 flex items-center",children:[e.jsx(I,{icon:Ht,className:"mr-2"}),"Generate Weekly Fees"]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:ua,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search students or routes...",value:g,onChange:z=>v(z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})}),e.jsxs("select",{value:N,onChange:z=>w(z.target.value),className:"px-4 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Paid",children:"Paid"}),e.jsx("option",{value:"Overdue",children:"Overdue"})]}),e.jsxs("select",{value:j,onChange:z=>T(z.target.value),className:"px-4 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Routes"}),m.map(z=>e.jsx("option",{value:z.id,children:z.route_name},z.id))]}),e.jsx("input",{type:"date",placeholder:"Week starting...",value:k,onChange:z=>R(z.target.value),className:"px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Week"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(z=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:z.student_name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",z.student_number]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:z.route_name}),e.jsx("div",{className:"text-sm text-gray-500",children:z.route_code})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{icon:Pa,className:"text-blue-500 text-xs"}),e.jsxs("span",{children:[q(z.week_start_date)," - ",q(z.week_end_date)]})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 font-medium",children:oe(z.amount,z.currency)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:q(z.due_date)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G(z.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:z.status!=="Paid"&&e.jsxs("button",{onClick:()=>te(z),className:"text-blue-600 hover:text-blue-900 flex items-center gap-2",children:[e.jsx(I,{icon:Bl}),"Record Payment"]})})]},z.id))})]})}),p.pages>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>y(z=>({...z,page:z.page-1})),disabled:p.page===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>y(z=>({...z,page:z.page+1})),disabled:p.page===p.pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(p.page-1)*p.limit+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(p.page*p.limit,p.total)})," ","of ",e.jsx("span",{className:"font-medium",children:p.total})," results"]})}),e.jsx("div",{children:e.jsx("nav",{className:"relative z-0 inline-flex shadow-sm -space-x-px",children:Array.from({length:p.pages},(z,Z)=>Z+1).map(z=>e.jsx("button",{onClick:()=>y(Z=>({...Z,page:z})),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${z===p.page?"z-10 bg-gray-50 border-gray-500 text-gray-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:z},z))})})]})]})]}),P&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Generate Weekly Fees"}),e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Week Start Date (Monday)"}),e.jsx("input",{type:"date",name:"week_start_date",value:D.week_start_date,onChange:z=>C(Z=>({...Z,week_start_date:z.target.value})),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Week End Date (Sunday)"}),e.jsx("input",{type:"date",name:"week_end_date",value:D.week_end_date,onChange:z=>C(Z=>({...Z,week_end_date:z.target.value})),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:a,className:"flex-1 bg-gray-900 hover:bg-gray-800 text-white px-4 py-2 rounded-md disabled:opacity-50",children:a?"Generating...":"Generate Fees"}),e.jsx("button",{type:"button",onClick:()=>$(!1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2",children:"Cancel"})]})]})]})})}),A&&_&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Record Payment"}),e.jsx("div",{className:"mb-4 p-3 bg-gray-50",children:e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Student:"})," ",_.student_name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Route:"})," ",_.route_name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Week:"})," ",q(_.week_start_date)," - ",q(_.week_end_date)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Amount Due:"})," ",oe(_.amount,_.currency)]})]})}),e.jsxs("form",{onSubmit:X,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Date"}),e.jsx("input",{type:"date",name:"payment_date",value:L.payment_date,onChange:z=>H(Z=>({...Z,payment_date:z.target.value})),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),e.jsx("input",{type:"number",name:"amount",value:L.amount,onChange:z=>H(Z=>({...Z,amount:z.target.value})),step:"0.01",min:"0",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Method"}),e.jsxs("select",{name:"payment_method",value:L.payment_method,onChange:z=>H(Z=>({...Z,payment_method:z.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"Cheque",children:"Cheque"}),e.jsx("option",{value:"Mobile Money",children:"Mobile Money"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notes (Optional)"}),e.jsx("textarea",{name:"notes",value:L.notes,onChange:z=>H(Z=>({...Z,notes:z.target.value})),rows:"3",className:"mt-1 block w-full px-3 py-2 border border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:a,className:"flex-1 bg-gray-900 hover:bg-gray-800 text-white px-4 py-2 disabled:opacity-50",children:a?"Recording...":"Record Payment"}),e.jsx("button",{type:"button",onClick:()=>M(!1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2",children:"Cancel"})]})]})]})})}),i&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 shadow-lg z-50",children:i}),s&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 shadow-lg z-50",children:s})]})})},que=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState(null),[i,o]=x.useState([]),[c,u]=x.useState([]),[m,h]=x.useState(""),[p,y]=x.useState(""),g=t?{Authorization:`Bearer ${t}`}:{};x.useEffect(()=>{v();const $=new Date,A=new Date($),M=$.getDay(),_=$.getDate()-M+(M===0?-6:1);A.setDate(_),h(A.toISOString().split("T")[0])},[]),x.useEffect(()=>{m&&N()},[m,p]);const v=async()=>{try{const $=await re.get(`${se}/transport/routes?limit=100`,{headers:g});$.data.success&&u($.data.data)}catch($){console.error("Error loading routes:",$)}},N=async()=>{try{r(!0),n(null);const $=new URLSearchParams({week_start_date:m});p&&$.append("route_id",p);const A=await re.get(`${se}/transport/schedules/weekly?${$}`,{headers:g});A.data.success&&o(A.data.data)}catch($){console.error("Error loading weekly schedule:",$),n("Failed to load weekly schedule")}finally{r(!1)}},w=$=>new Date(`2000-01-01T${$}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),j=$=>new Date($).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"short",day:"numeric"}),T=$=>{switch($){case"Paid":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(I,{icon:cr,className:"mr-1"}),"Paid"]});case"Pending":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(I,{icon:Ma,className:"mr-1"}),"Pending"]});case"Overdue":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(I,{icon:hm,className:"mr-1"}),"Overdue"]});default:return e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Unknown"})}},k=$=>({Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:0})[$]||0,R=$=>$.sort((A,M)=>{const _=k(A.day_of_week),B=k(M.day_of_week);return _!==B?_-B:A.pickup_time.localeCompare(M.pickup_time)}),P=()=>{const $=R(i),A={};return $.forEach(M=>{A[M.day_of_week]||(A[M.day_of_week]=[]),A[M.day_of_week].push(M)}),A};return a&&i.length===0?e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-600"})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-6",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Weekly Transport Schedule"}),e.jsx("p",{className:"text-xs text-gray-600",children:"View transport schedule and student payment status for the week"})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Week Starting"}),e.jsx("input",{type:"date",value:m,onChange:$=>h($.target.value),className:"px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Route (Optional)"}),e.jsxs("select",{value:p,onChange:$=>y($.target.value),className:"px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Routes"}),c.map($=>e.jsx("option",{value:$.id,children:$.route_name},$.id))]})]})]})}),i.length===0?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-8 text-center",children:[e.jsx(I,{icon:Pa,className:"text-gray-400 text-4xl mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Schedule Found"}),e.jsx("p",{className:"text-sm text-gray-500",children:m?`No transport schedule found for the week starting ${j(m)}`:"Please select a week to view the schedule"})]}):e.jsx("div",{className:"space-y-6",children:Object.entries(P()).map(([$,A])=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:$})}),e.jsx("div",{className:"divide-y divide-gray-200",children:A.map((M,_)=>e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-3 mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{icon:HN,className:"text-blue-500 text-sm"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:M.route_name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",M.route_code,")"]})]})}),e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{icon:Wn,className:"text-green-500 text-xs"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Pickup: ",w(M.pickup_time)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{icon:Wn,className:"text-red-500 text-xs"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Dropoff: ",w(M.dropoff_time)]})]})]}),M.students&&M.students.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:["Registered Students (",M.students.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:M.students.map((B,D)=>e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(I,{icon:as,className:"text-blue-500 text-xs"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:B.student_name})]}),e.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["ID: ",B.student_reg_number]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-gray-600",children:["Fee: ",B.weekly_fee," ",B.currency]}),B.payment_status&&e.jsx("div",{className:"ml-2",children:T(B.payment_status)})]})]},D))})]}):e.jsxs("div",{className:"text-sm text-gray-500 italic",children:["No students registered for this route on ",$]})]})})},`${$}-${_}`))})]},$))}),s&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",children:s})]})})},Uue=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState(null),[i,o]=x.useState(null),[c,u]=x.useState([]),[m,h]=x.useState([]),[p,y]=x.useState([]),[g,v]=x.useState([]),[N,w]=x.useState(""),[j,T]=x.useState(!1),[k,R]=x.useState(null),[P,$]=x.useState({page:1,limit:10,total:0,pages:0}),[A,M]=x.useState(""),[_,B]=x.useState(""),[D,C]=x.useState(""),[L,H]=x.useState(!1),[V,Y]=x.useState(null),[J,W]=x.useState({route_id:"",student_reg_number:"",payment_date:"",amount:"",currency_id:"",payment_method:"",reference:"",notes:""}),X=t?{Authorization:`Bearer ${t}`}:{};x.useEffect(()=>{te(),Q(),oe()},[]),x.useEffect(()=>{Q()},[P.page,A,_,D]),x.useEffect(()=>{const ce=De=>{De.target.closest(".student-search-container")||T(!1)};return document.addEventListener("mousedown",ce),()=>{document.removeEventListener("mousedown",ce)}},[]);const te=async()=>{try{const ce=await re.get(`${se}/transport/routes?limit=100`,{headers:X});ce.data.success&&h(ce.data.data)}catch(ce){console.error("Error loading routes:",ce)}},oe=async()=>{try{const De=(await re.get(`${se}/accounting/currencies`,{headers:X})).data.data||[];v(De);const ye=De.find(Ee=>Ee.base_currency);ye&&!J.currency_id&&W(Ee=>({...Ee,currency_id:ye.id}))}catch(ce){console.error("Error loading currencies:",ce),n("Failed to load currencies")}},q=async ce=>{if(!ce.trim()){y([]);return}try{try{const ye=await re.get(`${se}/students/${ce}`,{headers:X});if(ye.data.success){y([ye.data.data]);return}}catch{}const De=await re.get(`${se}/students/search?query=${ce}`,{headers:X});De.data.success&&y(De.data.data)}catch(De){console.error("Error searching students:",De),y([])}},G=ce=>{const De=ce.target.value;w(De),De.trim()?(q(De),T(!0)):(y([]),T(!1),R(null),W(ye=>({...ye,student_reg_number:""})))},z=ce=>{R(ce),w(`${ce.Name} ${ce.Surname} (${ce.RegNumber})`),W(De=>({...De,student_reg_number:ce.RegNumber})),T(!1)},Z=()=>{const ce=Date.now(),De=Math.random().toString(36).substr(2,9).toUpperCase(),ye=`TRP-${ce}-${De}`;W(Ee=>({...Ee,reference:ye}))},Q=async()=>{try{r(!0),n(null);const ce=new URLSearchParams({page:P.page,limit:P.limit});A&&ce.append("search",A),_&&ce.append("status",_),D&&ce.append("date",D);const De=await re.get(`${se}/transport/payments?${ce}`,{headers:X});De.data.success&&(u(De.data.data),$(De.data.pagination))}catch(ce){console.error("Error loading payments:",ce),n("Failed to load payments")}finally{r(!1)}},fe=ce=>{const{name:De,value:ye}=ce.target;W(Ee=>({...Ee,[De]:ye}))},he=()=>{const ce=g.find(De=>De.base_currency);W({route_id:"",student_reg_number:"",payment_date:"",amount:"",currency_id:ce?.id||"",payment_method:"",reference:"",notes:""}),w(""),R(null),Y(null)},ne=(ce=null)=>{ce?(Y(ce),W({route_id:ce.route_id||"",student_reg_number:ce.student_reg_number||"",payment_date:ce.payment_date,amount:ce.amount,currency_id:ce.currency_id||"",payment_method:ce.payment_method,reference:ce.reference_number||"",notes:ce.notes||""}),w(ce.student_name||"")):he(),H(!0)},me=()=>{H(!1),he()},pe=async ce=>{ce.preventDefault();try{if(r(!0),n(null),!J.route_id||!J.student_reg_number){n("Please select both route and student");return}const De={route_id:parseInt(J.route_id),student_reg_number:J.student_reg_number,payment_date:J.payment_date,amount:parseFloat(J.amount),currency_id:J.currency_id,payment_method:J.payment_method,reference:J.reference.trim()||null,notes:J.notes.trim()||null};V?(await re.put(`${se}/transport/payments/${V.id}`,De,{headers:X}),o("Payment updated successfully")):(await re.post(`${se}/transport/payments/direct`,De,{headers:X}),o("Payment recorded successfully")),me(),Q()}catch(De){console.error("Error saving payment:",De),n(De.response?.data?.message||"Failed to save payment")}finally{r(!1)}},ie=async ce=>{if(window.confirm("Are you sure you want to delete this payment?"))try{r(!0),await re.delete(`${se}/transport/payments/${ce}`,{headers:X}),o("Payment deleted successfully"),Q()}catch(De){console.error("Error deleting payment:",De),n(De.response?.data?.message||"Failed to delete payment")}finally{r(!1)}},ke=(ce,De="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:De}).format(ce),Ae=ce=>new Date(ce).toLocaleDateString(),ae=ce=>{const De={paid:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",overdue:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium ${De[ce]||"bg-gray-100 text-gray-800"}`,children:ce?.charAt(0).toUpperCase()+ce?.slice(1)})},Ne=ce=>({cash:Za,card:ql,bank_transfer:pf,mobile_money:ql})[ce]||ql;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900 mb-2",children:"Transport Payments"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Track and manage transport fee payments"})]}),e.jsx("div",{className:"bg-white p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by student name or reference...",value:A,onChange:ce=>M(ce.target.value),className:"w-full px-3 py-2 pl-10 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"}),e.jsx(I,{icon:ua,className:"absolute left-3 top-3 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:_,onChange:ce=>B(ce.target.value),className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"overdue",children:"Overdue"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:D,onChange:ce=>C(ce.target.value),className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:()=>ne(),className:"w-full bg-gray-900 hover:bg-gray-800 text-white px-4 py-2 flex items-center justify-center",children:[e.jsx(I,{icon:Ht,className:"mr-2"}),"Record Payment"]})})]})}),e.jsxs("div",{className:"bg-white",children:[a?e.jsx("div",{className:"p-8 text-center",children:e.jsx("div",{className:"text-gray-500",children:"Loading payments..."})}):c.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(I,{icon:ql,className:"text-4xl text-gray-300 mb-4"}),e.jsx("div",{className:"text-gray-500",children:"No payments found"})]}):e.jsx("div",{className:"overflow-x-auto border border-gray-200/30 rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Date"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(ce=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:ce.student_name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:ce.route_name}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:Ae(ce.payment_date)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900 text-right",children:ke(ce.amount,ce.currency)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:Ne(ce.payment_method),className:"mr-2 text-gray-400"}),ce.payment_method?.replace("_"," ")]})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs",children:ae(ce.status)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:ce.reference_number||"N/A"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-500",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ne(ce),className:"text-gray-600 hover:text-gray-900",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>ie(ce.id),className:"text-red-600 hover:text-red-900",children:e.jsx(I,{icon:sa})})]})})]},ce.id))})]})}),P.pages>1&&e.jsx("div",{className:"bg-white px-4 py-3 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>$(ce=>({...ce,page:ce.page-1})),disabled:P.page===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>$(ce=>({...ce,page:ce.page+1})),disabled:P.page===P.pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(P.page-1)*P.limit+1})," to"," ",e.jsx("span",{className:"font-medium",children:Math.min(P.page*P.limit,P.total)})," ","of ",e.jsx("span",{className:"font-medium",children:P.total})," results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>$(ce=>({...ce,page:ce.page-1})),disabled:P.page===1,className:"relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),Array.from({length:P.pages},(ce,De)=>De+1).map(ce=>e.jsx("button",{onClick:()=>$(De=>({...De,page:ce})),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${ce===P.page?"z-10 bg-gray-900 border-gray-900 text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:ce},ce)),e.jsx("button",{onClick:()=>$(ce=>({...ce,page:ce.page+1})),disabled:P.page===P.pages,className:"relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]})})]}),L&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 w-full max-w-2xl bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:V?"Edit Payment":"Record Transport Payment"}),e.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Route"}),e.jsxs("select",{name:"route_id",value:J.route_id,onChange:fe,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Route"}),m.filter(ce=>ce.is_active).map(ce=>e.jsxs("option",{value:ce.id,children:[ce.route_name," - ",ce.weekly_fee," ",ce.currency]},ce.id))]})]}),e.jsxs("div",{className:"student-search-container relative",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Student Registration Number"}),e.jsx("input",{type:"text",value:N,onChange:G,placeholder:"Enter student registration number...",className:"mt-1 block w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0}),j&&p.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:p.map(ce=>e.jsxs("div",{onClick:()=>z(ce),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-xs",children:[e.jsxs("div",{className:"font-medium",children:[ce.Name," ",ce.Surname]}),e.jsxs("div",{className:"text-gray-500",children:["Reg: ",ce.RegNumber]})]},ce.RegNumber))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Payment Date"}),e.jsx("input",{type:"date",name:"payment_date",value:J.payment_date,onChange:fe,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Amount"}),e.jsx("input",{type:"number",name:"amount",value:J.amount,onChange:fe,step:"0.01",min:"0",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Currency"}),e.jsxs("select",{name:"currency_id",value:J.currency_id,onChange:fe,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Currency"}),g.map(ce=>e.jsxs("option",{value:ce.id,children:[ce.code," - ",ce.name]},ce.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Payment Method"}),e.jsxs("select",{name:"payment_method",value:J.payment_method,onChange:fe,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Payment Method"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"card",children:"Card"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"mobile_money",children:"Mobile Money"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Reference"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"reference",value:J.reference,onChange:fe,placeholder:"Payment reference (optional)",className:"flex-1 px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"}),e.jsx("button",{type:"button",onClick:Z,className:"px-3 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 text-xs whitespace-nowrap",children:"Auto Generate"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Notes"}),e.jsx("textarea",{name:"notes",value:J.notes,onChange:fe,rows:3,placeholder:"Additional notes (optional)",className:"mt-1 block w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:a,className:"flex-1 bg-gray-900 hover:bg-gray-800 text-white px-4 py-2 disabled:opacity-50",children:a?"Saving...":V?"Update Payment":"Record Payment"}),e.jsx("button",{type:"button",onClick:me,className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2",children:"Cancel"})]})]})]})})}),i&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 z-50",children:i}),s&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 z-50",children:s})]})},Wue=()=>{const{token:t}=At(),a=Da(),[r,s]=x.useState(!1),[n,i]=x.useState(null),[o,c]=x.useState(null),[u,m]=x.useState([]),[h,p]=x.useState([]),[y,g]=x.useState(""),[v,N]=x.useState(!1),[w,j]=x.useState(null),[T,k]=x.useState({student_reg_number:"",route_id:"",pickup_point:"",dropoff_point:"",start_date:"",end_date:"",weekly_fee:"",currency:"USD"}),R=t?{Authorization:`Bearer ${t}`}:{};x.useEffect(()=>{P()},[]),x.useEffect(()=>{const D=C=>{C.target.closest(".student-search-container")||N(!1)};return document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[]);const P=async()=>{try{const D=await re.get(`${se}/transport/routes?limit=100`,{headers:R});D.data.success&&m(D.data.data)}catch(D){console.error("Error loading routes:",D)}},$=async D=>{if(!D.trim()){p([]);return}try{try{const L=await re.get(`${se}/students/${D}`,{headers:R});if(L.data.success){p([L.data.data]);return}}catch{}const C=await re.get(`${se}/students/search?query=${D}`,{headers:R});C.data.success&&p(C.data.data)}catch(C){console.error("Error searching students:",C),p([])}},A=D=>{const C=D.target.value;g(C),C.trim()?($(C),N(!0)):(p([]),N(!1),j(null),k(L=>({...L,student_reg_number:""})))},M=D=>{j(D),g(`${D.Name} ${D.Surname} (${D.RegNumber})`),k(C=>({...C,student_reg_number:D.RegNumber})),N(!1)},_=D=>{const{name:C,value:L}=D.target;if(k(H=>({...H,[C]:L})),C==="route_id"&&L){const H=u.find(V=>V.id.toString()===L);H&&k(V=>({...V,pickup_point:H.pickup_point||"",dropoff_point:H.dropoff_point||"",weekly_fee:H.weekly_fee||"",currency:H.currency||"USD"}))}},B=async D=>{D.preventDefault();try{s(!0),i(null);const C={...T,weekly_fee:parseFloat(T.weekly_fee),pickup_point:T.pickup_point.trim()||null,dropoff_point:T.dropoff_point.trim()||null,end_date:T.end_date||null};await re.post(`${se}/transport/registrations`,C,{headers:R}),c("Student registered for transport successfully"),setTimeout(()=>{a("/dashboard/transport/registrations")},1500)}catch(C){console.error("Error saving registration:",C),i(C.response?.data?.message||"Failed to register student")}finally{s(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Register Student for Transport"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Add a new student transport registration"})]})}),e.jsx("div",{className:"bg-white p-6",children:e.jsxs("form",{onSubmit:B,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"student-search-container relative",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:[e.jsx(I,{icon:Js,className:"mr-2"}),"Student Registration Number"]}),e.jsx("input",{type:"text",value:y,onChange:A,placeholder:"Enter student registration number...",className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0}),v&&h.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:h.map(D=>e.jsxs("div",{onClick:()=>M(D),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-xs",children:[e.jsxs("div",{className:"font-medium",children:[D.Name," ",D.Surname]}),e.jsxs("div",{className:"text-gray-500",children:["Reg: ",D.RegNumber]})]},D.RegNumber))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:[e.jsx(I,{icon:HN,className:"mr-2"}),"Route"]}),e.jsxs("select",{name:"route_id",value:T.route_id,onChange:_,required:!0,className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Route"}),u.filter(D=>D.is_active).map(D=>e.jsxs("option",{value:D.id,children:[D.route_name," - ",D.weekly_fee," ",D.currency]},D.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:[e.jsx(I,{icon:lu,className:"mr-2"}),"Pickup Point"]}),e.jsx("input",{type:"text",name:"pickup_point",value:T.pickup_point,onChange:_,required:!0,className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Pickup location"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:[e.jsx(I,{icon:lu,className:"mr-2"}),"Dropoff Point"]}),e.jsx("input",{type:"text",name:"dropoff_point",value:T.dropoff_point,onChange:_,required:!0,className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Dropoff location"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:[e.jsx(I,{icon:Pa,className:"mr-2"}),"Start Date"]}),e.jsx("input",{type:"date",name:"start_date",value:T.start_date,onChange:_,required:!0,className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:[e.jsx(I,{icon:Pa,className:"mr-2"}),"End Date (Optional)"]}),e.jsx("input",{type:"date",name:"end_date",value:T.end_date,onChange:_,className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:[e.jsx(I,{icon:Za,className:"mr-2"}),"Weekly Fee"]}),e.jsx("input",{type:"number",name:"weekly_fee",value:T.weekly_fee,onChange:_,step:"0.01",min:"0",required:!0,className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Currency"}),e.jsxs("select",{name:"currency",value:T.currency,onChange:_,required:!0,className:"w-full px-3 py-2 border border-gray-300 focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"ZWL",children:"ZWL"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"GBP",children:"GBP"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"submit",disabled:r,className:"flex-1 bg-gray-900 hover:bg-gray-800 text-white px-6 py-3 disabled:opacity-50 flex items-center justify-center",children:r?"Registering...":"Register Student"}),e.jsx(ss,{to:"/dashboard/transport/registrations",className:"px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 flex items-center justify-center",children:"Cancel"})]})]})}),o&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 z-50",children:o}),n&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 z-50",children:n})]})},R7=()=>{const{token:t}=At();Da();const[a,r]=x.useState(!0),[s,n]=x.useState(null),[i,o]=x.useState(""),[c,u]=x.useState(""),[m,h]=x.useState(""),[p,y]=x.useState(""),[g,v]=x.useState([]),[N,w]=x.useState([]),[j,T]=x.useState(1),[k,R]=x.useState(1),[P,$]=x.useState(0),[A]=x.useState(25),[M,_]=x.useState(!1),[B,D]=x.useState(null);x.useEffect(()=>{C()},[]),x.useEffect(()=>{L()},[j,c,m,p]);const C=async()=>{try{const z=await re.get(`${se}/inventory/categories`,{headers:{Authorization:`Bearer ${t}`}});z.data.success&&w(z.data.data||[])}catch(z){console.error("Error fetching categories:",z)}},L=async()=>{try{r(!0),n(null);const z={page:j,limit:A};c&&(z.search=c),m&&(z.category_id=m),p&&(z.status=p);const Z=await re.get(`${se}/inventory/items`,{headers:{Authorization:`Bearer ${t}`},params:z});Z.data.success?(v(Z.data.data||[]),R(Z.data.pagination?.total_pages||1),$(Z.data.pagination?.total_items||Z.data.data?.length||0)):n(Z.data.error||"Failed to fetch inventory items")}catch(z){console.error("Error fetching inventory items:",z),n(z.response?.data?.error||"Failed to fetch inventory items")}finally{r(!1)}},H=z=>{z.preventDefault(),u(i),T(1)},V=z=>{h(z.target.value),T(1)},Y=z=>{y(z.target.value),T(1)},J=z=>z===0?"Out of Stock":z<=5?"Low Stock":"In Stock",W=z=>({"In Stock":{background:"#d1fae5",color:"#065f46"},"Low Stock":{background:"#fef3c7",color:"#92400e"},"Out of Stock":{background:"#fee2e2",color:"#991b1b"}})[z]||{background:"#f3f4f6",color:"#374151"},X=z=>{D(z),_(!0)},te=()=>{_(!1),D(null)},oe=z=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(z||0),q=g.length>0?(j-1)*A+1:0,G=Math.min(j*A,P);return a&&g.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading inventory items..."})}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center",flexWrap:"wrap",padding:"10px 0",borderBottom:"1px solid #e5e7eb",marginBottom:"15px"},children:[e.jsx("form",{onSubmit:H,style:{display:"flex",alignItems:"center"},children:e.jsxs("div",{className:"search-input-wrapper",style:{position:"relative",display:"flex",alignItems:"center",width:"250px"},children:[e.jsx(I,{icon:ua,className:"search-icon",style:{position:"absolute",left:"10px",color:"#64748b"}}),e.jsx("input",{type:"text",value:i,onChange:z=>o(z.target.value),placeholder:"Search tests...",className:"filter-input search-input",style:{paddingLeft:"35px",width:"100%",height:"36px",fontSize:"0.75rem"}}),i&&e.jsx("button",{type:"button",onClick:()=>{o(""),u(""),T(1)},style:{position:"absolute",right:"8px",background:"transparent",border:"none",cursor:"pointer",color:"#64748b"},children:""})]})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"0.75rem",fontWeight:600,color:"#374151"},children:"Category:"}),e.jsxs("select",{value:m,onChange:V,className:"filter-input",style:{minWidth:"150px",height:"36px",fontSize:"0.75rem"},children:[e.jsx("option",{value:"",children:"All Categories"}),N.map(z=>e.jsx("option",{value:z.id,children:z.name},z.id))]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"0.75rem",fontWeight:600,color:"#374151"},children:"Status:"}),e.jsxs("select",{value:p,onChange:Y,className:"filter-input",style:{minWidth:"150px",height:"36px",fontSize:"0.75rem"},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"In Stock",children:"In Stock"}),e.jsx("option",{value:"Low Stock",children:"Low Stock"}),e.jsx("option",{value:"Out of Stock",children:"Out of Stock"})]})]})]}),s&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"10px"},children:s}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0},children:e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"ITEM NAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"REFERENCE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"CATEGORY"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STOCK"}),e.jsx("th",{style:{padding:"6px 10px"},children:"UNIT PRICE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STATUS"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[g.map((z,Z)=>{const Q=J(z.current_stock||0);return e.jsxs("tr",{style:{height:"32px",backgroundColor:Z%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:z.name}),e.jsx("td",{style:{padding:"4px 10px"},children:z.reference||"-"}),e.jsx("td",{style:{padding:"4px 10px"},children:z.category_name||"-"}),e.jsx("td",{style:{padding:"4px 10px"},children:z.current_stock||0}),e.jsx("td",{style:{padding:"4px 10px"},children:oe(z.unit_price||0)}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"0.7rem",fontWeight:500,...W(Q)},children:Q})}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsx("button",{onClick:()=>X(z),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0},title:"View",children:e.jsx(I,{icon:qa})})})]},z.id)}),Array.from({length:Math.max(0,15-g.length)}).map((z,Z)=>e.jsx("tr",{style:{height:"32px",backgroundColor:(g.length+Z)%2===0?"#fafafa":"#f3f4f6"},children:e.jsx("td",{colSpan:"7",style:{padding:"4px 10px"},children:""})},`empty-${Z}`))]})]})}),e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0,marginTop:"10px"},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",q," to ",G," of ",P||0," results."]}),e.jsx("div",{className:"table-footer-right",children:!c&&k>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>T(Math.max(1,j-1)),disabled:j===1,children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",j," of ",k]}),e.jsx("button",{className:"pagination-btn",onClick:()=>T(Math.min(k,j+1)),disabled:j===k,children:"Next"})]})})]}),M&&B&&e.jsx("div",{className:"modal-overlay",onClick:te,children:e.jsxs("div",{className:"modal-dialog",onClick:z=>z.stopPropagation(),style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Item Details"}),e.jsx("button",{className:"modal-close-btn",onClick:te,children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{style:{display:"grid",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:B.name})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Reference"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:B.reference||"-"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Category"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:B.category_name||"No category"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Current Stock"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:B.current_stock||0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Unit Price"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:oe(B.unit_price||0)})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px",minHeight:"40px"},children:B.description||"No description"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Location"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:B.location||"No location"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Supplier"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:B.supplier||"No supplier"})]})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"modal-btn modal-btn-secondary",onClick:te,children:"Close"})})]})})]})},CL=()=>{Da();const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState(null),[i,o]=x.useState(null),[c,u]=x.useState({name:"",category:"",reference:"",description:"",unitPrice:"",currentStock:"",location:"",supplier:""}),[m,h]=x.useState([]),[p,y]=x.useState(!1);x.useEffect(()=>{(async()=>{if(t)try{y(!0);const P=await re.get(`${se}/inventory/categories`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});P.data.success&&h(P.data.data)}catch(P){console.error(" Error loading categories:",P)}finally{y(!1)}})()},[t]);const g=R=>{const{name:P,value:$}=R.target;u(A=>({...A,[P]:$}))},v=()=>{const R=c.category||"GEN",P=Date.now().toString().slice(-6),$=Math.random().toString(36).substring(2,5).toUpperCase(),A=`${R.substring(0,3).toUpperCase()}-${P}-${$}`;u(M=>({...M,reference:A}))},N=async R=>{R.preventDefault(),console.log(" Form submitted"),console.log(" Token:",t),console.log(" BASE_URL:",se),console.log(" Form data:",c);try{if(r(!0),n(null),!c.name||!c.category||!c.reference){n("Please fill in all required fields");return}if(parseFloat(c.unitPrice)<0){n("Unit price cannot be negative");return}if(parseInt(c.currentStock)<0){n("Current stock cannot be negative");return}const P={name:c.name.trim(),category_id:parseInt(c.category),reference:c.reference.trim(),description:c.description.trim()||null,unit_price:parseFloat(c.unitPrice),current_stock:parseInt(c.currentStock),location:c.location.trim()||null,supplier:c.supplier.trim()||null};console.log(" Submitting item data:",P);const $=await re.post(`${se}/inventory/items`,P,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});console.log(" Item created successfully:",$.data),o("Item added successfully!"),setTimeout(()=>{u({name:"",category:"",reference:"",description:"",unitPrice:"",currentStock:"",location:"",supplier:""}),o(null)},2e3)}catch(P){console.error(" Error adding item:",P),P.response?.data?.message?n(P.response.data.message):P.response?.status===401?n("Authentication failed. Please log in again."):P.response?.status===403?n("You do not have permission to add items."):n("Failed to add item. Please try again.")}finally{r(!1)}},w=R=>R?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(R):"$0.00",j=()=>{const R=parseFloat(c.currentStock)||0,P=parseFloat(c.unitPrice)||0;return R*P},T=()=>{const R=parseInt(c.currentStock)||0;return R===0?"Out of Stock":R<=5?"Low Stock":"In Stock"},k=R=>{switch(R){case"In Stock":return"text-green-600";case"Low Stock":return"text-yellow-600";case"Out of Stock":return"text-red-600";default:return"text-gray-600"}};return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Item Details"})}),e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Item Name *"}),e.jsx("input",{type:"text",name:"name",value:c.name,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"e.g., Primary School Uniform - Boys"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Category *"}),e.jsxs("select",{name:"category",value:c.category,onChange:g,required:!0,disabled:p,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"",children:p?"Loading categories...":"Select Category"}),m.map(R=>e.jsx("option",{value:R.id,children:R.name},R.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reference *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"reference",value:c.reference,onChange:g,required:!0,className:"flex-1 px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"e.g., UNI-PRI-B-001"}),e.jsx("button",{type:"button",onClick:v,className:"px-3 py-2 bg-gray-100 text-gray-700 text-xs hover:bg-gray-200 border border-gray-300",children:"Auto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:c.description,onChange:g,rows:"2",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Brief description of the item..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Price (USD) *"}),e.jsx("input",{type:"number",name:"unitPrice",value:c.unitPrice,onChange:g,required:!0,step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"0.00"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Current Stock *"}),e.jsx("input",{type:"number",name:"currentStock",value:c.currentStock,onChange:g,required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Storage Location"}),e.jsx("input",{type:"text",name:"location",value:c.location,onChange:g,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"e.g., Storage Room A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Supplier"}),e.jsx("input",{type:"text",name:"supplier",value:c.supplier,onChange:g,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"e.g., Uniforms Plus Ltd"})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-200 rounded",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-900 mb-3",children:"Item Preview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Value:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:w(j())})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Stock Status:"}),e.jsx("span",{className:`ml-2 font-medium ${k(T())}`,children:T()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Category:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:m.find(R=>R.id===parseInt(c.category))?.name||"Not selected"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Reference:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:c.reference||"Not generated"})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end space-x-3",children:e.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50 flex items-center rounded",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-3.5 w-3.5 border-b-2 border-white mr-2"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{icon:ns,className:"mr-2"}),"Add Item"]})})})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:e.jsx("div",{className:"relative mx-auto p-6 border w-96 shadow-lg bg-white rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Success!"}),e.jsx("p",{className:"text-xs text-gray-600 mb-4",children:i}),e.jsx("button",{onClick:()=>o(null),className:"px-4 py-2 text-xs font-medium text-white bg-green-600 hover:bg-green-700 rounded",children:"OK"})]})})}),s&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 shadow-lg z-50 text-xs rounded",children:s})]})},kL=()=>{const t=Da(),[a]=Z7(),{token:r}=At(),[s,n]=x.useState(!1),[i,o]=x.useState(null),[c,u]=x.useState(null),[m,h]=x.useState(""),[p,y]=x.useState(""),[g,v]=x.useState(""),[N,w]=x.useState(!1),[j,T]=x.useState(!1),[k,R]=x.useState(!1),[P,$]=x.useState(!1),[A,M]=x.useState(null),[_,B]=x.useState(null),[D,C]=x.useState([]),[L,H]=x.useState([]),[V,Y]=x.useState([]),[J,W]=x.useState({itemId:"",studentId:"",quantity:1,paymentStatus:"pending",paymentMethod:"cash",amount:"",currency_id:"",reference:"",notes:"",issueDate:new Date().toISOString().split("T")[0]});x.useEffect(()=>{r&&(X(),te(),oe())},[r]);const X=async()=>{try{R(!0);const Ne=await re.get(`${se}/inventory/items?limit=100`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});Ne.data.success&&C(Ne.data.data)}catch(Ne){console.error(" Error loading inventory items:",Ne)}finally{R(!1)}},te=async()=>{H([])},oe=async()=>{try{const ce=(await re.get(`${se}/accounting/currencies`,{headers:{Authorization:`Bearer ${r}`}})).data.data||[];Y(ce);const De=ce.find(ye=>ye.base_currency);De&&W(ye=>({...ye,currency_id:De.id}))}catch(Ne){console.error("Error loading currencies:",Ne),o("Failed to load currencies. Please refresh the page.")}},q=[{value:"cash",label:"Cash"},{value:"card",label:"Credit/Debit Card"},{value:"bank_transfer",label:"Bank Transfer"},{value:"check",label:"Check"},{value:"mobile_money",label:"Mobile Money"}];x.useEffect(()=>{const Ne=a.get("item");if(Ne&&D.length>0){const ce=D.find(De=>De.id===parseInt(Ne));ce&&(M(ce),W(De=>({...De,itemId:ce.id.toString(),amount:ce.unit_price.toString()})))}},[a,D]);const G=Ne=>{const{name:ce,value:De}=Ne.target;if(W(ye=>({...ye,[ce]:De})),ce==="quantity"&&A){const ye=(parseFloat(De)*A.unit_price).toFixed(2);W(Ee=>({...Ee,amount:ye}))}},z=Ne=>{const ce=Ne.target.value;y(ce),w(ce.length>0)},Z=()=>{w(p.length>0)},Q=Ne=>{const ce=Ne.target.value;v(ce),T(ce.length>0)},fe=async()=>{if(!g.trim()){H([]),T(!1);return}$(!0);try{console.log(" Searching students with term:",g);try{const ce=await re.get(`${se}/students/${g.trim()}`,{headers:{Authorization:`Bearer ${r}`}});if(ce.data.success&&ce.data.data){console.log(" Exact student match found:",ce.data.data),H([ce.data.data]),T(!0),$(!1);return}}catch{console.log(" No exact match found, trying search...")}const Ne=await re.get(`${se}/students/search?query=${g}`,{headers:{Authorization:`Bearer ${r}`}});console.log(" Students search response:",Ne.data),H(Ne.data.data||[]),T(!0)}catch(Ne){console.error(" Error searching students:",Ne),H([]),T(!1)}finally{$(!1)}};x.useEffect(()=>{const Ne=ce=>{ce.target.closest(".search-container")||(w(!1),T(!1))};return document.addEventListener("mousedown",Ne),()=>{document.removeEventListener("mousedown",Ne)}},[]);const he=Ne=>{M(Ne),W(ce=>({...ce,itemId:Ne.id.toString(),amount:Ne.unit_price.toString()}))},ne=Ne=>{B(Ne),W(ce=>({...ce,studentId:Ne.RegNumber}))},me=async Ne=>{Ne.preventDefault();try{if(n(!0),o(null),!J.itemId||!J.studentId||!J.quantity){o("Please fill in all required fields");return}if(parseInt(J.quantity)<=0){o("Quantity must be greater than 0");return}if(parseInt(J.quantity)>A.current_stock){o(`Cannot issue more than available stock (${A.current_stock})`);return}const ce={item_id:parseInt(J.itemId),student_reg_number:_.RegNumber,quantity:parseInt(J.quantity),amount:parseFloat(J.amount),currency_id:J.currency_id,payment_status:J.paymentStatus,payment_method:J.paymentMethod,reference:J.reference||null,notes:J.notes||null,issue_date:J.issueDate};console.log(" Submitting issue data:",ce);const De=await re.post(`${se}/inventory/issues`,ce,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});console.log(" Issue created successfully:",De.data),u("Uniform issued successfully!"),setTimeout(()=>{const ye=V.find(Ee=>Ee.base_currency);W({itemId:"",studentId:"",quantity:1,paymentStatus:"pending",paymentMethod:"cash",amount:"",currency_id:ye?.id||"",reference:"",notes:"",issueDate:new Date().toISOString().split("T")[0]}),M(null),B(null),u(null),t("/dashboard/inventory")},2e3)}catch(ce){console.error(" Error issuing uniform:",ce),ce.response?.data?.message?o(ce.response.data.message):ce.response?.status===401?o("Authentication failed. Please log in again."):ce.response?.status===403?o("You do not have permission to issue uniforms."):o("Failed to issue uniform. Please try again.")}finally{n(!1)}},pe=Ne=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(Ne),ie=Ne=>Ne===0?"Out of Stock":Ne<=5?"Low Stock":"In Stock",ke=Ne=>{switch(Ne){case"In Stock":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(I,{icon:cr,className:"mr-1"}),"In Stock"]});case"Low Stock":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(I,{icon:Wn,className:"mr-1"}),"Low Stock"]});case"Out of Stock":return e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(I,{icon:Wt,className:"mr-1"}),"Out of Stock"]});default:return null}},Ae=D.filter(Ne=>{const ce=(Ne.name||"").toLowerCase(),De=(Ne.reference||"").toLowerCase(),ye=p.toLowerCase();return ce.includes(ye)||De.includes(ye)}),ae=L;return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Issue Uniform Details"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"search-container",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Search Uniform *"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(I,{icon:ua,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:k?"Loading items...":"Search uniforms by name or reference...",value:p,onChange:z,disabled:k,className:"w-full pl-10 pr-4 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500 disabled:bg-gray-100"})]}),e.jsx("button",{type:"button",onClick:Z,disabled:k||!p.trim(),className:"px-4 py-2 bg-gray-900 text-white text-xs hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:"Search"})]}),N&&e.jsx("div",{className:"mb-3 max-h-48 overflow-y-auto border border-gray-200 bg-white rounded shadow-sm",children:Ae.length>0?Ae.map(Ne=>e.jsx("div",{onClick:()=>{he(Ne),w(!1),y("")},className:"p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsx(I,{icon:Af,className:"text-blue-600 text-xs"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-900",children:Ne.name||"N/A"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Ref: ",Ne.reference||"N/A"]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-600",children:["Stock: ",Ne.current_stock||0]}),ke(ie(Ne.current_stock||0))]}),e.jsx("p",{className:"text-xs font-medium text-green-600 mt-1",children:pe(Ne.unit_price||0)})]})]})},Ne.id)):e.jsxs("div",{className:"p-3 text-center text-gray-500 text-xs",children:['No items found matching "',p,'"']})}),A&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 mb-3 rounded",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded",children:e.jsx(I,{icon:Af,className:"text-blue-600 text-xs"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-900",children:A.name||"N/A"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Ref: ",A.reference||"N/A"]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-600",children:["Stock: ",A.current_stock||0]}),ke(ie(A.current_stock||0))]}),e.jsx("p",{className:"text-xs font-medium text-green-600 mt-1",children:pe(A.unit_price||0)})]})]})})]}),e.jsxs("div",{className:"search-container",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Search Student *"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(I,{icon:as,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:P?"Loading students...":"Search by name or registration number...",value:g,onChange:Q,disabled:P,className:"w-full pl-10 pr-4 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500 disabled:bg-gray-100"})]}),e.jsx("button",{type:"button",onClick:fe,disabled:P||!g.trim(),className:"px-4 py-2 bg-gray-900 text-white text-xs hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed rounded",children:"Search"})]}),j&&e.jsx("div",{className:"mb-3 max-h-48 overflow-y-auto border border-gray-200 bg-white rounded shadow-sm",children:ae.length>0?ae.map(Ne=>e.jsx("div",{onClick:()=>{ne(Ne),T(!1),v("")},className:"p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded",children:e.jsx(I,{icon:as,className:"text-green-600 text-xs"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-900",children:[Ne.Name||""," ",Ne.Surname||""]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",Ne.RegNumber||"N/A"]}),e.jsxs("p",{className:"text-xs text-gray-600",children:[Ne.Class||"No class","  ",Ne.Gender||"N/A"]})]})]})},Ne.RegNumber)):e.jsxs("div",{className:"p-3 text-center text-gray-500 text-xs",children:['No students found matching "',g,'"']})}),_&&e.jsx("div",{className:"bg-green-50 border border-green-200 p-3 mb-3 rounded",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded",children:e.jsx(I,{icon:as,className:"text-green-600 text-xs"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-900",children:[_.Name||""," ",_.Surname||""]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",_.RegNumber||"N/A"]}),e.jsxs("p",{className:"text-xs text-gray-600",children:[_.Class||"No class","  ",_.Gender||"N/A"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Quantity *"}),e.jsx("input",{type:"number",name:"quantity",value:J.quantity,onChange:G,required:!0,min:"1",max:A?.current_stock||1,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"}),A&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Available: ",A.current_stock]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Issue Date"}),e.jsx("input",{type:"date",name:"issueDate",value:J.issueDate,onChange:G,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-900 mb-4",children:"Payment Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Amount *"}),e.jsx("input",{type:"number",name:"amount",value:J.amount,onChange:G,required:!0,step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Currency *"}),e.jsxs("select",{name:"currency_id",value:J.currency_id,onChange:G,required:!0,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"Select Currency"}),V.map(Ne=>e.jsxs("option",{value:Ne.id,children:[Ne.code," - ",Ne.name]},Ne.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Payment Method"}),e.jsx("select",{name:"paymentMethod",value:J.paymentMethod,onChange:G,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:q.map(Ne=>e.jsx("option",{value:Ne.value,children:Ne.label},Ne.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Payment Status"}),e.jsxs("select",{name:"paymentStatus",value:J.paymentStatus,onChange:G,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"partial",children:"Partial Payment"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Reference Number"}),e.jsx("input",{type:"text",name:"reference",value:J.reference,onChange:G,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter reference number (optional)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{name:"notes",value:J.notes,onChange:G,rows:"3",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Additional notes about the issue..."})]}),A&&_&&e.jsxs("div",{className:"bg-gray-50 p-4 border border-gray-200 rounded",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-900 mb-3",children:"Issue Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Student:"}),e.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:[_.Name||""," ",_.Surname||""," (",_.RegNumber||"N/A",")"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Uniform:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:A.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:pe((parseFloat(J.quantity)||0)*(parseFloat(J.amount)||0))})]})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end space-x-3",children:e.jsx("button",{type:"button",className:"px-6 py-2 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 disabled:opacity-50 flex items-center rounded",onClick:me,disabled:s||!A||!_,children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-3.5 w-3.5 border-b-2 border-white mr-2"}),"Issuing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{icon:as,className:"mr-2"}),"Issue Uniform"]})})}),c&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 shadow-lg z-50 text-xs rounded",children:c}),i&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 shadow-lg z-50 text-xs rounded",children:i})]})},AL=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState(null),[i,o]=x.useState(null),[c,u]=x.useState(!1),[m,h]=x.useState(null),[p,y]=x.useState([]),[g,v]=x.useState({name:"",icon:"faBoxes",color:"blue",description:""}),N=C=>({faBoxes:zv,faTshirt:Af,faBook:Zc,faFlask:X6,faFutbol:xg,faPalette:K6,faBroom:Z6,faLaptop:J6,faUtensils:Q6,faBuilding:Ri})[C]||zv,w=C=>({blue:"bg-blue-100 text-blue-800",green:"bg-green-100 text-green-800",purple:"bg-purple-100 text-purple-800",orange:"bg-orange-100 text-orange-800",pink:"bg-pink-100 text-pink-800",gray:"bg-gray-100 text-gray-800",indigo:"bg-indigo-100 text-indigo-800",red:"bg-red-100 text-red-800"})[C]||"bg-gray-100 text-gray-800",j=async()=>{if(!g.name.trim()){n("Category name is required");return}try{r(!0);const C=await A(g);y(L=>[...L,C.data]),v({name:"",icon:"faBoxes",color:"blue",description:""}),u(!1),o("Category added successfully!"),setTimeout(()=>o(null),3e3)}catch(C){n(C.message)}finally{r(!1)}},T=C=>{h(C),v({...C}),u(!0)},k=async()=>{if(!g.name.trim()){n("Category name is required");return}try{r(!0),await M(m.id,g),y(C=>C.map(L=>L.id===m.id?{...L,...g}:L)),h(null),v({name:"",icon:"faBoxes",color:"blue",description:""}),u(!1),o("Category updated successfully!"),setTimeout(()=>o(null),3e3)}catch(C){n(C.message)}finally{r(!1)}},R=async C=>{if(window.confirm("Are you sure you want to delete this category?"))try{r(!0),await _(C),y(L=>L.filter(H=>H.id!==C)),o("Category deleted successfully!"),setTimeout(()=>o(null),3e3)}catch(L){n(L.message)}finally{r(!1)}},P=()=>{v({name:"",icon:"faBoxes",color:"blue",description:""}),h(null),u(!1),n(null)},$=async()=>{try{r(!0);const C=await re.get(`${se}/inventory/categories`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});y(C.data.data)}catch(C){console.error("Error fetching categories:",C),n("Failed to fetch categories")}finally{r(!1)}},A=async C=>{try{return(await re.post(`${se}/inventory/categories`,C,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data}catch(L){throw L}},M=async(C,L)=>{try{return(await re.put(`${se}/inventory/categories/${C}`,L,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data}catch(H){throw H}},_=async C=>{try{return(await re.delete(`${se}/inventory/categories/${C}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data}catch(L){throw L}};x.useEffect(()=>{t&&$()},[t]);const B=[{value:"faBoxes",label:"Boxes",icon:zv},{value:"faTshirt",label:"T-Shirt",icon:Af},{value:"faBook",label:"Book",icon:Zc},{value:"faFlask",label:"Flask",icon:X6},{value:"faFutbol",label:"Sports",icon:xg},{value:"faPalette",label:"Art",icon:K6},{value:"faBroom",label:"Cleaning",icon:Z6},{value:"faLaptop",label:"IT",icon:J6},{value:"faUtensils",label:"Kitchen",icon:Q6},{value:"faBuilding",label:"Building",icon:Ri}],D=[{value:"blue",label:"Blue",class:"bg-blue-100 text-blue-800"},{value:"green",label:"Green",class:"bg-green-100 text-green-800"},{value:"purple",label:"Purple",class:"bg-purple-100 text-purple-800"},{value:"orange",label:"Orange",class:"bg-orange-100 text-orange-800"},{value:"pink",label:"Pink",class:"bg-pink-100 text-pink-800"},{value:"gray",label:"Gray",class:"bg-gray-100 text-gray-800"},{value:"indigo",label:"Indigo",class:"bg-indigo-100 text-indigo-800"},{value:"red",label:"Red",class:"bg-red-100 text-red-800"}];return e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Inventory Categories"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Manage item categories and organization"})]}),e.jsxs("button",{onClick:()=>u(!0),className:"bg-gray-900 text-white px-4 py-2 text-xs hover:bg-gray-800 flex items-center rounded",children:[e.jsx(I,{icon:Ht,className:"mr-2"}),"Add Category"]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded",children:e.jsx("div",{className:"p-4",children:a?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-b-2 border-gray-900 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading categories..."})]}):p.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-sm text-gray-600",children:"No categories found. Create your first category to get started."})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(C=>e.jsxs("div",{className:"bg-gray-50 border border-gray-200 p-4 rounded",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`p-2 rounded ${w(C.color)}`,children:e.jsx(I,{icon:N(C.icon),className:"text-sm"})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>T(C),className:"text-blue-600 hover:text-blue-900 text-xs",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>R(C.id),className:"text-red-600 hover:text-red-900 text-xs",children:e.jsx(I,{icon:sa})})]})]}),e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:C.name}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:C.description}),e.jsxs("span",{className:"text-xs text-gray-500",children:[C.item_count||0," items"]})]},C.id))})})}),c&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:m?"Edit Category":"Add New Category"}),e.jsx("button",{onClick:P,className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt})})]}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Category Name *"}),e.jsx("input",{type:"text",value:g.name,onChange:C=>v(L=>({...L,name:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"e.g., Uniforms"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Icon"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:B.map(C=>e.jsx("button",{type:"button",onClick:()=>v(L=>({...L,icon:C.value})),className:`p-2 border text-xs ${g.icon===C.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsx(I,{icon:C.icon,className:"text-sm"})},C.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Color"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:D.map(C=>e.jsx("button",{type:"button",onClick:()=>v(L=>({...L,color:C.value})),className:`p-2 border text-xs ${C.class} ${g.color===C.value?"ring-2 ring-blue-500":"hover:opacity-80"}`,children:C.label},C.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:g.description,onChange:C=>v(L=>({...L,description:C.target.value})),rows:"2",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Brief description of the category..."})]}),s&&e.jsx("div",{className:"text-red-600 text-xs",children:s}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 text-xs font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 rounded",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:m?k:j,className:"px-4 py-2 text-xs font-medium text-white bg-gray-900 hover:bg-gray-800 rounded",children:[m?"Update":"Add"," Category"]})]})]})]})})}),i&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 shadow-lg z-50 text-xs rounded",children:i}),s&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 shadow-lg z-50 text-xs rounded",children:s})]})},Hue=()=>{const[t,a]=x.useState("dashboard"),r=[{id:"dashboard",name:"Dashboard",icon:WB},{id:"add-item",name:"Add Item",icon:Ht},{id:"issue-uniform",name:"Issue Uniform",icon:Af},{id:"categories",name:"Categories",icon:EB}],s=()=>{const n=(()=>{switch(t){case"dashboard":return e.jsx(R7,{});case"add-item":return e.jsx(CL,{});case"issue-uniform":return e.jsx(kL,{});case"categories":return e.jsx(AL,{});default:return e.jsx(R7,{})}})();return e.jsx("div",{className:"h-full overflow-hidden",children:n})};return e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative",background:"#f9fafb"},children:[e.jsx("div",{className:"report-header",style:{flexShrink:0,padding:"15px 30px"},children:e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Inventory Management"}),e.jsx("p",{className:"report-subtitle",children:"Manage school uniforms, supplies, and stock levels."})]})}),e.jsx("div",{className:"report-filters",style:{flexShrink:0,padding:"0 30px 10px 30px"},children:e.jsx("div",{className:"report-filters-left",style:{overflowX:"auto",paddingBottom:"0"},children:e.jsx("div",{className:"flex space-x-1",children:r.map(n=>e.jsxs("button",{onClick:()=>a(n.id),className:`
                                    flex items-center px-4 py-2 text-xs font-medium rounded-md whitespace-nowrap transition-colors duration-200
                                    ${t===n.id?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}
                                `,children:[e.jsx(I,{icon:n.icon,className:`mr-2 h-3.5 w-3.5 ${t===n.id?"text-blue-600":"text-gray-400"}`}),n.name]},n.id))})})}),e.jsx("div",{className:"flex-1 overflow-auto",style:{padding:"0 30px 20px 30px"},children:s()})]})},Yue=()=>{const{token:t}=At(),a=Da(),[r,s]=x.useState([]),[n,i]=x.useState(!0),[o,c]=x.useState(null),[u,m]=x.useState(null),[h,p]=x.useState({students:[],employees:[]}),[y,g]=x.useState({current_page:1,total_pages:1,total_items:0,items_per_page:10}),[v,N]=x.useState({type:"",status:"published",target_type:"",priority:"",search:""});x.useEffect(()=>{w(),j()},[v,y.current_page]);const w=async()=>{try{i(!0);const _=new URLSearchParams({page:y.current_page,limit:y.items_per_page,...v}),B=t?{Authorization:`Bearer ${t}`}:{},D=await re.get(`${se}/announcements?${_}`,{headers:B});s(D.data.announcements),g(D.data.pagination)}catch(_){console.error("Error loading announcements:",_),c("Failed to load announcements")}finally{i(!1)}},j=async()=>{try{const _=t?{Authorization:`Bearer ${t}`}:{},[B,D]=await Promise.all([re.get(`${se}/announcements/targets/student`,{headers:_}),re.get(`${se}/announcements/targets/employee`,{headers:_})]);p({students:B.data.options,employees:D.data.options})}catch(_){console.error("Error loading target options:",_)}},T=_=>{const{name:B,value:D}=_.target;N(C=>({...C,[B]:D})),g(C=>({...C,current_page:1}))},k=_=>{a(`/dashboard/announcements/edit/${_.id}`)},R=async _=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{const B=t?{Authorization:`Bearer ${t}`}:{};await re.delete(`${se}/announcements/${_}`,{headers:B}),w()}catch(B){console.error("Error deleting announcement:",B),c("Failed to delete announcement")}},P=_=>{switch(_){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-blue-100 text-blue-800 border-blue-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},$=_=>{switch(_){case"published":return e.jsx(I,{icon:qa,className:"text-green-500"});case"draft":return e.jsx(I,{icon:yf,className:"text-yellow-500"});case"archived":return e.jsx(I,{icon:Wt,className:"text-gray-500"});default:return e.jsx(I,{icon:yf,className:"text-gray-500"})}},A=_=>_?new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",M=_=>{g(B=>({...B,current_page:_}))};return n&&r.length===0?e.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-2 md:py-4",children:e.jsxs("div",{className:"w-full px-2 md:px-4 lg:px-8",children:[e.jsx("div",{className:"mb-4 md:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg md:text-xl font-bold text-gray-900",children:"Announcements"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Manage and publish announcements for students and employees"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>a("/dashboard/announcements/add"),className:"bg-blue-600 text-white px-3 py-2 text-xs md:text-sm hover:bg-blue-700 flex items-center w-full sm:w-auto justify-center",children:[e.jsx(I,{icon:Ht,className:"mr-2"}),"Add Announcement"]})})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 shadow mb-4",children:[e.jsx("div",{className:"px-3 md:px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Filters"})}),e.jsx("div",{className:"p-3 md:p-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:ua,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",name:"search",value:v.search,onChange:T,placeholder:"Search announcements...",className:"w-full pl-8 pr-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{name:"type",value:v.type,onChange:T,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"student",children:"Students"}),e.jsx("option",{value:"employee",children:"Employees"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:v.status,onChange:T,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{name:"priority",value:v.priority,onChange:T,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"urgent",children:"Urgent"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Target"}),e.jsxs("select",{name:"target_type",value:v.target_type,onChange:T,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Targets"}),e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"specific",children:"Specific"})]})]})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 shadow",children:[o&&e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("div",{className:"p-3 bg-red-100 border border-red-200 text-red-700 text-xs",children:o})}),r.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12 px-4",children:[e.jsx(I,{icon:FN,className:"text-gray-300 text-3xl md:text-4xl mb-4"}),e.jsx("h3",{className:"text-sm md:text-base font-medium text-gray-900 mb-2",children:"No announcements found"}),e.jsx("p",{className:"text-gray-500 text-xs md:text-sm mb-4",children:"Create your first announcement to get started"}),e.jsxs("button",{onClick:()=>a("/dashboard/announcements/add"),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-xs md:text-sm font-medium hover:bg-blue-700",children:[e.jsx(I,{icon:Ht,className:"text-xs"}),"Create Announcement"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"divide-y divide-gray-200",children:r.map(_=>e.jsx("div",{className:"p-3 md:p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:_.title}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${P(_.priority)}`,children:_.priority}),$(_.status)]})]}),e.jsx("p",{className:"text-gray-600 text-xs mb-3 line-clamp-2",children:_.content}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(I,{icon:_.announcement_type==="student"?qN:Cr,className:"text-xs"}),e.jsx("span",{children:_.announcement_type==="student"?"Students":"Employees"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(I,{icon:Js,className:"text-xs"}),e.jsx("span",{className:"truncate",children:_.target_name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(I,{icon:Pa,className:"text-xs"}),e.jsx("span",{className:"hidden sm:inline",children:A(_.created_at)}),e.jsx("span",{className:"sm:hidden",children:new Date(_.created_at).toLocaleDateString()})]}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{children:["By: ",_.created_by_username]})})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:ml-4 flex-shrink-0",children:[e.jsx("button",{onClick:()=>k(_),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit announcement",children:e.jsx(I,{icon:Aa,className:"text-xs"})}),e.jsx("button",{onClick:()=>R(_.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete announcement",children:e.jsx(I,{icon:sa,className:"text-xs"})})]})]})},_.id))}),y.total_pages>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 px-3 md:px-4 py-3 border-t border-gray-200",children:[e.jsxs("div",{className:"text-xs text-gray-700 text-center sm:text-left",children:["Showing ",(y.current_page-1)*y.items_per_page+1," to ",Math.min(y.current_page*y.items_per_page,y.total_items)," of ",y.total_items," results"]}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>M(y.current_page-1),disabled:y.current_page===1,className:"px-3 py-1 text-xs border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"px-3 py-1 text-xs text-gray-700",children:["Page ",y.current_page," of ",y.total_pages]}),e.jsx("button",{onClick:()=>M(y.current_page+1),disabled:y.current_page===y.total_pages,className:"px-3 py-1 text-xs border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]})})},Gue=()=>{const t=Da(),{token:a}=At(),[r,s]=x.useState(!1),[n,i]=x.useState(null),[o,c]=x.useState(null),[u,m]=x.useState({students:[],employees:[]}),[h,p]=x.useState({title:"",content:"",announcement_type:"student",target_type:"all",target_value:"",priority:"medium",status:"draft",start_date:"",end_date:""});x.useEffect(()=>{y()},[]);const y=async()=>{try{const w=a?{Authorization:`Bearer ${a}`}:{},[j,T]=await Promise.all([re.get(`${se}/announcements/targets/student`,{headers:w}),re.get(`${se}/announcements/targets/employee`,{headers:w})]);console.log(" Students response:",j.data),console.log(" Employees response:",T.data),m({students:j.data.options||[],employees:T.data.options||[]})}catch(w){console.error("Error loading target options:",w)}},g=w=>{const{name:j,value:T}=w.target;p(k=>({...k,[j]:T}))},v=async w=>{w.preventDefault();try{s(!0),i(null),c(null);const j=a?{Authorization:`Bearer ${a}`}:{},T={...h,start_date:h.start_date||null,end_date:h.end_date||null,target_value:h.target_value||null};console.log(" Frontend submitting data:",T),console.log(" Original formData:",h),await re.post(`${se}/announcements`,T,{headers:j}),c("Announcement created successfully!"),setTimeout(()=>{p({title:"",content:"",announcement_type:"student",target_type:"all",target_value:"",priority:"medium",status:"draft",start_date:"",end_date:""}),c(null),t("/dashboard/announcements")},2e3)}catch(j){console.error("Error creating announcement:",j),j.response?.data?.message?i(j.response.data.message):j.response?.status===401?i("Authentication failed. Please log in again."):j.response?.status===403?i("You do not have permission to create announcements."):i("Failed to create announcement. Please try again.")}finally{s(!1)}},N=()=>{t("/dashboard/announcements")};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Add New Announcement"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Create announcements for students or employees"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>t("/dashboard/announcements"),className:"bg-gray-600 text-white px-3 py-2 text-xs hover:bg-gray-700 flex items-center",children:[e.jsx(I,{icon:Wt,className:"mr-2"}),"Cancel"]})})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 shadow",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Announcement Details"})}),e.jsxs("form",{onSubmit:v,className:"p-4",children:[o&&e.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-200 text-green-700 text-xs",children:o}),n&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 text-xs",children:n}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Title *"}),e.jsx("input",{type:"text",name:"title",value:h.title,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter announcement title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Target Audience *"}),e.jsxs("select",{name:"announcement_type",value:h.announcement_type,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"student",children:"Students"}),e.jsx("option",{value:"employee",children:"Employees"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{name:"priority",value:h.priority,onChange:g,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Target Type"}),e.jsxs("select",{name:"target_type",value:h.target_type,onChange:g,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsxs("option",{value:"all",children:["All ",h.announcement_type,"s"]}),e.jsxs("option",{value:"specific",children:["Specific ",h.announcement_type==="student"?"Class":"Department"]})]})]}),h.target_type==="specific"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:h.announcement_type==="student"?"Class":"Department"}),e.jsxs("select",{name:"target_value",value:h.target_value,onChange:g,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsxs("option",{value:"",children:["Select ",h.announcement_type==="student"?"Class":"Department"]}),(h.announcement_type==="student"?u.students:u.employees).length>0?(h.announcement_type==="student"?u.students:u.employees).map(w=>e.jsx("option",{value:w.id,children:w.stream_name?`${w.name} (${w.stream_name})`:w.name},w.id)):e.jsxs("option",{value:"",disabled:!0,children:["No ",h.announcement_type==="student"?"classes":"departments"," available"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",name:"start_date",value:h.start_date,onChange:g,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",name:"end_date",value:h.end_date,onChange:g,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:h.status,onChange:g,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Content *"}),e.jsx("textarea",{name:"content",value:h.content,onChange:g,required:!0,rows:"4",className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter announcement content..."})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 text-xs font-medium border border-gray-300",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:r,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-xs font-medium flex items-center",children:[r?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):e.jsx(I,{icon:ns,className:"mr-2"}),r?"Creating...":"Create Announcement"]})]})]})]})]})})},Vue=()=>{const t=Da(),{id:a}=Tn(),{token:r}=At(),[s,n]=x.useState(!1),[i,o]=x.useState(!0),[c,u]=x.useState(null),[m,h]=x.useState(null),[p,y]=x.useState({students:[],employees:[]}),[g,v]=x.useState({title:"",content:"",announcement_type:"student",target_type:"all",target_value:"",priority:"medium",status:"draft",start_date:"",end_date:""});x.useEffect(()=>{N(),w()},[a]);const N=async()=>{try{o(!0);const R=r?{Authorization:`Bearer ${r}`}:{},$=(await re.get(`${se}/announcements/${a}`,{headers:R})).data;v({title:$.title||"",content:$.content||"",announcement_type:$.announcement_type||"student",target_type:$.target_type||"all",target_value:$.target_value||"",priority:$.priority||"medium",status:$.status||"draft",start_date:$.start_date||"",end_date:$.end_date||""})}catch(R){console.error("Error loading announcement:",R),u("Failed to load announcement data")}finally{o(!1)}},w=async()=>{try{const R=r?{Authorization:`Bearer ${r}`}:{},[P,$]=await Promise.all([re.get(`${se}/announcements/targets/student`,{headers:R}),re.get(`${se}/announcements/targets/employee`,{headers:R})]);console.log(" Students response:",P.data),console.log(" Employees response:",$.data),y({students:P.data.options||[],employees:$.data.options||[]})}catch(R){console.error("Error loading target options:",R)}},j=R=>{const{name:P,value:$}=R.target;v(A=>({...A,[P]:$}))},T=async R=>{R.preventDefault();try{n(!0),u(null),h(null);const P=r?{Authorization:`Bearer ${r}`}:{},$={...g,start_date:g.start_date||null,end_date:g.end_date||null,target_value:g.target_value||null};console.log(" Frontend submitting data:",$),console.log(" Original formData:",g),await re.put(`${se}/announcements/${a}`,$,{headers:P}),h("Announcement updated successfully!"),setTimeout(()=>{t("/dashboard/announcements")},2e3)}catch(P){console.error("Error updating announcement:",P),u(P.response?.data?.error||"Failed to update announcement")}finally{n(!1)}},k=()=>{t("/dashboard/announcements")};return i?e.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading announcement..."})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Edit Announcement"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Update announcement details"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:k,className:"bg-gray-600 text-white px-3 py-2 text-xs hover:bg-gray-700 flex items-center",children:[e.jsx(I,{icon:Wt,className:"mr-2"}),"Cancel"]})})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 shadow",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Announcement Details"})}),e.jsxs("form",{onSubmit:T,className:"p-4",children:[m&&e.jsxs("div",{className:"mb-4 p-3 bg-green-100 border border-green-200 text-green-700 text-xs",children:[e.jsx(I,{icon:Ma,className:"mr-2"}),m]}),c&&e.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 text-xs",children:[e.jsx(I,{icon:Ma,className:"mr-2"}),c]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Title *"}),e.jsx("input",{type:"text",name:"title",value:g.title,onChange:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter announcement title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Content *"}),e.jsx("textarea",{name:"content",value:g.content,onChange:j,required:!0,rows:6,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",placeholder:"Enter announcement content"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Target Audience *"}),e.jsxs("select",{name:"announcement_type",value:g.announcement_type,onChange:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"student",children:"Students"}),e.jsx("option",{value:"employee",children:"Employees"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Target Type"}),e.jsxs("select",{name:"target_type",value:g.target_type,onChange:j,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsxs("option",{value:"all",children:["All ",g.announcement_type==="student"?"Students":"Employees"]}),e.jsxs("option",{value:"specific",children:["Specific ",g.announcement_type==="student"?"Class":"Department"]})]})]}),g.target_type==="specific"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:g.announcement_type==="student"?"Class":"Department"}),e.jsxs("select",{name:"target_value",value:g.target_value,onChange:j,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsxs("option",{value:"",children:["Select ",g.announcement_type==="student"?"Class":"Department"]}),(g.announcement_type==="student"?p.students:p.employees).length>0?(g.announcement_type==="student"?p.students:p.employees).map(R=>e.jsx("option",{value:R.id,children:R.stream_name?`${R.name} (${R.stream_name})`:R.name},R.id)):e.jsxs("option",{value:"",disabled:!0,children:["No ",g.announcement_type==="student"?"classes":"departments"," available"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{name:"priority",value:g.priority,onChange:j,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:g.status,onChange:j,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",name:"start_date",value:g.start_date,onChange:j,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",name:"end_date",value:g.end_date,onChange:j,className:"w-full px-3 py-2 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 text-xs font-medium border border-gray-300",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-xs font-medium flex items-center",children:[s?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):e.jsx(I,{icon:ns,className:"mr-2"}),s?"Updating...":"Update Announcement"]})]})]})]})]})})},EL=()=>{const{token:t}=At(),[a,r]=x.useState("structures"),[s,n]=x.useState([]),[i,o]=x.useState([]),[c,u]=x.useState(!1),[m,h]=x.useState(!1),[p,y]=x.useState(null),[g,v]=x.useState(!1),[N,w]=x.useState(new Date().getFullYear().toString()),[j,T]=x.useState({fee_name:"",description:"",amount:"",currency_id:"",fee_type:"one_time",academic_year:N});x.useEffect(()=>{k(),R()},[N]),x.useEffect(()=>{T(_=>({..._,academic_year:N}))},[N]);const k=async()=>{try{const B=await(await fetch(`${se}/additional-fees/structures?academic_year=${N}`,{headers:{Authorization:`Bearer ${t}`}})).json();B.success&&n(B.data)}catch(_){console.error("Error loading fee structures:",_)}},R=async()=>{try{const B=await(await fetch(`${se}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`}})).json();if(B.success){o(B.data);const D=B.data.find(C=>C.code==="USD");D&&T(C=>({...C,currency_id:D.id}))}}catch(_){console.error("Error loading currencies:",_)}},P=_=>{const{name:B,value:D}=_.target;T(C=>({...C,[B]:D}))},$=async _=>{_.preventDefault(),v(!0);try{console.log("Creating fee structure with data:",j);const B=await fetch(`${se}/additional-fees/structures`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(j)});console.log("Response status:",B.status);const D=await B.json();console.log("Response data:",D),D.success?(alert("Fee structure created successfully"),u(!1),T({fee_name:"",description:"",amount:"",currency_id:"",fee_type:"one_time"}),k()):alert(D.message||"Failed to create fee structure")}catch(B){console.error("Error creating fee structure:",B),alert("Error creating fee structure: "+B.message)}finally{v(!1)}},A=_=>{const B=s.find(D=>D.id===_);B&&(y(B),h(!0))},M=async()=>{if(p){v(!0),h(!1);try{const _={fee_structure_id:p.id,academic_year:N,due_date:""},D=await(await fetch(`${se}/additional-fees/assignments/bulk-annual`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(_)})).json();D.success?(alert(`"${p.fee_name}" generated for ${D.data.assignments_created} students`),k()):alert(D.message||"Failed to generate fee assignments")}catch(_){console.error("Error generating fee assignments:",_),alert("Error generating fee assignments")}finally{v(!1),y(null)}}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gray-50 py-2 md:py-6",children:e.jsxs("div",{className:"w-full px-2 md:px-4 lg:px-8",children:[e.jsx("div",{className:"mb-4 md:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg md:text-xl font-bold text-gray-900",children:"Additional Fees Management"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Manage textbook, registration, and report book fees"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Academic Year:"}),e.jsx("input",{type:"text",value:N,onChange:_=>w(_.target.value),placeholder:"e.g., 2025",className:"border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded w-20"})]}),e.jsxs("button",{onClick:()=>{k(),R()},className:"bg-gray-600 text-white px-3 py-2 text-xs hover:bg-gray-700 flex items-center w-full sm:w-auto justify-center",children:[e.jsx(I,{icon:uE,className:"mr-1"}),"Refresh"]})]})]})}),e.jsx("div",{className:"mb-4 md:mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-2 md:space-x-8 overflow-x-auto",children:e.jsxs("button",{onClick:()=>r("structures"),className:`py-2 px-1 border-b-2 font-medium text-xs flex items-center space-x-1 whitespace-nowrap ${a==="structures"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(I,{icon:Ph,className:"text-xs"}),e.jsx("span",{children:"Fee Structures"})]})})})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:gap-6",children:a==="structures"&&e.jsxs("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:[e.jsxs("div",{className:"px-3 md:px-4 py-3 border-b border-gray-200 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsx("h3",{className:"text-sm md:text-base font-medium text-gray-900",children:"Fee Structures"}),e.jsxs("button",{className:"btn-checklist",onClick:()=>u(!0),children:[e.jsx(I,{icon:Ht}),"Add Fee Structure"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"Fee Name"}),e.jsx("th",{style:{padding:"6px 10px"},className:"hidden sm:table-cell",children:"Description"}),e.jsx("th",{style:{padding:"6px 10px",textAlign:"right"},children:"Amount"}),e.jsx("th",{style:{padding:"6px 10px"},className:"hidden md:table-cell",children:"Type"}),e.jsx("th",{style:{padding:"6px 10px"},className:"hidden lg:table-cell",children:"Status"}),e.jsx("th",{style:{padding:"6px 10px",textAlign:"center"},children:"Actions"})]})}),e.jsx("tbody",{children:s.map((_,B)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:B%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:_.fee_type==="annual"?Zc:Wl,className:"mr-2 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,color:"#111827"},children:_.fee_name}),e.jsx("div",{className:"sm:hidden",style:{color:"#6b7280"},children:_.description})]})]})}),e.jsx("td",{style:{padding:"4px 10px",color:"#111827"},className:"hidden sm:table-cell",children:_.description}),e.jsxs("td",{style:{padding:"4px 10px",textAlign:"right",fontWeight:500,color:"#111827"},children:["$",(parseFloat(_.amount)||0).toFixed(2)]}),e.jsx("td",{style:{padding:"4px 10px"},className:"hidden md:table-cell",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_.fee_type==="annual"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:_.fee_type})}),e.jsx("td",{style:{padding:"4px 10px"},className:"hidden lg:table-cell",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:_.is_active?"Active":"Inactive"})}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",justifyContent:"center"},children:[e.jsx("button",{style:{color:"#4b5563",background:"none",border:"none",cursor:"pointer",padding:0},title:"Edit",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:0},title:"Delete",children:e.jsx(I,{icon:sa})}),_.fee_type==="annual"&&e.jsx("button",{style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0},onClick:()=>A(_.id),title:"Generate for all students",children:e.jsx(I,{icon:Zc})})]})})]},_.id))})]})})]})})]})}),c&&e.jsx("div",{className:"modal-overlay",onClick:()=>u(!1),children:e.jsxs("div",{className:"modal-dialog",onClick:_=>_.stopPropagation(),style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Create Fee Structure"}),e.jsx("button",{type:"button",className:"modal-close-btn",onClick:()=>u(!1),children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:$,className:"modal-form",children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fee Name"}),e.jsx("input",{type:"text",className:"form-control",name:"fee_name",value:j.fee_name,onChange:P,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{className:"form-control",name:"description",value:j.description,onChange:P,rows:"3"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Amount"}),e.jsx("input",{type:"number",className:"form-control",name:"amount",value:j.amount,onChange:P,step:"0.01",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Currency"}),e.jsxs("select",{className:"form-control",name:"currency_id",value:j.currency_id,onChange:P,required:!0,children:[e.jsx("option",{value:"",children:"Select Currency"}),i.map(_=>e.jsxs("option",{value:_.id,children:[_.name," (",_.code,")"]},_.id))]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(120px, 1fr) 1fr",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fee Type"}),e.jsxs("select",{className:"form-control",name:"fee_type",value:j.fee_type,onChange:P,children:[e.jsx("option",{value:"one_time",children:"One Time"}),e.jsx("option",{value:"annual",children:"Annual"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Academic Year"}),e.jsx("input",{type:"text",className:"form-control",name:"academic_year",value:j.academic_year||N,onChange:P,placeholder:"e.g., 2025",required:!0})]})]})]}),e.jsxs("div",{className:"modal-footer",style:{marginTop:"20px"},children:[e.jsx("button",{type:"button",className:"modal-btn modal-btn-cancel",onClick:()=>u(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"modal-btn modal-btn-confirm",disabled:g,children:g?"Creating...":"Create Structure"})]})]})})]})}),m&&p&&e.jsx("div",{className:"modal-overlay",onClick:()=>{h(!1),y(null)},children:e.jsxs("div",{className:"modal-dialog",onClick:_=>_.stopPropagation(),style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Confirm Bulk Generation"}),e.jsx("button",{type:"button",className:"modal-close-btn",onClick:()=>{h(!1),y(null)},children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(I,{icon:Ma,className:"text-yellow-500 text-xl"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:['Generate "',p.fee_name,'" for All Students']}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Fee Amount:"})," $",(parseFloat(p.amount)||0).toFixed(2)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fee Type:"})," ",p.fee_type]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Academic Year:"}),e.jsx("input",{type:"text",value:N,onChange:_=>w(_.target.value),placeholder:"e.g., 2025",className:"form-control",style:{width:"80px",display:"inline-block",padding:"2px 6px"}})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:e.jsxs("p",{className:"text-xs text-yellow-800",children:[e.jsx("strong",{children:"Warning:"})," This will create fee assignments for ",e.jsx("strong",{children:"ALL students"})," in the system. This action cannot be undone."]})})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"modal-btn modal-btn-cancel",onClick:()=>{h(!1),y(null)},children:"Cancel"}),e.jsx("button",{type:"button",className:"modal-btn modal-btn-confirm",style:{backgroundColor:"#dc2626",borderColor:"#dc2626"},onClick:M,disabled:g,children:g?"Generating...":"Yes, Generate for All Students"})]})]})})]})},Kue=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState([]),[i,o]=x.useState(!1),[c,u]=x.useState(null),[m,h]=x.useState(!1),[p,y]=x.useState(null),[g,v]=x.useState(!1),[N,w]=x.useState(!1),[j,T]=x.useState(""),[k,R]=x.useState(""),[P,$]=x.useState({category_name:"",description:"",is_active:!0});x.useEffect(()=>{A()},[]);const A=async()=>{r(!0);try{const L=await re.get(`${se}/waivers/categories`,{headers:{Authorization:`Bearer ${t}`}});n(L.data.data||[])}catch(L){console.error("Error fetching categories:",L),R("Failed to fetch waiver categories"),w(!0)}finally{r(!1)}},M=async L=>{if(L.preventDefault(),!P.category_name.trim()){R("Category name is required"),w(!0);return}r(!0);try{c?(await re.put(`${se}/waivers/categories/${c.id}`,P,{headers:{Authorization:`Bearer ${t}`}}),T("Waiver category updated successfully")):(await re.post(`${se}/waivers/categories`,P,{headers:{Authorization:`Bearer ${t}`}}),T("Waiver category created successfully")),v(!0),o(!1),u(null),$({category_name:"",description:"",is_active:!0}),A()}catch(H){console.error("Error saving category:",H),H.response?.data?.message?R(H.response.data.message):R("Failed to save waiver category"),w(!0)}finally{r(!1)}},_=L=>{u(L),$({category_name:L.category_name,description:L.description||"",is_active:L.is_active}),o(!0)},B=L=>{y(L),h(!0)},D=async()=>{if(p){r(!0);try{await re.delete(`${se}/waivers/categories/${p.id}`,{headers:{Authorization:`Bearer ${t}`}}),T("Waiver category deleted successfully"),v(!0),h(!1),y(null),A()}catch(L){console.error("Error deleting category:",L),R("Failed to delete waiver category"),w(!0)}finally{r(!1)}}},C=()=>{o(!1),u(null),$({category_name:"",description:"",is_active:!0})};return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("button",{onClick:()=>o(!0),className:"bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 flex items-center space-x-1",children:[e.jsx(I,{icon:Ht,className:"text-xs"}),e.jsx("span",{children:"Add Category"})]})}),e.jsx("div",{className:"bg-white border border-gray-200 p-3",children:a?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"Loading categories..."})}):s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:by,className:"text-4xl text-gray-300 mb-4"}),e.jsx("div",{className:"text-gray-500",children:"No waiver categories found"}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:'Click "Add Category" to create your first category'})]}):e.jsx("div",{className:"space-y-3",children:s.map(L=>e.jsx("div",{className:"border border-gray-200 p-3 rounded-lg hover:border-gray-300 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:L.category_name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${L.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:L.is_active?"Active":"Inactive"})]}),L.description&&e.jsx("p",{className:"text-xs text-gray-600",children:L.description}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Created: ",new Date(L.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>_(L),className:"text-gray-600 hover:text-gray-900 p-1",title:"Edit category",children:e.jsx(I,{icon:Aa,className:"text-xs"})}),e.jsx("button",{onClick:()=>B(L),className:"text-red-600 hover:text-red-900 p-1",title:"Delete category",children:e.jsx(I,{icon:sa,className:"text-xs"})})]})]})},L.id))})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-sm md:text-base font-bold text-gray-900",children:c?"Edit Category":"Add New Category"}),e.jsx("button",{onClick:C,className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt,className:"text-xs"})})]}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:P.category_name,onChange:L=>$(H=>({...H,category_name:L.target.value})),placeholder:"e.g., Staff Child, Scholarship",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:P.description,onChange:L=>$(H=>({...H,description:L.target.value})),placeholder:"Brief description of this waiver category...",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",rows:"3"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:P.is_active,onChange:L=>$(H=>({...H,is_active:L.target.checked})),className:"mr-2"}),e.jsx("label",{htmlFor:"is_active",className:"text-xs text-gray-700",children:"Active (can be used for new waivers)"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx("button",{type:"button",onClick:C,className:"px-3 py-1.5 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"px-3 py-1.5 bg-gray-900 text-white rounded text-xs hover:bg-gray-800 disabled:opacity-50",children:a?"Saving...":c?"Update":"Create"})]})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-sm md:text-base font-bold text-gray-900",children:"Confirm Delete"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt,className:"text-xs"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Are you sure you want to delete this waiver category?"}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("div",{className:"font-medium text-sm text-gray-900",children:p?.category_name}),p?.description&&e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:p.description})]}),e.jsx("p",{className:"text-xs text-red-600 mt-2",children:"This action cannot be undone. Existing waivers using this category will not be affected."})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>h(!1),className:"px-3 py-1.5 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:D,disabled:a,className:"px-3 py-1.5 bg-red-600 text-white rounded text-xs hover:bg-red-700 disabled:opacity-50",children:a?"Deleting...":"Delete"})]})]})}),e.jsx(Am,{isOpen:g,onClose:()=>v(!1),message:j}),e.jsx(dd,{isOpen:N,onClose:()=>w(!1),message:k})]})},I7=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState(""),[i,o]=x.useState(null),[c,u]=x.useState([]),[m,h]=x.useState([]),[p,y]=x.useState([]),[g,v]=x.useState(!1),[N,w]=x.useState(!1),[j,T]=x.useState(!1),[k,R]=x.useState(""),[P,$]=x.useState(""),[A,M]=x.useState({student_reg_number:"",waiver_amount:"",currency_id:"",category_id:"",reason:"",notes:"",term:"",academic_year:""});x.useEffect(()=>{_(),B()},[]);const _=async()=>{try{const Y=await re.get(`${se}/waivers/categories`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});h(Y.data.data||[])}catch(Y){console.error("Error fetching categories:",Y),$(`Failed to fetch waiver categories: ${Y.response?.data?.message||Y.message}`),T(!0)}},B=async()=>{try{const J=(await re.get(`${se}/accounting/currencies`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data.data||[];y(J);const W=J.find(X=>X.base_currency);W&&M(X=>({...X,currency_id:W.id}))}catch(Y){console.error("Error fetching currencies:",Y),$("Failed to load currencies. Please refresh the page.")}},D=async()=>{if(s.trim()){r(!0);try{const Y=await re.get(`${se}/students/search?query=${s}`,{headers:{Authorization:`Bearer ${t}`}});u(Y.data.data||[])}catch(Y){console.error("Error searching students:",Y),u([])}finally{r(!1)}}},C=Y=>{o(Y),M(J=>({...J,student_reg_number:Y.RegNumber})),u([]),n("")},L=async Y=>{if(Y.preventDefault(),!i){$("Please select a student"),T(!0);return}if(!A.waiver_amount||!A.currency_id||!A.category_id||!A.reason||!A.term||!A.academic_year){$("Please fill in all required fields including currency, term and academic year"),T(!0);return}if(parseFloat(A.waiver_amount)<=0){$("Waiver amount must be greater than 0"),T(!0);return}v(!0)},H=async()=>{r(!0),$("");try{const Y={student_reg_number:i.RegNumber,waiver_amount:parseFloat(A.waiver_amount),currency_id:A.currency_id,category_id:A.category_id,reason:A.reason,notes:A.notes,term:A.term,academic_year:A.academic_year};if((await re.post(`${se}/waivers/process`,Y,{headers:{Authorization:`Bearer ${t}`}})).data.success){R(`Waiver of ${A.waiver_amount} processed successfully for ${i.Name} ${i.Surname}`),w(!0),v(!1);const W=p.find(X=>X.base_currency);M({student_reg_number:"",waiver_amount:"",currency_id:W?.id||"",category_id:"",reason:"",notes:"",term:"",academic_year:""}),o(null)}}catch(Y){console.error("Error processing waiver:",Y),Y.response?.data?.message?$(Y.response.data.message):$("Failed to process waiver"),T(!0),v(!1)}finally{r(!1)}},V=()=>{v(!1),$("")};return e.jsxs("div",{className:"bg-white border border-gray-200 p-3",children:[e.jsxs("form",{onSubmit:L,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"Student Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Search Student ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(I,{icon:ua,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",value:s,onChange:Y=>n(Y.target.value),placeholder:"Enter student name or registration number...",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]}),e.jsx("button",{type:"button",onClick:D,className:"bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 w-full sm:w-auto",children:"Search"})]})]}),c.length>0&&e.jsxs("div",{className:"border border-gray-200 max-h-32 overflow-y-auto",children:[e.jsx("div",{className:"bg-blue-50 p-2 border-b border-gray-200",children:e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"Click on a student below to select:"})}),c.map(Y=>e.jsxs("div",{onClick:()=>C(Y),className:"p-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"font-medium text-gray-900 text-xs",children:[Y.Name," ",Y.Surname]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Reg: ",Y.RegNumber," | Class: ",Y.Class]})]},Y.RegNumber))]}),i&&e.jsxs("div",{className:"bg-green-50 border border-green-200 p-3",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(I,{icon:Hn,className:"text-green-600 text-xs mr-2"}),e.jsx("span",{className:"text-xs font-medium text-green-800",children:"Student Selected Successfully"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[i.Name," ",i.Surname]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Registration No:"}),e.jsx("span",{className:"ml-1 font-medium",children:i.RegNumber})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-1",children:"Waiver Details"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Waiver Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:Za,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"number",step:"0.01",value:A.waiver_amount,onChange:Y=>M(J=>({...J,waiver_amount:Y.target.value})),placeholder:"0.00",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Currency ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:A.currency_id,onChange:Y=>M(J=>({...J,currency_id:Y.target.value})),className:"w-full px-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Currency"}),p.map(Y=>e.jsxs("option",{value:Y.id,children:[Y.code," - ",Y.name]},Y.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Waiver Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:by,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsxs("select",{value:A.category_id,onChange:Y=>M(J=>({...J,category_id:Y.target.value})),className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),m.map(Y=>e.jsx("option",{value:Y.id,children:Y.category_name},Y.id))]})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:Wl,className:"absolute left-2 top-2 text-gray-400 text-xs"}),e.jsx("textarea",{value:A.reason,onChange:Y=>M(J=>({...J,reason:Y.target.value})),placeholder:"Explain why this waiver is being granted...",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",rows:"3",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Term ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:Pa,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsxs("select",{value:A.term,onChange:Y=>M(J=>({...J,term:Y.target.value})),className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Academic Year ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:Pa,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",value:A.academic_year,onChange:Y=>M(J=>({...J,academic_year:Y.target.value})),placeholder:"e.g., 2025",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",required:!0})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Additional Notes"}),e.jsx("textarea",{value:A.notes,onChange:Y=>M(J=>({...J,notes:Y.target.value})),placeholder:"Any additional notes or comments...",className:"w-full border border-gray-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",rows:"2"})]})]})]}),e.jsx("div",{className:"flex justify-center sm:justify-end",children:e.jsx("button",{type:"submit",disabled:a,className:"bg-gray-900 text-white px-4 py-2 text-xs hover:bg-gray-800 disabled:opacity-50 w-full sm:w-auto",children:a?"Processing...":"Process Waiver"})})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-sm md:text-base font-bold text-gray-900",children:"Confirm Waiver"}),e.jsx("button",{onClick:V,className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt,className:"text-xs"})})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Student:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[i?.Name," ",i?.Surname]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Registration:"}),e.jsx("span",{className:"font-medium text-gray-900",children:i?.RegNumber})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Waiver Amount:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:["$",A.waiver_amount]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Category:"}),e.jsx("span",{className:"font-medium text-gray-900",children:m.find(Y=>Y.id==A.category_id)?.category_name})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Reason:"}),e.jsx("span",{className:"font-medium text-gray-900",children:A.reason})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Term:"}),e.jsx("span",{className:"font-medium text-gray-900",children:A.term})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Academic Year:"}),e.jsx("span",{className:"font-medium text-gray-900",children:A.academic_year})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-3 mb-4",children:e.jsxs("p",{className:"text-xs text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," This waiver will credit the student's account and reduce their outstanding balance."]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[e.jsx("button",{onClick:V,className:"px-3 py-1.5 border border-gray-300 rounded text-xs text-gray-700 hover:bg-gray-50 w-full sm:w-auto",children:"Cancel"}),e.jsx("button",{onClick:H,disabled:a,className:"px-3 py-1.5 bg-gray-900 text-white rounded text-xs hover:bg-gray-800 disabled:opacity-50 w-full sm:w-auto",children:a?"Processing...":"Confirm Waiver"})]})]})}),e.jsx(Am,{isOpen:N,onClose:()=>w(!1),message:k}),e.jsx(dd,{isOpen:j,onClose:()=>T(!1),message:P})]})},Xue=()=>{const{token:t}=At(),[a,r]=x.useState(!1),[s,n]=x.useState([]),[i,o]=x.useState([]),[c,u]=x.useState({page:1,limit:20,total:0,totalPages:0}),[m,h]=x.useState({search:"",category_id:"",start_date:"",end_date:"",term:"",academic_year:""}),[p,y]=x.useState(!1),[g,v]=x.useState("");x.useEffect(()=>{N(),w()},[]),x.useEffect(()=>{w()},[c.page,m]);const N=async()=>{try{const A=await re.get(`${se}/waivers/categories`,{headers:{Authorization:`Bearer ${t}`}});o(A.data.data||[])}catch(A){console.error("Error fetching categories:",A)}},w=async()=>{r(!0);try{const A=new URLSearchParams({page:c.page,limit:c.limit,...m}),M=await re.get(`${se}/waivers/all?${A}`,{headers:{Authorization:`Bearer ${t}`}});n(M.data.data.waivers||[]),u(_=>({..._,...M.data.data.pagination}))}catch(A){console.error("Error fetching waivers:",A),v("Failed to fetch waivers"),y(!0)}finally{r(!1)}},j=(A,M)=>{h(_=>({..._,[A]:M})),u(_=>({..._,page:1}))},T=A=>{u(M=>({...M,page:A}))},k=A=>new Date(A).toLocaleDateString(),R=A=>`$${parseFloat(A).toFixed(2)}`,P=A=>{const M=A.match(/Fee Waiver - ([^:]+):/);return M?M[1]:"Unknown"},$=A=>({term:A.term||"N/A",year:A.academic_year||"N/A"});return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white border border-gray-200 p-3 mb-3",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-2",children:"Filters"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:ua,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",value:m.search,onChange:A=>j("search",A.target.value),placeholder:"Student name or reg number...",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Category"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:by,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsxs("select",{value:m.category_id,onChange:A=>j("category_id",A.target.value),className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Categories"}),i.map(A=>e.jsx("option",{value:A.id,children:A.category_name},A.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:Pa,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"date",value:m.start_date,onChange:A=>j("start_date",A.target.value),className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:Pa,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"date",value:m.end_date,onChange:A=>j("end_date",A.target.value),className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Term"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:Pa,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsxs("select",{value:m.term||"",onChange:A=>j("term",A.target.value),className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500",children:[e.jsx("option",{value:"",children:"All Terms"}),e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Academic Year"}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{icon:Pa,className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"}),e.jsx("input",{type:"text",value:m.academic_year||"",onChange:A=>j("academic_year",A.target.value),placeholder:"e.g., 2025",className:"w-full pl-6 pr-2 py-1.5 border border-gray-300 text-xs focus:outline-none focus:ring-1 focus:ring-gray-500 focus:border-gray-500"})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h3",{className:"text-xs font-medium text-gray-900",children:["Waivers (",c.total,")"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Page ",c.page," of ",c.totalPages]})]}),a?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"Loading waivers..."})}):s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{icon:Es,className:"text-4xl text-gray-300 mb-4"}),e.jsx("div",{className:"text-gray-500",children:"No waivers found"}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"Try adjusting your filters"})]}):e.jsx("div",{className:"space-y-3",children:s.map(A=>e.jsx("div",{className:"border border-gray-200 p-3 rounded-lg hover:border-gray-300 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("h4",{className:"font-medium text-gray-900 text-sm",children:[A.Name," ",A.Surname]}),e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:R(A.waiver_amount)})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Registration:"}),e.jsx("span",{className:"ml-1 font-medium",children:A.student_reg_number})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Category:"}),e.jsx("span",{className:"ml-1 font-medium",children:P(A.description)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Date:"}),e.jsx("span",{className:"ml-1 font-medium",children:k(A.transaction_date)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Term:"}),e.jsx("span",{className:"ml-1 font-medium",children:$(A).term})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Year:"}),e.jsx("span",{className:"ml-1 font-medium",children:$(A).year})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Processed by:"}),e.jsx("span",{className:"ml-1 font-medium",children:A.created_by||"System"})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-600 text-xs",children:"Reason:"}),e.jsx("p",{className:"text-xs text-gray-800 mt-1",children:A.description})]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{className:"text-gray-600 hover:text-gray-900 p-1",title:"View details",children:e.jsx(I,{icon:qa,className:"text-xs"})})})]})},A.id))}),c.totalPages>1&&e.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-6",children:[e.jsx("button",{onClick:()=>T(c.page-1),disabled:c.page===1,className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(I,{icon:gy,className:"text-xs"})}),e.jsx("div",{className:"flex space-x-1",children:Array.from({length:Math.min(5,c.totalPages)},(A,M)=>{const _=M+1;return e.jsx("button",{onClick:()=>T(_),className:`px-2 py-1 text-xs border rounded ${c.page===_?"bg-gray-900 text-white border-gray-900":"border-gray-300 hover:bg-gray-50"}`,children:_},_)})}),e.jsx("button",{onClick:()=>T(c.page+1),disabled:c.page===c.totalPages,className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(I,{icon:xy,className:"text-xs"})})]})]}),e.jsx(dd,{isOpen:p,onClose:()=>y(!1),message:g})]})},TL=()=>{const[t,a]=x.useState("process"),r=[{id:"process",name:"Process Waiver",icon:Wl},{id:"management",name:"View Waivers",icon:fy},{id:"categories",name:"Categories",icon:by}],s=()=>{switch(t){case"process":return e.jsx(I7,{});case"management":return e.jsx(Xue,{});case"categories":return e.jsx(Kue,{});default:return e.jsx(I7,{})}};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-2",children:e.jsxs("div",{className:"w-full px-2 md:px-4",children:[e.jsx("div",{className:"mb-3",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-bold text-gray-900",children:"Waiver Management"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Manage student fee waivers and categories"})]})}),e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex flex-wrap space-x-2 md:space-x-6 overflow-x-auto",children:r.map(n=>e.jsxs("button",{onClick:()=>a(n.id),className:`py-2 px-1 border-b-2 font-medium text-xs flex items-center space-x-1 whitespace-nowrap ${t===n.id?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(I,{icon:n.icon,className:"text-xs"}),e.jsx("span",{className:"hidden sm:inline",children:n.name}),e.jsx("span",{className:"sm:hidden",children:n.name.split(" ")[0]})]},n.id))})})}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.jsx("div",{children:s()})})]})})},Jue=()=>{const[t,a]=x.useState("record-payment");Da(),Co();const r=[{id:"record-payment",name:"Record Payment",icon:Bl},{id:"boarding-fees",name:"Boarding Fee Payments",icon:yy},{id:"outstanding-balance",name:"Outstanding Balance",icon:al},{id:"opening-balance",name:"Student Opening Balance",icon:xF},{id:"additional-fees",name:"Additional Fees",icon:BN},{id:"waivers",name:"Waivers",icon:LF},{id:"invoice-structures",name:"Invoice Structures",icon:CF},{id:"financial-record",name:"Student Financial Record",icon:lE}],s=()=>{const n=(()=>{switch(t){case"record-payment":return e.jsx(ny,{});case"boarding-fees":return e.jsx(NL,{onPaymentSuccess:()=>{}});case"outstanding-balance":return e.jsx(SL,{});case"opening-balance":return e.jsx(TO,{});case"additional-fees":return e.jsx(EL,{});case"waivers":return e.jsx(TL,{});case"invoice-structures":return e.jsx(wL,{});case"financial-record":return e.jsx(_L,{});default:return e.jsx(ny,{})}})();return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 h-full overflow-auto",children:n})};return e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsx("div",{className:"report-header",style:{flexShrink:0},children:e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Student Billing"}),e.jsx("p",{className:"report-subtitle",children:"Manage student fee payments, balances, and financial records."})]})}),e.jsx("div",{className:"report-filters",style:{flexShrink:0,paddingBottom:"0"},children:e.jsx("div",{className:"report-filters-left",style:{overflowX:"auto",paddingBottom:"10px"},children:e.jsx("div",{className:"flex space-x-1",children:r.map(n=>e.jsxs("button",{onClick:()=>a(n.id),className:`
                                    flex items-center px-3 py-1.5 text-xs font-medium rounded-md whitespace-nowrap transition-colors duration-200
                                    ${t===n.id?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}
                                `,children:[e.jsx(I,{icon:n.icon,className:`mr-2 h-3.5 w-3.5 ${t===n.id?"text-blue-600":"text-gray-400"}`}),n.name]},n.id))})})}),e.jsx("div",{className:"flex-1 overflow-auto",style:{paddingTop:"10px"},children:s()})]})},Zue=()=>{const{token:t}=At(),[a,r]=x.useState([]),[s,n]=x.useState(!0),[i,o]=x.useState(null),[c,u]=x.useState(""),[m,h]=x.useState(""),[p,y]=x.useState(1),[g,v]=x.useState(1),[N,w]=x.useState(0),[j]=x.useState(25),[T,k]=x.useState(!1),[R,P]=x.useState(!1),[$,A]=x.useState(null),[M,_]=x.useState({name:"",description:"",academic_year:new Date().getFullYear().toString(),term:"Term 1",days:["Monday","Tuesday","Wednesday","Thursday","Friday"]}),[B,D]=x.useState({message:null,type:"success",visible:!1}),[C,L]=x.useState(!1),[H,V]=x.useState(!1),[Y,J]=x.useState(null),[W,X]=x.useState(!1),[te,oe]=x.useState(!1),[q,G]=x.useState({id:"",name:"",description:"",academic_year:"",term:"",days:[]}),[z,Z]=x.useState(null),[Q,fe]=x.useState(!1),[he,ne]=x.useState(!1),[me,pe]=x.useState(null),[ie,ke]=x.useState(!1);x.useEffect(()=>{Ae()},[p,m]);const Ae=async()=>{try{if(n(!0),o(null),m&&m.trim()!==""){console.log(" Searching for:",m);const We=await re.get(`${se}/timetables/templates`,{params:{search:m.trim()},headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});r(We.data.data||[]),v(1),w(We.data.data?.length||0)}else{console.log(" Fetching all templates");const Ge=(await re.get(`${se}/timetables/templates`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data;console.log(" Raw response:",Ge);const lt=Ge.data||[],Dt=(p-1)*j,It=Dt+j,Bt=lt.slice(Dt,It),ze=Math.ceil(lt.length/j);r(Bt),v(ze),w(lt.length)}}catch(We){console.error("Error fetching templates:",We),We.response?o(`Error: ${We.response.status} - ${We.response.data?.message||We.response.statusText}`):We.request?o("No response from server. Please check your connection."):o(`Error: ${We.message}`)}finally{n(!1)}},ae=We=>{We.preventDefault(),console.log(" Starting search with term:",c),h(c),y(1)},Ne=()=>{k(!0),P(!0),setTimeout(()=>{P(!1)},300)},ce=()=>{k(!1),P(!1),A(null),_({name:"",description:"",academic_year:new Date().getFullYear().toString(),term:"Term 1",days:["Monday","Tuesday","Wednesday","Thursday","Friday"]})},De=We=>{const{name:Ge,value:lt}=We.target;_(Dt=>({...Dt,[Ge]:lt}))},ye=We=>{_(Ge=>({...Ge,days:Ge.days.includes(We)?Ge.days.filter(lt=>lt!==We):[...Ge.days,We]}))},Ee=async We=>{We.preventDefault(),P(!0),A(null);try{const Ge=await re.post(`${se}/timetables/templates`,M,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(Ge.data.success){await Ae(),ce();const lt=M.name;dt(`Timetable template ${lt} has been successfully added!`,"success")}else A(Ge.data.message||"Failed to create template")}catch(Ge){console.error("Error creating template:",Ge);let lt="An unexpected error occurred";if(Ge.response){const Dt=Ge.response.data;Dt?.error?lt=Dt.error:lt=Dt?.message||`Server Error (${Ge.response.status})`}else Ge.request?lt="No response from server. Please check your internet connection.":lt=Ge.message||"An unexpected error occurred";A(lt)}finally{P(!1)}},Ke=async We=>{L(!0),V(!0),J(null);try{const Ge=await re.get(`${se}/timetables/templates/${We}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});J(Ge.data.data)}catch(Ge){console.error("Error fetching template:",Ge),dt("Failed to load template details","error"),L(!1)}finally{V(!1)}},Re=()=>{L(!1),J(null),V(!1)},Le=async We=>{X(!0),oe(!0),Z(null),G({id:"",name:"",description:"",academic_year:"",term:"",days:[]});try{const lt=(await re.get(`${se}/timetables/templates/${We}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data.data,Dt=lt.days?.map(It=>It.day_of_week)||[];G({id:lt.id||"",name:lt.name||"",description:lt.description||"",academic_year:lt.academic_year||"",term:lt.term||"",days:Dt})}catch(Ge){console.error("Error fetching template for edit:",Ge),dt("Failed to load template details for editing","error"),X(!1)}finally{oe(!1)}},Oe=()=>{X(!1),G({id:"",name:"",description:"",academic_year:"",term:"",days:[]}),Z(null),fe(!1)},$e=We=>{const{name:Ge,value:lt}=We.target;G(Dt=>({...Dt,[Ge]:lt}))},ct=We=>{G(Ge=>({...Ge,days:Ge.days.includes(We)?Ge.days.filter(lt=>lt!==We):[...Ge.days,We]}))},Nt=async We=>{We.preventDefault(),fe(!0),Z(null);try{await re.put(`${se}/timetables/templates/${q.id}`,q,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),await Ae(),Oe(),dt(`Timetable template ${q.name} has been successfully updated!`,"success")}catch(Ge){console.error("Error updating template:",Ge);let lt="An unexpected error occurred";if(Ge.response){const Dt=Ge.response.data;Dt?.error?lt=Dt.error:lt=Dt?.message||`Server Error (${Ge.response.status})`}else Ge.request?lt="No response from server. Please check your internet connection.":lt=Ge.message||"An unexpected error occurred";Z(lt)}finally{fe(!1)}},jt=()=>q.name&&q.academic_year&&q.term&&q.days.length>0,xt=We=>{pe(We),ne(!0)},we=()=>{ne(!1),pe(null),ke(!1)},Ie=async()=>{if(me){ke(!0);try{await re.put(`${se}/timetables/templates/${me.id}`,{is_active:!1},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),await Ae(),we(),dt(`Timetable template ${me.name} has been successfully deleted!`,"success")}catch(We){console.error("Error deleting template:",We);let Ge="Failed to delete template";We.response?Ge=We.response.data?.message||`Server Error (${We.response.status})`:We.request&&(Ge="No response from server. Please check your internet connection."),dt(Ge,"error")}finally{ke(!1)}}},dt=(We,Ge="success",lt=3e3)=>{D({message:We,type:Ge,visible:!0}),lt>0&&setTimeout(()=>{D(Dt=>({...Dt,visible:!1})),setTimeout(()=>{D({message:null,type:"success",visible:!1})},300)},lt)},ut=We=>{const Ge={width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"};return We==="success"?e.jsxs("svg",{...Ge,children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}):We==="error"?e.jsxs("svg",{...Ge,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}):We==="info"?e.jsxs("svg",{...Ge,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}):null},Te=We=>{switch(We){case"success":return"#10b981";case"error":return"#ef4444";case"info":return"#2563eb";case"warning":return"#f59e0b";default:return"#10b981"}},Ve=()=>M.name&&M.academic_year&&M.term&&M.days.length>0,qe=a.length>0?(p-1)*j+1:0,Xe=Math.min(p*j,N);return a.length>0,s&&a.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading timetables..."})}):e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Timetables"}),e.jsx("p",{className:"report-subtitle",children:"Manage timetable templates and schedules."})]}),e.jsx("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"},children:e.jsxs("button",{onClick:Ne,className:"btn-checklist",children:[e.jsx(I,{icon:Ht}),"Add Template"]})})]}),e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsx("div",{className:"report-filters-left",children:e.jsx("form",{onSubmit:ae,className:"filter-group",children:e.jsxs("div",{className:"search-input-wrapper",style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:ua,className:"search-icon"}),e.jsx("input",{type:"text",value:c,onChange:We=>u(We.target.value),placeholder:"Search by template name, year, or term...",className:"filter-input search-input"}),c&&e.jsx("button",{onClick:()=>{u(""),h(""),y(1)},style:{position:"absolute",right:"8px",padding:"4px 6px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},title:"Clear search",children:""})]})})})}),i&&e.jsx("div",{style:{padding:"10px 30px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem"},children:i}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:s&&a.length===0?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading timetables..."}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"TEMPLATE NAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACADEMIC YEAR"}),e.jsx("th",{style:{padding:"6px 10px"},children:"TERM"}),e.jsx("th",{style:{padding:"6px 10px"},children:"DAYS"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ENTRIES"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STATUS"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[a.map((We,Ge)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:Ge%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:xm,style:{color:"#64748b",fontSize:"0.875rem"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:We.name}),We.description&&e.jsx("div",{style:{fontSize:"0.7rem",color:"#64748b",marginTop:"2px"},children:We.description})]})]})}),e.jsx("td",{style:{padding:"4px 10px"},children:We.academic_year}),e.jsx("td",{style:{padding:"4px 10px"},children:We.term}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(I,{icon:Wn,style:{fontSize:"0.75rem",color:"#64748b"}}),We.total_days||0]})}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(I,{icon:Cr,style:{fontSize:"0.75rem",color:"#64748b"}}),We.total_entries||0]})}),e.jsx("td",{style:{padding:"4px 10px"},children:We.is_active?e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"2px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:500,background:"#d1fae5",color:"#065f46"},children:[e.jsx(I,{icon:cr,style:{fontSize:"0.7rem"}}),"Active"]}):e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"2px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:500,background:"#f3f4f6",color:"#374151"},children:[e.jsx(I,{icon:Ma,style:{fontSize:"0.7rem"}}),"Inactive"]})}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>Ke(We.id),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0},title:"View",children:e.jsx(I,{icon:qa})}),e.jsx("button",{onClick:()=>Le(We.id),style:{color:"#6366f1",background:"none",border:"none",cursor:"pointer",padding:0},title:"Edit",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>xt(We),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:0},title:"Delete",children:e.jsx(I,{icon:sa})})]})})]},We.id)),Array.from({length:Math.max(0,25-a.length)}).map((We,Ge)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(a.length+Ge)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${Ge}`))]})]})}),e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",qe," to ",Xe," of ",N||0," results."]}),e.jsxs("div",{className:"table-footer-right",children:[!m&&g>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>y(Math.max(1,p-1)),disabled:p===1,children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",p," of ",g]}),e.jsx("button",{className:"pagination-btn",onClick:()=>y(Math.min(g,p+1)),disabled:p===g,children:"Next"})]}),!m&&g<=1&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"All data displayed"})]})]}),T&&e.jsx("div",{className:"modal-overlay",onClick:ce,children:e.jsx("div",{className:"modal-dialog",onClick:We=>We.stopPropagation(),style:{maxWidth:"600px",minHeight:R?"400px":"auto"},children:R?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{style:{marginTop:"15px",color:"var(--text-secondary)"},children:"Loading..."})]}),e.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{height:"32px",width:"100px",background:"#e5e7eb",borderRadius:"4px"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Add Timetable Template"}),e.jsx("button",{className:"modal-close-btn",onClick:ce,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[$&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:$}),e.jsxs("form",{onSubmit:Ee,className:"modal-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Template Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"name",className:"form-control",placeholder:"e.g., Term 1 2025",value:M.name,onChange:De,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{name:"description",className:"form-control",placeholder:"Brief description of this timetable template",rows:"3",value:M.description,onChange:De})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Academic Year ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"academic_year",className:"form-control",placeholder:"e.g., 2025",value:M.academic_year,onChange:De,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Term ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"term",className:"form-control",value:M.term,onChange:De,required:!0,children:[e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"}),e.jsx("option",{value:"Semester 1",children:"Semester 1"}),e.jsx("option",{value:"Semester 2",children:"Semester 2"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Days of Week ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginTop:"8px",padding:"12px",background:"#f9fafb",borderRadius:"6px",border:"1px solid #e5e7eb"},children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(We=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"6px 8px",borderRadius:"4px",transition:"background-color 0.2s",userSelect:"none"},onMouseEnter:Ge=>Ge.currentTarget.style.background="#f3f4f6",onMouseLeave:Ge=>Ge.currentTarget.style.background="transparent",children:[e.jsx("input",{type:"checkbox",checked:M.days.includes(We),onChange:()=>ye(We),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#2563eb"}}),e.jsx("span",{style:{fontSize:"0.875rem",color:"var(--text-primary)",fontWeight:400},children:We})]},We))})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:ce,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:Ee,disabled:!Ve()||R,children:R?"Creating...":"Create Template"})]})]})})}),C&&e.jsx("div",{className:"modal-overlay",onClick:Re,children:e.jsx("div",{className:"modal-dialog",onClick:We=>We.stopPropagation(),style:{maxWidth:"600px",minHeight:H?"400px":"auto"},children:H?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{style:{marginTop:"15px",color:"var(--text-secondary)"},children:"Loading template details..."})]}),e.jsx("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}})})]}):Y?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",style:{color:"#000000"},children:["Template Details - ",Y.name]}),e.jsx("button",{className:"modal-close-btn",onClick:Re,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:e.jsxs("div",{children:[e.jsxs("h4",{style:{margin:0,fontSize:"0.95rem",fontWeight:"700",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:xm,style:{color:"#2563eb"}}),"Template Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px 30px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Template Name"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:Y.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Academic Year"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:Y.academic_year||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Term"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:Y.term||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Status"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:Y.is_active?"Active":"Inactive"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Total Days"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:Y.total_days||0})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Total Entries"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:Y.total_entries||0})]}),Y.description&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",marginBottom:"6px"},children:"Description"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)",fontWeight:"400"},children:Y.description})]})]})]})})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:Re,children:"Close"})})]}):null})}),W&&e.jsx("div",{className:"modal-overlay",onClick:Oe,children:e.jsx("div",{className:"modal-dialog",onClick:We=>We.stopPropagation(),style:{maxWidth:"600px",minHeight:te?"400px":"auto"},children:te?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{style:{marginTop:"15px",color:"var(--text-secondary)"},children:"Loading template details..."})]}),e.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{height:"32px",width:"100px",background:"#e5e7eb",borderRadius:"4px"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Edit Timetable Template"}),e.jsx("button",{className:"modal-close-btn",onClick:Oe,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[z&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:z}),e.jsxs("form",{onSubmit:Nt,className:"modal-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Template Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"name",className:"form-control",placeholder:"e.g., Term 1 2025",value:q.name,onChange:$e,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{name:"description",className:"form-control",placeholder:"Brief description of this timetable template",rows:"3",value:q.description,onChange:$e})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Academic Year ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"academic_year",className:"form-control",placeholder:"e.g., 2025",value:q.academic_year,onChange:$e,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Term ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"term",className:"form-control",value:q.term,onChange:$e,required:!0,children:[e.jsx("option",{value:"Term 1",children:"Term 1"}),e.jsx("option",{value:"Term 2",children:"Term 2"}),e.jsx("option",{value:"Term 3",children:"Term 3"}),e.jsx("option",{value:"Semester 1",children:"Semester 1"}),e.jsx("option",{value:"Semester 2",children:"Semester 2"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Days of Week ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginTop:"8px",padding:"12px",background:"#f9fafb",borderRadius:"6px",border:"1px solid #e5e7eb"},children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(We=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"6px 8px",borderRadius:"4px",transition:"background-color 0.2s",userSelect:"none"},onMouseEnter:Ge=>Ge.currentTarget.style.background="#f3f4f6",onMouseLeave:Ge=>Ge.currentTarget.style.background="transparent",children:[e.jsx("input",{type:"checkbox",checked:q.days.includes(We),onChange:()=>ct(We),style:{cursor:"pointer",width:"16px",height:"16px",accentColor:"#2563eb"}}),e.jsx("span",{style:{fontSize:"0.875rem",color:"var(--text-primary)",fontWeight:400},children:We})]},We))})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:Oe,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:Nt,disabled:!jt()||Q,children:Q?"Saving...":"Update Template"})]})]})})}),he&&me&&e.jsx("div",{className:"modal-overlay",onClick:we,children:e.jsxs("div",{className:"modal-dialog",onClick:We=>We.stopPropagation(),style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Confirm Delete"}),e.jsx("button",{className:"modal-close-btn",onClick:we,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"#fee2e2",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#ef4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"4px"},children:"Are you sure you want to delete this template?"}),e.jsx("p",{style:{margin:0,fontSize:"0.75rem",color:"var(--text-secondary)"},children:"This action cannot be undone."})]})]}),e.jsxs("div",{style:{padding:"12px",background:"#f9fafb",borderRadius:"4px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Template Information"}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Name:"})," ",me.name]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Academic Year:"})," ",me.academic_year||"N/A"]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Term:"})," ",me.term||"N/A"]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:we,disabled:ie,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-delete",onClick:Ie,disabled:ie,children:ie?"Deleting...":"Delete Template"})]})]})}),B.visible&&B.message&&e.jsx("div",{className:"success-toast",children:e.jsxs("div",{className:"success-toast-content",style:{background:Te(B.type)},children:[ut(B.type),e.jsx("span",{children:B.message})]})})]})},Que=({templateId:t,entries:a,onEntryUpdate:r,onEntryDelete:s})=>{const{token:n}=At(),[i,o]=x.useState({}),[c,u]=x.useState(!0),[m,h]=x.useState(!1),[p,y]=x.useState(null),g=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];x.useEffect(()=>{(async()=>{try{u(!0);const R={};for(const P of g){const $=await re.get(`${se}/timetables/templates/${t}/periods/${P}`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});$.data.success&&(R[P]=$.data.data||[])}o(R)}catch(R){console.error("Error fetching periods:",R)}finally{u(!1)}})()},[t]);const v=(k,R)=>a.find(P=>P.day_of_week===k&&P.period_id===R),N=k=>(i[k]||[]).sort((P,$)=>P.start_time.localeCompare($.start_time)),w=(k,R)=>{if(R.is_break)return;const P=v(k,R.id);y({day:k,period:R,entry:P}),h(!0)},j=async k=>{try{p.entry?(await fetch(`${se}/timetables/entries/${p.entry.id}`,{method:"PUT",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(k)})).ok&&r&&r():(await fetch(`${se}/timetables/templates/${t}/entries`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({...k,day_of_week:p.day,period_id:p.period.id})})).ok&&r&&r(),h(!1),y(null)}catch(R){console.error("Error saving entry:",R)}},T=async k=>{if(window.confirm("Are you sure you want to delete this entry?"))try{(await fetch(`${se}/timetables/entries/${k}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).ok&&s&&s()}catch(R){console.error("Error deleting entry:",R)}};return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading timetable..."})}):e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Time"}),g.map(k=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-48",children:k},k))]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Object.keys(i).length>0&&N(g[0]).map(k=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 bg-gray-50",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:Wn,className:"h-4 w-4 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:k.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[k.start_time," - ",k.end_time]})]})]})}),g.map(R=>{const P=i[R]?.find(A=>A.id===k.id),$=v(R,k.id);return P?e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:P.is_break?e.jsx("div",{className:"flex items-center justify-center p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-red-800",children:P.name}),e.jsx("div",{className:"text-xs text-red-600",children:P.period_type})]})}):$?e.jsxs("div",{className:"group relative",children:[e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors cursor-pointer",children:[e.jsx("div",{className:"font-medium text-blue-900",children:$.subject_name}),e.jsx("div",{className:"text-xs text-blue-700",children:$.teacher_name}),e.jsx("div",{className:"text-xs text-blue-600",children:$.class_name||$.stream_name})]}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:A=>{A.stopPropagation(),y({day:R,period:P,entry:$}),h(!0)},className:"p-1 bg-white rounded shadow-sm hover:bg-gray-50",title:"Edit Entry",children:e.jsx(I,{icon:Aa,className:"h-3 w-3 text-gray-600"})}),e.jsx("button",{onClick:A=>{A.stopPropagation(),T($.id)},className:"p-1 bg-white rounded shadow-sm hover:bg-red-50",title:"Delete Entry",children:e.jsx(I,{icon:sa,className:"h-3 w-3 text-red-600"})})]})})]}):e.jsxs("button",{onClick:()=>w(R,P),className:"w-full p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors text-gray-500 hover:text-blue-600",children:[e.jsx(I,{icon:Ht,className:"h-4 w-4 mx-auto mb-1"}),e.jsx("div",{className:"text-xs",children:"Add Class"})]})},R):e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400 bg-gray-50",children:"-"},R)})]},k.id))})]})}),m&&p&&e.jsx(eme,{selectedCell:p,templateId:t,onClose:()=>{h(!1),y(null)},onSave:j})]})},eme=({selectedCell:t,templateId:a,onClose:r,onSave:s})=>{const{token:n}=At(),[i,o]=x.useState([]),[c,u]=x.useState(!1),[m,h]=x.useState({subject_class_id:t.entry?.subject_class_id||""});x.useEffect(()=>{(async()=>{try{const v=await fetch(`${se}/timetables/templates/${a}/available-subject-classes`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(v.ok){const N=await v.json();o(N.data||[])}}catch(v){console.error("Error fetching subject classes:",v)}})()},[a]);const p=async g=>{g.preventDefault(),u(!0),await s(m),u(!1)},y=g=>{const{name:v,value:N}=g.target;h(w=>({...w,[v]:N}))};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:[t.entry?"Edit Entry":"Add Entry"," - ",t.day]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[t.period.name," (",t.period.start_time," - ",t.period.end_time,")"]}),e.jsxs("form",{onSubmit:p,children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject Class *"}),e.jsxs("select",{name:"subject_class_id",value:m.subject_class_id,onChange:y,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select a subject class"}),i.map(g=>e.jsxs("option",{value:g.id,children:[g.subject_name," - ",g.teacher_name," (",g.class_name||g.stream_name,")"]},g.id))]})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:c?"Saving...":t.entry?"Update":"Add"})]})]})]})})},tme=()=>{const{id:t}=Tn(),a=Da(),{token:r}=At(),[s,n]=x.useState(null),[i,o]=x.useState(!0),[c,u]=x.useState(""),[m,h]=x.useState("overview"),[p,y]=x.useState([]),[g,v]=x.useState([]),[N,w]=x.useState(null),j=async()=>{try{o(!0);const M=await re.get(`${se}/timetables/templates/${t}`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});M.data.success?n(M.data.data):u("Failed to fetch template details")}catch(M){console.error("Error fetching template:",M),u("Failed to fetch template details")}finally{o(!1)}},T=async()=>{try{const M=await re.get(`${se}/timetables/templates/${t}/entries`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});M.data.success&&y(M.data.data||[])}catch(M){console.error("Error fetching entries:",M)}},k=()=>{T()},R=()=>{T()},P=async()=>{try{const M=await fetch(`${se}/timetable-generation/templates/${t}/conflicts`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(M.ok){const _=await M.json();v(_.data.conflicts||[])}}catch(M){console.error("Error fetching conflicts:",M)}},$=async()=>{try{const M=await fetch(`${se}/timetable-generation/templates/${t}/stats`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(M.ok){const _=await M.json();w(_.data)}}catch(M){console.error("Error fetching stats:",M)}},A=async()=>{try{const M=await fetch(`${se}/timetable-generation/templates/${t}/generate`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({options:{clearExisting:!0,strategy:"balanced"}})});if(M.ok){const _=await M.json();alert(`Timetable generated successfully! ${_.data.generated_entries} entries created.`),T(),P(),$()}else{const _=await M.json();alert(`Failed to generate timetable: ${_.message}`)}}catch(M){console.error("Error generating timetable:",M),alert("Failed to generate timetable")}};return x.useEffect(()=>{j()},[t]),x.useEffect(()=>{s&&(T(),P(),$())},[s]),i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading template..."})}):c?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(AlertCircle,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:c}),e.jsx("button",{onClick:()=>a("/dashboard/timetables"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Timetables"})]})}):s?e.jsxs("div",{className:"",children:[i?e.jsx("div",{className:"text-xs text-gray-500 mb-4",children:"Loading..."}):c?e.jsx("div",{className:"text-xs text-red-600 mb-4",children:c}):s?e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsxs("div",{className:"px-6 pt-2 pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>a("/dashboard/timetables"),className:"mr-4 p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(I,{icon:fm,className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl text-gray-900 font-semibold mb-1",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:[s.academic_year," - ",s.term]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:A,className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(I,{icon:Dh,className:"mr-1 h-3 w-3"}),"Generate Timetable"]}),e.jsxs("button",{onClick:()=>a(`/dashboard/timetables/template/${t}/edit`),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[e.jsx(I,{icon:Aa,className:"mr-1 h-3 w-3"}),"Edit Template"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-8 text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[e.jsx(I,{icon:xm,className:"mr-2 h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Template:"}),e.jsx("span",{className:"ml-1 text-gray-900",children:s.name})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:Wn,className:"mr-2 h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Days:"}),e.jsxs("span",{className:"ml-1 text-gray-900",children:[s.days?.length||0," configured"]})]})]})]})}):null,e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"overview",name:"Overview",icon:xm},{id:"timetable",name:"Timetable",icon:Wn},{id:"conflicts",name:"Conflicts",icon:Ma},{id:"stats",name:"Statistics",icon:Oh}].map(M=>e.jsxs("button",{onClick:()=>h(M.id),className:`py-3 text-sm font-medium border-b-2 transition-colors duration-150 ${m===M.id?"border-gray-700 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(I,{icon:M.icon,className:"mr-2 h-4 w-4"}),M.name]},M.id))})}),m==="overview"&&e.jsx(ame,{template:s}),m==="timetable"&&e.jsx(rme,{template:s,entries:p,onEntryUpdate:k,onEntryDelete:R}),m==="conflicts"&&e.jsx(sme,{conflicts:g}),m==="stats"&&e.jsx(nme,{stats:N})]}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Calendar,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Template Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"The requested timetable template could not be found."}),e.jsx("button",{onClick:()=>a("/dashboard/timetables"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Timetables"})]})})},ame=({template:t})=>e.jsxs("div",{className:"px-6 space-y-4",children:[e.jsxs("div",{className:"bg-white shadow p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Template Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Name"}),e.jsx("p",{className:"text-gray-900 text-xs",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Academic Year"}),e.jsx("p",{className:"text-gray-900 text-xs",children:t.academic_year})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Term"}),e.jsx("p",{className:"text-gray-900 text-xs",children:t.term})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Status"}),e.jsx("p",{className:"text-gray-900 text-xs",children:t.is_active?e.jsx("span",{className:"text-green-600",children:"Active"}):e.jsx("span",{className:"text-gray-600",children:"Inactive"})})]})]}),t.description&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Description"}),e.jsx("p",{className:"text-gray-900 text-xs",children:t.description})]})]}),e.jsxs("div",{className:"bg-white shadow p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Days Configuration"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:t.days?.map(a=>e.jsxs("div",{className:"flex items-center p-2 bg-gray-50",children:[e.jsx(I,{icon:xm,className:"h-4 w-4 text-blue-600 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 text-xs",children:a.day_of_week}),e.jsxs("p",{className:"text-xs text-gray-600",children:[a.total_periods," periods"]})]})]},a.id))})]})]}),rme=({template:t,entries:a,onEntryUpdate:r,onEntryDelete:s})=>e.jsx("div",{className:"px-6",children:e.jsx(Que,{templateId:t.id,entries:a,onEntryUpdate:r,onEntryDelete:s})}),sme=({conflicts:t})=>e.jsx("div",{className:"px-6",children:e.jsxs("div",{className:"bg-white shadow",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Conflicts"})}),e.jsx("div",{className:"p-4",children:t.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(I,{icon:cr,className:"h-8 w-8 text-green-500 mx-auto mb-3"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"No Conflicts Found"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"Your timetable is conflict-free!"})]}):e.jsx("div",{className:"space-y-3",children:t.map(a=>e.jsx("div",{className:"p-3 bg-red-50 border border-red-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(I,{icon:Ma,className:"h-4 w-4 text-red-500 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-red-800",children:a.conflict_type}),e.jsx("p",{className:"text-xs text-red-700 mt-1",children:a.description}),e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[a.day_of_week," - ",a.period_name]})]})]})},a.id))})})]})}),nme=({stats:t})=>t?e.jsxs("div",{className:"px-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white shadow p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:Cr,className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total Entries"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.basic_stats?.total_entries||0})]})]})}),e.jsx("div",{className:"bg-white shadow p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:xm,className:"h-6 w-6 text-green-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Active Days"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.basic_stats?.active_days||0})]})]})}),e.jsx("div",{className:"bg-white shadow p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:Wn,className:"h-6 w-6 text-purple-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Teachers"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.basic_stats?.teachers_involved||0})]})]})}),e.jsx("div",{className:"bg-white shadow p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:Ma,className:"h-6 w-6 text-red-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Conflicts"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"0"})]})]})})]}),t.teacher_workload&&t.teacher_workload.length>0&&e.jsxs("div",{className:"bg-white shadow p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Teacher Workload"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Periods"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Active Days"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subjects"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.teacher_workload.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-xs font-medium text-gray-900",children:a.teacher_name}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-500",children:a.total_periods}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-500",children:a.active_days}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-xs text-gray-500",children:a.subjects_taught})]},a.teacher_name))})]})})]})]}):e.jsx("div",{className:"px-6",children:e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading statistics..."})})}),ime=()=>{const{id:t}=Tn(),a=Da(),{token:r}=At(),[s,n]=x.useState(null),[i,o]=x.useState(!0),[c,u]=x.useState(!1),[m,h]=x.useState(""),[p,y]=x.useState("Monday"),[g,v]=x.useState(!1),N=async()=>{try{o(!0);const $=await re.get(`${se}/timetables/templates/${t}`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});$.data.success?(n($.data.data),$.data.data.days&&$.data.data.days.length>0&&y($.data.data.days[0].day_of_week)):h("Failed to fetch template details")}catch($){console.error("Error fetching template:",$),h("Failed to fetch template details")}finally{o(!1)}},w=async $=>{try{u(!0);const A=await re.put(`${se}/timetables/templates/${t}`,$,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});A.data.success?a(`/dashboard/timetables/template/${t}`):h(A.data.message||"Failed to update template")}catch(A){console.error("Error updating template:",A),h(A.response?.data?.message||"Failed to update template")}finally{u(!1)}},j=async $=>{try{const A=await fetch(`${se}/timetables/templates/${t}/periods/${p}`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify($)});if(A.ok)N(),v(!1);else{const M=await A.json();h(M.message||"Failed to add period")}}catch(A){console.error("Error adding period:",A),h("Failed to add period")}},T=async($,A)=>{try{const M=await fetch(`${se}/timetables/periods/${$}`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(A)});if(M.ok)N();else{const _=await M.json();h(_.message||"Failed to update period")}}catch(M){console.error("Error updating period:",M),h("Failed to update period")}},k=async $=>{if(window.confirm("Are you sure you want to delete this period?"))try{const A=await fetch(`${se}/timetables/periods/${$}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(A.ok)N();else{const M=await A.json();h(M.message||"Failed to delete period")}}catch(A){console.error("Error deleting period:",A),h("Failed to delete period")}};if(x.useEffect(()=>{N()},[t]),i)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading template..."})});if(m)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(AlertCircle,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:m}),e.jsx("button",{onClick:()=>a("/dashboard/timetables"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Timetables"})]})});if(!s)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Calendar,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Template Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"The requested timetable template could not be found."}),e.jsx("button",{onClick:()=>a("/dashboard/timetables"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Timetables"})]})});const P=s.days?.find($=>$.day_of_week===p)?.periods||[];return e.jsxs("div",{className:"",children:[e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsxs("div",{className:"px-6 pt-2 pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>a(`/dashboard/timetables/template/${t}`),className:"mr-4 p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(I,{icon:fm,className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl text-gray-900 font-semibold mb-1",children:"Edit Template"}),e.jsx("div",{className:"text-sm text-gray-500 mb-4",children:s.name})]})]}),e.jsxs("button",{onClick:()=>w({name:s.name,description:s.description,is_active:s.is_active}),disabled:c,className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50",children:[e.jsx(I,{icon:ns,className:"mr-1 h-3 w-3"}),c?"Saving...":"Save Changes"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-8 text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[e.jsx(I,{icon:xm,className:"mr-2 h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Template:"}),e.jsx("span",{className:"ml-1 text-gray-900",children:s.name})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{icon:Wn,className:"mr-2 h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:"Days:"}),e.jsxs("span",{className:"ml-1 text-gray-900",children:[s.days?.length||0," configured"]})]})]})]})}),m&&e.jsxs("div",{className:"px-6 mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center",children:[e.jsx(I,{icon:Ma,className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("span",{className:"text-red-700 text-sm",children:m})]}),e.jsxs("div",{className:"px-6 grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white shadow p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Days"}),e.jsx("div",{className:"space-y-1",children:s.days?.map($=>e.jsx("button",{onClick:()=>y($.day_of_week),className:`w-full text-left px-2 py-1 transition-colors text-xs ${p===$.day_of_week?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:$.day_of_week}),e.jsxs("span",{className:"text-xs text-gray-500",children:[$.total_periods," periods"]})]})},$.id))})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white shadow",children:[e.jsxs("div",{className:"px-6 py-3 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900",children:[p," Periods"]}),e.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[e.jsx(I,{icon:Ht,className:"mr-1 h-3 w-3"}),"Add Period"]})]}),e.jsx("div",{className:"p-4",children:P.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(I,{icon:Wn,className:"h-8 w-8 text-gray-400 mx-auto mb-3"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"No Periods"}),e.jsxs("p",{className:"text-gray-600 text-xs mb-3",children:["Add periods to configure the ",p," schedule"]}),e.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center px-3 py-1 bg-gray-700 text-white hover:bg-gray-800 transition-colors text-xs",children:[e.jsx(I,{icon:Ht,className:"mr-1 h-3 w-3"}),"Add First Period"]})]}):e.jsx("div",{className:"space-y-4",children:P.map($=>e.jsx(lme,{period:$,onUpdate:A=>T($.id,A),onDelete:()=>k($.id)},$.id))})})]})})]}),g&&e.jsx(ome,{onClose:()=>v(!1),onSave:j,dayOfWeek:p})]})},lme=({period:t,onUpdate:a,onDelete:r})=>{const[s,n]=x.useState(!1),[i,o]=x.useState({name:t.name,start_time:t.start_time,end_time:t.end_time,period_type:t.period_type,is_break:t.is_break,sort_order:t.sort_order}),c=()=>{a(i),n(!1)},u=()=>{o({name:t.name,start_time:t.start_time,end_time:t.end_time,period_type:t.period_type,is_break:t.is_break,sort_order:t.sort_order}),n(!1)},m=h=>{const{name:p,value:y,type:g,checked:v}=h.target;o(N=>({...N,[p]:g==="checkbox"?v:y}))};return e.jsx("div",{className:"border border-gray-200 p-3",children:s?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:i.name,onChange:m,className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{name:"period_type",value:i.period_type,onChange:m,className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"Teaching",children:"Teaching"}),e.jsx("option",{value:"Break",children:"Break"}),e.jsx("option",{value:"Assembly",children:"Assembly"}),e.jsx("option",{value:"Sports",children:"Sports"}),e.jsx("option",{value:"Chapel",children:"Chapel"}),e.jsx("option",{value:"Lunch",children:"Lunch"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Time"}),e.jsx("input",{type:"time",name:"start_time",value:i.start_time,onChange:m,className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Time"}),e.jsx("input",{type:"time",name:"end_time",value:i.end_time,onChange:m,className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"is_break",checked:i.is_break,onChange:m,className:"mr-2"}),e.jsx("label",{className:"text-xs text-gray-700",children:"Break Period (no classes allowed)"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:u,className:"px-3 py-1 text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors text-xs",children:"Cancel"}),e.jsx("button",{onClick:c,className:"px-3 py-1 bg-gray-700 text-white hover:bg-gray-800 transition-colors text-xs",children:"Save"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-2 h-2 mr-2 ${t.is_break?"bg-red-500":"bg-green-500"}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:[t.start_time," - ",t.end_time," (",t.period_type,")"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>n(!0),className:"p-1 text-gray-600 hover:bg-gray-100 transition-colors",title:"Edit Period",children:e.jsx(I,{icon:Aa,className:"h-3 w-3"})}),e.jsx("button",{onClick:r,className:"p-1 text-red-600 hover:bg-red-100 transition-colors",title:"Delete Period",children:e.jsx(I,{icon:sa,className:"h-3 w-3"})})]})]})})},ome=({onClose:t,onSave:a,dayOfWeek:r})=>{const[s,n]=x.useState({name:"",start_time:"",end_time:"",period_type:"Teaching",is_break:!1,sort_order:0}),[i,o]=x.useState(!1),c=async m=>{m.preventDefault(),o(!0),await a(s),o(!1)},u=m=>{const{name:h,value:p,type:y,checked:g}=m.target;n(v=>({...v,[h]:y==="checkbox"?g:p}))};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-900",children:["Add Period - ",r]}),e.jsx("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors",children:e.jsx(I,{icon:Wt,className:"h-3 w-3"})})]}),e.jsxs("form",{onSubmit:c,children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:u,className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"e.g., Period 1, Break, Assembly",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Time *"}),e.jsx("input",{type:"time",name:"start_time",value:s.start_time,onChange:u,className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Time *"}),e.jsx("input",{type:"time",name:"end_time",value:s.end_time,onChange:u,className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{name:"period_type",value:s.period_type,onChange:u,className:"w-full border border-gray-300 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"Teaching",children:"Teaching"}),e.jsx("option",{value:"Break",children:"Break"}),e.jsx("option",{value:"Assembly",children:"Assembly"}),e.jsx("option",{value:"Sports",children:"Sports"}),e.jsx("option",{value:"Chapel",children:"Chapel"}),e.jsx("option",{value:"Lunch",children:"Lunch"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"is_break",checked:s.is_break,onChange:u,className:"mr-2"}),e.jsx("label",{className:"text-xs text-gray-700",children:"Break Period (no classes allowed)"})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 mt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-3 py-1 text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors text-xs",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:i,className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium text-white bg-gray-700 hover:bg-gray-800 focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-gray-500 disabled:opacity-50",children:[e.jsx(I,{icon:ns,className:"mr-1 h-3 w-3"}),i?"Adding...":"Add Period"]})]})]})]})})},cme=()=>e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Timetable System Test"}),e.jsx("p",{className:"text-gray-600",children:"Testing the timetable functionality"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ZF,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Templates"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"0"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(eq,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Periods"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"0"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xj,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Entries"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"0"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(QF,{className:"h-8 w-8 text-red-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Conflicts"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"0"})]})]})})]}),e.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),e.jsx("span",{className:"text-gray-700",children:"Database tables created"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),e.jsx("span",{className:"text-gray-700",children:"API endpoints configured"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),e.jsx("span",{className:"text-gray-700",children:"Frontend components ready"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-3"}),e.jsx("span",{className:"text-gray-700",children:"Sample data needs to be created"})]})]})]}),e.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Next Steps"}),e.jsxs("ul",{className:"list-disc list-inside text-blue-800 space-y-1",children:[e.jsxs("li",{children:["Run the database migration: ",e.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"node run-timetable-migration.js"})]}),e.jsx("li",{children:"Test the API endpoints"}),e.jsx("li",{children:"Create your first timetable template"}),e.jsx("li",{children:"Configure day-specific periods"}),e.jsx("li",{children:"Generate timetables automatically"})]})]})]}),dme=({isOpen:t,onClose:a,onSuccess:r,editingFixture:s=null})=>{const{token:n}=At(),[i,o]=x.useState(!1),[c,u]=x.useState(!1),[m,h]=x.useState(null),[p,y]=x.useState(null),[g,v]=x.useState([]),[N,w]=x.useState([]),[j,T]=x.useState({title:"",description:"",sport_category_id:"",home_team_id:"",away_team_id:"",home_team_name:"",away_team_name:"",venue:"",fixture_date:"",fixture_time:"",weather_conditions:"",referee_name:"",referee_contact:"",is_home_game:!0});x.useEffect(()=>{if(t)if(u(!0),k().finally(()=>u(!1)),s)T({title:s.title||"",description:s.description||"",sport_category_id:s.sport_category_id||"",home_team_id:s.home_team_id||"",away_team_id:s.away_team_id||"",home_team_name:s.home_team_name||"",away_team_name:s.away_team_name||"",venue:s.venue||"",fixture_date:s.fixture_date?s.fixture_date.split("T")[0]:"",fixture_time:s.fixture_time||"",weather_conditions:s.weather_conditions||"",referee_name:s.referee_name||"",referee_contact:s.referee_contact||"",is_home_game:s.is_home_game!==void 0?s.is_home_game:!0});else{const _=new Date().toISOString().split("T")[0];T({title:"",description:"",sport_category_id:"",home_team_id:"",away_team_id:"",home_team_name:"",away_team_name:"",venue:"",fixture_date:_,fixture_time:"",weather_conditions:"",referee_name:"",referee_contact:"",is_home_game:!0}),y(null)}},[t,s]),x.useEffect(()=>{j.sport_category_id&&R(j.sport_category_id)},[j.sport_category_id]);const k=async()=>{try{const _=await re.get(`${se}/sports/categories`,{headers:{Authorization:`Bearer ${n}`}});v(_.data.data||[])}catch(_){console.error("Error fetching categories:",_),y("Failed to load sport categories")}},R=async _=>{try{const B=await re.get(`${se}/sports/teams`,{headers:{Authorization:`Bearer ${n}`},params:{sport_category_id:_,limit:100}});w(B.data.data||[])}catch(B){console.error("Error fetching teams:",B)}},P=_=>{const{name:B,value:D,type:C,checked:L}=_.target;T(H=>({...H,[B]:C==="checkbox"?L:D}))},$=async _=>{if(_.preventDefault(),!A()){y("Please fill in all required fields");return}o(!0),y(null);try{const B={...j};Object.keys(B).forEach(D=>{B[D]===""&&(B[D]=null)}),s?await re.put(`${se}/sports/fixtures/${s.id}`,B,{headers:{Authorization:`Bearer ${n}`}}):await re.post(`${se}/sports/fixtures`,B,{headers:{Authorization:`Bearer ${n}`}}),r(),a()}catch(B){console.error("Error saving fixture:",B);let D="An unexpected error occurred";if(B.response){const C=B.response.data;C?.error?D=C.error:D=C?.message||`Server Error (${B.response.status})`}else B.request?D="No response from server. Please check your internet connection.":D=B.message||"An unexpected error occurred";y(D)}finally{o(!1)}},A=()=>j.title&&j.sport_category_id&&j.fixture_date&&j.fixture_time,M=()=>{y(null),h(null),a()};return t?e.jsx("div",{className:"modal-overlay",onClick:M,children:e.jsx("div",{className:"modal-dialog",onClick:_=>_.stopPropagation(),style:{maxWidth:"800px",minHeight:c?"400px":"auto"},children:c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading..."})]}),e.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{height:"32px",width:"100px",background:"#e5e7eb",borderRadius:"4px"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:s?"Edit Fixture":"Add Fixture"}),e.jsx("button",{className:"modal-close-btn",onClick:M,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[p&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:p}),e.jsxs("form",{onSubmit:$,className:"modal-form",children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Jc,style:{color:"#2563eb"}}),"Fixture Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Title ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"title",className:"form-control",placeholder:"Enter fixture title",value:j.title,onChange:P,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Sport Category ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"sport_category_id",className:"form-control",value:j.sport_category_id,onChange:P,required:!0,children:[e.jsx("option",{value:"",children:"Select sport category"}),g.map(_=>e.jsx("option",{value:_.id,children:_.name},_.id))]})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{name:"description",className:"form-control",placeholder:"Enter fixture description",value:j.description,onChange:P,rows:3,style:{resize:"vertical"}})]})]})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Cr,style:{color:"#10b981"}}),"Teams"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Home Team"}),e.jsxs("select",{name:"home_team_id",className:"form-control",value:j.home_team_id,onChange:P,children:[e.jsx("option",{value:"",children:"Select home team"}),N.map(_=>e.jsx("option",{value:_.id,children:_.name},_.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Away Team"}),e.jsxs("select",{name:"away_team_id",className:"form-control",value:j.away_team_id,onChange:P,children:[e.jsx("option",{value:"",children:"Select away team"}),N.map(_=>e.jsx("option",{value:_.id,children:_.name},_.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Home Team Name (External)"}),e.jsx("input",{type:"text",name:"home_team_name",className:"form-control",placeholder:"e.g., ABC School",value:j.home_team_name,onChange:P})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Away Team Name (External)"}),e.jsx("input",{type:"text",name:"away_team_name",className:"form-control",placeholder:"e.g., XYZ School",value:j.away_team_name,onChange:P})]})]})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Pa,style:{color:"#f59e0b"}}),"Schedule & Location"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Fixture Date ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"date",name:"fixture_date",className:"form-control",value:j.fixture_date,onChange:P,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Fixture Time ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"time",name:"fixture_time",className:"form-control",value:j.fixture_time,onChange:P,required:!0})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Venue"}),e.jsx("input",{type:"text",name:"venue",className:"form-control",placeholder:"Enter venue",value:j.venue,onChange:P})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:lu,style:{color:"#8b5cf6"}}),"Additional Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Referee Name"}),e.jsx("input",{type:"text",name:"referee_name",className:"form-control",placeholder:"Enter referee name",value:j.referee_name,onChange:P})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Referee Contact"}),e.jsx("input",{type:"text",name:"referee_contact",className:"form-control",placeholder:"Enter referee contact",value:j.referee_contact,onChange:P})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Weather Conditions"}),e.jsx("input",{type:"text",name:"weather_conditions",className:"form-control",placeholder:"e.g., Sunny, Rainy, Cloudy",value:j.weather_conditions,onChange:P})]}),e.jsx("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",name:"is_home_game",checked:j.is_home_game,onChange:P,style:{width:"16px",height:"16px",cursor:"pointer"}}),e.jsx("span",{className:"form-label",style:{margin:0},children:"This is a home game"})]})})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:M,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:$,disabled:!A()||i,children:i?"Saving...":s?"Update Fixture":"Save Fixture"})]})]})})}):null},ume=({isOpen:t,onClose:a,onSuccess:r,editingTeam:s=null})=>{const{token:n}=At(),[i,o]=x.useState(!1),[c,u]=x.useState(!1),[m,h]=x.useState(null),[p,y]=x.useState(null),[g,v]=x.useState([]),[N,w]=x.useState({name:"",description:"",sport_category_id:"",coach_name:"",coach_contact:"",is_active:!0});x.useEffect(()=>{t&&(u(!0),j().finally(()=>u(!1)),s?w({name:s.name||"",description:s.description||"",sport_category_id:s.sport_category_id||"",coach_name:s.coach_name||"",coach_contact:s.coach_contact||"",is_active:s.is_active!==void 0?s.is_active:!0}):T())},[t,s]);const j=async()=>{try{const A=await re.get(`${se}/sports/categories`,{headers:{Authorization:`Bearer ${n}`}});v(A.data.data||[])}catch(A){console.error("Error fetching categories:",A),y("Failed to load sport categories")}},T=()=>{w({name:"",description:"",sport_category_id:"",coach_name:"",coach_contact:"",is_active:!0}),h(null),y(null)},k=A=>{const{name:M,value:_,type:B,checked:D}=A.target;w(C=>({...C,[M]:B==="checkbox"?D:_}))},R=async A=>{if(A.preventDefault(),!P()){y("Please fill in all required fields");return}o(!0),y(null);try{const M=s?`${se}/sports/teams/${s.id}`:`${se}/sports/teams`;await re[s?"put":"post"](M,N,{headers:{Authorization:`Bearer ${n}`}}),r(),a(),T()}catch(M){console.error("Error saving team:",M);let _="An unexpected error occurred";if(M.response){const B=M.response.data;B?.error?_=B.error:_=B?.message||`Server Error (${M.response.status})`}else M.request?_="No response from server. Please check your internet connection.":_=M.message||"An unexpected error occurred";y(_)}finally{o(!1)}},P=()=>N.name&&N.sport_category_id,$=()=>{y(null),h(null),a()};return t?e.jsx("div",{className:"modal-overlay",onClick:$,children:e.jsx("div",{className:"modal-dialog",onClick:A=>A.stopPropagation(),style:{maxWidth:"800px",minHeight:c?"400px":"auto"},children:c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading..."})]}),e.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{height:"32px",width:"100px",background:"#e5e7eb",borderRadius:"4px"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:s?"Edit Team":"Add Team"}),e.jsx("button",{className:"modal-close-btn",onClick:$,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[p&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:p}),e.jsxs("form",{onSubmit:R,className:"modal-form",children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Jc,style:{color:"#2563eb"}}),"Team Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Team Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"name",className:"form-control",placeholder:"Enter team name",value:N.name,onChange:k,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Sport Category ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"sport_category_id",className:"form-control",value:N.sport_category_id,onChange:k,required:!0,children:[e.jsx("option",{value:"",children:"Select sport category"}),g.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{name:"description",className:"form-control",placeholder:"Enter team description",value:N.description,onChange:k,rows:3,style:{resize:"vertical"}})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:rm,style:{color:"#10b981"}}),"Coach Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Coach Name"}),e.jsx("input",{type:"text",name:"coach_name",className:"form-control",placeholder:"Enter coach name",value:N.coach_name,onChange:k})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Coach Contact"}),e.jsx("input",{type:"text",name:"coach_contact",className:"form-control",placeholder:"Enter phone or email",value:N.coach_contact,onChange:k})]}),e.jsx("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",name:"is_active",checked:N.is_active,onChange:k,style:{width:"16px",height:"16px",cursor:"pointer"}}),e.jsx("span",{className:"form-label",style:{margin:0},children:"Team is active"})]})})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:$,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:R,disabled:!P()||i,children:i?"Saving...":s?"Update Team":"Save Team"})]})]})})}):null},mme=({isOpen:t,onClose:a,onSuccess:r,editingAnnouncement:s=null})=>{const{token:n}=At(),[i,o]=x.useState(!1),[c,u]=x.useState(!1),[m,h]=x.useState(null),[p,y]=x.useState(null),[g,v]=x.useState([]),[N,w]=x.useState([]),[j,T]=x.useState([]),[k,R]=x.useState({title:"",content:"",announcement_type:"general",sport_category_id:"",team_id:"",fixture_id:"",priority:"medium",status:"published",start_date:"",end_date:"",target_audience:"all"});x.useEffect(()=>{t&&(u(!0),P().finally(()=>u(!1)),s?R({title:s.title||"",content:s.content||"",announcement_type:s.announcement_type||"general",sport_category_id:s.sport_category_id||"",team_id:s.team_id||"",fixture_id:s.fixture_id||"",priority:s.priority||"medium",status:s.status||"published",start_date:s.start_date?s.start_date.split("T")[0]:"",end_date:s.end_date?s.end_date.split("T")[0]:"",target_audience:s.target_audience||"all"}):$())},[t,s]);const P=async()=>{try{const[D,C,L]=await Promise.all([re.get(`${se}/sports/categories`,{headers:{Authorization:`Bearer ${n}`}}),re.get(`${se}/sports/teams`,{headers:{Authorization:`Bearer ${n}`}}),re.get(`${se}/sports/fixtures`,{headers:{Authorization:`Bearer ${n}`}})]);v(D.data.data||[]),w(C.data.data||[]),T(L.data.data||[])}catch(D){console.error("Error fetching data:",D),y("Failed to load data")}},$=()=>{R({title:"",content:"",announcement_type:"general",sport_category_id:"",team_id:"",fixture_id:"",priority:"medium",status:"published",start_date:"",end_date:"",target_audience:"all"}),h(null),y(null)},A=D=>{const{name:C,value:L}=D.target;R(H=>({...H,[C]:L}))},M=async D=>{if(D.preventDefault(),!_()){y("Please fill in all required fields");return}o(!0),y(null);try{const C=s?`${se}/sports/announcements/${s.id}`:`${se}/sports/announcements`;await re[s?"put":"post"](C,k,{headers:{Authorization:`Bearer ${n}`}}),r(),a(),$()}catch(C){console.error("Error saving announcement:",C);let L="An unexpected error occurred";if(C.response){const H=C.response.data;H?.error?L=H.error:L=H?.message||`Server Error (${C.response.status})`}else C.request?L="No response from server. Please check your internet connection.":L=C.message||"An unexpected error occurred";y(L)}finally{o(!1)}},_=()=>k.title&&k.content&&k.announcement_type,B=()=>{y(null),h(null),a()};return t?e.jsx("div",{className:"modal-overlay",onClick:B,children:e.jsx("div",{className:"modal-dialog",onClick:D=>D.stopPropagation(),style:{maxWidth:"800px",minHeight:c?"400px":"auto"},children:c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading..."})]}),e.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{height:"32px",width:"100px",background:"#e5e7eb",borderRadius:"4px"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:s?"Edit Announcement":"Add Announcement"}),e.jsx("button",{className:"modal-close-btn",onClick:B,children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"modal-body",children:[p&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:p}),e.jsxs("form",{onSubmit:M,className:"modal-form",children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:FN,style:{color:"#2563eb"}}),"Announcement Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Title ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"title",className:"form-control",placeholder:"Enter announcement title",value:k.title,onChange:A,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Type ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"announcement_type",className:"form-control",value:k.announcement_type,onChange:A,required:!0,children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"fixture",children:"Fixture"}),e.jsx("option",{value:"result",children:"Result"}),e.jsx("option",{value:"training",children:"Training"}),e.jsx("option",{value:"meeting",children:"Meeting"})]})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsxs("label",{className:"form-label",children:["Content ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("textarea",{name:"content",className:"form-control",placeholder:"Enter announcement content",value:k.content,onChange:A,rows:4,style:{resize:"vertical"},required:!0})]})]})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Cr,style:{color:"#10b981"}}),"Related Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Sport Category"}),e.jsxs("select",{name:"sport_category_id",className:"form-control",value:k.sport_category_id,onChange:A,children:[e.jsx("option",{value:"",children:"Select category"}),g.map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Team"}),e.jsxs("select",{name:"team_id",className:"form-control",value:k.team_id,onChange:A,children:[e.jsx("option",{value:"",children:"Select team"}),N.map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Fixture"}),e.jsxs("select",{name:"fixture_id",className:"form-control",value:k.fixture_id,onChange:A,children:[e.jsx("option",{value:"",children:"Select fixture"}),j.map(D=>e.jsx("option",{value:D.id,children:D.title},D.id))]})]})]})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:K0,style:{color:"#f59e0b"}}),"Priority & Status"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Priority"}),e.jsxs("select",{name:"priority",className:"form-control",value:k.priority,onChange:A,children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{name:"status",className:"form-control",value:k.status,onChange:A,children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Pa,style:{color:"#8b5cf6"}}),"Schedule & Audience"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Start Date"}),e.jsx("input",{type:"date",name:"start_date",className:"form-control",value:k.start_date,onChange:A})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"End Date"}),e.jsx("input",{type:"date",name:"end_date",className:"form-control",value:k.end_date,onChange:A})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Target Audience"}),e.jsxs("select",{name:"target_audience",className:"form-control",value:k.target_audience,onChange:A,children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"students",children:"Students"}),e.jsx("option",{value:"employees",children:"Employees"}),e.jsx("option",{value:"teams",children:"Teams"})]})]})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:B,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:M,disabled:!_()||i,children:i?"Saving...":s?"Update Announcement":"Save Announcement"})]})]})})}):null},hme=()=>{const{token:t}=At(),[a,r]=x.useState(new Date),[s,n]=x.useState([]),[i,o]=x.useState(!0),[c,u]=x.useState(null),[m,h]=x.useState(null),[p,y]=x.useState([]),[g,v]=x.useState(null),N=C=>({"fa-futbol":xg,"fa-basketball-ball":eF,"fa-running":_F,"fa-volleyball-ball":KB,"fa-table-tennis":vF,"fa-swimmer":pF,"fa-baseball":ZB,"fa-football-ball":NF,"fa-hockey-puck":tF})[C]||xg,w=C=>({scheduled:{background:"#dbeafe",color:"#1e40af",border:"#93c5fd"},ongoing:{background:"#fef3c7",color:"#92400e",border:"#fcd34d"},completed:{background:"#d1fae5",color:"#065f46",border:"#6ee7b7"},cancelled:{background:"#fee2e2",color:"#991b1b",border:"#fca5a5"},postponed:{background:"#f3f4f6",color:"#374151",border:"#d1d5db"}})[C]||{background:"#f3f4f6",color:"#374151",border:"#d1d5db"},j=C=>{const L=C%19,H=Math.floor(C/100),V=C%100,Y=Math.floor(H/4),J=H%4,W=Math.floor((H+8)/25),X=Math.floor((H-W+1)/3),te=(19*L+H-Y-X+15)%30,oe=Math.floor(V/4),q=V%4,G=(32+2*J+2*oe-te-q)%7,z=Math.floor((L+11*te+22*G)/451),Z=Math.floor((te+G-7*z+114)/31),Q=(te+G-7*z+114)%31+1;return new Date(C,Z-1,Q)},T=C=>{const L=[],H=j(C);L.push({date:`${C}-01-01`,name:"New Year's Day"}),L.push({date:`${C}-02-21`,name:"Robert Mugabe National Youth Day"}),L.push({date:`${C}-04-18`,name:"Independence Day"}),L.push({date:`${C}-05-01`,name:"Workers' Day"}),L.push({date:`${C}-05-25`,name:"Africa Day"}),L.push({date:`${C}-08-11`,name:"Heroes' Day"}),L.push({date:`${C}-08-12`,name:"Defence Forces Day"}),L.push({date:`${C}-12-22`,name:"Unity Day"}),L.push({date:`${C}-12-25`,name:"Christmas Day"}),L.push({date:`${C}-12-26`,name:"Boxing Day"});const V=new Date(H);V.setDate(H.getDate()-2);const Y=new Date(H);return Y.setDate(H.getDate()+1),L.push({date:`${V.getFullYear()}-${String(V.getMonth()+1).padStart(2,"0")}-${String(V.getDate()).padStart(2,"0")}`,name:"Good Friday"}),L.push({date:`${Y.getFullYear()}-${String(Y.getMonth()+1).padStart(2,"0")}-${String(Y.getDate()).padStart(2,"0")}`,name:"Easter Monday"}),L};x.useEffect(()=>{k()},[a]);const k=async()=>{try{o(!0),u(null);const C=new Date(a.getFullYear(),a.getMonth(),1),L=new Date(a.getFullYear(),a.getMonth()+1,0),H=await re.get(`${se}/sports/fixtures`,{headers:{Authorization:`Bearer ${t}`},params:{date_from:C.toISOString().split("T")[0],date_to:L.toISOString().split("T")[0],limit:100}});n(H.data.data||[])}catch(C){console.error("Error fetching fixtures:",C),u("Failed to load fixtures")}finally{o(!1)}},R=C=>{r(L=>{const H=new Date(L);return C==="prev"?H.setMonth(H.getMonth()-1):H.setMonth(H.getMonth()+1),H})},P=C=>{const L=C.getFullYear(),H=C.getMonth(),V=new Date(L,H,1),J=new Date(L,H+1,0).getDate(),W=V.getDay(),X=[];for(let te=0;te<W;te++)X.push(null);for(let te=1;te<=J;te++)X.push(te);return X},$=C=>{if(!C)return[];const L=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(C).padStart(2,"0")}`;return s.filter(H=>H.fixture_date===L)},A=C=>{if(!C)return null;const L=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(C).padStart(2,"0")}`;return T(a.getFullYear()).find(V=>V.date===L)||null},M=C=>{C&&(h(C),y($(C)),v(A(C)))},_=C=>{const[L,H]=C.split(":"),V=parseInt(L),Y=V>=12?"PM":"AM";return`${V%12||12}:${H} ${Y}`},B=P(a),D=["January","February","March","April","May","June","July","August","September","October","November","December"];return i?e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px",color:"var(--text-secondary)"},children:[e.jsx("div",{className:"loading-spinner",style:{marginRight:"12px"}}),e.jsx("span",{children:"Loading calendar..."})]}):e.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",padding:"20px 30px",background:"var(--main-bg)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px",paddingBottom:"16px",borderBottom:"1px solid var(--border-color)"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:600,color:"var(--text-primary)",margin:0,marginBottom:"4px"},children:"Sports Calendar"}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",margin:0},children:"View and manage sports fixtures by date"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",background:"var(--card-bg)",padding:"8px 12px",borderRadius:"8px",border:"1px solid var(--border-color)"},children:[e.jsx("button",{onClick:()=>R("prev"),style:{padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"6px",cursor:"pointer",color:"var(--text-secondary)",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:C=>{C.currentTarget.style.background="#f3f4f6",C.currentTarget.style.color="var(--text-primary)"},onMouseLeave:C=>{C.currentTarget.style.background="transparent",C.currentTarget.style.color="var(--text-secondary)"},children:e.jsx(I,{icon:gy,style:{fontSize:"0.75rem"}})}),e.jsxs("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",margin:0,minWidth:"150px",textAlign:"center"},children:[D[a.getMonth()]," ",a.getFullYear()]}),e.jsx("button",{onClick:()=>R("next"),style:{padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"6px",cursor:"pointer",color:"var(--text-secondary)",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:C=>{C.currentTarget.style.background="#f3f4f6",C.currentTarget.style.color="var(--text-primary)"},onMouseLeave:C=>{C.currentTarget.style.background="transparent",C.currentTarget.style.color="var(--text-secondary)"},children:e.jsx(I,{icon:xy,style:{fontSize:"0.75rem"}})})]})]}),c&&e.jsxs("div",{style:{padding:"12px 16px",background:"#fee2e2",border:"1px solid #fecaca",borderRadius:"6px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Pa,style:{color:"#dc2626",fontSize:"0.875rem"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#dc2626"},children:c})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 380px",gap:"20px",flex:1,minHeight:0},children:[e.jsx("div",{style:{background:"var(--card-bg)",borderRadius:"8px",border:"1px solid var(--border-color)",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",overflow:"hidden",display:"flex",flexDirection:"column"},children:e.jsxs("div",{style:{padding:"20px"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid var(--border-color)"},children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(C=>e.jsx("div",{style:{textAlign:"center",fontSize:"0.7rem",fontWeight:600,color:"var(--text-secondary)",padding:"8px 4px"},children:C},C))}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",flex:1},children:B.map((C,L)=>{const H=$(C),V=A(C),Y=C===new Date().getDate()&&a.getMonth()===new Date().getMonth()&&a.getFullYear()===new Date().getFullYear(),J=m===C,W=V!==null;return e.jsx("div",{onClick:()=>M(C),style:{minHeight:"100px",padding:"8px 6px",border:`1px solid ${W?"#f59e0b":J?"#2563eb":Y?"#93c5fd":"var(--border-color)"}`,borderRadius:"6px",cursor:C?"pointer":"default",transition:"all 0.2s",background:C?W?"#fef3c7":J||Y?"#eff6ff":"var(--card-bg)":"#f9fafb",display:"flex",flexDirection:"column"},onMouseEnter:X=>{C&&(X.currentTarget.style.background=W?"#fde68a":J?"#eff6ff":"#f9fafb",X.currentTarget.style.borderColor=W?"#f59e0b":J?"#2563eb":"#d1d5db")},onMouseLeave:X=>{C&&(X.currentTarget.style.background=W?"#fef3c7":J||Y?"#eff6ff":"var(--card-bg)",X.currentTarget.style.borderColor=W?"#f59e0b":J?"#2563eb":Y?"#93c5fd":"var(--border-color)")},children:C&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:"0.75rem",fontWeight:600,color:W?"#92400e":Y||J?"#2563eb":"var(--text-primary)",marginBottom:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[W&&e.jsx(I,{icon:$v,style:{fontSize:"0.65rem",color:"#f59e0b"}}),C]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:1,overflow:"hidden"},children:[V&&e.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 6px",border:"1px solid #f59e0b",borderRadius:"4px",background:"#fef3c7",color:"#92400e",fontWeight:600,display:"flex",alignItems:"center",gap:"4px",marginBottom:"2px"},children:[e.jsx(I,{icon:$v,style:{fontSize:"0.6rem"}}),e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:V.name})]}),H.slice(0,V?1:2).map((X,te)=>{const oe=w(X.status);return e.jsxs("div",{style:{fontSize:"0.65rem",padding:"4px 6px",border:`1px solid ${oe.border}`,borderRadius:"4px",background:oe.background,color:oe.color,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:q=>{q.currentTarget.style.transform="scale(1.02)",q.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)"},onMouseLeave:q=>{q.currentTarget.style.transform="scale(1)",q.currentTarget.style.boxShadow="none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"2px"},children:[e.jsx(I,{icon:N(X.sport_category_icon),style:{fontSize:"0.6rem"}}),e.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:500},children:X.title})]}),e.jsx("div",{style:{fontSize:"0.6rem",opacity:.8,marginTop:"2px"},children:_(X.fixture_time)})]},te)}),H.length>(V?1:2)&&e.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",textAlign:"center",padding:"4px",fontWeight:500},children:["+",H.length-(V?1:2)," more"]})]})]})},L)})})]})}),e.jsxs("div",{style:{background:"var(--card-bg)",borderRadius:"8px",border:"1px solid var(--border-color)",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",maxHeight:"100%",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"20px",borderBottom:"1px solid var(--border-color)",background:"var(--sidebar-bg)",color:"white"},children:e.jsxs("h3",{style:{fontSize:"0.875rem",fontWeight:600,margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Pa}),m?`${D[a.getMonth()]} ${m}, ${a.getFullYear()}`:"Select a date"]})}),e.jsx("div",{style:{padding:"20px",flex:1,overflowY:"auto",overflowX:"hidden"},children:p.length===0&&!g?e.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-secondary)"},children:[e.jsx(I,{icon:Pa,style:{fontSize:"2rem",marginBottom:"12px",color:"var(--text-light)",opacity:.5}}),e.jsx("p",{style:{fontSize:"0.75rem",margin:0,fontWeight:500},children:m?"No fixtures on this date":"Click on a date to view fixtures"})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[g&&e.jsxs("div",{style:{padding:"16px",background:"#fef3c7",borderRadius:"8px",border:"1px solid #f59e0b",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx(I,{icon:$v,style:{fontSize:"0.875rem",color:"#f59e0b"}}),e.jsx("h4",{style:{fontSize:"0.8rem",fontWeight:600,color:"#92400e",margin:0,flex:1},children:g.name})]}),e.jsx("p",{style:{fontSize:"0.7rem",color:"#92400e",margin:0,fontWeight:500},children:"Zimbabwe Public Holiday"})]}),p.length>0&&e.jsx(e.Fragment,{children:p.map(C=>{const L=w(C.status);return e.jsxs("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"8px",border:"1px solid var(--border-color)",transition:"all 0.2s"},onMouseEnter:H=>{H.currentTarget.style.background="#f3f4f6",H.currentTarget.style.borderColor="#d1d5db",H.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.05)"},onMouseLeave:H=>{H.currentTarget.style.background="#f9fafb",H.currentTarget.style.borderColor="var(--border-color)",H.currentTarget.style.boxShadow="none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[e.jsx(I,{icon:N(C.sport_category_icon),style:{fontSize:"0.875rem",color:"var(--text-secondary)"}}),e.jsx("h4",{style:{fontSize:"0.8rem",fontWeight:600,color:"var(--text-primary)",margin:0,flex:1},children:C.title})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",fontSize:"0.7rem",color:"var(--text-secondary)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(I,{icon:Jc,style:{fontSize:"0.7rem",color:"#f59e0b"}}),e.jsxs("span",{style:{fontWeight:500},children:[C.home_team_name," vs ",C.away_team_name]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(I,{icon:Pa,style:{fontSize:"0.7rem"}}),e.jsx("span",{children:_(C.fixture_time)})]}),C.venue&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(I,{icon:lu,style:{fontSize:"0.7rem",color:"#ef4444"}}),e.jsx("span",{children:C.venue})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px"},children:e.jsx("span",{style:{padding:"4px 8px",fontSize:"0.65rem",fontWeight:600,borderRadius:"4px",background:L.background,color:L.color,border:`1px solid ${L.border}`,display:"inline-block"},children:C.status})})]}),C.result_home_score!==null&&e.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"var(--card-bg)",borderRadius:"6px",border:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{fontSize:"0.7rem",fontWeight:600,color:"var(--text-secondary)",marginBottom:"6px"},children:"Result"}),e.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:700,color:"var(--text-primary)"},children:[C.result_home_score," - ",C.result_away_score]}),C.result_notes&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginTop:"6px"},children:C.result_notes})]})]},C.id)})})]})})]})]})]})},xme=()=>{const{token:t}=At();Da();const{activeTab:a,setActiveTab:r,showCalendar:s,setShowCalendar:n}=fE(),[i,o]=x.useState(!0),[c,u]=x.useState(null),[m,h]=x.useState([]),[p,y]=x.useState([]),[g,v]=x.useState([]),[N,w]=x.useState([]),[j,T]=x.useState({current_page:1,total_pages:1,total_items:0,items_per_page:25}),[k,R]=x.useState(""),[P,$]=x.useState(""),[A,M]=x.useState(""),[_,B]=x.useState(""),[D,C]=x.useState(""),[L,H]=x.useState(""),[V,Y]=x.useState(""),[J,W]=x.useState(""),[X,te]=x.useState(""),[oe,q]=x.useState(""),[G,z]=x.useState(""),[Z,Q]=x.useState(""),[fe,he]=x.useState({message:null,type:"success",visible:!1}),[ne,me]=x.useState(!1),[pe,ie]=x.useState(!1),[ke,Ae]=x.useState(!1),[ae,Ne]=x.useState(!1),[ce,De]=x.useState(null),[ye,Ee]=x.useState(null),[Ke,Re]=x.useState(!1),[Le,Oe]=x.useState(!1),[$e,ct]=x.useState(!1),[Nt,jt]=x.useState(!1),[xt,we]=x.useState(!1),[Ie,dt]=x.useState(null),[ut,Te]=x.useState(null),[Ve,qe]=x.useState(!1),[Xe,We]=x.useState(!1),[Ge,lt]=x.useState(!1),[Dt,It]=x.useState(!1),[Bt,ze]=x.useState(!1),[Mt,oa]=x.useState(null),[ca,Ka]=x.useState(null),[Yt,er]=x.useState(!1),[Ye,Et]=x.useState({search:"",sport_category_id:"",status:"",team_id:"",announcement_type:"",priority:""}),[na,zt]=x.useState(!1),[it,Tt]=x.useState(!1),[qt,aa]=x.useState(null);x.useEffect(()=>{s||(a==="fixtures"?Ar():a==="teams"?dr():a==="announcements"?Er():ls())},[a,j.current_page,P,A,_,L,V,X,oe,G,Z,s]);const Ar=async()=>{try{o(!0),u(null);const Ot={page:j.current_page,limit:j.items_per_page,search:P,status:A,sport_category_id:_},$t=await re.get(`${se}/sports/fixtures`,{headers:{Authorization:`Bearer ${t}`},params:Ot}),ft=$t.data.data||[];h(ft);const Ca=$t.data.pagination||{current_page:1,total_pages:1,total_items:ft.length,items_per_page:j.items_per_page};T(Ca)}catch(Ot){console.error("Error fetching fixtures:",Ot),u("Failed to fetch fixtures")}finally{o(!1)}},dr=async()=>{try{o(!0),u(null);const Ot={page:j.current_page,limit:j.items_per_page,search:L,sport_category_id:V},$t=await re.get(`${se}/sports/teams`,{headers:{Authorization:`Bearer ${t}`},params:Ot}),ft=$t.data.data||[];y(ft);const Ca=$t.data.pagination||{current_page:1,total_pages:1,total_items:ft.length,items_per_page:j.items_per_page};T(Ca)}catch(Ot){console.error("Error fetching teams:",Ot),u("Failed to fetch teams")}finally{o(!1)}},Er=async()=>{try{o(!0),u(null);const Ot={page:j.current_page,limit:j.items_per_page,search:X,announcement_type:oe,priority:G,sport_category_id:Z},$t=await re.get(`${se}/sports/announcements`,{headers:{Authorization:`Bearer ${t}`},params:Ot}),ft=$t.data.data||[];w(ft);const Ca=$t.data.pagination||{current_page:1,total_pages:1,total_items:ft.length,items_per_page:j.items_per_page};T(Ca)}catch(Ot){console.error("Error fetching announcements:",Ot),u("Failed to fetch announcements")}finally{o(!1)}},ls=async()=>{try{o(!0),u(null);const Ot={page:j.current_page,limit:j.items_per_page,...Ye};let $t;switch(a){case"teams":$t=await re.get(`${se}/sports/teams`,{headers:{Authorization:`Bearer ${t}`},params:Ot}),y($t.data.data||[]),T($t.data.pagination||j);break;case"announcements":$t=await re.get(`${se}/sports/announcements`,{headers:{Authorization:`Bearer ${t}`},params:Ot}),w($t.data.data||[]),T($t.data.pagination||j);break;default:break}}catch(Ot){console.error("Error fetching data:",Ot),u("Failed to fetch data")}finally{o(!1)}};x.useEffect(()=>{(async()=>{try{const $t=await re.get(`${se}/sports/categories`,{headers:{Authorization:`Bearer ${t}`}});v($t.data.data||[])}catch($t){console.error("Error fetching categories:",$t)}})()},[]);const gr=(Ot,$t="success",ft=3e3)=>{he({message:Ot,type:$t,visible:!0}),ft>0&&setTimeout(()=>{he(Ca=>({...Ca,visible:!1})),setTimeout(()=>{he({message:null,type:"success",visible:!1})},300)},ft)},Ra=Ot=>{const $t={width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"};return Ot==="success"?e.jsxs("svg",{...$t,children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}):Ot==="error"?e.jsxs("svg",{...$t,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}):null},Ps=Ot=>{switch(Ot){case"success":return"#10b981";case"error":return"#ef4444";case"info":return"#2563eb";case"warning":return"#f59e0b";default:return"#10b981"}},Xn=Ot=>{Ot.preventDefault(),$(k),T($t=>({...$t,current_page:1}))},Us=async Ot=>{De(Ot),ie(!0)},Ds=Ot=>{aa(Ot),Ae(!0)},Jn=Ot=>{Ee(Ot),Ne(!0)},Xl=async()=>{if(ye){Re(!0);try{await re.delete(`${se}/sports/fixtures/${ye.id}`,{headers:{Authorization:`Bearer ${t}`}}),await Ar(),Ne(!1),Ee(null),gr("Fixture deleted successfully","success")}catch(Ot){console.error("Error deleting fixture:",Ot),gr("Failed to delete fixture","error")}finally{Re(!1)}}},Pn=()=>{Ar(),me(!1),Ae(!1),aa(null)},Jl=Ot=>{Ot.preventDefault(),H(D),T($t=>({...$t,current_page:1}))},Dn=async Ot=>{dt(Ot),ct(!0)},Os=Ot=>{aa(Ot),jt(!0)},os=Ot=>{Te(Ot),we(!0)},tn=async()=>{if(ut){qe(!0);try{await re.delete(`${se}/sports/teams/${ut.id}`,{headers:{Authorization:`Bearer ${t}`}}),await dr(),we(!1),Te(null),gr("Team deleted successfully","success")}catch(Ot){console.error("Error deleting team:",Ot),gr("Failed to delete team","error")}finally{qe(!1)}}},pi=()=>{dr(),Oe(!1),jt(!1),aa(null)},Ws=Ot=>{Ot.preventDefault(),te(J),T($t=>({...$t,current_page:1}))},$i=async Ot=>{oa(Ot),lt(!0)},Zn=Ot=>{aa(Ot),It(!0)},cl=Ot=>{Ka(Ot),ze(!0)},Bi=async()=>{if(ca){er(!0);try{await re.delete(`${se}/sports/announcements/${ca.id}`,{headers:{Authorization:`Bearer ${t}`}}),await Er(),ze(!1),Ka(null),gr("Announcement deleted successfully","success")}catch(Ot){console.error("Error deleting announcement:",Ot),gr("Failed to delete announcement","error")}finally{er(!1)}}},$a=()=>{Er(),We(!1),It(!1),aa(null)},gi=Ot=>({scheduled:{background:"#dbeafe",color:"#1e40af"},ongoing:{background:"#fef3c7",color:"#92400e"},completed:{background:"#d1fae5",color:"#065f46"},cancelled:{background:"#fee2e2",color:"#991b1b"},postponed:{background:"#f3f4f6",color:"#374151"}})[Ot]||{background:"#f3f4f6",color:"#374151"},On=Ot=>({urgent:{background:"#fee2e2",color:"#991b1b"},high:{background:"#fed7aa",color:"#9a3412"},medium:{background:"#dbeafe",color:"#1e40af"},low:{background:"#f3f4f6",color:"#374151"}})[Ot]||{background:"#f3f4f6",color:"#374151"},Lr=()=>{const Ot=m.length>0?(j.current_page-1)*j.items_per_page+1:0,$t=Math.min(j.current_page*j.items_per_page,j.total_items||m.length);return m.length>0,e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Fixtures"}),e.jsx("p",{className:"report-subtitle",children:"Manage sports fixtures and matches."})]}),e.jsx("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"},children:e.jsxs("button",{onClick:()=>{aa(null),me(!0)},className:"btn-checklist",children:[e.jsx(I,{icon:Ht}),"Add Fixture"]})})]}),e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsxs("div",{className:"report-filters-left",children:[e.jsx("form",{onSubmit:Xn,className:"filter-group",children:e.jsxs("div",{className:"search-input-wrapper",style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:ua,className:"search-icon"}),e.jsx("input",{type:"text",value:k,onChange:ft=>R(ft.target.value),placeholder:"Search by title, teams, or venue...",className:"filter-input search-input"}),k&&e.jsx("button",{onClick:()=>{R(""),$(""),T(ft=>({...ft,current_page:1}))},style:{position:"absolute",right:"8px",padding:"4px 6px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},title:"Clear search",children:""})]})}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Status:"}),e.jsxs("select",{value:A,onChange:ft=>{M(ft.target.value),T(Ca=>({...Ca,current_page:1}))},className:"filter-input",style:{minWidth:"150px",width:"150px"},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"ongoing",children:"Ongoing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"postponed",children:"Postponed"})]}),A&&e.jsx("button",{onClick:()=>{M(""),T(ft=>({...ft,current_page:1}))},style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear status filter",children:""})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Category:"}),e.jsxs("select",{value:_,onChange:ft=>{B(ft.target.value),T(Ca=>({...Ca,current_page:1}))},className:"filter-input",style:{minWidth:"180px",width:"180px"},children:[e.jsx("option",{value:"",children:"All Categories"}),g.map(ft=>e.jsx("option",{value:ft.id,children:ft.name},ft.id))]}),_&&e.jsx("button",{onClick:()=>{B(""),T(ft=>({...ft,current_page:1}))},style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear category filter",children:""})]})]})}),c&&e.jsx("div",{style:{padding:"10px 30px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem"},children:c}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:i&&m.length===0?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading fixtures..."}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"TITLE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"DATE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"TEAMS"}),e.jsx("th",{style:{padding:"6px 10px"},children:"VENUE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STATUS"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[m.map((ft,Ca)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:Ca%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:ft.title}),e.jsx("td",{style:{padding:"4px 10px"},children:new Date(ft.fixture_date).toLocaleDateString()}),e.jsxs("td",{style:{padding:"4px 10px"},children:[ft.home_team_name," vs ",ft.away_team_name]}),e.jsx("td",{style:{padding:"4px 10px"},children:ft.venue||"N/A"}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium",style:{background:gi(ft.status).background,color:gi(ft.status).color,borderRadius:"4px",display:"inline-block"},children:ft.status})}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>Us(ft),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0},title:"View",children:e.jsx(I,{icon:qa})}),e.jsx("button",{onClick:()=>Ds(ft),style:{color:"#6366f1",background:"none",border:"none",cursor:"pointer",padding:0},title:"Edit",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>Jn(ft),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:0},title:"Delete",children:e.jsx(I,{icon:sa})})]})})]},ft.id)),Array.from({length:Math.max(0,25-m.length)}).map((ft,Ca)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(m.length+Ca)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${Ca}`))]})]})}),e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",Ot," to ",$t," of ",j.total_items||m.length," results."]}),e.jsxs("div",{className:"table-footer-right",children:[!P&&j.total_pages>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>T(ft=>({...ft,current_page:Math.max(1,ft.current_page-1)})),disabled:j.current_page===1,children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",j.current_page," of ",j.total_pages]}),e.jsx("button",{className:"pagination-btn",onClick:()=>T(ft=>({...ft,current_page:Math.min(ft.total_pages,ft.current_page+1)})),disabled:j.current_page===j.total_pages,children:"Next"})]}),!P&&j.total_pages<=1&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"All data displayed"})]})]})]})},Ln=()=>{const Ot=p.length>0?(j.current_page-1)*j.items_per_page+1:0,$t=Math.min(j.current_page*j.items_per_page,j.total_items||p.length);return p.length>0,e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Teams"}),e.jsx("p",{className:"report-subtitle",children:"Manage sports teams and members."})]}),e.jsx("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"},children:e.jsxs("button",{onClick:()=>{aa(null),Oe(!0)},className:"btn-checklist",children:[e.jsx(I,{icon:Ht}),"Add Team"]})})]}),e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsxs("div",{className:"report-filters-left",children:[e.jsx("form",{onSubmit:Jl,className:"filter-group",children:e.jsxs("div",{className:"search-input-wrapper",style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:ua,className:"search-icon"}),e.jsx("input",{type:"text",value:D,onChange:ft=>C(ft.target.value),placeholder:"Search by team name, coach, or category...",className:"filter-input search-input"}),D&&e.jsx("button",{onClick:()=>{C(""),H(""),T(ft=>({...ft,current_page:1}))},style:{position:"absolute",right:"8px",padding:"4px 6px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},title:"Clear search",children:""})]})}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Category:"}),e.jsxs("select",{value:V,onChange:ft=>{Y(ft.target.value),T(Ca=>({...Ca,current_page:1}))},className:"filter-input",style:{minWidth:"180px",width:"180px"},children:[e.jsx("option",{value:"",children:"All Categories"}),g.map(ft=>e.jsx("option",{value:ft.id,children:ft.name},ft.id))]}),V&&e.jsx("button",{onClick:()=>{Y(""),T(ft=>({...ft,current_page:1}))},style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear category filter",children:""})]})]})}),c&&e.jsx("div",{style:{padding:"10px 30px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem"},children:c}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:i&&p.length===0?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading teams..."}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"TEAM NAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"CATEGORY"}),e.jsx("th",{style:{padding:"6px 10px"},children:"COACH"}),e.jsx("th",{style:{padding:"6px 10px"},children:"MEMBERS"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[p.map((ft,Ca)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:Ca%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:ft.name}),e.jsx("td",{style:{padding:"4px 10px"},children:ft.sport_category_name||"N/A"}),e.jsx("td",{style:{padding:"4px 10px"},children:ft.coach_name||"N/A"}),e.jsx("td",{style:{padding:"4px 10px"},children:ft.participant_count||0}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>Dn(ft),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0},title:"View",children:e.jsx(I,{icon:qa})}),e.jsx("button",{onClick:()=>Os(ft),style:{color:"#6366f1",background:"none",border:"none",cursor:"pointer",padding:0},title:"Edit",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>os(ft),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:0},title:"Delete",children:e.jsx(I,{icon:sa})})]})})]},ft.id)),Array.from({length:Math.max(0,25-p.length)}).map((ft,Ca)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(p.length+Ca)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${Ca}`))]})]})}),e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",Ot," to ",$t," of ",j.total_items||p.length," results."]}),e.jsxs("div",{className:"table-footer-right",children:[!L&&j.total_pages>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>T(ft=>({...ft,current_page:Math.max(1,ft.current_page-1)})),disabled:j.current_page===1,children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",j.current_page," of ",j.total_pages]}),e.jsx("button",{className:"pagination-btn",onClick:()=>T(ft=>({...ft,current_page:Math.min(ft.total_pages,ft.current_page+1)})),disabled:j.current_page===j.total_pages,children:"Next"})]}),!L&&j.total_pages<=1&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"All data displayed"})]})]})]})},Ls=()=>{const Ot=N.length>0?(j.current_page-1)*j.items_per_page+1:0,$t=Math.min(j.current_page*j.items_per_page,j.total_items||N.length);return N.length>0,e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Announcements"}),e.jsx("p",{className:"report-subtitle",children:"Manage sports announcements and updates."})]}),e.jsx("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"},children:e.jsxs("button",{onClick:()=>{aa(null),We(!0)},className:"btn-checklist",children:[e.jsx(I,{icon:Ht}),"Add Announcement"]})})]}),e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsxs("div",{className:"report-filters-left",children:[e.jsx("form",{onSubmit:Ws,className:"filter-group",children:e.jsxs("div",{className:"search-input-wrapper",style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:ua,className:"search-icon"}),e.jsx("input",{type:"text",value:J,onChange:ft=>W(ft.target.value),placeholder:"Search by title, content, or type...",className:"filter-input search-input"}),J&&e.jsx("button",{onClick:()=>{W(""),te(""),T(ft=>({...ft,current_page:1}))},style:{position:"absolute",right:"8px",padding:"4px 6px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},title:"Clear search",children:""})]})}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Type:"}),e.jsxs("select",{value:oe,onChange:ft=>{q(ft.target.value),T(Ca=>({...Ca,current_page:1}))},className:"filter-input",style:{minWidth:"150px",width:"150px"},children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"fixture",children:"Fixture"}),e.jsx("option",{value:"result",children:"Result"}),e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"training",children:"Training"}),e.jsx("option",{value:"meeting",children:"Meeting"})]}),oe&&e.jsx("button",{onClick:()=>{q(""),T(ft=>({...ft,current_page:1}))},style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear type filter",children:""})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Priority:"}),e.jsxs("select",{value:G,onChange:ft=>{z(ft.target.value),T(Ca=>({...Ca,current_page:1}))},className:"filter-input",style:{minWidth:"150px",width:"150px"},children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"urgent",children:"Urgent"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]}),G&&e.jsx("button",{onClick:()=>{z(""),T(ft=>({...ft,current_page:1}))},style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear priority filter",children:""})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Category:"}),e.jsxs("select",{value:Z,onChange:ft=>{Q(ft.target.value),T(Ca=>({...Ca,current_page:1}))},className:"filter-input",style:{minWidth:"180px",width:"180px"},children:[e.jsx("option",{value:"",children:"All Categories"}),g.map(ft=>e.jsx("option",{value:ft.id,children:ft.name},ft.id))]}),Z&&e.jsx("button",{onClick:()=>{Q(""),T(ft=>({...ft,current_page:1}))},style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear category filter",children:""})]})]})}),c&&e.jsx("div",{style:{padding:"10px 30px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem"},children:c}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:i&&N.length===0?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading announcements..."}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"TITLE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"TYPE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"PRIORITY"}),e.jsx("th",{style:{padding:"6px 10px"},children:"CATEGORY"}),e.jsx("th",{style:{padding:"6px 10px"},children:"CREATED"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[N.map((ft,Ca)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:Ca%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:ft.title}),e.jsx("td",{style:{padding:"4px 10px"},children:ft.announcement_type||"N/A"}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium",style:{background:On(ft.priority).background,color:On(ft.priority).color,borderRadius:"4px",display:"inline-block"},children:ft.priority||"N/A"})}),e.jsx("td",{style:{padding:"4px 10px"},children:ft.sport_category_name||"N/A"}),e.jsx("td",{style:{padding:"4px 10px"},children:new Date(ft.created_at).toLocaleDateString()}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>$i(ft),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0},title:"View",children:e.jsx(I,{icon:qa})}),e.jsx("button",{onClick:()=>Zn(ft),style:{color:"#6366f1",background:"none",border:"none",cursor:"pointer",padding:0},title:"Edit",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>cl(ft),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:0},title:"Delete",children:e.jsx(I,{icon:sa})})]})})]},ft.id)),Array.from({length:Math.max(0,25-N.length)}).map((ft,Ca)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(N.length+Ca)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${Ca}`))]})]})}),e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",Ot," to ",$t," of ",j.total_items||N.length," results."]}),e.jsxs("div",{className:"table-footer-right",children:[!X&&j.total_pages>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>T(ft=>({...ft,current_page:Math.max(1,ft.current_page-1)})),disabled:j.current_page===1,children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",j.current_page," of ",j.total_pages]}),e.jsx("button",{className:"pagination-btn",onClick:()=>T(ft=>({...ft,current_page:Math.min(ft.total_pages,ft.current_page+1)})),disabled:j.current_page===j.total_pages,children:"Next"})]}),!X&&j.total_pages<=1&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"All data displayed"})]})]})]})};return i&&a!=="fixtures"?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading sports data..."})}):e.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[s?e.jsx(hme,{}):e.jsxs(e.Fragment,{children:[a==="fixtures"&&Lr(),a==="teams"&&Ln(),a==="announcements"&&Ls()]}),a==="fixtures"&&e.jsxs(e.Fragment,{children:[e.jsx(dme,{isOpen:ne||ke,onClose:()=>{me(!1),Ae(!1),aa(null)},onSuccess:Pn,editingFixture:qt}),pe&&ce&&e.jsx("div",{className:"modal-overlay",onClick:()=>ie(!1),children:e.jsxs("div",{className:"modal-dialog",onClick:Ot=>Ot.stopPropagation(),style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Fixture Details"}),e.jsx("button",{className:"modal-close-btn",onClick:()=>ie(!1),children:e.jsx(I,{icon:Wt})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{style:{display:"grid",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Title"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:ce.title})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Date"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:new Date(ce.fixture_date).toLocaleDateString()})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium",style:{background:gi(ce.status).background,color:gi(ce.status).color,borderRadius:"4px",display:"inline-block"},children:ce.status})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Teams"}),e.jsxs("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:[ce.home_team_name," vs ",ce.away_team_name]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Venue"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:ce.venue||"N/A"})]}),ce.result_home_score!==null&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Home Score"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:ce.result_home_score})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Away Score"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:ce.result_away_score})]})]}),ce.result_notes&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Result Notes"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:ce.result_notes})]})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:()=>ie(!1),children:"Close"})})]})}),ae&&ye&&e.jsx("div",{className:"modal-overlay",onClick:()=>Ne(!1),children:e.jsxs("div",{className:"modal-dialog",onClick:Ot=>Ot.stopPropagation(),style:{maxWidth:"400px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Delete Fixture"}),e.jsx("button",{className:"modal-close-btn",onClick:()=>Ne(!1),children:e.jsx(I,{icon:Wt})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{marginBottom:"16px",fontSize:"0.875rem",color:"var(--text-primary)"},children:"Are you sure you want to delete this fixture? This action cannot be undone."}),e.jsxs("div",{style:{padding:"12px",background:"#f9fafb",borderRadius:"4px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Fixture Information"}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Title:"})," ",ye.title]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Date:"})," ",new Date(ye.fixture_date).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:()=>Ne(!1),disabled:Ke,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-delete",onClick:Xl,disabled:Ke,children:Ke?"Deleting...":"Delete Fixture"})]})]})})]}),a==="teams"&&e.jsxs(e.Fragment,{children:[e.jsx(ume,{isOpen:Le||Nt,onClose:()=>{Oe(!1),jt(!1),aa(null)},onSuccess:pi,editingTeam:qt}),$e&&Ie&&e.jsx("div",{className:"modal-overlay",onClick:()=>ct(!1),children:e.jsxs("div",{className:"modal-dialog",onClick:Ot=>Ot.stopPropagation(),style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Team Details"}),e.jsx("button",{className:"modal-close-btn",onClick:()=>ct(!1),children:e.jsx(I,{icon:Wt})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{style:{display:"grid",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Team Name"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:Ie.name})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Sport Category"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:Ie.sport_category_name||"N/A"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Members"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:Ie.participant_count||0})]})]}),Ie.coach_name&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Coach"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:Ie.coach_name})]}),Ie.description&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px",minHeight:"60px"},children:Ie.description})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:()=>ct(!1),children:"Close"})})]})}),xt&&ut&&e.jsx("div",{className:"modal-overlay",onClick:()=>we(!1),children:e.jsxs("div",{className:"modal-dialog",onClick:Ot=>Ot.stopPropagation(),style:{maxWidth:"400px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Delete Team"}),e.jsx("button",{className:"modal-close-btn",onClick:()=>we(!1),children:e.jsx(I,{icon:Wt})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{marginBottom:"16px",fontSize:"0.875rem",color:"var(--text-primary)"},children:"Are you sure you want to delete this team? This action cannot be undone."}),e.jsxs("div",{style:{padding:"12px",background:"#f9fafb",borderRadius:"4px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Team Information"}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Name:"})," ",ut.name]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Category:"})," ",ut.sport_category_name||"N/A"]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:()=>we(!1),disabled:Ve,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-delete",onClick:tn,disabled:Ve,children:Ve?"Deleting...":"Delete Team"})]})]})})]}),a==="announcements"&&e.jsxs(e.Fragment,{children:[e.jsx(mme,{isOpen:Xe||Dt,onClose:()=>{We(!1),It(!1),aa(null)},onSuccess:$a,editingAnnouncement:qt}),Ge&&Mt&&e.jsx("div",{className:"modal-overlay",onClick:()=>lt(!1),children:e.jsxs("div",{className:"modal-dialog",onClick:Ot=>Ot.stopPropagation(),style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Announcement Details"}),e.jsx("button",{className:"modal-close-btn",onClick:()=>lt(!1),children:e.jsx(I,{icon:Wt})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{style:{display:"grid",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Title"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:Mt.title})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Type"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:Mt.announcement_type||"N/A"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Priority"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium",style:{background:On(Mt.priority).background,color:On(Mt.priority).color,borderRadius:"4px",display:"inline-block"},children:Mt.priority||"N/A"})})]})]}),Mt.sport_category_name&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Sport Category"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:Mt.sport_category_name})]}),Mt.team_name&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Team"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:Mt.team_name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Content"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px",minHeight:"60px"},children:Mt.content})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Created"}),e.jsx("div",{style:{padding:"8px",background:"#f9fafb",borderRadius:"4px"},children:new Date(Mt.created_at).toLocaleDateString()})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:()=>lt(!1),children:"Close"})})]})}),Bt&&ca&&e.jsx("div",{className:"modal-overlay",onClick:()=>ze(!1),children:e.jsxs("div",{className:"modal-dialog",onClick:Ot=>Ot.stopPropagation(),style:{maxWidth:"400px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Delete Announcement"}),e.jsx("button",{className:"modal-close-btn",onClick:()=>ze(!1),children:e.jsx(I,{icon:Wt})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{marginBottom:"16px",fontSize:"0.875rem",color:"var(--text-primary)"},children:"Are you sure you want to delete this announcement? This action cannot be undone."}),e.jsxs("div",{style:{padding:"12px",background:"#f9fafb",borderRadius:"4px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:700,color:"var(--text-secondary)",marginBottom:"6px"},children:"Announcement Information"}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Title:"})," ",ca.title]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-primary)"},children:[e.jsx("strong",{children:"Type:"})," ",ca.announcement_type||"N/A"]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:()=>ze(!1),disabled:Yt,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-delete",onClick:Bi,disabled:Yt,children:Yt?"Deleting...":"Delete Announcement"})]})]})})]}),fe.visible&&fe.message&&e.jsx("div",{className:"success-toast",children:e.jsxs("div",{className:"success-toast-content",style:{background:Ps(fe.type)},children:[Ra(fe.type),e.jsx("span",{children:fe.message})]})})]})},fme=()=>{const{token:t}=At(),a=Da(),[r,s]=x.useState([]),[n,i]=x.useState([]),[o,c]=x.useState(!0),[u,m]=x.useState(null),[h,p]=x.useState(""),[y,g]=x.useState(""),[v,N]=x.useState(""),[w,j]=x.useState(""),[T,k]=x.useState(1),[R,P]=x.useState(1),[$,A]=x.useState(0),[M]=x.useState(25),[_,B]=x.useState(!1),[D,C]=x.useState(!1),[L,H]=x.useState(null),[V,Y]=x.useState(null),[J,W]=x.useState([]),[X,te]=x.useState(!1),[oe,q]=x.useState(!1),[G,z]=x.useState(null),[Z,Q]=x.useState(null),[fe,he]=x.useState([]),[ne,me]=x.useState(!1),[pe,ie]=x.useState(null),[ke,Ae]=x.useState({name:"",description:"",chart_of_account_id:"",depreciation_account_id:"",expense_account_id:"",requires_registration:!1,requires_serial_number:!1,icon:"faBox"}),[ae,Ne]=x.useState({asset_type_id:"",asset_name:"",description:"",purchase_date:"",total_cost:"",supplier_name:"",registration_number:"",location:"",serial_number:"",status:"Active",condition:"",custom_fields:{},enable_depreciation:!1,depreciation_method:"Straight Line",useful_life_years:"",salvage_value:"0",is_opening_balance:!1,opening_balance_date:"",amount_paid:"0",payment_method:"Bank Transfer"});x.useEffect(()=>{ce()},[]),x.useEffect(()=>{X&&De()},[X]),x.useEffect(()=>{ye()},[T,y,v,w]),x.useEffect(()=>{if(ae.asset_type_id){const Ye=n.find(Et=>Et.id===parseInt(ae.asset_type_id));Y(Ye)}else Y(null)},[ae.asset_type_id,n]);const ce=async()=>{try{const Ye=await re.get(`${se}/assets/types`,{headers:{Authorization:`Bearer ${t}`}});Ye.data.success&&i(Ye.data.data||[])}catch(Ye){console.error("Error fetching asset types:",Ye)}},De=async()=>{try{const Ye=await re.get(`${se}/accounting/chart-of-accounts`,{headers:{Authorization:`Bearer ${t}`}});Ye.data.success&&he(Ye.data.data||[])}catch(Ye){console.error("Error fetching chart of accounts:",Ye)}},ye=async()=>{try{c(!0),m(null);const Ye={page:T,limit:M};y&&(Ye.search=y),v&&(Ye.asset_type_id=v),w&&(Ye.status=w);const Et=await re.get(`${se}/assets`,{headers:{Authorization:`Bearer ${t}`},params:Ye});Et.data.success?(s(Et.data.data||[]),P(Et.data.pagination?.total_pages||1),A(Et.data.pagination?.total_items||Et.data.data?.length||0)):m(Et.data.error||"Failed to fetch assets")}catch(Ye){console.error("Error fetching assets:",Ye),m(Ye.response?.data?.error||"Failed to fetch assets")}finally{c(!1)}},Ee=Ye=>{Ye.preventDefault(),g(h),k(1)},Ke=Ye=>{N(Ye.target.value),k(1)},Re=()=>{N(""),k(1)},Le=Ye=>{j(Ye.target.value),k(1)},Oe=()=>{j(""),k(1)},$e=Ye=>{a(`/dashboard/assets/${Ye}`)},ct=Ye=>{a(`/dashboard/assets/${Ye}/edit`)},Nt=()=>{B(!0),C(!0),setTimeout(()=>{C(!1)},300)},jt=()=>{B(!1),C(!1),H(null),W([]),Ne({asset_type_id:"",asset_name:"",description:"",purchase_date:"",total_cost:"",supplier_name:"",registration_number:"",location:"",serial_number:"",status:"Active",condition:"",custom_fields:{},enable_depreciation:!1,depreciation_method:"Straight Line",useful_life_years:"",salvage_value:"0",is_opening_balance:!1,opening_balance_date:"",amount_paid:"0",payment_method:"Bank Transfer"})},xt=Ye=>{const{name:Et,value:na,type:zt,checked:it}=Ye.target;Ne(Tt=>({...Tt,[Et]:zt==="checkbox"?it:na}))},we=()=>{W([...J,{name:"",value:""}])},Ie=(Ye,Et,na)=>{const zt=[...J];zt[Ye][Et]=na,W(zt);const it={};zt.forEach(Tt=>{Tt.name&&Tt.value&&(it[Tt.name]=Tt.value)}),Ne(Tt=>({...Tt,custom_fields:{...Tt.custom_fields,...it}}))},dt=Ye=>{const Et=J.filter((zt,it)=>it!==Ye);W(Et);const na={};Et.forEach(zt=>{zt.name&&zt.value&&(na[zt.name]=zt.value)}),Ne(zt=>({...zt,custom_fields:na}))},ut=(Ye,Et)=>{Ne(na=>({...na,custom_fields:{...na.custom_fields,[Ye]:Et}}))},Te=Ye=>{const Et=ae.custom_fields[Ye.field_name]||"";switch(Ye.field_type){case"text":return e.jsx("input",{type:"text",value:Et,onChange:zt=>ut(Ye.field_name,zt.target.value),className:"form-control",required:Ye.is_required});case"number":return e.jsx("input",{type:"number",step:"0.01",value:Et,onChange:zt=>ut(Ye.field_name,zt.target.value),className:"form-control",required:Ye.is_required});case"date":return e.jsx("input",{type:"date",value:Et,onChange:zt=>ut(Ye.field_name,zt.target.value),className:"form-control",required:Ye.is_required});case"textarea":return e.jsx("textarea",{value:Et,onChange:zt=>ut(Ye.field_name,zt.target.value),className:"form-control",rows:"3",required:Ye.is_required});case"select":const na=Ye.field_options?JSON.parse(Ye.field_options):[];return e.jsxs("select",{value:Et,onChange:zt=>ut(Ye.field_name,zt.target.value),className:"form-control",required:Ye.is_required,children:[e.jsx("option",{value:"",children:"Select..."}),na.map((zt,it)=>e.jsx("option",{value:zt,children:zt},it))]});case"checkbox":return e.jsx("input",{type:"checkbox",checked:Et===!0||Et==="true",onChange:zt=>ut(Ye.field_name,zt.target.checked),style:{width:"16px",height:"16px"}});default:return null}},Ve=()=>ae.asset_type_id&&ae.asset_name&&ae.purchase_date&&ae.total_cost,qe=async Ye=>{Ye.preventDefault(),C(!0),H(null);try{const Et={...ae,total_cost:parseFloat(ae.total_cost),amount_paid:parseFloat(ae.amount_paid||0),useful_life_years:ae.enable_depreciation?parseInt(ae.useful_life_years):null,salvage_value:ae.enable_depreciation?parseFloat(ae.salvage_value||0):0},na=await re.post(`${se}/assets`,Et,{headers:{Authorization:`Bearer ${t}`}});na.data.success?(await ye(),jt()):H(na.data.error||"Failed to create asset")}catch(Et){console.error("Error creating asset:",Et);let na="An unexpected error occurred";if(Et.response){const zt=Et.response.data;zt?.error?na=zt.error:na=zt?.message||`Server Error (${Et.response.status})`}else Et.request?na="No response from server. Please check your internet connection.":na=Et.message||"An unexpected error occurred";H(na)}finally{C(!1)}},Xe=()=>{te(!0),q(!0),setTimeout(()=>{q(!1)},300)},We=()=>{te(!1),q(!1),z(null),Q(null),me(!1),ie(null),Ae({name:"",description:"",chart_of_account_id:"",depreciation_account_id:"",expense_account_id:"",requires_registration:!1,requires_serial_number:!1,icon:"faBox"})},Ge=Ye=>{const{name:Et,value:na,type:zt,checked:it}=Ye.target;Ae(Tt=>({...Tt,[Et]:zt==="checkbox"?it:na}))},lt=()=>{ie(null),Ae({name:"",description:"",chart_of_account_id:"",depreciation_account_id:"",expense_account_id:"",requires_registration:!1,requires_serial_number:!1,icon:"faBox"}),me(!0),z(null),Q(null)},Dt=Ye=>{ie(Ye),Ae({name:Ye.name||"",description:Ye.description||"",chart_of_account_id:Ye.chart_of_account_id||"",depreciation_account_id:Ye.depreciation_account_id||"",expense_account_id:Ye.expense_account_id||"",requires_registration:Ye.requires_registration||!1,requires_serial_number:Ye.requires_serial_number||!1,icon:Ye.icon||"faBox"}),me(!0),z(null),Q(null)},It=async Ye=>{Ye.preventDefault(),q(!0),z(null),Q(null);try{const Et=pe?`${se}/assets/types/${pe.id}`:`${se}/assets/types`,zt=await re[pe?"put":"post"](Et,ke,{headers:{Authorization:`Bearer ${t}`}});zt.data.success?(Q(pe?"Asset type updated successfully":"Asset type created successfully"),me(!1),ie(null),await ce(),setTimeout(()=>Q(null),3e3)):z(zt.data.error||"Failed to save asset type")}catch(Et){console.error("Error saving asset type:",Et);let na="An unexpected error occurred";if(Et.response){const zt=Et.response.data;zt?.error?na=zt.error:na=zt?.message||`Server Error (${Et.response.status})`}else Et.request?na="No response from server. Please check your internet connection.":na=Et.message||"An unexpected error occurred";z(na)}finally{q(!1)}},Bt=async Ye=>{if(window.confirm("Are you sure you want to delete this asset type? This action cannot be undone."))try{q(!0),z(null),Q(null);const Et=await re.delete(`${se}/assets/types/${Ye}`,{headers:{Authorization:`Bearer ${t}`}});Et.data.success?(Q("Asset type deleted successfully"),await ce(),setTimeout(()=>Q(null),3e3)):z(Et.data.error||"Failed to delete asset type")}catch(Et){console.error("Error deleting asset type:",Et),z(Et.response?.data?.error||"Failed to delete asset type")}finally{q(!1)}},ze=()=>fe.filter(Ye=>Ye.type==="Asset"&&Ye.is_active),Mt=()=>fe.filter(Ye=>Ye.type==="Expense"&&Ye.is_active),oa=Ye=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(Ye||0),ca=Ye=>Ye?new Date(Ye).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",Ka=Ye=>({Active:{background:"#d1fae5",color:"#065f46"},Disposed:{background:"#f3f4f6",color:"#374151"},Lost:{background:"#fee2e2",color:"#991b1b"},Damaged:{background:"#fed7aa",color:"#9a3412"},"Under Repair":{background:"#fef3c7",color:"#92400e"}})[Ye]||{background:"#f3f4f6",color:"#374151"},Yt=r.length>0?(T-1)*M+1:0,er=Math.min(T*M,$);return o&&r.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading assets..."})}):e.jsxs("div",{className:"reports-container",style:{height:"100%",maxHeight:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsxs("div",{className:"report-header",style:{flexShrink:0},children:[e.jsxs("div",{className:"report-header-content",children:[e.jsx("h2",{className:"report-title",children:"Fixed Assets"}),e.jsx("p",{className:"report-subtitle",children:"Manage school property, vehicles, and equipment."})]}),e.jsxs("div",{className:"report-header-right",style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsxs("button",{onClick:Xe,className:"modal-btn modal-btn-secondary",style:{marginRight:"8px"},children:[e.jsx(I,{icon:Ph}),"Configurations"]}),e.jsxs("button",{onClick:Nt,className:"btn-checklist",children:[e.jsx(I,{icon:Ht}),"Add Asset"]})]})]}),e.jsx("div",{className:"report-filters",style:{flexShrink:0},children:e.jsxs("div",{className:"report-filters-left",children:[e.jsx("form",{onSubmit:Ee,className:"filter-group",children:e.jsxs("div",{className:"search-input-wrapper",style:{position:"relative",display:"flex",alignItems:"center"},children:[e.jsx(I,{icon:ua,className:"search-icon"}),e.jsx("input",{type:"text",value:h,onChange:Ye=>p(Ye.target.value),placeholder:"Search by asset code, name, or registration number...",className:"filter-input search-input"}),h&&e.jsx("button",{onClick:()=>{p(""),g(""),k(1)},style:{position:"absolute",right:"8px",padding:"4px 6px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px"},title:"Clear search",children:""})]})}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Type:"}),e.jsxs("select",{value:v,onChange:Ke,className:"filter-input",style:{minWidth:"150px",width:"150px"},children:[e.jsx("option",{value:"",children:"All Types"}),n.map(Ye=>e.jsx("option",{value:Ye.id,children:Ye.name},Ye.id))]}),v&&e.jsx("button",{onClick:Re,style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear type filter",children:""})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{className:"filter-label",style:{marginRight:"8px"},children:"Status:"}),e.jsxs("select",{value:w,onChange:Le,className:"filter-input",style:{minWidth:"150px",width:"150px"},children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Disposed",children:"Disposed"}),e.jsx("option",{value:"Lost",children:"Lost"}),e.jsx("option",{value:"Damaged",children:"Damaged"}),e.jsx("option",{value:"Under Repair",children:"Under Repair"})]}),w&&e.jsx("button",{onClick:Oe,style:{marginLeft:"8px",padding:"6px 10px",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem",color:"var(--text-secondary)"},title:"Clear status filter",children:""})]})]})}),u&&e.jsx("div",{style:{padding:"10px 30px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem"},children:u}),e.jsx("div",{className:"report-content-container ecl-table-container",style:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",minHeight:0,padding:0,height:"100%"},children:o&&r.length===0?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#64748b"},children:"Loading assets..."}):e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"ASSET CODE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ASSET NAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"TYPE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"PURCHASE DATE"}),e.jsx("th",{style:{padding:"6px 10px"},children:"TOTAL COST"}),e.jsx("th",{style:{padding:"6px 10px"},children:"PAID"}),e.jsx("th",{style:{padding:"6px 10px"},children:"OUTSTANDING"}),e.jsx("th",{style:{padding:"6px 10px"},children:"STATUS"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsxs("tbody",{children:[r.map((Ye,Et)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:Et%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:Ye.asset_code}),e.jsxs("td",{style:{padding:"4px 10px"},children:[e.jsx("div",{style:{fontWeight:500},children:Ye.asset_name}),Ye.registration_number&&e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:["Reg: ",Ye.registration_number]})]}),e.jsx("td",{style:{padding:"4px 10px"},children:Ye.asset_type_name||"-"}),e.jsx("td",{style:{padding:"4px 10px"},children:ca(Ye.purchase_date)}),e.jsx("td",{style:{padding:"4px 10px"},children:oa(Ye.total_cost)}),e.jsx("td",{style:{padding:"4px 10px",color:"#10b981"},children:oa(Ye.amount_paid)}),e.jsx("td",{style:{padding:"4px 10px",color:"#f59e0b"},children:oa(Ye.outstanding_balance)}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"0.7rem",fontWeight:500,...Ka(Ye.status)},children:Ye.status||"N/A"})}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>$e(Ye.id),style:{color:"#2563eb",background:"none",border:"none",cursor:"pointer",padding:0},title:"View",children:e.jsx(I,{icon:qa})}),e.jsx("button",{onClick:()=>ct(Ye.id),style:{color:"#6366f1",background:"none",border:"none",cursor:"pointer",padding:0},title:"Edit",children:e.jsx(I,{icon:Aa})})]})})]},Ye.id)),Array.from({length:Math.max(0,25-r.length)}).map((Ye,Et)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:(r.length+Et)%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""}),e.jsx("td",{style:{padding:"4px 10px"},children:""})]},`empty-${Et}`))]})]})}),e.jsxs("div",{className:"ecl-table-footer",style:{flexShrink:0},children:[e.jsxs("div",{className:"table-footer-left",children:["Showing ",Yt," to ",er," of ",$||0," results."]}),e.jsxs("div",{className:"table-footer-right",children:[!y&&R>1&&e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>k(Math.max(1,T-1)),disabled:T===1,children:"Previous"}),e.jsxs("span",{className:"pagination-info",style:{fontSize:"0.7rem"},children:["Page ",T," of ",R]}),e.jsx("button",{className:"pagination-btn",onClick:()=>k(Math.min(R,T+1)),disabled:T===R,children:"Next"})]}),!y&&R<=1&&e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"All data displayed"})]})]}),_&&e.jsx("div",{className:"modal-overlay",onClick:jt,children:e.jsx("div",{className:"modal-dialog",onClick:Ye=>Ye.stopPropagation(),style:{maxWidth:"800px",minHeight:D?"400px":"auto",maxHeight:"95vh",overflowY:"auto"},children:D?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading..."})]}),e.jsxs("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{height:"32px",width:"100px",background:"#e5e7eb",borderRadius:"4px"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Add Asset"}),e.jsx("button",{className:"modal-close-btn",onClick:jt,children:e.jsx(I,{icon:Wt})})]}),e.jsxs("div",{className:"modal-body",children:[L&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:L}),e.jsxs("form",{onSubmit:qe,className:"modal-form",children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:iE,style:{color:"#2563eb"}}),"Asset Information"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Asset Type ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"asset_type_id",className:"form-control",value:ae.asset_type_id,onChange:xt,required:!0,children:[e.jsx("option",{value:"",children:"Select Asset Type"}),n.map(Ye=>e.jsx("option",{value:Ye.id,children:Ye.name},Ye.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Asset Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"asset_name",className:"form-control",placeholder:"e.g., Toyota Hilux ABC-1234",value:ae.asset_name,onChange:xt,required:!0})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{name:"description",className:"form-control",rows:"2",placeholder:"Additional details about the asset...",value:ae.description,onChange:xt})]})]})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Za,style:{color:"#10b981"}}),"Purchase Details"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Purchase Date ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"date",name:"purchase_date",className:"form-control",value:ae.purchase_date,onChange:xt,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Total Cost (USD) ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",name:"total_cost",className:"form-control",placeholder:"0.00",value:ae.total_cost,onChange:xt,required:!0})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Supplier Name"}),e.jsx("input",{type:"text",name:"supplier_name",className:"form-control",placeholder:"Name of supplier/vendor",value:ae.supplier_name,onChange:xt})]})]})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:lu,style:{color:"#6366f1"}}),"Asset Details"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[V?.requires_registration&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Registration Number"}),e.jsx("input",{type:"text",name:"registration_number",className:"form-control",placeholder:"e.g., ABC-1234",value:ae.registration_number,onChange:xt})]}),V?.requires_serial_number&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Serial Number"}),e.jsx("input",{type:"text",name:"serial_number",className:"form-control",placeholder:"e.g., SN123456789",value:ae.serial_number,onChange:xt})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Location"}),e.jsx("input",{type:"text",name:"location",className:"form-control",placeholder:"Where is this asset located?",value:ae.location,onChange:xt})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{name:"status",className:"form-control",value:ae.status,onChange:xt,children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Disposed",children:"Disposed"}),e.jsx("option",{value:"Lost",children:"Lost"}),e.jsx("option",{value:"Damaged",children:"Damaged"}),e.jsx("option",{value:"Under Repair",children:"Under Repair"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Condition"}),e.jsxs("select",{name:"condition",className:"form-control",value:ae.condition,onChange:xt,children:[e.jsx("option",{value:"",children:"Select Condition"}),e.jsx("option",{value:"Excellent",children:"Excellent"}),e.jsx("option",{value:"Good",children:"Good"}),e.jsx("option",{value:"Fair",children:"Fair"}),e.jsx("option",{value:"Poor",children:"Poor"})]})]})]})]}),J.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"8px"},children:"Custom Details"}),e.jsxs("button",{type:"button",onClick:we,className:"modal-btn",style:{background:"#2563eb",color:"white",padding:"6px 12px",fontSize:"0.7rem"},children:[e.jsx(I,{icon:Ht,style:{marginRight:"4px"}}),"Add Field"]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:J.map((Ye,Et)=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:"12px",alignItems:"center"},children:[e.jsx("input",{type:"text",value:Ye.name,onChange:na=>Ie(Et,"name",na.target.value),placeholder:"Field name (e.g., Color)",className:"form-control"}),e.jsx("input",{type:"text",value:Ye.value,onChange:na=>Ie(Et,"value",na.target.value),placeholder:"Value (e.g., Red)",className:"form-control"}),e.jsx("button",{type:"button",onClick:()=>dt(Et),style:{background:"#dc2626",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"0.7rem"},children:e.jsx(I,{icon:sa})})]},Et))})]}),V&&V.custom_fields&&V.custom_fields.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:"Additional Information"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:V.custom_fields.map(Ye=>e.jsxs("div",{className:(Ye.field_type==="textarea","form-group"),style:Ye.field_type==="textarea"?{gridColumn:"1 / -1"}:{},children:[e.jsxs("label",{className:"form-label",children:[Ye.field_label,Ye.is_required&&e.jsx("span",{className:"required",children:"*"})]}),Te(Ye)]},Ye.id))})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[e.jsx("input",{type:"checkbox",name:"is_opening_balance",checked:ae.is_opening_balance,onChange:xt,style:{width:"16px",height:"16px"}}),e.jsx("label",{className:"form-label",style:{margin:0},children:"This is a historical asset (opening balance)"})]}),ae.is_opening_balance&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px",padding:"16px",background:"#eff6ff",borderRadius:"4px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Opening Balance Date"}),e.jsx("input",{type:"date",name:"opening_balance_date",className:"form-control",value:ae.opening_balance_date,onChange:xt})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Amount Already Paid (USD)"}),e.jsx("input",{type:"number",step:"0.01",name:"amount_paid",className:"form-control",placeholder:"0.00",value:ae.amount_paid,onChange:xt}),e.jsxs("p",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginTop:"4px"},children:["Outstanding: $",(parseFloat(ae.total_cost||0)-parseFloat(ae.amount_paid||0)).toFixed(2)]})]})]})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[e.jsx("input",{type:"checkbox",name:"enable_depreciation",checked:ae.enable_depreciation,onChange:xt,style:{width:"16px",height:"16px"}}),e.jsx("label",{className:"form-label",style:{margin:0},children:"Enable depreciation tracking (optional)"})]}),ae.enable_depreciation&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"16px",background:"#f9fafb",borderRadius:"4px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Depreciation Method"}),e.jsxs("select",{name:"depreciation_method",className:"form-control",value:ae.depreciation_method,onChange:xt,children:[e.jsx("option",{value:"Straight Line",children:"Straight Line"}),e.jsx("option",{value:"Declining Balance",children:"Declining Balance"}),e.jsx("option",{value:"Units of Production",children:"Units of Production"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Useful Life (years)"}),e.jsx("input",{type:"number",name:"useful_life_years",className:"form-control",placeholder:"e.g., 5",value:ae.useful_life_years,onChange:xt})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Salvage Value (USD)"}),e.jsx("input",{type:"number",step:"0.01",name:"salvage_value",className:"form-control",placeholder:"0.00",value:ae.salvage_value,onChange:xt})]})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:jt,children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:qe,disabled:!Ve()||D,children:D?"Creating...":"Create Asset"})]})]})})}),X&&e.jsx("div",{className:"modal-overlay",onClick:We,children:e.jsx("div",{className:"modal-dialog",onClick:Ye=>Ye.stopPropagation(),style:{maxWidth:"900px",width:"90vw",maxHeight:"95vh",overflowY:"auto"},children:oe&&!ne?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{height:"20px",width:"200px",background:"#e5e7eb",borderRadius:"4px"}}),e.jsx("div",{style:{width:"18px",height:"18px",background:"#e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{className:"modal-body",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flex:"1",minHeight:"300px"},children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading..."})]}),e.jsx("div",{className:"modal-footer",style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:e.jsx("div",{style:{height:"32px",width:"80px",background:"#e5e7eb",borderRadius:"4px"}})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Fixed Assets Configuration"}),e.jsx("button",{className:"modal-close-btn",onClick:We,children:e.jsx(I,{icon:Wt})})]}),e.jsxs("div",{className:"modal-body",children:[G&&e.jsx("div",{style:{padding:"10px",background:"#fee2e2",color:"#dc2626",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:G}),Z&&e.jsx("div",{style:{padding:"10px",background:"#d1fae5",color:"#065f46",fontSize:"0.75rem",marginBottom:"16px",borderRadius:"4px"},children:Z}),ne?e.jsx("form",{onSubmit:It,className:"modal-form",children:e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("h4",{style:{fontSize:"0.875rem",fontWeight:600,color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:Ph,style:{color:"#2563eb"}}),pe?"Edit Asset Type":"Add New Asset Type"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Name ",e.jsx("span",{className:"required",children:"*"})]}),e.jsx("input",{type:"text",name:"name",className:"form-control",placeholder:"e.g., Vehicles, Equipment",value:ke.name,onChange:Ge,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Icon"}),e.jsx("input",{type:"text",name:"icon",className:"form-control",placeholder:"faBox",value:ke.icon,onChange:Ge})]}),e.jsxs("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{name:"description",className:"form-control",rows:"2",placeholder:"Brief description of this asset type",value:ke.description,onChange:Ge})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Chart of Account ",e.jsx("span",{className:"required",children:"*"})]}),e.jsxs("select",{name:"chart_of_account_id",className:"form-control",value:ke.chart_of_account_id,onChange:Ge,required:!0,children:[e.jsx("option",{value:"",children:"Select Account"}),ze().map(Ye=>e.jsxs("option",{value:Ye.id,children:[Ye.code," - ",Ye.name]},Ye.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Depreciation Account"}),e.jsxs("select",{name:"depreciation_account_id",className:"form-control",value:ke.depreciation_account_id,onChange:Ge,children:[e.jsx("option",{value:"",children:"Select Account (Optional)"}),Mt().map(Ye=>e.jsxs("option",{value:Ye.id,children:[Ye.code," - ",Ye.name]},Ye.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Expense Account"}),e.jsxs("select",{name:"expense_account_id",className:"form-control",value:ke.expense_account_id,onChange:Ge,children:[e.jsx("option",{value:"",children:"Select Account (Optional)"}),Mt().map(Ye=>e.jsxs("option",{value:Ye.id,children:[Ye.code," - ",Ye.name]},Ye.id))]})]}),e.jsx("div",{className:"form-group",style:{gridColumn:"1 / -1"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",name:"requires_registration",checked:ke.requires_registration,onChange:Ge,style:{width:"16px",height:"16px"}}),e.jsx("span",{className:"form-label",style:{margin:0},children:"Requires Registration Number"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",name:"requires_serial_number",checked:ke.requires_serial_number,onChange:Ge,style:{width:"16px",height:"16px"}}),e.jsx("span",{className:"form-label",style:{margin:0},children:"Requires Serial Number"})]})]})})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Manage asset types and their settings"}),e.jsxs("button",{onClick:lt,className:"btn-checklist",style:{fontSize:"0.7rem",padding:"6px 12px"},children:[e.jsx(I,{icon:Ht}),"Add Asset Type"]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{className:"ecl-table",style:{fontSize:"0.75rem",width:"100%"},children:[e.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"var(--sidebar-bg)"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 10px"},children:"NAME"}),e.jsx("th",{style:{padding:"6px 10px"},children:"DESCRIPTION"}),e.jsx("th",{style:{padding:"6px 10px"},children:"CHART OF ACCOUNT"}),e.jsx("th",{style:{padding:"6px 10px"},children:"REQUIRES REGISTRATION"}),e.jsx("th",{style:{padding:"6px 10px"},children:"REQUIRES SERIAL #"}),e.jsx("th",{style:{padding:"6px 10px"},children:"ACTIONS"})]})}),e.jsx("tbody",{children:n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)"},children:'No asset types found. Click "Add Asset Type" to create one.'})}):n.map((Ye,Et)=>e.jsxs("tr",{style:{height:"32px",backgroundColor:Et%2===0?"#fafafa":"#f3f4f6"},children:[e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(I,{icon:cE,style:{color:"var(--text-secondary)",fontSize:"0.7rem"}}),e.jsx("span",{style:{fontWeight:500},children:Ye.name})]})}),e.jsx("td",{style:{padding:"4px 10px"},children:Ye.description||"-"}),e.jsxs("td",{style:{padding:"4px 10px"},children:[Ye.account_code," - ",Ye.account_name]}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"0.7rem",fontWeight:500,background:Ye.requires_registration?"#d1fae5":"#f3f4f6",color:Ye.requires_registration?"#065f46":"#374151"},children:Ye.requires_registration?"Yes":"No"})}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",fontSize:"0.7rem",fontWeight:500,background:Ye.requires_serial_number?"#d1fae5":"#f3f4f6",color:Ye.requires_serial_number?"#065f46":"#374151"},children:Ye.requires_serial_number?"Yes":"No"})}),e.jsx("td",{style:{padding:"4px 10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>Dt(Ye),style:{color:"#6366f1",background:"none",border:"none",cursor:"pointer",padding:0},title:"Edit",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>Bt(Ye.id),style:{color:"#dc2626",background:"none",border:"none",cursor:"pointer",padding:0},title:"Delete",children:e.jsx(I,{icon:sa})})]})})]},Ye.id))})]})})]})]}),e.jsx("div",{className:"modal-footer",children:ne?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:()=>{me(!1),ie(null)},children:"Cancel"}),e.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:It,disabled:!ke.name||!ke.chart_of_account_id||oe,children:oe?"Saving...":pe?"Update":"Create"})]}):e.jsx("button",{className:"modal-btn modal-btn-secondary",onClick:We,children:"Close"})})]})})})]})},pme=()=>{const t=Da(),[a,r]=x.useState([]),[s,n]=x.useState(null),[i,o]=x.useState(!1),[c,u]=x.useState(""),[m,h]=x.useState(""),[p,y]=x.useState({asset_type_id:"",asset_name:"",description:"",purchase_date:"",total_cost:"",supplier_name:"",registration_number:"",location:"",serial_number:"",status:"Active",condition:"",custom_fields:{},enable_depreciation:!1,depreciation_method:"Straight Line",useful_life_years:"",salvage_value:"0",is_opening_balance:!1,opening_balance_date:"",amount_paid:"0",payment_method:"Bank Transfer"}),[g,v]=x.useState([]),N=()=>{v([...g,{name:"",value:""}])},w=(A,M,_)=>{const B=[...g];B[A][M]=_,v(B);const D={};B.forEach(C=>{C.name&&C.value&&(D[C.name]=C.value)}),y(C=>({...C,custom_fields:{...C.custom_fields,...D}}))},j=A=>{const M=g.filter((B,D)=>D!==A);v(M);const _={};M.forEach(B=>{B.name&&B.value&&(_[B.name]=B.value)}),y(B=>({...B,custom_fields:_}))};x.useEffect(()=>{T()},[]),x.useEffect(()=>{if(p.asset_type_id){const A=a.find(M=>M.id===parseInt(p.asset_type_id));n(A)}else n(null)},[p.asset_type_id,a]);const T=async()=>{try{const A=localStorage.getItem("token"),M=await re.get("http://localhost:5000/api/assets/types",{headers:{Authorization:`Bearer ${A}`}});r(M.data.data||[])}catch(A){console.error("Error fetching asset types:",A),u("Failed to fetch asset types")}},k=A=>{const{name:M,value:_,type:B,checked:D}=A.target;y(C=>({...C,[M]:B==="checkbox"?D:_}))},R=(A,M)=>{y(_=>({..._,custom_fields:{..._.custom_fields,[A]:M}}))},P=async A=>{A.preventDefault(),o(!0),u(""),h("");try{const M=localStorage.getItem("token"),_={...p,total_cost:parseFloat(p.total_cost),amount_paid:parseFloat(p.amount_paid||0),useful_life_years:p.enable_depreciation?parseInt(p.useful_life_years):null,salvage_value:p.enable_depreciation?parseFloat(p.salvage_value||0):0},B=await re.post("http://localhost:5000/api/assets",_,{headers:{Authorization:`Bearer ${M}`}});h("Asset created successfully!"),setTimeout(()=>{t("/dashboard/assets")},1500)}catch(M){console.error("Error creating asset:",M),u(M.response?.data?.error||"Failed to create asset")}finally{o(!1)}},$=A=>{const M=p.custom_fields[A.field_name]||"";switch(A.field_type){case"text":return e.jsx("input",{type:"text",value:M,onChange:B=>R(A.field_name,B.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",required:A.is_required});case"number":return e.jsx("input",{type:"number",step:"0.01",value:M,onChange:B=>R(A.field_name,B.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",required:A.is_required});case"date":return e.jsx("input",{type:"date",value:M,onChange:B=>R(A.field_name,B.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",required:A.is_required});case"textarea":return e.jsx("textarea",{value:M,onChange:B=>R(A.field_name,B.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",rows:"3",required:A.is_required});case"select":const _=A.field_options?JSON.parse(A.field_options):[];return e.jsxs("select",{value:M,onChange:B=>R(A.field_name,B.target.value),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",required:A.is_required,children:[e.jsx("option",{value:"",children:"Select..."}),_.map((B,D)=>e.jsx("option",{value:B,children:B},D))]});case"checkbox":return e.jsx("input",{type:"checkbox",checked:M===!0||M==="true",onChange:B=>R(A.field_name,B.target.checked),className:"h-3 w-3"});default:return null}};return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h1",{className:"text-base font-bold text-gray-900",children:"Add New Fixed Asset"}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"Record a new asset purchase or add historical asset"})]}),c&&e.jsx("div",{className:"mb-3 p-2 bg-red-100 border border-red-400 text-red-700 text-xs",children:c}),m&&e.jsx("div",{className:"mb-3 p-2 bg-green-100 border border-green-400 text-green-700 text-xs",children:m}),e.jsxs("form",{onSubmit:P,className:"bg-white border border-gray-200 p-3 space-y-3",children:[e.jsxs("div",{className:"border-b pb-3",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-3",children:"Asset Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Asset Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"asset_type_id",value:p.asset_type_id,onChange:k,required:!0,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",children:[e.jsx("option",{value:"",children:"Select Asset Type"}),a.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Asset Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"asset_name",value:p.asset_name,onChange:k,required:!0,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"e.g., Toyota Hilux ABC-1234"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:p.description,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",rows:"2",placeholder:"Additional details about the asset..."})]})]})]}),e.jsxs("div",{className:"border-b pb-3",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-3",children:"Purchase Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Purchase Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"purchase_date",value:p.purchase_date,onChange:k,required:!0,className:"w-full border border-gray-300 px-2 py-1.5 text-xs"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Total Cost (USD) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",name:"total_cost",value:p.total_cost,onChange:k,required:!0,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"0.00"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",name:"supplier_name",value:p.supplier_name,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"Name of supplier/vendor"})]})]})]}),e.jsxs("div",{className:"border-b pb-3",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-3",children:"Asset Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s?.requires_registration&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Registration Number"}),e.jsx("input",{type:"text",name:"registration_number",value:p.registration_number,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"e.g., ABC-1234"})]}),s?.requires_serial_number&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",name:"serial_number",value:p.serial_number,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"e.g., SN123456789"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:p.location,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"Where is this asset located?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:p.status||"Active",onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Disposed",children:"Disposed"}),e.jsx("option",{value:"Lost",children:"Lost"}),e.jsx("option",{value:"Damaged",children:"Damaged"}),e.jsx("option",{value:"Under Repair",children:"Under Repair"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Condition"}),e.jsxs("select",{name:"condition",value:p.condition||"",onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",children:[e.jsx("option",{value:"",children:"Select Condition"}),e.jsx("option",{value:"Excellent",children:"Excellent"}),e.jsx("option",{value:"Good",children:"Good"}),e.jsx("option",{value:"Fair",children:"Fair"}),e.jsx("option",{value:"Poor",children:"Poor"})]})]})]})]}),e.jsxs("div",{className:"border-b pb-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900",children:"Custom Details"}),e.jsx("button",{type:"button",onClick:N,className:"bg-blue-600 text-white px-3 py-1 text-xs hover:bg-blue-700",children:"+ Add Custom Field"})]}),g.length===0?e.jsx("p",{className:"text-xs text-gray-500 italic",children:'Click "Add Custom Field" to add your own details like Color, Receipt Number, etc.'}):e.jsx("div",{className:"space-y-2",children:g.map((A,M)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[e.jsx("div",{className:"col-span-5",children:e.jsx("input",{type:"text",value:A.name,onChange:_=>w(M,"name",_.target.value),placeholder:"Field name (e.g., Color)",className:"w-full border border-gray-300 px-2 py-1.5 text-xs"})}),e.jsx("div",{className:"col-span-6",children:e.jsx("input",{type:"text",value:A.value,onChange:_=>w(M,"value",_.target.value),placeholder:"Value (e.g., Red)",className:"w-full border border-gray-300 px-2 py-1.5 text-xs"})}),e.jsx("div",{className:"col-span-1",children:e.jsx("button",{type:"button",onClick:()=>j(M),className:"text-red-600 hover:text-red-800 text-xs font-medium",title:"Remove field",children:""})})]},M))})]}),s&&s.custom_fields&&s.custom_fields.length>0&&e.jsxs("div",{className:"border-b pb-3",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-3",children:"Additional Information"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.custom_fields.map(A=>e.jsxs("div",{className:A.field_type==="textarea"?"md:col-span-2":"",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[A.field_label,A.is_required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),$(A)]},A.id))})]}),e.jsxs("div",{className:"border-b pb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("input",{type:"checkbox",name:"is_opening_balance",checked:p.is_opening_balance,onChange:k,className:"h-3 w-3"}),e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"This is a historical asset (opening balance)"})]}),p.is_opening_balance&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 bg-blue-50 p-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Opening Balance Date"}),e.jsx("input",{type:"date",name:"opening_balance_date",value:p.opening_balance_date,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Amount Already Paid (USD)"}),e.jsx("input",{type:"number",step:"0.01",name:"amount_paid",value:p.amount_paid,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"0.00"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Outstanding: $",(parseFloat(p.total_cost)-parseFloat(p.amount_paid||0)).toFixed(2)]})]})]})]}),e.jsxs("div",{className:"border-b pb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("input",{type:"checkbox",name:"enable_depreciation",checked:p.enable_depreciation,onChange:k,className:"h-3 w-3"}),e.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Enable depreciation tracking (optional)"})]}),p.enable_depreciation&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 bg-gray-50 p-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Depreciation Method"}),e.jsxs("select",{name:"depreciation_method",value:p.depreciation_method,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",children:[e.jsx("option",{value:"Straight Line",children:"Straight Line"}),e.jsx("option",{value:"Declining Balance",children:"Declining Balance"}),e.jsx("option",{value:"Units of Production",children:"Units of Production"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Useful Life (years)"}),e.jsx("input",{type:"number",name:"useful_life_years",value:p.useful_life_years,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"e.g., 5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Salvage Value (USD)"}),e.jsx("input",{type:"number",step:"0.01",name:"salvage_value",value:p.salvage_value,onChange:k,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"0.00"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:i,className:"flex-1 bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 disabled:opacity-50",children:i?"Creating Asset...":"Create Asset"}),e.jsx("button",{type:"button",onClick:()=>window.location.href="/dashboard/assets",className:"flex-1 bg-gray-200 text-gray-700 px-3 py-1.5 text-xs hover:bg-gray-300",children:"Cancel"})]})]})]})},q2="http://localhost:5000/api",gme=()=>{const{id:t}=Tn(),a=Da(),[r,s]=x.useState(null),[n,i]=x.useState(!0),[o,c]=x.useState(""),[u,m]=x.useState("details"),[h,p]=x.useState(!1),[y,g]=x.useState({payment_date:new Date().toISOString().split("T")[0],amount:"",payment_method:"Bank Transfer",payment_account_code:"1000",reference_number:"",description:""}),[v,N]=x.useState(!1),[w,j]=x.useState(!1),[T,k]=x.useState(!1),[R,P]=x.useState({asset_name:"",description:"",location:"",registration_number:"",serial_number:"",supplier_name:""});x.useEffect(()=>{$()},[t]);const $=async()=>{try{i(!0);const L=(await re.get(`${q2}/assets/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.data;s(L),P({asset_name:L.asset_name||"",description:L.description||"",location:L.location||"",registration_number:L.registration_number||"",serial_number:L.serial_number||"",supplier_name:L.supplier_name||""})}catch(C){c(C.response?.data?.message||"Failed to load asset details")}finally{i(!1)}},A=async C=>{C.preventDefault();try{N(!0),c(""),await re.post(`${q2}/assets/${t}/payments`,y,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),p(!1),g({payment_date:new Date().toISOString().split("T")[0],amount:"",payment_method:"Bank Transfer",payment_account_code:"1000",reference_number:"",description:""}),$()}catch(L){const H=L.response?.data?.error||L.response?.data?.message||"Failed to process payment";c(H)}finally{N(!1)}},M=async C=>{C.preventDefault();try{k(!0),await re.put(`${q2}/assets/${t}`,R,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),j(!1),$()}catch(L){alert(L.response?.data?.message||"Failed to update asset")}finally{k(!1)}},_=C=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(C||0),B=C=>C?new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",D=C=>({Active:"bg-green-100 text-green-800",Disposed:"bg-red-100 text-red-800",Lost:"bg-red-100 text-red-800",Damaged:"bg-orange-100 text-orange-800","Under Repair":"bg-yellow-100 text-yellow-800"})[C]||"bg-gray-100 text-gray-800";return n?e.jsx("div",{className:"p-2",children:e.jsx("div",{className:"bg-white p-6 border border-gray-200 text-center",children:e.jsx("p",{className:"text-xs text-gray-600",children:"Loading asset details..."})})}):o?e.jsx("div",{className:"p-2",children:e.jsx("div",{className:"bg-red-50 p-3 border border-red-200",children:e.jsx("p",{className:"text-xs text-red-800",children:o})})}):r?e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-base font-bold text-gray-900",children:r.asset_name}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${D(r.status)}`,children:r.status})]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:[r.asset_type_name,"  ",r.asset_code]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j(!0),className:"bg-blue-600 text-white px-3 py-1.5 text-xs hover:bg-blue-700",children:"Edit Details"}),r.outstanding_balance>0&&e.jsx("button",{onClick:()=>{c(""),p(!0)},className:"bg-green-600 text-white px-3 py-1.5 text-xs hover:bg-green-700",children:"Make Payment"}),e.jsx("button",{onClick:()=>a("/dashboard/assets"),className:"bg-gray-200 text-gray-700 px-3 py-1.5 text-xs hover:bg-gray-300",children:"Back to Assets"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-white p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Total Cost"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 mt-0.5",children:_(r.total_cost)})]}),e.jsxs("div",{className:"bg-white p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Amount Paid"}),e.jsx("p",{className:"text-lg font-bold text-green-600 mt-0.5",children:_(r.amount_paid)})]}),e.jsxs("div",{className:"bg-white p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Outstanding Balance"}),e.jsx("p",{className:"text-lg font-bold text-orange-600 mt-0.5",children:_(r.outstanding_balance)})]}),e.jsxs("div",{className:"bg-white p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Payment Progress"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900 mt-0.5",children:[(r.amount_paid/r.total_cost*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex gap-2 mb-3 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>m("details"),className:`px-3 py-1.5 text-xs font-medium ${u==="details"?"border-b-2 border-gray-900 text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:"Asset Details"}),e.jsx("button",{onClick:()=>m("financial"),className:`px-3 py-1.5 text-xs font-medium ${u==="financial"?"border-b-2 border-gray-900 text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:"Financial Information"}),e.jsx("button",{onClick:()=>m("payments"),className:`px-3 py-1.5 text-xs font-medium ${u==="payments"?"border-b-2 border-gray-900 text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:"Payment History"}),e.jsx("button",{onClick:()=>m("depreciation"),className:`px-3 py-1.5 text-xs font-medium ${u==="depreciation"?"border-b-2 border-gray-900 text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:"Depreciation"})]}),u==="details"&&e.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Asset Code"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.asset_code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Asset Type"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.asset_type_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Asset Name"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.asset_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Purchase Date"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:B(r.purchase_date)})]}),r.registration_number&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Registration Number"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.registration_number})]}),r.serial_number&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Serial Number"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.serial_number})]}),r.location&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Location"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.location})]}),r.supplier_name&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Supplier"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.supplier_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Status"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Condition"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.condition||"N/A"})]})]}),r.description&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Description"}),e.jsx("p",{className:"text-xs text-gray-900 mt-1",children:r.description})]}),r.custom_fields&&Object.keys(r.custom_fields).length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-3",children:"Additional Information"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(r.custom_fields).map(([C,L])=>e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:C.replace(/_/g," ")}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:L||"N/A"})]},C))})]})]}),u==="financial"&&e.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-3",children:"Financial Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Total Cost"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:_(r.total_cost)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Currency"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.currency_code||"USD"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Amount Paid"}),e.jsx("p",{className:"text-xs font-medium text-green-600",children:_(r.amount_paid)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Outstanding Balance"}),e.jsx("p",{className:"text-xs font-medium text-orange-600",children:_(r.outstanding_balance)})]}),r.is_opening_balance&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Opening Balance Entry"}),e.jsx("p",{className:"text-xs font-medium text-blue-600",children:"Yes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Opening Balance Date"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:B(r.opening_balance_date)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"COA Account"}),e.jsxs("p",{className:"text-xs font-medium text-gray-900",children:[r.coa_account_code," - ",r.coa_account_name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Journal Entry ID"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.journal_entry_id||"N/A"})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-2 block",children:"Payment Progress"}),e.jsxs("div",{className:"w-full bg-gray-200 h-6 relative",children:[e.jsx("div",{className:"bg-green-600 h-6 transition-all duration-300",style:{width:`${r.amount_paid/r.total_cost*100}%`}}),e.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-medium text-gray-900",children:[(r.amount_paid/r.total_cost*100).toFixed(1),"% Paid"]})]})]})]}),u==="payments"&&e.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-3",children:"Payment History"}),r.payments&&r.payments.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Method"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Reference"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.payments.map((C,L)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 text-xs text-gray-900",children:B(C.payment_date)}),e.jsx("td",{className:"px-3 py-2 text-xs font-medium text-green-600",children:_(C.amount)}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-600",children:C.payment_method}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-600",children:C.reference_number}),e.jsx("td",{className:"px-3 py-2 text-xs text-gray-600",children:C.description||"-"})]},L))})]})}):e.jsx("p",{className:"text-xs text-gray-600 text-center py-4",children:"No payments recorded yet"})]}),u==="depreciation"&&e.jsxs("div",{className:"bg-white border border-gray-200 p-4",children:[e.jsx("h2",{className:"text-xs font-semibold text-gray-900 mb-3",children:"Depreciation Information"}),r.depreciation_method?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Depreciation Method"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:r.depreciation_method})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Useful Life"}),e.jsxs("p",{className:"text-xs font-medium text-gray-900",children:[r.useful_life_years," years"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Salvage Value"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:_(r.salvage_value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Depreciable Amount"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:_(r.total_cost-(r.salvage_value||0))})]}),r.depreciation_method==="Straight Line"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Annual Depreciation"}),e.jsx("p",{className:"text-xs font-medium text-gray-900",children:_((r.total_cost-(r.salvage_value||0))/r.useful_life_years)})]})]}):e.jsx("p",{className:"text-xs text-gray-600",children:"Depreciation tracking is not enabled for this asset"})]}),h&&e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[o&&e.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-red-100 border border-red-400 text-red-700 px-4 py-3 text-xs max-w-md w-full z-50",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:o}),e.jsx("button",{type:"button",onClick:()=>c(""),className:"text-red-700 hover:text-red-900 font-bold ml-4",children:""})]})}),e.jsxs("div",{className:"bg-white p-4 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-sm font-bold mb-3",children:"Make Payment"}),e.jsxs("form",{onSubmit:A,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Payment Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:y.payment_date,onChange:C=>g({...y,payment_date:C.target.value}),required:!0,className:"w-full border border-gray-300 px-2 py-1.5 text-xs"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:y.amount,onChange:C=>g({...y,amount:C.target.value}),required:!0,max:r.outstanding_balance,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"0.00"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Outstanding: ",_(r.outstanding_balance)]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Payment From ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:y.payment_account_code,onChange:C=>{const L=C.target.value;g({...y,payment_account_code:L,payment_method:L==="1000"?"Cash":"Bank Transfer"})},required:!0,className:"w-full border border-gray-300 px-2 py-1.5 text-xs",children:[e.jsx("option",{value:"1000",children:"Cash"}),e.jsx("option",{value:"1010",children:"Bank Account"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Reference Number"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:y.reference_number,onChange:C=>g({...y,reference_number:C.target.value}),className:"flex-1 border border-gray-300 px-2 py-1.5 text-xs",placeholder:"Optional"}),e.jsx("button",{type:"button",onClick:()=>{const C=`PAY-${r.asset_code}-${Date.now()}`;g({...y,reference_number:C})},className:"bg-gray-200 text-gray-700 px-3 py-1.5 text-xs hover:bg-gray-300 whitespace-nowrap",children:"Auto Generate"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:y.description,onChange:C=>g({...y,description:C.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",rows:"2",placeholder:"Payment notes..."})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{type:"submit",disabled:v,className:"flex-1 bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 disabled:opacity-50",children:v?"Processing...":"Submit Payment"}),e.jsx("button",{type:"button",onClick:()=>p(!1),className:"flex-1 bg-gray-200 text-gray-700 px-3 py-1.5 text-xs hover:bg-gray-300",children:"Cancel"})]})]})]})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-4 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-sm font-bold mb-3",children:"Edit Asset Details"}),e.jsxs("form",{onSubmit:M,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Asset Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:R.asset_name,onChange:C=>P({...R,asset_name:C.target.value}),required:!0,className:"w-full border border-gray-300 px-2 py-1.5 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:R.location,onChange:C=>P({...R,location:C.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"Where is this asset located?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Registration Number"}),e.jsx("input",{type:"text",value:R.registration_number,onChange:C=>P({...R,registration_number:C.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"e.g., ABC-1234"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Serial Number"}),e.jsx("input",{type:"text",value:R.serial_number,onChange:C=>P({...R,serial_number:C.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"e.g., SN123456789"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",value:R.supplier_name,onChange:C=>P({...R,supplier_name:C.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",placeholder:"Name of supplier/vendor"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:R.description,onChange:C=>P({...R,description:C.target.value}),className:"w-full border border-gray-300 px-2 py-1.5 text-xs",rows:"3",placeholder:"Additional details about the asset..."})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{type:"submit",disabled:T,className:"flex-1 bg-gray-900 text-white px-3 py-1.5 text-xs hover:bg-gray-800 disabled:opacity-50",children:T?"Updating...":"Update Asset"}),e.jsx("button",{type:"button",onClick:()=>j(!1),className:"flex-1 bg-gray-200 text-gray-700 px-3 py-1.5 text-xs hover:bg-gray-300",children:"Cancel"})]})]})]})})]}):null},yme=()=>{const[t,a]=x.useState([]),[r,s]=x.useState([]),[n,i]=x.useState(!0),[o,c]=x.useState(""),[u,m]=x.useState(""),[h,p]=x.useState(!1),[y,g]=x.useState(null),[v,N]=x.useState({name:"",description:"",chart_of_account_id:"",depreciation_account_id:"",expense_account_id:"",requires_registration:!1,requires_serial_number:!1,icon:"faBox"});x.useEffect(()=>{w(),j()},[]);const w=async()=>{try{i(!0);const _=localStorage.getItem("token"),B=await re.get("http://localhost:5000/api/assets/types",{headers:{Authorization:`Bearer ${_}`}});a(B.data.data||[]),c("")}catch(_){console.error("Error fetching asset types:",_),c("Failed to fetch asset types")}finally{i(!1)}},j=async()=>{try{const _=localStorage.getItem("token"),B=await re.get("http://localhost:5000/api/accounting/chart-of-accounts",{headers:{Authorization:`Bearer ${_}`}});s(B.data.data||[])}catch(_){console.error("Error fetching chart of accounts:",_)}},T=_=>{const{name:B,value:D,type:C,checked:L}=_.target;N(H=>({...H,[B]:C==="checkbox"?L:D}))},k=()=>{g(null),N({name:"",description:"",chart_of_account_id:"",depreciation_account_id:"",expense_account_id:"",requires_registration:!1,requires_serial_number:!1,icon:"faBox"}),p(!0),c(""),m("")},R=_=>{g(_),N({name:_.name||"",description:_.description||"",chart_of_account_id:_.chart_of_account_id||"",depreciation_account_id:_.depreciation_account_id||"",expense_account_id:_.expense_account_id||"",requires_registration:_.requires_registration||!1,requires_serial_number:_.requires_serial_number||!1,icon:_.icon||"faBox"}),p(!0),c(""),m("")},P=async _=>{_.preventDefault(),i(!0),c(""),m("");try{const B=localStorage.getItem("token"),D=y?`http://localhost:5000/api/assets/types/${y.id}`:"http://localhost:5000/api/assets/types";await re[y?"put":"post"](D,v,{headers:{Authorization:`Bearer ${B}`}}),m(y?"Asset type updated successfully":"Asset type created successfully"),p(!1),w(),setTimeout(()=>m(""),3e3)}catch(B){console.error("Error saving asset type:",B),c(B.response?.data?.error||"Failed to save asset type")}finally{i(!1)}},$=async _=>{if(window.confirm("Are you sure you want to delete this asset type? This action cannot be undone."))try{i(!0);const B=localStorage.getItem("token");await re.delete(`http://localhost:5000/api/assets/types/${_}`,{headers:{Authorization:`Bearer ${B}`}}),m("Asset type deleted successfully"),w(),setTimeout(()=>m(""),3e3)}catch(B){console.error("Error deleting asset type:",B),c(B.response?.data?.error||"Failed to delete asset type")}finally{i(!1)}},A=()=>r.filter(_=>_.type==="Asset"&&_.is_active),M=()=>r.filter(_=>_.type==="Expense"&&_.is_active);return n&&t.length===0?e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Loading asset types..."})})}):e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ss,{to:"/dashboard/assets",className:"text-gray-600 hover:text-gray-900",children:e.jsx(I,{icon:fm})}),e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Fixed Assets Configuration"})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Manage asset types and their settings"})]}),e.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white text-xs rounded hover:bg-blue-700",children:[e.jsx(I,{icon:Ht}),"Add Asset Type"]})]}),o&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 text-xs rounded",children:o}),u&&e.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 text-xs rounded",children:u}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"Chart of Account"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"Requires Registration"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"Requires Serial #"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:'No asset types found. Click "Add Asset Type" to create one.'})}):t.map(_=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{icon:cE,className:"text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-900",children:_.name})]})}),e.jsx("td",{className:"px-4 py-2 text-gray-600",children:_.description||"-"}),e.jsxs("td",{className:"px-4 py-2 text-gray-600",children:[_.account_code," - ",_.account_name]}),e.jsx("td",{className:"px-4 py-2",children:_.requires_registration?e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-800 rounded text-xs",children:"Yes"}):e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-800 rounded text-xs",children:"No"})}),e.jsx("td",{className:"px-4 py-2",children:_.requires_serial_number?e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-800 rounded text-xs",children:"Yes"}):e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-800 rounded text-xs",children:"No"})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>R(_),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:e.jsx(I,{icon:Aa})}),e.jsx("button",{onClick:()=>$(_.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:e.jsx(I,{icon:sa})})]})})]},_.id))})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-gray-900",children:y?"Edit Asset Type":"Add New Asset Type"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{icon:Wt})})]}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:v.name,onChange:T,required:!0,className:"w-full border border-gray-300 px-3 py-2 text-xs rounded",placeholder:"e.g., Vehicles, Equipment"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Icon"}),e.jsx("input",{type:"text",name:"icon",value:v.icon,onChange:T,className:"w-full border border-gray-300 px-3 py-2 text-xs rounded",placeholder:"faBox"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:v.description,onChange:T,rows:"2",className:"w-full border border-gray-300 px-3 py-2 text-xs rounded",placeholder:"Brief description of this asset type"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Chart of Account ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"chart_of_account_id",value:v.chart_of_account_id,onChange:T,required:!0,className:"w-full border border-gray-300 px-3 py-2 text-xs rounded",children:[e.jsx("option",{value:"",children:"Select Account"}),A().map(_=>e.jsxs("option",{value:_.id,children:[_.code," - ",_.name]},_.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Depreciation Account"}),e.jsxs("select",{name:"depreciation_account_id",value:v.depreciation_account_id,onChange:T,className:"w-full border border-gray-300 px-3 py-2 text-xs rounded",children:[e.jsx("option",{value:"",children:"Select Account (Optional)"}),M().map(_=>e.jsxs("option",{value:_.id,children:[_.code," - ",_.name]},_.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Expense Account"}),e.jsxs("select",{name:"expense_account_id",value:v.expense_account_id,onChange:T,className:"w-full border border-gray-300 px-3 py-2 text-xs rounded",children:[e.jsx("option",{value:"",children:"Select Account (Optional)"}),M().map(_=>e.jsxs("option",{value:_.id,children:[_.code," - ",_.name]},_.id))]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"requires_registration",checked:v.requires_registration,onChange:T,className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Requires Registration Number"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"requires_serial_number",checked:v.requires_serial_number,onChange:T,className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Requires Serial Number"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-xs border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:n?"Saving...":y?"Update":"Create"})]})]})]})})]})};function bme(){return e.jsx(XR,{children:e.jsx(UR,{children:e.jsx(vme,{})})})}function vme(){const{isAuthenticated:t,isLoading:a}=At();return a?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"text-gray-500",children:"Loading..."})}):e.jsxs(LR,{children:[e.jsx(Pt,{path:"/",element:t?e.jsx(_v,{to:"/dashboard",replace:!0}):e.jsx(HF,{})}),e.jsxs(Pt,{path:"/dashboard",element:t?e.jsx(UF,{}):e.jsx(_v,{to:"/",replace:!0}),children:[e.jsx(Pt,{index:!0,element:e.jsx(Nle,{})}),e.jsx(Pt,{path:"students",element:e.jsx(Sle,{})}),e.jsx(Pt,{path:"students/add",element:e.jsx(_le,{})}),e.jsx(Pt,{path:"students/edit/:id",element:e.jsx(Cle,{})}),e.jsx(Pt,{path:"students/view/:id",element:e.jsx(kle,{})}),e.jsx(Pt,{path:"employees",element:e.jsx(Lle,{})}),e.jsx(Pt,{path:"employees/add",element:e.jsx(Mle,{})}),e.jsx(Pt,{path:"employees/edit/:id",element:e.jsx(Ile,{})}),e.jsx(Pt,{path:"employees/view/:id",element:e.jsx(Rle,{})}),e.jsx(Pt,{path:"classes",element:e.jsx(qle,{})}),e.jsx(Pt,{path:"classes/gradelevel-classes/add",element:e.jsx(Ule,{})}),e.jsx(Pt,{path:"classes/gradelevel-classes/edit/:id",element:e.jsx(Wle,{})}),e.jsx(Pt,{path:"classes/gradelevel-classes/view/:id",element:e.jsx(Gle,{})}),e.jsx(Pt,{path:"classes/subject-classes/view/:id",element:e.jsx(Xle,{})}),e.jsx(Pt,{path:"classes/class-term-year",element:e.jsx(pue,{})}),e.jsx(Pt,{path:"classes/configurations",element:e.jsx(gue,{})}),e.jsx(Pt,{path:"classes/close-to-term",element:e.jsx(Vle,{})}),e.jsx(Pt,{path:"configurations",element:e.jsx(Fle,{})}),e.jsx(Pt,{path:"settings",element:e.jsx(Ole,{})}),e.jsx(Pt,{path:"accounting/chart-of-accounts",element:e.jsx(Qle,{})}),e.jsx(Pt,{path:"accounting/chart-of-accounts/view/:id",element:e.jsx(eoe,{})}),e.jsx(Pt,{path:"accounting/cash-bank",element:e.jsx(toe,{})}),e.jsx(Pt,{path:"accounting/general-ledger",element:e.jsx(jue,{})}),e.jsx(Pt,{path:"accounting/trial-balance",element:e.jsx(aoe,{})}),e.jsx(Pt,{path:"accounting/bank-reconciliation",element:e.jsx(Nue,{})}),e.jsx(Pt,{path:"accounting/periods",element:e.jsx(Sue,{})}),e.jsx(Pt,{path:"accounting/period-closing",element:e.jsx(wue,{})}),e.jsx(Pt,{path:"expenses/suppliers",element:e.jsx(roe,{})}),e.jsx(Pt,{path:"expenses/expenses",element:e.jsx(soe,{})}),e.jsx(Pt,{path:"expenses/expenses/add",element:e.jsx(noe,{})}),e.jsx(Pt,{path:"expenses/expenses/edit/:id",element:e.jsx(ioe,{})}),e.jsx(Pt,{path:"expenses/accounts-payable",element:e.jsx(loe,{})}),e.jsx(Pt,{path:"results",element:e.jsx(ooe,{})}),e.jsx(Pt,{path:"results/grading",element:e.jsx(coe,{})}),e.jsx(Pt,{path:"results/entry/:classId",element:e.jsx(doe,{})}),e.jsx(Pt,{path:"results/view/:classId",element:e.jsx(uoe,{})}),e.jsx(Pt,{path:"results/student/:classId/:studentId",element:e.jsx(moe,{})}),e.jsx(Pt,{path:"results/coursework",element:e.jsx(hoe,{})}),e.jsx(Pt,{path:"boarding",element:e.jsx(foe,{})}),e.jsx(Pt,{path:"boarding/hostel/:id",element:e.jsx(poe,{})}),e.jsx(Pt,{path:"enrollments",element:e.jsx(boe,{})}),e.jsx(Pt,{path:"fees-payment",element:e.jsx(uue,{})}),e.jsx(Pt,{path:"all-payments",element:e.jsx(fue,{})}),e.jsx(Pt,{path:"invoice-structures",element:e.jsx(wL,{})}),e.jsx(Pt,{path:"students/statement",element:e.jsx(yue,{})}),e.jsx(Pt,{path:"students/balances",element:e.jsx(SL,{})}),e.jsx(Pt,{path:"students/manual-balance-update",element:e.jsx(TO,{})}),e.jsx(Pt,{path:"fees/unified-payment",element:e.jsx(bue,{})}),e.jsx(Pt,{path:"financial-records",element:e.jsx(_L,{})}),e.jsx(Pt,{path:"waivers",element:e.jsx(TL,{})}),e.jsx(Pt,{path:"assets",element:e.jsx(fme,{})}),e.jsx(Pt,{path:"assets/add",element:e.jsx(pme,{})}),e.jsx(Pt,{path:"assets/configurations",element:e.jsx(yme,{})}),e.jsx(Pt,{path:"assets/:id",element:e.jsx(gme,{})}),e.jsx(Pt,{path:"reports/income-statement",element:e.jsx(_ue,{})}),e.jsx(Pt,{path:"reports/balance-sheet",element:e.jsx(Cue,{})}),e.jsx(Pt,{path:"reports/cash-flow",element:e.jsx(kue,{})}),e.jsx(Pt,{path:"analytics/expense-analysis",element:e.jsx(Aue,{})}),e.jsx(Pt,{path:"analytics/revenue-analysis",element:e.jsx(Eue,{})}),e.jsx(Pt,{path:"analytics/student-financial-analytics",element:e.jsx(Tue,{})}),e.jsx(Pt,{path:"analytics/student-results-analytics",element:e.jsx(Pue,{})}),e.jsx(Pt,{path:"procurement",element:e.jsx(Due,{})}),e.jsx(Pt,{path:"procurement/purchase-requests",element:e.jsx(Oue,{})}),e.jsx(Pt,{path:"procurement/suppliers",element:e.jsx(Lue,{})}),e.jsx(Pt,{path:"procurement/purchase-orders",element:e.jsx(Mue,{})}),e.jsx(Pt,{path:"payroll",element:e.jsx(Rue,{})}),e.jsx(Pt,{path:"payroll/create",element:e.jsx(zue,{})}),e.jsx(Pt,{path:"payroll/payslips",element:e.jsx(Iue,{})}),e.jsx(Pt,{path:"transport",element:e.jsx(_v,{to:"/dashboard/transport/routes",replace:!0})}),e.jsx(Pt,{path:"transport/routes",element:e.jsx($ue,{})}),e.jsx(Pt,{path:"transport/registrations",element:e.jsx(Bue,{})}),e.jsx(Pt,{path:"transport/registrations/add",element:e.jsx(Wue,{})}),e.jsx(Pt,{path:"transport/fees",element:e.jsx(Fue,{})}),e.jsx(Pt,{path:"transport/schedule",element:e.jsx(que,{})}),e.jsx(Pt,{path:"transport/payments",element:e.jsx(Uue,{})}),e.jsx(Pt,{path:"inventory",element:e.jsx(Hue,{})}),e.jsx(Pt,{path:"inventory/add-item",element:e.jsx(CL,{})}),e.jsx(Pt,{path:"inventory/issue-uniform",element:e.jsx(kL,{})}),e.jsx(Pt,{path:"inventory/configurations",element:e.jsx(AL,{})}),e.jsx(Pt,{path:"announcements",element:e.jsx(Yue,{})}),e.jsx(Pt,{path:"announcements/add",element:e.jsx(Gue,{})}),e.jsx(Pt,{path:"announcements/edit/:id",element:e.jsx(Vue,{})}),e.jsx(Pt,{path:"billing",element:e.jsx(Jue,{})}),e.jsx(Pt,{path:"billing/additional-fees",element:e.jsx(EL,{})}),e.jsx(Pt,{path:"timetables",element:e.jsx(Zue,{})}),e.jsx(Pt,{path:"timetables/template/:id",element:e.jsx(tme,{})}),e.jsx(Pt,{path:"timetables/template/:id/edit",element:e.jsx(ime,{})}),e.jsx(Pt,{path:"timetables/test",element:e.jsx(cme,{})}),e.jsx(Pt,{path:"sports",element:e.jsx(xme,{})})]}),e.jsx(Pt,{path:"*",element:e.jsx(wle,{})})]})}qM.createRoot(document.getElementById("root")).render(e.jsx(x.StrictMode,{children:e.jsx(bme,{})}));export{fr as _,jme as c,oc as g};
